"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8914],{78914:function(Ee,ee,t){t.d(ee,{Z:function(){return Oe}});var ne=t(5574),C=t.n(ne),te=t(15009),h=t.n(te),re=t(99289),w=t.n(re),ae=t(80271),W=t(73813),ie=t(43425),oe=t(95591),le=t(40666),se=t(1912),ue=t(77171),de=t(82061),B=t(1883),R=t(38345),ce=t(89359),fe=t(82346),M=t(42075),K=t(83622),ve=t(96074),N=t(66309),V=t(25593),o=t(26412),me=t(60940),l=t(67294),Q=t(80821),k=t(5251),q=t(184),ge=t(97269),G=t(62370),he=t(25278),_=t(2487),xe=t(4393),je=t(65913),H=t(3616),D=t(36146),b=t(68297),n=t(85893),Ze=(0,l.forwardRef)(function(y,P){(0,l.useImperativeHandle)(P,function(){return{show:function(u){return w()(h()().mark(function I(){var E,L;return h()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return v(!0),(E=O.current)===null||E===void 0||E.show(),r.prev=2,r.next=5,(0,b.aw)({imageName:u}).finally(function(){var i;(i=O.current)===null||i===void 0||i.destroy()});case 5:L=r.sent,p(L.data.list),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(2),v(!1);case 12:case"end":return r.stop()}},I,null,[[2,9]])}))()}}});var S=(0,l.useState)(),T=C()(S,2),s=T[0],p=T[1],g=(0,l.useState)(""),Z=C()(g,2),c=Z[0],e=Z[1],j=(0,l.useState)(!1),F=C()(j,2),$=F[0],v=F[1],O=(0,l.useRef)(),U=new D.Uo("image");return(0,n.jsx)(q.a,{open:$,onOpenChange:function(u){v(u),!u&&p(void 0)},title:U.format("remoteTagTitle"),isKeyPressSubmit:!0,submitter:!1,drawerProps:{width:H.R_,extra:(0,n.jsx)(ge.A,{isKeyPressSubmit:!0,onFinish:function(u){e(u.search)},submitter:!1,children:(0,n.jsx)(M.Z.Compact,{children:(0,n.jsx)(G.Z,{style:{margin:0},name:"search",children:(0,n.jsx)(he.Z,{allowClear:!0,addonBefore:U.format("remoteSearch"),placeholder:U.format("remoteSearchEmpty"),onClear:function(){e("")}})})})})},children:(0,n.jsx)(je.Z,{ref:O,children:(0,n.jsx)(_.Z,{rowKey:function(u){return"".concat(u)},pagination:{pageSize:50},grid:{gutter:10,column:2},dataSource:s&&s.filter(function(x){return!c||x.toLocaleLowerCase().indexOf(c.toLocaleLowerCase())!==-1}),loading:!s||(s==null?void 0:s.length)<=0,renderItem:function(u,I){return(0,n.jsx)(_.Z.Item,{children:(0,n.jsx)(xe.Z,{style:{height:"80px"},children:(0,n.jsx)(V.Z.Text,{copyable:!0,children:u})})},I)}})})},"form")}),Ce=Ze,ye=t(64789),Se=t(5966),Te=t(2205);function pe(y){var P=(0,l.useRef)(),S=(0,l.useState)(!1),T=C()(S,2),s=T[0],p=T[1],g=new D.Uo("image");return(0,n.jsxs)(q.a,{drawerProps:{width:H.R_},open:s,title:g.format("tagTitle"),onOpenChange:function(c){var e;p(c),!c&&((e=P.current)===null||e===void 0||e.resetFields())},formRef:P,onFinish:function(){var Z=w()(h()().mark(function c(e){var j,F;return h()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,(0,b.Qd)({md5:(j=y.imageInfo.info.Id)!==null&&j!==void 0?j:"",tag:(e.registryUrl?e.registryUrl+"/":"")+e.imageTag});case 2:return F=v.sent,p(!1),y.onFinish&&y.onFinish(),v.abrupt("return",!0);case 6:case"end":return v.stop()}},c)}));return function(c){return Z.apply(this,arguments)}}(),trigger:(0,n.jsx)(K.ZP,{icon:(0,n.jsx)(ye.Z,{}),children:g.format("tagTitle")}),children:[(0,n.jsx)(G.Z,{label:g.format("tagRegistry"),name:"registryUrl",tooltip:g.format("tagRegistryTip"),children:(0,n.jsx)(G.Z,{shouldUpdate:!0,children:function(c){return(0,n.jsx)(Te.Z,{onChange:function(j){c.setFieldValue("registryUrl",j.serverAddress)}})}})}),(0,n.jsx)(Se.Z,{fieldProps:{min:2,max:255},rules:[{required:!0}],required:!0,placeholder:g.format("tagImageTagEmpty"),label:g.format("tagImageTag"),name:"imageTag",tooltip:g.format("tagImageTagTip")})]})}var Ie=t(24963),Y=t(1699),Re=t(78451),Pe=t(27166),Fe=(0,l.forwardRef)(function(y,P){var S;(0,l.useImperativeHandle)(P,function(){return{show:function(i){return w()(h()().mark(function a(){return h()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return O(!0),d.next=3,X(i);case 3:case"end":return d.stop()}},a)}))()}}});var T=(0,fe.useAccess)(),s=new D.Uo("components.image"),p=(0,l.useContext)(Ie.Z),g=p.message,Z=(0,l.useState)(),c=C()(Z,2),e=c[0],j=c[1],F=(0,l.useState)(!1),$=C()(F,2),v=$[0],O=$[1],U=(0,l.useState)(0),x=C()(U,2),u=x[0],I=x[1],E=(0,l.useRef)(),L=(0,l.useRef)(),X=function(){var r=w()(h()().mark(function i(a){var m,d;return h()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return(m=L.current)===null||m===void 0||m.loading(),f.next=3,(0,W.YU)({md5:a,showLayer:!0}).finally(function(){var z;(z=L.current)===null||z===void 0||z.finish()});case 3:d=f.sent,j(d.data);case 5:case"end":return f.stop()}},i)}));return function(a){return r.apply(this,arguments)}}();return(0,l.useEffect)(function(){e&&X(e==null?void 0:e.info.Id)},[u]),(0,n.jsxs)(Pe.Z,{drawerProps:{width:H.R_},submitter:!1,ref:L,title:s.format("quickTitle"),open:v,onOpenChange:function(i){O(i),i||y.onClose&&y.onClose()},children:[!T.canSeeEnableCe&&(0,n.jsx)(Ce,{ref:E}),(0,n.jsxs)(R.Z,{direction:"column",ghost:!0,gutter:[0,10],children:[(0,n.jsx)(R.Z,{title:(0,n.jsx)(ie.Z,{}),subTitle:s.format("quickDetailManageTitle"),ghost:!0,children:(0,n.jsxs)(M.Z,{children:[(e==null?void 0:e.info)&&(0,n.jsx)(Y.u,{access:"canSeeEnableCe",showProTips:!0,children:function(i){var a=i.canSeeEnableCe;return(0,n.jsx)(ae.Z,{trigger:(0,n.jsx)(K.ZP,{disabled:a,icon:(0,n.jsx)(oe.Z,{}),children:D.FD.format("listManageFilePath")}),imageId:e.info.Id})}}),(0,n.jsx)(ve.Z,{type:"vertical"}),(e==null?void 0:e.info)&&(0,n.jsx)(pe,{imageInfo:e,onFinish:function(){I(u+1)}})]})},"manage"),(0,n.jsx)(R.Z,{title:(0,n.jsx)(le.Z,{}),subTitle:s.format("quickTagTitle"),ghost:!0,children:(0,n.jsx)(ce.Rs,{grid:{gutter:40,column:2},headerTitle:!1,metas:{content:{render:function(i,a,m){return(0,n.jsx)(N.Z,{color:"blue",children:(0,n.jsx)(V.Z.Text,{copyable:!0,children:a})},m)}},title:{render:function(i,a,m){return(0,n.jsxs)(M.Z,{children:[(0,n.jsx)(Q.Z,{buttonProps:{icon:(0,n.jsx)(se.Z,{})},action:function(){return(0,b.Ze)({tag:a,type:"push"})},children:"Push"}),(0,n.jsx)(Q.Z,{buttonProps:{icon:(0,n.jsx)(ue.Z,{})},action:function(){return(0,b.Ze)({tag:a,type:"pull"})},children:"Pull"}),(0,n.jsx)(Y.u,{access:"canSeeEnableCe",showProTips:!0,showProTipsOffset:[-15,9],children:function(A){var f=A.canSeeEnableCe;return(0,n.jsx)(K.ZP,{disabled:f,onClick:function(){var J;(J=E.current)===null||J===void 0||J.show(a)},children:s.format("quickRemoteTagButton")})}}),(0,n.jsx)(Y.u,{access:"canSeeImageListManage",children:(0,n.jsx)(Q.Z,{buttonProps:{danger:!0},confirmProps:{showCommonConfirm:!0},action:function(){return(0,b.cV)({tag:a})},onSuccess:function(A){return I(u+1),!0},children:(0,n.jsx)(de.Z,{})})})]},m)}}},dataSource:e==null?void 0:e.info.RepoTags})}),e&&(0,n.jsx)(R.Z,{title:(0,n.jsx)(B.Z,{}),subTitle:s.format("quickDetail"),ghost:!0,children:(0,n.jsxs)(o.Z,{styles:{label:{width:150}},column:1,bordered:!0,children:[(0,n.jsx)(o.Z.Item,{label:"ID",children:(0,n.jsx)(V.Z.Text,{editable:{tooltip:s.format("quickDetailManageEditNameTip"),onChange:function(){var r=w()(h()().mark(function a(m){var d;return h()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,(0,W.Fj)({tag:e==null?void 0:e.info.RepoTags[0],title:m});case 2:d=f.sent,I(u+1),g.success(D.FD.format("finish"));case 5:case"end":return f.stop()}},a)}));function i(a){return r.apply(this,arguments)}return i}()},children:e==null?void 0:e.info.Id.substring(7,19)})}),(0,n.jsx)(o.Z.Item,{label:"Parent",children:e==null?void 0:e.info.Parent}),(0,n.jsx)(o.Z.Item,{label:"Size",children:(0,k.FI)((S=e==null?void 0:e.info.Size)!==null&&S!==void 0?S:0)}),(0,n.jsx)(o.Z.Item,{label:"Created",children:e==null?void 0:e.info.Created}),(0,n.jsxs)(o.Z.Item,{label:"Build",children:["Docker ",e==null?void 0:e.info.DockerVersion," ",e==null?void 0:e.info.Os," ",e==null?void 0:e.info.Architecture]}),(0,n.jsx)(o.Z.Item,{label:"Labels",children:(0,n.jsx)(o.Z,{column:1,bordered:!0,children:(e==null?void 0:e.info.Config.Labels)&&Object.keys(e==null?void 0:e.info.Config.Labels).map(function(r){return(0,n.jsx)(o.Z.Item,{label:r,children:e==null?void 0:e.info.Config.Labels[r]},r)})})})]})}),(0,n.jsx)(R.Z,{title:(0,n.jsx)(B.Z,{}),subTitle:s.format("quickDockerfileTitle"),ghost:!0,children:(0,n.jsxs)(o.Z,{styles:{label:{width:150}},column:1,bordered:!0,children:[(0,n.jsx)(o.Z.Item,{label:"CMD",children:e==null?void 0:e.info.Config.Cmd}),(0,n.jsx)(o.Z.Item,{label:"ENTRYPOINT",children:e==null?void 0:e.info.Config.Entrypoint}),(0,n.jsx)(o.Z.Item,{label:"EXPOSE",children:(e==null?void 0:e.info.Config.ExposedPorts)&&Object.keys(e==null?void 0:e.info.Config.ExposedPorts).map(function(r){return(0,n.jsx)(N.Z,{color:"gray",children:r},r)})}),(0,n.jsx)(o.Z.Item,{label:"VOLUME",children:(e==null?void 0:e.info.Config.Volumes)&&Object.keys(e==null?void 0:e.info.Config.Volumes).map(function(r){return(0,n.jsx)(N.Z,{color:"gray",children:r},r)})}),(0,n.jsx)(o.Z.Item,{label:"Env",children:(0,n.jsx)(o.Z,{column:1,bordered:!0,children:(e==null?void 0:e.info.Config.Env)&&(e==null?void 0:e.info.Config.Env.map(function(r,i){var a=r.split("=");return(0,n.jsx)(o.Z.Item,{label:a[0],children:a[1]},i)}))})})]})}),(e==null?void 0:e.layer)&&(0,n.jsx)(R.Z,{title:(0,n.jsx)(B.Z,{}),subTitle:"Layers",ghost:!0,children:(0,n.jsx)(me.Z,{rowKey:"CreatedBy",dataSource:e.layer.reverse(),columns:[{title:"Size",key:"size",render:function(i,a,m){return(0,k.FI)(a.Size)}},{title:"Layer",dataIndex:"CreatedBy",key:"CreatedBy",render:function(i,a,m){return(0,n.jsx)(Re.Z,{content:a.CreatedBy})}}]})})]})]})}),Oe=Fe}}]);
