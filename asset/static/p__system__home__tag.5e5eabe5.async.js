"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2440],{96788:function(ee,T,e){e.r(T),e.d(T,{default:function(){return Ee}});var B=e(97857),i=e.n(B),A=e(15009),o=e.n(A),m=e(99289),v=e.n(m),D=e(5574),C=e.n(D),p=e(1699),b=e(91218),g=e(41477),U=e(90127),h=e(80821),l=e(29453),P=e(90098),r=e(13822),f=e(89075),ne=e(5251),te=e(40666),ae=e(58638),re=e(74842),se=e(87784),_e=e(43425),oe=e(74453),W=e(38345),z=e(63713),K=e(23345),S=e(83622),le=e(86250),Y=e(32983),ie=e(83062),ue=e(71230),y=e(15746),de=e(68997),Z=e(25593),ce=e(85418),O=e(67294),J=e(36146),n=e(85893);function Ee(){var me=(0,O.useState)([]),V=C()(me,2),x=V[0],pe=V[1],he=(0,O.useState)(1),X=C()(he,2),L=X[0],$=X[1],Q=(0,z.useAccess)(),G=(0,O.useRef)(),w=(0,O.useRef)(),k=(0,O.useRef)(),j=new J.Uo("system.home.tag");(0,O.useEffect)(function(){Pe()},[L]);function Pe(){return H.apply(this,arguments)}function H(){return H=v()(o()().mark(function N(){return o()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(u.t0=Q.canSeeEnableHomeTag,!u.t0){u.next=4;break}return u.next=4,(0,f.ax)();case 4:Q.canSeeEnableHomeTag&&(0,l.e1)().then(function(){var E=v()(o()().mark(function I(t){var M;return o()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.prev=0,_.next=3,(0,r.IE)();case 3:M=_.sent,_.next=8;break;case 6:_.prev=6,_.t0=_.catch(0);case 8:t.data.list&&pe(t.data.list.filter(function(s){return s.enableShowGroup}).map(function(s){return!s.item||s.item.length==0||(s.item=s.item.map(function(a){if(!M)return a;var c=M.data.list&&M.data.list.find(function(fe){var F;return fe.Names.includes((F=a.name)!==null&&F!==void 0?F:"")});if(c){var d;a.containerState=c.State,a.containerComposeName=(d=c.Labels&&c.Labels["com.docker.compose.project"])!==null&&d!==void 0?d:""}return a})),s}));case 9:case"end":return _.stop()}},I,null,[[0,6]])}));return function(I){return E.apply(this,arguments)}}());case 5:case"end":return u.stop()}},N)})),H.apply(this,arguments)}return(0,n.jsx)(oe._z,{extra:(0,n.jsxs)(K.Z,{children:[(0,n.jsx)(p.u,{access:"canSeeEnableHomeTag",children:(0,n.jsx)(U.Z,{ref:G,defaultEnableShowGroup:!0,trigger:(0,n.jsx)(S.ZP,{type:"primary",children:j.format("createButton")}),onFinish:function(){$(L+1)}})}),(0,n.jsx)(g.Z,{ref:w}),(0,n.jsx)(b.Z,{ref:k})]}),children:(0,n.jsx)(p.u,{access:"canSeeEnableHomeTag",showProRibbonTips:!0,children:function(q){var u=q.canSeeEnableHomeTag;return(0,n.jsxs)(W.Z,{direction:"column",children:[(!u||!x||x.length==0)&&(0,n.jsx)(le.Z,{justify:"center",style:{height:"58vh"},vertical:!0,children:(0,n.jsx)(Y.Z,{image:Y.Z.PRESENTED_IMAGE_SIMPLE,description:(0,n.jsxs)(n.Fragment,{children:[j.format("emptyTip")," ",(0,n.jsx)(z.Link,{to:"/app/list",children:J.Ob.format("container.list")})]})})}),u&&x.map(function(E,I){return(0,n.jsx)(W.Z,{title:(0,n.jsx)(te.Z,{}),subTitle:E.tag,direction:"row",gutter:[15,15],headerBordered:!0,bodyStyle:{paddingTop:20,marginBottom:10},ghost:!0,wrap:!0,children:E.item.map(function(t,M){var R,_;return t.url&&t.title&&(0,n.jsx)(W.Z,{bordered:!0,hoverable:!0,colSpan:{xs:24,sm:12,md:12,lg:12,xl:8,xxl:6},bodyStyle:{height:80},children:(0,n.jsx)(ie.Z,{title:t.description,children:(0,n.jsxs)(ue.Z,{align:"middle",gutter:[10,0],children:[(0,n.jsx)(y.Z,{span:5,children:(0,n.jsx)(de.Z,{shape:"square",src:(R=t.icon)!==null&&R!==void 0?R:"",gap:10,size:"large",children:(0,ne.fi)((_=t.name)!==null&&_!==void 0?_:t.title,"/").substring(0,1)})}),(0,n.jsxs)(y.Z,{span:t.containerState?14:17,children:[(0,n.jsx)(Z.Z.Title,{level:5,children:(0,n.jsx)("a",{target:"_blank",href:t.url,children:(0,n.jsxs)(K.Z,{children:[t.title&&t.title.substring(0,13),(0,n.jsx)(ae.Z,{})]})})}),(0,n.jsx)(Z.Z.Text,{ellipsis:!0,children:t.description})]}),(0,n.jsx)(y.Z,{span:t.containerState?5:2,children:(0,n.jsxs)(K.Z,{children:[t.containerState&&(0,n.jsx)(h.Z,{action:v()(o()().mark(function s(){var a;return o()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!t.containerComposeName){d.next=2;break}return d.abrupt("return",(0,P.GG)({id:t.containerComposeName,op:t.containerState=="running"?"stop":"start"}));case 2:return d.abrupt("return",(0,r.IW)({md5:(a=t.name)!==null&&a!==void 0?a:"",operate:t.containerState=="running"?"stop":"start"}));case 3:case"end":return d.stop()}},s)})),onSuccess:function(){$(L+1)},buttonProps:{type:"link",icon:(0,n.jsx)("div",{style:t.containerState=="running"?{color:"red"}:void 0,children:t.containerState&&t.containerState!="running"?(0,n.jsx)(re.Z,{}):(0,n.jsx)(se.Z,{})})}}),(0,n.jsx)(ce.Z,{trigger:["click"],menu:{items:[{label:t.containerState&&(0,n.jsx)(S.ZP,{onClick:function(){if(t.containerComposeName){var a;(a=k.current)===null||a===void 0||a.show(t.containerComposeName)}else{var c;(c=w.current)===null||c===void 0||c.show(t.name)}},type:"link",children:j.format("itemDetailButton")}),key:"detail"},{label:(0,n.jsx)(S.ZP,{onClick:function(){var a;!((a=G.current)===null||a===void 0)&&a.edit&&G.current.edit(i()({tag:E.tag,tagColor:E.tagColor,enableShowGroup:E.enableShowGroup},t))},type:"link",children:j.format("itemEditButton")}),key:"1"},{label:(0,n.jsx)(h.Z,{action:function(){var a;return(0,l.rn)({name:(a=t.name)!==null&&a!==void 0?a:"",tag:E.tag})},onSuccess:function(){$(L+1)},buttonProps:{type:"link"},children:j.format("itemDelete")}),key:"2"}]},children:(0,n.jsx)(Z.Z.Link,{children:(0,n.jsx)(_e.Z,{})})})]})})]})})},M)})},"group-".concat(I))})]})}})})}},89075:function(ee,T,e){e.d(T,{$w:function(){return v},E1:function(){return U},YQ:function(){return C},ax:function(){return b}});var B=e(15009),i=e.n(B),A=e(99289),o=e.n(A),m=e(63713);function v(){return D.apply(this,arguments)}function D(){return D=o()(i()().mark(function l(){return i()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,m.request)("/dpanel/api/pro/home/get-machine-id",{method:"POST"}));case 1:case"end":return r.stop()}},l)})),D.apply(this,arguments)}function C(){return p.apply(this,arguments)}function p(){return p=o()(i()().mark(function l(){return i()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,m.request)("/dpanel/api/pro/home/get-license-info",{method:"POST"}));case 1:case"end":return r.stop()}},l)})),p.apply(this,arguments)}function b(){return g.apply(this,arguments)}function g(){return g=o()(i()().mark(function l(){return i()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,m.request)("/dpanel/api/pro/home/login-info",{method:"POST"}));case 1:case"end":return r.stop()}},l)})),g.apply(this,arguments)}function U(l){return h.apply(this,arguments)}function h(){return h=o()(i()().mark(function l(P){return i()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",(0,m.request)("/dpanel/api/pro/home/upload-license-file",{method:"POST",data:P}));case 1:case"end":return f.stop()}},l)})),h.apply(this,arguments)}}}]);
