"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1050],{1699:function(ee,K,n){n.d(K,{u:function(){return O}});var V=n(9783),b=n.n(V),N=n(97857),Z=n.n(N),H=n(67294),p=n(82346),A=n(40411),m=n(42075),B=n(85893),O=function(U){var J=(0,p.useAccess)(),o=Array.isArray(U.access)?U.access:[U.access],W,x=U.fallback;if(typeof U.children=="function"?(W=U.children(o.reduce(function(L,P){return Z()(Z()({},L),{},b()({},P,J[P]))},{})),W||(W=x)):o.every(function(L){return J[L]})?W=U.children:W=x,!x&&W&&U.showProTips&&J.canSeeEnableCe){if(J.canSeeEnableHiddenProTips)return null;W=(0,B.jsx)(A.Z,{offset:U.showProTipsOffset,count:"PRO",color:"gold",style:{fontWeight:"bold"},children:W})}if(!x&&W&&U.showProRibbonTips&&J.canSeeEnableCe){if(J.canSeeEnableHiddenProTips)return null;W=(0,B.jsx)(A.Z.Ribbon,{text:"PRO",color:"gold",style:{fontWeight:"bold"},children:W})}return U.space?(0,B.jsx)(m.Z,Z()(Z()({},U.space),{},{children:W})):W}},80821:function(ee,K,n){n.d(K,{Z:function(){return J}});var V=n(97857),b=n.n(V),N=n(5574),Z=n.n(N),H=n(24963),p=n(36146),A=n(86738),m=n(83062),B=n(96074),O=n(83622),e=n(67294),U=n(85893);function J(o){var W=(0,e.useState)(!1),x=Z()(W,2),L=x[0],P=x[1],k=(0,e.useContext)(H.Z),Y=k.message,I=function(){P(!0);var fe=o.action();fe instanceof Promise?fe.then(function(ie){if(P(!1),ie){typeof o.onSuccess=="function"&&o.onSuccess(ie);var je=p.FD.format("finish");Y.success(je)}}).catch(function(ie){P(!1),typeof o.onError=="function"&&o.onError(ie)}):P(!1)};if(o.confirmProps){var E,M,j,z,ae,re,G,oe=o.confirmProps.description;return o.confirmProps.showCommonConfirm&&(oe=p.FD.format("confirm.title")),o.confirmProps.showCommonDisabled&&(oe=p.FD.format("confirm.disable")),(0,U.jsx)(A.Z,b()(b()({},o.confirmProps),{},{style:{width:500},title:(E=o.confirmProps)!==null&&E!==void 0&&E.title?(M=o.confirmProps)===null||M===void 0?void 0:M.title:p.FD.format("title.tip"),description:oe,onConfirm:I,okText:"Yes",cancelText:"No",children:(0,U.jsxs)(m.Z,{title:o.tips,children:[o.showDivider&&(0,U.jsx)(B.Z,{type:"vertical",style:{marginRight:15}}),(0,U.jsx)(O.ZP,b()(b()({},o.buttonProps),{},{ghost:((j=o.buttonProps)===null||j===void 0?void 0:j.ghost)&&((z=o.buttonProps)===null||z===void 0?void 0:z.type)!=="link",style:(ae=o.buttonProps)!==null&&ae!==void 0&&ae.ghost?b()(b()({},o.buttonProps.style),{},{padding:0,width:"auto"}):b()({},(re=o.buttonProps)===null||re===void 0?void 0:re.style),icon:!o.children&&L||(G=o.buttonProps)===null||G===void 0?void 0:G.icon,loading:L,children:o.children}))]})}))}else{var ne,te,de,se,me;return(0,U.jsxs)(m.Z,{title:o.tips,children:[o.showDivider&&(0,U.jsx)(B.Z,{type:"vertical",style:{marginRight:15}}),(0,U.jsx)(O.ZP,b()(b()({},o.buttonProps),{},{ghost:((ne=o.buttonProps)===null||ne===void 0?void 0:ne.ghost)&&((te=o.buttonProps)===null||te===void 0?void 0:te.type)!=="link",style:(de=o.buttonProps)!==null&&de!==void 0&&de.ghost?b()(b()({},o.buttonProps.style),{},{padding:0,width:"auto"}):b()({},(se=o.buttonProps)===null||se===void 0?void 0:se.style),icon:!o.children&&L||(me=o.buttonProps)===null||me===void 0?void 0:me.icon,loading:L,onClick:I,children:o.children}))]})}}},44349:function(ee,K,n){var V=n(97857),b=n.n(V),N=n(15009),Z=n.n(N),H=n(99289),p=n.n(H),A=n(74763),m=n(17186),B=n(5966),O=n(86250),e=n(67294),U=n(85893),J=(0,e.forwardRef)(function(o,W){var x=(0,e.useRef)();(0,e.useImperativeHandle)(W,function(){return{addItem:function(P){function k(Y,I,E){return P.apply(this,arguments)}return k.toString=function(){return P.toString()},k}(function(P,k,Y){var I,E=(I=x.current)===null||I===void 0?void 0:I.getList(),M;if(E==null||E.forEach(function(ae,re){ae[P]==k[P]&&(M=re)}),!(0,A.k)(M)&&Y){var j;(j=x.current)===null||j===void 0||j.remove(M),M=void 0}if(!M){var z;(z=x.current)===null||z===void 0||z.add(k)}}),removeItemByKey:function(k,Y){return p()(Z()().mark(function I(){var E,M;return Z()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return M=(E=x.current)===null||E===void 0?void 0:E.getList(),M==null||M.forEach(function(ae,re){if(ae[k]==Y){var G;(G=x.current)===null||G===void 0||G.remove(re);return}}),z.abrupt("return");case 3:case"end":return z.stop()}},I)}))()},clear:function(k){if(!k){var Y;k=(Y=x.current)===null||Y===void 0||(Y=Y.getList())===null||Y===void 0?void 0:Y.map(function(E,M){return M})}if(k){var I;(I=x.current)===null||I===void 0||I.remove(k)}},getList:function(){var k;return(k=x.current)===null||k===void 0?void 0:k.getList()}}});var L={};return o.hideCopyButton===!0&&(L.copyIconProps=!1),o.hideDeleteButton===!0&&(L.deleteIconProps=!1),(0,U.jsx)(m.u,b()(b()({initialValue:o.initialValue,label:o.label,name:o.name,actionRef:x,creatorButtonProps:o.showAddButton?{creatorButtonText:o.label?o.label:o.showAddButtonLabel?o.showAddButtonLabel:o.name}:!1,min:o.min?o.min:0},L),{},{children:function(k,Y,I){return(0,U.jsx)(O.Z,{justify:o.justify,gap:o.gap,children:o.items.map(function(E){return E.render?(0,U.jsx)("div",{children:E.render&&E.render(k,Y,I)},"".concat(o.name,"-").concat(E.name,"-").concat(k.key)):(0,U.jsx)(B.Z,{width:E.width,name:E.name,label:E.label,required:E.required,rules:[{required:E.required}],disabled:E.disabled,placeholder:E.placeholder},"".concat(o.name,"-").concat(E.name,"-").concat(k.key))})})}}))});K.Z=J},2808:function(ee,K,n){n.d(K,{Z:function(){return A}});var V=n(97857),b=n.n(V),N=n(62370),Z=n(51663),H=n(67294),p=n(85893);function A(m){return(0,p.jsx)(N.Z,b()(b()({},m),{},{children:(0,p.jsx)(Z.Z,{showText:function(O){return O.toHexString()},allowClear:!0,presets:[{label:"Color",colors:["#1677ff","#722ed1","#13c2c2","#52c41a","#eb2f96","#f5222d","#fa8c16","#fadb14","#fa541c","#2f54eb","#faad14","#a0d911","#000000","#5cdbd3","#b37feb","#b7eb8f","#61affe","#9254de","#36cfc9","#ff9c6e","#ff6f00","#ffc069","#28a745","#6610f2","#6f42c1","#007bff","#17a2b8","#20c997","#00cccc","#ff6666"]}]})}))}},51100:function(ee,K,n){n.d(K,{Z:function(){return H}});var V=n(4813),b=n(91604),N=n(1677),Z=n(85893);function H(p){return p.showDragger?(0,Z.jsx)(b.Z,{max:p.max?p.max:1,title:p.title,label:p.label,required:p.required,rules:[{required:p.required}],fieldProps:{multiple:!!(p.max&&p.max>1),name:"file",accept:p.accept,action:"/dpanel/api/common/attach/upload",headers:{Authorization:"Bearer "+localStorage.getItem("token")},onRemove:function(m){return new Promise(function(B){var O;(0,V._)({path:(O=m.response.data.path)!==null&&O!==void 0?O:""}).then(function(e){B(!0)})})},onChange:function(m){m.file.status=="done"&&p.onFinish&&p.onFinish(m.fileList)}},name:p.name}):(0,Z.jsx)(N.Z,{max:p.max?p.max:1,title:p.title,label:p.label,required:p.required,rules:[{required:p.required}],fieldProps:{multiple:!!(p.max&&p.max>1),name:"file",accept:p.accept,action:"/dpanel/api/common/attach/upload",headers:{Authorization:"Bearer "+localStorage.getItem("token")},onRemove:function(m){return new Promise(function(B){var O;(0,V._)({path:(O=m.response.data.path)!==null&&O!==void 0?O:""}).then(function(e){B(!0)})})},onChange:function(m){m.file.status=="done"&&p.onFinish&&p.onFinish(m.fileList)}},name:p.name})}},3616:function(ee,K,n){n.d(K,{Ed:function(){return Z},FK:function(){return b},R_:function(){return V},ob:function(){return N}});var V=window.innerWidth<=1024?"90vw":"65vw",b="90vw",N="60vw",Z="50vh"},12323:function(ee,K,n){n.d(K,{X:function(){return V},n:function(){return b}});var V={convertEol:!0,fontFamily:'Menlo, Monaco, "Courier New", monospace',fontWeight:400,fontSize:16,lineHeight:1,cursorStyle:"block",cursorInactiveStyle:"outline",cursorBlink:!0,letterSpacing:0,theme:{foreground:"#bfbfbf",cursor:"gray",selectionForeground:"#ffffff"}},b=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"]},24963:function(ee,K,n){var V=n(67294),b=(0,V.createContext)({});K.Z=b},18568:function(ee,K,n){n.r(K),n.d(K,{default:function(){return dn}});var V=n(5574),b=n.n(V),N=n(62370),Z=n(97462),H=n(42075),p=n(25593),A=n(80821),m=n(36146),B=n(1699),O=n(82346),e=n(85893);function U(i){var r=(0,O.useAccess)(),c=(0,e.jsxs)(H.Z,{style:{display:"block",marginTop:40},direction:"vertical",children:[(0,e.jsx)(N.Z,{name:i.name,hidden:!0}),(0,e.jsx)(Z.Z,{name:[i.name],children:function(w){var S,s=w[i.name];return(0,e.jsxs)(N.Z,{label:i.label,children:[(0,e.jsxs)(H.Z.Compact,{children:[i.disable&&(0,e.jsx)(A.Z,{confirmProps:{showCommonDisabled:!0},buttonProps:{danger:i.disable(s),type:i.disable(s)?"primary":"default"},action:function(){return i.onDisable&&i.onDisable(),new Promise(function(){})},onSuccess:function(){i.onFinish&&i.onFinish()},children:(S=i.disableLabel)!==null&&S!==void 0?S:m.FD.format("listManageDisable")}),i.settingComponent&&(0,e.jsx)(i.settingComponent,{data:s,onFinish:i.onFinish})]}),(0,e.jsx)(p.Z.Text,{type:"secondary",style:{marginLeft:30},children:i.tip})]})}})]});return i.isPe?(0,e.jsx)(B.u,{access:["canSeeEnableCe"],showProRibbonTips:!0,children:function(w){var S=w.canSeeEnableCe;return c}}):c}var J=n(15009),o=n.n(J),W=n(99289),x=n.n(W),L=n(24963),P=n(87662),k=n(86548),Y=n(97937),I=n(184),E=n(5966),M=n(83622),j=n(67294),z=n(3616),ae=function(r){var c=(0,j.useRef)(),d=(0,O.useModel)("@@initialState"),w=d.refresh,S=(0,j.useContext)(L.Z),s=S.message,y=new m.Uo("components.systemBasic"),R=(0,j.useState)(!1),f=b()(R,2),_=f[0],u=f[1];return(0,e.jsxs)(I.a,{trigger:(0,e.jsx)(M.ZP,{type:"primary",children:m.FD.format("listManageSetting")}),onOpenChange:function(l){var t;u(l),l&&((t=c.current)===null||t===void 0||t.setFieldValue("username",r.data.username))},open:_,drawerProps:{width:z.R_,forceRender:!0},title:y.format("founderTitle"),formRef:c,onFinish:function(){var a=x()(o()().mark(function l(t){var g,v;return o()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,(0,P.Jn)({username:t.username,password:t.password,newPassword:t.newPassword});case 2:if(g=F.sent,!(g&&g.data)){F.next=9;break}return(v=c.current)===null||v===void 0||v.resetFields(),s.success(m.FD.format("finish")),localStorage.removeItem("token"),w(),F.abrupt("return",!0);case 9:case"end":return F.stop()}},l)}));return function(l){return a.apply(this,arguments)}}(),children:[(0,e.jsx)(Z.Z,{name:["enableUsername"],children:function(l){var t=l.enableUsername;return(0,e.jsx)(E.Z,{label:y.format("founderUsername"),name:"username",width:"lg",disabled:!t,addonAfter:[(0,e.jsx)(M.ZP,{type:"link",hidden:!!t,icon:(0,e.jsx)(k.Z,{}),onClick:function(){var v;(v=c.current)===null||v===void 0||v.setFieldValue("enableUsername",!0)}},"editBtn"),(0,e.jsx)(M.ZP,{type:"link",hidden:!t,icon:(0,e.jsx)(Y.Z,{}),onClick:function(){var v;(v=c.current)===null||v===void 0||v.setFieldValue("enableUsername",!1)}},"closeBtn")]},"username")}}),(0,e.jsx)(E.Z.Password,{label:y.format("founderPassword"),name:"password",placeholder:y.format("founderPasswordEmpty"),rules:[{required:!0}]},"password"),(0,e.jsx)(E.Z.Password,{label:y.format("founderNewPassword"),name:"newPassword"},"newPasword"),(0,e.jsx)(Z.Z,{name:["newPassword"],children:function(l){var t=l.newPassword;return(0,e.jsx)(E.Z.Password,{label:y.format("founderNewPassword2"),name:"newPassword2",dependencies:["newPassword"],rules:[{required:typeof t!="undefined"&&t!=""},function(g){var v=g.getFieldValue;return{validator:function(F,T){return!T||v("newPassword")===T?Promise.resolve():Promise.reject(new Error(y.format("founderMessagePasswordNotMatch")))}}}]},"newPasword2")}})]},"drawer")},re=ae,G=n(38345),oe=n(64317),ne=n(52688),te=n(86615),de=n(90672),se=n(40056),me=function(r){var c,d,w=(0,j.useContext)(L.Z),S=w.message,s=(0,j.useRef)(),y=new m.Uo("components.systemBasic"),R=(0,j.useState)(!1),f=b()(R,2),_=f[0],u=f[1];return(0,j.useEffect)(function(){if(s.current&&r.data){var a,l;(a=s.current)===null||a===void 0||a.setFieldsValue({loginFailedEnable:r.data.failedEnable,loginFailedTotal:r.data.failedTotal===0?5:r.data.failedTotal,loginFailedLockTime:r.data.failedLockTime?r.data.failedLockTime.toString():"900",loginNoPasswordEnable:r.data.noPasswordEnable,loginNoPasswordUrl:r.data.noPasswordUrl,loginNoPassworkUserAgent:r.data.noPasswordUserAgent,loginNoPasswordIpList:r.data.noPasswordIpList,loginDefaultRedirect:(l=r.data.defaultRedirect)!==null&&l!==void 0?l:"/home/overview"})}},[s.current]),(0,e.jsxs)(I.a,{drawerProps:{width:z.R_,destroyOnHidden:!0},trigger:(0,e.jsx)(M.ZP,{type:(c=r.data)!==null&&c!==void 0&&c.failedEnable?"primary":"default",children:(d=r.data)!==null&&d!==void 0&&d.failedEnable?m.FD.format("listManageSetting"):m.FD.format("listManageEnable")}),onOpenChange:function(l){var t;u(l),!l&&((t=s.current)===null||t===void 0||t.resetFields())},open:_,title:y.format("loginTitle"),onFinish:function(){var a=x()(o()().mark(function l(t){var g;return o()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return g={failedEnable:t.loginFailedEnable,noPasswordEnable:t.loginNoPasswordEnable,defaultRedirect:t.loginDefaultRedirect},g.failedEnable&&(g.failedTotal=parseInt(t.loginFailedTotal),g.failedLockTime=parseInt(t.loginFailedLockTime)),g.noPasswordEnable&&(g=Object.assign(g,{noPasswordUrl:t.loginNoPasswordUrl,noPasswordUserAgent:t.loginNoPasswordUserAgent,noPasswordIplist:t.loginNoPasswordIplist})),h.next=5,(0,P.bv)({login:g,saveCache:!0});case 5:u(!1),S.success(m.FD.format("finish")),r.onFinish&&r.onFinish();case 8:case"end":return h.stop()}},l)}));return function(l){return a.apply(this,arguments)}}(),formRef:s,children:[(0,e.jsx)(G.Z,{title:y.format("loginBasicTitle"),ghost:!0,children:(0,e.jsx)(B.u,{access:["canSeeEnableCe"],showProRibbonTips:!0,children:function(l){var t=l.canSeeEnableCe;return(0,e.jsx)(oe.Z,{disabled:t,label:y.format("loginBasicDefaultRedirect"),name:"loginDefaultRedirect",options:y.option("loginBasicDefaultRedirectOption",["/home/overview","/home/tag","/app/list","/compose/list","/swarm/service"])})}})}),(0,e.jsxs)(G.Z,{title:y.format("loginFailedTitle"),ghost:!0,children:[(0,e.jsx)(ne.Z,{name:"loginFailedEnable"}),(0,e.jsx)(E.Z,{name:"loginFailedTotal",label:y.format("loginFailedTotal"),fieldProps:{addonAfter:m.FD.format("unitTimes")}}),(0,e.jsx)(te.Z.Group,{name:"loginFailedLockTime",label:y.format("loginFailedLockTime"),options:y.option("loginFailedLockTimeOption",["300","900","3600","18000","-1"])})]}),(0,e.jsxs)(G.Z,{title:y.format("loginNoPasswordTitle"),hidden:!0,ghost:!0,children:[(0,e.jsx)(se.Z,{message:"\u5F00\u542F\u514D\u5BC6\u767B\u5F55\u540E\uFF0C\u9762\u677F\u540E\u53F0\u5C06\u4E0D\u9700\u8981\u767B\u5F55\u3002\u6B64\u529F\u80FD\u4EC5\u9650\u4E8E\u5728\u672C\u5730\u6216\u662F\u5185\u7F51\u4E2D\u4F7F\u7528\uFF0C\u8BF7\u8C28\u614E\u5F00\u542F\u3002",type:"warning",style:{marginBottom:15}}),(0,e.jsx)(ne.Z,{name:"loginNoPasswordEnable"}),(0,e.jsx)(B.u,{access:["canSeeEnableCe"],showProRibbonTips:!0,children:function(l){var t=l.canSeeEnableCe;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(E.Z,{disabled:t,label:"\u514D\u5BC6\u767B\u5F55\u5730\u5740",name:"loginNoPasswordUrl"}),(0,e.jsx)(E.Z,{disabled:t,label:"\u514D\u5BC6\u767B\u5F55 User-Agent",name:"loginNoPasswordUserAgent"}),(0,e.jsx)(de.Z,{disabled:t,label:"\u514D\u5BC6\u767B\u5F55 IP \u767D\u540D\u5355",name:"loginNoPasswordIpWhitelist"})]})}})]})]})},Ee=me;function fe(i){return ie.apply(this,arguments)}function ie(){return ie=x()(o()().mark(function i(r){return o()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,O.request)("/dpanel/api/pro/two-fa/enable",{method:"POST",data:r}));case 1:case"end":return d.stop()}},i)})),ie.apply(this,arguments)}var je=n(29104),we=function(r){var c,d,w=new m.Uo("components.systemBasic"),S=(0,O.useAccess)(),s=(0,j.useRef)(),y=(0,j.useContext)(L.Z),R=y.message,f=(0,j.useState)(!1),_=b()(f,2),u=_[0],a=_[1],l=(0,O.useModel)("@@initialState"),t=l.initialState;return(0,j.useEffect)(function(){if(s.current&&!S.canSeeEnableCe&&t){var g;if(!r.data||!r.data.enable)var v=fe({email:t==null?void 0:t.user.username,enable:!1}).then(function(T){var C,D;(C=s.current)===null||C===void 0||C.setFieldValue("twoFaEmail",t.user.username),(D=s.current)===null||D===void 0||D.setFieldValue("towFaQrcode",T.data.qrCode)});else{var h,F;(h=s.current)===null||h===void 0||h.setFieldValue("twoFaEmail",r.data.email),(F=s.current)===null||F===void 0||F.setFieldValue("towFaQrcode",r.data.qrCode)}(g=s.current)===null||g===void 0||g.setFieldValue("twoFaCode","")}},[s.current]),(0,e.jsx)(I.a,{drawerProps:{width:z.R_,destroyOnHidden:!0},trigger:(0,e.jsx)(M.ZP,{disabled:S.canSeeEnableCe,style:{width:90},type:(c=r.data)!==null&&c!==void 0&&c.enable?"primary":"default",children:(d=r.data)!==null&&d!==void 0&&d.enable?m.FD.format("listManageSetting"):m.FD.format("listManageEnable")}),onOpenChange:function(){var g=x()(o()().mark(function v(h){var F;return o()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:a(h),!h&&((F=s.current)===null||F===void 0||F.resetFields());case 2:case"end":return C.stop()}},v)}));return function(v){return g.apply(this,arguments)}}(),open:u,title:w.format("twoFaTitle"),onFinish:function(){var g=x()(o()().mark(function v(h){var F;return o()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(S.canSeeEnableCe){C.next=4;break}return C.next=3,fe({email:h.twoFaEmail,enable:!0,code:h.twoFaCode});case 3:F=C.sent;case 4:R.success(m.FD.format("finish")),a(!1),r.onFinish&&r.onFinish();case 7:case"end":return C.stop()}},v)}));return function(v){return g.apply(this,arguments)}}(),formRef:s,children:(0,e.jsx)(B.u,{access:"canSeeEnableCe",showProRibbonTips:!0,children:function(v){var h=v.canSeeEnableCe;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(E.Z,{label:w.format("twoFaEmail"),name:"twoFaEmail",disabled:!0,placeholder:w.format("twoFaEmailEmpty")}),(0,e.jsx)(E.Z,{label:w.format("twoFaCode"),name:"twoFaCode",required:!0,disabled:h,rules:[{required:!0}]}),(0,e.jsx)(N.Z,{label:w.format("twoFaQrcode"),tooltip:w.format("twoFaQrcodeTip"),shouldUpdate:!0,children:function(T){var C=T.getFieldValue("towFaQrcode");return C&&(0,e.jsx)(je.Z,{style:{border:"#d1d9e0b3 solid 1px",padding:"10px",borderRadius:"10px"},width:200,src:"data:image/png;base64,".concat(C)})}})]})}})})},Oe=we,Ze=n(29177),Me=n(74453),Se=n(97269),De=n(86125);function Le(i){var r=(0,O.useModel)("@@initialState"),c=r.initialState,d=(0,O.useAccess)(),w=(0,j.useContext)(L.Z),S=w.message,s=new m.Uo("components.systemBasic"),y=(0,j.useState)(!1),R=b()(y,2),f=R[0],_=R[1],u=(0,j.useRef)();return(0,j.useEffect)(function(){if(u.current){var a,l,t,g,v,h,F,T;(a=u.current)===null||a===void 0||a.setFieldsValue({algorithm:(l=c==null?void 0:c.theme.algorithm)!==null&&l!==void 0?l:"default",mainMenu:(t=c==null?void 0:c.theme.mainMenu)!==null&&t!==void 0?t:"top",compact:(g=c==null?void 0:c.theme.compact)!==null&&g!==void 0?g:"default",fontSize:(v=c==null?void 0:c.theme.fontSize)!==null&&v!==void 0?v:14,fontSizeConsole:(h=c==null?void 0:c.theme.fontSizeConsole)!==null&&h!==void 0?h:12,sideMenu:(F=c==null?void 0:c.theme.sideMenu)!==null&&F!==void 0?F:"default",tablePageSize:(T=c==null?void 0:c.theme.tablePageSize)!==null&&T!==void 0?T:"20"})}},[c,u.current]),(0,e.jsxs)(I.a,{formRef:u,drawerProps:{width:z.R_,destroyOnHidden:!0},onOpenChange:function(l){var t;_(l),!l&&((t=u.current)===null||t===void 0||t.resetFields())},open:f,trigger:(0,e.jsx)(M.ZP,{type:"primary",children:m.FD.format("listManageSetting")}),onFinish:function(){var a=x()(o()().mark(function l(t){var g;return o()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(g={algorithm:t.algorithm,mainMenu:t.mainMenu,sideMenu:t.sideMenu,compact:t.compact,fontSizeConsole:t.fontSizeConsole,fontSize:t.fontSize,tablePageSize:t.tablePageSize},!(t.algorithm!=(c==null?void 0:c.theme.algorithm)&&!d.canSeeEnableCe)){h.next=4;break}return h.next=4,(0,P.GV)({groupName:"setting",name:"themeUserConfig"});case 4:return localStorage.setItem("dpanel-theme",t.algorithm),localStorage.setItem("dpanel-compact",t.compact),localStorage.setItem("dpanel-pagesize",t.tablePageSize),h.next=9,(0,P.bv)({theme:g});case 9:S.success(m.FD.format("finishTheme")),_(!1),i.onFinish&&i.onFinish();case 12:case"end":return h.stop()}},l)}));return function(l){return a.apply(this,arguments)}}(),children:[(0,e.jsx)(te.Z.Group,{name:"algorithm",label:s.format("themeConfigAlgorithm"),initialValue:"default",radioType:"button",options:s.option("themeConfigAlgorithmOption",["default","dark","system"]),fieldProps:{onChange:function(l){l.target.value=="system"&&S.warning("\u4E3B\u9898\u76AE\u80A4\u914D\u7F6E\u4E3A\u8DDF\u968F\u7CFB\u7EDF\u540E\uFF0C\u5C06\u4F1A\u6E05\u7A7A\u81EA\u5B9A\u4E49\u4E3B\u9898\u98CE\u683C")}}}),(0,e.jsx)(te.Z.Group,{name:"mainMenu",label:s.format("themeConfigMainMenu"),initialValue:"top",radioType:"button",options:s.option("themeConfigMainMenuOption",["top","side"])}),(0,e.jsx)(te.Z.Group,{name:"sideMenu",label:s.format("themeConfigSideMenu"),initialValue:"default",radioType:"button",options:s.option("themeConfigSideMenuOption",["default","collapse"])}),(0,e.jsx)(te.Z.Group,{name:"compact",label:s.format("themeConfigCompact"),initialValue:"default",radioType:"button",options:s.option("themeConfigCompactOption",["default","compact"])}),(0,e.jsx)(N.Z,{name:"fontSize",label:s.format("themeConfigFontSize"),initialValue:14,children:(0,e.jsx)(De.Z,{step:2,max:30,min:8,marks:{8:"8",10:"10",12:"12",14:"14",16:"16",20:"20",26:"26"}})}),(0,e.jsx)(oe.Z,{initialValue:"20",label:s.format("themeConfigTablePageSize"),name:"tablePageSize",options:s.option("themeConfigTablePageSizeOption",["5","10","20","50","100","all"])})]})}var $=n(24739),Be=n(25054),le=n(31199),Ie=n(21532),ge=n(86250),Re=n(44349);function Ae(i){return pe.apply(this,arguments)}function pe(){return pe=x()(o()().mark(function i(r){return o()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,O.request)("/dpanel/api/pro/theme/save-theme-user-config",{method:"POST",data:r});case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},i)})),pe.apply(this,arguments)}var We=n(2808),ve=n(51100),ke=n(96486),Ne=n.n(ke),ce={colorPrimary:"",colorTextBase:"",colorLink:"",colorBgContainer:"",colorBorder:"",colorBgElevated:"",colorBorderSecondary:"colorBorder"},ye=["borderRadius","wireframe"],Ke=function(r){var c=(0,O.useAccess)(),d=(0,j.useRef)(),w=(0,j.useContext)(L.Z),S=w.message,s=new m.Uo("components.systemBasic"),y=(0,j.useState)(!1),R=b()(y,2),f=R[0],_=R[1],u=function(l){return(0,e.jsx)(We.Z,{name:l.name,label:s.format("themeUserConfigOption.".concat(l.name)),tooltip:l.tooltip})};return(0,j.useEffect)(function(){if(!c.canSeeEnableCe&&d.current&&r.data){var a,l;if((a=d.current)===null||a===void 0||a.resetFields(["bgImageUpload","siteLogoUpload"]),ye.forEach(function(v){if(r.data&&r.data.token&&r.data.token[v]){var h,F;(h=d.current)===null||h===void 0||h.setFieldValue("enableStyle",!0),(F=d.current)===null||F===void 0||F.setFieldValue(v,r.data.token[v])}}),(l=d.current)===null||l===void 0||l.setFieldsValue({siteLogo:r.data.siteLogo,siteTitle:r.data.siteTitle,siteCopyright:r.data.siteCopyright,siteLink:r.data.siteLink,bgImage:r.data.bgImage,loginLogo:r.data.loginLogo}),!r.data.bgImage||!r.data.bgImage.width||r.data.bgImage.width=="100%"){var t;(t=d.current)===null||t===void 0||t.setFieldValue("bgSize","full")}else{var g;(g=d.current)===null||g===void 0||g.setFieldValue("bgSize","default")}Object.keys(ce).map(function(v){var h=v;ce[v]!=""&&(h=ce[v]),d!=null&&d.current&&r.data&&r.data.token&&!Ne().isEmpty(r.data.token)&&(d==null||d.current.setFieldValue("enableColor",!0),d==null||d.current.setFieldValue(v,r.data.token[h]))})}},[d.current]),(0,e.jsx)(Ie.ZP,{children:(0,e.jsxs)(I.a,{trigger:(0,e.jsx)(M.ZP,{disabled:c.canSeeEnableCe,type:"primary",children:m.FD.format("listManageSetting")}),drawerProps:{width:z.R_},onOpenChange:function(l){var t;_(l),!l&&((t=d.current)===null||t===void 0||t.resetFields())},open:f,title:s.format("themeUserConfigTitle"),formRef:d,onFinish:function(){var a=x()(o()().mark(function l(t){var g,v,h;return o()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(!c.canSeeEnableCe){T.next=2;break}return T.abrupt("return",!1);case 2:return h={token:{},bgImage:t.bgImage,siteLink:t.siteLink,siteTitle:(g=t.siteTitle)!==null&&g!==void 0?g:"",siteCopyright:t.siteCopyright,siteLogo:(v=t.siteLogo)!==null&&v!==void 0?v:"",loginLogo:t.loginLogo},t.siteLogoUpload&&t.siteLogoUpload.length>0&&(h.siteLogo=t.siteLogoUpload[0].response.data.path),h.bgImage||(h.bgImage={}),t.bgImageUpload&&t.bgImageUpload.length>0&&(h.bgImage.src=t.bgImageUpload[0].response.data.path),h.bgImage.width=t.bgSize=="full"?"100%":"",t.loginLogoUpload&&t.loginLogoUpload.length>0&&(h.loginLogo=t.loginLogoUpload[0].response.data.path),Object.keys(ce).map(function(C){h.token||(h.token={});var D=C;ce[C]!=""&&(D=ce[C]);var Q=d.current&&d.current.getFieldValue(D);Q&&Q.toHexString?Q.cleared||(h.token[C]=Q.toHexString()):h.token[C]=Q}),ye.map(function(C){h.token||(h.token={});var D=d.current&&d.current.getFieldValue(C);h.token[C]=D}),T.next=12,Ae(h);case 12:return r.onFinish&&r.onFinish(),S.success(m.FD.format("finishTheme")),T.abrupt("return",!0);case 15:case"end":return T.stop()}},l)}));return function(l){return a.apply(this,arguments)}}(),children:[(0,e.jsx)($.UW,{title:s.format("themeUserConfigColorTitle"),extra:(0,e.jsx)(ne.Z,{name:"enableColor"})}),(0,e.jsx)(Z.Z,{name:["enableColor"],children:function(l){var t=l.enableColor;return t&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)($.UW,{children:u({name:"colorPrimary",tooltip:s.format("themeUserConfigColorPrimaryTip")})}),(0,e.jsxs)($.UW,{children:[u({name:"colorBgContainer"}),u({name:"colorBgElevated"})]}),(0,e.jsxs)($.UW,{children:[u({name:"colorTextBase"}),u({name:"colorLink"}),u({name:"colorBorder"})]})]})}}),(0,e.jsx)($.UW,{title:s.format("themeUserConfigStyleTitle"),extra:(0,e.jsx)(ne.Z,{name:"enableStyle"})}),(0,e.jsx)(Z.Z,{name:["enableStyle"],children:function(l){var t=l.enableStyle;return t&&(0,e.jsx)(e.Fragment,{children:(0,e.jsx)($.UW,{children:(0,e.jsxs)(ge.Z,{gap:40,children:[(0,e.jsx)(ne.Z,{label:s.format("themeUserConfigWireframe"),name:"wireframe"}),(0,e.jsx)(Be.Z,{min:1,max:16,label:s.format("themeUserConfigBorderRadius"),name:"borderRadius"})]})})})}}),(0,e.jsx)($.UW,{title:s.format("themeUserConfigUiTitle")}),(0,e.jsx)(E.Z,{label:s.format("themeUserConfigSiteTitle"),name:"siteTitle",placeholder:s.format("themeUserConfigSiteTitleEmpty")}),(0,e.jsxs)($.UW,{children:[(0,e.jsx)(ve.Z,{label:"Logo",title:s.format("themeUserConfigSiteLogoUploadTitle"),name:"siteLogoUpload",accept:".jpg,.png,.webp,.svg"}),(0,e.jsx)(E.Z,{width:"md",placeholder:s.format("themeUserConfigSiteLogoEmpty"),label:s.format("themeUserConfigSiteLogo"),name:"siteLogo"})]}),(0,e.jsxs)($.UW,{children:[(0,e.jsx)(ve.Z,{label:s.format("themeUserConfigBgImageUpload"),title:s.format("themeUserConfigBgImageUploadTitle"),name:"bgImageUpload",accept:".jpg,.png,.webp,.svg"}),(0,e.jsx)(E.Z,{width:"md",placeholder:s.format("themeUserConfigSiteLogoEmpty"),label:s.format("themeUserConfigBgImageSrc"),name:["bgImage","src"]}),(0,e.jsx)(te.Z.Group,{name:"bgSize",label:s.format("themeUserConfigBgImageBgSize"),initialValue:"full",options:s.option("themeUserConfigBgImageBgSizeOption",["full","default"])})]}),(0,e.jsx)($.UW,{children:(0,e.jsx)(Z.Z,{name:["bgSize"],children:function(l){var t=l.bgSize;if(t=="default")return(0,e.jsxs)($.UW,{children:[(0,e.jsx)(le.Z,{width:"xs",name:["bgImage","top"],label:s.format("themeUserConfigBgImageTop")}),(0,e.jsx)(le.Z,{width:"xs",name:["bgImage","bottom"],label:s.format("themeUserConfigBgImageBottom")}),(0,e.jsx)(le.Z,{width:"xs",name:["bgImage","left"],label:s.format("themeUserConfigBgImageLeft")}),(0,e.jsx)(le.Z,{width:"xs",name:["bgImage","right"],label:s.format("themeUserConfigBgImageRight")})]})}})}),(0,e.jsx)(Re.Z,{name:"siteLink",label:s.format("themeUserConfigSiteLink"),showAddButton:!0,hideCopyButton:!0,gap:10,items:s.option("themeUserConfigSiteLinkOption",["title","href"]).map(function(a){return{name:a.value,label:a.label}})}),(0,e.jsx)(de.Z,{label:s.format("themeUserConfigSiteCopyright"),name:"siteCopyright"}),(0,e.jsxs)($.UW,{title:s.format("themeUserConfigUiLoginTitle"),children:[(0,e.jsx)(ve.Z,{label:"Logo",title:"Logo",name:"loginLogoUpload",accept:".jpg,.png,.webp,.svg"}),(0,e.jsx)(E.Z,{width:"md",placeholder:s.format("themeUserConfigSiteLogoEmpty"),label:s.format("themeUserConfigLoginLogo"),name:"loginLogo"})]})]})})},Ve=Ke,ze=n(19400),Pe=n(2487),He=n(4393),Ge=n(71230),Qe=n(15746),Ye=n(40411),Fe=n(12323),Xe=n(64304),be=n.n(Xe);function Je(i){var r=new m.Uo("components.systemBasic"),c=(0,O.useAccess)(),d=(0,j.useContext)(L.Z),w=d.message,S=(0,j.useState)(),s=b()(S,2),y=s[0],R=s[1],f=(0,j.useState)(),_=b()(f,2),u=_[0],a=_[1],l=(0,j.useRef)(),t=(0,j.useState)(!1),g=b()(t,2),v=g[0],h=g[1];return(0,j.useEffect)(function(){if(l.current&&i.data){var F,T,C=Fe.X;i.data&&Object.assign(C,i.data),!c.canSeeEnableCe&&i.data&&(F=i.data)!==null&&F!==void 0&&F.themeName&&i.data.themeName!=""&&Object.keys(be()).forEach(function(D,Q){i.data&&D==i.data.themeName&&(a(Math.ceil((Q+1)/36)),R(i.data.themeName))}),(T=l.current)===null||T===void 0||T.setFieldsValue({fontSize:C.fontSize,lineHeight:C.lineHeight,letterSpacing:C.letterSpacing,fontWeight:C.fontWeight,cursorStyle:C.cursorStyle,cursorInactiveStyle:C.cursorInactiveStyle,cursorBlink:C.cursorBlink})}},[l.current,i.data]),(0,e.jsxs)(I.a,{onOpenChange:function(T){var C;h(T),!T&&((C=l.current)===null||C===void 0||C.resetFields())},open:v,title:r.format("themeConsoleTitle"),formRef:l,drawerProps:{width:z.R_,destroyOnHidden:!0},trigger:(0,e.jsx)(M.ZP,{type:"primary",children:m.FD.format("listManageSetting")}),onFinish:function(){var F=x()(o()().mark(function T(C){var D;return o()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return D={fontSize:C.fontSize,lineHeight:C.lineHeight,letterSpacing:C.letterSpacing,fontWeight:C.fontWeight,cursorStyle:C.cursorStyle,cursorInactiveStyle:C.cursorInactiveStyle,cursorBlink:C.cursorBlink,theme:{},themeName:""},y!=""&&!c.canSeeEnableCe&&(D.theme=be()[y],D.themeName=y),X.next=4,(0,P.bv)({console:D});case 4:return w.success(m.FD.format("finishTheme")),h(!1),i.onFinish&&i.onFinish(),X.abrupt("return",!0);case 8:case"end":return X.stop()}},T)}));return function(T){return F.apply(this,arguments)}}(),children:[(0,e.jsx)($.UW,{title:r.format("themeConsoleFont"),children:(0,e.jsxs)(ge.Z,{gap:50,children:[(0,e.jsx)(le.Z,{label:r.format("themeConsoleFontSize"),name:"fontSize",tooltip:r.format("themeConsoleFontSizeTip"),fieldProps:{addonAfter:"px"}}),(0,e.jsx)(le.Z,{label:r.format("themeConsoleLineHeight"),name:"lineHeight",tooltip:r.format("themeConsoleLineHeightTip"),fieldProps:{addonAfter:r.format("themeConsoleLineHeightUnit")}}),(0,e.jsx)(le.Z,{label:r.format("themeConsoleLetterSpacing"),name:"letterSpacing",fieldProps:{addonAfter:"px"},tooltip:r.format("themeConsoleLetterSpacingTip")}),(0,e.jsx)(oe.Z,{label:r.format("themeConsoleFontWeight"),name:"fontWeight",options:[{label:"normal",value:"normal"},{label:"bold",value:"bold"},{label:"100",value:"100"},{label:"200",value:"200"},{label:"300",value:"300"},{label:"400",value:"400"},{label:"500",value:"500"},{label:"600",value:"600"},{label:"700",value:"700"},{label:"800",value:"800"},{label:"900",value:"900"}]})]})}),(0,e.jsx)($.UW,{title:r.format("themeConsoleCursorStyleTitle"),children:(0,e.jsxs)(ge.Z,{gap:50,children:[(0,e.jsx)(oe.Z,{label:r.format("themeConsoleCursorStyle"),name:"cursorStyle",width:"sm",options:r.option("themeConsoleCursorStyleOption",["bar","underline","block"])}),(0,e.jsx)(oe.Z,{label:r.format("themeConsoleCursorInactiveStyle"),name:"cursorInactiveStyle",width:"sm",options:r.option("themeConsoleCursorStyleOption",["bar","underline","block","outline"])}),(0,e.jsx)(ne.Z,{label:r.format("themeConsoleCursorBlink"),name:"cursorBlink"})]})}),(0,e.jsx)(B.u,{showProRibbonTips:!0,access:"canSeeEnableCe",children:function(T){var C=T.canSeeEnableCe;return(0,e.jsx)(G.Z,{ghost:!0,title:(0,e.jsx)(ze.Z,{}),subTitle:r.format("themeConsoleTheme"),children:(0,e.jsx)(Pe.Z,{split:!0,style:{overflow:"hidden"},grid:{column:6},pagination:{pageSize:36,current:u,onChange:function(Q,X){a(Q)}},dataSource:Object.keys(be()).map(function(D){return{label:D,value:D,data:be()[D]}}),renderItem:function(Q,X){var q=Q.data,Ce=(0,e.jsxs)(He.Z,{style:{backgroundColor:q.background,color:q.foreground,textAlign:"center",cursor:C?"not-allowed":"pointer",borderRadius:0},onClick:function(){if(!C){var he;(he=l.current)===null||he===void 0||he.setFieldValue("theme",Q.data),R(Q.label)}},hoverable:!0,children:[(0,e.jsx)(Ge.Z,{wrap:!0,gutter:[2,2],justify:"center",align:"middle",children:Fe.n.filter(function(ue){return q[ue]!=""}).map(function(ue){return(0,e.jsx)(Qe.Z,{style:{backgroundColor:q[ue],padding:8}},ue)})}),(0,e.jsx)("div",{style:{paddingTop:5},children:Q.label})]});return(0,e.jsx)(Pe.Z.Item,{style:{margin:0},children:y==Q.label?(0,e.jsx)(Ye.Z.Ribbon,{text:"Checked",children:Ce}):Ce},X)}})})}})]})}var $e=n(63434);function qe(i){var r=new m.Uo("components.systemBasic"),c=(0,j.useRef)(),d=(0,j.useState)(!1),w=b()(d,2),S=w[0],s=w[1],y=(0,j.useContext)(L.Z),R=y.message;return(0,j.useEffect)(function(){if(c.current&&i.data){var f;(f=c.current)===null||f===void 0||f.setFieldsValue(i.data)}},[c.current,i.data]),(0,e.jsxs)(I.a,{drawerProps:{width:z.R_,destroyOnHidden:!0},trigger:(0,e.jsx)(M.ZP,{style:{width:150},type:"primary",children:m.FD.format("listManageSetting")}),onOpenChange:function(_){var u;s(_),!_&&((u=c.current)===null||u===void 0||u.resetFields())},open:S,title:r.format("notificationTitle"),onFinish:function(){var f=x()(o()().mark(function _(u){return o()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,P.bv)({notification:{emailServer:u.emailServer}});case 2:s(!1),R.success(m.FD.format("finish")),i.onFinish&&i.onFinish();case 5:case"end":return l.stop()}},_)}));return function(_){return f.apply(this,arguments)}}(),formRef:c,children:[(0,e.jsx)($.UW,{title:r.format("notificationEmailTitle")}),(0,e.jsx)(E.Z,{label:r.format("notificationEmailHost"),name:["emailServer","host"],tooltip:r.format("notificationEmailHostTip"),required:!0,rules:[{required:!0}]}),(0,e.jsx)(le.Z,{label:r.format("notificationEmailPort"),name:["emailServer","port"],required:!0,rules:[{required:!0}],initialValue:465}),(0,e.jsx)(E.Z,{label:r.format("notificationEmailCode"),name:["emailServer","code"],width:"lg",placeholder:r.format("notificationEmailCodeTip"),required:!0,rules:[{required:!0}],addonAfter:(0,e.jsxs)(H.Z,{children:[(0,e.jsx)("a",{target:"_blank",href:"https://service.mail.qq.com/detail/0/75",children:r.format("notificationEmailCodeHelp.qq")}),(0,e.jsx)("a",{target:"_blank",href:"https://help.mail.163.com/faqDetail.do?code=d7a5dc8471cd0c0e8b4b8f4f8e49998b374173cfe9171305fa1ce630d7f67ac286624f309a1a7089",children:r.format("notificationEmailCodeHelp.163")})]})}),(0,e.jsx)(E.Z,{label:r.format("notificationEmailEmail"),name:["emailServer","email"],required:!0,rules:[{required:!0}],width:"lg",addonAfter:(0,e.jsx)(A.Z,{buttonProps:{type:"primary"},tips:r.format("notificationEmailTestTip"),action:x()(o()().mark(function f(){var _;return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,P.FB)({emailServer:(_=c.current)===null||_===void 0?void 0:_.getFieldValue("emailServer"),subject:r.format("notificationEmailTestSubject"),content:r.format("notificationEmailTestContent",{time:new Date().toISOString()})});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},f)})),children:r.format("notificationEmailTestButton")},"testEmail")}),(0,e.jsx)(B.u,{access:"canSeeEnableEe",children:(0,e.jsx)($e.Z.Group,{name:"status",label:r.format("notificationEmailStatus"),options:r.option("notificationEmailStatusOption",["register"])})})]})}var en=n(19632),nn=n.n(en),Te=n(5251),_e=n(89035),tn=n(82061),Ue=n(84567);function an(i){var r=(0,j.useState)([]),c=b()(r,2),d=c[0],w=c[1],S=(0,j.useState)([]),s=b()(S,2),y=s[0],R=s[1],f=new m.Uo("components.systemBasic"),_=(0,j.useContext)(L.Z),u=_.message,a=(0,j.useRef)();return(0,j.useEffect)(function(){var l,t,g;if(i.data){var v;!((l=i.data.info)===null||l===void 0)&&l.Mounts&&i.data.info.Mounts.forEach(function(X){X.Type=="volume"&&X.Name&&(v=X.Name)});var h=((t=i.data.info)===null||t===void 0||(t=t.HostConfig)===null||t===void 0?void 0:t.PortBindings)&&Object.entries(i.data.info.HostConfig.PortBindings).map(function(X){var q=b()(X,2),Ce=q[0],ue=q[1];return ue.map(function(he){return"-p ".concat(he.HostPort,":").concat(String(parseInt(Ce)))})}),F=!1,T=((g=i.data.info)===null||g===void 0||(g=g.HostConfig)===null||g===void 0?void 0:g.Binds)&&i.data.info.HostConfig.Binds.map(function(X){return X.indexOf(":/dpanel")>-1&&(F=!0),"-v ".concat(X)});if(!F){var C,v="";!((C=i.data.info)===null||C===void 0)&&C.Mounts&&i.data.info.Mounts.forEach(function(q){q.Type=="volume"&&q.Name&&(v=q.Name)}),T||(T=[]),T.push("-v "+v+":/dpanel")}if(i.data.info&&i.data.info.Config){var D=(0,Te.fi)(i.data.info.Name,"/"),Q=["docker stop ".concat(D," && docker rm ").concat(D),"docker pull ".concat(i.data.info.Config.Image),"docker run -d --name ".concat(D," -e APP_NAME=").concat(D," --restart=always ").concat(h&&h.join(" ")," ").concat(T&&T.join(" ")," ").concat(i.data.info.Config.Image)];i.data.info.NetworkSettings.Networks&&i.data.info.NetworkSettings.Networks["dpanel-local"]&&(Q=[].concat(nn()(Q),["docker network connect --alias dpanel.pod.dpanel.local dpanel-local ".concat(D)])),w(Q),R(["docker stop ".concat(D," && docker rm ").concat(D),"docker image rm ".concat(i.data.info.Config.Image)])}}},[i.data]),(0,e.jsxs)(H.Z,{children:[(0,e.jsx)(I.a,{drawerProps:{width:z.R_,destroyOnHidden:!0},title:f.format("upgradeTitle"),trigger:(0,e.jsx)(M.ZP,{style:{width:150},children:f.format("upgradeScript")}),children:(0,e.jsxs)(G.Z,{direction:"column",ghost:!0,children:[(0,e.jsx)(se.Z,{message:f.format("upgradeAlertTitle"),showIcon:!0,description:(0,e.jsxs)("ol",{style:{marginLeft:"-20px"},children:[(0,e.jsx)("li",{children:f.format("upgradeAlertContent1")}),(0,e.jsx)("li",{children:f.format("upgradeAlertContent2")}),(0,e.jsx)("li",{children:f.format("upgradeAlertContent3")}),(0,e.jsx)("li",{children:(0,e.jsx)(p.Z.Text,{type:"danger",children:f.format("upgradeAlertContent4")})})]}),type:"warning",style:{marginBottom:"20px"}}),(0,e.jsxs)(G.Z,{ghost:!0,style:{paddingBottom:50},direction:"column",gutter:[10,50],children:[(0,e.jsx)(G.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(_e.Z,{}),bodyStyle:{padding:"10px",background:"#24292f"},subTitle:(0,e.jsxs)(e.Fragment,{children:[f.format("upgradeShellRootLessTitle")," ",(0,e.jsx)("a",{href:"https://dpanel.cc/install/shell",target:"_blank",children:m.FD.format("help")})]}),children:(0,e.jsx)(p.Z.Text,{copyable:!0,style:{color:"#ffffff"},children:"sudo curl -sSL https://dpanel.cc/quick.sh -o quick.sh && sudo bash quick.sh"})}),(0,e.jsx)(G.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(_e.Z,{}),bodyStyle:{padding:"10px",background:"#24292f"},subTitle:(0,e.jsxs)(e.Fragment,{children:[f.format("upgradeShellRootTitle")," ",(0,e.jsx)("a",{href:"https://dpanel.cc/install/shell",target:"_blank",children:m.FD.format("help")})]}),children:(0,e.jsx)(p.Z.Text,{copyable:!0,style:{color:"#ffffff"},children:"curl -sSL https://dpanel.cc/quick.sh -o quick.sh && bash quick.sh"})}),(0,e.jsx)(G.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(_e.Z,{}),bodyStyle:{padding:"10px",background:"#24292f"},subTitle:(0,e.jsxs)(e.Fragment,{children:[f.format("upgradeDockerRunTitle")," ",(0,e.jsx)("a",{href:"https://dpanel.cc/manual/system-dpanel-upgrade",target:"_blank",children:m.FD.format("help")})]}),children:d&&d.length>0?(0,e.jsx)(p.Z.Paragraph,{copyable:!0,style:{color:"#ffffff"},children:'sudo sh -c "'.concat(d.join(" && "),'"')}):(0,e.jsx)("span",{style:{color:"#ffffff"},children:m.FD.format("systemUpgradeDPanelNotFound")})}),y&&y.length>0&&(0,e.jsx)(G.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(tn.Z,{}),bodyStyle:{padding:"10px",background:"#24292f"},subTitle:f.format("upgradeDockerRmTitle"),children:(0,e.jsx)(p.Z.Paragraph,{copyable:!0,style:{color:"#ffffff"},children:'sudo sh -c "'.concat(y.join(" && "),'"')})}),(0,e.jsx)(G.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(_e.Z,{}),bodyStyle:{padding:"10px",background:"#24292f"},subTitle:(0,e.jsxs)(e.Fragment,{children:[f.format("upgradeBinaryTitle")," ",(0,e.jsx)("a",{href:"https://github.com/donknap/dpanel/releases",target:"_blank",children:m.FD.format("help")})]}),children:(0,e.jsx)("span",{style:{color:"#ffffff"},children:f.format("upgradeBinaryTip")})})]})]})}),(0,e.jsx)(A.Z,{buttonProps:{danger:!0},action:x()(o()().mark(function l(){var t,g;return o()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,(0,P.$D)({enableNotice:(t=a.current)===null||t===void 0?void 0:t.getFieldValue("enableNotice"),enableTempFile:(g=a.current)===null||g===void 0?void 0:g.getFieldValue("enableTempFile")});case 2:u.success(m.FD.format("finish"));case 3:case"end":return h.stop()}},l)})),confirmProps:{onOpenChange:function(t,g){var v;t&&(!((v=a.current)===null||v===void 0)&&v.resetFields)&&a.current.resetFields()},description:(0,e.jsxs)(H.Z,{style:{minWidth:300},direction:"vertical",wrap:!0,children:[(0,e.jsx)(p.Z.Text,{children:f.format("upgradePruneTip")}),(0,e.jsx)(Se.A,{name:"createForm",formRef:a,layout:"inline",submitter:!1,children:(0,e.jsxs)(ge.Z,{vertical:!0,children:[(0,e.jsx)(N.Z,{initialValue:!1,name:"enableTempFile",valuePropName:"checked",children:(0,e.jsx)(Ue.Z,{children:f.format("upgradeEnableTempFile")})}),(0,e.jsx)(N.Z,{initialValue:!1,name:"enableNotice",valuePropName:"checked",children:(0,e.jsx)(Ue.Z,{defaultChecked:!0,children:f.format("upgradeEnableNotice")})})]})})]})},children:f.format("upgradePruneButton")})]})}var rn=n(96074),xe=n(89075),on=n(93162),ln=n(27771),sn=n(12119);function un(){var i=new m.Uo("components.systemBasic"),r=(0,j.useState)(!1),c=b()(r,2),d=c[0],w=c[1],S=(0,j.useRef)(),s=(0,O.useAccess)(),y=(0,j.useState)(0),R=b()(y,2),f=R[0],_=R[1];return(0,j.useEffect)(function(){S.current&&(S.current.resetFields(),!s.canSeeEnableCe&&(0,xe.YQ)().then(function(u){var a;(a=S.current)===null||a===void 0||a.setFieldValue("expireTime","".concat((0,Te.NF)(u.data.expireTime)))}))},[S.current,f]),(0,e.jsxs)(I.a,{drawerProps:{width:z.R_,destroyOnHidden:!0,extra:(0,e.jsx)("a",{target:"_blank",href:"https://dpanel.cc/pro",children:m.FD.format("help")})},submitter:!1,onFinish:function(){var u=x()(o()().mark(function a(l){var t;return o()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(!(l.uploadCertUpload&&(0,ln.Z)(l.uploadCertUpload))){v.next=4;break}return v.next=3,(0,xe.E1)({fileName:l.uploadCertUpload[0].response.data.path});case 3:t=v.sent;case 4:return _(f+1),v.abrupt("return",!1);case 6:case"end":return v.stop()}},a)}));return function(a){return u.apply(this,arguments)}}(),formRef:S,open:d,onOpenChange:function(a){w(a)},title:i.format("proTitle"),trigger:(0,e.jsx)(M.ZP,{style:{width:150},children:m.FD.format("listManageManage")}),children:[(0,e.jsx)(se.Z,{type:"warning",message:(0,e.jsxs)(e.Fragment,{children:[i.format("proThanks")," ",(0,e.jsx)("a",{target:"_blank",href:"https://dpanel.cc/pro",children:i.format("proBuyButton")})]})}),(0,e.jsx)(rn.Z,{orientation:"center",children:(0,e.jsx)(sn.Z,{})}),(0,e.jsx)(E.Z,{name:"expireTime",label:m.FD.format("listExpireAt"),readonly:!0}),(0,e.jsx)(N.Z,{children:(0,e.jsx)(M.ZP,{onClick:x()(o()().mark(function u(){var a,l;return o()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,(0,xe.$w)();case 2:a=g.sent,l=new Blob([a.data.code],{type:"text/plain"}),(0,on.saveAs)(l,"dpanel.code");case 5:case"end":return g.stop()}},u)})),block:!0,children:i.format("getMachineId")},"downloadCode")}),(0,e.jsx)(ve.Z,{showDragger:!0,required:!0,label:i.format("uploadCertUpload"),name:"uploadCertUpload",accept:".lic",onFinish:function(a){var l;(l=S.current)===null||l===void 0||l.submit()}})]})}function dn(){var i=new m.Uo("components.systemBasic"),r=(0,j.useState)(0),c=b()(r,2),d=c[0],w=c[1],S=(0,j.useRef)(),s=(0,j.useContext)(L.Z),y=s.loading,R=(0,O.useAccess)();return(0,j.useEffect)(function(){var f;y.show(),(f=S.current)===null||f===void 0||f.resetFields(),Promise.all([(0,P.pe)({groupName:"user",name:"founder"}).then(function(_){var u;(u=S.current)===null||u===void 0||u.setFieldsValue({founder:_.data})}),(0,P.pe)({groupName:"setting",name:"login"}).then(function(_){var u,a;(u=S.current)===null||u===void 0||u.setFieldsValue({login:(a=_.data)!==null&&a!==void 0?a:{}})}),!R.canSeeEnableCe&&(0,P.pe)({groupName:"setting",name:"twoFa"}).then(function(_){var u,a;(u=S.current)===null||u===void 0||u.setFieldsValue({twoFa:(a=_.data)!==null&&a!==void 0?a:{}})}),!R.canSeeEnableCe&&(0,P.pe)({groupName:"setting",name:"themeUserConfig"}).then(function(_){var u,a;(u=S.current)===null||u===void 0||u.setFieldsValue({themeUserConfig:(a=_.data)!==null&&a!==void 0?a:{}})}),(0,P.pe)({groupName:"setting",name:"themeConsoleConfig"}).then(function(_){var u,a;(u=S.current)===null||u===void 0||u.setFieldsValue({themeConsoleConfig:(a=_.data)!==null&&a!==void 0?a:{}})}),(0,P.pe)({groupName:"setting",name:"themeConfig"}).then(function(_){var u,a;(u=S.current)===null||u===void 0||u.setFieldsValue({themeConfig:(a=_.data)!==null&&a!==void 0?a:{}})}),(0,P.pe)({groupName:"setting",name:"notification"}).then(function(_){var u,a;(u=S.current)===null||u===void 0||u.setFieldsValue({notification:(a=_.data)!==null&&a!==void 0?a:{}})}),(0,P.d6)().then(function(_){var u,a;(u=S.current)===null||u===void 0||u.setFieldValue("upgradeScript",(a=_.data)!==null&&a!==void 0?a:{})})]).finally(function(){y.destroy()})},[d]),(0,e.jsx)(Me._z,{children:(0,e.jsx)(G.Z,{children:(0,e.jsxs)(Se.A,{layout:"horizontal",labelAlign:"left",labelCol:{xs:7,sm:6,md:5,lg:5,xl:4,xxl:3,offset:0},submitter:!1,formRef:S,children:[(0,e.jsx)(Z.Z,{name:["founder"],children:function(_){var u=_.founder;return u&&(0,e.jsx)(E.Z,{label:i.format("founderTitle"),disabled:!0,width:"md",fieldProps:{prefix:(0,e.jsx)(Ze.Z,{}),value:u.username},addonAfter:(0,e.jsx)(re,{data:u,onFinish:function(){w(d+1)}}),name:"adminUsername"})}}),(0,e.jsx)(U,{label:i.format("loginTitle"),name:"login",disable:function(_){return!1},disableLabel:m.FD.format("listManageDefault"),onDisable:function(){return(0,P.GV)({groupName:"setting",name:"login"})},settingComponent:Ee,onFinish:function(){w(d+1)},tip:i.format("loginTip")}),(0,e.jsx)(U,{isPe:!0,label:i.format("twoFaTitle"),name:"twoFa",disable:function(_){return!(_!=null&&_.enable)},onDisable:function(){return(0,P.GV)({groupName:"setting",name:"twoFa"})},settingComponent:Oe,onFinish:function(){w(d+1)},tip:i.format("twoFaTip")}),(0,e.jsx)(U,{label:i.format("themeConfigTitle"),name:"themeConfig",disable:function(_){return!1},disableLabel:m.FD.format("listManageDefault"),onDisable:function(){return localStorage.removeItem("dpanel-theme"),localStorage.removeItem("dpanel-compact"),localStorage.removeItem("dpanel-pagesize"),(0,P.GV)({groupName:"setting",name:"themeConfig"})},settingComponent:Le,onFinish:function(){window.location.reload(),w(d+1)},tip:i.format("themeConfigTip")}),(0,e.jsx)(U,{isPe:!0,label:i.format("themeUserConfigTitle"),name:"themeUserConfig",disable:function(_){return!1},disableLabel:m.FD.format("listManageDefault"),onDisable:function(){return(0,P.GV)({groupName:"setting",name:"themeUserConfig"})},settingComponent:Ve,onFinish:function(){window.location.reload(),w(d+1)},tip:i.format("themeUserConfigTip")}),(0,e.jsx)(U,{label:i.format("themeConsoleTitle"),name:"themeConsoleConfig",disable:function(_){return!1},disableLabel:m.FD.format("listManageDefault"),onDisable:function(){return(0,P.GV)({groupName:"setting",name:"themeConsoleConfig"})},settingComponent:Je,onFinish:function(){w(d+1)},tip:i.format("themeConsoleTip")}),(0,e.jsx)(U,{label:i.format("notificationTitle"),name:"notification",onDisable:function(){return(0,P.GV)({groupName:"setting",name:"themeConsoleConfig"})},settingComponent:qe,onFinish:function(){w(d+1)},tip:i.format("notificationTip")}),(0,e.jsx)(U,{label:i.format("upgradeTitle"),name:"upgradeScript",settingComponent:an}),!R.canSeeEnableCe&&(0,e.jsx)(U,{label:i.format("proTitle"),name:"pro",settingComponent:un,tip:i.format("proTip")})]})})})}},4813:function(ee,K,n){n.d(K,{_:function(){return p}});var V=n(15009),b=n.n(V),N=n(99289),Z=n.n(N),H=n(82346);function p(m){return A.apply(this,arguments)}function A(){return A=Z()(b()().mark(function m(B){return b()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,H.request)("/dpanel/api/common/attach/delete",{method:"POST",data:B});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},m)})),A.apply(this,arguments)}},89075:function(ee,K,n){n.d(K,{$w:function(){return p},E1:function(){return U},YQ:function(){return m},ax:function(){return O}});var V=n(15009),b=n.n(V),N=n(99289),Z=n.n(N),H=n(82346);function p(){return A.apply(this,arguments)}function A(){return A=Z()(b()().mark(function o(){return b()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.abrupt("return",(0,H.request)("/dpanel/api/pro/home/get-machine-id",{method:"POST"}));case 1:case"end":return x.stop()}},o)})),A.apply(this,arguments)}function m(){return B.apply(this,arguments)}function B(){return B=Z()(b()().mark(function o(){return b()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.abrupt("return",(0,H.request)("/dpanel/api/pro/home/get-license-info",{method:"POST"}));case 1:case"end":return x.stop()}},o)})),B.apply(this,arguments)}function O(){return e.apply(this,arguments)}function e(){return e=Z()(b()().mark(function o(){return b()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.abrupt("return",(0,H.request)("/dpanel/api/pro/home/login-info",{method:"POST"}));case 1:case"end":return x.stop()}},o)})),e.apply(this,arguments)}function U(o){return J.apply(this,arguments)}function J(){return J=Z()(b()().mark(function o(W){return b()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.abrupt("return",(0,H.request)("/dpanel/api/pro/home/upload-license-file",{method:"POST",data:W}));case 1:case"end":return L.stop()}},o)})),J.apply(this,arguments)}}}]);
