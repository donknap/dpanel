"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3905],{8287:function(We,Re,n){var Ze=n(5574),I=n.n(Ze),be=n(15009),a=n.n(be),ve=n(99289),_=n.n(ve),o=n(13822),ne=n(83622),V=n(85265),N=n(42075),U=n(83062),E=n(67294),se=n(81146),M=n(1883),O=n(58638),ge=n(62597),y=n(3616),p=n(82346),ae=n(36146),_e=n(85893),te=(0,E.forwardRef)(function(De,S){(0,E.useImperativeHandle)(S,function(){return{show:function(re){return _()(a()().mark(function i(){var je;return a()().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:return ce.next=2,(0,o.jV)({md5:re});case 2:je=ce.sent,je.data&&Le(je.data.info),pe(!0);case 5:case"end":return ce.stop()}},i)}))()}}});var s=(0,E.useState)(!1),e=I()(s,2),Oe=e[0],pe=e[1],Te=(0,E.useState)(),we=I()(Te,2),J=we[0],Le=we[1],b=(0,E.useRef)(),he=new ae.Uo("components.appDetail");return(0,_e.jsxs)(_e.Fragment,{children:[De.showTriggerButton&&(0,_e.jsx)(ne.ZP,{icon:(0,_e.jsx)(M.Z,{}),onClick:_()(a()().mark(function de(){return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:Le(De.containerInfo),pe(!0);case 2:case"end":return i.stop()}},de)})),children:ae.FD.format("listManageLog")},"log"),(0,_e.jsx)(V.Z,{title:he.format("titleLog"),open:Oe,forceRender:!0,onClose:function(){pe(!1)},afterOpenChange:function(re){if(re)setTimeout(function(){var je,oe;(je=b.current)===null||je===void 0||je.start(),(oe=b.current)===null||oe===void 0||oe.fit()},1e3);else{var i;(i=b.current)===null||i===void 0||i.close()}},width:y.FK,extra:(0,_e.jsx)(N.Z,{children:(0,_e.jsx)(p.Link,{to:"/container/log/".concat(J==null?void 0:J.Name),target:"_blank",onClick:function(){var re;(re=b.current)===null||re===void 0||re.close(),pe(!1)},children:(0,_e.jsx)(U.Z,{title:ae.FD.format("listManageOpenNewWindow"),children:(0,_e.jsx)(O.Z,{})})})}),children:J&&Oe&&(0,_e.jsx)(se.Z,{ref:b,showInDrawer:!0,id:"container:log:".concat(J==null?void 0:J.Id),request:function(){var de=_()(a()().mark(function re(i){var je;return a()().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:return ce.next=2,(0,ge.Tb)({id:(je=J.Id)!==null&&je!==void 0?je:"",lineTotal:i.lineTotal,download:i.download,showTime:i.showTime});case 2:case"end":return ce.stop()}},re)}));return function(re){return de.apply(this,arguments)}}(),download:function(){var de=_()(a()().mark(function re(i){var je,oe,ce,Me;return a()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,(0,ge.XH)({id:(je=J.Id)!==null&&je!==void 0?je:"",lineTotal:i.lineTotal,showTime:i.showTime});case 2:return ce=q.sent,q.next=5,(0,o.jV)({md5:(oe=J.Id)!==null&&oe!==void 0?oe:""});case 5:return Me=q.sent,q.abrupt("return",{data:new Blob([ce],{type:"text/plain"}),name:Me.data.info.Name.replaceAll("/","")+"_"+new Date().toLocaleDateString()+".log"});case 7:case"end":return q.stop()}},re)}));return function(re){return de.apply(this,arguments)}}()})})]})});Re.Z=te},3905:function(We,Re,n){n.d(Re,{Z:function(){return it}});var Ze=n(5574),I=n.n(Ze),be=n(15009),a=n.n(be),ve=n(99289),_=n.n(ve),o=n(67294),ne=n(45605),V=n(38345),N=n(97269),U=n(26412),E=n(42075),se=n(96074),M=n(25593),O=n(2487),ge=n(76428),y=n(44771),p=n(13822),ae=n(24963),_e=n(37413),te=n(5251),De=n(82346),S=n(87662),s=n(36146),e=n(85893);function Oe(t){var Z,r,l,x,B,j,u,m,v,D,d,C=new s.Uo("components.appDetail"),R=(0,o.useState)(""),P=I()(R,2),le=P[0],W=P[1],k=(0,De.useAccess)(),A=(0,o.useContext)(ae.Z),ye=A.message,Ce=(0,o.useRef)(),f=[],Ee=[],Ue=[],He=(0,o.useState)(""),Y=I()(He,2),h=Y[0],T=Y[1];return(0,o.useEffect)(function(){t.data&&((0,S.K3)().then(function(c){var g;T((g=c.data.serverUrl)!==null&&g!==void 0?g:"")}),W(t.data.info.Name))},[t.data]),(0,o.useEffect)(function(){var c,g,H;(c=Ce.current)===null||c===void 0||c.setFieldValue("restart",{name:(g=t.data.info.HostConfig)===null||g===void 0?void 0:g.RestartPolicy.Name,maxAccept:(H=t.data.info.HostConfig)===null||H===void 0?void 0:H.RestartPolicy.MaximumRetryCount})},[Ce.current,t.data]),t.data&&t.data.domain&&t.data.domain.map(function(c){Ue.push(c.setting.enableSSL?"https://"+c.serverName:"http://"+c.serverName)}),t.data.info.NetworkSettings.Ports&&Object.entries(t.data.info.NetworkSettings.Ports).forEach(function(c){var g=I()(c,2),H=g[0],L=g[1];if(L){var Pe=H.split("/"),me=I()(Pe,2),fe=me[0],$e=me[1];L.forEach(function(an){an.HostPort?f.push({PrivatePort:fe,Type:$e,IP:an.HostIp,PublicPort:an.HostPort}):Ee.push({PrivatePort:fe,Type:$e,IP:"",PublicPort:""})})}}),(0,e.jsxs)(e.Fragment,{children:[t.data&&t.data.info.State.Running&&(0,e.jsx)(_e.Z,{publicPort:f,privatePort:Ee,domain:Ue,serverIp:h,showInDetail:!0,ghost:t.ghost,layout:"inline"}),(0,e.jsx)(V.Z,{title:(0,e.jsx)(ne.Z,{}),subTitle:C.format("titleBasic"),ghost:t.ghost,children:(0,e.jsxs)(U.Z,{column:1,bordered:!0,children:[(0,e.jsx)(U.Z.Item,{label:"Hostname",children:(0,e.jsx)(E.Z,{split:(0,e.jsx)(se.Z,{type:"vertical"}),children:(0,e.jsx)(ge.Z,{title:(Z=t.data.info)===null||Z===void 0?void 0:Z.Config.Hostname})})}),(0,e.jsx)(U.Z.Item,{label:s.FD.format("listName"),children:(0,e.jsxs)(E.Z,{split:(0,e.jsx)(se.Z,{type:"vertical"}),children:[(0,e.jsx)(ge.Z,{title:(r=t.data.info)===null||r===void 0?void 0:r.Id.substring(0,12)}),(0,e.jsx)(M.Z.Text,{copyable:!0,editable:{tooltip:s.FD.format("listManageEdit"),onChange:function(){var c=_()(a()().mark(function H(L){var Pe;return a()().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:if((Pe=t.data.info)!==null&&Pe!==void 0&&Pe.Id){fe.next=2;break}return fe.abrupt("return");case 2:return fe.next=4,(0,p.eE)({md5:t.data.info.Id,name:L});case 4:W(L),ye.success(s.FD.format("finish"));case 6:case"end":return fe.stop()}},H)}));function g(H){return c.apply(this,arguments)}return g}()},children:(0,te.fi)(le,"/")})]})}),(0,e.jsx)(U.Z.Item,{label:s.FD.format("listNetwork"),children:((l=t.data.info)===null||l===void 0?void 0:l.State.Running)&&(0,e.jsxs)(U.Z,{column:1,bordered:!0,children:[t.data.info.NetworkSettings.Networks&&Object.keys(t.data.info.NetworkSettings.Networks).map(function(c,g){var H,L,Pe;return(0,e.jsx)(U.Z.Item,{label:c,children:c=="host"?s.FD.format("listNetworkUseHost"):(0,e.jsxs)(E.Z,{direction:"vertical",children:[(0,e.jsx)(ge.Z,{title:(H=t.data.info)===null||H===void 0?void 0:H.NetworkSettings.Networks[c].IPAddress}),(L=t.data.info)===null||L===void 0?void 0:L.NetworkSettings.Networks[c].Gateway,(Pe=t.data.info)===null||Pe===void 0?void 0:Pe.NetworkSettings.Networks[c].MacAddress]})},g)}),((x=t.data.info.HostConfig)===null||x===void 0?void 0:x.ExtraHosts)&&(0,e.jsx)(U.Z.Item,{label:s.FD.format("listNetworkUseHost"),children:(0,e.jsx)(E.Z,{direction:"vertical",children:t.data.info.HostConfig.ExtraHosts.map(function(c,g){if(c.indexOf(":")>-1){var H=c.split(":");return"".concat(H[0]," - ").concat(H.slice(1).join(":"))}})})},"host")]})}),(0,e.jsx)(U.Z.Item,{label:s.FD.format("listRunTime"),children:C.format("runTimeValue",{create:new Date((B=(j=t.data.info)===null||j===void 0?void 0:j.Created)!==null&&B!==void 0?B:"").toLocaleString(),upgrade:new Date((u=(m=t.data.info)===null||m===void 0?void 0:m.State.StartedAt)!==null&&u!==void 0?u:"").toLocaleString()})}),k.canSeeContainerListManage&&(0,e.jsx)(U.Z.Item,{label:s.FD.format("listRestartPolicy"),children:(0,e.jsx)(N.A,{name:"container-restart",submitter:!1,onValuesChange:function(){var c=_()(a()().mark(function g(H,L){var Pe,me;return a()().wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:if((Pe=t.data.info)!==null&&Pe!==void 0&&Pe.Id){$e.next=2;break}return $e.abrupt("return");case 2:return $e.next=4,(0,p.eE)({md5:t.data.info.Id,restart:L.restart});case 4:return me=$e.sent,ye.success(s.FD.format("finish")),$e.abrupt("return");case 7:case"end":return $e.stop()}},g)}));return function(g,H){return c.apply(this,arguments)}}(),layout:"inline",formRef:Ce,children:(0,e.jsx)(y.Z,{ghost:!0,defaultValue:(v=t.data.info)===null||v===void 0||(v=v.HostConfig)===null||v===void 0?void 0:v.RestartPolicy.Name})})}),(0,e.jsx)(U.Z.Item,{label:s.FD.format("listEnv"),children:(0,e.jsx)(O.Z,{dataSource:(D=(d=t.data.info)===null||d===void 0?void 0:d.Config.Env)!==null&&D!==void 0?D:[],renderItem:function(g){var H=g.split("=");return(0,e.jsxs)(O.Z.Item,{children:[(0,e.jsx)(M.Z.Text,{code:!0,children:H[0]})," = ",(0,e.jsx)(M.Z.Text,{copyable:!0,children:H.slice(1).join("=")})]})}})})]})})]})}var pe=n(60433),Te=n(85265),we=n(86250),J=n(31574);function Le(t){var Z,r=new s.Uo("components.appDetail");return t.data&&t.data.Mounts&&t.data.Mounts.length>0&&(0,e.jsx)(V.Z,{ghost:t.ghost,title:(0,e.jsx)(J.Z,{}),subTitle:r.format("titleVolume"),children:(0,e.jsx)(U.Z,{column:1,bordered:!0,children:(Z=t.data)===null||Z===void 0?void 0:Z.Mounts.map(function(l,x){return(0,e.jsx)(U.Z.Item,{styles:{label:{width:"50%",wordBreak:"break-word"},content:{width:"50%",wordBreak:"break-word"}},label:l.Type=="volume"?l.Name:l.Source,children:l.Destination},x)})})})}var b=n(43425),he=n(74842),de=n(33160),re=n(87784),i=n(30159),je=n(89035),oe=n(95591),ce=n(83622),Me=n(94359),ie=n(80821),q=n(99922),ee=n(96486),Ae=n.n(ee),w=n(29463),G=n(8287),z=(0,o.createContext)({}),Q=z,Se=n(19632),F=n.n(Se),X=n(3616),K=n(12122),xe=n(60940),ue=n(27619);function Ie(t){return $.apply(this,arguments)}function $(){return $=_()(a()().mark(function t(Z){return a()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,De.request)("/dpanel/api/app/container/get-stat-info",{method:"POST",data:Z}));case 1:case"end":return l.stop()}},t)})),$.apply(this,arguments)}function Be(t){return Fe.apply(this,arguments)}function Fe(){return Fe=_()(a()().mark(function t(Z){return a()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,De.request)("/dpanel/api/app/container/get-process-info",{method:"POST",data:Z}));case 1:case"end":return l.stop()}},t)})),Fe.apply(this,arguments)}var Ke={total:0,memory:{usage:[{name:"use",data:[]},{name:"all",show:!1,data:[]}],source:{usage:0,limit:0}},cpu:{usage:[{name:"use",data:[]}],source:{usage:0,limit:0}},network:{usage:[{name:"rx",data:[]},{name:"tx",data:[]}],source:{usageIn:0,usageOut:0}},io:{usage:[{name:"read",data:[]},{name:"write",data:[]}],source:{usageRead:0,usageWrite:0}}},Ge=function(Z,r){var l,x,B;switch(r.type){case"clear":return Ke;case"update":var j=new Date().toLocaleTimeString(),u=JSON.parse(JSON.stringify(Ke));return(l=r.payload)!==null&&l!==void 0&&l.memory&&(u.memory.usage=[{name:"use",data:[].concat(F()(Z.memory.usage[0].data.slice(-20)),[{date:j,value:Math.round(r.payload.memory.in)}])},{name:"all",show:!1,data:[].concat(F()(Z.memory.usage[1].data.slice(-20)),[{date:j,value:Math.round(r.payload.memory.out)}])}],u.memory.source={usage:r.payload.memory.in,limit:r.payload.memory.out},u.cpu.usage=[{name:"use",data:[].concat(F()(Z.cpu.usage[0].data.slice(-20)),[{date:j,value:r.payload.cpu.toFixed(2)}])}],u.cpu.source={usage:r.payload.cpu,limit:100}),(x=r.payload)!==null&&x!==void 0&&x.networkIO&&(u.network.source={usageIn:parseFloat(r.payload.networkIO.in.toFixed(2)),usageOut:parseFloat(r.payload.networkIO.out.toFixed(2))},u.network.usage=[{name:"rx",data:[].concat(F()(Z.network.usage[0].data.slice(-20)),[{date:j,value:r.payload.networkIO.out.toFixed(2)}])},{name:"tx",data:[].concat(F()(Z.network.usage[1].data.slice(-20)),[{date:j,value:r.payload.networkIO.in.toFixed(2)}])}]),(B=r.payload)!==null&&B!==void 0&&B.blockIO&&(u.io.source={usageRead:parseFloat(r.payload.blockIO.out.toFixed(2)),usageWrite:parseFloat(r.payload.blockIO.in.toFixed(2))},u.io.usage=[{name:"read",data:[].concat(F()(Z.io.usage[0].data.slice(-20)),[{date:j,value:r.payload.blockIO.out.toFixed(2)}])},{name:"write",data:[].concat(F()(Z.io.usage[1].data.slice(-20)),[{date:j,value:r.payload.blockIO.in.toFixed(2)}])}]),u}},sn=(0,o.forwardRef)(function(t,Z){var r=(0,o.useState)(!1),l=I()(r,2),x=l[0],B=l[1],j=(0,o.useReducer)(Ge,Ke),u=I()(j,2),m=u[0],v=u[1],D=(0,o.useState)(),d=I()(D,2),C=d[0],R=d[1],P=(0,o.useContext)(ae.Z),le=P.loading,W=(0,De.useModel)("subscriber"),k=new s.Uo("components.appDetail");(0,o.useImperativeHandle)(Z,function(){return{}});function A(Ce){return ye.apply(this,arguments)}function ye(){return ye=_()(a()().mark(function Ce(f){var Ee,Ue;return a()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return le.show(),Ie({id:f}),Y.next=4,Be({id:f});case 4:Ee=Y.sent,Ue={columns:[],data:[]},Ee.data.list.Titles.map(function(h){Ue.columns.push({title:h,label:h,dataIndex:h})}),Ee.data.list.Processes.map(function(h,T){Ue.data.push({UID:h[0],PID:h[1],PPID:h[2],C:h[3],STIME:h[4],TTY:h[5],TIME:h[6],CMD:h[7]})}),R(Ue),le.destroy();case 10:case"end":return Y.stop()}},Ce)})),ye.apply(this,arguments)}return(0,o.useEffect)(function(){return function(){W.progress.close("container:stat:"+t.containerInfo.Id),v({type:"clear",payload:{}})}},[t.containerInfo]),(0,e.jsxs)(e.Fragment,{children:[t.showTriggerButton&&(0,e.jsx)(ce.ZP,{onClick:_()(a()().mark(function Ce(){return a()().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:B(!0);case 1:case"end":return Ee.stop()}},Ce)})),icon:(0,e.jsx)(K.Z,{}),children:s.FD.format("listManageStat")},"log"),(0,e.jsxs)(Te.Z,{title:k.format("titleStat"),open:x,onClose:function(){B(!1)},afterOpenChange:function(f){f?setTimeout(function(){var Ee;!((Ee=t.containerInfo)===null||Ee===void 0)&&Ee.Name&&A(t.containerInfo.Id),W.addDataHandler("container:stat:".concat(t.containerInfo.Id),function(Ue){v({type:"update",payload:Ue.data})})},500):(W.progress.close("container:stat:"+t.containerInfo.Id),v({type:"clear"}))},width:X.R_,children:[(0,e.jsxs)(V.Z,{ghost:!0,direction:"row",wrap:!0,gutter:[20,20],children:[m.memory&&m.memory.source&&(0,e.jsx)(V.Z,{colSpan:12,title:(0,e.jsx)(K.Z,{}),subTitle:"Memory usage: ".concat((0,te.FI)(m.memory.source.usage)," / ").concat((0,te.FI)(m.memory.source.limit)),headerBordered:!0,bordered:!0,children:(0,e.jsx)(ue.Z,{name:"container-memory",data:m.memory.usage,yLabelFormatter:function(f){return(0,te.FI)(parseFloat(f))},yValueFormatter:function(f){return(0,te.FI)(parseFloat(f))},yDomainMaxCallback:function(f){return f.min*2}})}),(0,e.jsx)(V.Z,{colSpan:12,title:(0,e.jsx)(K.Z,{}),subTitle:"Cpu usage: ".concat(m.cpu.source.usage.toFixed(2),"%"),headerBordered:!0,bordered:!0,children:(0,e.jsx)(ue.Z,{name:"container-cpu",data:m.cpu.usage,yDomainMaxCallback:function(f){return f.min*100},yLabelFormatter:function(f){return"".concat(parseFloat(f).toFixed(2),"%")}})}),m.io&&m.io.source&&(0,e.jsx)(V.Z,{colSpan:12,title:(0,e.jsx)(K.Z,{}),subTitle:"I/O: ".concat((0,te.FI)(m.io.source.usageRead)," / ").concat((0,te.FI)(m.io.source.usageWrite)),headerBordered:!0,bordered:!0,children:(0,e.jsx)(ue.Z,{name:"container-disk",data:m.io.usage,yDomainMaxCallback:function(f){return f.max*2},yLabelFormatter:function(f){return(0,te.FI)(parseFloat(f))}})}),m.network&&m.network.source&&(0,e.jsx)(V.Z,{colSpan:12,title:(0,e.jsx)(K.Z,{}),subTitle:"Network: ".concat((0,te.FI)(m.network.source.usageIn)," / ").concat((0,te.FI)(m.network.source.usageOut)),headerBordered:!0,bordered:!0,children:(0,e.jsx)(ue.Z,{name:"container-network",data:m.network.usage,yDomainMaxCallback:function(f){return f.max*2},yLabelFormatter:function(f){return(0,te.FI)(parseFloat(f))}})})]}),(0,e.jsx)(V.Z,{title:(0,e.jsx)(pe.Z,{}),subTitle:"Progress",children:(0,e.jsx)(xe.Z,{scroll:{x:"max-content"},rowKey:"PID",columns:C==null?void 0:C.columns,dataSource:C==null?void 0:C.data,pagination:{pageSize:10}})})]})]})}),un=sn,dn=(0,o.forwardRef)(function(t,Z){(0,o.useImperativeHandle)(Z,function(){return{showConsole:u}});var r=new s.Uo("components.appDetail"),l=(0,o.useRef)(),x=(0,o.useContext)(Q),B=x.reload,j=x.loadingRef;function u(m){var v;(v=l.current)===null||v===void 0||v.show({url:"/console/container/".concat(t.data.Id),title:t.data.Name,workDir:m})}return console.log(t.data.State),(0,e.jsx)(V.Z,{title:(0,e.jsx)(b.Z,{}),ghost:t.ghost,subTitle:(0,e.jsxs)(E.Z,{children:[r.format("titleOp")," - ",function(m){if(m){var v=m.State.Status,D=m.State.Status;if(m.State.Health&&m.State.Health.Status=="unhealthy"){var d,C;v=m.State.Health.Status,D=(d=(C=Ae().last(m.State.Health.Log))===null||C===void 0?void 0:C.Output)!==null&&d!==void 0?d:v}return(0,e.jsx)(Me.Z,{status:"container.".concat(v),tip:D})}}(t.data)]}),children:(0,e.jsxs)(E.Z,{wrap:!0,children:[t.data&&!t.data.State.Running&&(0,e.jsx)(ie.Z,{buttonProps:{icon:(0,e.jsx)(he.Z,{})},action:_()(a()().mark(function m(){var v,D,d;return a()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return(v=j.current)===null||v===void 0||v.show(),R.abrupt("return",(0,p.IW)({md5:(D=(d=t.data)===null||d===void 0?void 0:d.Id)!==null&&D!==void 0?D:"",operate:"start"}).finally(function(){var P;(P=j.current)===null||P===void 0||P.destroy()}));case 2:case"end":return R.stop()}},m)})),onSuccess:function(){return B()},children:s.FD.format("listManageStart")}),t.data&&t.data.State.Running&&(0,e.jsx)(ie.Z,{buttonProps:{icon:(0,e.jsx)(de.Z,{})},action:_()(a()().mark(function m(){var v,D,d;return a()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return(v=j.current)===null||v===void 0||v.show(),R.abrupt("return",(0,p.IW)({md5:(D=(d=t.data)===null||d===void 0?void 0:d.Id)!==null&&D!==void 0?D:"",operate:"restart"}).finally(function(){var P;(P=j.current)===null||P===void 0||P.destroy()}));case 2:case"end":return R.stop()}},m)})),onSuccess:function(){return B()},children:s.FD.format("listManageRestart")}),t.data&&t.data.State.Running&&(0,e.jsx)(ie.Z,{action:_()(a()().mark(function m(){var v,D,d;return a()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return(v=j.current)===null||v===void 0||v.show(),R.abrupt("return",(0,p.IW)({md5:(D=(d=t.data)===null||d===void 0?void 0:d.Id)!==null&&D!==void 0?D:"",operate:"stop"}).finally(function(){var P;(P=j.current)===null||P===void 0||P.destroy()}));case 2:case"end":return R.stop()}},m)})),buttonProps:{danger:!0,icon:(0,e.jsx)(re.Z,{})},onSuccess:function(){return B()},children:s.FD.format("listManageStop")}),t.data&&t.data.State.Running&&!t.data.State.Paused&&(0,e.jsx)(ie.Z,{action:_()(a()().mark(function m(){var v,D,d;return a()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return(v=j.current)===null||v===void 0||v.show(),R.abrupt("return",(0,p.IW)({md5:(D=(d=t.data)===null||d===void 0?void 0:d.Id)!==null&&D!==void 0?D:"",operate:"pause"}).finally(function(){var P;(P=j.current)===null||P===void 0||P.destroy()}));case 2:case"end":return R.stop()}},m)})),onSuccess:function(){return B()},buttonProps:{icon:(0,e.jsx)(i.Z,{})},children:s.FD.format("listManagePause")}),t.data&&t.data.State.Paused&&(0,e.jsx)(ie.Z,{action:_()(a()().mark(function m(){var v,D,d;return a()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return(v=j.current)===null||v===void 0||v.show(),R.abrupt("return",(0,p.IW)({md5:(D=(d=t.data)===null||d===void 0?void 0:d.Id)!==null&&D!==void 0?D:"",operate:"unpause"}).finally(function(){var P;(P=j.current)===null||P===void 0||P.destroy()}));case 2:case"end":return R.stop()}},m)})),onSuccess:function(){return B()},buttonProps:{icon:(0,e.jsx)(he.Z,{})},children:s.FD.format("listManageUnpause")}),t.data&&t.data.State.Running&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(se.Z,{type:"vertical"}),(0,e.jsx)(q.Z,{showFileExplorer:!0,ref:l}),(0,e.jsx)(ce.ZP,{type:"primary",onClick:function(){t.data&&u(t.data.Config.WorkingDir)},icon:(0,e.jsx)(je.Z,{}),children:s.FD.format("listManageConsole")}),(0,e.jsx)(w.Z,{showConsole:!0,type:"container",name:(0,te.fi)(t.data.Name,"/"),title:(0,te.fi)(t.data.Name,"/"),trigger:(0,e.jsx)(ce.ZP,{icon:(0,e.jsx)(oe.Z,{}),children:s.FD.format("listManageFilePath")})}),(0,e.jsx)(G.Z,{containerInfo:t.data,showTriggerButton:!0}),(0,e.jsx)(un,{containerInfo:t.data,showTriggerButton:!0})]}),(0,e.jsx)(se.Z,{type:"vertical"}),(0,e.jsx)(ce.ZP,{type:"dashed",icon:(0,e.jsx)(de.Z,{}),onClick:function(){B()},children:s.FD.format("listManageRefresh")})]})})}),cn=dn,ze=n(62597),mn=n(86548),fn=n(57132),rn=n(82061),on=n(25035),vn=n(58638),ln=n(60219),Ne=n(62370),hn=n(5966),gn=n(52688),_n=n(85418),pn=n(40411),ke=n(84567),Ve=n(83062),jn=n(25278),Qe=n(78045),xn=n(24739),En=n(97462),Pn=n(70146);function Dn(t){var Z=(0,o.useRef)(),r=new s.Uo("components.appDetail");return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(ie.Z,{buttonProps:{icon:(0,e.jsx)(ln.Z,{})},confirmProps:{onOpenChange:function(x,B){var j,u;!((j=Z.current)===null||j===void 0)&&j.resetFields&&((u=Z.current)===null||u===void 0||u.resetFields())},description:(0,e.jsxs)(E.Z,{style:{width:650,marginTop:"10px",paddingRight:"10px"},direction:"vertical",size:20,children:[(0,e.jsx)(M.Z.Text,{children:(0,e.jsx)("ul",{children:r.prefix("backupVolumeTipOption",3).map(function(l,x){return(0,e.jsxs)("li",{children:[l," ",x==2&&(0,e.jsx)(De.Link,{to:"/app/backup",children:s.Ob.format("container.backup")})]},x)})})}),(0,e.jsx)(N.A,{layout:"inline",formRef:Z,submitter:!1,children:(0,e.jsxs)(E.Z,{direction:"vertical",children:[(0,e.jsx)(Ne.Z,{name:"backupType",valuePropName:"value",initialValue:"none",children:(0,e.jsxs)(Qe.ZP.Group,{children:[(0,e.jsx)(Qe.ZP,{value:"none",children:(0,e.jsx)(Ve.Z,{title:r.format("backupVolumeImageTipOption.none"),children:r.format("backupVolumeImageOption.none")})}),(0,e.jsx)(Qe.ZP,{value:"image",children:(0,e.jsx)(Ve.Z,{title:r.format("backupVolumeImageTipOption.image"),children:r.format("backupVolumeImageOption.image")})}),(0,e.jsx)(Qe.ZP,{value:"container",children:(0,e.jsx)(Ve.Z,{title:r.format("backupVolumeImageTipOption.container"),children:r.format("backupVolumeImageOption.container")})})]})}),(0,e.jsxs)(xn.UW,{children:[(0,e.jsx)(Ne.Z,{valuePropName:"checked",name:"enableSelectVolume",children:(0,e.jsx)(ke.Z,{disabled:!t.container.Mounts||t.container.Mounts.length==0,children:r.format("backupVolumeEnableSelectVolume")})}),(0,e.jsx)(En.Z,{name:["enableSelectVolume"],children:function(x){var B=x.enableSelectVolume;return B&&(0,e.jsx)(E.Z,{wrap:!0,children:t.container.Mounts&&t.container.Mounts.map(function(j,u){return(0,e.jsx)(Ne.Z,{valuePropName:"checked",name:["volume",j.Destination],children:(0,e.jsx)(ke.Z,{children:j.Destination})},"volume-".concat(u))})})}})]})]})})]})},action:_()(a()().mark(function l(){var x,B,j,u;return a()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,(0,Pn.yB)({id:t.container.Name,enableImage:((x=Z.current)===null||x===void 0?void 0:x.getFieldValue("backupType"))!="none",volume:Object.keys((B=(j=Z.current)===null||j===void 0?void 0:j.getFieldValue("volume"))!==null&&B!==void 0?B:{}).filter(function(D){return D}),enableCommitImage:((u=Z.current)===null||u===void 0?void 0:u.getFieldValue("backupType"))=="container"});case 2:case"end":return v.stop()}},l)})),children:r.format("backupVolumeButton")})})}var On=n(99861),Xe=n(73813),In=n(50888),Cn=n(16596),Je=n(1699),qe=n(29453),yn=n(71965);function Rn(t){return en.apply(this,arguments)}function en(){return en=_()(a()().mark(function t(Z){return a()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,De.request)("/dpanel/api/pro/container-rollback/get-list",{data:Z,method:"POST"});case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},t)})),en.apply(this,arguments)}function Zn(t){return nn.apply(this,arguments)}function nn(){return nn=_()(a()().mark(function t(Z){return a()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,De.request)("/dpanel/api/pro/container-rollback/restore",{data:Z,method:"POST"});case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},t)})),nn.apply(this,arguments)}var bn=n(86615),Mn=n(40056),Tn=n(89240);function Sn(t){var Z=(0,De.useAccess)(),r=(0,o.useState)(),l=I()(r,2),x=l[0],B=l[1],j=(0,o.useRef)(),u=new s.Uo("components.appDetail");return(0,o.useEffect)(function(){Z.canSeeEnableCe||Rn({siteName:(0,Tn.HJ)(t.detail.Name)}).then(function(m){B(m.data.list)})},[t.detail]),(0,e.jsx)(Je.u,{access:["canSeeEnableCe"],showProTips:!0,showProTipsOffset:Z.canSeeEnableCe?[-15,0]:void 0,children:function(v){var D=v.canSeeEnableCe;return(0,e.jsx)(ie.Z,{action:function(){var C;return Zn({id:(C=j.current)===null||C===void 0?void 0:C.getFieldValue("id"),enableForce:!0})},buttonProps:{icon:(0,e.jsx)(yn.Z,{}),disabled:D,style:{marginRight:Z.canSeeEnableCe?20:0}},confirmProps:{onOpenChange:function(C,R){var P;!((P=j.current)===null||P===void 0)&&P.resetFields&&j.current.resetFields()},description:(0,e.jsx)(N.A,{formRef:j,submitter:!1,children:(0,e.jsxs)(E.Z,{direction:"vertical",style:{width:500},size:[0,15],children:[(0,e.jsx)(M.Z.Text,{children:u.format("rollbackTip")}),x&&x.length>0?(0,e.jsx)(bn.Z.Group,{fieldProps:{style:{display:"flex",flexDirection:"column",gap:8}},name:"id",label:"",options:x&&x.map(function(d){return{label:"id: ".concat(d.id," ").concat(s.FD.format("listDeletedAt"),": ").concat((0,te.NF)(d.deletedAt)),value:d.id}})}):(0,e.jsx)(Mn.Z,{message:u.format("rollbackEmptyTip"),style:{marginBottom:10}})]})})},onSuccess:function(){var C;(C=j.current)===null||C===void 0||C.resetFields(),t.onFinish&&t.onFinish()},children:s.FD.format("listManageRollback")})}})}var wn=n(184),tn=n(14946),Ln=n(9773);function Fn(t){return(0,e.jsxs)(E.Z,{children:[t.title,(0,e.jsx)(Ve.Z,{title:t.help,children:(0,e.jsx)(on.Z,{})})]})}var An=n(36588),Un=n(16970),$n=n(20743),Wn=n(78451),Bn=(0,o.forwardRef)(function(t,Z){var r;(0,o.useImperativeHandle)(Z,function(){return{}});var l=(0,o.useRef)(),x=(0,o.useRef)(),B=(0,o.useState)(),j=I()(B,2),u=j[0],m=j[1];return(0,o.useEffect)(function(){var v,D;m(t.containerInfo),!((v=l.current)===null||v===void 0)&&v.reloadAndRest&&((D=l.current)===null||D===void 0||D.reloadAndRest())},[t.containerInfo]),(0,e.jsxs)(V.Z,{ghost:t.ghost,children:[(0,e.jsx)(An.Z,{ref:x}),(0,e.jsx)(Ln.Z,{scroll:{x:"max-content"},rowKey:"key",actionRef:l,pagination:!1,ghost:!0,columns:[{title:s.FD.format("listContainerNetworkName"),key:"name",dataIndex:"networkName"},{title:s.FD.format("listContainerName"),key:"containerName",dataIndex:"containerName",width:100,render:function(D,d,C,R,P){return(0,e.jsx)(Wn.Z,{content:(0,te.fi)(d.containerName,"/")})}},{title:(0,e.jsx)(Fn,{title:"hostname",help:s.FD.format("listHostnameTip")}),key:"hostName",render:function(D,d,C){return d.hostName?(0,e.jsx)(E.Z,{direction:"vertical",children:d.hostName.map(function(R,P){if(R)return(0,e.jsx)(M.Z.Text,{copyable:!0,keyboard:!0,children:R},P)})}):(0,e.jsx)(e.Fragment,{})}},{title:"Ip",key:"ip",render:function(D,d,C,R,P){return(0,e.jsxs)(E.Z,{direction:"vertical",children:[(0,e.jsx)("span",{children:d.networkInfo.IPv4Address}),d.networkInfo.IPv6Address&&(0,e.jsx)("span",{children:d.networkInfo.IPv6Address})]})}},{title:s.FD.format("listManage"),key:"option",width:50,fixed:"right",render:function(D,d,C,R,P){return(0,e.jsxs)(E.Z,{children:[d.networkName!=""&&(0,e.jsx)(M.Z.Link,{onClick:function(){var W;(W=x.current)===null||W===void 0||W.show(d.networkName)},children:(0,e.jsx)(Ve.Z,{title:s.FD.format("listManageDetail"),children:(0,e.jsx)(b.Z,{})})}),d.key!="bridge"&&d.key!="none"&&d.key!="host"&&d.networkName!=""&&(0,e.jsx)(ie.Z,{buttonProps:{type:"link",danger:!0},confirmProps:{description:"notification.confirm.title"},action:function(){return(0,tn.t9)({name:d.networkName,containerName:t.containerInfo.Name})},onSuccess:function(){var W,k;!((W=l.current)===null||W===void 0)&&W.reloadAndRest&&((k=l.current)===null||k===void 0||k.reloadAndRest())},tips:s.FD.format("listManageExit"),children:(0,e.jsx)(rn.Z,{})})]})}}],request:function(){var v=_()(a()().mark(function D(d,C,R){var P,le;return a()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,(0,p.jV)({md5:t.containerInfo.Name});case 2:return P=k.sent,m(P.data.info),k.next=6,(0,tn._3)({name:Object.keys(P.data.info.NetworkSettings.Networks)});case 6:return le=k.sent,k.abrupt("return",{data:le.data.list,success:!0,total:le.data.list.length});case 8:case"end":return k.stop()}},D)}));return function(D,d,C){return v.apply(this,arguments)}}(),toolBarRender:function(){return[(0,e.jsx)($n.Z,{showTriggerButton:!0,onSelect:function(){var D=_()(a()().mark(function d(C){var R,P;return a()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=2,(0,tn.HY)({name:C.Name,containerName:t.containerInfo.Name,ipV4:""});case 2:P=W.sent,!((R=l.current)===null||R===void 0)&&R.reloadAndRest&&l.current.reloadAndRest();case 4:case"end":return W.stop()}},d)}));return function(d){return D.apply(this,arguments)}}()},"joinNetwork"),(0,e.jsx)(Un.Z,{onFinish:function(){var d,C;!((d=l.current)===null||d===void 0)&&d.reloadAndRest&&((C=l.current)===null||C===void 0||C.reloadAndRest())}},"create")]},search:!1,expandable:{expandRowByClick:!1,expandedRowKeys:Object.keys((r=u==null?void 0:u.NetworkSettings.Networks)!==null&&r!==void 0?r:{bridge:[]})}})]})}),Nn=Bn,Kn=n(26522),kn=(0,o.forwardRef)(function(t,Z){(0,o.useImperativeHandle)(Z,function(){return{}});var r=(0,o.useState)(!1),l=I()(r,2),x=l[0],B=l[1],j=new s.Uo("components.appDetail");return(0,e.jsx)(wn.a,{submitter:!1,title:j.format("titleNetwork"),onOpenChange:function(m){B(m)},drawerProps:{width:X.R_},open:x,trigger:(0,e.jsx)(ce.ZP,{icon:(0,e.jsx)(Kn.Z,{}),children:s.Ob.format("docker.network")}),children:(0,e.jsx)(Nn,{ghost:!0,containerInfo:t.containerInfo})})}),Vn=kn,Hn=n(84941),Gn=(0,o.forwardRef)(function(t,Z){var r=new s.Uo("components.appDetail"),l=(0,o.useContext)(Q),x=l.reload,B=l.loadingRef,j=l.close,u=l.redirect,m=(0,o.useRef)(),v=(0,o.useRef)(),D=(0,o.useRef)(),d=(0,o.useRef)(),C=(0,o.useRef)(),R=(0,o.useRef)(),P=(0,o.useRef)(),le=(0,o.useState)({status:0,error:""}),W=I()(le,2),k=W[0],A=W[1],ye=(0,o.useState)(),Ce=I()(ye,2),f=Ce[0],Ee=Ce[1];(0,o.useImperativeHandle)(Z,function(){return{}});function Ue(Y){return He.apply(this,arguments)}function He(){return He=_()(a()().mark(function Y(h){var T,c,g;return a()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(c=-2,!h.ignore){L.next=6;break}if(!(h.ignore.indexOf("".concat(h.info.Name,"@*"))>-1)){L.next=4;break}return L.abrupt("return",{status:-2,error:""});case 4:if(!(h.ignore.indexOf("".concat(h.info.Name,"@").concat(h.info.Image))>-1)){L.next=6;break}return L.abrupt("return",{status:-2,error:""});case 6:return L.next=8,(0,Xe.ZQ)({tag:(T=h.info.Config.Image)!==null&&T!==void 0?T:"",md5:h.info.Image,cacheTime:3600}).catch(function(Pe){c=-1});case 8:if(g=L.sent,!(g&&g.data.error&&g.data.error!="")){L.next=11;break}return L.abrupt("return",{status:-1,error:g.data.error});case 11:return g&&(g.data.digestLocal&&g.data.digestLocal.length>0?c=g.data.upgrade?1:2:g.data.error&&g.data.error!=""?c=-1:g.data.digestLocal.length==0?c=-3:c=-2),L.abrupt("return",{status:c,error:""});case 13:case"end":return L.stop()}},Y)})),He.apply(this,arguments)}return(0,o.useEffect)(function(){A({status:0}),Ue(t.data).then(function(Y){A(Y)}),Ee(t.data)},[t.data]),(0,e.jsxs)(E.Z,{direction:"vertical",children:[(0,e.jsxs)(V.Z,{ghost:t.ghost,title:(0,e.jsx)(b.Z,{}),subTitle:r.format("titleManage"),children:[(0,e.jsx)(Hn.Z,{onFinish:function(){var Y=_()(a()().mark(function h(T){return a()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:T&&u(T);case 1:case"end":return g.stop()}},h)}));return function(h){return Y.apply(this,arguments)}}(),ref:m},"createByImage"),(0,e.jsxs)(E.Z,{wrap:!0,children:[(0,e.jsx)(ce.ZP,{onClick:function(){var h;(h=m.current)===null||h===void 0||h.show(t.data.info.Id)},type:"primary",icon:(0,e.jsx)(mn.Z,{}),children:s.FD.format("listManageEdit")}),f&&(0,e.jsxs)(e.Fragment,{children:[f.info.Config.Image&&(0,e.jsx)(On.Z,{image:[f.info.Config.Image],ref:R}),(0,e.jsx)(_n.Z,{placement:"bottomLeft",menu:{items:[{key:"1",label:(0,e.jsx)(ie.Z,{action:_()(a()().mark(function Y(){var h,T,c,g,H,L;return a()().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return me.next=2,(0,ze.ze)({md5:(h=(T=f.info)===null||T===void 0?void 0:T.Name)!==null&&h!==void 0?h:"",imageId:""});case 2:return A({status:0}),me.next=5,(0,Xe.ZQ)({tag:(c=(g=f.info)===null||g===void 0?void 0:g.Config.Image)!==null&&c!==void 0?c:"",md5:(H=(L=f.info)===null||L===void 0?void 0:L.Image)!==null&&H!==void 0?H:"",cacheTime:0}).then(function(fe){fe.data.error&&fe.data.error!=""?A({status:-1,error:fe.data.error}):fe.data.digestLocal&&fe.data.digestLocal.length>0?A({status:fe.data.upgrade?1:2}):A({status:-2})}).catch(function(fe){A({status:-1})});case 5:return me.abrupt("return",me.sent);case 6:case"end":return me.stop()}},Y)})),buttonProps:{type:"link"},children:r.format("upgradeCheckUpgrade")})},{key:"2",label:(0,e.jsx)(ie.Z,{action:_()(a()().mark(function Y(){var h,T,c,g;return a()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,(0,ze.ze)({md5:(h=(T=f.info)===null||T===void 0?void 0:T.Name)!==null&&h!==void 0?h:"",imageId:(c=(g=f.info)===null||g===void 0?void 0:g.Image)!==null&&c!==void 0?c:""});case 2:return L.abrupt("return",L.sent);case 3:case"end":return L.stop()}},Y)})),buttonProps:{type:"link"},children:r.format("upgradeCheckUpgradeIgnoreOnce")})},{key:"3",label:(0,e.jsx)(ie.Z,{action:_()(a()().mark(function Y(){var h,T;return a()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,(0,ze.ze)({md5:(h=(T=f.info)===null||T===void 0?void 0:T.Name)!==null&&h!==void 0?h:"",imageId:"*"});case 2:return g.abrupt("return",g.sent);case 3:case"end":return g.stop()}},Y)})),buttonProps:{type:"link"},children:r.format("upgradeCheckUpgradeIgnore")})}]},children:(0,e.jsx)(pn.Z,{title:k.error,count:r.format("checkImageUpgradeOption."+k.status),color:r.format("checkImageUpgradeColorOption."+k.status),children:(0,e.jsx)(ie.Z,{buttonProps:{disabled:k.status===0,icon:k.status===0?(0,e.jsx)(In.Z,{}):(0,e.jsx)(Cn.Z,{})},confirmProps:{description:(0,e.jsxs)(E.Z,{style:{width:280,paddingRight:"10px"},direction:"vertical",children:[(0,e.jsx)(M.Z.Text,{children:r.format("upgradeConfirm")}),(0,e.jsx)(N.A,{formRef:P,submitter:!1,layout:"inline",children:(0,e.jsx)(Ne.Z,{name:"enableBak",valuePropName:"checked",children:(0,e.jsx)(ke.Z,{children:r.format("upgradeConfirmEnableBak")})})})]})},action:_()(a()().mark(function Y(){var h,T,c,g,H,L;return a()().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return me.next=2,(h=R.current)===null||h===void 0?void 0:h.start();case 2:return(T=B.current)===null||T===void 0||T.show(),(c=R.current)===null||c===void 0||c.finish(),me.next=6,(0,p.RF)({md5:(g=f.info.Id)!==null&&g!==void 0?g:"",imageTag:"",enableBak:(H=(L=P.current)===null||L===void 0?void 0:L.getFieldValue("enableBak"))!==null&&H!==void 0?H:!1}).finally(function(){var fe;(fe=B.current)===null||fe===void 0||fe.destroy()});case 6:return me.abrupt("return",me.sent);case 7:case"end":return me.stop()}},Y)})),onSuccess:function(h){j()},children:r.format("upgradeButton")})})})]}),(0,e.jsx)(se.Z,{type:"vertical"}),(0,e.jsx)(ie.Z,{buttonProps:{icon:(0,e.jsx)(fn.Z,{})},confirmProps:{description:(0,e.jsxs)(E.Z,{style:{width:400,paddingRight:"10px"},direction:"vertical",children:[(0,e.jsx)(M.Z.Text,{children:r.format("copyConfirmTip")}),(0,e.jsxs)(N.A,{formRef:C,submitter:!1,layout:"horizontal",children:[(0,e.jsx)("br",{}),(0,e.jsx)(hn.Z,{label:r.format("copyCopyName"),name:"copyName"}),(0,e.jsx)(gn.Z,{label:r.format("copyEnableRandomPort"),name:"enableRandomPort"})]})]})},action:_()(a()().mark(function Y(){var h,T,c,g,H;return a()().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return Pe.next=2,(0,p.aF)({md5:(h=f==null?void 0:f.info.Id)!==null&&h!==void 0?h:"",copyName:(T=(c=C.current)===null||c===void 0?void 0:c.getFieldValue("copyName"))!==null&&T!==void 0?T:"",enableRandomPort:(g=(H=C.current)===null||H===void 0?void 0:H.getFieldValue("enableRandomPort"))!==null&&g!==void 0?g:!1});case 2:return Pe.abrupt("return",Pe.sent);case 3:case"end":return Pe.stop()}},Y)})),onSuccess:function(h){var T;(T=C.current)===null||T===void 0||T.resetFields()},children:r.format("copyButton")}),f&&(0,e.jsx)(Sn,{detail:f.info,onFinish:function(){j()}},"rollback"),f&&(0,e.jsx)(ie.Z,{action:_()(a()().mark(function Y(){var h,T,c,g,H,L;return a()().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return(h=B.current)===null||h===void 0||h.show(),me.abrupt("return",Promise.all([(0,ze.Ct)({md5:(T=f==null?void 0:f.info.Id)!==null&&T!==void 0?T:"",deleteImage:(c=(g=D.current)===null||g===void 0?void 0:g.getFieldValue("deleteImage"))!==null&&c!==void 0?c:!1,deleteVolume:(H=(L=D.current)===null||L===void 0?void 0:L.getFieldValue("deleteVolume"))!==null&&H!==void 0?H:!1}),(0,qe.rn)({name:f==null?void 0:f.info.Name})]).finally(function(){var fe;(fe=B.current)===null||fe===void 0||fe.destroy()}));case 2:case"end":return me.stop()}},Y)})),buttonProps:{danger:!0,type:"primary",icon:(0,e.jsx)(rn.Z,{})},confirmProps:{description:(0,e.jsxs)(E.Z,{style:{width:200},direction:"vertical",children:[(0,e.jsx)(M.Z.Text,{children:s.FD.format("confirm.title")}),(0,e.jsxs)(N.A,{formRef:D,layout:"inline",submitter:!1,children:[(0,e.jsx)(Ne.Z,{addonAfter:(0,e.jsx)(Ve.Z,{title:r.format("deleteConfirmTip"),children:(0,e.jsx)(on.Z,{})}),name:"deleteVolume",valuePropName:"checked",children:(0,e.jsx)(ke.Z,{children:r.format("deleteConfirmDeleteVolume")})}),(0,e.jsx)(Ne.Z,{name:"deleteImage",valuePropName:"checked",children:(0,e.jsx)(ke.Z,{children:r.format("deleteConfirmDeleteImage")})})]})]})},onSuccess:function(){j()},children:r.format("deleteButton")}),(0,e.jsx)(se.Z,{type:"vertical"}),f&&(0,e.jsx)(Vn,{containerInfo:f.info})]})]}),(0,e.jsx)(V.Z,{ghost:t.ghost,title:(0,e.jsx)(b.Z,{}),subTitle:r.format("titleManageExport"),children:(0,e.jsxs)(E.Z,{wrap:!0,children:[f&&(0,e.jsx)(Je.u,{access:"canSeeContainerBackup",children:(0,e.jsx)(Dn,{container:f.info})}),(0,e.jsx)(se.Z,{type:"vertical"}),(0,e.jsx)(ie.Z,{buttonProps:{icon:(0,e.jsx)(vn.Z,{})},confirmProps:{onOpenChange:function(h,T){var c;!((c=v.current)===null||c===void 0)&&c.resetFields&&v.current.resetFields()},description:(0,e.jsxs)(E.Z,{style:{width:500,marginTop:"10px",paddingRight:"10px"},direction:"vertical",size:20,children:[(0,e.jsx)(M.Z.Text,{children:r.format("exportConfirm")}),(0,e.jsx)(N.A,{layout:"horizontal",formRef:v,submitter:!1,children:(0,e.jsx)(Ne.Z,{valuePropName:"checked",name:"enableExportToPath",children:(0,e.jsx)(ke.Z,{children:r.format("exportEnableExportToPath")})},"enableExportToPath")})]})},action:function(){var h,T,c;return(0,p.LJ)({md5:(h=f==null?void 0:f.info.Id)!==null&&h!==void 0?h:"",enableExportToPath:(T=(c=v.current)===null||c===void 0?void 0:c.getFieldValue("enableExportToPath"))!==null&&T!==void 0?T:!1})},children:r.format("exportButton")}),(0,e.jsx)(ie.Z,{buttonProps:{icon:(0,e.jsx)(ln.Z,{})},confirmProps:{onOpenChange:function(h,T){var c;!((c=d.current)===null||c===void 0)&&c.resetFields&&d.current.resetFields()},title:r.format("commitConfirmTitle"),description:(0,e.jsx)(E.Z,{style:{width:400,marginTop:"10px",paddingRight:"10px"},direction:"vertical",children:(0,e.jsx)(N.A,{formRef:d,submitter:!1,children:(0,e.jsx)(Ne.Z,{name:"saveImageName",children:(0,e.jsx)(jn.Z,{addonBefore:r.format("commitConfirmSaveImageName")})})})})},action:function(){var h,T,c;return(0,p.Re)({md5:(h=f==null?void 0:f.info.Id)!==null&&h!==void 0?h:"",name:(T=(c=d.current)===null||c===void 0?void 0:c.getFieldValue("saveImageName"))!==null&&T!==void 0?T:f==null?void 0:f.info.Name})},children:r.format("commitButton")})]})},"extend")]})}),zn=Gn,Qn=n(65913);function Jn(t){var Z=new s.Uo("components.appDetail"),r=(0,o.useState)(),l=I()(r,2),x=l[0],B=l[1];return(0,o.useEffect)(function(){(0,Xe.YU)({md5:t.data.Image}).then(function(j){B(j.data)})},[t.data]),(0,e.jsx)(V.Z,{ghost:t.ghost,title:(0,e.jsx)(pe.Z,{}),subTitle:Z.format("titleImage"),children:(0,e.jsxs)(U.Z,{styles:{label:{width:200}},column:1,bordered:!0,children:[(0,e.jsx)(U.Z.Item,{label:"Image Tag",children:(0,e.jsx)(M.Z.Text,{copyable:!0,children:t.data.Config.Image})}),(0,e.jsx)(U.Z.Item,{label:"Image",children:t.data.Image}),(0,e.jsx)(U.Z.Item,{label:"CMD",children:(x==null?void 0:x.info.Config.Cmd)&&(x==null?void 0:x.info.Config.Cmd.join(" "))}),(0,e.jsx)(U.Z.Item,{label:"ENTRYPOINT",children:x==null?void 0:x.info.Config.Entrypoint}),(0,e.jsx)(U.Z.Item,{label:"Labels",children:(0,e.jsx)(U.Z,{column:1,bordered:!0,children:(x==null?void 0:x.info.Config.Labels)&&Object.entries(x==null?void 0:x.info.Config.Labels).map(function(j){var u=I()(j,2),m=u[0],v=u[1];return(0,e.jsx)(U.Z.Item,{label:m,children:v},m)})})})]})})}var Yn=n(97857),Ye=n.n(Yn),Xn=n(40666),qn=n(64789),et=n(97937),nt=n(66309),tt=n(86738),at=n(90127);function rt(t){var Z=(0,o.useState)(0),r=I()(Z,2),l=r[0],x=r[1],B=(0,o.useState)(),j=I()(B,2),u=j[0],m=j[1],v=new s.Uo("components.appDetail"),D=(0,o.useState)(),d=I()(D,2),C=d[0],R=d[1];return(0,o.useEffect)(function(){m([]),(0,qe.e1)().then(function(P){m(P.data.list)})},[l,t.data.info.Name]),(0,e.jsx)(V.Z,{ghost:!0,title:(0,e.jsx)(Xn.Z,{}),subTitle:v.format("titleTag"),extra:(0,e.jsx)(at.Z,{trigger:(0,e.jsx)(M.Z.Link,{children:(0,e.jsx)(qn.Z,{})}),containerDetail:t.data,onFinish:function(){x(l+1)}}),children:(0,e.jsx)(E.Z,{wrap:!0,children:u&&(u==null?void 0:u.filter(function(P){return P.item&&P.item.find(function(le){return le.name==t.data.info.Name})}).map(function(P,le){return(0,e.jsx)(nt.Z,{color:P.tagColor,closable:{closeIcon:(0,e.jsx)(tt.Z,{title:s.FD.format("confirm.title"),open:C&&C[le],onOpenChange:function(k){R(Ye()(Ye()({},C),{index:k}))},onConfirm:_()(a()().mark(function W(){return a()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,(0,qe.rn)({name:t.data.info.Name,tag:P.tag});case 2:x(l+1);case 3:case"end":return A.stop()}},W)})),children:(0,e.jsx)(et.Z,{})})},style:{height:35,display:"flex",borderRadius:20,justifyContent:"center",alignItems:"center"},onClose:_()(a()().mark(function W(){return a()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:R(Ye()(Ye()({},C),{index:!0}));case 1:case"end":return A.stop()}},W)})),children:(0,e.jsx)("span",{style:{paddingLeft:10,paddingRight:3},children:P.tag})},le)}))})})}var ot=(0,o.forwardRef)(function(t,Z){var r;(0,o.useImperativeHandle)(Z,function(){return{show:function(W){return _()(a()().mark(function k(){return a()().wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:return C(!0),ye.next=3,R(W);case 3:case"end":return ye.stop()}},k)}))()}}});var l=new s.Uo("components.appDetail"),x=(0,o.useRef)(),B=(0,o.useState)(),j=I()(B,2),u=j[0],m=j[1],v=(0,o.useState)(!1),D=I()(v,2),d=D[0],C=D[1];function R(le){return P.apply(this,arguments)}function P(){return P=_()(a()().mark(function le(W){var k,A,ye;return a()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return(k=x.current)===null||k===void 0||k.show(),f.next=3,(0,p.jV)({md5:W}).finally(function(){var Ee;(Ee=x.current)===null||Ee===void 0||Ee.destroy()});case 3:A=f.sent,A.data&&(((ye=A.data.info.HostConfig)===null||ye===void 0?void 0:ye.NetworkMode)=="host"&&A.data.info.Config.ExposedPorts&&Object.keys(A.data.info.Config.ExposedPorts).map(function(Ee){A.data.info.NetworkSettings.Ports||(A.data.info.NetworkSettings.Ports={}),A.data.info.NetworkSettings.Ports[Ee]=[{HostIp:"0.0.0.0",HostPort:Ee.substring(0,Ee.indexOf("/"))}]}),m(A.data));case 5:case"end":return f.stop()}},le)})),P.apply(this,arguments)}return(0,e.jsx)(Q.Provider,{value:{loadingRef:x,reload:function(){return _()(a()().mark(function W(){return a()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if(!u){A.next=3;break}return A.next=3,R(u.info.Id);case 3:case"end":return A.stop()}},W)}))()},close:function(){return _()(a()().mark(function W(){return a()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:C(!1),t.onFinish&&t.onFinish();case 2:case"end":return A.stop()}},W)}))()},redirect:function(W){return _()(a()().mark(function k(){return a()().wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:return ye.next=2,R(W);case 2:case"end":return ye.stop()}},k)}))()}},children:(0,e.jsx)(Te.Z,{title:l.format("drawerTitle",{name:(0,te.fi)((r=u==null?void 0:u.info.Name)!==null&&r!==void 0?r:"","/")}),open:d,onClose:function(){C(!1),t.onFinish&&t.onFinish()},width:X.R_,children:(0,e.jsx)(Qn.Z,{ref:x,children:(0,e.jsxs)(we.Z,{vertical:!0,gap:20,children:[u&&(0,e.jsx)(Je.u,{access:"canSeeContainerList",children:(0,e.jsx)(cn,{ghost:!0,data:u==null?void 0:u.info})}),u&&(0,e.jsx)(Je.u,{access:["canSeeContainerListManage","canSeeContainerListManageOp"],children:(0,e.jsx)(zn,{ghost:!0,data:u})}),u&&(0,e.jsx)(rt,{data:u}),u&&(0,e.jsx)(Oe,{data:u,ghost:!0}),(0,e.jsx)(Le,{data:u==null?void 0:u.info,ghost:!0}),u&&(0,e.jsx)(Jn,{data:u.info,ghost:!0}),(u==null?void 0:u.info.Config.Labels)&&(0,e.jsx)(V.Z,{title:(0,e.jsx)(pe.Z,{}),ghost:!0,subTitle:l.format("titleLabel"),children:(0,e.jsx)(U.Z,{column:1,bordered:!0,children:u.info.Config.Labels&&Object.entries(u.info.Config.Labels).map(function(le){var W=I()(le,2),k=W[0],A=W[1];return(0,e.jsx)(U.Z.Item,{label:k,children:A},k)})})})]})})})})}),it=ot},90127:function(We,Re,n){var Ze=n(15009),I=n.n(Ze),be=n(99289),a=n.n(be),ve=n(5574),_=n.n(ve),o=n(5251),ne=n(184),V=n(62370),N=n(5966),U=n(24739),E=n(64317),se=n(52688),M=n(97462),O=n(40056),ge=n(42075),y=n(67294),p=n(1699),ae=n(80821),_e=n(2808),te=n(87662),De=n(29453),S=n(3616),s=n(36146),e=n(85893),Oe=(0,y.forwardRef)(function(pe,Te){var we;(0,y.useImperativeHandle)(Te,function(){return{edit:function(X){z(!0),Se(X),J.current&&J.current.setFieldsValue({tag:[X.tag],tagColor:X.tagColor,enableShowGroup:X.enableShowGroup})}}});var J=(0,y.useRef)(),Le=(0,y.useState)(0),b=_()(Le,2),he=b[0],de=b[1],re=(0,y.useState)([]),i=_()(re,2),je=i[0],oe=i[1],ce=(0,y.useState)(),Me=_()(ce,2),ie=Me[0],q=Me[1],ee=(we=pe.containerDetail)===null||we===void 0?void 0:we.info,Ae=(0,y.useState)(!1),w=_()(Ae,2),G=w[0],z=w[1],Q=new s.Uo("components.appDetail");function Se(F){J.current&&J.current.setFieldsValue({title:F.title,description:F.description,url:F.url,icon:F.icon,name:F.name})}return(0,y.useEffect)(function(){q([]),(0,De.e1)().then(function(F){q(F.data.list)})},[he]),(0,y.useEffect)(function(){ee&&(0,te.K3)().then(function(F){var X=[];ee.NetworkSettings&&ee.NetworkSettings.Ports&&Object.keys(ee.NetworkSettings.Ports).map(function(K){ee.NetworkSettings.Ports&&ee.NetworkSettings.Ports[K]&&ee.NetworkSettings.Ports[K].map(function(xe){xe.HostPort&&X.push("http://".concat(F.data.serverUrl,":").concat(xe.HostPort))})}),oe(X)})},[pe.containerDetail]),(0,e.jsxs)(ne.a,{drawerProps:{forceRender:!0,width:S.R_},open:G,onFinish:function(){var F=a()(I()().mark(function X(K){var xe,ue,Ie,$;return I()().wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:return Ie="",K.tagColor&&K.tagColor.toHexString?K.tagColor.cleared||(Ie=K.tagColor.toHexString()):Ie=K.tagColor,$=(xe=K.enableShowGroup)!==null&&xe!==void 0?xe:pe.defaultEnableShowGroup,Fe.next=5,(0,De.A9)({enableShowGroup:$,tag:K.tag?K.tag[0]:"",tagColor:Ie,name:(ue=ee==null?void 0:ee.Name)!==null&&ue!==void 0?ue:K.name,title:$?K.title:"",description:$?K.description:"",url:$?K.url:"",icon:$?K.icon:""});case 5:return de(he+1),pe.onFinish&&pe.onFinish({tag:K.tag,tagColor:K.tagColor,enableShowGroup:$}),Fe.abrupt("return",!0);case 8:case"end":return Fe.stop()}},X)}));return function(X){return F.apply(this,arguments)}}(),formRef:J,title:Q.format("tagCreateTitle"),trigger:pe.trigger,onOpenChange:function(X){var K;z(X),!X&&(!((K=J.current)===null||K===void 0)&&K.resetFields)&&J.current.resetFields()},children:[pe.defaultEnableShowGroup&&(0,e.jsx)(V.Z,{children:(0,e.jsx)(O.Z,{message:new s.Uo("system.home.tag").format("emptyTip")})}),(0,e.jsx)(N.Z,{name:"name",hidden:!0}),(0,e.jsxs)(U.UW,{children:[(0,e.jsx)(E.Z,{width:"lg",label:Q.format("tagFormTag"),layout:"vertical",required:!0,rules:[{required:!0}],onChange:function(X){var K=ie&&ie.find(function(Ge){return X&&X.length>=1&&Ge.tag==X[0]});if(K){var xe,ue,Ie,$=K.item.find(function(Ge){return Ge.name==(ee==null?void 0:ee.Name)});(xe=J.current)===null||xe===void 0||xe.setFieldsValue({tagColor:K.tagColor,enableShowGroup:K.enableShowGroup}),$&&$.name&&Se({name:(ue=ee==null?void 0:ee.Name)!==null&&ue!==void 0?ue:"",title:$?$.title:(0,o.fi)((Ie=ee==null?void 0:ee.Name)!==null&&Ie!==void 0?Ie:"","/"),description:$&&$.description,url:$&&$.url,icon:$&&$.icon})}if(!X||X.length==0){var Be,Fe=(Be=J.current)===null||Be===void 0?void 0:Be.getFieldValue("url");if(!Fe||Fe==""){var Ke;!((Ke=J.current)===null||Ke===void 0)&&Ke.resetFields&&J.current.resetFields()}}},options:ie&&ie.map(function(F){return{lable:F.tag,value:F.tag}}),name:"tag",mode:"tags",fieldProps:{maxCount:1},placeholder:Q.format("tagFormTagEmpty")},"tagSelect".concat(he)),!pe.defaultEnableShowGroup&&(0,e.jsx)(_e.Z,{label:Q.format("tagFormTagColor"),name:"tagColor"})]}),!pe.defaultEnableShowGroup&&(0,e.jsx)(p.u,{access:"canSeeEnableCe",showProRibbonTips:!0,children:function(X){var K=X.canSeeEnableCe;return(0,e.jsx)(se.Z,{label:Q.format("tagFormEnableShowGroup"),name:"enableShowGroup",disabled:K,fieldProps:{onChange:function(ue){if(ue){var Ie,$;Se({name:(Ie=ee==null?void 0:ee.Name)!==null&&Ie!==void 0?Ie:"",title:(0,o.fi)(($=ee==null?void 0:ee.Name)!==null&&$!==void 0?$:"","/")})}}}})}}),(0,e.jsx)(M.Z,{name:["enableShowGroup"],children:function(X){var K=X.enableShowGroup;return(K||pe.defaultEnableShowGroup)&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(ge.Z.Compact,{children:[pe.containerDetail&&(0,e.jsx)(E.Z,{label:Q.format("tagFormSelectUrl"),width:"sm",name:"selectUrl",options:je.map(function(xe){return{label:xe,value:xe}}),onChange:function(ue){var Ie;!((Ie=J.current)===null||Ie===void 0)&&Ie.setFieldValue&&J.current.setFieldValue("url",ue)}}),(0,e.jsx)(N.Z,{label:Q.format("tagFormUrl"),name:"url",width:"md"}),(0,e.jsx)(V.Z,{label:" ",children:(0,e.jsx)(ae.Z,{action:function(){var ue;return(0,De.R3)({url:(ue=J.current)===null||ue===void 0?void 0:ue.getFieldValue("url")})},onSuccess:function(ue){var Ie,$,Be;(Ie=J.current)===null||Ie===void 0||Ie.setFieldValue("icon",ue.data.icon),($=J.current)===null||$===void 0||$.setFieldValue("title",ue.data.title),(Be=J.current)===null||Be===void 0||Be.setFieldValue("description",ue.data.description)},children:Q.format("tagGetUrlDetailButton")})})]}),(0,e.jsxs)(U.UW,{children:[(0,e.jsx)(N.Z,{label:Q.format("tagFormTitle"),name:"title"}),(0,e.jsx)(N.Z,{label:Q.format("tagFormDescription"),name:"description"})]}),(0,e.jsx)(U.UW,{children:(0,e.jsx)(N.Z,{width:"lg",placeholder:Q.format("tagFormIconEmpty"),label:Q.format("tagFormIcon"),name:"icon"})})]})}})]})});Re.Z=Oe},81146:function(We,Re,n){var Ze=n(97857),I=n.n(Ze),be=n(15009),a=n.n(be),ve=n(99289),_=n.n(ve),o=n(67294),ne=n(97269),V=n(62370),N=n(5966),U=n(97462),E=n(82346),se=n(71230),M=n(15746),O=n(34041),ge=n(83622),y=n(84567),p=n(42075),ae=n(80821),_e=n(23430),te=n(93162),De=n.n(te),S=n(78267),s=n.n(S),e=n(75458),Oe=n.n(e),pe=n(12323),Te=n(4244),we=n.n(Te),J=n(24078),Le=n(36146),b=n(85893),he,de,re,i={decorations:{matchBackground:"",matchBorder:"#FFFF00",activeMatchBackground:"#FFFF0066",matchOverviewRuler:"",activeMatchColorOverviewRuler:""}},je=(0,o.forwardRef)(function(oe,ce){var Me=(0,o.useRef)(),ie=(0,E.useModel)("subscriber"),q=new Le.Uo("components.containerLog");(0,o.useImperativeHandle)(ce,function(){return{fit:function(){he.clear(),re.fit()},start:function(){return _()(a()().mark(function G(){return a()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return Q.next=2,ee({lineTotal:500});case 2:case"end":return Q.stop()}},G)}))()},close:function(){ie.progress.close(oe.id)}}});function ee(w){return Ae.apply(this,arguments)}function Ae(){return Ae=_()(a()().mark(function w(G){return a()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:ie.progress.close(oe.id),he.clear(),G.download=!1,oe.request(G);case 4:case"end":return Q.stop()}},w)})),Ae.apply(this,arguments)}return(0,o.useEffect)(function(){return window.addEventListener("resize",function(){re.fit()}),he=new Te.Terminal(I()(I()({},pe.X),{},{fontSize:12,lineHeight:1.2,allowProposedApi:!0})),re=new S.FitAddon,de=new e.SearchAddon({}),he.loadAddon(re),he.loadAddon(de),he.open(document.getElementById("terminal-container-log")),re.fit(),ie.addDataHandler(oe.id,function(w){he.write(w.data)}),function(){he.clear(),he.reset(),ie.progress.close(oe.id)}},[]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(ne.A,{submitter:!1,layout:"horizontal",onFinish:function(G){var z;ee({id:oe.id,lineTotal:parseInt(G.lineTotal),showTime:(z=G.showTime)!==null&&z!==void 0?z:!1})},formRef:Me,children:(0,b.jsxs)(se.Z,{gutter:[10,0],children:[(0,b.jsx)(M.Z,{span:8,children:(0,b.jsx)(V.Z,{name:"lineTotal",initialValue:"500",label:q.format("formLineTotal"),children:(0,b.jsxs)(O.Z,{defaultValue:"500",onChange:function(G){var z;(z=Me.current)===null||z===void 0||z.submit()},children:[(0,b.jsx)(O.Z.Option,{value:"100",children:q.format("formLineTotalOption",{number:"100"})}),(0,b.jsx)(O.Z.Option,{value:"200",children:q.format("formLineTotalOption",{number:"200"})}),(0,b.jsx)(O.Z.Option,{value:"500",children:q.format("formLineTotalOption",{number:"500"})}),(0,b.jsx)(O.Z.Option,{value:"1000",children:q.format("formLineTotalOption",{number:"1000"})}),(0,b.jsx)(O.Z.Option,{value:"-1",children:q.format("formLineTotalOptionAll")})]})})}),(0,b.jsx)(M.Z,{children:(0,b.jsx)(ge.ZP,{onClick:function(){he.clear()},children:q.format("clearButton")})}),(0,b.jsx)(M.Z,{children:(0,b.jsx)(V.Z,{name:"showTime",valuePropName:"checked",children:(0,b.jsx)(y.Z,{onChange:function(G){var z;(z=Me.current)===null||z===void 0||z.submit()},children:q.format("formShowTime")})})}),(0,b.jsx)(M.Z,{children:(0,b.jsx)(N.Z,{label:q.format("formKeywork"),name:"keywork",fieldProps:{onPressEnter:function(){var G;de.findNext((G=Me.current)===null||G===void 0?void 0:G.getFieldValue("keywork"),i)},onChange:function(G){de.findNext(G.target.value,i)}},placeholder:q.format("formKeyworkEmpty")})}),(0,b.jsx)(M.Z,{children:(0,b.jsx)(U.Z,{name:["keywork"],children:function(G){var z=G.keywork;return(0,b.jsxs)(p.Z,{size:10,children:[(0,b.jsx)(ge.ZP,{onClick:function(){de.findNext(z,i)},children:q.format("formKeyworkNext")},"next"),(0,b.jsx)(ge.ZP,{onClick:function(){de.findPrevious(z,i)},children:q.format("formKeyworkPrev")},"prev")]})}})}),(0,b.jsx)(M.Z,{children:(0,b.jsx)(ae.Z,{buttonProps:{icon:(0,b.jsx)(_e.Z,{})},action:_()(a()().mark(function w(){var G,z,Q;return a()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(!oe.download){F.next=5;break}return F.next=3,oe.download({lineTotal:parseInt((G=Me.current)===null||G===void 0?void 0:G.getFieldValue("lineTotal")),showTime:(z=Me.current)===null||z===void 0?void 0:z.getFieldValue("showTime")});case 3:Q=F.sent,(0,te.saveAs)(Q.data,Q.name);case 5:case"end":return F.stop()}},w)})),children:q.format("downloadButton")})})]})}),(0,b.jsx)("div",{style:{marginTop:"20px",height:oe.showInDrawer?"75vh":"85vh"},id:"terminal-container-log"})]})});Re.Z=je},27619:function(We,Re,n){n.d(Re,{Z:function(){return o}});var Ze=n(5574),I=n.n(Ze),be=n(82346),a=n(67294),ve=n(64389),_=n(85893);function o(ne){var V=(0,be.useModel)("@@initialState"),N=V.initialState,U="chart-area-".concat(ne.name),E=(0,a.useState)(),se=I()(E,2),M=se[0],O=se[1],ge={};ne.data.forEach(function(p){p.show===!1?ge[p.name]=!1:ge[p.name]=!0});var y={tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}},valueFormatter:function(ae){return ne.yValueFormatter?ne.yValueFormatter(ae):ae}},legend:{selected:ge},grid:{left:"0",right:"0",bottom:"0",top:"30",containLabel:!0},xAxis:{type:"category",data:ne.data[0].data.map(function(p){return p.date}),boundaryGap:!1,axisLabel:{rotate:20}},yAxis:{type:"value",axisLabel:{formatter:ne.yLabelFormatter},max:function(ae){if(ne.yDomainMaxCallback)return ne.yDomainMaxCallback(ae)}},series:[]};return(0,a.useEffect)(function(){var p="",ae=window.matchMedia("(prefers-color-scheme: dark)");(N==null?void 0:N.theme.algorithm)=="dark"||ae.matches?p="dark":p="",M&&!M.isDisposed()&&M.dispose();var _e=document.getElementById(U),te=ve.S1(_e,p);te.setOption(y);var De=new ResizeObserver(function(){te.resize()});_e&&De.observe(_e),O(te)},[N]),(0,a.useEffect)(function(){M&&!M.isDisposed()&&M.setOption({legend:{data:ne.data.map(function(p){return p.name})},xAxis:{data:ne.data[0].data.map(function(p){return p.date})},series:ne.data.map(function(p){return{name:p.name,type:"line",stack:"Total",areaStyle:{},emphasis:{focus:"series"},data:p.data.map(function(ae){return ae.value})}})})},[ne.data]),(0,_.jsx)("div",{style:{height:200},id:U})}},94359:function(We,Re,n){n.d(Re,{Z:function(){return ge}});var Ze=n(5574),I=n.n(Ze),be=n(3089),a=n(98165),ve=n(18429),_=n(8751),o=n(66212),ne=n(14313),V=n(30159),N=n(87740),U=n(50888),E=n(66309),se=n(83062),M=n(36146),O=n(85893);function ge(y){var p,ae,_e=new M.Uo("components.containerStatus"),te=y.status.split("."),De=I()(te,2),S=De[0],s=De[1],e="";e=_e.format(y.status,(p=y.statusValue)!==null&&p!==void 0?p:{});var Oe=(0,O.jsx)(O.Fragment,{});return s=="0"&&(Oe=(0,O.jsx)(E.Z,{icon:(0,O.jsx)(be.Z,{}),color:"default",children:e})),s=="10"&&(Oe=(0,O.jsx)(E.Z,{icon:(0,O.jsx)(a.Z,{spin:!0}),color:"processing",children:e})),s=="20"&&(Oe=(0,O.jsx)(E.Z,{icon:(0,O.jsx)(ve.Z,{}),color:"error",children:e})),s=="30"&&(Oe=(0,O.jsx)(E.Z,{icon:(0,O.jsx)(_.Z,{}),color:"success",children:e})),s=="new"&&(Oe=(0,O.jsx)(E.Z,{icon:(0,O.jsx)(o.Z,{}),children:e})),(s=="running"||s=="healthy"||s=="active"||s=="ready")&&(Oe=(0,O.jsx)(E.Z,{icon:(0,O.jsx)(ne.Z,{}),color:"success",children:e})),(s=="paused"||s=="pause"||s=="rollback_paused")&&(Oe=(0,O.jsx)(E.Z,{icon:(0,O.jsx)(V.Z,{}),color:"warning",children:e})),(s=="waiting"||s=="starting"||s=="accepted")&&(Oe=(0,O.jsx)(E.Z,{icon:(0,O.jsx)(N.Z,{}),children:e})),["deploying","pending","allocated","accepted","assigned","preparing","updating","rollback_started"].includes(s)&&(Oe=(0,O.jsx)(E.Z,{icon:(0,O.jsx)(U.Z,{}),color:"processing",children:e})),(s=="error"||s=="down"||s=="failed")&&(Oe=(0,O.jsx)(E.Z,{icon:(0,O.jsx)(ve.Z,{}),color:"error",children:e})),["complete","completed","rollback_completed"].includes(s)&&(Oe=(0,O.jsx)(E.Z,{icon:(0,O.jsx)(_.Z,{}),color:"success",children:e})),["exited","dead","removing","restarting","unhealthy","created","drain","unreachable","shutdown","rejected","remove","orphaned"].includes(s)&&(Oe=(0,O.jsx)(E.Z,{icon:(0,O.jsx)(ve.Z,{}),color:"warning",children:e})),(0,O.jsx)(se.Z,{placement:"top",title:(ae=y.tip)!==null&&ae!==void 0?ae:"",children:Oe})}},36588:function(We,Re,n){n.d(Re,{Z:function(){return pe}});var Ze=n(15009),I=n.n(Ze),be=n(99289),a=n.n(be),ve=n(5574),_=n.n(ve),o=n(80821),ne=n(3616),V=n(14946),N=n(36146),U=n(82061),E=n(184),se=n(38345),M=n(60940),O=n(42075),ge=n(25593),y=n(96074),p=n(26412),ae=n(67294),_e=n(92067),te=n(83622),De=n(85265),S=n(85893);function s(Te){var we=(0,ae.useState)(!1),J=_()(we,2),Le=J[0],b=J[1],he=new N.Uo("docker");return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(te.ZP,{type:"primary",onClick:function(){b(!0)},children:he.format("networkJoinContainer")}),(0,S.jsx)(De.Z,{open:Le,onClose:function(){b(!1)},width:ne.R_,title:he.format("networkJoinContainer"),children:(0,S.jsx)(_e.Z,{onSelect:function(){var de=a()(I()().mark(function re(i){return I()().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return oe.next=2,(0,V.HY)({name:Te.detail.Name,containerName:i.Name,ipV4:""});case 2:b(!1),Te.onFinish&&Te.onFinish(Te.detail);case 4:case"end":return oe.stop()}},re)}));return function(re){return de.apply(this,arguments)}}()})})]})}var e=n(13822),Oe=(0,ae.forwardRef)(function(Te,we){(0,ae.useImperativeHandle)(we,function(){return{show:ee}});var J=(0,ae.useState)(!1),Le=_()(J,2),b=Le[0],he=Le[1],de=(0,ae.useState)(),re=_()(de,2),i=re[0],je=re[1],oe=(0,ae.useState)(),ce=_()(oe,2),Me=ce[0],ie=ce[1],q=new N.Uo("components.network");function ee(w){return Ae.apply(this,arguments)}function Ae(){return Ae=a()(I()().mark(function w(G){var z,Q,Se,F,X,K,xe,ue;return I()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,(0,V.IS)({name:G});case 2:if(z=$.sent,!z.data.info.Containers){$.next=19;break}Q=[],Se=0,F=Object.entries(z.data.info.Containers);case 6:if(!(Se<F.length)){$.next=16;break}return X=_()(F[Se],2),K=X[0],xe=X[1],$.next=10,(0,e.jV)({md5:xe.Name});case 10:ue=$.sent,ue.data.info.NetworkSettings.Networks[G]&&(xe.Alias=ue.data.info.NetworkSettings.Networks[G].Aliases),Q.push(xe);case 13:Se++,$.next=6;break;case 16:ie(Q),$.next=20;break;case 19:ie([]);case 20:je(z.data.info),he(!0);case 22:case"end":return $.stop()}},w)})),Ae.apply(this,arguments)}return(0,S.jsx)(E.a,{drawerProps:{width:ne.R_},title:q.format("detailTitle"),open:b,onOpenChange:function(G){he(G)},submitter:!1,children:(0,S.jsxs)(se.Z,{ghost:!0,direction:"column",gutter:[10,0],children:[(0,S.jsx)(se.Z,{title:q.format("detailContainer"),ghost:!0,extra:i&&(0,S.jsx)(s,{detail:i,onFinish:function(G){ee(G.Name)}}),children:(0,S.jsx)(M.Z,{rowKey:"Name",columns:[{title:N.FD.format("listContainerName"),dataIndex:"Name"},{title:N.FD.format("listAlias"),dataIndex:"Alias",render:function(G,z,Q){return(0,S.jsx)(O.Z,{direction:"vertical",children:z.Alias&&z.Alias.map(function(Se,F){return(0,S.jsx)(ge.Z.Text,{copyable:!0,keyboard:!0,children:Se},F)})})}},{title:"IPV4",dataIndex:"IPv4Address"},{title:"IPV6",dataIndex:"IPv6Address"},{title:"MacAddress",dataIndex:"MacAddress"},{title:N.FD.format("listManage"),render:function(G,z,Q){return(0,S.jsx)(O.Z,{split:(0,S.jsx)(y.Z,{type:"vertical"}),children:(0,S.jsx)(o.Z,{buttonProps:{type:"text",icon:(0,S.jsx)(U.Z,{}),danger:!0},confirmProps:{showCommonConfirm:!0},action:function(){var F,X;return(0,V.t9)({name:(F=i==null?void 0:i.Id)!==null&&F!==void 0?F:"",containerName:(X=z.Name)!==null&&X!==void 0?X:""})},tips:N.FD.format("listManageExit"),onSuccess:function(){i&&ee(i.Name)}},"delete")})}}],dataSource:Me,pagination:!1})}),(0,S.jsx)(se.Z,{ghost:!0,title:q.format("detailBasic"),children:(0,S.jsxs)(p.Z,{styles:{label:{width:150}},column:2,bordered:!0,children:[(0,S.jsx)(p.Z.Item,{label:q.format("detailName"),children:i==null?void 0:i.Name}),(0,S.jsx)(p.Z.Item,{label:"Id",children:i==null?void 0:i.Id.slice(0,12)}),(0,S.jsx)(p.Z.Item,{label:"Driver",children:i==null?void 0:i.Driver}),(0,S.jsx)(p.Z.Item,{label:"Scope",children:i==null?void 0:i.Scope}),(0,S.jsx)(p.Z.Item,{label:"Attachable",children:q.yesNo(i==null?void 0:i.Attachable)}),(0,S.jsx)(p.Z.Item,{label:"Internal",children:q.yesNo(i==null?void 0:i.Internal)}),(i==null?void 0:i.IPAM.Config)&&(i==null?void 0:i.IPAM.Config.map(function(w,G){return(0,S.jsx)(p.Z.Item,{label:w.Gateway&&w.Gateway.includes(":")?"IPV6":"IPV4",children:(0,S.jsxs)(p.Z,{styles:{label:{width:150}},column:1,bordered:!0,children:[(0,S.jsx)(p.Z.Item,{label:"Subnet",children:w.Subnet}),(0,S.jsx)(p.Z.Item,{label:"Gateway",children:w.Gateway}),(0,S.jsx)(p.Z.Item,{label:"IP Range ",children:w.IPRange}),(0,S.jsx)(p.Z.Item,{label:"Excluded IPs",children:w.AuxiliaryAddresses&&Object.keys(w.AuxiliaryAddresses).map(function(z){return w.AuxiliaryAddresses[z]+" ,"})})]})},G)})),(i==null?void 0:i.Options)&&Object.keys(i==null?void 0:i.Options).length>0&&(0,S.jsx)(p.Z.Item,{label:"Options",children:(0,S.jsx)(p.Z,{styles:{label:{width:150}},column:1,bordered:!0,children:Object.keys(i==null?void 0:i.Options).map(function(w){return(0,S.jsx)(p.Z.Item,{label:w,children:i.Options[w]},w)})})}),(i==null?void 0:i.Labels)&&Object.keys(i==null?void 0:i.Labels).length>0&&(0,S.jsx)(p.Z.Item,{label:"Lables",children:(0,S.jsx)(p.Z,{styles:{label:{width:150}},column:1,bordered:!0,children:Object.keys(i==null?void 0:i.Labels).map(function(w){return(0,S.jsx)(p.Z.Item,{label:w,children:i.Labels[w]},w)})})})]})})]})})}),pe=Oe},2808:function(We,Re,n){n.d(Re,{Z:function(){return o}});var Ze=n(97857),I=n.n(Ze),be=n(62370),a=n(51663),ve=n(67294),_=n(85893);function o(ne){return(0,_.jsx)(be.Z,I()(I()({},ne),{},{children:(0,_.jsx)(a.Z,{showText:function(N){return N.toHexString()},allowClear:!0,presets:[{label:"Color",colors:["#1677ff","#722ed1","#13c2c2","#52c41a","#eb2f96","#f5222d","#fa8c16","#fadb14","#fa541c","#2f54eb","#faad14","#a0d911","#000000","#5cdbd3","#b37feb","#b7eb8f","#61affe","#9254de","#36cfc9","#ff9c6e","#ff6f00","#ffc069","#28a745","#6610f2","#6f42c1","#007bff","#17a2b8","#20c997","#00cccc","#ff6666"]}]})}))}},76428:function(We,Re,n){n.d(Re,{Z:function(){return a}});var Ze=n(25593),I=n(67294),be=n(85893);function a(ve){return(0,be.jsx)(Ze.Z.Text,{copyable:!0,children:ve.title})}},65913:function(We,Re,n){var Ze=n(5574),I=n.n(Ze),be=n(74330),a=n(67294),ve=n(85893),_=(0,a.forwardRef)(function(o,ne){(0,a.useImperativeHandle)(ne,function(){return{show:function(){E(!0)},destroy:function(){E(!1)}}});var V=(0,a.useState)(!1),N=I()(V,2),U=N[0],E=N[1];return(0,ve.jsx)(be.Z,{spinning:U,size:"default",children:o.children})});Re.Z=_},29453:function(We,Re,n){n.d(Re,{A9:function(){return _},R3:function(){return E},e1:function(){return ne},rn:function(){return N}});var Ze=n(15009),I=n.n(Ze),be=n(99289),a=n.n(be),ve=n(82346);function _(M){return o.apply(this,arguments)}function o(){return o=a()(I()().mark(function M(O){return I()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,(0,ve.request)("/dpanel/api/common/tag/create",{method:"POST",data:O});case 2:return y.abrupt("return",y.sent);case 3:case"end":return y.stop()}},M)})),o.apply(this,arguments)}function ne(M){return V.apply(this,arguments)}function V(){return V=a()(I()().mark(function M(O){return I()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,(0,ve.request)("/dpanel/api/common/tag/get-list",{method:"POST",data:O});case 2:return y.abrupt("return",y.sent);case 3:case"end":return y.stop()}},M)})),V.apply(this,arguments)}function N(M){return U.apply(this,arguments)}function U(){return U=a()(I()().mark(function M(O){return I()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,(0,ve.request)("/dpanel/api/common/tag/delete",{method:"POST",data:O});case 2:return y.abrupt("return",y.sent);case 3:case"end":return y.stop()}},M)})),U.apply(this,arguments)}function E(M){return se.apply(this,arguments)}function se(){return se=a()(I()().mark(function M(O){return I()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,(0,ve.request)("/dpanel/api/pro/tag/get-url-detail",{method:"POST",data:O});case 2:return y.abrupt("return",y.sent);case 3:case"end":return y.stop()}},M)})),se.apply(this,arguments)}}}]);
