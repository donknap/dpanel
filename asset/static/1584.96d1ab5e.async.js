"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1584],{1584:function(Ue,re,r){r.d(re,{Z:function(){return be}});var te=r(5574),R=r.n(te),ae=r(15009),h=r.n(ae),ie=r(99289),O=r.n(ie),oe=r(80271),q=r(73813),se=r(43425),le=r(95591),ue=r(40666),de=r(1912),ce=r(77171),fe=r(82061),H=r(1883),L=r(38345),ve=r(89359),ge=r(82346),N=r(42075),Q=r(83622),he=r(96074),G=r(66309),Y=r(25593),l=r(26412),me=r(60940),i=r(67294),X=r(80821),_=r(5251),ee=r(184),xe=r(97269),J=r(62370),je=r(25278),ne=r(2487),Ze=r(4393),Ce=r(65913),M=r(3616),E=r(36146),A=r(68297),n=r(85893),pe=(0,i.forwardRef)(function(I,P){(0,i.useImperativeHandle)(P,function(){return{show:function(c){return O()(h()().mark(function F(){var b,U;return h()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return m(!0),(b=$.current)===null||b===void 0||b.show(),g.prev=2,g.next=5,(0,A.aw)({imageName:c}).finally(function(){var t;(t=$.current)===null||t===void 0||t.destroy()});case 5:U=g.sent,S(U.data.list),g.next=12;break;case 9:g.prev=9,g.t0=g.catch(2),m(!1);case 12:case"end":return g.stop()}},F,null,[[2,9]])}))()}}});var j=(0,i.useState)(),p=R()(j,2),s=p[0],S=p[1],d=(0,i.useState)(""),Z=R()(d,2),o=Z[0],e=Z[1],y=(0,i.useState)(!1),D=R()(y,2),z=D[0],m=D[1],$=(0,i.useRef)(),B=new E.Uo("image");return(0,n.jsx)(ee.a,{open:z,onOpenChange:function(c){m(c),!c&&S(void 0)},title:B.format("remoteTagTitle"),isKeyPressSubmit:!0,submitter:!1,drawerProps:{width:M.R_,extra:(0,n.jsx)(xe.A,{isKeyPressSubmit:!0,onFinish:function(c){e(c.search)},submitter:!1,children:(0,n.jsx)(N.Z.Compact,{children:(0,n.jsx)(J.Z,{style:{margin:0},name:"search",children:(0,n.jsx)(je.Z,{allowClear:!0,addonBefore:B.format("remoteSearch"),placeholder:B.format("remoteSearchEmpty"),onClear:function(){e("")}})})})})},children:(0,n.jsx)(Ce.Z,{ref:$,children:(0,n.jsx)(ne.Z,{rowKey:function(c){return"".concat(c)},pagination:{pageSize:50},grid:{gutter:10,column:2},dataSource:s&&s.filter(function(C){return!o||C.toLocaleLowerCase().indexOf(o.toLocaleLowerCase())!==-1}),loading:!s||(s==null?void 0:s.length)<=0,renderItem:function(c,F){return(0,n.jsx)(ne.Z.Item,{children:(0,n.jsx)(Ze.Z,{style:{height:"80px"},children:(0,n.jsx)(Y.Z.Text,{copyable:!0,children:c})})},F)}})})},"form")}),Se=pe,ye=r(64789),Te=r(5966),Re=r(2205);function Ie(I){var P=(0,i.useRef)(),j=(0,i.useState)(!1),p=R()(j,2),s=p[0],S=p[1],d=new E.Uo("image");return(0,n.jsxs)(ee.a,{drawerProps:{width:M.R_},open:s,title:d.format("tagTitle"),onOpenChange:function(o){var e;S(o),!o&&((e=P.current)===null||e===void 0||e.resetFields())},formRef:P,onFinish:function(){var Z=O()(h()().mark(function o(e){var y,D;return h()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,A.Qd)({md5:(y=I.imageInfo.info.Id)!==null&&y!==void 0?y:"",tag:(e.registryUrl?e.registryUrl+"/":"")+e.imageTag});case 2:return D=m.sent,S(!1),I.onFinish&&I.onFinish(),m.abrupt("return",!0);case 6:case"end":return m.stop()}},o)}));return function(o){return Z.apply(this,arguments)}}(),trigger:(0,n.jsx)(Q.ZP,{icon:(0,n.jsx)(ye.Z,{}),children:d.format("tagTitle")}),children:[(0,n.jsx)(J.Z,{label:d.format("tagRegistry"),name:"registryUrl",tooltip:d.format("tagRegistryTip"),children:(0,n.jsx)(J.Z,{shouldUpdate:!0,children:function(o){return(0,n.jsx)(Re.Z,{onChange:function(y){o.setFieldValue("registryUrl",y.serverAddress)}})}})}),(0,n.jsx)(Te.Z,{fieldProps:{min:2,max:255},rules:[{required:!0}],required:!0,placeholder:d.format("tagImageTagEmpty"),label:d.format("tagImageTag"),name:"imageTag",tooltip:d.format("tagImageTagTip")})]})}var Pe=r(24963),W=r(1699),we=r(78451),Fe=r(27166),Oe=r(85265),Le=r(92754),Ee=(0,i.forwardRef)(function(I,P){var j=(0,i.useRef)(),p=(0,i.useState)(!1),s=R()(p,2),S=s[0],d=s[1];return(0,i.useImperativeHandle)(P,function(){return{start:function(o){var e;d(!0),console.log(o),(e=j.current)===null||e===void 0||e.setStart(o)},finish:function(){var o;d(!1),(o=j.current)===null||o===void 0||o.setFinish()}}}),(0,n.jsx)(Oe.Z,{forceRender:!0,title:E.FD.format("listManageLog"),open:S,width:M.R_,onClose:function(){d(!1)},children:(0,n.jsx)(Le.Z,{ref:j})})}),De=Ee,$e=(0,i.forwardRef)(function(I,P){var j;(0,i.useImperativeHandle)(P,function(){return{show:function(u){return O()(h()().mark(function a(){return h()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return $(!0),f.next=3,g(u);case 3:case"end":return f.stop()}},a)}))()}}});var p=(0,ge.useAccess)(),s=new E.Uo("components.image"),S=(0,i.useContext)(Pe.Z),d=S.message,Z=(0,i.useState)(),o=R()(Z,2),e=o[0],y=o[1],D=(0,i.useState)(!1),z=R()(D,2),m=z[0],$=z[1],B=(0,i.useState)(0),C=R()(B,2),c=C[0],F=C[1],b=(0,i.useRef)(),U=(0,i.useRef)(),K=(0,i.useRef)(),g=function(){var t=O()(h()().mark(function u(a){var x,f;return h()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return(x=U.current)===null||x===void 0||x.loading(),v.next=3,(0,q.YU)({md5:a,showLayer:!0}).finally(function(){var T;(T=U.current)===null||T===void 0||T.finish()});case 3:f=v.sent,y(f.data);case 5:case"end":return v.stop()}},u)}));return function(a){return t.apply(this,arguments)}}();return(0,i.useEffect)(function(){e&&g(e==null?void 0:e.info.Id)},[c]),(0,n.jsxs)(Fe.Z,{drawerProps:{width:M.R_},submitter:!1,ref:U,title:s.format("quickTitle"),open:m,onOpenChange:function(u){$(u),u||I.onClose&&I.onClose()},children:[(0,n.jsx)(De,{ref:K}),!p.canSeeEnableCe&&(0,n.jsx)(Se,{ref:b}),(0,n.jsxs)(L.Z,{direction:"column",ghost:!0,gutter:[0,10],children:[(0,n.jsx)(L.Z,{title:(0,n.jsx)(se.Z,{}),subTitle:s.format("quickDetailManageTitle"),ghost:!0,children:(0,n.jsxs)(N.Z,{children:[(e==null?void 0:e.info)&&(0,n.jsx)(W.u,{access:"canSeeEnableCe",showProTips:!0,children:function(u){var a=u.canSeeEnableCe;return(0,n.jsx)(oe.Z,{trigger:(0,n.jsx)(Q.ZP,{disabled:a,icon:(0,n.jsx)(le.Z,{}),children:E.FD.format("listManageFilePath")}),imageId:e.info.Id})}}),(0,n.jsx)(he.Z,{type:"vertical"}),(e==null?void 0:e.info)&&(0,n.jsx)(Ie,{imageInfo:e,onFinish:function(){F(c+1)}})]})},"manage"),(0,n.jsx)(L.Z,{title:(0,n.jsx)(ue.Z,{}),subTitle:s.format("quickTagTitle"),ghost:!0,children:(0,n.jsx)(ve.Rs,{grid:{gutter:40,column:2},headerTitle:!1,metas:{content:{render:function(u,a,x){return(0,n.jsx)(G.Z,{color:"blue",children:(0,n.jsx)(Y.Z.Text,{copyable:!0,children:a})},x)}},title:{render:function(u,a,x){return(0,n.jsxs)(N.Z,{children:[(0,n.jsx)(X.Z,{buttonProps:{icon:(0,n.jsx)(de.Z,{})},action:O()(h()().mark(function f(){var w;return h()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return(w=K.current)===null||w===void 0||w.start(a),T.abrupt("return",(0,A.Ze)({tag:a,type:"push"}).then(function(V){var k;(k=K.current)===null||k===void 0||k.finish()}));case 2:case"end":return T.stop()}},f)})),children:"Push"}),(0,n.jsx)(X.Z,{buttonProps:{icon:(0,n.jsx)(ce.Z,{})},action:function(){return(0,A.Ze)({tag:a,type:"pull"})},children:"Pull"}),(0,n.jsx)(W.u,{access:"canSeeEnableCe",showProTips:!0,showProTipsOffset:[-15,9],children:function(w){var v=w.canSeeEnableCe;return(0,n.jsx)(Q.ZP,{disabled:v,onClick:function(){var V;(V=b.current)===null||V===void 0||V.show(a)},children:s.format("quickRemoteTagButton")})}}),(0,n.jsx)(W.u,{access:"canSeeImageListManage",children:(0,n.jsx)(X.Z,{buttonProps:{danger:!0},confirmProps:{showCommonConfirm:!0},action:function(){return(0,A.cV)({tag:a})},onSuccess:function(w){return F(c+1),!0},children:(0,n.jsx)(fe.Z,{})})})]},x)}}},dataSource:e==null?void 0:e.info.RepoTags})}),e&&(0,n.jsx)(L.Z,{title:(0,n.jsx)(H.Z,{}),subTitle:s.format("quickDetail"),ghost:!0,children:(0,n.jsxs)(l.Z,{styles:{label:{width:150}},column:1,bordered:!0,children:[(0,n.jsx)(l.Z.Item,{label:"ID",children:(0,n.jsx)(Y.Z.Text,{editable:{tooltip:s.format("quickDetailManageEditNameTip"),onChange:function(){var t=O()(h()().mark(function a(x){var f;return h()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,(0,q.Fj)({tag:e==null?void 0:e.info.RepoTags[0],title:x});case 2:f=v.sent,F(c+1),d.success(E.FD.format("finish"));case 5:case"end":return v.stop()}},a)}));function u(a){return t.apply(this,arguments)}return u}()},children:e==null?void 0:e.info.Id.substring(7,19)})}),(0,n.jsx)(l.Z.Item,{label:"Parent",children:e==null?void 0:e.info.Parent}),(0,n.jsx)(l.Z.Item,{label:"Size",children:(0,_.FI)((j=e==null?void 0:e.info.Size)!==null&&j!==void 0?j:0)}),(0,n.jsx)(l.Z.Item,{label:"Created",children:e==null?void 0:e.info.Created}),(0,n.jsxs)(l.Z.Item,{label:"Build",children:["Docker ",e==null?void 0:e.info.DockerVersion," ",e==null?void 0:e.info.Os," ",e==null?void 0:e.info.Architecture]}),(0,n.jsx)(l.Z.Item,{label:"Labels",children:(0,n.jsx)(l.Z,{column:1,bordered:!0,children:(e==null?void 0:e.info.Config.Labels)&&Object.keys(e==null?void 0:e.info.Config.Labels).map(function(t){return(0,n.jsx)(l.Z.Item,{label:t,children:e==null?void 0:e.info.Config.Labels[t]},t)})})})]})}),(0,n.jsx)(L.Z,{title:(0,n.jsx)(H.Z,{}),subTitle:s.format("quickDockerfileTitle"),ghost:!0,children:(0,n.jsxs)(l.Z,{styles:{label:{width:150}},column:1,bordered:!0,children:[(0,n.jsx)(l.Z.Item,{label:"CMD",children:e==null?void 0:e.info.Config.Cmd}),(0,n.jsx)(l.Z.Item,{label:"ENTRYPOINT",children:e==null?void 0:e.info.Config.Entrypoint}),(0,n.jsx)(l.Z.Item,{label:"EXPOSE",children:(e==null?void 0:e.info.Config.ExposedPorts)&&Object.keys(e==null?void 0:e.info.Config.ExposedPorts).map(function(t){return(0,n.jsx)(G.Z,{color:"gray",children:t},t)})}),(0,n.jsx)(l.Z.Item,{label:"VOLUME",children:(e==null?void 0:e.info.Config.Volumes)&&Object.keys(e==null?void 0:e.info.Config.Volumes).map(function(t){return(0,n.jsx)(G.Z,{color:"gray",children:t},t)})}),(0,n.jsx)(l.Z.Item,{label:"Env",children:(0,n.jsx)(l.Z,{column:1,bordered:!0,children:(e==null?void 0:e.info.Config.Env)&&(e==null?void 0:e.info.Config.Env.map(function(t,u){var a=t.split("=");return(0,n.jsx)(l.Z.Item,{label:a[0],children:a[1]},u)}))})})]})}),(e==null?void 0:e.layer)&&(0,n.jsx)(L.Z,{title:(0,n.jsx)(H.Z,{}),subTitle:"Layers",ghost:!0,children:(0,n.jsx)(me.Z,{rowKey:"CreatedBy",dataSource:e.layer.reverse(),columns:[{title:"Size",key:"size",render:function(u,a,x){return(0,_.FI)(a.Size)}},{title:"Layer",dataIndex:"CreatedBy",key:"CreatedBy",render:function(u,a,x){return(0,n.jsx)(we.Z,{content:a.CreatedBy})}}]})})]})]})}),be=$e}}]);
