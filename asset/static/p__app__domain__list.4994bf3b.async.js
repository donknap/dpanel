"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7750],{64789:function(xe,oe,e){e.d(oe,{Z:function(){return O}});var g=e(87462),h=e(67294),le={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},m=le,ae=e(84089),R=function(U,Z){return h.createElement(ae.Z,(0,g.Z)({},U,{ref:Z,icon:m}))},_=h.forwardRef(R),O=_},31199:function(xe,oe,e){var g=e(1413),h=e(45987),le=e(67294),m=e(40284),ae=e(85893),R=["fieldProps","min","proFieldProps","max"],_=function(U,Z){var se=U.fieldProps,c=U.min,ie=U.proFieldProps,l=U.max,ce=(0,h.Z)(U,R);return(0,ae.jsx)(m.Z,(0,g.Z)({valueType:"digit",fieldProps:(0,g.Z)({min:c,max:l},se),ref:Z,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:ie},ce))},O=le.forwardRef(_);oe.Z=O},92067:function(xe,oe,e){e.d(oe,{Z:function(){return ce}});var g=e(15009),h=e.n(g),le=e(99289),m=e.n(le),ae=e(13822),R=e(64789),_=e(9773),O=e(42075),q=e(83062),U=e(83622),Z=e(37413),se=e(5251),c=e(36146),ie=e(67255),l=e(85893);function ce(T){return(0,l.jsx)(_.Z,{columns:[{title:c.FD.format("listContainerName"),dataIndex:"name",render:function(x,S,ee,E){return(0,l.jsx)(O.Z,{direction:"vertical",style:{textAlign:"left"},children:S==null?void 0:S.Names.map(function(I){return(0,se.fi)(I,"/")})},S.Id)}},{title:c.FD.format("listPort"),dataIndex:"ports",search:!1,width:150,render:function(x,S,ee,E){var I=[],V=[];return S!=null&&S.Ports&&S.Ports.map(function(F,C){F.PublicPort?I.push(F):V.push(F)}),(0,l.jsx)(Z.Z,{publicPort:I,privatePort:V,domain:[]})}},{title:c.FD.format("listImageName"),dataIndex:"image",search:!1,render:function(x,S,ee,E,I){return S.Image}},{title:c.FD.format("listManage"),valueType:"option",key:"option",ellipsis:!0,width:100,render:function(x,S,ee,E){return[(0,l.jsx)(q.Z,{title:c.FD.format("listManageUse"),children:(0,l.jsx)(U.ZP,{type:"link",onClick:m()(h()().mark(function I(){var V;return h()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,(0,ae.jV)({md5:S.Id});case 2:V=C.sent,T.onSelect&&T.onSelect(V.data.info);case 4:case"end":return C.stop()}},I)})),children:(0,l.jsx)(R.Z,{})},S.Id)},S.Id)]}}],rowKey:"Id",request:function(){var H=m()(h()().mark(function x(S,ee,E){var I;return h()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,(0,ae.IE)({siteTitle:S.name});case 2:return I=F.sent,F.abrupt("return",{data:I.data.list,success:!0,total:I.data.list.length});case 4:case"end":return F.stop()}},x)}));return function(x,S,ee){return H.apply(this,arguments)}}(),pagination:(0,ie.Oh)()})}},37413:function(xe,oe,e){e.d(oe,{Z:function(){return ie}});var g=e(19632),h=e.n(g),le=e(36146),m=e(85577),ae=e(58638),R=e(36693),_=e(35995),O=e(99611),q=e(38345),U=e(42075),Z=e(66309),se=e(55241),c=e(85893);function ie(l){var ce,T=new le.Uo("components.containerPort"),H=[];l.publicPort&&(H=h()(l.publicPort)),l.privatePort&&(H=[].concat(h()(H),h()(l.privatePort)));var x=(ce=l.serverIp)!==null&&ce!==void 0?ce:"localhost";if(x!=""&&x.indexOf("http")===-1&&x.indexOf(":")>-1&&(x="[".concat(x,"]")),x==""||x=="127.0.0.1"){var S=document.location.protocol+"//"+document.location.hostname;x=S}var ee=(0,c.jsxs)(q.Z,{direction:l.layout=="inline"?"row":"column",style:{width:l.layout!="inline"?600:"auto"},ghost:!0,children:[H.length>0&&(0,c.jsx)(q.Z,{title:(0,c.jsx)(m.Z,{}),subTitle:T.format("cardPortTitle"),ghost:l.ghost,bodyStyle:{maxHeight:300,overflow:"auto",margin:"10px 0"},children:H.map(function(E,I){var V;return x==""&&E.IP&&(x=E.IP),(0,c.jsx)(U.Z,{size:"large",wrap:!0,children:(0,c.jsx)(Z.Z,{color:E.PublicPort?"blue":"yellow",icon:E.PublicPort?(0,c.jsx)(ae.Z,{}):"",style:{marginBottom:10,marginRight:15},children:E.PublicPort?(0,c.jsx)("a",{href:"".concat(x.indexOf("http")===0?x:"http://"+x,":").concat(E.PublicPort),target:"_blank",children:"".concat(E.PublicPort?((V=E.IP)!==null&&V!==void 0?V:"0.0.0.0")+":"+E.PublicPort+" -> ":"").concat(E.PrivatePort,"/").concat(E.Type)},"link".concat(I)):"".concat(E.PrivatePort,"/").concat(E.Type)})},"space".concat(I))})}),l.domain&&l.domain.length>0&&(0,c.jsx)(q.Z,{title:(0,c.jsx)(R.Z,{}),subTitle:T.format("cardDomainTitle"),ghost:l.ghost,children:(0,c.jsx)(U.Z,{wrap:!0,style:{textAlign:"left"},children:l.domain&&l.domain.map(function(E,I){return(0,c.jsx)(Z.Z,{color:"blue",icon:(0,c.jsx)(ae.Z,{}),children:(0,c.jsx)("a",{href:E,target:"_blank",children:E})},"domain".concat(I))})})})]});return l.showInDetail?ee:(0,c.jsx)(se.Z,{placement:"right",content:ee,children:(0,c.jsxs)(U.Z,{direction:"vertical",children:[l.privatePort&&l.privatePort.length>0&&(0,c.jsxs)(Z.Z,{color:"yellow",icon:(0,c.jsx)(_.Z,{}),children:[T.format("portPrivate"),": ",l.privatePort.length]}),l.publicPort&&l.publicPort.length>0&&(0,c.jsxs)(Z.Z,{color:"blue",icon:(0,c.jsx)(O.Z,{}),children:[T.format("protPublic"),": ",l.publicPort.length]}),l.domain&&l.domain.length>0&&(0,c.jsx)(Z.Z,{color:"geekblue",icon:(0,c.jsx)(R.Z,{}),children:l.domainTitle?l.domainTitle:"".concat(T.format("domain"),": ").concat(l.domain.length)})]})})}},7463:function(xe,oe,e){e.r(oe),e.d(oe,{default:function(){return ve}});var g=e(15009),h=e.n(g),le=e(99289),m=e.n(le),ae=e(5574),R=e.n(ae),_=e(1699),O=e(66554),q=e(184),U=e(24739),Z=e(97462),se=e(5966),c=e(62370),ie=e(64317),l=e(86615),ce=e(31199),T=e(52688),H=e(11106),x=e(83622),S=e(92398),ee=e(84567),E=e(42075),I=e(66309),V=e(71230),F=e(15746),C=e(40056),j=e(67294),G=e(74026),s=e(3616),N=e(36146),Oe=e(92067),n=e(85893);function Ce(b){var z=(0,j.useState)(!1),Q=R()(z,2),D=Q[0],J=Q[1],te=new N.Uo("components.appDomain");return(0,n.jsx)(q.a,{drawerProps:{width:s.R_},trigger:(0,n.jsx)(x.ZP,{type:"primary",onClick:function(){J(!0)},children:te.format("createSelectContainer")}),onOpenChange:function(me){J(me)},open:D,children:(0,n.jsx)(Oe.Z,{onSelect:function(me){J(!1),b.onSelect&&b.onSelect(me)}})})}var De=(0,j.forwardRef)(function(b,z){var Q=(0,j.useState)(!1),D=R()(Q,2),J=D[0],te=D[1],M=(0,j.useRef)(),me=(0,j.useState)(),B=R()(me,2),f=B[0],i=B[1],Y=(0,j.useState)(1),K=R()(Y,2),w=K[0],P=K[1],o=new N.Uo("components.appDomain");return(0,j.useImperativeHandle)(z,function(){return{showEdit:function(d){return m()(h()().mark(function t(){var A,k,u;return h()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,(0,O.lQ)({id:d});case 2:k=$.sent,u=k.data,(A=M.current)===null||A===void 0||A.setFieldsValue({containerId:u.domain.containerId,serverName:u.domain.serverName,serverNameAlias:u.domain.setting.serverNameAlias,serverAddress:u.domain.setting.serverAddress,serverProtocol:u.domain.setting.serverProtocol,port:u.domain.setting.port,enableBlockCommonExploits:u.domain.setting.enableBlockCommonExploits,enableAssetCache:u.domain.setting.enableAssetCache,enableWs:u.domain.setting.enableWs,extraNginx:u.domain.setting.extraNginx,enableSSL:u.domain.setting.enableSSL,certName:u.domain.setting.certName,vhost:u.vhost,type:u.domain.setting.type,wwwRoot:u.domain.setting.wwwRoot,fpmRoot:u.domain.setting.fpmRoot}),i(u),te(!0);case 7:case"end":return $.stop()}},t)}))()}}}),(0,n.jsx)(q.a,{drawerProps:{forceRender:!0,width:s.R_},open:J,onOpenChange:function(d){var t;te(d),!d&&((t=M.current)===null||t===void 0||t.resetFields())},title:o.format("createTitle"),trigger:(0,n.jsx)(x.ZP,{onClick:function(){var d;i(void 0),(d=M.current)===null||d===void 0||d.resetFields()},type:"primary",children:o.format("createTriggerButton")}),formRef:M,onFinish:function(){var L=m()(h()().mark(function d(t){var A,k,u,re,$;return h()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:if(!t.vhost){W.next=8;break}return W.next=3,(0,O.Ss)({id:f&&(f==null?void 0:f.domain.id)>0?f.domain.id:0,vhost:t.vhost});case 3:return k=W.sent,W.next=6,(0,O.hZ)();case 6:W.next=11;break;case 8:return W.next=10,(0,O.Fj)({id:f&&(f==null?void 0:f.domain.id)>0?f.domain.id:0,containerId:t.containerId,serverName:t.serverName,serverNameAlias:t.serverNameAlias,serverAddress:t.serverAddress,serverProtocol:(u=t.serverProtocol)!==null&&u!==void 0?u:"http",port:parseInt((re=t.port)!==null&&re!==void 0?re:"80"),enableBlockCommonExploits:t.enableBlockCommonExploits,enableAssetCache:t.enableAssetCache,enableWs:t.enableWs,enableSSL:t.enableSSL,extraNginx:t.extraNginx,certName:t.certName,wwwRoot:t.wwwRoot,fpmRoot:t.fpmRoot,type:t.type});case 10:$=W.sent;case 11:return(A=M.current)===null||A===void 0||A.resetFields(),b.onFinish(),W.abrupt("return",!0);case 14:case"end":return W.stop()}},d)}));return function(d){return L.apply(this,arguments)}}(),children:(0,n.jsx)(S.Z,{items:[{key:"1",label:o.format("createTabDomain"),destroyOnHidden:!0,children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(U.UW,{children:[(0,n.jsx)(Z.Z,{name:["enableSSL"],children:function(d){var t=d.enableSSL;return(0,n.jsx)(se.Z,{width:"lg",label:o.format("createFormServerName"),tooltip:o.format("createFormServerNameTip"),name:"serverName",placeholder:"www.explame.com, demo.com:8807",rules:[{required:!0}],fieldProps:{addonBefore:t?"https://":"http://"},disabled:f&&f.domain.id>0})}}),(0,n.jsx)(c.Z,{label:" ",valuePropName:"checked",name:"enableSSL",children:(0,n.jsx)(ee.Z,{children:"Https?"})})]}),(0,n.jsx)(ie.Z,{label:o.format("createFormServerNameAlises"),name:"serverNameAlias",mode:"tags",placeholder:o.format("createFormServerNameAlisesEmpty")}),(0,n.jsx)(Z.Z,{name:["enableSSL","serverName"],children:function(d){var t=d.enableSSL,A=d.serverName;if(t)return(0,n.jsxs)(E.Z.Compact,{children:[(0,n.jsx)(ie.Z,{label:o.format("createFormCertName"),width:"lg",name:"certName",fieldProps:{labelRender:function(u){return u.value}},required:!0,rules:[{required:!0}],request:m()(h()().mark(function k(){var u;return h()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,(0,O.dZ)();case 2:return u=$.sent,$.abrupt("return",u.data&&u.data.list.map(function(ge,W){return{label:(0,n.jsx)(E.Z,{wrap:!0,children:ge.domain.map(function(Ee,ye){return(0,n.jsx)(I.Z,{children:Ee})})},W),value:"".concat(ge.domain[0])}}));case 4:case"end":return $.stop()}},k)}))},w),(0,n.jsx)(c.Z,{label:" ",children:(0,n.jsx)(G.Z,{domain:A?[A]:[],onFinish:function(){P(w+1)}})})]})}}),(0,n.jsx)(l.Z.Group,{label:o.format("createFormType"),name:"type",initialValue:"proxy",options:o.option("createFormTypeOption",["proxy","redirect","fpm"]),fieldProps:{onChange:function(d){var t,A;(t=M.current)===null||t===void 0||t.setFieldValue("containerId",""),(A=M.current)===null||A===void 0||A.setFieldValue("serverAddress","")}}}),(0,n.jsxs)(E.Z.Compact,{children:[(0,n.jsx)(ie.Z,{label:o.format("createFormProtocol"),tooltip:o.format("createFormProtocolTip"),initialValue:"http",name:"serverProtocol",fieldProps:{allowClear:!1},valueEnum:{http:"http",https:"https"}}),(0,n.jsx)(Z.Z,{name:["containerId","type"],children:function(d){var t=d.containerId,A=d.type;return[(0,n.jsx)(se.Z,{width:"lg",label:" ",name:"serverAddress",placeholder:o.format("createFormServerAddressEmpty"),required:!0,disabled:t,rules:[{required:!0}]},"serverAddress"),A!="redirect"&&(0,n.jsxs)(E.Z.Compact,{children:[(0,n.jsx)(c.Z,{label:" ",name:"containerId",children:(0,n.jsx)(Ce,{onSelect:function(){var k=m()(h()().mark(function u(re){var $,ge,W,Ee,ye,Ie;return h()().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:($=M.current)===null||$===void 0||$.setFieldValue("serverAddress",re.Name),(ge=M.current)===null||ge===void 0||ge.setFieldValue("containerId",re.Id),A=="fpm"&&(W=re.Config.Labels)!==null&&W!==void 0&&W["com.docker.compose.project"]&&((Ee=M.current)===null||Ee===void 0||Ee.setFieldValue("wwwRoot","/dpanel/compose/".concat((ye=re.Config.Labels)===null||ye===void 0?void 0:ye["com.docker.compose.project"],"/wwwroot")),(Ie=M.current)===null||Ie===void 0||Ie.setFieldValue("fpmRoot","/www"));case 3:case"end":return fe.stop()}},u)}));return function(u){return k.apply(this,arguments)}}()})}),(0,n.jsx)(c.Z,{label:" ",children:(0,n.jsx)(x.ZP,{onClick:function(){var u,re;(u=M.current)===null||u===void 0||u.setFieldValue("containerId",""),(re=M.current)===null||re===void 0||re.setFieldValue("serverAddress","")},children:o.format("createUser")})})]},"selectContainer")]}})]}),(0,n.jsx)(ce.Z,{label:o.format("createFormPort"),name:"port",placeholder:o.format("createFormPortEmpty")}),(0,n.jsx)(Z.Z,{name:["type"],children:function(d){var t=d.type;if(t=="fpm")return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(se.Z,{name:"wwwRoot",label:"\u7F51\u7AD9\u6839\u76EE\u5F55",tooltip:"\u5FC5\u987B\u4F7F\u7528 DPanel \u5BB9\u5668\u5185\u7684\u8DEF\u5F84\u914D\u7F6E\u7F51\u7AD9\u6839\u76EE\u5F55",placeholder:"/dpanel/wwwroot"}),(0,n.jsx)(se.Z,{name:"fpmRoot",label:"FPM \u6839\u76EE\u5F55",tooltip:"\u76F8\u5BF9\u4E8E FPM \u5BB9\u5668\u4E2D\u7684\u6587\u4EF6\u76EE\u5F55"})]})}}),(0,n.jsx)(Z.Z,{name:["type"],children:function(d){var t=d.type;return t!="redirect"&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(V.Z,{children:[(0,n.jsx)(F.Z,{span:12,children:(0,n.jsx)(T.Z,{label:o.format("createFormEnableBlockCommonExploits"),name:"enableBlockCommonExploits"})}),(0,n.jsx)(F.Z,{children:(0,n.jsx)(T.Z,{width:"md",label:o.format("createFormEnableAssetCache"),name:"enableAssetCache"})})]}),(0,n.jsx)(V.Z,{children:(0,n.jsx)(F.Z,{span:12,children:(0,n.jsx)(T.Z,{label:o.format("createFormEnableWs"),name:"enableWs",initialValue:!0})})})]})}})]})},{key:"3",label:"vhost.conf",destroyOnHidden:!0,children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(C.Z,{message:o.format("createVhostTip"),showIcon:!0}),(0,n.jsx)(c.Z,{name:"vhost",label:" ",children:(0,n.jsx)(H.ZP,{height:"600px",theme:"dark",style:{backgroundColor:"#282c34"},onChange:function(){}})})]})}]})})}),he=De,Re=e(5251),Pe=e(83062),je=e(38703);function Se(b){var z,Q=0;if(b.sslCrtCreatedAt&&b.sslCrtRenewAt){var D,J,te=new Date,M=new Date((D=b.sslCrtRenewAt)!==null&&D!==void 0?D:""),me=new Date((J=b.sslCrtCreatedAt)!==null&&J!==void 0?J:""),B=Math.ceil((M.getTime()-me.getTime())/86400/1e3),f=Math.ceil((te.getTime()-me.getTime())/86400/1e3);Q=Math.min(Math.ceil(f/B*100),100)}return b.certName?(0,n.jsx)(Pe.Z,{placement:"right",title:"".concat(N.FD.format("listExpireAt"),": ").concat((0,Re.NF)((z=b.sslCrtRenewAt)!==null&&z!==void 0?z:"")),children:(0,n.jsx)(I.Z,{icon:(0,n.jsxs)(E.Z,{children:[(0,n.jsx)(je.Z,{type:"circle",percent:Q,status:Q==100?"exception":"active",strokeWidth:20,size:14}),(0,n.jsx)("span",{})]}),children:b.certName})}):"-"}var r=e(80821),a=e(37413),p=e(98510),v=e(86548),y=e(82061),X=e(74453),ne=e(82346),de=e(96074),pe=e(25593),ue=e(50136);function ve(){var b=(0,j.useRef)(),z=(0,j.useRef)(),Q=(0,j.useState)({}),D=R()(Q,2),J=D[0],te=D[1],M=(0,ne.useAccess)(),me=new N.Uo("app");return(0,n.jsx)(X._z,{extra:[(0,n.jsx)(_.u,{access:"canSeeContainerDomainManage",children:(0,n.jsx)(he,{ref:z,onFinish:m()(h()().mark(function B(){var f,i;return h()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return!((f=b.current)===null||f===void 0)&&f.reloadAndRest&&((i=b.current)===null||i===void 0||i.reloadAndRest()),K.next=3,(0,O.hZ)();case 3:case"end":return K.stop()}},B)}))},"addDomain")},"addDomain"),(0,n.jsx)(_.u,{access:"canSeeContainerDomainManage",children:(0,n.jsx)(r.Z,{tips:me.format("domainRestartNginxTip"),action:m()(h()().mark(function B(){return h()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,O.hZ)();case 2:return i.abrupt("return",i.sent);case 3:case"end":return i.stop()}},B)})),children:me.format("domainRestartNginx")},"nginx")},"nginx")],children:(0,n.jsx)(p.C,{rowKey:"id",actionRef:b,columns:[{title:N.FD.format("listDomain"),dataIndex:"serverName",render:function(f,i,Y,K,w){var P=[];return i.serverName&&P.push(i.setting.enableSSL?"https://"+i.serverName:"http://"+i.serverName),i.setting.serverNameAlias&&i.setting.serverNameAlias.map(function(o){P.push(i.setting.enableSSL?"https://"+o:"http://"+o)}),(0,n.jsx)(a.Z,{domain:P,domainTitle:"".concat(i.serverName," (").concat(P.length,")")})}},{title:N.FD.format("listTargetAddress"),search:!1,render:function(f,i,Y,K,w){return"".concat(i.setting.serverAddress,":").concat(i.setting.port)}},{title:N.FD.format("listCert"),search:!0,dataIndex:"certName",width:300,valueEnum:J,render:function(f,i,Y,K,w){return i.setting.enableSSL?(0,n.jsx)(Se,{certName:i.setting.certName,sslCrtRenewAt:i.setting.sslCrtRenewAt,sslCrtCreatedAt:i.setting.sslCrtCreatedAt}):"-"}},{title:N.FD.format("listCreatedAt"),search:!1,width:180,ellipsis:!0,dataIndex:"createdAt",render:function(f,i,Y,K,w){return(0,Re.NF)(i.createdAt)}},{title:N.FD.format("listManage"),key:"option",width:50,search:!1,fixed:"right",hidden:!M.canSeeContainerDomainManage,render:function(f,i,Y,K){return(0,n.jsx)(E.Z,{split:(0,n.jsx)(de.Z,{type:"vertical"}),children:(0,n.jsx)(pe.Z.Link,{onClick:function(){var P;return(P=z.current)===null||P===void 0||P.showEdit(i.id),!0},children:(0,n.jsx)(Pe.Z,{title:N.FD.format("listManageEdit"),children:(0,n.jsx)(v.Z,{})})},"edit")})}}],request:function(){var B=m()(h()().mark(function f(i,Y,K){var w,P,o;return h()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,O.i7)({serverName:i.serverName,certName:i.certName});case 2:return w=d.sent,d.next=5,(0,O.dZ)();case 5:return P=d.sent,o={},w.data.list.map(function(t){t.setting.certName&&typeof t.setting.certName=="string"&&(o[t.setting.certName]=t.setting.certName)}),te(o),d.abrupt("return",{data:w.data.list&&w.data.list.map(function(t){if(P&&P.data.list){var A,k;t.setting.sslCrtCreatedAt=(A=P.data.list.find(function(u){return u.domain[0]==t.setting.certName}))===null||A===void 0?void 0:A.createdAt,t.setting.sslCrtRenewAt=(k=P.data.list.find(function(u){return u.domain[0]==t.setting.certName}))===null||k===void 0?void 0:k.renewAt}return t}),success:!0,total:w.data.list.length});case 10:case"end":return d.stop()}},f)}));return function(f,i,Y){return B.apply(this,arguments)}}(),rowSelection:M.canSeeContainerDomainManage?{defaultSelectedRowKeys:[],alwaysShowAlert:!0}:void 0,quickToolbarRender:function(f){var i=f.selectedRows,Y=f.finish,K=f.loading;return[(0,n.jsx)(r.Z,{buttonProps:{danger:!0,type:"primary"},confirmProps:{showCommonConfirm:!0},action:m()(h()().mark(function w(){return h()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return K(),o.abrupt("return",Promise.all([(0,O.dj)({id:i.map(function(L){return L.id})}),(0,O.hZ)()]).finally(function(){Y(!0)}));case 2:case"end":return o.stop()}},w)})),onSuccess:function(){var P,o;return!((P=b.current)===null||P===void 0)&&P.reloadAndRest&&((o=b.current)===null||o===void 0||o.reloadAndRest()),!0},onError:function(){var P,o;return!((P=b.current)===null||P===void 0)&&P.reset&&((o=b.current)===null||o===void 0||o.reset()),!0},children:N.FD.format("listManageDeleteBatch")},"batchDelete")]},contextMenu:function(f){var i=f.loading,Y=f.finish,K=f.isMultiple,w=f.selectedRow,P=f.selectedRows;return{items:[{type:"group",label:N.FD.format("listManage"),key:"operator",children:[{label:(0,n.jsx)(p.C.ContextMenuItem,{buttonProps:{icon:(0,n.jsx)(v.Z,{}),disabled:K()},action:m()(h()().mark(function o(){var L;return h()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:Y(!0),(L=z.current)===null||L===void 0||L.showEdit(w.id);case 2:case"end":return t.stop()}},o)})),children:N.FD.format("listManageEdit")}),key:"edit"}]},{key:"delete",label:(0,n.jsx)(p.C.ContextMenuItem,{buttonProps:{icon:(0,n.jsx)(y.Z,{})},type:"danger",confirmProps:{showCommonConfirm:!0},action:m()(h()().mark(function o(){return h()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return i(),d.abrupt("return",Promise.all([(0,O.dj)({id:P.map(function(t){return t.id})}),(0,O.hZ)()]).finally(function(){Y(!0)}));case 2:case"end":return d.stop()}},o)})),children:N.FD.format("listManageDelete")},"deleteBatch")}]}},tableExtraRender:function(){return(0,n.jsx)(ue.Z,{mode:"horizontal",selectedKeys:["domain"],items:[{label:(0,n.jsx)(ne.Link,{to:"/app/domain/list",replace:!0,children:N.Ob.format("container.domain.list")}),key:"domain"},{label:(0,n.jsx)(ne.Link,{to:"/app/domain/cert",replace:!0,children:N.Ob.format("container.domain.cert")}),key:"cert"}]})}},"domain-list")})}},13822:function(xe,oe,e){e.d(oe,{IE:function(){return U},IW:function(){return O},KK:function(){return ce},LJ:function(){return H},RF:function(){return E},Re:function(){return S},aF:function(){return V},eE:function(){return ie},jV:function(){return se}});var g=e(5574),h=e.n(g),le=e(15009),m=e.n(le),ae=e(99289),R=e.n(ae),_=e(82346);function O(C){return q.apply(this,arguments)}function q(){return q=R()(m()().mark(function C(j){return m()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,_.request)("/dpanel/api/app/container/status",{method:"POST",data:j}));case 1:case"end":return s.stop()}},C)})),q.apply(this,arguments)}function U(C){return Z.apply(this,arguments)}function Z(){return Z=R()(m()().mark(function C(j){return m()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,_.request)("/dpanel/api/app/container/get-list",{data:j,method:"POST"}));case 1:case"end":return s.stop()}},C)})),Z.apply(this,arguments)}function se(C){return c.apply(this,arguments)}function c(){return c=R()(m()().mark(function C(j){return m()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,_.request)("/dpanel/api/app/container/get-detail",{data:j,method:"POST"}));case 1:case"end":return s.stop()}},C)})),c.apply(this,arguments)}function ie(C){return l.apply(this,arguments)}function l(){return l=R()(m()().mark(function C(j){return m()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,_.request)("/dpanel/api/app/container/update",{data:j,method:"POST"}));case 1:case"end":return s.stop()}},C)})),l.apply(this,arguments)}function ce(){return T.apply(this,arguments)}function T(){return T=R()(m()().mark(function C(){return m()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.abrupt("return",(0,_.request)("/dpanel/api/app/container/prune",{method:"POST"}));case 1:case"end":return G.stop()}},C)})),T.apply(this,arguments)}function H(C){return x.apply(this,arguments)}function x(){return x=R()(m()().mark(function C(j){return m()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!j.enableExportToPath){s.next=2;break}return s.abrupt("return",(0,_.request)("/dpanel/api/app/container/export",{method:"GET",params:j}));case 2:return s.abrupt("return",new Promise(function(N,Oe){var n=localStorage.getItem("token"),Ce=new URLSearchParams;Ce.append("token",n||""),Object.entries(j).forEach(function(Re){var Pe=h()(Re,2),je=Pe[0],Se=Pe[1];Ce.append(je,String(Se))});var De="/dpanel/api/app/container/export?".concat(Ce.toString()),he=document.createElement("iframe");he.style.display="none",he.src=De,document.body.appendChild(he),setTimeout(function(){he.parentElement&&document.body.removeChild(he)},5e3),N({code:200,data:"success",error:""})}));case 3:case"end":return s.stop()}},C)})),x.apply(this,arguments)}function S(C){return ee.apply(this,arguments)}function ee(){return ee=R()(m()().mark(function C(j){return m()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,_.request)("/dpanel/api/app/container/commit",{method:"POST",data:j}));case 1:case"end":return s.stop()}},C)})),ee.apply(this,arguments)}function E(C){return I.apply(this,arguments)}function I(){return I=R()(m()().mark(function C(j){return m()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,_.request)("/dpanel/api/app/container/upgrade",{method:"POST",data:j}));case 1:case"end":return s.stop()}},C)})),I.apply(this,arguments)}function V(C){return F.apply(this,arguments)}function F(){return F=R()(m()().mark(function C(j){return m()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,_.request)("/dpanel/api/app/container/copy",{method:"POST",data:j}));case 1:case"end":return s.stop()}},C)})),F.apply(this,arguments)}},40056:function(xe,oe,e){e.d(oe,{Z:function(){return Se}});var g=e(67294),h=e(89739),le=e(4340),m=e(97937),ae=e(21640),R=e(78860),_=e(93967),O=e.n(_),q=e(29372),U=e(64217),Z=e(42550),se=e(96159),c=e(53124),ie=e(11568),l=e(14747),ce=e(83559);const T=(r,a,p,v,y)=>({background:r,border:`${(0,ie.bf)(v.lineWidth)} ${v.lineType} ${a}`,[`${y}-icon`]:{color:p}}),H=r=>{const{componentCls:a,motionDurationSlow:p,marginXS:v,marginSM:y,fontSize:X,fontSizeLG:ne,lineHeight:de,borderRadiusLG:pe,motionEaseInOutCirc:ue,withDescriptionIconSize:ve,colorText:b,colorTextHeading:z,withDescriptionPadding:Q,defaultPadding:D}=r;return{[a]:Object.assign(Object.assign({},(0,l.Wf)(r)),{position:"relative",display:"flex",alignItems:"center",padding:D,wordWrap:"break-word",borderRadius:pe,[`&${a}-rtl`]:{direction:"rtl"},[`${a}-content`]:{flex:1,minWidth:0},[`${a}-icon`]:{marginInlineEnd:v,lineHeight:0},"&-description":{display:"none",fontSize:X,lineHeight:de},"&-message":{color:z},[`&${a}-motion-leave`]:{overflow:"hidden",opacity:1,transition:`max-height ${p} ${ue}, opacity ${p} ${ue},
        padding-top ${p} ${ue}, padding-bottom ${p} ${ue},
        margin-bottom ${p} ${ue}`},[`&${a}-motion-leave-active`]:{maxHeight:0,marginBottom:"0 !important",paddingTop:0,paddingBottom:0,opacity:0}}),[`${a}-with-description`]:{alignItems:"flex-start",padding:Q,[`${a}-icon`]:{marginInlineEnd:y,fontSize:ve,lineHeight:0},[`${a}-message`]:{display:"block",marginBottom:v,color:z,fontSize:ne},[`${a}-description`]:{display:"block",color:b}},[`${a}-banner`]:{marginBottom:0,border:"0 !important",borderRadius:0}}},x=r=>{const{componentCls:a,colorSuccess:p,colorSuccessBorder:v,colorSuccessBg:y,colorWarning:X,colorWarningBorder:ne,colorWarningBg:de,colorError:pe,colorErrorBorder:ue,colorErrorBg:ve,colorInfo:b,colorInfoBorder:z,colorInfoBg:Q}=r;return{[a]:{"&-success":T(y,v,p,r,a),"&-info":T(Q,z,b,r,a),"&-warning":T(de,ne,X,r,a),"&-error":Object.assign(Object.assign({},T(ve,ue,pe,r,a)),{[`${a}-description > pre`]:{margin:0,padding:0}})}}},S=r=>{const{componentCls:a,iconCls:p,motionDurationMid:v,marginXS:y,fontSizeIcon:X,colorIcon:ne,colorIconHover:de}=r;return{[a]:{"&-action":{marginInlineStart:y},[`${a}-close-icon`]:{marginInlineStart:y,padding:0,overflow:"hidden",fontSize:X,lineHeight:(0,ie.bf)(X),backgroundColor:"transparent",border:"none",outline:"none",cursor:"pointer",[`${p}-close`]:{color:ne,transition:`color ${v}`,"&:hover":{color:de}}},"&-close-text":{color:ne,transition:`color ${v}`,"&:hover":{color:de}}}}},ee=r=>({withDescriptionIconSize:r.fontSizeHeading3,defaultPadding:`${r.paddingContentVerticalSM}px 12px`,withDescriptionPadding:`${r.paddingMD}px ${r.paddingContentHorizontalLG}px`});var E=(0,ce.I$)("Alert",r=>[H(r),x(r),S(r)],ee),I=function(r,a){var p={};for(var v in r)Object.prototype.hasOwnProperty.call(r,v)&&a.indexOf(v)<0&&(p[v]=r[v]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var y=0,v=Object.getOwnPropertySymbols(r);y<v.length;y++)a.indexOf(v[y])<0&&Object.prototype.propertyIsEnumerable.call(r,v[y])&&(p[v[y]]=r[v[y]]);return p};const V={success:h.Z,info:R.Z,error:le.Z,warning:ae.Z},F=r=>{const{icon:a,prefixCls:p,type:v}=r,y=V[v]||null;return a?(0,se.wm)(a,g.createElement("span",{className:`${p}-icon`},a),()=>({className:O()(`${p}-icon`,a.props.className)})):g.createElement(y,{className:`${p}-icon`})},C=r=>{const{isClosable:a,prefixCls:p,closeIcon:v,handleClose:y,ariaProps:X}=r,ne=v===!0||v===void 0?g.createElement(m.Z,null):v;return a?g.createElement("button",Object.assign({type:"button",onClick:y,className:`${p}-close-icon`,tabIndex:0},X),ne):null};var G=g.forwardRef((r,a)=>{const{description:p,prefixCls:v,message:y,banner:X,className:ne,rootClassName:de,style:pe,onMouseEnter:ue,onMouseLeave:ve,onClick:b,afterClose:z,showIcon:Q,closable:D,closeText:J,closeIcon:te,action:M,id:me}=r,B=I(r,["description","prefixCls","message","banner","className","rootClassName","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action","id"]),[f,i]=g.useState(!1),Y=g.useRef(null);g.useImperativeHandle(a,()=>({nativeElement:Y.current}));const{getPrefixCls:K,direction:w,closable:P,closeIcon:o,className:L,style:d}=(0,c.dj)("alert"),t=K("alert",v),[A,k,u]=E(t),re=fe=>{var be;i(!0),(be=r.onClose)===null||be===void 0||be.call(r,fe)},$=g.useMemo(()=>r.type!==void 0?r.type:X?"warning":"info",[r.type,X]),ge=g.useMemo(()=>typeof D=="object"&&D.closeIcon||J?!0:typeof D=="boolean"?D:te!==!1&&te!==null&&te!==void 0?!0:!!P,[J,te,D,P]),W=X&&Q===void 0?!0:Q,Ee=O()(t,`${t}-${$}`,{[`${t}-with-description`]:!!p,[`${t}-no-icon`]:!W,[`${t}-banner`]:!!X,[`${t}-rtl`]:w==="rtl"},L,ne,de,u,k),ye=(0,U.Z)(B,{aria:!0,data:!0}),Ie=g.useMemo(()=>typeof D=="object"&&D.closeIcon?D.closeIcon:J||(te!==void 0?te:typeof P=="object"&&P.closeIcon?P.closeIcon:o),[te,D,J,o]),Me=g.useMemo(()=>{const fe=D!=null?D:P;if(typeof fe=="object"){const{closeIcon:be}=fe;return I(fe,["closeIcon"])}return{}},[D,P]);return A(g.createElement(q.ZP,{visible:!f,motionName:`${t}-motion`,motionAppear:!1,motionEnter:!1,onLeaveStart:fe=>({maxHeight:fe.offsetHeight}),onLeaveEnd:z},({className:fe,style:be},Ze)=>g.createElement("div",Object.assign({id:me,ref:(0,Z.sQ)(Y,Ze),"data-show":!f,className:O()(Ee,fe),style:Object.assign(Object.assign(Object.assign({},d),pe),be),onMouseEnter:ue,onMouseLeave:ve,onClick:b,role:"alert"},ye),W?g.createElement(F,{description:p,icon:r.icon,prefixCls:t,type:$}):null,g.createElement("div",{className:`${t}-content`},y?g.createElement("div",{className:`${t}-message`},y):null,p?g.createElement("div",{className:`${t}-description`},p):null),M?g.createElement("div",{className:`${t}-action`},M):null,g.createElement(C,{isClosable:ge,prefixCls:t,closeIcon:Ie,handleClose:re,ariaProps:Me}))))}),s=e(15671),N=e(43144),Oe=e(61120),n=e(78814),Ce=e(82963);function De(r,a,p){return a=(0,Oe.Z)(a),(0,Ce.Z)(r,(0,n.Z)()?Reflect.construct(a,p||[],(0,Oe.Z)(r).constructor):a.apply(r,p))}var he=e(60136),Pe=function(r){function a(){var p;return(0,s.Z)(this,a),p=De(this,a,arguments),p.state={error:void 0,info:{componentStack:""}},p}return(0,he.Z)(a,r),(0,N.Z)(a,[{key:"componentDidCatch",value:function(v,y){this.setState({error:v,info:y})}},{key:"render",value:function(){const{message:v,description:y,id:X,children:ne}=this.props,{error:de,info:pe}=this.state,ue=(pe==null?void 0:pe.componentStack)||null,ve=typeof v=="undefined"?(de||"").toString():v,b=typeof y=="undefined"?ue:y;return de?g.createElement(G,{id:X,type:"error",message:ve,description:g.createElement("pre",{style:{fontSize:"0.9em",overflowX:"auto"}},b)}):ne}}])}(g.Component);const je=G;je.ErrorBoundary=Pe;var Se=je}}]);
