(self.webpackChunk=self.webpackChunk||[]).push([[1355],{23430:function(b,g,e){"use strict";e.d(g,{Z:function(){return l}});var C=e(87462),d=e(67294),w={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"},h=w,R=e(84089),U=function(O,n){return d.createElement(R.Z,(0,C.Z)({},O,{ref:n,icon:h}))},j=d.forwardRef(U),l=j},89497:function(b,g,e){"use strict";e.r(g),e.d(g,{default:function(){return H}});var C=e(15009),d=e.n(C),w=e(99289),h=e.n(w),R=e(74026),U=e(77865),j=e(80821),l=e(66554),T=e(5251),O=e(86548),n=e(23430),t=e(82061),E=e(74453),a=e(82346),f=e(50136),W=e(42075),B=e(66309),I=e(96074),x=e(25593),y=e(83062),A=e(67294),S=e(93162),k=e.n(S),$=e(1699),m=e(36146),F=e(98510),o=e(85893);function H(){var L=(0,A.useRef)(),N=(0,A.useRef)(),Z=(0,A.useRef)(),z=(0,a.useAccess)();return(0,o.jsx)(E._z,{extra:[(0,o.jsx)($.u,{access:"canSeeContainerDomainManage",children:(0,o.jsx)(R.Z,{ref:Z,onFinish:function(){var i,s;!((i=L.current)===null||i===void 0)&&i.reloadAndRest&&((s=L.current)===null||s===void 0||s.reloadAndRest())}},"cert")},"cert"),(0,o.jsx)($.u,{access:"canSeeContainerDomainManage",children:(0,o.jsx)(U.Z,{ref:N},"dns")},"dns")],children:(0,o.jsx)(F.C,{actionRef:L,tableExtraRender:function(){return(0,o.jsx)(f.Z,{mode:"horizontal",selectedKeys:["cert"],items:[{label:(0,o.jsx)(a.Link,{to:"/app/domain/list",replace:!0,children:m.Ob.format("container.domain.list")}),key:"domain"},{label:(0,o.jsx)(a.Link,{to:"/app/domain/cert",replace:!0,children:m.Ob.format("container.domain.cert")}),key:"cert"}]})},rowKey:"mainDomain",columns:[{title:m.FD.format("listDomain"),render:function(i,s,v,u,_){return(0,o.jsx)(W.Z,{wrap:!0,children:s.domain.map(function(c,r){return(0,o.jsx)(B.Z,{color:r==0?"blue":"",children:c},c)})})}},{title:m.FD.format("listStatus"),search:!1,width:100,render:function(i,s,v,u,_){return s.inUse&&(0,o.jsx)(B.Z,{color:"cyan",children:m.FD.format("listInUse")},"use-".concat(v))}},{title:"CA",dataIndex:"CA",search:!1,width:200},{title:m.FD.format("listCreatedAt"),search:!1,width:180,render:function(i,s,v,u,_){return(0,T.NF)(s.createdAt)},sorter:function(i,s){return i.createdAt!=""&&s.createdAt!=""?new Date(i.createdAt).toISOString().localeCompare(new Date(s.createdAt).toISOString()):-1}},{title:m.FD.format("listUpdatedAt"),search:!1,width:180,render:function(i,s,v,u,_){return(0,T.NF)(s.renewAt)}},{title:m.FD.format("listManage"),width:100,search:!1,fixed:"right",hidden:!z.canSeeContainerDomainManage,render:function(i,s,v,u,_){return(0,o.jsxs)(W.Z,{split:(0,o.jsx)(I.Z,{type:"vertical"}),children:[(0,o.jsx)(x.Z.Link,{onClick:function(){var r;return(r=Z.current)===null||r===void 0||r.edit(s),!0},children:(0,o.jsx)(y.Z,{title:m.FD.format("listManageEdit"),children:(0,o.jsx)(O.Z,{})})}),(0,o.jsx)(x.Z.Link,{onClick:h()(d()().mark(function c(){var r,p;return d()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,(0,l.ll)({name:s.mainDomain});case 2:r=D.sent,p=new Blob([r],{type:"application/zip"}),(0,S.saveAs)(p,"cert-"+s.mainDomain+".zip");case 5:case"end":return D.stop()}},c)})),children:(0,o.jsx)(y.Z,{title:m.FD.format("listManageDownload"),children:(0,o.jsx)(n.Z,{})})},"2")]})}}],request:h()(d()().mark(function M(){var i,s;return d()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,l.dZ)();case 2:return i=u.sent,u.next=5,(0,l.i7)();case 5:return s=u.sent,u.abrupt("return",{data:i.data.list&&i.data.list.map(function(_){var c=!1;return s&&s.data&&s.data.list.map(function(r){r.setting.certName==_.mainDomain&&(c=!0)}),_.inUse=c,_}),success:!0,total:i.data.list.length});case 7:case"end":return u.stop()}},M)})),quickToolbarRender:function(i){var s=i.selectedRows,v=i.finish,u=i.loading;return[(0,o.jsx)(j.Z,{buttonProps:{danger:!0,type:"primary"},confirmProps:{showCommonConfirm:!0},action:h()(d()().mark(function _(){return d()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return u(),r.abrupt("return",(0,l.KK)({name:s.map(function(p){return p.mainDomain})}).finally(function(){v(!0)}));case 2:case"end":return r.stop()}},_)})),onSuccess:function(){var c,r;return!((c=L.current)===null||c===void 0)&&c.reloadAndRest&&((r=L.current)===null||r===void 0||r.reloadAndRest()),!0},onError:function(){var c,r;return!((c=L.current)===null||c===void 0)&&c.reset&&((r=L.current)===null||r===void 0||r.reset()),!0},children:m.FD.format("listManageDeleteBatch")},"batchDelete")]},contextMenu:function(i){var s=i.loading,v=i.finish,u=i.isMultiple,_=i.selectedRow,c=i.selectedRows;return{items:[{type:"group",label:m.FD.format("listManage"),key:"operator",children:[{label:(0,o.jsx)(F.C.ContextMenuItem,{buttonProps:{icon:(0,o.jsx)(O.Z,{}),disabled:u()},action:h()(d()().mark(function r(){var p;return d()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:v(!0),(p=Z.current)===null||p===void 0||p.edit(_);case 2:case"end":return D.stop()}},r)})),children:m.FD.format("listManageEdit")}),key:"edit"},{label:(0,o.jsx)(F.C.ContextMenuItem,{buttonProps:{icon:(0,o.jsx)(n.Z,{}),disabled:u()},action:h()(d()().mark(function r(){var p,P;return d()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return v(!0),K.next=3,(0,l.ll)({name:_.mainDomain});case 3:p=K.sent,P=new Blob([p],{type:"application/zip"}),(0,S.saveAs)(P,"cert-"+_.mainDomain+".zip");case 6:case"end":return K.stop()}},r)})),children:m.FD.format("listManageDownload")}),key:"download"}]},{key:"delete",label:(0,o.jsx)(F.C.ContextMenuItem,{buttonProps:{icon:(0,o.jsx)(t.Z,{})},type:"danger",confirmProps:{showCommonConfirm:!0},action:h()(d()().mark(function r(){return d()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return s(),P.abrupt("return",(0,l.KK)({name:c.map(function(D){return D.mainDomain})}).finally(function(){v(!0)}));case 2:case"end":return P.stop()}},r)})),children:m.FD.format("listManageDelete")},"deleteBatch")}]}},rowSelection:z.canSeeContainerDomainManage?{defaultSelectedRowKeys:[],alwaysShowAlert:!0}:void 0})})}},93162:function(b,g,e){var C,d,w;(function(h,R){d=[],C=R,w=typeof C=="function"?C.apply(g,d):C,w!==void 0&&(b.exports=w)})(this,function(){"use strict";function h(n,t){return typeof t=="undefined"?t={autoBom:!1}:typeof t!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(n.type)?new Blob(["\uFEFF",n],{type:n.type}):n}function R(n,t,E){var a=new XMLHttpRequest;a.open("GET",n),a.responseType="blob",a.onload=function(){O(a.response,t,E)},a.onerror=function(){console.error("could not download file")},a.send()}function U(n){var t=new XMLHttpRequest;t.open("HEAD",n,!1);try{t.send()}catch(E){}return 200<=t.status&&299>=t.status}function j(n){try{n.dispatchEvent(new MouseEvent("click"))}catch(E){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(t)}}var l=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof e.g=="object"&&e.g.global===e.g?e.g:void 0,T=l.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),O=l.saveAs||(typeof window!="object"||window!==l?function(){}:"download"in HTMLAnchorElement.prototype&&!T?function(n,t,E){var a=l.URL||l.webkitURL,f=document.createElement("a");t=t||n.name||"download",f.download=t,f.rel="noopener",typeof n=="string"?(f.href=n,f.origin===location.origin?j(f):U(f.href)?R(n,t,E):j(f,f.target="_blank")):(f.href=a.createObjectURL(n),setTimeout(function(){a.revokeObjectURL(f.href)},4e4),setTimeout(function(){j(f)},0))}:"msSaveOrOpenBlob"in navigator?function(n,t,E){if(t=t||n.name||"download",typeof n!="string")navigator.msSaveOrOpenBlob(h(n,E),t);else if(U(n))R(n,t,E);else{var a=document.createElement("a");a.href=n,a.target="_blank",setTimeout(function(){j(a)})}}:function(n,t,E,a){if(a=a||open("","_blank"),a&&(a.document.title=a.document.body.innerText="downloading..."),typeof n=="string")return R(n,t,E);var f=n.type==="application/octet-stream",W=/constructor/i.test(l.HTMLElement)||l.safari,B=/CriOS\/[\d]+/.test(navigator.userAgent);if((B||f&&W||T)&&typeof FileReader!="undefined"){var I=new FileReader;I.onloadend=function(){var A=I.result;A=B?A:A.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=A:location=A,a=null},I.readAsDataURL(n)}else{var x=l.URL||l.webkitURL,y=x.createObjectURL(n);a?a.location=y:location.href=y,a=null,setTimeout(function(){x.revokeObjectURL(y)},4e4)}});l.saveAs=O.saveAs=O,b.exports=O})}}]);
