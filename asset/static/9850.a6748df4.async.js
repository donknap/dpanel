"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9850],{27166:function($,C,e){var R=e(97857),t=e.n(R),P=e(5574),E=e.n(P),g=e(13769),h=e.n(g),p=e(184),v=e(74330),d=e(67294),i=e(85893),m=["requestLoading"],n=(0,d.forwardRef)(function(D,u){var W=D.requestLoading,c=h()(D,m),r=(0,d.useState)(!1),s=E()(r,2),o=s[0],_=s[1];return(0,d.useImperativeHandle)(u,function(){return{loading:function(){_(!0)},finish:function(){_(!1)}}}),(0,i.jsx)(p.a,t()(t()({},c),{},{children:(0,i.jsx)(v.Z,{spinning:o!=null?o:D.requestLoading,size:"default",style:{marginTop:"30%"},children:D.children})}))});C.Z=n},81366:function($,C,e){var R=e(97857),t=e.n(R),P=e(19632),E=e.n(P),g=e(5574),h=e.n(g),p=e(27254),v=e(42075),d=e(85418),i=e(25593),m=e(83622),n=e(67294),D=e(31112),u=e(85893),W={title:"/",path:"/"},c=(0,n.forwardRef)(function(r,s){var o=(0,n.useContext)(D.Z),_=o.showPath,L=o.redirectPath,k=(0,n.useState)([W]),y=h()(k,2),A=y[0],a=y[1];(0,n.useImperativeHandle)(s,function(){return{addHistory:function(O,j){console.log(O,j),j=="/"?a([W]):a([].concat(E()(A),[{title:O,path:j}]))},initHistory:function(O,j){a([t()(t()({},W),{},{children:j})].concat(E()(O)))}}});var H=function(O){_?_(A[O].title,A[O].path):r.showPath&&r.showPath(A[O].title,A[O].path);var j=A.filter(function(S,w){return w<=O});a(E()(j))};return(0,u.jsxs)(v.Z,{children:[(0,u.jsx)(v.Z.Compact,{children:A.map(function(B,O){return B.children?(0,u.jsxs)(d.Z.Button,{menu:{items:B.children.map(function(j,S){return{key:S,label:(0,u.jsx)(i.Z.Link,{onClick:function(){L(j)},children:j},S)}})},type:"dashed",onClick:function(S){H(O)},children:[(0,u.jsx)(p.Z,{})," ",B.title]},O):(0,u.jsx)(m.ZP,{icon:(0,u.jsx)(p.Z,{}),type:"dashed",onClick:function(){H(O)},children:B.title},O)})}),A.length>=2&&(0,u.jsx)(i.Z.Text,{copyable:{text:A[A.length-1].path}})]})});C.Z=c},31112:function($,C,e){var R=e(67294),t=(0,R.createContext)({});C.Z=t},68536:function($,C,e){e.d(C,{Z:function(){return m}});var R=e(24963),t=e(36146),P=e(93613),E=e(36693),g=e(2741),h=e(25593),p=e(42075),v=e(67294),d=e(85893),i=0;function m(n){var D=(0,v.useContext)(R.Z),u=D.message,W=new t.Uo("components.explorer");return n.isDir?(0,d.jsx)(h.Z.Link,{onClick:function(){n.onClick&&n.onClick()},children:(0,d.jsxs)(p.Z,{children:[(0,d.jsx)(P.Z,{}),n.showName]})}):n.isLink?(0,d.jsx)(h.Z.Link,{onClick:function(){n.onClick&&n.onClick()},children:(0,d.jsxs)(p.Z,{children:[(0,d.jsx)(E.Z,{}),n.showName]})}):(0,d.jsx)(h.Z.Text,{onClick:function(){if(i++,i==2){i=0,n.onClick&&n.onClick();return}setTimeout(function(){i==1&&u.info(W.format("fileNameMessageViewDetail")),i=0},400)},style:{cursor:"pointer"},children:(0,d.jsxs)(p.Z,{children:[(0,d.jsx)(g.Z,{}),n.showName]})})}},92754:function($,C,e){var R=e(5574),t=e.n(R),P=e(67294),E=e(82346),g=e(38703),h=e(85893),p=(0,P.forwardRef)(function(v,d){var i=(0,P.useState)(""),m=t()(i,2),n=m[0],D=m[1];(0,P.useImperativeHandle)(d,function(){return{setFinish:function(){s({finish:{downloading:100,extracting:100}})},setStart:function(_){_&&D(_),s({start:{downloading:0,extracting:0}})},close:function(){u.progress.close("image:pull:"+n),s({start:{downloading:0,extracting:0}})}}});var u=(0,E.useModel)("subscriber");u.addDataHandler("image:pull:"+n,function(o){s(o.data)});var W=(0,P.useState)(),c=t()(W,2),r=c[0],s=c[1];return(0,P.useEffect)(function(){return s({start:{downloading:0,extracting:0}}),function(){u.progress.close("image:pull:"+n)}},[]),(0,h.jsx)(h.Fragment,{children:r&&Object.keys(r).map(function(o){return(0,h.jsx)(g.Z,{format:function(L){return"".concat(L,"%")},percent:r[o].downloading,success:{percent:r[o].extracting}},o)})})});C.Z=p},47248:function($,C,e){var R=e(15009),t=e.n(R),P=e(99289),E=e.n(P),g=e(5574),h=e.n(g),p=e(38345),v=e(97269),d=e(5966),i=e(62370),m=e(64317),n=e(83622),D=e(85265),u=e(25593),W=e(42075),c=e(67294),r=e(92754),s=e(82346),o=e(2205),_=e(3616),L=e(36146),k=e(23430),y=e(68297),A=e(77342),a=e(85893),H=(0,c.forwardRef)(function(B,O){var j=(0,c.useState)(!1),S=h()(j,2),w=S[0],x=S[1],N=(0,c.useRef)(),b=(0,c.useRef)(),K=(0,c.useState)(!1),I=h()(K,2),T=I[0],F=I[1],M=new L.Uo("components.imagePull");return(0,c.useImperativeHandle)(O,function(){return{upgradeImage:function(l){var f;return x(!0),(f=N.current)===null||f===void 0||f.setFieldValue("imageUrl",l),(0,y.Ze)({tag:l,type:"pull"})},setImageName:function(l){var f;x(!0),(f=N.current)===null||f===void 0||f.setFieldValue("imageUrl",l)}}}),[(0,a.jsx)(n.ZP,{type:B.buttonType?B.buttonType:"default",icon:(0,a.jsx)(k.Z,{}),onClick:function(){var l,f;x(!0),(l=N.current)===null||l===void 0||l.resetFields(),(f=b.current)===null||f===void 0||f.setStart("")},children:M.format("triggerButton")},"remoteBtn"),(0,a.jsxs)(D.Z,{forceRender:!0,open:w,title:M.format("drawerTitle"),width:_.R_,onClose:function(){var l;x(!1),(l=b.current)===null||l===void 0||l.close()},footer:!1,children:[(0,a.jsx)(p.Z,{children:(0,a.jsx)(u.Z.Text,{children:(0,a.jsxs)("ul",{style:{lineHeight:"30px"},children:[(0,a.jsxs)("li",{children:[M.format("tip.1")," ",(0,a.jsx)("a",{href:"https://hub.docker.com/",target:"_blank",children:L.FD.format("help")})]}),(0,a.jsxs)("li",{children:[M.format("tip.2")," ",(0,a.jsx)("a",{href:"https://hub.docker.com/search?q=",target:"_blank",children:L.FD.format("help")})]}),(0,a.jsxs)("li",{children:[M.format("tip.3")," "]}),(0,a.jsxs)("li",{children:[M.format("tip.4")," ",(0,a.jsx)(s.Link,{to:"/image/registry",children:L.Ob.format("image.registry.create")})]}),(0,a.jsxs)("li",{children:[M.format("tip.5")," ",(0,a.jsx)(s.Link,{to:"/image/registry",children:L.Ob.format("image.registry")})]})]})})}),(0,a.jsx)(p.Z,{title:M.format("triggerButton"),headerBordered:!0,children:(0,a.jsxs)(v.A,{formRef:N,submitter:!1,isKeyPressSubmit:!0,onFinish:function(){var U=E()(t()().mark(function l(f){var Z,V,Q,J,G,X;return t()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return G=(Z=f.imageUrl)!==null&&Z!==void 0?Z:"",f.registryUrl&&(G="".concat(f.registryUrl,"/").concat(G)),console.log(f,G),F(!0),(V=b.current)===null||V===void 0||V.setStart(G),z.next=7,(0,y.Ze)({tag:(0,A.Z)(G," "),type:"pull",platform:(Q=f.platform)!==null&&Q!==void 0?Q:""}).finally(function(){F(!1)});case 7:return X=z.sent,(J=b.current)===null||J===void 0||J.setFinish(),x(!1),B.onFinish&&B.onFinish(X.data.tag),z.abrupt("return",!0);case 12:case"end":return z.stop()}},l)}));return function(l){return U.apply(this,arguments)}}(),children:[(0,a.jsx)(d.Z,{name:"registryUrl",hidden:!0}),(0,a.jsxs)(W.Z.Compact,{children:[(0,a.jsx)(i.Z,{shouldUpdate:!0,children:function(l){return(0,a.jsx)(o.Z,{width:"150px",onChange:function(Z){l.setFieldValue("registryUrl",Z?Z.serverAddress:"")}})}}),(0,a.jsx)(d.Z,{disabled:T,width:270,name:"imageUrl",placeholder:M.format("imageUrlEmpty"),required:!0,rules:[{required:!0}]}),(0,a.jsx)(m.Z,{name:"platform",style:{width:100},placeholder:M.format("imagePlatformEmpty"),options:y.ii.map(function(U){return{label:U.name,value:U.name}})}),(0,a.jsx)(n.ZP,{loading:T,onClick:E()(t()().mark(function U(){var l;return t()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:(l=N.current)===null||l===void 0||l.submit();case 1:case"end":return Z.stop()}},U)})),children:M.format("triggerButton")}),(0,a.jsx)(n.ZP,{danger:!0,onClick:function(){var l;(l=b.current)===null||l===void 0||l.close()},children:L.FD.format("listManageKill")})]}),(0,a.jsx)(i.Z,{label:M.format("progressTitle"),children:(0,a.jsx)(r.Z,{ref:b})})]})})]},"remoteDrawer")]});C.Z=H},80271:function($,C,e){var R=e(15009),t=e.n(R),P=e(99289),E=e.n(P),g=e(5574),h=e.n(g),p=e(184),v=e(9773),d=e(83062),i=e(67294),m=e(68536),n=e(5251),D=e(81366),u=e(3616),W=e(36146),c=e(73813),r=e(85893),s=(0,i.forwardRef)(function(o,_){(0,i.useImperativeHandle)(_,function(){return{show:function(){}}});var L=(0,i.useState)(""),k=h()(L,2),y=k[0],A=k[1],a=(0,i.useState)(!1),H=h()(a,2),B=H[0],O=H[1],j=(0,i.useRef)(),S=(0,i.useRef)(),w=function(K,I){var T,F,M;A(I),(T=S.current)===null||T===void 0||T.addHistory(K,I),!((F=j.current)===null||F===void 0)&&F.reloadAndRest&&((M=j.current)===null||M===void 0||M.reloadAndRest())},x=new W.Uo("components.explorer"),N=new W.Uo("image");return(0,r.jsx)(p.a,{drawerProps:{width:u.R_,destroyOnHidden:!0},open:B,submitter:!1,title:N.format("fileTitle"),onOpenChange:function(K){O(K),A(K?"/":"")},trigger:(0,r.jsx)(d.Z,{title:N.format("fileTitle"),children:o.trigger}),children:(0,r.jsx)(v.Z,{headerTitle:(0,r.jsx)(D.Z,{ref:S,showPath:w}),scroll:{x:"max-content"},search:!1,rowKey:"name",pagination:{pageSize:500,position:["topRight","bottomRight"]},actionRef:j,request:E()(t()().mark(function b(){var K;return t()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(y!=""){T.next=2;break}return T.abrupt("return",{data:[],total:0,success:!0});case 2:return T.next=4,(0,c.cD)({md5:o.imageId,path:y});case 4:return K=T.sent,T.abrupt("return",{data:K.data.info,total:K.data.info.length,success:!0});case 6:case"end":return T.stop()}},b)})),columns:[{title:x.format("listName"),dataIndex:"showName",key:"name",render:function(U,I,T,F,M){var U,l=(0,n.fi)(I.name.replace(y,""),"/");return I.isDir?U=(0,r.jsx)(m.Z,{isDir:!0,onClick:function(){return w(l,I.path)},showName:l}):I.isSymlink?U=(0,r.jsx)(m.Z,{isLink:!0,showName:l}):U=(0,r.jsx)(m.Z,{showName:l}),U}},{title:x.format("listModStr"),dataIndex:"modStr",key:"modStr"},{title:x.format("listUser"),dataIndex:"user"},{title:x.format("listGroup"),dataIndex:"group"},{title:x.format("listSize"),dataIndex:"size",key:"size",render:function(K,I,T,F,M){return(0,n.FI)(I.size)}},{title:x.format("listModTime"),dataIndex:"modTime",key:"modTime",render:function(K,I,T,F,M){return(0,n.NF)(I.modTime)},sorter:function(K,I){return new Date(K.modTime).getTime()-new Date(I.modTime).getTime()}}],cardProps:{ghost:!0}},"".concat(o.imageId))})});C.Z=s},2205:function($,C,e){e.d(C,{Z:function(){return i}});var R=e(97857),t=e.n(R),P=e(5574),E=e.n(P),g=e(75870),h=e(36146),p=e(34041),v=e(67294),d=e(85893);function i(m){var n=(0,v.useState)([]),D=E()(n,2),u=D[0],W=D[1],c=new h.Uo("components.selectRegistry");(0,v.useEffect)(function(){(0,g.Ot)().then(function(s){s&&W(s.data.list)})},[]);var r={};return m.multiple&&(r.mode="multiple"),m.top&&(r.placement="topLeft"),(0,d.jsx)(p.Z,t()({popupMatchSelectWidth:!m.width,style:m.width?{width:m.width}:{},onChange:function(o){if(Array.isArray(o)){var _=o.map(function(L){return u[L]});m.onChangeList&&m.onChangeList(_)}else m.onChange&&m.onChange(u[o])},placeholder:c.format("nameEmpty"),options:u.map(function(s,o){return{value:o,label:s.title+"("+s.serverAddress+")"}}),allowClear:!0},r))}},68297:function($,C,e){e.d(C,{Qd:function(){return d},Ze:function(){return p},aw:function(){return W},cV:function(){return m},fy:function(){return D},ii:function(){return h}});var R=e(15009),t=e.n(R),P=e(99289),E=e.n(P),g=e(82346),h=[{name:"amd64",arch:"amd64",search:["amd64","x86_64","86_64"]},{name:"arm64",arch:"arm64",search:["arm64","arrch64"]},{name:"i386",arch:"386",search:[]},{name:"arm/v6",arch:"arm",search:[]},{name:"arm/v7",arch:"arm",search:[]},{name:"arm/v8",arch:"arm64",search:[]},{name:"ppc64le",arch:"ppc64le",search:[]},{name:"riscv64",arch:"riscv64",search:[]}];function p(r){return v.apply(this,arguments)}function v(){return v=E()(t()().mark(function r(s){return t()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,g.request)("/api/app/image/tag-sync",{method:"POST",data:s}));case 1:case"end":return _.stop()}},r)})),v.apply(this,arguments)}function d(r){return i.apply(this,arguments)}function i(){return i=E()(t()().mark(function r(s){return t()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,g.request)("/api/app/image/tag-add",{method:"POST",data:s}));case 1:case"end":return _.stop()}},r)})),i.apply(this,arguments)}function m(r){return n.apply(this,arguments)}function n(){return n=E()(t()().mark(function r(s){return t()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,g.request)("/api/app/image/tag-delete",{method:"POST",data:s}));case 1:case"end":return _.stop()}},r)})),n.apply(this,arguments)}function D(r){return u.apply(this,arguments)}function u(){return u=E()(t()().mark(function r(s){return t()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,g.request)("/api/app/image/tag-push-batch",{method:"POST",data:s}));case 1:case"end":return _.stop()}},r)})),u.apply(this,arguments)}function W(r){return c.apply(this,arguments)}function c(){return c=E()(t()().mark(function r(s){return t()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,g.request)("/api/pro/image/get-remote-tag",{method:"POST",data:s}));case 1:case"end":return _.stop()}},r)})),c.apply(this,arguments)}}}]);
