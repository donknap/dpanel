"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3905],{8287:function(Ue,Ce,n){var Re=n(5574),C=n.n(Re),Me=n(15009),a=n.n(Me),ue=n(99289),j=n.n(ue),r=n(13822),ee=n(83622),N=n(85265),k=n(42075),U=n(83062),P=n(67294),oe=n(81146),Z=n(1883),O=n(58638),_e=n(62597),c=n(3616),b=n(82346),R=n(36146),ve=n(85893),ne=(0,P.forwardRef)(function(Pe,Le){(0,P.useImperativeHandle)(Le,function(){return{show:function(X){return j()(a()().mark(function S(){var ie;return a()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.next=2,(0,r.jV)({md5:X});case 2:ie=Y.sent,ie.data&&Fe(ie.data.info),ge(!0);case 5:case"end":return Y.stop()}},S)}))()}}});var s=(0,P.useState)(!1),e=C()(s,2),he=e[0],ge=e[1],Te=(0,P.useState)(),E=C()(Te,2),J=E[0],Fe=E[1],L=(0,P.useRef)(),pe=new R.Uo("components.appDetail");return(0,ve.jsxs)(ve.Fragment,{children:[Pe.showTriggerButton&&(0,ve.jsx)(ee.ZP,{icon:(0,ve.jsx)(Z.Z,{}),onClick:j()(a()().mark(function ce(){return a()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:Fe(Pe.containerInfo),ge(!0);case 2:case"end":return S.stop()}},ce)})),children:R.FD.format("listManageLog")},"log"),(0,ve.jsx)(N.Z,{title:pe.format("titleLog"),open:he,forceRender:!0,onClose:function(){ge(!1)},afterOpenChange:function(X){if(X)setTimeout(function(){var ie,te;(ie=L.current)===null||ie===void 0||ie.start(),(te=L.current)===null||te===void 0||te.fit()},1e3);else{var S;(S=L.current)===null||S===void 0||S.close()}},width:c.FK,extra:(0,ve.jsx)(k.Z,{children:(0,ve.jsx)(b.Link,{to:"/container/log/".concat(J==null?void 0:J.Name),target:"_blank",onClick:function(){var X;(X=L.current)===null||X===void 0||X.close(),ge(!1)},children:(0,ve.jsx)(U.Z,{title:R.FD.format("listManageOpenNewWindow"),children:(0,ve.jsx)(O.Z,{})})})}),children:J&&he&&(0,ve.jsx)(oe.Z,{ref:L,showInDrawer:!0,id:"container:log:".concat(J==null?void 0:J.Id),request:function(){var ce=j()(a()().mark(function X(S){var ie;return a()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.next=2,(0,_e.Tb)({id:(ie=J.Id)!==null&&ie!==void 0?ie:"",lineTotal:S.lineTotal,download:S.download,showTime:S.showTime});case 2:case"end":return Y.stop()}},X)}));return function(X){return ce.apply(this,arguments)}}(),download:function(){var ce=j()(a()().mark(function X(S){var ie,te,Y,be;return a()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=2,(0,_e.XH)({id:(ie=J.Id)!==null&&ie!==void 0?ie:"",lineTotal:S.lineTotal,showTime:S.showTime});case 2:return Y=W.sent,W.next=5,(0,r.jV)({md5:(te=J.Id)!==null&&te!==void 0?te:""});case 5:return be=W.sent,W.abrupt("return",{data:new Blob([Y],{type:"text/plain"}),name:be.data.info.Name.replaceAll("/","")+"_"+new Date().toLocaleDateString()+".log"});case 7:case"end":return W.stop()}},X)}));return function(X){return ce.apply(this,arguments)}}()})})]})});Ce.Z=ne},3905:function(Ue,Ce,n){n.d(Ce,{Z:function(){return ot}});var Re=n(5574),C=n.n(Re),Me=n(15009),a=n.n(Me),ue=n(99289),j=n.n(ue),r=n(67294),ee=n(45605),N=n(38345),k=n(97269),U=n(26412),P=n(42075),oe=n(96074),Z=n(25593),O=n(2487),_e=n(76428),c=n(44771),b=n(13822),R=n(24963),ve=n(37413),ne=n(5251),Pe=n(82346),Le=n(87662),s=n(36146),e=n(85893);function he(t){var y,o,i,g,F,p,l,m,_,D,d,I=new s.Uo("components.appDetail"),M=(0,r.useState)(""),x=C()(M,2),re=x[0],$=x[1],B=(0,Pe.useAccess)(),w=(0,r.useContext)(R.Z),Ie=w.message,De=(0,r.useRef)(),f=[],Ee=[],Ae=[],Ve=(0,r.useState)(""),H=C()(Ve,2),v=H[0],T=H[1];return(0,r.useEffect)(function(){t.data&&((0,Le.K3)().then(function(u){var h;T((h=u.data.serverUrl)!==null&&h!==void 0?h:"")}),$(t.data.info.Name))},[t.data]),(0,r.useEffect)(function(){var u,h,K;(u=De.current)===null||u===void 0||u.setFieldValue("restart",{name:(h=t.data.info.HostConfig)===null||h===void 0?void 0:h.RestartPolicy.Name,maxAccept:(K=t.data.info.HostConfig)===null||K===void 0?void 0:K.RestartPolicy.MaximumRetryCount})},[De.current,t.data]),t.data&&t.data.domain&&t.data.domain.map(function(u){Ae.push(u.setting.enableSSL?"https://"+u.serverName:"http://"+u.serverName)}),t.data.info.NetworkSettings.Ports&&Object.entries(t.data.info.NetworkSettings.Ports).forEach(function(u){var h=C()(u,2),K=h[0],A=h[1];if(A){var xe=K.split("/"),le=C()(xe,2),de=le[0],we=le[1];A.forEach(function(tn){tn.HostPort?f.push({PrivatePort:de,Type:we,IP:tn.HostIp,PublicPort:tn.HostPort}):Ee.push({PrivatePort:de,Type:we,IP:"",PublicPort:""})})}}),(0,e.jsxs)(e.Fragment,{children:[t.data&&t.data.info.State.Running&&(0,e.jsx)(ve.Z,{publicPort:f,privatePort:Ee,domain:Ae,serverIp:v,showInDetail:!0,ghost:t.ghost,layout:"inline"}),(0,e.jsx)(N.Z,{title:(0,e.jsx)(ee.Z,{}),subTitle:I.format("titleBasic"),ghost:t.ghost,children:(0,e.jsxs)(U.Z,{column:1,bordered:!0,children:[(0,e.jsx)(U.Z.Item,{label:"Hostname",children:(0,e.jsx)(P.Z,{split:(0,e.jsx)(oe.Z,{type:"vertical"}),children:(0,e.jsx)(_e.Z,{title:(y=t.data.info)===null||y===void 0?void 0:y.Config.Hostname})})}),(0,e.jsx)(U.Z.Item,{label:s.FD.format("listName"),children:(0,e.jsxs)(P.Z,{split:(0,e.jsx)(oe.Z,{type:"vertical"}),children:[(0,e.jsx)(_e.Z,{title:(o=t.data.info)===null||o===void 0?void 0:o.Id.substring(0,12)}),(0,e.jsx)(Z.Z.Text,{copyable:!0,editable:{tooltip:s.FD.format("listManageEdit"),onChange:function(){var u=j()(a()().mark(function K(A){var xe;return a()().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:if((xe=t.data.info)!==null&&xe!==void 0&&xe.Id){de.next=2;break}return de.abrupt("return");case 2:return de.next=4,(0,b.eE)({md5:t.data.info.Id,name:A});case 4:$(A),Ie.success(s.FD.format("finish"));case 6:case"end":return de.stop()}},K)}));function h(K){return u.apply(this,arguments)}return h}()},children:(0,ne.fi)(re,"/")})]})}),(0,e.jsx)(U.Z.Item,{label:s.FD.format("listNetwork"),children:((i=t.data.info)===null||i===void 0?void 0:i.State.Running)&&(0,e.jsxs)(U.Z,{column:1,bordered:!0,children:[t.data.info.NetworkSettings.Networks&&Object.keys(t.data.info.NetworkSettings.Networks).map(function(u,h){var K,A,xe;return(0,e.jsx)(U.Z.Item,{label:u,children:u=="host"?s.FD.format("listNetworkUseHost"):(0,e.jsxs)(P.Z,{direction:"vertical",children:[(0,e.jsx)(_e.Z,{title:(K=t.data.info)===null||K===void 0?void 0:K.NetworkSettings.Networks[u].IPAddress}),(A=t.data.info)===null||A===void 0?void 0:A.NetworkSettings.Networks[u].Gateway,(xe=t.data.info)===null||xe===void 0?void 0:xe.NetworkSettings.Networks[u].MacAddress]})},h)}),((g=t.data.info.HostConfig)===null||g===void 0?void 0:g.ExtraHosts)&&(0,e.jsx)(U.Z.Item,{label:s.FD.format("listNetworkUseHost"),children:(0,e.jsx)(P.Z,{direction:"vertical",children:t.data.info.HostConfig.ExtraHosts.map(function(u,h){if(u.indexOf(":")>-1){var K=u.split(":");return"".concat(K[0]," - ").concat(K.slice(1).join(":"))}})})},"host")]})}),(0,e.jsx)(U.Z.Item,{label:s.FD.format("listRunTime"),children:I.format("runTimeValue",{create:new Date((F=(p=t.data.info)===null||p===void 0?void 0:p.Created)!==null&&F!==void 0?F:"").toLocaleString(),upgrade:new Date((l=(m=t.data.info)===null||m===void 0?void 0:m.State.StartedAt)!==null&&l!==void 0?l:"").toLocaleString()})}),B.canSeeContainerListManage&&(0,e.jsx)(U.Z.Item,{label:s.FD.format("listRestartPolicy"),children:(0,e.jsx)(k.A,{name:"container-restart",submitter:!1,onValuesChange:function(){var u=j()(a()().mark(function h(K,A){var xe,le;return a()().wrap(function(we){for(;;)switch(we.prev=we.next){case 0:if((xe=t.data.info)!==null&&xe!==void 0&&xe.Id){we.next=2;break}return we.abrupt("return");case 2:return we.next=4,(0,b.eE)({md5:t.data.info.Id,restart:A.restart});case 4:return le=we.sent,Ie.success(s.FD.format("finish")),we.abrupt("return");case 7:case"end":return we.stop()}},h)}));return function(h,K){return u.apply(this,arguments)}}(),layout:"inline",formRef:De,children:(0,e.jsx)(c.Z,{ghost:!0,defaultValue:(_=t.data.info)===null||_===void 0||(_=_.HostConfig)===null||_===void 0?void 0:_.RestartPolicy.Name})})}),(0,e.jsx)(U.Z.Item,{label:s.FD.format("listEnv"),children:(0,e.jsx)(O.Z,{dataSource:(D=(d=t.data.info)===null||d===void 0?void 0:d.Config.Env)!==null&&D!==void 0?D:[],renderItem:function(h){var K=h.split("=");return(0,e.jsxs)(O.Z.Item,{children:[(0,e.jsx)(Z.Z.Text,{code:!0,children:K[0]})," = ",(0,e.jsx)(Z.Z.Text,{copyable:!0,children:K.slice(1).join("=")})]})}})})]})})]})}var ge=n(60433),Te=n(85265),E=n(86250),J=n(31574);function Fe(t){var y,o=new s.Uo("components.appDetail");return t.data&&t.data.Mounts&&t.data.Mounts.length>0&&(0,e.jsx)(N.Z,{ghost:t.ghost,title:(0,e.jsx)(J.Z,{}),subTitle:o.format("titleVolume"),children:(0,e.jsx)(U.Z,{column:1,bordered:!0,children:(y=t.data)===null||y===void 0?void 0:y.Mounts.map(function(i,g){return(0,e.jsx)(U.Z.Item,{styles:{label:{width:"50%",wordBreak:"break-word"},content:{width:"50%",wordBreak:"break-word"}},label:i.Type=="volume"?i.Name:i.Source,children:i.Destination},g)})})})}var L=n(43425),pe=n(74842),ce=n(33160),X=n(87784),S=n(30159),ie=n(89035),te=n(95591),Y=n(83622),be=n(94359),G=n(80821),W=n(99922),z=n(96486),Ke=n.n(z),ye=n(29463),me=n(8287),fe=(0,r.createContext)({}),q=fe,ke=n(19632),Q=n.n(ke),se=n(3616),V=n(12122),Ze=n(60940),je=n(27619);function Oe(t){return ae.apply(this,arguments)}function ae(){return ae=j()(a()().mark(function t(y){return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,Pe.request)("/dpanel/api/app/container/get-stat-info",{method:"POST",data:y}));case 1:case"end":return i.stop()}},t)})),ae.apply(this,arguments)}function $e(t){return Se.apply(this,arguments)}function Se(){return Se=j()(a()().mark(function t(y){return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,Pe.request)("/dpanel/api/app/container/get-process-info",{method:"POST",data:y}));case 1:case"end":return i.stop()}},t)})),Se.apply(this,arguments)}var Ne={total:0,memory:{usage:[{name:"use",data:[]},{name:"all",show:!1,data:[]}],source:{usage:0,limit:0}},cpu:{usage:[{name:"use",data:[]}],source:{usage:0,limit:0}},network:{usage:[{name:"rx",data:[]},{name:"tx",data:[]}],source:{usageIn:0,usageOut:0}},io:{usage:[{name:"read",data:[]},{name:"write",data:[]}],source:{usageRead:0,usageWrite:0}}},He=function(y,o){var i,g,F;switch(o.type){case"clear":return Ne;case"update":var p=new Date().toLocaleTimeString(),l=JSON.parse(JSON.stringify(Ne));return(i=o.payload)!==null&&i!==void 0&&i.memory&&(l.memory.usage=[{name:"use",data:[].concat(Q()(y.memory.usage[0].data.slice(-20)),[{date:p,value:Math.round(o.payload.memory.in)}])},{name:"all",show:!1,data:[].concat(Q()(y.memory.usage[1].data.slice(-20)),[{date:p,value:Math.round(o.payload.memory.out)}])}],l.memory.source={usage:o.payload.memory.in,limit:o.payload.memory.out},l.cpu.usage=[{name:"use",data:[].concat(Q()(y.cpu.usage[0].data.slice(-20)),[{date:p,value:o.payload.cpu.toFixed(2)}])}],l.cpu.source={usage:o.payload.cpu,limit:100}),(g=o.payload)!==null&&g!==void 0&&g.networkIO&&(l.network.source={usageIn:parseFloat(o.payload.networkIO.in.toFixed(2)),usageOut:parseFloat(o.payload.networkIO.out.toFixed(2))},l.network.usage=[{name:"rx",data:[].concat(Q()(y.network.usage[0].data.slice(-20)),[{date:p,value:o.payload.networkIO.out.toFixed(2)}])},{name:"tx",data:[].concat(Q()(y.network.usage[1].data.slice(-20)),[{date:p,value:o.payload.networkIO.in.toFixed(2)}])}]),(F=o.payload)!==null&&F!==void 0&&F.blockIO&&(l.io.source={usageRead:parseFloat(o.payload.blockIO.out.toFixed(2)),usageWrite:parseFloat(o.payload.blockIO.in.toFixed(2))},l.io.usage=[{name:"read",data:[].concat(Q()(y.io.usage[0].data.slice(-20)),[{date:p,value:o.payload.blockIO.out.toFixed(2)}])},{name:"write",data:[].concat(Q()(y.io.usage[1].data.slice(-20)),[{date:p,value:o.payload.blockIO.in.toFixed(2)}])}]),l}},ln=(0,r.forwardRef)(function(t,y){var o=(0,r.useState)(!1),i=C()(o,2),g=i[0],F=i[1],p=(0,r.useReducer)(He,Ne),l=C()(p,2),m=l[0],_=l[1],D=(0,r.useState)(),d=C()(D,2),I=d[0],M=d[1],x=(0,r.useContext)(R.Z),re=x.loading,$=(0,Pe.useModel)("subscriber"),B=new s.Uo("components.appDetail");(0,r.useImperativeHandle)(y,function(){return{}});function w(De){return Ie.apply(this,arguments)}function Ie(){return Ie=j()(a()().mark(function De(f){var Ee,Ae;return a()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return re.show(),Oe({id:f}),H.next=4,$e({id:f});case 4:Ee=H.sent,Ae={columns:[],data:[]},Ee.data.list.Titles.map(function(v){Ae.columns.push({title:v,label:v,dataIndex:v})}),Ee.data.list.Processes.map(function(v,T){Ae.data.push({UID:v[0],PID:v[1],PPID:v[2],C:v[3],STIME:v[4],TTY:v[5],TIME:v[6],CMD:v[7]})}),M(Ae),re.destroy();case 10:case"end":return H.stop()}},De)})),Ie.apply(this,arguments)}return(0,r.useEffect)(function(){return function(){$.progress.close("container:stat:"+t.containerInfo.Id),_({type:"clear",payload:{}})}},[t.containerInfo]),(0,e.jsxs)(e.Fragment,{children:[t.showTriggerButton&&(0,e.jsx)(Y.ZP,{onClick:j()(a()().mark(function De(){return a()().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:F(!0);case 1:case"end":return Ee.stop()}},De)})),icon:(0,e.jsx)(V.Z,{}),children:s.FD.format("listManageStat")},"log"),(0,e.jsxs)(Te.Z,{title:B.format("titleStat"),open:g,onClose:function(){F(!1)},afterOpenChange:function(f){f?setTimeout(function(){var Ee;!((Ee=t.containerInfo)===null||Ee===void 0)&&Ee.Name&&w(t.containerInfo.Id),$.addDataHandler("container:stat:".concat(t.containerInfo.Id),function(Ae){_({type:"update",payload:Ae.data})})},500):($.progress.close("container:stat:"+t.containerInfo.Id),_({type:"clear"}))},width:se.R_,children:[(0,e.jsxs)(N.Z,{ghost:!0,direction:"row",wrap:!0,gutter:[20,20],children:[m.memory&&m.memory.source&&(0,e.jsx)(N.Z,{colSpan:12,title:(0,e.jsx)(V.Z,{}),subTitle:"Memory usage: ".concat((0,ne.FI)(m.memory.source.usage)," / ").concat((0,ne.FI)(m.memory.source.limit)),headerBordered:!0,bordered:!0,children:(0,e.jsx)(je.Z,{name:"container-memory",data:m.memory.usage,yLabelFormatter:function(f){return(0,ne.FI)(parseFloat(f))},yValueFormatter:function(f){return(0,ne.FI)(parseFloat(f))},yDomainMaxCallback:function(f){return f.min*2}})}),(0,e.jsx)(N.Z,{colSpan:12,title:(0,e.jsx)(V.Z,{}),subTitle:"Cpu usage: ".concat(m.cpu.source.usage.toFixed(2),"%"),headerBordered:!0,bordered:!0,children:(0,e.jsx)(je.Z,{name:"container-cpu",data:m.cpu.usage,yDomainMaxCallback:function(f){return f.min*100},yLabelFormatter:function(f){return"".concat(parseFloat(f).toFixed(2),"%")}})}),m.io&&m.io.source&&(0,e.jsx)(N.Z,{colSpan:12,title:(0,e.jsx)(V.Z,{}),subTitle:"I/O: ".concat((0,ne.FI)(m.io.source.usageRead)," / ").concat((0,ne.FI)(m.io.source.usageWrite)),headerBordered:!0,bordered:!0,children:(0,e.jsx)(je.Z,{name:"container-disk",data:m.io.usage,yDomainMaxCallback:function(f){return f.max*2},yLabelFormatter:function(f){return(0,ne.FI)(parseFloat(f))}})}),m.network&&m.network.source&&(0,e.jsx)(N.Z,{colSpan:12,title:(0,e.jsx)(V.Z,{}),subTitle:"Network: ".concat((0,ne.FI)(m.network.source.usageIn)," / ").concat((0,ne.FI)(m.network.source.usageOut)),headerBordered:!0,bordered:!0,children:(0,e.jsx)(je.Z,{name:"container-network",data:m.network.usage,yDomainMaxCallback:function(f){return f.max*2},yLabelFormatter:function(f){return(0,ne.FI)(parseFloat(f))}})})]}),(0,e.jsx)(N.Z,{title:(0,e.jsx)(ge.Z,{}),subTitle:"Progress",children:(0,e.jsx)(Ze.Z,{scroll:{x:"max-content"},rowKey:"PID",columns:I==null?void 0:I.columns,dataSource:I==null?void 0:I.data,pagination:{pageSize:10}})})]})]})}),dn=ln,un=(0,r.forwardRef)(function(t,y){(0,r.useImperativeHandle)(y,function(){return{showConsole:l}});var o=new s.Uo("components.appDetail"),i=(0,r.useRef)(),g=(0,r.useContext)(q),F=g.reload,p=g.loadingRef;function l(m){var _;(_=i.current)===null||_===void 0||_.show({url:"/console/container/".concat(t.data.Id),title:t.data.Name,workDir:m})}return console.log(t.data.State),(0,e.jsx)(N.Z,{title:(0,e.jsx)(L.Z,{}),ghost:t.ghost,subTitle:(0,e.jsxs)(P.Z,{children:[o.format("titleOp")," - ",function(m){if(m){var _=m.State.Status,D=m.State.Status;if(m.State.Health&&m.State.Health.Status=="unhealthy"){var d,I;_=m.State.Health.Status,D=(d=(I=Ke().last(m.State.Health.Log))===null||I===void 0?void 0:I.Output)!==null&&d!==void 0?d:_}return(0,e.jsx)(be.Z,{status:"container.".concat(_),tip:D})}}(t.data)]}),children:(0,e.jsxs)(P.Z,{wrap:!0,children:[t.data&&!t.data.State.Running&&(0,e.jsx)(G.Z,{buttonProps:{icon:(0,e.jsx)(pe.Z,{})},action:j()(a()().mark(function m(){var _,D,d;return a()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return(_=p.current)===null||_===void 0||_.show(),M.abrupt("return",(0,b.IW)({md5:(D=(d=t.data)===null||d===void 0?void 0:d.Id)!==null&&D!==void 0?D:"",operate:"start"}).finally(function(){var x;(x=p.current)===null||x===void 0||x.destroy()}));case 2:case"end":return M.stop()}},m)})),onSuccess:function(){return F()},children:s.FD.format("listManageStart")}),t.data&&t.data.State.Running&&(0,e.jsx)(G.Z,{buttonProps:{icon:(0,e.jsx)(ce.Z,{})},action:j()(a()().mark(function m(){var _,D,d;return a()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return(_=p.current)===null||_===void 0||_.show(),M.abrupt("return",(0,b.IW)({md5:(D=(d=t.data)===null||d===void 0?void 0:d.Id)!==null&&D!==void 0?D:"",operate:"restart"}).finally(function(){var x;(x=p.current)===null||x===void 0||x.destroy()}));case 2:case"end":return M.stop()}},m)})),onSuccess:function(){return F()},children:s.FD.format("listManageRestart")}),t.data&&t.data.State.Running&&(0,e.jsx)(G.Z,{action:j()(a()().mark(function m(){var _,D,d;return a()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return(_=p.current)===null||_===void 0||_.show(),M.abrupt("return",(0,b.IW)({md5:(D=(d=t.data)===null||d===void 0?void 0:d.Id)!==null&&D!==void 0?D:"",operate:"stop"}).finally(function(){var x;(x=p.current)===null||x===void 0||x.destroy()}));case 2:case"end":return M.stop()}},m)})),buttonProps:{danger:!0,icon:(0,e.jsx)(X.Z,{})},onSuccess:function(){return F()},children:s.FD.format("listManageStop")}),t.data&&t.data.State.Running&&!t.data.State.Paused&&(0,e.jsx)(G.Z,{action:j()(a()().mark(function m(){var _,D,d;return a()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return(_=p.current)===null||_===void 0||_.show(),M.abrupt("return",(0,b.IW)({md5:(D=(d=t.data)===null||d===void 0?void 0:d.Id)!==null&&D!==void 0?D:"",operate:"pause"}).finally(function(){var x;(x=p.current)===null||x===void 0||x.destroy()}));case 2:case"end":return M.stop()}},m)})),onSuccess:function(){return F()},buttonProps:{icon:(0,e.jsx)(S.Z,{})},children:s.FD.format("listManagePause")}),t.data&&t.data.State.Paused&&(0,e.jsx)(G.Z,{action:j()(a()().mark(function m(){var _,D,d;return a()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return(_=p.current)===null||_===void 0||_.show(),M.abrupt("return",(0,b.IW)({md5:(D=(d=t.data)===null||d===void 0?void 0:d.Id)!==null&&D!==void 0?D:"",operate:"unpause"}).finally(function(){var x;(x=p.current)===null||x===void 0||x.destroy()}));case 2:case"end":return M.stop()}},m)})),onSuccess:function(){return F()},buttonProps:{icon:(0,e.jsx)(pe.Z,{})},children:s.FD.format("listManageUnpause")}),t.data&&t.data.State.Running&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(oe.Z,{type:"vertical"}),(0,e.jsx)(W.Z,{showFileExplorer:!0,ref:i}),(0,e.jsx)(Y.ZP,{type:"primary",onClick:function(){t.data&&l(t.data.Config.WorkingDir)},icon:(0,e.jsx)(ie.Z,{}),children:s.FD.format("listManageConsole")}),(0,e.jsx)(ye.Z,{showConsole:!0,type:"container",name:(0,ne.fi)(t.data.Name,"/"),title:(0,ne.fi)(t.data.Name,"/"),trigger:(0,e.jsx)(Y.ZP,{icon:(0,e.jsx)(te.Z,{}),children:s.FD.format("listManageFilePath")})}),(0,e.jsx)(me.Z,{containerInfo:t.data,showTriggerButton:!0}),(0,e.jsx)(dn,{containerInfo:t.data,showTriggerButton:!0})]}),(0,e.jsx)(oe.Z,{type:"vertical"}),(0,e.jsx)(Y.ZP,{type:"dashed",icon:(0,e.jsx)(ce.Z,{}),onClick:function(){F()},children:s.FD.format("listManageRefresh")})]})})}),cn=un,Ge=n(62597),mn=n(86548),fn=n(57132),an=n(82061),rn=n(25035),_n=n(58638),on=n(60219),We=n(62370),vn=n(5966),hn=n(52688),gn=n(85418),pn=n(40411),Be=n(84567),Je=n(83062),jn=n(25278),En=n(24739),sn=n(97462),xn=n(70146);function Pn(t){var y=(0,r.useRef)(),o=new s.Uo("components.appDetail");return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(G.Z,{buttonProps:{icon:(0,e.jsx)(on.Z,{})},confirmProps:{onOpenChange:function(g,F){var p,l;!((p=y.current)===null||p===void 0)&&p.resetFields&&((l=y.current)===null||l===void 0||l.resetFields())},description:(0,e.jsxs)(P.Z,{style:{width:650,marginTop:"10px",paddingRight:"10px"},direction:"vertical",size:20,children:[(0,e.jsx)(Z.Z.Text,{children:(0,e.jsx)("ul",{children:o.prefix("backupVolumeTipOption",4).map(function(i,g){return(0,e.jsxs)("li",{children:[i," ",g==3&&(0,e.jsx)(Pe.Link,{to:"/app/backup",children:s.Ob.format("container.backup")})]},g)})})}),(0,e.jsxs)(k.A,{layout:"horizontal",formRef:y,submitter:!1,children:[(0,e.jsxs)(En.UW,{children:[(0,e.jsx)(We.Z,{valuePropName:"checked",name:"enableSelectVolume",children:(0,e.jsx)(Be.Z,{disabled:!t.container.Mounts||t.container.Mounts.length==0,children:o.format("backupVolumeEnableSelectVolume")})}),(0,e.jsx)(We.Z,{valuePropName:"checked",name:"enableImage",children:(0,e.jsx)(Be.Z,{children:o.format("backupVolumeEnableImage")})}),(0,e.jsx)(sn.Z,{name:["enableImage"],children:function(g){var F=g.enableImage;if(F)return(0,e.jsx)(We.Z,{valuePropName:"checked",name:"enableCommitImage",children:(0,e.jsx)(Be.Z,{children:o.format("backupVolumeEnableCommitImage")})})}})]}),(0,e.jsx)(sn.Z,{name:["enableSelectVolume"],children:function(g){var F=g.enableSelectVolume;return F&&(0,e.jsx)(P.Z,{wrap:!0,children:t.container.Mounts&&t.container.Mounts.map(function(p,l){return(0,e.jsx)(We.Z,{valuePropName:"checked",name:["volume",p.Destination],children:(0,e.jsx)(Be.Z,{children:p.Destination})},"volume-".concat(l))})})}})]})]})},action:j()(a()().mark(function i(){var g,F,p,l;return a()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,xn.yB)({id:t.container.Name,enableImage:(g=y.current)===null||g===void 0?void 0:g.getFieldValue("enableImage"),volume:Object.keys((F=(p=y.current)===null||p===void 0?void 0:p.getFieldValue("volume"))!==null&&F!==void 0?F:{}).filter(function(D){return D}),enableCommitImage:(l=y.current)===null||l===void 0?void 0:l.getFieldValue("enableCommitImage")});case 2:case"end":return _.stop()}},i)})),children:o.format("backupVolumeButton")})})}var Dn=n(99861),Ye=n(73813),On=n(50888),In=n(16596),ze=n(1699),Xe=n(29453),Cn=n(71965);function Rn(t){return qe.apply(this,arguments)}function qe(){return qe=j()(a()().mark(function t(y){return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,Pe.request)("/dpanel/api/pro/container-rollback/get-list",{data:y,method:"POST"});case 2:return i.abrupt("return",i.sent);case 3:case"end":return i.stop()}},t)})),qe.apply(this,arguments)}function Mn(t){return en.apply(this,arguments)}function en(){return en=j()(a()().mark(function t(y){return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,Pe.request)("/dpanel/api/pro/container-rollback/restore",{data:y,method:"POST"});case 2:return i.abrupt("return",i.sent);case 3:case"end":return i.stop()}},t)})),en.apply(this,arguments)}var yn=n(86615),bn=n(40056),Zn=n(89240);function Tn(t){var y=(0,Pe.useAccess)(),o=(0,r.useState)(),i=C()(o,2),g=i[0],F=i[1],p=(0,r.useRef)(),l=new s.Uo("components.appDetail");return(0,r.useEffect)(function(){y.canSeeEnableCe||Rn({siteName:(0,Zn.HJ)(t.detail.Name)}).then(function(m){F(m.data.list)})},[t.detail]),(0,e.jsx)(ze.u,{access:["canSeeEnableCe"],showProTips:!0,showProTipsOffset:y.canSeeEnableCe?[-15,0]:void 0,children:function(_){var D=_.canSeeEnableCe;return(0,e.jsx)(G.Z,{action:function(){var I;return Mn({id:(I=p.current)===null||I===void 0?void 0:I.getFieldValue("id"),enableForce:!0})},buttonProps:{icon:(0,e.jsx)(Cn.Z,{}),disabled:D,style:{marginRight:y.canSeeEnableCe?20:0}},confirmProps:{onOpenChange:function(I,M){var x;!((x=p.current)===null||x===void 0)&&x.resetFields&&p.current.resetFields()},description:(0,e.jsx)(k.A,{formRef:p,submitter:!1,children:(0,e.jsxs)(P.Z,{direction:"vertical",style:{width:500},size:[0,15],children:[(0,e.jsx)(Z.Z.Text,{children:l.format("rollbackTip")}),g&&g.length>0?(0,e.jsx)(yn.Z.Group,{fieldProps:{style:{display:"flex",flexDirection:"column",gap:8}},name:"id",label:"",options:g&&g.map(function(d){return{label:"id: ".concat(d.id," ").concat(s.FD.format("listDeletedAt"),": ").concat((0,ne.NF)(d.deletedAt)),value:d.id}})}):(0,e.jsx)(bn.Z,{message:l.format("rollbackEmptyTip"),style:{marginBottom:10}})]})})},onSuccess:function(){var I;(I=p.current)===null||I===void 0||I.resetFields(),t.onFinish&&t.onFinish()},children:s.FD.format("listManageRollback")})}})}var Sn=n(184),nn=n(14946),Ln=n(9773);function An(t){return(0,e.jsxs)(P.Z,{children:[t.title,(0,e.jsx)(Je.Z,{title:t.help,children:(0,e.jsx)(rn.Z,{})})]})}var wn=n(55943),Un=n(16970),Fn=n(20743),$n=n(78451),Wn=(0,r.forwardRef)(function(t,y){var o;(0,r.useImperativeHandle)(y,function(){return{}});var i=(0,r.useRef)(),g=(0,r.useRef)(),F=(0,r.useState)(),p=C()(F,2),l=p[0],m=p[1];return(0,r.useEffect)(function(){var _,D;m(t.containerInfo),!((_=i.current)===null||_===void 0)&&_.reloadAndRest&&((D=i.current)===null||D===void 0||D.reloadAndRest())},[t.containerInfo]),(0,e.jsxs)(N.Z,{ghost:t.ghost,children:[(0,e.jsx)(wn.Z,{ref:g}),(0,e.jsx)(Ln.Z,{scroll:{x:"max-content"},rowKey:"key",actionRef:i,pagination:!1,ghost:!0,columns:[{title:s.FD.format("listContainerNetworkName"),key:"name",dataIndex:"networkName"},{title:s.FD.format("listContainerName"),key:"containerName",dataIndex:"containerName",width:100,render:function(D,d,I,M,x){return(0,e.jsx)($n.Z,{content:(0,ne.fi)(d.containerName,"/")})}},{title:(0,e.jsx)(An,{title:"hostname",help:s.FD.format("listHostnameTip")}),key:"hostName",render:function(D,d,I){return d.hostName?(0,e.jsx)(P.Z,{direction:"vertical",children:d.hostName.map(function(M,x){if(M)return(0,e.jsx)(Z.Z.Text,{copyable:!0,keyboard:!0,children:M},x)})}):(0,e.jsx)(e.Fragment,{})}},{title:"Ip",key:"ip",render:function(D,d,I,M,x){return(0,e.jsxs)(P.Z,{direction:"vertical",children:[(0,e.jsx)("span",{children:d.networkInfo.IPv4Address}),d.networkInfo.IPv6Address&&(0,e.jsx)("span",{children:d.networkInfo.IPv6Address})]})}},{title:s.FD.format("listManage"),key:"option",width:50,fixed:"right",render:function(D,d,I,M,x){return(0,e.jsxs)(P.Z,{children:[d.networkName!=""&&(0,e.jsx)(Z.Z.Link,{onClick:function(){var $;($=g.current)===null||$===void 0||$.show(d.networkName)},children:(0,e.jsx)(Je.Z,{title:s.FD.format("listManageDetail"),children:(0,e.jsx)(L.Z,{})})}),d.key!="bridge"&&d.key!="none"&&d.key!="host"&&d.networkName!=""&&(0,e.jsx)(G.Z,{buttonProps:{type:"link",danger:!0},confirmProps:{description:"notification.confirm.title"},action:function(){return(0,nn.t9)({name:d.networkName,containerName:t.containerInfo.Name})},onSuccess:function(){var $,B;!(($=i.current)===null||$===void 0)&&$.reloadAndRest&&((B=i.current)===null||B===void 0||B.reloadAndRest())},tips:s.FD.format("listManageExit"),children:(0,e.jsx)(an.Z,{})})]})}}],request:function(){var _=j()(a()().mark(function D(d,I,M){var x,re;return a()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,(0,b.jV)({md5:t.containerInfo.Name});case 2:return x=B.sent,m(x.data.info),B.next=6,(0,nn._3)({name:Object.keys(x.data.info.NetworkSettings.Networks)});case 6:return re=B.sent,B.abrupt("return",{data:re.data.list,success:!0,total:re.data.list.length});case 8:case"end":return B.stop()}},D)}));return function(D,d,I){return _.apply(this,arguments)}}(),toolBarRender:function(){return[(0,e.jsx)(Fn.Z,{showTriggerButton:!0,onSelect:function(){var D=j()(a()().mark(function d(I){var M,x;return a()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,(0,nn.HY)({name:I.Name,containerName:t.containerInfo.Name,ipV4:""});case 2:x=$.sent,!((M=i.current)===null||M===void 0)&&M.reloadAndRest&&i.current.reloadAndRest();case 4:case"end":return $.stop()}},d)}));return function(d){return D.apply(this,arguments)}}()},"joinNetwork"),(0,e.jsx)(Un.Z,{onFinish:function(){var d,I;!((d=i.current)===null||d===void 0)&&d.reloadAndRest&&((I=i.current)===null||I===void 0||I.reloadAndRest())}},"create")]},search:!1,expandable:{expandRowByClick:!1,expandedRowKeys:Object.keys((o=l==null?void 0:l.NetworkSettings.Networks)!==null&&o!==void 0?o:{bridge:[]})}})]})}),Bn=Wn,Kn=n(26522),Nn=(0,r.forwardRef)(function(t,y){(0,r.useImperativeHandle)(y,function(){return{}});var o=(0,r.useState)(!1),i=C()(o,2),g=i[0],F=i[1],p=new s.Uo("components.appDetail");return(0,e.jsx)(Sn.a,{submitter:!1,title:p.format("titleNetwork"),onOpenChange:function(m){F(m)},drawerProps:{width:se.R_},open:g,trigger:(0,e.jsx)(Y.ZP,{icon:(0,e.jsx)(Kn.Z,{}),children:s.Ob.format("docker.network")}),children:(0,e.jsx)(Bn,{ghost:!0,containerInfo:t.containerInfo})})}),kn=Nn,Vn=n(84941),Hn=(0,r.forwardRef)(function(t,y){var o=new s.Uo("components.appDetail"),i=(0,r.useContext)(q),g=i.reload,F=i.loadingRef,p=i.close,l=i.redirect,m=(0,r.useRef)(),_=(0,r.useRef)(),D=(0,r.useRef)(),d=(0,r.useRef)(),I=(0,r.useRef)(),M=(0,r.useRef)(),x=(0,r.useRef)(),re=(0,r.useState)({status:0,error:""}),$=C()(re,2),B=$[0],w=$[1],Ie=(0,r.useState)(),De=C()(Ie,2),f=De[0],Ee=De[1];(0,r.useImperativeHandle)(y,function(){return{}});function Ae(H){return Ve.apply(this,arguments)}function Ve(){return Ve=j()(a()().mark(function H(v){var T,u,h;return a()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if(u=-2,!v.ignore){A.next=6;break}if(!(v.ignore.indexOf("".concat(v.info.Name,"@*"))>-1)){A.next=4;break}return A.abrupt("return",{status:-2,error:""});case 4:if(!(v.ignore.indexOf("".concat(v.info.Name,"@").concat(v.info.Image))>-1)){A.next=6;break}return A.abrupt("return",{status:-2,error:""});case 6:return A.next=8,(0,Ye.ZQ)({tag:(T=v.info.Config.Image)!==null&&T!==void 0?T:"",md5:v.info.Image,cacheTime:3600}).catch(function(xe){u=-1});case 8:if(h=A.sent,!(h&&h.data.error&&h.data.error!="")){A.next=11;break}return A.abrupt("return",{status:-1,error:h.data.error});case 11:return h&&(h.data.digestLocal&&h.data.digestLocal.length>0?u=h.data.upgrade?1:2:h.data.error&&h.data.error!=""?u=-1:h.data.digestLocal.length==0?u=-3:u=-2),A.abrupt("return",{status:u,error:""});case 13:case"end":return A.stop()}},H)})),Ve.apply(this,arguments)}return(0,r.useEffect)(function(){w({status:0}),Ae(t.data).then(function(H){w(H)}),Ee(t.data)},[t.data]),(0,e.jsxs)(P.Z,{direction:"vertical",children:[(0,e.jsxs)(N.Z,{ghost:t.ghost,title:(0,e.jsx)(L.Z,{}),subTitle:o.format("titleManage"),children:[(0,e.jsx)(Vn.Z,{onFinish:function(){var H=j()(a()().mark(function v(T){return a()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:T&&l(T);case 1:case"end":return h.stop()}},v)}));return function(v){return H.apply(this,arguments)}}(),ref:m},"createByImage"),(0,e.jsxs)(P.Z,{wrap:!0,children:[(0,e.jsx)(Y.ZP,{onClick:function(){var v;(v=m.current)===null||v===void 0||v.show(t.data.info.Id)},type:"primary",icon:(0,e.jsx)(mn.Z,{}),children:s.FD.format("listManageEdit")}),f&&(0,e.jsxs)(e.Fragment,{children:[f.info.Config.Image&&(0,e.jsx)(Dn.Z,{image:[f.info.Config.Image],ref:M}),(0,e.jsx)(gn.Z,{placement:"bottomLeft",menu:{items:[{key:"1",label:(0,e.jsx)(G.Z,{action:j()(a()().mark(function H(){var v,T,u,h,K,A;return a()().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return le.next=2,(0,Ge.ze)({md5:(v=(T=f.info)===null||T===void 0?void 0:T.Name)!==null&&v!==void 0?v:"",imageId:""});case 2:return w({status:0}),le.next=5,(0,Ye.ZQ)({tag:(u=(h=f.info)===null||h===void 0?void 0:h.Config.Image)!==null&&u!==void 0?u:"",md5:(K=(A=f.info)===null||A===void 0?void 0:A.Image)!==null&&K!==void 0?K:"",cacheTime:0}).then(function(de){de.data.error&&de.data.error!=""?w({status:-1,error:de.data.error}):de.data.digestLocal&&de.data.digestLocal.length>0?w({status:de.data.upgrade?1:2}):w({status:-2})}).catch(function(de){w({status:-1})});case 5:return le.abrupt("return",le.sent);case 6:case"end":return le.stop()}},H)})),buttonProps:{type:"link"},children:o.format("upgradeCheckUpgrade")})},{key:"2",label:(0,e.jsx)(G.Z,{action:j()(a()().mark(function H(){var v,T,u,h;return a()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,(0,Ge.ze)({md5:(v=(T=f.info)===null||T===void 0?void 0:T.Name)!==null&&v!==void 0?v:"",imageId:(u=(h=f.info)===null||h===void 0?void 0:h.Image)!==null&&u!==void 0?u:""});case 2:return A.abrupt("return",A.sent);case 3:case"end":return A.stop()}},H)})),buttonProps:{type:"link"},children:o.format("upgradeCheckUpgradeIgnoreOnce")})},{key:"3",label:(0,e.jsx)(G.Z,{action:j()(a()().mark(function H(){var v,T;return a()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,(0,Ge.ze)({md5:(v=(T=f.info)===null||T===void 0?void 0:T.Name)!==null&&v!==void 0?v:"",imageId:"*"});case 2:return h.abrupt("return",h.sent);case 3:case"end":return h.stop()}},H)})),buttonProps:{type:"link"},children:o.format("upgradeCheckUpgradeIgnore")})}]},children:(0,e.jsx)(pn.Z,{title:B.error,count:o.format("checkImageUpgradeOption."+B.status),color:o.format("checkImageUpgradeColorOption."+B.status),children:(0,e.jsx)(G.Z,{buttonProps:{disabled:B.status===0,icon:B.status===0?(0,e.jsx)(On.Z,{}):(0,e.jsx)(In.Z,{})},confirmProps:{description:(0,e.jsxs)(P.Z,{style:{width:280,paddingRight:"10px"},direction:"vertical",children:[(0,e.jsx)(Z.Z.Text,{children:o.format("upgradeConfirm")}),(0,e.jsx)(k.A,{formRef:x,submitter:!1,layout:"inline",children:(0,e.jsx)(We.Z,{name:"enableBak",valuePropName:"checked",children:(0,e.jsx)(Be.Z,{children:o.format("upgradeConfirmEnableBak")})})})]})},action:j()(a()().mark(function H(){var v,T,u,h,K,A;return a()().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return le.next=2,(v=M.current)===null||v===void 0?void 0:v.start();case 2:return(T=F.current)===null||T===void 0||T.show(),(u=M.current)===null||u===void 0||u.finish(),le.next=6,(0,b.RF)({md5:(h=f.info.Id)!==null&&h!==void 0?h:"",imageTag:"",enableBak:(K=(A=x.current)===null||A===void 0?void 0:A.getFieldValue("enableBak"))!==null&&K!==void 0?K:!1}).finally(function(){var de;(de=F.current)===null||de===void 0||de.destroy()});case 6:return le.abrupt("return",le.sent);case 7:case"end":return le.stop()}},H)})),onSuccess:function(v){p()},children:o.format("upgradeButton")})})})]}),(0,e.jsx)(oe.Z,{type:"vertical"}),(0,e.jsx)(G.Z,{buttonProps:{icon:(0,e.jsx)(fn.Z,{})},confirmProps:{description:(0,e.jsxs)(P.Z,{style:{width:400,paddingRight:"10px"},direction:"vertical",children:[(0,e.jsx)(Z.Z.Text,{children:o.format("copyConfirmTip")}),(0,e.jsxs)(k.A,{formRef:I,submitter:!1,layout:"horizontal",children:[(0,e.jsx)("br",{}),(0,e.jsx)(vn.Z,{label:o.format("copyCopyName"),name:"copyName"}),(0,e.jsx)(hn.Z,{label:o.format("copyEnableRandomPort"),name:"enableRandomPort"})]})]})},action:j()(a()().mark(function H(){var v,T,u,h,K;return a()().wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:return xe.next=2,(0,b.aF)({md5:(v=f==null?void 0:f.info.Id)!==null&&v!==void 0?v:"",copyName:(T=(u=I.current)===null||u===void 0?void 0:u.getFieldValue("copyName"))!==null&&T!==void 0?T:"",enableRandomPort:(h=(K=I.current)===null||K===void 0?void 0:K.getFieldValue("enableRandomPort"))!==null&&h!==void 0?h:!1});case 2:return xe.abrupt("return",xe.sent);case 3:case"end":return xe.stop()}},H)})),onSuccess:function(v){var T;(T=I.current)===null||T===void 0||T.resetFields()},children:o.format("copyButton")}),f&&(0,e.jsx)(Tn,{detail:f.info,onFinish:function(){p()}},"rollback"),f&&(0,e.jsx)(G.Z,{action:j()(a()().mark(function H(){var v,T,u,h,K,A;return a()().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return(v=F.current)===null||v===void 0||v.show(),le.abrupt("return",Promise.all([(0,Ge.Ct)({md5:(T=f==null?void 0:f.info.Id)!==null&&T!==void 0?T:"",deleteImage:(u=(h=D.current)===null||h===void 0?void 0:h.getFieldValue("deleteImage"))!==null&&u!==void 0?u:!1,deleteVolume:(K=(A=D.current)===null||A===void 0?void 0:A.getFieldValue("deleteVolume"))!==null&&K!==void 0?K:!1}),(0,Xe.rn)({name:f==null?void 0:f.info.Name})]).finally(function(){var de;(de=F.current)===null||de===void 0||de.destroy()}));case 2:case"end":return le.stop()}},H)})),buttonProps:{danger:!0,type:"primary",icon:(0,e.jsx)(an.Z,{})},confirmProps:{description:(0,e.jsxs)(P.Z,{style:{width:200},direction:"vertical",children:[(0,e.jsx)(Z.Z.Text,{children:s.FD.format("confirm.title")}),(0,e.jsxs)(k.A,{formRef:D,layout:"inline",submitter:!1,children:[(0,e.jsx)(We.Z,{addonAfter:(0,e.jsx)(Je.Z,{title:o.format("deleteConfirmTip"),children:(0,e.jsx)(rn.Z,{})}),name:"deleteVolume",valuePropName:"checked",children:(0,e.jsx)(Be.Z,{children:o.format("deleteConfirmDeleteVolume")})}),(0,e.jsx)(We.Z,{name:"deleteImage",valuePropName:"checked",children:(0,e.jsx)(Be.Z,{children:o.format("deleteConfirmDeleteImage")})})]})]})},onSuccess:function(){p()},children:o.format("deleteButton")}),(0,e.jsx)(oe.Z,{type:"vertical"}),f&&(0,e.jsx)(kn,{containerInfo:f.info})]})]}),(0,e.jsx)(N.Z,{ghost:t.ghost,title:(0,e.jsx)(L.Z,{}),subTitle:o.format("titleManageExport"),children:(0,e.jsxs)(P.Z,{wrap:!0,children:[f&&(0,e.jsx)(ze.u,{access:"canSeeContainerBackup",children:(0,e.jsx)(Pn,{container:f.info})}),(0,e.jsx)(oe.Z,{type:"vertical"}),(0,e.jsx)(G.Z,{buttonProps:{icon:(0,e.jsx)(_n.Z,{})},confirmProps:{onOpenChange:function(v,T){var u;!((u=_.current)===null||u===void 0)&&u.resetFields&&_.current.resetFields()},description:(0,e.jsxs)(P.Z,{style:{width:500,marginTop:"10px",paddingRight:"10px"},direction:"vertical",size:20,children:[(0,e.jsx)(Z.Z.Text,{children:o.format("exportConfirm")}),(0,e.jsx)(k.A,{layout:"horizontal",formRef:_,submitter:!1,children:(0,e.jsx)(We.Z,{valuePropName:"checked",name:"enableExportToPath",children:(0,e.jsx)(Be.Z,{children:o.format("exportEnableExportToPath")})},"enableExportToPath")})]})},action:function(){var v,T,u;return(0,b.LJ)({md5:(v=f==null?void 0:f.info.Id)!==null&&v!==void 0?v:"",enableExportToPath:(T=(u=_.current)===null||u===void 0?void 0:u.getFieldValue("enableExportToPath"))!==null&&T!==void 0?T:!1})},children:o.format("exportButton")}),(0,e.jsx)(G.Z,{buttonProps:{icon:(0,e.jsx)(on.Z,{})},confirmProps:{onOpenChange:function(v,T){var u;!((u=d.current)===null||u===void 0)&&u.resetFields&&d.current.resetFields()},title:o.format("commitConfirmTitle"),description:(0,e.jsx)(P.Z,{style:{width:400,marginTop:"10px",paddingRight:"10px"},direction:"vertical",children:(0,e.jsx)(k.A,{formRef:d,submitter:!1,children:(0,e.jsx)(We.Z,{name:"saveImageName",children:(0,e.jsx)(jn.Z,{addonBefore:o.format("commitConfirmSaveImageName")})})})})},action:function(){var v,T,u;return(0,b.Re)({md5:(v=f==null?void 0:f.info.Id)!==null&&v!==void 0?v:"",name:(T=(u=d.current)===null||u===void 0?void 0:u.getFieldValue("saveImageName"))!==null&&T!==void 0?T:f==null?void 0:f.info.Name})},children:o.format("commitButton")})]})},"extend")]})}),Gn=Hn,zn=n(65913);function Qn(t){var y=new s.Uo("components.appDetail"),o=(0,r.useState)(),i=C()(o,2),g=i[0],F=i[1];return(0,r.useEffect)(function(){(0,Ye.YU)({md5:t.data.Image}).then(function(p){F(p.data)})},[t.data]),(0,e.jsx)(N.Z,{ghost:t.ghost,title:(0,e.jsx)(ge.Z,{}),subTitle:y.format("titleImage"),children:(0,e.jsxs)(U.Z,{styles:{label:{width:200}},column:1,bordered:!0,children:[(0,e.jsx)(U.Z.Item,{label:"Image Tag",children:(0,e.jsx)(Z.Z.Text,{copyable:!0,children:t.data.Config.Image})}),(0,e.jsx)(U.Z.Item,{label:"Image",children:t.data.Image}),(0,e.jsx)(U.Z.Item,{label:"CMD",children:(g==null?void 0:g.info.Config.Cmd)&&(g==null?void 0:g.info.Config.Cmd.join(" "))}),(0,e.jsx)(U.Z.Item,{label:"ENTRYPOINT",children:g==null?void 0:g.info.Config.Entrypoint}),(0,e.jsx)(U.Z.Item,{label:"Labels",children:(0,e.jsx)(U.Z,{column:1,bordered:!0,children:(g==null?void 0:g.info.Config.Labels)&&Object.entries(g==null?void 0:g.info.Config.Labels).map(function(p){var l=C()(p,2),m=l[0],_=l[1];return(0,e.jsx)(U.Z.Item,{label:m,children:_},m)})})})]})})}var Jn=n(97857),Qe=n.n(Jn),Yn=n(40666),Xn=n(64789),qn=n(97937),et=n(66309),nt=n(86738),tt=n(90127);function at(t){var y=(0,r.useState)(0),o=C()(y,2),i=o[0],g=o[1],F=(0,r.useState)(),p=C()(F,2),l=p[0],m=p[1],_=new s.Uo("components.appDetail"),D=(0,r.useState)(),d=C()(D,2),I=d[0],M=d[1];return(0,r.useEffect)(function(){m([]),(0,Xe.e1)().then(function(x){m(x.data.list)})},[i,t.data.info.Name]),(0,e.jsx)(N.Z,{ghost:!0,title:(0,e.jsx)(Yn.Z,{}),subTitle:_.format("titleTag"),extra:(0,e.jsx)(tt.Z,{trigger:(0,e.jsx)(Z.Z.Link,{children:(0,e.jsx)(Xn.Z,{})}),containerDetail:t.data,onFinish:function(){g(i+1)}}),children:(0,e.jsx)(P.Z,{wrap:!0,children:l&&(l==null?void 0:l.filter(function(x){return x.item&&x.item.find(function(re){return re.name==t.data.info.Name})}).map(function(x,re){return(0,e.jsx)(et.Z,{color:x.tagColor,closable:{closeIcon:(0,e.jsx)(nt.Z,{title:s.FD.format("confirm.title"),open:I&&I[re],onOpenChange:function(B){M(Qe()(Qe()({},I),{index:B}))},onConfirm:j()(a()().mark(function $(){return a()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,(0,Xe.rn)({name:t.data.info.Name,tag:x.tag});case 2:g(i+1);case 3:case"end":return w.stop()}},$)})),children:(0,e.jsx)(qn.Z,{})})},style:{height:35,display:"flex",borderRadius:20,justifyContent:"center",alignItems:"center"},onClose:j()(a()().mark(function $(){return a()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:M(Qe()(Qe()({},I),{index:!0}));case 1:case"end":return w.stop()}},$)})),children:(0,e.jsx)("span",{style:{paddingLeft:10,paddingRight:3},children:x.tag})},re)}))})})}var rt=(0,r.forwardRef)(function(t,y){var o;(0,r.useImperativeHandle)(y,function(){return{show:function($){return j()(a()().mark(function B(){return a()().wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:return I(!0),Ie.next=3,M($);case 3:case"end":return Ie.stop()}},B)}))()}}});var i=new s.Uo("components.appDetail"),g=(0,r.useRef)(),F=(0,r.useState)(),p=C()(F,2),l=p[0],m=p[1],_=(0,r.useState)(!1),D=C()(_,2),d=D[0],I=D[1];function M(re){return x.apply(this,arguments)}function x(){return x=j()(a()().mark(function re($){var B,w,Ie;return a()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return(B=g.current)===null||B===void 0||B.show(),f.next=3,(0,b.jV)({md5:$}).finally(function(){var Ee;(Ee=g.current)===null||Ee===void 0||Ee.destroy()});case 3:w=f.sent,w.data&&(((Ie=w.data.info.HostConfig)===null||Ie===void 0?void 0:Ie.NetworkMode)=="host"&&w.data.info.Config.ExposedPorts&&Object.keys(w.data.info.Config.ExposedPorts).map(function(Ee){w.data.info.NetworkSettings.Ports||(w.data.info.NetworkSettings.Ports={}),w.data.info.NetworkSettings.Ports[Ee]=[{HostIp:"0.0.0.0",HostPort:Ee.substring(0,Ee.indexOf("/"))}]}),m(w.data));case 5:case"end":return f.stop()}},re)})),x.apply(this,arguments)}return(0,e.jsx)(q.Provider,{value:{loadingRef:g,reload:function(){return j()(a()().mark(function $(){return a()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(!l){w.next=3;break}return w.next=3,M(l.info.Id);case 3:case"end":return w.stop()}},$)}))()},close:function(){return j()(a()().mark(function $(){return a()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:I(!1),t.onFinish&&t.onFinish();case 2:case"end":return w.stop()}},$)}))()},redirect:function($){return j()(a()().mark(function B(){return a()().wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:return Ie.next=2,M($);case 2:case"end":return Ie.stop()}},B)}))()}},children:(0,e.jsx)(Te.Z,{title:i.format("drawerTitle",{name:(0,ne.fi)((o=l==null?void 0:l.info.Name)!==null&&o!==void 0?o:"","/")}),open:d,onClose:function(){I(!1),t.onFinish&&t.onFinish()},width:se.R_,children:(0,e.jsx)(zn.Z,{ref:g,children:(0,e.jsxs)(E.Z,{vertical:!0,gap:20,children:[l&&(0,e.jsx)(ze.u,{access:"canSeeContainerList",children:(0,e.jsx)(cn,{ghost:!0,data:l==null?void 0:l.info})}),l&&(0,e.jsx)(ze.u,{access:["canSeeContainerListManage","canSeeContainerListManageOp"],children:(0,e.jsx)(Gn,{ghost:!0,data:l})}),l&&(0,e.jsx)(at,{data:l}),l&&(0,e.jsx)(he,{data:l,ghost:!0}),(0,e.jsx)(Fe,{data:l==null?void 0:l.info,ghost:!0}),l&&(0,e.jsx)(Qn,{data:l.info,ghost:!0}),(l==null?void 0:l.info.Config.Labels)&&(0,e.jsx)(N.Z,{title:(0,e.jsx)(ge.Z,{}),ghost:!0,subTitle:i.format("titleLabel"),children:(0,e.jsx)(U.Z,{column:1,bordered:!0,children:l.info.Config.Labels&&Object.entries(l.info.Config.Labels).map(function(re){var $=C()(re,2),B=$[0],w=$[1];return(0,e.jsx)(U.Z.Item,{label:B,children:w},B)})})})]})})})})}),ot=rt},90127:function(Ue,Ce,n){var Re=n(15009),C=n.n(Re),Me=n(99289),a=n.n(Me),ue=n(5574),j=n.n(ue),r=n(5251),ee=n(184),N=n(62370),k=n(5966),U=n(24739),P=n(64317),oe=n(52688),Z=n(97462),O=n(40056),_e=n(42075),c=n(67294),b=n(1699),R=n(80821),ve=n(2808),ne=n(87662),Pe=n(29453),Le=n(3616),s=n(36146),e=n(85893),he=(0,c.forwardRef)(function(ge,Te){var E;(0,c.useImperativeHandle)(Te,function(){return{edit:function(se){fe(!0),ke(se),J.current&&J.current.setFieldsValue({tag:[se.tag],tagColor:se.tagColor,enableShowGroup:se.enableShowGroup})}}});var J=(0,c.useRef)(),Fe=(0,c.useState)(0),L=j()(Fe,2),pe=L[0],ce=L[1],X=(0,c.useState)([]),S=j()(X,2),ie=S[0],te=S[1],Y=(0,c.useState)(),be=j()(Y,2),G=be[0],W=be[1],z=(E=ge.containerDetail)===null||E===void 0?void 0:E.info,Ke=(0,c.useState)(!1),ye=j()(Ke,2),me=ye[0],fe=ye[1],q=new s.Uo("components.appDetail");function ke(Q){J.current&&J.current.setFieldsValue({title:Q.title,description:Q.description,url:Q.url,icon:Q.icon,name:Q.name})}return(0,c.useEffect)(function(){W([]),(0,Pe.e1)().then(function(Q){W(Q.data.list)})},[pe]),(0,c.useEffect)(function(){z&&(0,ne.K3)().then(function(Q){var se=[];z.NetworkSettings&&z.NetworkSettings.Ports&&Object.keys(z.NetworkSettings.Ports).map(function(V){z.NetworkSettings.Ports&&z.NetworkSettings.Ports[V]&&z.NetworkSettings.Ports[V].map(function(Ze){Ze.HostPort&&se.push("http://".concat(Q.data.serverUrl,":").concat(Ze.HostPort))})}),te(se)})},[ge.containerDetail]),(0,e.jsxs)(ee.a,{drawerProps:{forceRender:!0,width:Le.R_},open:me,onFinish:function(){var Q=a()(C()().mark(function se(V){var Ze,je,Oe,ae;return C()().wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:return Oe="",V.tagColor&&V.tagColor.toHexString?V.tagColor.cleared||(Oe=V.tagColor.toHexString()):Oe=V.tagColor,ae=(Ze=V.enableShowGroup)!==null&&Ze!==void 0?Ze:ge.defaultEnableShowGroup,Se.next=5,(0,Pe.A9)({enableShowGroup:ae,tag:V.tag?V.tag[0]:"",tagColor:Oe,name:(je=z==null?void 0:z.Name)!==null&&je!==void 0?je:V.name,title:ae?V.title:"",description:ae?V.description:"",url:ae?V.url:"",icon:ae?V.icon:""});case 5:return ce(pe+1),ge.onFinish&&ge.onFinish({tag:V.tag,tagColor:V.tagColor,enableShowGroup:ae}),Se.abrupt("return",!0);case 8:case"end":return Se.stop()}},se)}));return function(se){return Q.apply(this,arguments)}}(),formRef:J,title:q.format("tagCreateTitle"),trigger:ge.trigger,onOpenChange:function(se){var V;fe(se),!se&&(!((V=J.current)===null||V===void 0)&&V.resetFields)&&J.current.resetFields()},children:[ge.defaultEnableShowGroup&&(0,e.jsx)(N.Z,{children:(0,e.jsx)(O.Z,{message:new s.Uo("system.home.tag").format("emptyTip")})}),(0,e.jsx)(k.Z,{name:"name",hidden:!0}),(0,e.jsxs)(U.UW,{children:[(0,e.jsx)(P.Z,{width:"lg",label:q.format("tagFormTag"),layout:"vertical",required:!0,rules:[{required:!0}],onChange:function(se){var V=G&&G.find(function(He){return se&&se.length>=1&&He.tag==se[0]});if(V){var Ze,je,Oe,ae=V.item.find(function(He){return He.name==(z==null?void 0:z.Name)});(Ze=J.current)===null||Ze===void 0||Ze.setFieldsValue({tagColor:V.tagColor,enableShowGroup:V.enableShowGroup}),ae&&ae.name&&ke({name:(je=z==null?void 0:z.Name)!==null&&je!==void 0?je:"",title:ae?ae.title:(0,r.fi)((Oe=z==null?void 0:z.Name)!==null&&Oe!==void 0?Oe:"","/"),description:ae&&ae.description,url:ae&&ae.url,icon:ae&&ae.icon})}if(!se||se.length==0){var $e,Se=($e=J.current)===null||$e===void 0?void 0:$e.getFieldValue("url");if(!Se||Se==""){var Ne;!((Ne=J.current)===null||Ne===void 0)&&Ne.resetFields&&J.current.resetFields()}}},options:G&&G.map(function(Q){return{lable:Q.tag,value:Q.tag}}),name:"tag",mode:"tags",fieldProps:{maxCount:1},placeholder:q.format("tagFormTagEmpty")},"tagSelect".concat(pe)),!ge.defaultEnableShowGroup&&(0,e.jsx)(ve.Z,{label:q.format("tagFormTagColor"),name:"tagColor"})]}),!ge.defaultEnableShowGroup&&(0,e.jsx)(b.u,{access:"canSeeEnableCe",showProRibbonTips:!0,children:function(se){var V=se.canSeeEnableCe;return(0,e.jsx)(oe.Z,{label:q.format("tagFormEnableShowGroup"),name:"enableShowGroup",disabled:V,fieldProps:{onChange:function(je){if(je){var Oe,ae;ke({name:(Oe=z==null?void 0:z.Name)!==null&&Oe!==void 0?Oe:"",title:(0,r.fi)((ae=z==null?void 0:z.Name)!==null&&ae!==void 0?ae:"","/")})}}}})}}),(0,e.jsx)(Z.Z,{name:["enableShowGroup"],children:function(se){var V=se.enableShowGroup;return(V||ge.defaultEnableShowGroup)&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(_e.Z.Compact,{children:[ge.containerDetail&&(0,e.jsx)(P.Z,{label:q.format("tagFormSelectUrl"),width:"sm",name:"selectUrl",options:ie.map(function(Ze){return{label:Ze,value:Ze}}),onChange:function(je){var Oe;!((Oe=J.current)===null||Oe===void 0)&&Oe.setFieldValue&&J.current.setFieldValue("url",je)}}),(0,e.jsx)(k.Z,{label:q.format("tagFormUrl"),name:"url",width:"md"}),(0,e.jsx)(N.Z,{label:" ",children:(0,e.jsx)(R.Z,{action:function(){var je;return(0,Pe.R3)({url:(je=J.current)===null||je===void 0?void 0:je.getFieldValue("url")})},onSuccess:function(je){var Oe,ae,$e;(Oe=J.current)===null||Oe===void 0||Oe.setFieldValue("icon",je.data.icon),(ae=J.current)===null||ae===void 0||ae.setFieldValue("title",je.data.title),($e=J.current)===null||$e===void 0||$e.setFieldValue("description",je.data.description)},children:q.format("tagGetUrlDetailButton")})})]}),(0,e.jsxs)(U.UW,{children:[(0,e.jsx)(k.Z,{label:q.format("tagFormTitle"),name:"title"}),(0,e.jsx)(k.Z,{label:q.format("tagFormDescription"),name:"description"})]}),(0,e.jsx)(U.UW,{children:(0,e.jsx)(k.Z,{width:"lg",placeholder:q.format("tagFormIconEmpty"),label:q.format("tagFormIcon"),name:"icon"})})]})}})]})});Ce.Z=he},81146:function(Ue,Ce,n){var Re=n(97857),C=n.n(Re),Me=n(15009),a=n.n(Me),ue=n(99289),j=n.n(ue),r=n(67294),ee=n(97269),N=n(62370),k=n(5966),U=n(97462),P=n(82346),oe=n(71230),Z=n(15746),O=n(34041),_e=n(83622),c=n(84567),b=n(42075),R=n(80821),ve=n(23430),ne=n(93162),Pe=n.n(ne),Le=n(78267),s=n.n(Le),e=n(75458),he=n.n(e),ge=n(12323),Te=n(4244),E=n.n(Te),J=n(24078),Fe=n(36146),L=n(85893),pe,ce,X,S={decorations:{matchBackground:"",matchBorder:"#FFFF00",activeMatchBackground:"#FFFF0066",matchOverviewRuler:"",activeMatchColorOverviewRuler:""}},ie=(0,r.forwardRef)(function(te,Y){var be=(0,r.useRef)(),G=(0,P.useModel)("subscriber"),W=new Fe.Uo("components.containerLog");(0,r.useImperativeHandle)(Y,function(){return{fit:function(){pe.clear(),X.fit()},start:function(){return j()(a()().mark(function me(){return a()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,z({lineTotal:500});case 2:case"end":return q.stop()}},me)}))()},close:function(){G.progress.close(te.id)}}});function z(ye){return Ke.apply(this,arguments)}function Ke(){return Ke=j()(a()().mark(function ye(me){return a()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:G.progress.close(te.id),pe.clear(),me.download=!1,te.request(me);case 4:case"end":return q.stop()}},ye)})),Ke.apply(this,arguments)}return(0,r.useEffect)(function(){return window.addEventListener("resize",function(){X.fit()}),pe=new Te.Terminal(C()(C()({},ge.X),{},{fontSize:12,lineHeight:1.2,allowProposedApi:!0})),X=new Le.FitAddon,ce=new e.SearchAddon({}),pe.loadAddon(X),pe.loadAddon(ce),pe.open(document.getElementById("terminal-container-log")),X.fit(),G.addDataHandler(te.id,function(ye){pe.write(ye.data)}),function(){pe.clear(),pe.reset(),G.progress.close(te.id)}},[]),(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(ee.A,{submitter:!1,layout:"horizontal",onFinish:function(me){var fe;z({id:te.id,lineTotal:parseInt(me.lineTotal),showTime:(fe=me.showTime)!==null&&fe!==void 0?fe:!1})},formRef:be,children:(0,L.jsxs)(oe.Z,{gutter:[10,0],children:[(0,L.jsx)(Z.Z,{span:8,children:(0,L.jsx)(N.Z,{name:"lineTotal",initialValue:"500",label:W.format("formLineTotal"),children:(0,L.jsxs)(O.Z,{defaultValue:"500",onChange:function(me){var fe;(fe=be.current)===null||fe===void 0||fe.submit()},children:[(0,L.jsx)(O.Z.Option,{value:"100",children:W.format("formLineTotalOption",{number:"100"})}),(0,L.jsx)(O.Z.Option,{value:"200",children:W.format("formLineTotalOption",{number:"200"})}),(0,L.jsx)(O.Z.Option,{value:"500",children:W.format("formLineTotalOption",{number:"500"})}),(0,L.jsx)(O.Z.Option,{value:"1000",children:W.format("formLineTotalOption",{number:"1000"})}),(0,L.jsx)(O.Z.Option,{value:"-1",children:W.format("formLineTotalOptionAll")})]})})}),(0,L.jsx)(Z.Z,{children:(0,L.jsx)(_e.ZP,{onClick:function(){pe.clear()},children:W.format("clearButton")})}),(0,L.jsx)(Z.Z,{children:(0,L.jsx)(N.Z,{name:"showTime",valuePropName:"checked",children:(0,L.jsx)(c.Z,{onChange:function(me){var fe;(fe=be.current)===null||fe===void 0||fe.submit()},children:W.format("formShowTime")})})}),(0,L.jsx)(Z.Z,{children:(0,L.jsx)(k.Z,{label:W.format("formKeywork"),name:"keywork",fieldProps:{onPressEnter:function(){var me;ce.findNext((me=be.current)===null||me===void 0?void 0:me.getFieldValue("keywork"),S)},onChange:function(me){ce.findNext(me.target.value,S)}},placeholder:W.format("formKeyworkEmpty")})}),(0,L.jsx)(Z.Z,{children:(0,L.jsx)(U.Z,{name:["keywork"],children:function(me){var fe=me.keywork;return(0,L.jsxs)(b.Z,{size:10,children:[(0,L.jsx)(_e.ZP,{onClick:function(){ce.findNext(fe,S)},children:W.format("formKeyworkNext")},"next"),(0,L.jsx)(_e.ZP,{onClick:function(){ce.findPrevious(fe,S)},children:W.format("formKeyworkPrev")},"prev")]})}})}),(0,L.jsx)(Z.Z,{children:(0,L.jsx)(R.Z,{buttonProps:{icon:(0,L.jsx)(ve.Z,{})},action:j()(a()().mark(function ye(){var me,fe,q;return a()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:if(!te.download){Q.next=5;break}return Q.next=3,te.download({lineTotal:parseInt((me=be.current)===null||me===void 0?void 0:me.getFieldValue("lineTotal")),showTime:(fe=be.current)===null||fe===void 0?void 0:fe.getFieldValue("showTime")});case 3:q=Q.sent,(0,ne.saveAs)(q.data,q.name);case 5:case"end":return Q.stop()}},ye)})),children:W.format("downloadButton")})})]})}),(0,L.jsx)("div",{style:{marginTop:"20px",height:te.showInDrawer?"75vh":"85vh"},id:"terminal-container-log"})]})});Ce.Z=ie},27619:function(Ue,Ce,n){n.d(Ce,{Z:function(){return r}});var Re=n(5574),C=n.n(Re),Me=n(82346),a=n(67294),ue=n(64389),j=n(85893);function r(ee){var N=(0,Me.useModel)("@@initialState"),k=N.initialState,U="chart-area-".concat(ee.name),P=(0,a.useState)(),oe=C()(P,2),Z=oe[0],O=oe[1],_e={};ee.data.forEach(function(b){b.show===!1?_e[b.name]=!1:_e[b.name]=!0});var c={tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}},valueFormatter:function(R){return ee.yValueFormatter?ee.yValueFormatter(R):R}},legend:{selected:_e},grid:{left:"0",right:"0",bottom:"0",top:"30",containLabel:!0},xAxis:{type:"category",data:ee.data[0].data.map(function(b){return b.date}),boundaryGap:!1,axisLabel:{rotate:20}},yAxis:{type:"value",axisLabel:{formatter:ee.yLabelFormatter},max:function(R){if(ee.yDomainMaxCallback)return ee.yDomainMaxCallback(R)}},series:[]};return(0,a.useEffect)(function(){var b="",R=window.matchMedia("(prefers-color-scheme: dark)");(k==null?void 0:k.theme.algorithm)=="dark"||R.matches?b="dark":b="",Z&&!Z.isDisposed()&&Z.dispose();var ve=document.getElementById(U),ne=ue.S1(ve,b);ne.setOption(c);var Pe=new ResizeObserver(function(){ne.resize()});ve&&Pe.observe(ve),O(ne)},[k]),(0,a.useEffect)(function(){Z&&!Z.isDisposed()&&Z.setOption({legend:{data:ee.data.map(function(b){return b.name})},xAxis:{data:ee.data[0].data.map(function(b){return b.date})},series:ee.data.map(function(b){return{name:b.name,type:"line",stack:"Total",areaStyle:{},emphasis:{focus:"series"},data:b.data.map(function(R){return R.value})}})})},[ee.data]),(0,j.jsx)("div",{style:{height:200},id:U})}},94359:function(Ue,Ce,n){n.d(Ce,{Z:function(){return _e}});var Re=n(5574),C=n.n(Re),Me=n(3089),a=n(98165),ue=n(18429),j=n(8751),r=n(66212),ee=n(14313),N=n(30159),k=n(87740),U=n(50888),P=n(66309),oe=n(83062),Z=n(36146),O=n(85893);function _e(c){var b,R,ve=new Z.Uo("components.containerStatus"),ne=c.status.split("."),Pe=C()(ne,2),Le=Pe[0],s=Pe[1],e="";e=ve.format(c.status,(b=c.statusValue)!==null&&b!==void 0?b:{});var he=(0,O.jsx)(O.Fragment,{});return s=="0"&&(he=(0,O.jsx)(P.Z,{icon:(0,O.jsx)(Me.Z,{}),color:"default",children:e})),s=="10"&&(he=(0,O.jsx)(P.Z,{icon:(0,O.jsx)(a.Z,{spin:!0}),color:"processing",children:e})),s=="20"&&(he=(0,O.jsx)(P.Z,{icon:(0,O.jsx)(ue.Z,{}),color:"error",children:e})),s=="30"&&(he=(0,O.jsx)(P.Z,{icon:(0,O.jsx)(j.Z,{}),color:"success",children:e})),s=="new"&&(he=(0,O.jsx)(P.Z,{icon:(0,O.jsx)(r.Z,{}),children:e})),(s=="running"||s=="healthy"||s=="active"||s=="ready")&&(he=(0,O.jsx)(P.Z,{icon:(0,O.jsx)(ee.Z,{}),color:"success",children:e})),(s=="paused"||s=="pause"||s=="rollback_paused")&&(he=(0,O.jsx)(P.Z,{icon:(0,O.jsx)(N.Z,{}),color:"warning",children:e})),(s=="waiting"||s=="starting"||s=="accepted")&&(he=(0,O.jsx)(P.Z,{icon:(0,O.jsx)(k.Z,{}),children:e})),["deploying","pending","allocated","accepted","assigned","preparing","updating","rollback_started"].includes(s)&&(he=(0,O.jsx)(P.Z,{icon:(0,O.jsx)(U.Z,{}),color:"processing",children:e})),(s=="error"||s=="down"||s=="failed")&&(he=(0,O.jsx)(P.Z,{icon:(0,O.jsx)(ue.Z,{}),color:"error",children:e})),["complete","completed","rollback_completed"].includes(s)&&(he=(0,O.jsx)(P.Z,{icon:(0,O.jsx)(j.Z,{}),color:"success",children:e})),["exited","dead","removing","restarting","unhealthy","created","drain","unreachable","shutdown","rejected","remove","orphaned"].includes(s)&&(he=(0,O.jsx)(P.Z,{icon:(0,O.jsx)(ue.Z,{}),color:"warning",children:e})),(0,O.jsx)(oe.Z,{placement:"top",title:(R=c.tip)!==null&&R!==void 0?R:"",children:he})}},55943:function(Ue,Ce,n){var Re=n(5574),C=n.n(Re),Me=n(15009),a=n.n(Me),ue=n(99289),j=n.n(ue),r=n(80821),ee=n(3616),N=n(14946),k=n(36146),U=n(82061),P=n(184),oe=n(38345),Z=n(60940),O=n(42075),_e=n(96074),c=n(26412),b=n(67294),R=n(85893),ve=(0,b.forwardRef)(function(ne,Pe){(0,b.useImperativeHandle)(Pe,function(){return{show:function(ie){return j()(a()().mark(function te(){var Y,be;return a()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=2,(0,N.IS)({name:ie});case 2:Y=W.sent,Y.data.info.Containers?(be=[],Object.keys(Y.data.info.Containers).map(function(z){Y.data.info.Containers[z].Id=z,be.push(Y.data.info.Containers[z])}),ce(be)):ce([]),J(Y.data.info),he(!0);case 6:case"end":return W.stop()}},te)}))()}}});var Le=(0,b.useState)(!1),s=C()(Le,2),e=s[0],he=s[1],ge=(0,b.useState)(),Te=C()(ge,2),E=Te[0],J=Te[1],Fe=(0,b.useState)(),L=C()(Fe,2),pe=L[0],ce=L[1],X=new k.Uo("components.network");return(0,R.jsx)(P.a,{drawerProps:{width:ee.R_},title:X.format("detailTitle"),open:e,onOpenChange:function(ie){he(ie)},submitter:!1,children:(0,R.jsxs)(oe.Z,{ghost:!0,direction:"column",gutter:[10,0],children:[(0,R.jsx)(oe.Z,{title:X.format("detailContainer"),ghost:!0,children:(0,R.jsx)(Z.Z,{rowKey:"Name",columns:[{title:k.FD.format("listContainerName"),dataIndex:"Name"},{title:"IPV4",dataIndex:"IPv4Address"},{title:"IPV6",dataIndex:"IPv6Address"},{title:"MacAddress",dataIndex:"MacAddress"},{title:k.FD.format("listManage"),render:function(ie,te,Y){return(0,R.jsx)(O.Z,{split:(0,R.jsx)(_e.Z,{type:"vertical"}),children:(0,R.jsx)(r.Z,{buttonProps:{type:"text",icon:(0,R.jsx)(U.Z,{}),danger:!0},confirmProps:{showCommonConfirm:!0},action:function(){var G,W;return(0,N.t9)({name:(G=E==null?void 0:E.Id)!==null&&G!==void 0?G:"",containerName:(W=te.Id)!==null&&W!==void 0?W:""})},tips:k.FD.format("listManageExit"),onSuccess:function(){var G=pe==null?void 0:pe.filter(function(W){return W.Id!=te.Id});ce(G)}},"delete")})}}],dataSource:pe,pagination:!1})}),(0,R.jsx)(oe.Z,{ghost:!0,title:X.format("detailBasic"),children:(0,R.jsxs)(c.Z,{styles:{label:{width:150}},column:1,bordered:!0,children:[(0,R.jsx)(c.Z.Item,{label:X.format("detailName"),children:E==null?void 0:E.Name}),(0,R.jsx)(c.Z.Item,{label:"Id",children:E==null?void 0:E.Id}),(0,R.jsx)(c.Z.Item,{label:"Driver",children:E==null?void 0:E.Driver}),(0,R.jsx)(c.Z.Item,{label:"Scope",children:E==null?void 0:E.Scope}),(0,R.jsx)(c.Z.Item,{label:"Attachable",children:X.yesNo(E==null?void 0:E.Attachable)}),(0,R.jsx)(c.Z.Item,{label:"Internal",children:X.yesNo(E==null?void 0:E.Internal)}),(E==null?void 0:E.IPAM.Config)&&(E==null?void 0:E.IPAM.Config.map(function(S,ie){return(0,R.jsx)(c.Z.Item,{label:S.Gateway&&S.Gateway.includes(":")?"IPV6":"IPV4",children:(0,R.jsxs)(c.Z,{styles:{label:{width:150}},column:1,bordered:!0,children:[(0,R.jsx)(c.Z.Item,{label:"Subnet",children:S.Subnet}),(0,R.jsx)(c.Z.Item,{label:"Gateway",children:S.Gateway}),(0,R.jsx)(c.Z.Item,{label:"IP Range ",children:S.IPRange}),(0,R.jsx)(c.Z.Item,{label:"Excluded IPs",children:S.AuxiliaryAddresses&&Object.keys(S.AuxiliaryAddresses).map(function(te){return S.AuxiliaryAddresses[te]+" ,"})})]})},ie)})),(E==null?void 0:E.Options)&&Object.keys(E==null?void 0:E.Options).length>0&&(0,R.jsx)(c.Z.Item,{label:"Options",children:(0,R.jsx)(c.Z,{styles:{label:{width:150}},column:1,bordered:!0,children:Object.keys(E==null?void 0:E.Options).map(function(S){return(0,R.jsx)(c.Z.Item,{label:S,children:E.Options[S]},S)})})}),(E==null?void 0:E.Labels)&&Object.keys(E==null?void 0:E.Labels).length>0&&(0,R.jsx)(c.Z.Item,{label:"Lables",children:(0,R.jsx)(c.Z,{styles:{label:{width:150}},column:1,bordered:!0,children:Object.keys(E==null?void 0:E.Labels).map(function(S){return(0,R.jsx)(c.Z.Item,{label:S,children:E.Labels[S]},S)})})})]})})]})})});Ce.Z=ve},2808:function(Ue,Ce,n){n.d(Ce,{Z:function(){return r}});var Re=n(97857),C=n.n(Re),Me=n(62370),a=n(51663),ue=n(67294),j=n(85893);function r(ee){return(0,j.jsx)(Me.Z,C()(C()({},ee),{},{children:(0,j.jsx)(a.Z,{showText:function(k){return k.toHexString()},allowClear:!0,presets:[{label:"Color",colors:["#1677ff","#722ed1","#13c2c2","#52c41a","#eb2f96","#f5222d","#fa8c16","#fadb14","#fa541c","#2f54eb","#faad14","#a0d911","#000000","#5cdbd3","#b37feb","#b7eb8f","#61affe","#9254de","#36cfc9","#ff9c6e","#ff6f00","#ffc069","#28a745","#6610f2","#6f42c1","#007bff","#17a2b8","#20c997","#00cccc","#ff6666"]}]})}))}},76428:function(Ue,Ce,n){n.d(Ce,{Z:function(){return a}});var Re=n(25593),C=n(67294),Me=n(85893);function a(ue){return(0,Me.jsx)(Re.Z.Text,{copyable:!0,children:ue.title})}},65913:function(Ue,Ce,n){var Re=n(5574),C=n.n(Re),Me=n(74330),a=n(67294),ue=n(85893),j=(0,a.forwardRef)(function(r,ee){(0,a.useImperativeHandle)(ee,function(){return{show:function(){P(!0)},destroy:function(){P(!1)}}});var N=(0,a.useState)(!1),k=C()(N,2),U=k[0],P=k[1];return(0,ue.jsx)(Me.Z,{spinning:U,size:"default",children:r.children})});Ce.Z=j},29453:function(Ue,Ce,n){n.d(Ce,{A9:function(){return j},R3:function(){return P},e1:function(){return ee},rn:function(){return k}});var Re=n(15009),C=n.n(Re),Me=n(99289),a=n.n(Me),ue=n(82346);function j(Z){return r.apply(this,arguments)}function r(){return r=a()(C()().mark(function Z(O){return C()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,ue.request)("/dpanel/api/common/tag/create",{method:"POST",data:O});case 2:return c.abrupt("return",c.sent);case 3:case"end":return c.stop()}},Z)})),r.apply(this,arguments)}function ee(Z){return N.apply(this,arguments)}function N(){return N=a()(C()().mark(function Z(O){return C()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,ue.request)("/dpanel/api/common/tag/get-list",{method:"POST",data:O});case 2:return c.abrupt("return",c.sent);case 3:case"end":return c.stop()}},Z)})),N.apply(this,arguments)}function k(Z){return U.apply(this,arguments)}function U(){return U=a()(C()().mark(function Z(O){return C()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,ue.request)("/dpanel/api/common/tag/delete",{method:"POST",data:O});case 2:return c.abrupt("return",c.sent);case 3:case"end":return c.stop()}},Z)})),U.apply(this,arguments)}function P(Z){return oe.apply(this,arguments)}function oe(){return oe=a()(C()().mark(function Z(O){return C()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,ue.request)("/dpanel/api/pro/tag/get-url-detail",{method:"POST",data:O});case 2:return c.abrupt("return",c.sent);case 3:case"end":return c.stop()}},Z)})),oe.apply(this,arguments)}}}]);
