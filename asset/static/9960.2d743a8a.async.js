"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9960],{27166:function(A,O,e){var M=e(97857),s=e.n(M),E=e(5574),d=e.n(E),h=e(13769),c=e.n(h),P=e(184),p=e(74330),i=e(67294),o=e(85893),u=["requestLoading"],n=(0,i.forwardRef)(function(m,l){var g=m.requestLoading,f=c()(m,u),a=(0,i.useState)(),t=d()(a,2),r=t[0],_=t[1];return(0,i.useImperativeHandle)(l,function(){return{loading:function(){_(!0)},finish:function(){_(!1)}}}),(0,i.useEffect)(function(){typeof m.requestLoading!="undefined"&&_(m.requestLoading)},[m.requestLoading]),(0,o.jsx)(P.a,s()(s()({},f),{},{children:(0,o.jsx)(p.Z,{spinning:r,size:"default",style:{marginTop:"30%"},children:m.children})}))});O.Z=n},81366:function(A,O,e){var M=e(97857),s=e.n(M),E=e(19632),d=e.n(E),h=e(5574),c=e.n(h),P=e(27254),p=e(42075),i=e(85418),o=e(25593),u=e(83622),n=e(67294),m=e(31112),l=e(85893),g={title:"/",path:"/"},f=(0,n.forwardRef)(function(a,t){var r=(0,n.useContext)(m.Z),_=r.showPath,W=r.redirectPath,N=(0,n.useState)([g]),I=c()(N,2),T=I[0],B=I[1];(0,n.useImperativeHandle)(t,function(){return{addHistory:function(D,j){j=="/"?B([g]):B([].concat(d()(T),[{title:D,path:j}]))},initHistory:function(D,j){B([s()(s()({},g),{},{children:j})].concat(d()(D)))}}});var S=function(D){_?_(T[D].title,T[D].path):a.showPath&&a.showPath(T[D].title,T[D].path);var j=T.filter(function(b,Z){return Z<=D});B(d()(j))};return(0,l.jsxs)(p.Z,{children:[(0,l.jsx)(p.Z.Compact,{children:T.map(function(L,D){return L.children?(0,l.jsxs)(i.Z.Button,{menu:{items:L.children.map(function(j,b){return{key:b,label:(0,l.jsx)(o.Z.Link,{onClick:function(){W(j)},children:j},b)}})},type:"dashed",onClick:function(b){S(D)},children:[(0,l.jsx)(P.Z,{})," ",L.title]},D):(0,l.jsx)(u.ZP,{icon:(0,l.jsx)(P.Z,{}),type:"dashed",onClick:function(){S(D)},children:L.title},D)})}),T.length>=2&&(0,l.jsx)(o.Z.Text,{copyable:{text:T[T.length-1].path}})]})});O.Z=f},31112:function(A,O,e){var M=e(67294),s=(0,M.createContext)({});O.Z=s},68536:function(A,O,e){e.d(O,{Z:function(){return u}});var M=e(24963),s=e(36146),E=e(93613),d=e(36693),h=e(2741),c=e(25593),P=e(42075),p=e(67294),i=e(85893),o=0;function u(n){var m=(0,p.useContext)(M.Z),l=m.message,g=new s.Uo("components.explorer");return n.isDir?(0,i.jsx)(c.Z.Link,{onClick:function(){n.onClick&&n.onClick()},children:(0,i.jsxs)(P.Z,{children:[(0,i.jsx)(E.Z,{}),n.showName]})}):n.isLink?(0,i.jsx)(c.Z.Link,{onClick:function(){n.onClick&&n.onClick()},children:(0,i.jsxs)(P.Z,{children:[(0,i.jsx)(d.Z,{}),n.showName]})}):(0,i.jsx)(c.Z.Text,{onClick:function(){if(o++,o==2){o=0,n.onClick&&n.onClick();return}setTimeout(function(){o==1&&l.info(g.format("fileNameMessageViewDetail")),o=0},400)},style:{cursor:"pointer"},children:(0,i.jsxs)(P.Z,{children:[(0,i.jsx)(h.Z,{}),n.showName]})})}},92754:function(A,O,e){var M=e(5574),s=e.n(M),E=e(67294),d=e(82346),h=e(38703),c=e(85893),P=(0,E.forwardRef)(function(p,i){var o=(0,E.useState)(""),u=s()(o,2),n=u[0],m=u[1];(0,E.useImperativeHandle)(i,function(){return{setFinish:function(){t({finish:{downloading:100,extracting:100}})},setStart:function(_){_&&m(_),t({start:{downloading:0,extracting:0}})},close:function(){l.progress.close("image:pull:"+n),t({start:{downloading:0,extracting:0}})}}});var l=(0,d.useModel)("subscriber");l.addDataHandler("image:pull:"+n,function(r){t(r.data)});var g=(0,E.useState)(),f=s()(g,2),a=f[0],t=f[1];return(0,E.useEffect)(function(){return t({start:{downloading:0,extracting:0}}),function(){l.progress.close("image:pull:"+n)}},[]),(0,c.jsx)(c.Fragment,{children:a&&Object.keys(a).map(function(r){return(0,c.jsx)(h.Z,{strokeLinecap:"square",size:"small",format:function(W){return"".concat(W,"%")},percent:a[r].downloading,success:{percent:a[r].extracting}},r)})})});O.Z=P},80271:function(A,O,e){var M=e(15009),s=e.n(M),E=e(99289),d=e.n(E),h=e(5574),c=e.n(h),P=e(184),p=e(9773),i=e(83062),o=e(67294),u=e(68536),n=e(5251),m=e(81366),l=e(3616),g=e(36146),f=e(73813),a=e(85893),t=(0,o.forwardRef)(function(r,_){(0,o.useImperativeHandle)(_,function(){return{show:function(){}}});var W=(0,o.useState)(""),N=c()(W,2),I=N[0],T=N[1],B=(0,o.useState)(!1),S=c()(B,2),L=S[0],D=S[1],j=(0,o.useRef)(),b=(0,o.useRef)(),Z=function(U,C){var v,x,y;T(C),(v=b.current)===null||v===void 0||v.addHistory(U,C),!((x=j.current)===null||x===void 0)&&x.reloadAndRest&&((y=j.current)===null||y===void 0||y.reloadAndRest())},K=new g.Uo("components.explorer"),k=new g.Uo("image");return(0,a.jsx)(P.a,{drawerProps:{width:l.R_,destroyOnHidden:!0},open:L,submitter:!1,title:k.format("fileTitle"),onOpenChange:function(U){D(U),T(U?"/":"")},trigger:(0,a.jsx)(i.Z,{title:k.format("fileTitle"),children:r.trigger}),children:(0,a.jsx)(p.Z,{headerTitle:(0,a.jsx)(m.Z,{ref:b,showPath:Z}),scroll:{x:"max-content"},search:!1,rowKey:"name",pagination:{pageSize:500,position:["topRight","bottomRight"]},actionRef:j,request:d()(s()().mark(function R(){var U;return s()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(I!=""){v.next=2;break}return v.abrupt("return",{data:[],total:0,success:!0});case 2:return v.next=4,(0,f.cD)({md5:r.imageId,path:I});case 4:return U=v.sent,v.abrupt("return",{data:U.data.info,total:U.data.info.length,success:!0});case 6:case"end":return v.stop()}},R)})),columns:[{title:K.format("listName"),dataIndex:"showName",key:"name",render:function(w,C,v,x,y){var w,H=(0,n.fi)(C.name.replace(I,""),"/");return C.isDir?w=(0,a.jsx)(u.Z,{isDir:!0,onClick:function(){return Z(H,C.path)},showName:H}):C.isSymlink?w=(0,a.jsx)(u.Z,{isLink:!0,showName:H}):w=(0,a.jsx)(u.Z,{showName:H}),w}},{title:K.format("listModStr"),dataIndex:"modStr",key:"modStr"},{title:K.format("listUser"),dataIndex:"user"},{title:K.format("listGroup"),dataIndex:"group"},{title:K.format("listSize"),dataIndex:"size",key:"size",render:function(U,C,v,x,y){return(0,n.FI)(C.size)}},{title:K.format("listModTime"),dataIndex:"modTime",key:"modTime",render:function(U,C,v,x,y){return(0,n.NF)(C.modTime)},sorter:function(U,C){return new Date(U.modTime).getTime()-new Date(C.modTime).getTime()}}],cardProps:{ghost:!0}},"".concat(r.imageId))})});O.Z=t},2205:function(A,O,e){e.d(O,{Z:function(){return o}});var M=e(97857),s=e.n(M),E=e(5574),d=e.n(E),h=e(75870),c=e(36146),P=e(34041),p=e(67294),i=e(85893);function o(u){var n=(0,p.useState)([]),m=d()(n,2),l=m[0],g=m[1],f=new c.Uo("components.selectRegistry");(0,p.useEffect)(function(){(0,h.Ot)().then(function(t){t&&g(t.data.list)})},[]);var a={};return u.multiple&&(a.mode="multiple"),u.top&&(a.placement="topLeft"),(0,i.jsx)(P.Z,s()({popupMatchSelectWidth:!u.width,style:u.width?{width:u.width}:{},onChange:function(r){if(Array.isArray(r)){var _=r.map(function(W){return l[W]});u.onChangeList&&u.onChangeList(_)}else u.onChange&&u.onChange(l[r])},placeholder:f.format("nameEmpty"),options:l.map(function(t,r){return{value:r,label:t.title+"("+t.serverAddress+")"}}),allowClear:!0},a))}},68297:function(A,O,e){e.d(O,{Qd:function(){return i},Ze:function(){return P},aw:function(){return g},cV:function(){return u},fy:function(){return m},ii:function(){return c}});var M=e(15009),s=e.n(M),E=e(99289),d=e.n(E),h=e(82346),c=[{name:"amd64",arch:"amd64",search:["amd64","x86_64","86_64"]},{name:"arm64",arch:"arm64",search:["arm64","arrch64"]},{name:"i386",arch:"386",search:[]},{name:"arm/v6",arch:"arm",search:[]},{name:"arm/v7",arch:"arm",search:[]},{name:"arm/v8",arch:"arm64",search:[]},{name:"ppc64le",arch:"ppc64le",search:[]},{name:"riscv64",arch:"riscv64",search:[]}];function P(a){return p.apply(this,arguments)}function p(){return p=d()(s()().mark(function a(t){return s()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,h.request)("/dpanel/api/app/image/tag-sync",{method:"POST",data:t}));case 1:case"end":return _.stop()}},a)})),p.apply(this,arguments)}function i(a){return o.apply(this,arguments)}function o(){return o=d()(s()().mark(function a(t){return s()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,h.request)("/dpanel/api/app/image/tag-add",{method:"POST",data:t}));case 1:case"end":return _.stop()}},a)})),o.apply(this,arguments)}function u(a){return n.apply(this,arguments)}function n(){return n=d()(s()().mark(function a(t){return s()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,h.request)("/dpanel/api/app/image/tag-delete",{method:"POST",data:t}));case 1:case"end":return _.stop()}},a)})),n.apply(this,arguments)}function m(a){return l.apply(this,arguments)}function l(){return l=d()(s()().mark(function a(t){return s()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,h.request)("/dpanel/api/app/image/tag-push-batch",{method:"POST",data:t}));case 1:case"end":return _.stop()}},a)})),l.apply(this,arguments)}function g(a){return f.apply(this,arguments)}function f(){return f=d()(s()().mark(function a(t){return s()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,h.request)("/dpanel/api/pro/image/get-remote-tag",{method:"POST",data:t}));case 1:case"end":return _.stop()}},a)})),f.apply(this,arguments)}}}]);
