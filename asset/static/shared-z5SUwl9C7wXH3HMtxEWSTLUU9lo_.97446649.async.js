"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4788],{85060:function(ze,Ce,e){e.d(Ce,{Z:function(){return A}});var F=e(87462),P=e(67294),ue={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M624 706.3h-74.1V464c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v242.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.7a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-download",theme:"outlined"},p=ue,W=e(84089),ie=function(_,h){return P.createElement(W.Z,(0,F.Z)({},_,{ref:h,icon:p}))},D=P.forwardRef(ie),A=D},63434:function(ze,Ce,e){var F=e(1413),P=e(45987),ue=e(22270),p=e(84567),W=e(67294),ie=e(90789),D=e(40284),A=e(85893),z=["options","fieldProps","proFieldProps","valueEnum"],_=W.forwardRef(function(M,T){var U=M.options,ee=M.fieldProps,C=M.proFieldProps,f=M.valueEnum,s=(0,P.Z)(M,z);return(0,A.jsx)(D.Z,(0,F.Z)({ref:T,valueType:"checkbox",valueEnum:(0,ue.h)(f,void 0),fieldProps:(0,F.Z)({options:U},ee),lightProps:(0,F.Z)({labelFormatter:function(){return(0,A.jsx)(D.Z,(0,F.Z)({ref:T,valueType:"checkbox",mode:"read",valueEnum:(0,ue.h)(f,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,F.Z)({options:U},ee),proFieldProps:C},s))}},s.lightProps),proFieldProps:C},s))}),h=W.forwardRef(function(M,T){var U=M.fieldProps,ee=M.children;return(0,A.jsx)(p.Z,(0,F.Z)((0,F.Z)({ref:T},U),{},{children:ee}))}),H=(0,ie.G)(h,{valuePropName:"checked"}),g=H;g.Group=_,Ce.Z=g},99861:function(ze,Ce,e){var F=e(64599),P=e.n(F),ue=e(15009),p=e.n(ue),W=e(99289),ie=e.n(W),D=e(5574),A=e.n(D),z=e(42119),_=e(83062),h=e(67294),H=e(92754),g=e(184),M=e(38345),T=e(3616),U=e(36146),ee=e(68297),C=e(85893),f=(0,h.forwardRef)(function(s,o){(0,h.useImperativeHandle)(o,function(){return{start:function(){var v;return V(!0),u((v=s.image)!==null&&v!==void 0?v:[])},finish:function(){V(!1)},pull:function(v){return V(!0),u(v)}}});var Ye=(0,h.useState)(0),Oe=A()(Ye,2),ke=Oe[0],Fe=Oe[1],se=(0,h.useRef)(),xe=(0,h.useState)(!1),be=A()(xe,2),ce=be[0],V=be[1],d=(0,h.useState)([]),Pe=A()(d,2),Z=Pe[0],te=Pe[1],r=new U.Uo("components.appCompose");function u(ae){return Je.apply(this,arguments)}function Je(){return Je=ie()(p()().mark(function ae(v){var Y,y,$,Ne,J,Re,Le;return p()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:y=0,te(v),$=P()(v),Q.prev=3,$.s();case 5:if((Ne=$.n()).done){Q.next=15;break}return Re=Ne.value,Fe(y),(J=se.current)===null||J===void 0||J.setStart(Re),Q.next=11,(0,ee.Ze)({tag:Re,type:"pull"});case 11:Le=Q.sent,y++;case 13:Q.next=5;break;case 15:Q.next=20;break;case 17:Q.prev=17,Q.t0=Q.catch(3),$.e(Q.t0);case 20:return Q.prev=20,$.f(),Q.finish(20);case 23:(Y=se.current)===null||Y===void 0||Y.setFinish(),Fe(y),s.finishAutoHide&&V(!1);case 26:case"end":return Q.stop()}},ae,null,[[3,17,20,23]])})),Je.apply(this,arguments)}return(0,C.jsxs)(g.a,{trigger:s.trigger,open:ce,submitter:!1,title:r.format("pullImageTitle"),onOpenChange:function(){var ae=ie()(p()().mark(function v(Y){var y,$;return p()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:V(Y),Y&&s.trigger&&u((y=s.image)!==null&&y!==void 0?y:[]),Y||($=se.current)===null||$===void 0||$.close();case 3:case"end":return J.stop()}},v)}));return function(v){return ae.apply(this,arguments)}}(),drawerProps:{forceRender:!0,width:T.R_},children:[(0,C.jsx)(M.Z,{children:Z&&(0,C.jsx)(z.Z,{current:ke,items:Z.map(function(ae,v){return{title:(0,C.jsx)(_.Z,{title:ae,children:ae.length>15?ae.substring(0,6)+" ... "+ae.substring(ae.length-6):ae}),key:v}})})}),(0,C.jsx)(M.Z,{children:(0,C.jsx)(H.Z,{ref:se})})]})});Ce.Z=f},44771:function(ze,Ce,e){e.d(Ce,{Z:function(){return A}});var F=e(36146),P=e(38345),ue=e(64317),p=e(97462),W=e(31199),ie=e(86250),D=e(85893);function A(z){var _=new F.Uo("components.appForm");return(0,D.jsx)(P.Z,{ghost:z.ghost,children:(0,D.jsxs)(ie.Z,{gap:50,children:[(0,D.jsx)(ue.Z,{tooltip:"".concat(_.format("createParamsDemo",{params:"--restart always"})),label:z.showLabel&&_.format("createAdvRestart"),name:["restart","name"],width:"md",initialValue:z.defaultValue?z.defaultValue:"on-failure",options:_.option("createAdvRestartOption",["no","on-failure","unless-stopped","always"])}),(0,D.jsx)(p.Z,{name:["restart"],children:function(H){var g=H.restart;return g&&g.name=="on-failure"&&(0,D.jsx)(W.Z,{width:"md",label:_.format("createAdvRestartMax"),name:["restart","maxAttempt"],initialValue:5})}})]})})}},84941:function(ze,Ce,e){e.d(Ce,{Z:function(){return dn}});var F=e(97857),P=e.n(F),ue=e(15009),p=e.n(ue),W=e(19632),ie=e.n(W),D=e(99289),A=e.n(D),z=e(5574),_=e.n(z),h=e(38345),H=e(62370),g=e(5966),M=e(24739),T=e(97462),U=e(83622),ee=e(30291),C=e(92398),f=e(40056),s=e(67294),o=e(42963),Ye=e(51042),Oe=e(63434),ke=e(17186),Fe=e(71230),se=e(15746),xe=e(42075),be=e(25593),ce=e(85265),V=e(92067),d=e(5251),Pe=e(3616),Z=e(36146),te=e(95833),r=e(85893),u=(0,s.forwardRef)(function(E,re){var i=(0,s.useState)(!1),O=_()(i,2),b=O[0],me=O[1],Ae=(0,s.useRef)(),l=new Z.Uo("components.appForm"),L=function(I){return(0,r.jsxs)(h.Z,{bordered:!0,extra:I.action,style:{marginBottom:10},children:[(0,r.jsx)(h.Z,{title:l.format("createLinkItemTitle"),ghost:!0,children:(0,r.jsxs)(Fe.Z,{children:[(0,r.jsx)(se.Z,{span:6,children:(0,r.jsx)(g.Z,{label:l.format("createLinkItemName"),name:"name",width:"md",readonly:!0})}),(0,r.jsxs)(se.Z,{span:14,children:[(0,r.jsx)(g.Z,{label:l.format("createLinkItemAlise"),name:"alise",width:"md",readonly:!0,tooltip:l.format("createLinkItemAliseTip"),hidden:!0}),(0,r.jsx)(H.Z,{label:l.format("createLinkItemAlise"),tooltip:l.format("createLinkItemAliseTip"),children:(0,r.jsx)(xe.Z,{direction:"vertical",children:[I.name,I.record.alise].map(function(R){return(0,r.jsx)(be.Z.Text,{copyable:!0,children:R})})})})]}),(0,r.jsx)(se.Z,{span:4,children:(0,r.jsx)(Oe.Z,{label:l.format("createLinkItemVolume"),name:"volume"})})]})}),(0,r.jsx)(h.Z,{ghost:!0,title:l.format("createLinkItemEnv"),children:(0,r.jsx)(xe.Z,{direction:"vertical",children:I.record.env&&(0,d.oZ)(I.record.env).map(function(R,Ze){return(0,r.jsx)(be.Z.Text,{copyable:{icon:(0,r.jsx)(Ye.Z,{}),onCopy:function(){E.onAddEnv(R.name,R.value)},tooltips:[l.format("createLinkAddToEnv"),"success"]},code:!0,ellipsis:{tooltip:"".concat(R.name,"=").concat(R.value)},children:"".concat(R.name,"=").concat(R.value)},Ze)})},"linkEnv")})]})},K=function(I){var R,Ze,S=!1,w=(R=(Ze=Ae.current)===null||Ze===void 0?void 0:Ze.getList())!==null&&R!==void 0?R:[];if(w.map(function(fe){fe.name==I.name&&(S=!0)}),!S){var j;(j=Ae.current)===null||j===void 0||j.add(I)}};return(0,s.useImperativeHandle)(re,function(){return{setDefaultLink:function(I){I&&I.map(function(R){R.name!=""&&K(R)})}}}),(0,r.jsxs)(h.Z,{title:l.format("createLinkTitle"),headerBordered:!0,tooltip:"".concat(l.format("createParamsDemo",{params:"--link list"})),ghost:!0,children:[(0,r.jsx)(ke.u,{name:"links",actionRef:Ae,creatorButtonProps:{creatorButtonText:l.format("createLinkAddButton")},actionGuard:{beforeAddRow:function(I,R){return me(!0),!1}},copyIconProps:!1,min:0,itemRender:function(I,R){return(0,r.jsx)(L,{action:I.action,name:R.record.name,record:R.record})}}),(0,r.jsx)(ce.Z,{title:l.format("createLinkSelectContainer"),width:Pe.R_,footer:!1,open:b,onClose:function(){return me(!1)},children:(0,r.jsx)(V.Z,{onSelect:function(I){K({name:(0,d.fi)(I.Name,"/"),volume:!1,env:I.Config.Env,alise:(0,te.zY)(I.Name)}),me(!1)}})})]})}),Je=u,ae=e(91058),v=e(10523),Y=e(24796),y=e(52688),$=e(24963);function Ne(){var E=(0,s.useContext)($.Z),re=E.message,i=new Z.Uo("components.appForm");return(0,r.jsx)(h.Z,{ghost:!0,children:(0,r.jsxs)(M.UW,{children:[(0,r.jsx)(y.Z,{fieldProps:{onChange:function(b){b&&re.warning(i.format("createAdvRunCommandPrivilegedNotice"))}},name:"privileged",tooltip:"".concat(i.format("createParamsDemo",{params:"--privileged"})),label:i.format("createAdvRunCommandPrivileged"),initialValue:!1}),(0,r.jsx)(y.Z,{name:"autoRemove",tooltip:"".concat(i.format("createParamsDemo",{params:"--rm"})),label:i.format("createAdvRunCommandAutoRemove"),initialValue:!1}),(0,r.jsx)(y.Z,{fieldProps:{onChange:function(b){b&&re.warning(i.format("createAdvRunCommandHostPidNotice"))}},tooltip:"".concat(i.format("createParamsDemo",{params:"--pid host"})),name:"hostPid",label:i.format("createAdvRunCommandHostPid"),initialValue:!1}),(0,r.jsx)(y.Z,{name:"init",tooltip:"".concat(i.format("createParamsDemo",{params:"--init"})),label:i.format("createAdvRunCommandInit"),initialValue:!1})]})})}var J=e(62597),Re=e(63713),Le=e(20743),hr=(0,s.forwardRef)(function(E,re){var i=(0,s.useRef)(),O=(0,s.useRef)(),b=new Z.Uo("components.appForm");(0,s.useImperativeHandle)(re,function(){return{}});var me=function(l){var L,K,le=!1,I=(L=(K=i.current)===null||K===void 0?void 0:K.getList())!==null&&L!==void 0?L:[];if(I.map(function(Ze){Ze.name==l.name&&(le=!0)}),!le){var R;(R=i.current)===null||R===void 0||R.add(l)}};return(0,r.jsxs)(h.Z,{ghost:!0,title:b.format("createNetworkTitle"),tooltip:"".concat(b.format("createParamsDemo",{params:"--network list"})),headerBordered:!0,extra:(0,r.jsx)(xe.Z,{children:E.showUseBridgeNetwork&&(0,r.jsx)(y.Z,{name:"useBridgeNetwork",initialValue:!0,fieldProps:{checkedChildren:b.format("createNetworkUseBridgeNetwork"),unCheckedChildren:b.format("createNetworkUseBridgeNetwork")}},"useBridgeNetwork")}),children:[(0,r.jsx)(ke.u,{name:"network",actionRef:i,creatorButtonProps:{creatorButtonText:b.format("createNetworkAddButton")},actionGuard:{beforeAddRow:function(l,L){var K;return(K=O.current)===null||K===void 0||K.show(),!1}},copyIconProps:!1,min:0,itemRender:function(l,L){return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(M.UW,{children:[(0,r.jsx)(g.Z,{label:b.format("createNetworkName"),name:"name",width:"md",disabled:!0,fieldProps:{value:L.record.name}}),(0,r.jsx)(g.Z,{label:b.format("createNetworkAlise"),name:"alise",tooltip:b.format("createNetworkAliseTip"),placeholder:b.format("createNetworkAliseEmpty"),disabled:L.record.name=="bridge"}),(0,r.jsx)(g.Z,{label:"IpV4",name:"ipV4",width:"md",disabled:L.record.name=="bridge",fieldProps:{addonAfter:L.record.subnet}}),L.record.subnetV6&&(0,r.jsx)(g.Z,{label:"IpV6",name:"ipV6",width:"md",disabled:L.record.name=="bridge",fieldProps:{addonAfter:L.record.subnetV6}}),(0,r.jsx)(H.Z,{label:" ",children:l.action})]})})}}),(0,r.jsx)(Le.Z,{ref:O,onSelect:function(l){me({name:l.Name,alise:[""],subnet:l.IPAM.Config&&l.IPAM.Config[0].Subnet,subnetV6:l.IPAM.Config&&l.IPAM.Config[1]&&l.IPAM.Config[1].Subnet})}})]})}),Q=hr,gr=e(82034),$e=e(52255),_e=e(59252),tr=e(73813),ur=function(re){var i=new Z.Uo("components.appForm");return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(h.Z,{title:i.format("createSelfNetworkTitle"),subTitle:i.format("createSelfNetworkTitleTip"),tooltip:"".concat(i.format("createParamsDemo",{params:"--network string --ip string --ip6 string"})),ghost:!0,children:[(0,r.jsxs)(M.UW,{children:[(0,r.jsx)(g.Z,{label:i.format("createSelfNetworkIp",{ip:"ipv4"}),name:["ipV4","address"],width:"md",tooltip:i.format("createSelfNetworkIpTip",{ip:"ipv4",example:"192.168.1.5"}),placeholder:"192.168.1.5"}),(0,r.jsx)(T.Z,{name:["ipV4"],children:function(b){var me=b.ipV4;return(0,r.jsx)(g.Z,{label:i.format("createSelfNetworkIpSubnet",{ip:"ipv4"}),name:["ipV4","subnet"],width:"md",required:me&&me.address,tooltip:i.format("createSelfNetworkIpSubnetTip",{ip:"ipv4",example:"192.168.1.0/24"}),placeholder:"192.168.1.0/24",rules:[{required:me&&me.address}]})}}),(0,r.jsx)(g.Z,{label:i.format("createSelfNetworkIpGateway",{ip:"ipv4"}),name:["ipV4","gateway"],width:"md",tooltip:i.format("createSelfNetworkIpGatewayTip",{ip:"ipv4",example:"192.168.1.1"}),placeholder:"192.168.1.1"}),(0,r.jsx)(y.Z,{label:i.format("createSelfNetworkIpV6Enable"),name:"enableIpV6Address"})]}),(0,r.jsx)(T.Z,{name:["enableIpV6Address"],children:function(b){var me=b.enableIpV6Address;if(me)return(0,r.jsxs)(M.UW,{children:[(0,r.jsx)(g.Z,{label:i.format("createSelfNetworkIp",{ip:"ipv6"}),name:["ipV6","address"],width:"md",tooltip:i.format("createSelfNetworkIpTip",{ip:"ipv6",example:"2001:db8::5"}),placeholder:"2001:db8::5"}),(0,r.jsx)(T.Z,{name:["ipV6"],children:function(l){var L=l.ipV6;return(0,r.jsx)(g.Z,{label:i.format("createSelfNetworkIpSubnet",{ip:"ipv6"}),name:["ipV6","subnet"],width:"md",required:L&&L.address,tooltip:i.format("createSelfNetworkIpSubnetTip",{ip:"ipv6",example:"2001:db8::/48"}),placeholder:"2001:db8::/48",rules:[{required:L&&L.address}]})}}),(0,r.jsx)(g.Z,{label:i.format("createSelfNetworkIpGateway",{ip:"ipv6"}),name:["ipV6","gateway"],width:"md",tooltip:i.format("createSelfNetworkIpGatewayTip",{ip:"ipv6",example:"2001:db8::1"}),placeholder:"2001:db8::1"})]})}})]})})},je=ur,x=e(90672);function X(){var E=new Z.Uo("components.appForm");return(0,r.jsx)(h.Z,{ghost:!0,title:E.format("createHookTitle"),subTitle:"",children:(0,r.jsx)(x.Z,{label:E.format("createHookContainerCreate"),name:["hook","containerCreate"],placeholder:E.format("createHookContainerCreateTip")})})}var q=e(93529),We=e(66309),Ue=e(96074),cr=e(83062),Qe=e(64789),Cr=e(85060),jr=e(78451),Ke=e(99861),Hr=e(80821),Vr=e(1699),$r=e(80271),Kr=e(6764),Gr=e(55681);function zr(E){var re=new Z.Uo("components.appForm"),i=(0,s.useContext)(o.Z),O=i.createFormRef,b=i.volumeListRef,me=i.createEnvRef,Ae=i.domainRef,l=i.containerInfo,L=(0,s.useState)(!1),K=_()(L,2),le=K[0],I=K[1];function R(S){return Ze.apply(this,arguments)}function Ze(){return Ze=A()(p()().mark(function S(w){var j,fe,Me,ve,pe,Se,Xe,B,Te,de,N,t;return p()().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:if((j=O.current)===null||j===void 0||j.setFieldValue("imageName",w),!(l&&l.Id!="")){ne.next=3;break}return ne.abrupt("return",!0);case 3:return ne.next=5,(0,tr.YU)({md5:w});case 5:return B=ne.sent,Te=(fe=O.current)===null||fe===void 0?void 0:fe.getFieldsValue(),(Me=O.current)===null||Me===void 0||Me.resetFields(),(ve=O.current)===null||ve===void 0||ve.setFieldsValue({siteName:Te.siteName,siteTitle:Te.siteTitle,imageName:w}),B.data.info.Config.Env&&B.data.info.Config.Env.map(function(he){var ge,Ee=he.split("=");(ge=me.current)===null||ge===void 0||ge.addEnvNameValue(Ee[0],Ee.slice(1).join("="))}),(pe=O.current)===null||pe===void 0||pe.setFieldValue("workDir",B.data.info.Config.WorkingDir),(Se=Ae.current)===null||Se===void 0||Se.setExposePort(B.data.info.Config.ExposedPorts),B.data.info.Config.Volumes?(N=[],Object.keys(B.data.info.Config.Volumes).map(function(he,ge){N.push(he)}),(de=b.current)===null||de===void 0||de.setDefaultDestPath(N)):(t=b.current)===null||t===void 0||t.setDefaultDestPath([]),(Xe=O.current)===null||Xe===void 0||Xe.setFieldsValue({workDir:{value:"",useDefault:!0,default:B.data.info.Config.WorkingDir},user:{value:"",useDefault:!0,default:B.data.info.Config.User},command:{value:"",useDefault:!0,default:B.data.info.Config.Cmd&&B.data.info.Config.Cmd.join(" ")},entrypoint:{value:"",useDefault:!0,default:B.data.info.Config.Entrypoint&&B.data.info.Config.Entrypoint.join(" ")}}),ne.abrupt("return",!0);case 15:case"end":return ne.stop()}},S)})),Ze.apply(this,arguments)}return(0,s.useEffect)(function(){E.fromImageId&&R(E.fromImageId)},[E.fromImageId]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ce.Z,{destroyOnHidden:!0,open:le,width:Pe.R_,title:re.format("dockerImageTitle"),footer:!1,onClose:function(){I(!1)},children:(0,r.jsx)(Gr.Co,{columns:[{title:"Id",dataIndex:"Id",search:!1,width:120,render:function(w,j,fe,Me,ve){return(0,r.jsx)(jr.Z,{content:j.Id.slice(7,19)})}},{title:Z.FD.format("listImageName"),dataIndex:"tag",render:function(w,j,fe,Me){return(0,r.jsx)(jr.Z,{content:j.RepoTags[0]})}},{title:"Digest",width:120,render:function(w,j,fe,Me,ve){var pe=j.RepoDigests&&j.RepoDigests[0];return pe?pe.substring(pe.indexOf("@")+8).substring(0,12):(0,r.jsx)(We.Z,{color:"warning",children:new Z.Uo("components.appDetail").format("checkImageUpgradeOption.-3")})}},{title:Z.FD.format("listCreatedAt"),dataIndex:"Created",search:!1,width:180,render:function(w,j,fe,Me){return(0,r.jsx)("div",{children:(0,d.ZM)(j.Created*1e3)},j.Id)},sorter:function(w,j){return w.Created-j.Created}},{title:Z.FD.format("listManage"),valueType:"option",key:"option",width:50,render:function(w,j,fe,Me){return(0,r.jsx)(xe.Z,{split:(0,r.jsx)(Ue.Z,{type:"vertical"}),children:(0,r.jsx)(Hr.Z,{buttonProps:{icon:(0,r.jsx)(Qe.Z,{}),type:"link"},tips:Z.FD.format("listManageUse"),action:function(){return R(j.RepoTags[0])},onSuccess:function(){I(!1)}},"addImage")})}}],request:function(){var S=A()(p()().mark(function w(j,fe,Me){var ve,pe,Se;return p()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return l&&l.Id!="",B.next=3,(0,tr.KG)({tag:j.tag});case 3:return ve=B.sent,pe=0,Se=[],ve.data.list&&(Se=ve.data.list.flatMap(function(Te){return Te.RepoTags.map(function(de){var N,t=(N=Te.RepoDigests)===null||N===void 0?void 0:N.find(function(ye){var ne=ye.split("@"),he=_()(ne,2),ge=he[0],Ee=he[1];return de.includes(ge)});return{Key:pe++,Id:Te.Id,Created:Te.Created,RepoTags:[de],RepoDigests:[t]}})})),B.abrupt("return",{data:Se,success:!0,total:Se.length});case 8:case"end":return B.stop()}},w)}));return function(w,j,fe){return S.apply(this,arguments)}}(),rowKey:"Key"})},"imageTableList"),(0,r.jsxs)(xe.Z.Compact,{children:[(0,r.jsx)(g.Z,{width:"lg",label:re.format("dockerImageImageName"),name:"imageName",disabled:!0,placeholder:re.format("dockerImageImageNameEmpty"),rules:[{required:!0}],required:!0}),(0,r.jsx)(H.Z,{label:" ",children:(0,r.jsx)(U.ZP,{type:"primary",onClick:function(){return I(!0)},children:re.format("dockerImageTitle")},"showBtn")}),(0,r.jsx)(T.Z,{name:["imageName"],children:function(w){var j=w.imageName;if(j)return(0,r.jsx)(H.Z,{label:" ",children:(0,r.jsx)(Ke.Z,{finishAutoHide:!0,image:j?[j]:[],trigger:(0,r.jsx)(cr.Z,{title:re.format("dockerImageUpgradeImageTip"),children:(0,r.jsx)(U.ZP,{icon:(0,r.jsx)(Cr.Z,{}),children:re.format("dockerImageUpgradeImageButton")})})})})}}),(0,r.jsx)(H.Z,{label:" ",children:(0,r.jsx)(Kr.Z,{onFinish:function(w){R(w)},imageUrl:l&&l.Config.Image},"remote")}),(0,r.jsx)(H.Z,{label:" ",children:(0,r.jsx)(T.Z,{name:["imageName"],children:function(w){var j=w.imageName;if(j)return(0,r.jsx)(Vr.u,{access:"canSeeEnableCe",showProTips:!0,children:function(Me){var ve=Me.canSeeEnableCe;return(0,r.jsx)($r.Z,{imageId:j,trigger:(0,r.jsx)(U.ZP,{disabled:ve,children:re.format("dockerImageFileExplorer")})})}})}})})]})]})}var Yr=e(44349);function Jr(){var E=new Z.Uo("components.appForm");return(0,r.jsx)(h.Z,{ghost:!0,title:E.format("createDevice"),headerBordered:!0,tooltip:"".concat(E.format("createParamsDemo",{params:"--device list"})),children:(0,r.jsx)(Yr.Z,{name:"device",showAddButtonLabel:"".concat(Z.FD.format("listManageAdd")).concat(E.format("createDevice")),hideCopyButton:!0,showAddButton:!0,gap:10,items:[{label:E.format("createDeviceHost"),name:"host",width:"md",placeholder:"/dev/tty0"},{label:E.format("createDeviceDest"),name:"dest",width:"md",placeholder:"/dev/tty0"}]})})}var Nr=e(64317);function Qr(){var E=new Z.Uo("components.appForm");return(0,r.jsxs)(h.Z,{ghost:!0,children:[(0,r.jsxs)(Fe.Z,{children:[(0,r.jsx)(se.Z,{span:4,children:(0,r.jsx)(y.Z,{label:E.format("createGpus"),name:["gpus","enable"]})}),(0,r.jsx)(se.Z,{span:20,children:(0,r.jsx)(T.Z,{name:["gpus"],children:function(i){var O=i.gpus;if(O&&O.enable)return(0,r.jsx)(Nr.Z,{tooltip:"".concat(E.format("createParamsDemo",{params:"--gpus 'device=0'"})),mode:"tags",label:E.format("createGpusDevice"),name:["gpus","device"],placeholder:E.format("createGpusDeviceEmpty")})}})})]}),(0,r.jsx)(T.Z,{name:["gpus"],children:function(i){var O=i.gpus;if(O&&O.enable)return(0,r.jsx)(Nr.Z,{tooltip:"".concat(E.format("createParamsDemo",{params:"--gpus 'capabilities=compute,utility'"})),label:E.format("createGpusCap"),name:["gpus","capabilities"],mode:"multiple",fieldProps:{allowClear:!0},options:E.option("createGpusCapOption",["compute","compat32","graphics","utility","video","display"])})}})]})}var Xr=e(55730),qr=e(27323),en=e(44771),rn=e(33879),nn=e(96486),mr=e.n(nn),tn=e(73396),Lr=e(14946),an=e(13822),on=e(64412),sn=e(27166),ln=(0,s.forwardRef)(function(E,re){var i=(0,s.useContext)($.Z),O=i.notice,b=(0,Re.useAccess)(),me=(0,s.useState)("basic"),Ae=_()(me,2),l=Ae[0],L=Ae[1],K=new Z.Uo("app"),le=new Z.Uo("components.appForm"),I=(0,s.useRef)(),R=(0,s.useRef)(),Ze=(0,s.useRef)(),S=(0,s.useRef)(),w=(0,s.useRef)(),j=(0,s.useState)(!1),fe=_()(j,2),Me=fe[0],ve=fe[1],pe=(0,s.useRef)(),Se=(0,s.useState)(),Xe=_()(Se,2),B=Xe[0],Te=Xe[1];return(0,s.useImperativeHandle)(re,function(){return{show:function(N){return A()(p()().mark(function t(){var ye,ne,he,ge,Ee,qe,Be,ar,Pr,Ie,De,Er,Ir,xr,Rr,_r,Zr,yr,or,Dr,wr,Ar,Mr,ir,er,n,we,Ur,sr,Sr,Br,lr,kr,Tr;return p()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(Te(void 0),(ye=I.current)===null||ye===void 0||ye.resetFields(),N){k.next=4;break}return k.abrupt("return");case 4:return ve(!0),(ne=pe.current)===null||ne===void 0||ne.loading(),k.prev=6,k.next=9,(0,J.iE)({id:N});case 9:if(er=k.sent,n=(he=er.data.containerInfo)===null||he===void 0?void 0:he.Info,Te(n),we={info:{Id:n==null?void 0:n.Image,Config:{WorkingDir:"",User:"",Entrypoint:[],Cmd:[]}}},!n){k.next=23;break}return k.prev=14,k.next=17,(0,tr.YU)({md5:n.Image});case 17:Ur=k.sent,we=Ur.data,k.next=23;break;case 21:k.prev=21,k.t0=k.catch(14);case 23:return sr=[],k.next=26,(0,Lr.jR)();case 26:return Sr=k.sent,sr=Sr.data.list,Br=function(a){if(!a)return{};var c=a[er.data.siteName];if(!c)return{};var m=sr&&sr.find(function(G){return G.Id==c.NetworkID});return{ipV4:{address:c.IPAddress,gateway:c.Gateway,subnet:m&&m.IPAM.Config&&m.IPAM.Config[0]&&m.IPAM.Config[0].Subnet},ipV6:{address:c.GlobalIPv6Address,gateway:c.IPv6Gateway,subnet:m&&m.IPAM.Config&&m.IPAM.Config[1]&&m.IPAM.Config[1].Subnet},enableIpV6Address:m&&m.IPAM.Config&&m.IPAM.Config[1],bindIpV6:!!(m&&m.IPAM.Config&&m.IPAM.Config[1])}}(n==null?void 0:n.NetworkSettings.Networks),lr=[],k.next=32,function(){var a=A()(p()().mark(function c(m,G){var He;return p()().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:if(!(!(G!=null&&G.NetworkSettings)||!(G!=null&&G.NetworkSettings.Networks)||!(G!=null&&G.NetworkSettings.Networks[m]))){oe.next=2;break}return oe.abrupt("return",[]);case 2:return oe.next=4,(0,Lr.IS)({name:m});case 4:if(He=oe.sent,oe.t0=He.data.info.Containers,!oe.t0){oe.next=10;break}return oe.next=9,Promise.all(Object.entries(He.data.info.Containers).filter(function(Ge){var fr=_()(Ge,2),Fr=fr[0],vr=fr[1];return vr.Name!=m}).map(function(){var Ge=A()(p()().mark(function fr(Fr){var vr,un,pr,dr,Wr,rr,Or;return p()().wrap(function(nr){for(;;)switch(nr.prev=nr.next){case 0:if(vr=_()(Fr,2),un=vr[0],pr=vr[1],pr.Name==m){nr.next=9;break}return nr.next=4,(0,an.jV)({md5:pr.Name});case 4:return Wr=nr.sent,rr=Wr.data.info,Or=(dr=G.HostConfig)===null||dr===void 0||(dr=dr.VolumesFrom)===null||dr===void 0?void 0:dr.includes(pr.Name),Or&&rr.Mounts&&lr.push.apply(lr,ie()(rr.Mounts.map(function(cn){var br;return(br=cn.Destination)!==null&&br!==void 0?br:""}))),nr.abrupt("return",{name:pr.Name,alise:rr&&(0,te.zY)(rr.Name),env:rr&&rr.Config.Env,volume:Or});case 9:case"end":return nr.stop()}},fr)}));return function(fr){return Ge.apply(this,arguments)}}()));case 9:oe.t0=oe.sent;case 10:return oe.abrupt("return",oe.t0);case 11:case"end":return oe.stop()}},c)}));return function(c,m){return a.apply(this,arguments)}}()(er.data.siteName,n);case 32:kr=k.sent,(ge=I.current)===null||ge===void 0||ge.setFieldsValue(P()({id:n==null?void 0:n.Id,siteTitle:er.data.siteTitle,siteName:er.data.siteName,hook:er.data.env.hook,imageName:n==null?void 0:n.Config.Image,hostname:n==null?void 0:n.Config.Hostname,privileged:n==null||(Ee=n.HostConfig)===null||Ee===void 0?void 0:Ee.Privileged,useHostNetwork:(n==null||(qe=n.HostConfig)===null||qe===void 0?void 0:qe.NetworkMode)=="host",publishAllPorts:n==null||(Be=n.HostConfig)===null||Be===void 0?void 0:Be.PublishAllPorts,groupAdd:n==null||(ar=n.HostConfig)===null||ar===void 0?void 0:ar.GroupAdd,workDir:{value:n==null?void 0:n.Config.WorkingDir,useDefault:we.info.Config.WorkingDir==(n==null?void 0:n.Config.WorkingDir),default:we&&we.info.Config&&we.info.Config.WorkingDir},user:{value:n==null?void 0:n.Config.User,useDefault:we.info.Config.User==(n==null?void 0:n.Config.User),default:we.info.Config.User},command:{value:(0,d.PK)(n==null?void 0:n.Config.Cmd),useDefault:mr().isEmpty(n==null?void 0:n.Config.Cmd)||mr().isEqual(we.info.Config.Cmd,n==null?void 0:n.Config.Cmd),default:((Pr=we.info.Config)===null||Pr===void 0?void 0:Pr.Cmd)&&(0,d.PK)(we.info.Config.Cmd)},entrypoint:{value:(0,d.PK)(n==null?void 0:n.Config.Entrypoint),useDefault:mr().isEmpty(n==null?void 0:n.Config.Entrypoint)||mr().isEqual(we.info.Config.Entrypoint,n==null?void 0:n.Config.Entrypoint),default:((Ie=we.info)===null||Ie===void 0||(Ie=Ie.Config)===null||Ie===void 0?void 0:Ie.Entrypoint)&&(0,d.PK)(we.info.Config.Entrypoint)},shmsize:(0,te.Rk)(n==null||(De=n.HostConfig)===null||De===void 0?void 0:De.ShmSize),cpus:(0,te.PD)(n==null||(Er=n.HostConfig)===null||Er===void 0?void 0:Er.NanoCpus),memory:(0,te.pM)(n==null||(Ir=n.HostConfig)===null||Ir===void 0?void 0:Ir.Memory),environment:(n==null?void 0:n.Config.Env)&&(0,d.oZ)(n.Config.Env,"="),label:function(a){return a&&Object.entries(a).map(function(c){var m=_()(c,2),G=m[0],He=m[1];return{name:G,value:He}})}(n==null?void 0:n.Config.Labels),volumes:function(a){return a==null?void 0:a.filter(function(c){var m;return!lr||lr.length==0||!lr.includes((m=c.Destination)!==null&&m!==void 0?m:"")}).map(function(c){return{host:c.Type=="bind"?c.Source:c.Name,dest:c.Destination,type:c.Type,permission:c.RW?"write":"readonly"}})}(n==null?void 0:n.Mounts),ports:(0,te.yi)(n),links:kr,network:function(a){return a&&Object.entries(a).map(function(c){var m=_()(c,2),G=m[0],He=m[1],Ve=sr&&sr.find(function(Ge){return Ge.Name==G}),oe="";return He.Aliases&&He.Aliases.forEach(function(Ge){if(!Ge.includes("pod.dpanel.local")){oe=Ge;return}}),{name:G,alise:oe,ipV4:He.IPAddress,subnet:"".concat(Ve&&Ve.IPAM.Config&&Ve!==null&&Ve!==void 0&&Ve.IPAM.Config[0]?Ve==null?void 0:Ve.IPAM.Config[0].Subnet:"-")}})}(n==null?void 0:n.NetworkSettings.Networks),restart:function(a){return a?{name:a==null?void 0:a.Name,maxAttempt:a==null?void 0:a.MaximumRetryCount}:{name:"no"}}(n==null||(xr=n.HostConfig)===null||xr===void 0?void 0:xr.RestartPolicy),extraHosts:(0,d.oZ)(n==null||(Rr=n.HostConfig)===null||Rr===void 0?void 0:Rr.ExtraHosts,":"),autoRemove:n==null||(_r=n.HostConfig)===null||_r===void 0?void 0:_r.AutoRemove,init:n==null||(Zr=n.HostConfig)===null||Zr===void 0?void 0:Zr.Init,log:function(a,c){return{driver:(c=a==null?void 0:a.Type)!==null&&c!==void 0?c:"json-file",maxFile:(a==null?void 0:a.Config)&&a.Config["max-file"],maxSize:(a==null?void 0:a.Config)&&a.Config["max-size"]}}(n==null||(yr=n.HostConfig)===null||yr===void 0?void 0:yr.LogConfig),dns:n==null||(or=n.HostConfig)===null||or===void 0||(or=or.Dns)===null||or===void 0?void 0:or.join(`
`),gpus:function(a){var c=a==null?void 0:a.find(function(G){return G.Driver=="nvidia"});if(!c)return{enable:!1};var m=c.Capabilities&&c.Capabilities[0];return{device:c.DeviceIDs,capabilities:m&&m.includes("gpu")?[]:m,enable:!0}}(n==null||(Dr=n.HostConfig)===null||Dr===void 0?void 0:Dr.DeviceRequests),device:function(a){return a==null?void 0:a.map(function(c){return{host:c.PathOnHost,dest:c.PathInContainer}})}(n==null||(wr=n.HostConfig)===null||wr===void 0?void 0:wr.Devices),hostPid:(n==null||(Ar=n.HostConfig)===null||Ar===void 0?void 0:Ar.PidMode)=="host",capAdd:n==null||(Mr=n.HostConfig)===null||Mr===void 0?void 0:Mr.CapAdd,healthcheck:function(a,c,m){if(!a)return{};var G=a!=null&&(c=a.Test)!==null&&c!==void 0&&c.includes("CMD-SHELL")?"CMD-SHELL":"CMD";return{interval:(a==null?void 0:a.Interval)&&a.Interval/J.nL.Second,timeout:(a==null?void 0:a.Timeout)&&a.Timeout/J.nL.Second,retries:a==null?void 0:a.Retries,cmd:a!=null&&a.Test?a==null||(m=a.Test)===null||m===void 0?void 0:m.slice(1).join(" "):"",shellType:G}}(n==null?void 0:n.Config.Healthcheck),useBridgeNetwork:function(a){return!!(a&&a.bridge)}(n==null?void 0:n.NetworkSettings.Networks),enableBindHost:n==null||(ir=n.HostConfig)===null||ir===void 0||(ir=ir.ExtraHosts)===null||ir===void 0?void 0:ir.some(function(a){return a.includes(":host-gateway")})},Br));case 34:return k.prev=34,(Tr=pe.current)===null||Tr===void 0||Tr.finish(),k.finish(34);case 37:case"end":return k.stop()}},t,null,[[6,,34,37],[14,21]])}))()}}}),(0,r.jsx)(o.Z.Provider,{value:{createFormRef:I,volumeListRef:R,domainRef:Ze,createEnvRef:w,createLinkRef:S,containerInfo:B},children:(0,r.jsx)(sn.Z,{title:Z.Ob.format("container.create"),trigger:E.showTrigger?(0,r.jsx)(U.ZP,{type:"primary",disabled:!b.canSeeContainerListManageCreate,children:Z.Ob.format("container.create")}):void 0,drawerProps:{width:Pe.FK,rootClassName:"createAppWapper"},ref:pe,formRef:I,onFinish:function(){var de=A()(p()().mark(function N(t){var ye,ne,he,ge,Ee,qe,Be,ar;return p()().wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:if((ye=pe.current)===null||ye===void 0||ye.loading(),Be={id:t.id,siteTitle:t.siteTitle,siteName:t.siteName,hostname:t.hostname,imageName:t.imageName,environment:t.environment,links:t.links,ports:t.ports,volumes:t.volumes,network:t.network&&t.network.map(function(De){return mr().isArray(De.alise)||(De.alise=[De.alise]),De}),privileged:(ne=t.privileged)!==null&&ne!==void 0?ne:!1,autoRemove:(he=t.autoRemove)!==null&&he!==void 0?he:!1,init:(ge=t.init)!==null&&ge!==void 0?ge:!1,restartPolicy:t.restart,cpus:t.cpus,memory:t.memory,shmsize:(Ee=t.shmsize)!==null&&Ee!==void 0?Ee:"0",workDir:t.workDir&&!t.workDir.useDefault?t.workDir.value:"",user:t.user&&!t.user.useDefault?t.user.value:"",groupAdd:t.groupAdd,command:t.command&&!t.command.useDefault?t.command.value:"",entrypoint:t.entrypoint&&!t.entrypoint.useDefault?t.entrypoint.value:"",useHostNetwork:t.useHostNetwork,bindIpV6:t.bindIpV6,log:t.log,dns:t.dns,label:t.label,publishAllPorts:t.publishAllPorts,extraHosts:t.extraHosts,ipV4:t.ipV4,ipV6:t.ipV6,device:t.device,gpus:t.gpus,hook:t.hook,hostPid:t.hostPid,capAdd:t.capAdd,useBridgeNetwork:(qe=t.useBridgeNetwork)!==null&&qe!==void 0?qe:!0},!(!t.useBridgeNetwork&&!t.useHostNetwork&&(!t.network||t.network.length==0))){Ie.next=5;break}return O.error(K.format("createMessageNoBridgeNetworkMustHasUseNetwork")),Ie.abrupt("return",!1);case 5:return t.useBridgeNetwork&&Be.network&&!Be.network.find(function(De){return De.name=="bridge"})&&Be.network.push({name:"bridge",alise:[],ipV4:""}),t.healthcheck&&t.healthcheck.cmd&&t.healthcheck.cmd!=""&&(Be.healthcheck=t.healthcheck),Ie.next=9,(0,J.$G)(Be).finally(function(){var De;(De=pe.current)===null||De===void 0||De.finish()});case 9:return ar=Ie.sent,E.onFinish&&E.onFinish(ar.data.containerId),Ie.abrupt("return",!0);case 12:case"end":return Ie.stop()}},N)}));return function(N){return de.apply(this,arguments)}}(),open:Me,onOpenChange:function(N){if(ve(N),!N){var t;(t=I.current)===null||t===void 0||t.resetFields(),Te(void 0)}},children:(0,r.jsxs)(h.Z,{direction:"column",gutter:[0,10],ghost:!0,children:[(0,r.jsxs)(h.Z,{ghost:!0,title:K.format("createTitle"),children:[(0,r.jsx)(H.Z,{hidden:!0,name:"id"}),(0,r.jsx)(g.Z,{name:"siteTitle",label:K.format("createSiteTitle"),placeholder:K.format("createSiteTitleEmpty")}),(0,r.jsxs)(M.UW,{children:[(0,r.jsx)(g.Z,{width:"md",name:"siteName",label:K.format("createSiteName"),required:!0,rules:[{required:!0}],tooltip:"".concat(le.format("createParamsDemo",{params:"--name string"})),placeholder:K.format("createSiteNameEmpty")}),(0,r.jsx)(g.Z,{label:"Hostname",name:"hostname",width:"md",tooltip:"".concat(le.format("createParamsDemo",{params:"--hostname string"}))})]}),(0,r.jsx)(zr,{fromImageId:""})]}),(0,r.jsx)(ee.Z,{offsetTop:10,target:function(){return document.querySelector(".createAppWapper .ant-drawer-body")},children:(0,r.jsx)(h.Z,{style:{margin:-20},children:(0,r.jsx)(C.Z,{activeKey:l,onChange:function(N){L(N)},items:le.option("createTabOption",["basic","link","run-command","resource","cap"]).map(function(de){return{label:de.label,key:de.value}})})})}),(0,r.jsxs)($e.Z,{show:l=="basic",children:[(0,r.jsx)(gr.Z,{ref:Ze,showBindHost:!0,showBindIpV6:!0,showBindAll:!0}),(0,r.jsx)(ae.Z,{showAddButton:!0,showImportButton:!0,showCodeMode:!0,ref:w,drawerProps:{title:le.format("createEnvTitle"),tooltip:"".concat(le.format("createParamsDemo",{params:"-e, --env list"})),ghost:!0}}),(0,r.jsx)(v.Z,{showDefault:!0,ref:R}),(0,r.jsx)(T.Z,{name:["siteName","useHostNetwork"],children:function(N){var t=N.siteName,ye=N.useHostNetwork;if(!ye)return(0,r.jsx)(je,{})}}),(0,r.jsx)(on.Z,{}),(0,r.jsx)(Y.Z,{})]}),(0,r.jsxs)($e.Z,{show:l=="link",children:[(0,r.jsx)(T.Z,{name:["siteName","useHostNetwork"],children:function(N){var t=N.siteName,ye=N.useHostNetwork;return ye?(0,r.jsx)(h.Z,{children:(0,r.jsx)(f.Z,{showIcon:!0,description:K.format("createNetworkDesc")})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Je,{onAddEnv:function(he,ge){var Ee;(Ee=w.current)===null||Ee===void 0||Ee.addEnvNameValue(he,ge)},ref:S}),(0,r.jsx)(Q,{showUseBridgeNetwork:!0,siteName:t}),(0,r.jsx)(_e.Z,{})]})}}),(0,r.jsx)(Jr,{})]}),(0,r.jsxs)($e.Z,{show:l=="run-command",children:[(0,r.jsxs)(M.UW,{children:[(0,r.jsx)(en.Z,{ghost:!0,defaultValue:"always",showLabel:!0}),(0,r.jsx)(Ne,{})]}),(0,r.jsx)(rn.Z,{showCommand:!0,showEntrypoint:!0,showWorkDir:!0,showUser:!0}),(0,r.jsx)(qr.Z,{}),(0,r.jsx)(X,{})]}),(0,r.jsxs)($e.Z,{show:l=="resource",children:[(0,r.jsx)(tn.Z,{}),(0,r.jsx)(Xr.Z,{showShmsize:!0}),(0,r.jsx)(Qr,{})]}),(0,r.jsx)($e.Z,{show:l=="cap",children:I&&I.current&&(0,r.jsx)(q.Z,{})})]})})})}),dn=ln},6764:function(ze,Ce,e){e.d(Ce,{Z:function(){return ae}});var F=e(15009),P=e.n(F),ue=e(99289),p=e.n(ue),W=e(5574),ie=e.n(W),D=e(38345),A=e(97269),z=e(5966),_=e(62370),h=e(64317),H=e(83622),g=e(85265),M=e(25593),T=e(42075),U=e(67294),ee=e(92754),C=e(63713),f=e(2205),s=e(3616),o=e(36146),Ye=e(23430),Oe=e(68297),ke=e(42845),Fe=e(43461),se=e(52062),xe=e(8111);function be(v,Y){for(var y=v.length;y--&&(0,xe.Z)(Y,v[y],0)>-1;);return y}var ce=be;function V(v,Y){for(var y=-1,$=v.length;++y<$&&(0,xe.Z)(Y,v[y],0)>-1;);return y}var d=V,Pe=e(70394),Z=e(77338);function te(v,Y,y){if(v=(0,Z.Z)(v),v&&(y||Y===void 0))return(0,Fe.Z)(v);if(!v||!(Y=(0,ke.Z)(Y)))return v;var $=(0,Pe.Z)(v),Ne=(0,Pe.Z)(Y),J=d($,Ne),Re=ce($,Ne)+1;return(0,se.Z)($,J,Re).join("")}var r=te,u=e(85893),Je=(0,U.forwardRef)(function(v,Y){var y=(0,U.useState)(!1),$=ie()(y,2),Ne=$[0],J=$[1],Re=(0,U.useRef)(),Le=(0,U.useRef)(),hr=(0,U.useState)(!1),Q=ie()(hr,2),gr=Q[0],$e=Q[1],_e=new o.Uo("components.imagePull");(0,U.useImperativeHandle)(Y,function(){return{upgradeImage:function(x){var X;return J(!0),(X=Re.current)===null||X===void 0||X.setFieldValue("imageUrl",x),(0,Oe.Ze)({tag:x,type:"pull"})},setImageName:function(x){var X;J(!0),(X=Re.current)===null||X===void 0||X.setFieldValue("imageUrl",x)},show:tr}});function tr(){return ur.apply(this,arguments)}function ur(){return ur=p()(P()().mark(function je(){var x,X,q;return P()().wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:J(!0),(x=Re.current)===null||x===void 0||x.resetFields(),v.imageUrl&&((q=Re.current)===null||q===void 0||q.setFieldValue("imageUrl",v.imageUrl)),(X=Le.current)===null||X===void 0||X.setStart("");case 4:case"end":return Ue.stop()}},je)})),ur.apply(this,arguments)}return[(0,u.jsx)(H.ZP,{type:v.buttonType?v.buttonType:"default",icon:(0,u.jsx)(Ye.Z,{}),onClick:tr,children:_e.format("triggerButton")},"remoteBtn"),(0,u.jsxs)(g.Z,{forceRender:!0,open:Ne,title:_e.format("drawerTitle"),width:s.R_,onClose:function(){var x;J(!1),(x=Le.current)===null||x===void 0||x.close()},footer:!1,children:[(0,u.jsx)(D.Z,{children:(0,u.jsx)(M.Z.Text,{children:(0,u.jsxs)("ul",{style:{lineHeight:"30px"},children:[(0,u.jsxs)("li",{children:[_e.format("tip.1")," ",(0,u.jsx)("a",{href:"https://hub.docker.com/",target:"_blank",children:o.FD.format("help")})]}),(0,u.jsxs)("li",{children:[_e.format("tip.2")," ",(0,u.jsx)("a",{href:"https://hub.docker.com/search?q=",target:"_blank",children:o.FD.format("help")})]}),(0,u.jsxs)("li",{children:[_e.format("tip.3")," "]}),(0,u.jsxs)("li",{children:[_e.format("tip.4")," ",(0,u.jsx)(C.Link,{to:"/image/registry",children:o.Ob.format("image.registry.create")})]}),(0,u.jsxs)("li",{children:[_e.format("tip.5")," ",(0,u.jsx)(C.Link,{to:"/image/registry",children:o.Ob.format("image.registry")})]})]})})}),(0,u.jsx)(D.Z,{title:_e.format("triggerButton"),headerBordered:!0,children:(0,u.jsxs)(A.A,{formRef:Re,submitter:!1,isKeyPressSubmit:!0,onFinish:function(){var je=p()(P()().mark(function x(X){var q,We,Ue,cr,Qe,Cr;return P()().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:return Qe=(q=X.imageUrl)!==null&&q!==void 0?q:"",X.registryUrl&&(Qe="".concat(X.registryUrl,"/").concat(Qe)),$e(!0),(We=Le.current)===null||We===void 0||We.setStart(Qe),Ke.next=6,(0,Oe.Ze)({tag:r(Qe," "),type:"pull",platform:(Ue=X.platform)!==null&&Ue!==void 0?Ue:""}).finally(function(){$e(!1)});case 6:return Cr=Ke.sent,(cr=Le.current)===null||cr===void 0||cr.setFinish(),J(!1),v.onFinish&&v.onFinish(Cr.data.tag),Ke.abrupt("return",!0);case 11:case"end":return Ke.stop()}},x)}));return function(x){return je.apply(this,arguments)}}(),children:[(0,u.jsx)(z.Z,{name:"registryUrl",hidden:!0}),(0,u.jsx)(z.Z,{disabled:gr,name:"imageUrl",placeholder:_e.format("imageUrlEmpty"),required:!0,rules:[{required:!0}]}),(0,u.jsxs)(T.Z.Compact,{children:[(0,u.jsx)(_.Z,{shouldUpdate:!0,children:function(x){return(0,u.jsx)(f.Z,{width:"30vw",onChange:function(q){if(x.setFieldValue("registryUrl",q?q.serverAddress:""),!q){x.setFieldValue("imageUrl",v.imageUrl);return}try{var We=new URL("http://".concat(x.getFieldValue("imageUrl")));We.host&&x.setFieldValue("imageUrl","".concat(q==null?void 0:q.serverAddress).concat(We.pathname))}catch(Ue){}}})}}),(0,u.jsx)(h.Z,{name:"platform",placeholder:_e.format("imagePlatformEmpty"),options:Oe.ii.map(function(je){return{label:je.name,value:je.name}})}),(0,u.jsx)(H.ZP,{loading:gr,onClick:p()(P()().mark(function je(){var x;return P()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:(x=Re.current)===null||x===void 0||x.submit();case 1:case"end":return q.stop()}},je)})),children:_e.format("triggerButton")}),(0,u.jsx)(H.ZP,{danger:!0,onClick:function(){var x;(x=Le.current)===null||x===void 0||x.close()},children:o.FD.format("listManageKill")})]}),(0,u.jsx)(_.Z,{label:_e.format("progressTitle"),children:(0,u.jsx)(ee.Z,{ref:Le})})]})})]},"remoteDrawer")]}),ae=Je},20743:function(ze,Ce,e){var F=e(15009),P=e.n(F),ue=e(99289),p=e.n(ue),W=e(5574),ie=e.n(W),D=e(67294),A=e(14946),z=e(64789),_=e(40018),h=e(83622),H=e(85265),g=e(42075),M=e(66309),T=e(16970),U=e(3616),ee=e(36146),C=e(67255),f=e(85893),s=(0,D.forwardRef)(function(o,Ye){(0,D.useImperativeHandle)(Ye,function(){return{show:function(){se(!0)}}});var Oe=(0,D.useState)(!1),ke=ie()(Oe,2),Fe=ke[0],se=ke[1],xe=(0,D.useRef)(),be=new ee.Uo("components.network");return(0,f.jsxs)(f.Fragment,{children:[o.showTriggerButton&&(0,f.jsx)(h.ZP,{onClick:function(){se(!0)},children:be.format("selectTriggerButton")}),(0,f.jsx)(H.Z,{title:be.format("selectDrawerTitle"),width:U.R_,footer:!1,open:Fe,onClose:function(){return se(!1)},extra:(0,f.jsx)(g.Z,{children:(0,f.jsx)(T.Z,{onFinish:function(){var V,d;!((V=xe.current)===null||V===void 0)&&V.reloadAndRest&&((d=xe.current)===null||d===void 0||d.reloadAndRest())}},"create")}),children:(0,f.jsx)(_.Z,{rowKey:"Name",actionRef:xe,columns:[{title:ee.FD.format("listTitle"),dataIndex:"Name",render:function(V,d,Pe,Z,te){return d.Name=="none"||d.Name=="bridge"||d.Name=="host"?(0,f.jsxs)(f.Fragment,{children:[d.Name," ",(0,f.jsx)(M.Z,{color:"blue",children:"System"})]}):(0,f.jsx)(f.Fragment,{children:V})}},{title:ee.FD.format("listType"),ellipsis:!0,width:80,dataIndex:"Driver",search:!1},{title:"Driver",ellipsis:!0,width:100,search:!1,dataIndex:["IPAM","Driver"]},{title:"IPV4",search:!1,width:120,render:function(V,d,Pe,Z,te){return d.IPAM.Config&&d.IPAM.Config[0]&&(0,f.jsxs)(g.Z,{direction:"vertical",children:[d.IPAM.Config[0].Subnet,d.IPAM.Config[0].Gateway]})}},{title:"IPV6",search:!1,render:function(V,d,Pe,Z,te){return d.IPAM.Config&&d.IPAM.Config[1]&&(0,f.jsxs)(g.Z,{direction:"vertical",children:[d.IPAM.Config[1].Subnet,d.IPAM.Config[1].Gateway]})}},{title:ee.FD.format("listManage"),width:100,search:!1,render:function(V,d,Pe,Z,te){return[d.Name!="none"&&d.Name!="bridge"&&d.Name!="host"&&(0,f.jsx)(h.ZP,{type:"link",onClick:function(){o.onSelect(d),se(!1)},children:(0,f.jsx)(z.Z,{})},d.Id)]}}],request:function(){var ce=p()(P()().mark(function V(d,Pe,Z){var te;return P()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,A.jR)({name:d.Name});case 2:return te=u.sent,u.abrupt("return",{data:te.data.list,success:!0,total:te.data.list.length});case 4:case"end":return u.stop()}},V)}));return function(V,d,Pe){return ce.apply(this,arguments)}}(),pagination:(0,C.Oh)()})})]})});Ce.Z=s},70146:function(ze,Ce,e){e.d(Ce,{SR:function(){return H},VE:function(){return _},Zy:function(){return A},iD:function(){return M},vG:function(){return U},yB:function(){return ie}});var F=e(15009),P=e.n(F),ue=e(99289),p=e.n(ue),W=e(63713);function ie(C){return D.apply(this,arguments)}function D(){return D=p()(P()().mark(function C(f){return P()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,W.request)("/dpanel/api/app/container-backup/create",{data:f,method:"POST"});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},C)})),D.apply(this,arguments)}function A(C){return z.apply(this,arguments)}function z(){return z=p()(P()().mark(function C(f){return P()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,W.request)("/dpanel/api/app/container-backup/get-list",{method:"POST",data:f}));case 1:case"end":return o.stop()}},C)})),z.apply(this,arguments)}function _(C){return h.apply(this,arguments)}function h(){return h=p()(P()().mark(function C(f){return P()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,W.request)("/dpanel/api/app/container-backup/delete",{method:"POST",data:f}));case 1:case"end":return o.stop()}},C)})),h.apply(this,arguments)}function H(C){return g.apply(this,arguments)}function g(){return g=p()(P()().mark(function C(f){return P()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,W.request)("/dpanel/api/app/container-backup/restore",{method:"POST",data:f}));case 1:case"end":return o.stop()}},C)})),g.apply(this,arguments)}function M(C){return T.apply(this,arguments)}function T(){return T=p()(P()().mark(function C(f){return P()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,W.request)("/dpanel/api/app/container-backup/get-detail",{method:"POST",data:f}));case 1:case"end":return o.stop()}},C)})),T.apply(this,arguments)}function U(C){return ee.apply(this,arguments)}function ee(){return ee=p()(P()().mark(function C(f){return P()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,W.request)("/dpanel/api/app/site/restore",{data:f,method:"POST"});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},C)})),ee.apply(this,arguments)}}}]);
