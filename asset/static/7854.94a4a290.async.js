!(function(){var rA=(Be,pn)=>(pn=Symbol[Be])?pn:Symbol.for("Symbol."+Be),i0t=Be=>{throw TypeError(Be)},ki=Math.pow;var o0t=function(Be,pn){this[0]=Be,this[1]=pn};var K9=Be=>{var pn=Be[rA("asyncIterator")],gt=!1,_e,H={};return pn==null?(pn=Be[rA("iterator")](),_e=Ee=>H[Ee]=nn=>pn[Ee](nn)):(pn=pn.call(Be),_e=Ee=>H[Ee]=nn=>{if(gt){if(gt=!1,Ee==="throw")throw nn;return nn}return gt=!0,{done:!1,value:new o0t(new Promise(xe=>{var zt=pn[Ee](nn);zt instanceof Object||i0t("Object expected"),xe(zt)}),1)}}),H[rA("iterator")]=()=>H,_e("next"),"throw"in pn?_e("throw"):H.throw=Ee=>{throw Ee},"return"in pn&&_e("return"),H};(self.webpackChunk=self.webpackChunk||[]).push([[7854],{12122:function(Be,pn,gt){"use strict";gt.d(pn,{Z:function(){return Kt}});var _e=gt(87462),H=gt(67294),Ee={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm-616-64h536c4.4 0 8-3.6 8-8V284c0-7.2-8.7-10.7-13.7-5.7L592 488.6l-125.4-124a8.03 8.03 0 00-11.3 0l-189 189.6a7.87 7.87 0 00-2.3 5.6V720c0 4.4 3.6 8 8 8z"}}]},name:"area-chart",theme:"outlined"},nn=Ee,xe=gt(84089),zt=function(pe,Ht){return H.createElement(xe.Z,(0,_e.Z)({},pe,{ref:Ht,icon:nn}))},fe=H.forwardRef(zt),Kt=fe},64183:function(Be,pn,gt){"use strict";var _e=gt(67294),H=gt(46114),Ee=function(){return Ee=Object.assign||function(xe){for(var zt,fe=1,Kt=arguments.length;fe<Kt;fe++){zt=arguments[fe];for(var ht in zt)Object.prototype.hasOwnProperty.call(zt,ht)&&(xe[ht]=zt[ht])}return xe},Ee.apply(this,arguments)},nn=(0,_e.forwardRef)(function(xe,zt){return _e.createElement(H.P,Ee({},xe,{chartType:"Area",ref:zt}))});pn.Z=nn},46114:function(Be,pn,gt){"use strict";gt.d(pn,{P:function(){return Qvt}});var _e={};gt.r(_e),gt.d(_e,{add:function(){return Kp},adjoint:function(){return Xp},clone:function(){return qa},copy:function(){return ga},create:function(){return ue},determinant:function(){return Cd},equals:function(){return Jp},exactEquals:function(){return m_},frob:function(){return Dd},fromQuat:function(){return ou},fromQuat2:function(){return Gi},fromRotation:function(){return kd},fromRotationTranslation:function(){return hy},fromRotationTranslationScale:function(){return $p},fromRotationTranslationScaleOrigin:function(){return Sr},fromScaling:function(){return ji},fromTranslation:function(){return wi},fromValues:function(){return fy},fromXRotation:function(){return Nd},fromYRotation:function(){return Rd},fromZRotation:function(){return bc},frustum:function(){return py},getRotation:function(){return Za},getScaling:function(){return Li},getTranslation:function(){return Ka},identity:function(){return po},invert:function(){return pr},lookAt:function(){return Id},mul:function(){return Bd},multiply:function(){return Pn},multiplyScalar:function(){return wc},multiplyScalarAndAdd:function(){return Zp},ortho:function(){return Ld},orthoNO:function(){return Lo},orthoZO:function(){return vo},perspective:function(){return vy},perspectiveFromFieldOfView:function(){return yy},perspectiveNO:function(){return qp},perspectiveZO:function(){return gy},rotate:function(){return g_},rotateX:function(){return nr},rotateY:function(){return Xn},rotateZ:function(){return y_},scale:function(){return dy},set:function(){return gl},str:function(){return _c},sub:function(){return x_},subtract:function(){return Or},targetTo:function(){return my},translate:function(){return ya},transpose:function(){return Ad}});var H={};gt.r(H),gt.d(H,{area:function(){return PZ},bottom:function(){return Yl},bottomLeft:function(){return Yl},bottomRight:function(){return Yl},inside:function(){return Yl},left:function(){return Yl},outside:function(){return CZ},right:function(){return Yl},spider:function(){return LZ},surround:function(){return DZ},top:function(){return Yl},topLeft:function(){return Yl},topRight:function(){return Yl}});var Ee={};gt.r(Ee),gt.d(Ee,{interpolateBlues:function(){return aQ},interpolateBrBG:function(){return jJ},interpolateBuGn:function(){return $J},interpolateBuPu:function(){return qJ},interpolateCividis:function(){return dQ},interpolateCool:function(){return mQ},interpolateCubehelixDefault:function(){return gQ},interpolateGnBu:function(){return KJ},interpolateGreens:function(){return sQ},interpolateGreys:function(){return cQ},interpolateInferno:function(){return MQ},interpolateMagma:function(){return SQ},interpolateOrRd:function(){return ZJ},interpolateOranges:function(){return fQ},interpolatePRGn:function(){return GJ},interpolatePiYG:function(){return zJ},interpolatePlasma:function(){return PQ},interpolatePuBu:function(){return QJ},interpolatePuBuGn:function(){return JJ},interpolatePuOr:function(){return WJ},interpolatePuRd:function(){return tQ},interpolatePurples:function(){return lQ},interpolateRainbow:function(){return xQ},interpolateRdBu:function(){return YJ},interpolateRdGy:function(){return HJ},interpolateRdPu:function(){return eQ},interpolateRdYlBu:function(){return UJ},interpolateRdYlGn:function(){return VJ},interpolateReds:function(){return uQ},interpolateSinebow:function(){return wQ},interpolateSpectral:function(){return XJ},interpolateTurbo:function(){return OQ},interpolateViridis:function(){return EQ},interpolateWarm:function(){return yQ},interpolateYlGn:function(){return rQ},interpolateYlGnBu:function(){return nQ},interpolateYlOrBr:function(){return iQ},interpolateYlOrRd:function(){return oQ},schemeAccent:function(){return OJ},schemeBlues:function(){return S3},schemeBrBG:function(){return i3},schemeBuGn:function(){return h3},schemeBuPu:function(){return p3},schemeCategory10:function(){return wJ},schemeDark2:function(){return EJ},schemeGnBu:function(){return v3},schemeGreens:function(){return M3},schemeGreys:function(){return P3},schemeObservable10:function(){return SJ},schemeOrRd:function(){return g3},schemeOranges:function(){return C3},schemePRGn:function(){return o3},schemePaired:function(){return MJ},schemePastel1:function(){return PJ},schemePastel2:function(){return TJ},schemePiYG:function(){return a3},schemePuBu:function(){return m3},schemePuBuGn:function(){return y3},schemePuOr:function(){return s3},schemePuRd:function(){return x3},schemePurples:function(){return T3},schemeRdBu:function(){return c3},schemeRdGy:function(){return l3},schemeRdPu:function(){return b3},schemeRdYlBu:function(){return u3},schemeRdYlGn:function(){return f3},schemeReds:function(){return A3},schemeSet1:function(){return AJ},schemeSet2:function(){return CJ},schemeSet3:function(){return kJ},schemeSpectral:function(){return d3},schemeTableau10:function(){return NJ},schemeYlGn:function(){return w3},schemeYlGnBu:function(){return _3},schemeYlOrBr:function(){return O3},schemeYlOrRd:function(){return E3}});var nn={};gt.r(nn),gt.d(nn,{geoAlbers:function(){return Aj},geoAlbersUsa:function(){return gut},geoAzimuthalEqualArea:function(){return yut},geoAzimuthalEqualAreaRaw:function(){return gT},geoAzimuthalEquidistant:function(){return mut},geoAzimuthalEquidistantRaw:function(){return yT},geoConicConformal:function(){return but},geoConicConformalRaw:function(){return Nj},geoConicEqualArea:function(){return Xb},geoConicEqualAreaRaw:function(){return Tj},geoConicEquidistant:function(){return wut},geoConicEquidistantRaw:function(){return Rj},geoEqualEarth:function(){return Eut},geoEqualEarthRaw:function(){return mT},geoEquirectangular:function(){return _ut},geoEquirectangularRaw:function(){return Hg},geoGnomonic:function(){return Sut},geoGnomonicRaw:function(){return xT},geoIdentity:function(){return Mut},geoMercator:function(){return xut},geoMercatorRaw:function(){return Yg},geoNaturalEarth1:function(){return Put},geoNaturalEarth1Raw:function(){return bT},geoOrthographic:function(){return Tut},geoOrthographicRaw:function(){return _T},geoProjection:function(){return sl},geoProjectionMutator:function(){return pT},geoStereographic:function(){return Aut},geoStereographicRaw:function(){return wT},geoTransverseMercator:function(){return Cut},geoTransverseMercatorRaw:function(){return OT}});var xe={};gt.r(xe),gt.d(xe,{frequency:function(){return Cdt},id:function(){return kdt},name:function(){return Ndt},weight:function(){return Adt}});var zt=gt(67294),fe=gt(73935),Kt=gt.t(fe,2),ht=function(){return ht=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},ht.apply(this,arguments)},pe=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(u){try{l(r.next(u))}catch(f){a(f)}}function c(u){try{l(r.throw(u))}catch(f){a(f)}}function l(u){u.done?o(u.value):i(u.value).then(s,c)}l((r=r.apply(t,e||[])).next())})},Ht=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(n=0)),n;)try{if(r=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){n.label=l[1];break}if(l[0]===6&&n.label<o[1]){n.label=o[1],o=l;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(l);break}o[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],i=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},he=ht({},Kt),ie=he.version,Ct=he.render,Pt=he.unmountComponentAtNode,wt;try{var Nt=Number((ie||"").split(".")[0]);Nt>=18&&(wt=he.createRoot)}catch(t){}function Re(t){var e=he.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;e&&typeof e=="object"&&(e.usingClientEntryPoint=t)}var Le="__rc_react_root__";function In(t,e){Re(!0);var n=e[Le]||wt(e);Re(!1),n.render(t),e[Le]=n}function un(t,e){Ct(t,e)}function Sn(t,e){}function Cn(t,e){if(wt){In(t,e);return}un(t,e)}function mn(t){return pe(this,void 0,void 0,function(){return Ht(this,function(e){return[2,Promise.resolve().then(function(){var n;(n=t[Le])===null||n===void 0||n.unmount(),delete t[Le]})]})})}function hr(t){Pt(t)}function _r(t){}function We(t){return pe(this,void 0,void 0,function(){return Ht(this,function(e){return wt!==void 0?[2,mn(t)]:(hr(t),[2])})})}var Fe=new Map;typeof document!="undefined"&&Fe.set("tooltip",document.createElement("div"));var bi=function(t,e){e===void 0&&(e=!1);var n=null;if(e)n=Fe.get("tooltip");else if(n=document.createElement("div"),t!=null&&t.key){var r=Fe.get(t.key);r?n=r:Fe.set(t.key,n)}return Cn(t,n),n},qi=function(t){if(typeof document=="undefined")return"loading";var e=t.attachShadow({mode:"open"}),n=document.createElement("div"),r=document.createElement("style");r.innerHTML=`.loading {
    display: inline-block;
    position: relative;
    width: 80px;
    height: 80px;
  }
  .loading div {
    position: absolute;
    top: 33px;
    width: 13px;
    height: 13px;
    border-radius: 50%;
    background: #ccc;
    animation-timing-function: cubic-bezier(0, 1, 1, 0);
  }
  .loading div:nth-child(1) {
    left: 8px;
    animation: loading1 0.6s infinite;
  }
  .loading div:nth-child(2) {
    left: 8px;
    animation: loading2 0.6s infinite;
  }
  .loading div:nth-child(3) {
    left: 32px;
    animation: loading2 0.6s infinite;
  }
  .loading div:nth-child(4) {
    left: 56px;
    animation: loading3 0.6s infinite;
  }
  @keyframes loading1 {
    0% {
      transform: scale(0);
    }
    100% {
      transform: scale(1);
    }
  }
  @keyframes loading3 {
    0% {
      transform: scale(1);
    }
    100% {
      transform: scale(0);
    }
  }
  @keyframes loading2 {
    0% {
      transform: translate(0, 0);
    }
    100% {
      transform: translate(24px, 0);
    }
  }
  `,n.classList.add("loading"),n.innerHTML="<div></div><div></div><div></div><div></div>",e.appendChild(r),e.appendChild(n)},Co=function(t){var e=t.loadingTemplate,n=t.theme,r=n===void 0?"light":n,i=zt.useRef(null);zt.useEffect(function(){!e&&i.current&&qi(i.current)},[]);var o=function(){return e||zt.createElement("div",{ref:i})};return zt.createElement("div",{className:"charts-loading-container",style:{position:"absolute",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",left:0,top:0,zIndex:99,backgroundColor:r==="dark"?"rgb(20, 20, 20)":"rgb(255, 255, 255)"}},o())},Ki=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),wr=function(t){Ki(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state={hasError:!1},n.renderError=function(r){var i=n.props.errorTemplate;switch(r){default:return typeof i=="function"?i(r):i||zt.createElement("h5",null,"\u7EC4\u4EF6\u51FA\u9519\u4E86\uFF0C\u8BF7\u6838\u67E5\u540E\u91CD\u8BD5\uFF1A ",r.message)}},n}return e.getDerivedStateFromError=function(n){return{hasError:!0,error:n}},e.getDerivedStateFromProps=function(n,r){return r.children!==n.children?{children:n.children,hasError:!1,error:void 0}:null},e.prototype.render=function(){return this.state.hasError?this.renderError(this.state.error):zt.createElement(zt.Fragment,null,this.props.children)},e}(zt.Component),ot=gt(96486),Wa=function(t){var e=/react|\.jsx|children:\[\(|return\s+[A-Za-z0-9].createElement\((?!['"][g|circle|ellipse|image|rect|line|polyline|polygon|text|path|html|mesh]['"])([^\)])*,/i;return e.test(t)},Zi=function(){return Zi=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Zi.apply(this,arguments)};function _i(t,e){var n=(0,zt.useRef)(),r=(0,zt.useRef)(),i=(0,zt.useRef)(null),o=e.onReady,a=e.onEvent,s=function(u,f){var d;u===void 0&&(u="image/png");var h=(d=i.current)===null||d===void 0?void 0:d.getElementsByTagName("canvas")[0];return h==null?void 0:h.toDataURL(u,f)},c=function(u,f,d){u===void 0&&(u="download"),f===void 0&&(f="image/png");var h=u;u.indexOf(".")===-1&&(h="".concat(u,".").concat(f.split("/")[1]));var p=s(f,d),v=document.createElement("a");return v.href=p,v.download=h,document.body.appendChild(v),v.click(),document.body.removeChild(v),v=null,h},l=function(u,f){f===void 0&&(f=!1);var d=Object.keys(u),h=f;d.forEach(function(p){var v=u[p];p==="tooltip"&&(h=!0),(0,ot.isFunction)(v)&&Wa("".concat(v))?u[p]=function(){for(var y=[],m=0;m<arguments.length;m++)y[m]=arguments[m];return bi(v.apply(void 0,y),h)}:(0,ot.isArray)(v)?v.forEach(function(y){l(y,h)}):(0,ot.isObject)(v)?l(v,h):h=f})};return(0,zt.useEffect)(function(){n.current&&!(0,ot.isEqual)(r.current,e)&&(r.current=(0,ot.cloneDeep)(e),l(e),n.current.update(e),n.current.render())},[e]),(0,zt.useEffect)(function(){if(!i.current)return function(){return null};r.current||(r.current=(0,ot.cloneDeep)(e)),l(e);var u=new t(i.current,Zi({},e));u.toDataURL=s,u.downloadImage=c,u.render(),n.current=u,o&&o(u);var f=function(d){a&&a(u,d)};return u.on("*",f),function(){n.current&&(n.current.destroy(),n.current.off("*",f),n.current=void 0)}},[]),{chart:n,container:i}}var Ya="*",ko=function(){function t(){this._events={}}return t.prototype.on=function(e,n,r){return this._events[e]||(this._events[e]=[]),this._events[e].push({callback:n,once:!!r}),this},t.prototype.once=function(e,n){return this.on(e,n,!0)},t.prototype.emit=function(e){for(var n=this,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var o=this._events[e]||[],a=this._events[Ya]||[],s=function(c){for(var l=c.length,u=0;u<l;u++)if(c[u]){var f=c[u],d=f.callback,h=f.once;h&&(c.splice(u,1),c.length===0&&delete n._events[e],l--,u--),d.apply(n,r)}};s(o),s(a)},t.prototype.off=function(e,n){if(!e)this._events={};else if(!n)delete this._events[e];else{for(var r=this._events[e]||[],i=r.length,o=0;o<i;o++)r[o].callback===n&&(r.splice(o,1),i--,o--);r.length===0&&delete this._events[e]}return this},t.prototype.getEvents=function(){return this._events},t}(),hs=ko;const Wr="main-layer",kn="label-layer",Ni="element",va="view",Ha="plot",tu="component",Ys="label",Qo="area",Fp="mask";var so=function(t,e){return so=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},so(t,e)};function xt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");so(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var nt=function(){return nt=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},nt.apply(this,arguments)};function Ge(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function sf(t,e,n,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(o=(i<3?a(o):i>3?a(e,n,o):a(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o}function eu(t,e){return function(n,r){e(n,r,t)}}function cl(t,e,n,r,i,o){function a(m){if(m!==void 0&&typeof m!="function")throw new TypeError("Function expected");return m}for(var s=r.kind,c=s==="getter"?"get":s==="setter"?"set":"value",l=!e&&t?r.static?t:t.prototype:null,u=e||(l?Object.getOwnPropertyDescriptor(l,r.name):{}),f,d=!1,h=n.length-1;h>=0;h--){var p={};for(var v in r)p[v]=v==="access"?{}:r[v];for(var v in r.access)p.access[v]=r.access[v];p.addInitializer=function(m){if(d)throw new TypeError("Cannot add initializers after decoration has completed");o.push(a(m||null))};var y=(0,n[h])(s==="accessor"?{get:u.get,set:u.set}:u[c],p);if(s==="accessor"){if(y===void 0)continue;if(y===null||typeof y!="object")throw new TypeError("Object expected");(f=a(y.get))&&(u.get=f),(f=a(y.set))&&(u.set=f),(f=a(y.init))&&i.unshift(f)}else(f=a(y))&&(s==="field"?i.unshift(f):u[c]=f)}l&&Object.defineProperty(l,r.name,u),d=!0}function ta(t,e,n){for(var r=arguments.length>2,i=0;i<e.length;i++)n=r?e[i].call(t,n):e[i].call(t);return r?n:void 0}function ll(t){return typeof t=="symbol"?t:"".concat(t)}function ul(t,e,n){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function jp(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function ti(t,e,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(u){try{l(r.next(u))}catch(f){a(f)}}function c(u){try{l(r.throw(u))}catch(f){a(f)}}function l(u){u.done?o(u.value):i(u.value).then(s,c)}l((r=r.apply(t,e||[])).next())})}function Fi(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(n=0)),n;)try{if(r=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){n.label=l[1];break}if(l[0]===6&&n.label<o[1]){n.label=o[1],o=l;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(l);break}o[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],i=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}var Hs=Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]};function yc(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Hs(e,t,n)}function On(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function j(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o}function ei(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(j(arguments[e]));return t}function fl(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function ut(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}function Ua(t){return this instanceof Ua?(this.v=t,this):new Ua(t)}function Va(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(h){return function(p){return Promise.resolve(p).then(h,f)}}function s(h,p){r[h]&&(i[h]=function(v){return new Promise(function(y,m){o.push([h,v,y,m])>1||c(h,v)})},p&&(i[h]=p(i[h])))}function c(h,p){try{l(r[h](p))}catch(v){d(o[0][3],v)}}function l(h){h.value instanceof Ua?Promise.resolve(h.value.v).then(u,f):d(o[0][2],h)}function u(h){c("next",h)}function f(h){c("throw",h)}function d(h,p){h(p),o.shift(),o.length&&c(o[0][0],o[0][1])}}function Ri(t){var e,n;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,o){e[i]=t[i]?function(a){return(n=!n)?{value:Ua(t[i](a)),done:!1}:o?o(a):a}:o}}function dl(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof On=="function"?On(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(a){return new Promise(function(s,c){a=t[o](a),i(s,c,a.done,a.value)})}}function i(o,a,s,c){Promise.resolve(c).then(function(l){o({value:l,done:s})},a)}}function cf(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var Sd=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};function Md(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&Hs(e,t,n);return Sd(e,t),e}function Pd(t){return t&&t.__esModule?t:{default:t}}function hl(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}function Gp(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n}function zp(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function Wp(t,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,i;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],n&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(o){return Promise.reject(o)}}),t.stack.push({value:e,dispose:r,async:n})}else n&&t.stack.push({async:!0});return e}var Yp=typeof SuppressedError=="function"?SuppressedError:function(t,e,n){var r=new Error(n);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function Td(t){function e(o){t.error=t.hasError?new Yp(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var n,r=0;function i(){for(;n=t.stack.pop();)try{if(!n.async&&r===1)return r=0,t.stack.push(n),Promise.resolve().then(i);if(n.dispose){var o=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(o).then(i,function(a){return e(a),i()})}else r|=1}catch(a){e(a)}if(r===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}var ly={__extends:xt,__assign:nt,__rest:Ge,__decorate:sf,__param:eu,__metadata:jp,__awaiter:ti,__generator:Fi,__createBinding:Hs,__exportStar:yc,__values:On,__read:j,__spread:ei,__spreadArrays:fl,__spreadArray:ut,__await:Ua,__asyncGenerator:Va,__asyncDelegator:Ri,__asyncValues:dl,__makeTemplateObject:cf,__importStar:Md,__importDefault:Pd,__classPrivateFieldGet:hl,__classPrivateFieldSet:Gp,__classPrivateFieldIn:zp,__addDisposableResource:Wp,__disposeResources:Td},Hp=gt(26729),Xa=Hp,Mn=1e-6,er=typeof Float32Array!="undefined"?Float32Array:Array,lf=Math.random;function uy(t){er=t}var Up=Math.PI/180;function nu(t){return t*Up}function ru(t,e){return Math.abs(t-e)<=Mn*Math.max(1,Math.abs(t),Math.abs(e))}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function Gt(){var t=new er(3);return er!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function ea(t){var e=new er(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function cr(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function te(t,e,n){var r=new er(3);return r[0]=t,r[1]=e,r[2]=n,r}function lr(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Dn(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function No(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function mc(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function uf(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function co(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function lo(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function z(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function Y(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function $(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function K(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function it(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function at(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function Q(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.hypot(n,r,i)}function tt(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i}function lt(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function ft(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function Ut(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function It(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}function Yt(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Wt(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],c=n[2];return t[0]=i*c-o*s,t[1]=o*a-r*c,t[2]=r*s-i*a,t}function ne(t,e,n,r){var i=e[0],o=e[1],a=e[2];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t}function oe(t,e,n,r,i,o){var a=o*o,s=a*(2*o-3)+1,c=a*(o-2)+o,l=a*(o-1),u=a*(3-2*o);return t[0]=e[0]*s+n[0]*c+r[0]*l+i[0]*u,t[1]=e[1]*s+n[1]*c+r[1]*l+i[1]*u,t[2]=e[2]*s+n[2]*c+r[2]*l+i[2]*u,t}function jt(t,e,n,r,i,o){var a=1-o,s=a*a,c=o*o,l=s*a,u=3*o*s,f=3*c*a,d=c*o;return t[0]=e[0]*l+n[0]*u+r[0]*f+i[0]*d,t[1]=e[1]*l+n[1]*u+r[1]*f+i[1]*d,t[2]=e[2]*l+n[2]*u+r[2]*f+i[2]*d,t}function Ae(t,e){e=e||1;var n=glMatrix.RANDOM()*2*Math.PI,r=glMatrix.RANDOM()*2-1,i=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*i,t[1]=Math.sin(n)*i,t[2]=r*e,t}function Ft(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,t}function we(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t}function re(t,e,n){var r=n[0],i=n[1],o=n[2],a=n[3],s=e[0],c=e[1],l=e[2],u=i*l-o*c,f=o*s-r*l,d=r*c-i*s,h=i*d-o*f,p=o*u-r*d,v=r*f-i*u,y=a*2;return u*=y,f*=y,d*=y,h*=2,p*=2,v*=2,t[0]=s+u+h,t[1]=c+f+p,t[2]=l+d+v,t}function Pe(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function rn(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function uo(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function fo(t,e){var n=t[0],r=t[1],i=t[2],o=e[0],a=e[1],s=e[2],c=Math.sqrt(n*n+r*r+i*i),l=Math.sqrt(o*o+a*a+s*s),u=c*l,f=u&&Yt(t,e)/u;return Math.acos(Math.min(Math.max(f,-1),1))}function Ji(t){return t[0]=0,t[1]=0,t[2]=0,t}function ho(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Ro(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function fn(t,e){var n=t[0],r=t[1],i=t[2],o=e[0],a=e[1],s=e[2];return Math.abs(n-o)<=Mn*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-a)<=Mn*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-s)<=Mn*Math.max(1,Math.abs(i),Math.abs(s))}var zn=null,iu=null,Vp=null,xc=Q,$a=null,Br=cr,pl=null,vl=function(){var t=Gt();return function(e,n,r,i,o,a){var s,c;for(n||(n=3),r||(r=0),i?c=Math.min(i*n+r,e.length):c=e.length,s=r;s<c;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],o(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2];return e}}();function ue(){var t=new er(16);return er!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function qa(t){var e=new er(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function ga(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function fy(t,e,n,r,i,o,a,s,c,l,u,f,d,h,p,v){var y=new er(16);return y[0]=t,y[1]=e,y[2]=n,y[3]=r,y[4]=i,y[5]=o,y[6]=a,y[7]=s,y[8]=c,y[9]=l,y[10]=u,y[11]=f,y[12]=d,y[13]=h,y[14]=p,y[15]=v,y}function gl(t,e,n,r,i,o,a,s,c,l,u,f,d,h,p,v,y){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=c,t[8]=l,t[9]=u,t[10]=f,t[11]=d,t[12]=h,t[13]=p,t[14]=v,t[15]=y,t}function po(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Ad(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],o=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function pr(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],c=e[6],l=e[7],u=e[8],f=e[9],d=e[10],h=e[11],p=e[12],v=e[13],y=e[14],m=e[15],b=n*s-r*a,O=n*c-i*a,E=n*l-o*a,w=r*c-i*s,_=r*l-o*s,S=i*l-o*c,M=u*v-f*p,T=u*y-d*p,A=u*m-h*p,C=f*y-d*v,N=f*m-h*v,k=d*m-h*y,R=b*k-O*N+E*C+w*A-_*T+S*M;return R?(R=1/R,t[0]=(s*k-c*N+l*C)*R,t[1]=(i*N-r*k-o*C)*R,t[2]=(v*S-y*_+m*w)*R,t[3]=(d*_-f*S-h*w)*R,t[4]=(c*A-a*k-l*T)*R,t[5]=(n*k-i*A+o*T)*R,t[6]=(y*E-p*S-m*O)*R,t[7]=(u*S-d*E+h*O)*R,t[8]=(a*N-s*A+l*M)*R,t[9]=(r*A-n*N-o*M)*R,t[10]=(p*_-v*E+m*b)*R,t[11]=(f*E-u*_-h*b)*R,t[12]=(s*T-a*C-c*M)*R,t[13]=(n*C-r*T+i*M)*R,t[14]=(v*O-p*w-y*b)*R,t[15]=(u*w-f*O+d*b)*R,t):null}function Xp(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],c=e[6],l=e[7],u=e[8],f=e[9],d=e[10],h=e[11],p=e[12],v=e[13],y=e[14],m=e[15];return t[0]=s*(d*m-h*y)-f*(c*m-l*y)+v*(c*h-l*d),t[1]=-(r*(d*m-h*y)-f*(i*m-o*y)+v*(i*h-o*d)),t[2]=r*(c*m-l*y)-s*(i*m-o*y)+v*(i*l-o*c),t[3]=-(r*(c*h-l*d)-s*(i*h-o*d)+f*(i*l-o*c)),t[4]=-(a*(d*m-h*y)-u*(c*m-l*y)+p*(c*h-l*d)),t[5]=n*(d*m-h*y)-u*(i*m-o*y)+p*(i*h-o*d),t[6]=-(n*(c*m-l*y)-a*(i*m-o*y)+p*(i*l-o*c)),t[7]=n*(c*h-l*d)-a*(i*h-o*d)+u*(i*l-o*c),t[8]=a*(f*m-h*v)-u*(s*m-l*v)+p*(s*h-l*f),t[9]=-(n*(f*m-h*v)-u*(r*m-o*v)+p*(r*h-o*f)),t[10]=n*(s*m-l*v)-a*(r*m-o*v)+p*(r*l-o*s),t[11]=-(n*(s*h-l*f)-a*(r*h-o*f)+u*(r*l-o*s)),t[12]=-(a*(f*y-d*v)-u*(s*y-c*v)+p*(s*d-c*f)),t[13]=n*(f*y-d*v)-u*(r*y-i*v)+p*(r*d-i*f),t[14]=-(n*(s*y-c*v)-a*(r*y-i*v)+p*(r*c-i*s)),t[15]=n*(s*d-c*f)-a*(r*d-i*f)+u*(r*c-i*s),t}function Cd(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],c=t[7],l=t[8],u=t[9],f=t[10],d=t[11],h=t[12],p=t[13],v=t[14],y=t[15],m=e*a-n*o,b=e*s-r*o,O=e*c-i*o,E=n*s-r*a,w=n*c-i*a,_=r*c-i*s,S=l*p-u*h,M=l*v-f*h,T=l*y-d*h,A=u*v-f*p,C=u*y-d*p,N=f*y-d*v;return m*N-b*C+O*A+E*T-w*M+_*S}function Pn(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],c=e[5],l=e[6],u=e[7],f=e[8],d=e[9],h=e[10],p=e[11],v=e[12],y=e[13],m=e[14],b=e[15],O=n[0],E=n[1],w=n[2],_=n[3];return t[0]=O*r+E*s+w*f+_*v,t[1]=O*i+E*c+w*d+_*y,t[2]=O*o+E*l+w*h+_*m,t[3]=O*a+E*u+w*p+_*b,O=n[4],E=n[5],w=n[6],_=n[7],t[4]=O*r+E*s+w*f+_*v,t[5]=O*i+E*c+w*d+_*y,t[6]=O*o+E*l+w*h+_*m,t[7]=O*a+E*u+w*p+_*b,O=n[8],E=n[9],w=n[10],_=n[11],t[8]=O*r+E*s+w*f+_*v,t[9]=O*i+E*c+w*d+_*y,t[10]=O*o+E*l+w*h+_*m,t[11]=O*a+E*u+w*p+_*b,O=n[12],E=n[13],w=n[14],_=n[15],t[12]=O*r+E*s+w*f+_*v,t[13]=O*i+E*c+w*d+_*y,t[14]=O*o+E*l+w*h+_*m,t[15]=O*a+E*u+w*p+_*b,t}function ya(t,e,n){var r=n[0],i=n[1],o=n[2],a,s,c,l,u,f,d,h,p,v,y,m;return e===t?(t[12]=e[0]*r+e[4]*i+e[8]*o+e[12],t[13]=e[1]*r+e[5]*i+e[9]*o+e[13],t[14]=e[2]*r+e[6]*i+e[10]*o+e[14],t[15]=e[3]*r+e[7]*i+e[11]*o+e[15]):(a=e[0],s=e[1],c=e[2],l=e[3],u=e[4],f=e[5],d=e[6],h=e[7],p=e[8],v=e[9],y=e[10],m=e[11],t[0]=a,t[1]=s,t[2]=c,t[3]=l,t[4]=u,t[5]=f,t[6]=d,t[7]=h,t[8]=p,t[9]=v,t[10]=y,t[11]=m,t[12]=a*r+u*i+p*o+e[12],t[13]=s*r+f*i+v*o+e[13],t[14]=c*r+d*i+y*o+e[14],t[15]=l*r+h*i+m*o+e[15]),t}function dy(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function g_(t,e,n,r){var i=r[0],o=r[1],a=r[2],s=Math.hypot(i,o,a),c,l,u,f,d,h,p,v,y,m,b,O,E,w,_,S,M,T,A,C,N,k,R,I;return s<Mn?null:(s=1/s,i*=s,o*=s,a*=s,c=Math.sin(n),l=Math.cos(n),u=1-l,f=e[0],d=e[1],h=e[2],p=e[3],v=e[4],y=e[5],m=e[6],b=e[7],O=e[8],E=e[9],w=e[10],_=e[11],S=i*i*u+l,M=o*i*u+a*c,T=a*i*u-o*c,A=i*o*u-a*c,C=o*o*u+l,N=a*o*u+i*c,k=i*a*u+o*c,R=o*a*u-i*c,I=a*a*u+l,t[0]=f*S+v*M+O*T,t[1]=d*S+y*M+E*T,t[2]=h*S+m*M+w*T,t[3]=p*S+b*M+_*T,t[4]=f*A+v*C+O*N,t[5]=d*A+y*C+E*N,t[6]=h*A+m*C+w*N,t[7]=p*A+b*C+_*N,t[8]=f*k+v*R+O*I,t[9]=d*k+y*R+E*I,t[10]=h*k+m*R+w*I,t[11]=p*k+b*R+_*I,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function nr(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],c=e[7],l=e[8],u=e[9],f=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+l*r,t[5]=a*i+u*r,t[6]=s*i+f*r,t[7]=c*i+d*r,t[8]=l*i-o*r,t[9]=u*i-a*r,t[10]=f*i-s*r,t[11]=d*i-c*r,t}function Xn(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],c=e[3],l=e[8],u=e[9],f=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-l*r,t[1]=a*i-u*r,t[2]=s*i-f*r,t[3]=c*i-d*r,t[8]=o*r+l*i,t[9]=a*r+u*i,t[10]=s*r+f*i,t[11]=c*r+d*i,t}function y_(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],c=e[3],l=e[4],u=e[5],f=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+l*r,t[1]=a*i+u*r,t[2]=s*i+f*r,t[3]=c*i+d*r,t[4]=l*i-o*r,t[5]=u*i-a*r,t[6]=f*i-s*r,t[7]=d*i-c*r,t}function wi(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function ji(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function kd(t,e,n){var r=n[0],i=n[1],o=n[2],a=Math.hypot(r,i,o),s,c,l;return a<Mn?null:(a=1/a,r*=a,i*=a,o*=a,s=Math.sin(e),c=Math.cos(e),l=1-c,t[0]=r*r*l+c,t[1]=i*r*l+o*s,t[2]=o*r*l-i*s,t[3]=0,t[4]=r*i*l-o*s,t[5]=i*i*l+c,t[6]=o*i*l+r*s,t[7]=0,t[8]=r*o*l+i*s,t[9]=i*o*l-r*s,t[10]=o*o*l+c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function Nd(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Rd(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function bc(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function hy(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=r+r,c=i+i,l=o+o,u=r*s,f=r*c,d=r*l,h=i*c,p=i*l,v=o*l,y=a*s,m=a*c,b=a*l;return t[0]=1-(h+v),t[1]=f+b,t[2]=d-m,t[3]=0,t[4]=f-b,t[5]=1-(u+v),t[6]=p+y,t[7]=0,t[8]=d+m,t[9]=p-y,t[10]=1-(u+h),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function Gi(t,e){var n=new er(3),r=-e[0],i=-e[1],o=-e[2],a=e[3],s=e[4],c=e[5],l=e[6],u=e[7],f=r*r+i*i+o*o+a*a;return f>0?(n[0]=(s*a+u*r+c*o-l*i)*2/f,n[1]=(c*a+u*i+l*r-s*o)*2/f,n[2]=(l*a+u*o+s*i-c*r)*2/f):(n[0]=(s*a+u*r+c*o-l*i)*2,n[1]=(c*a+u*i+l*r-s*o)*2,n[2]=(l*a+u*o+s*i-c*r)*2),hy(t,e,n),t}function Ka(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function Li(t,e){var n=e[0],r=e[1],i=e[2],o=e[4],a=e[5],s=e[6],c=e[8],l=e[9],u=e[10];return t[0]=Math.hypot(n,r,i),t[1]=Math.hypot(o,a,s),t[2]=Math.hypot(c,l,u),t}function Za(t,e){var n=new er(3);Li(n,e);var r=1/n[0],i=1/n[1],o=1/n[2],a=e[0]*r,s=e[1]*i,c=e[2]*o,l=e[4]*r,u=e[5]*i,f=e[6]*o,d=e[8]*r,h=e[9]*i,p=e[10]*o,v=a+u+p,y=0;return v>0?(y=Math.sqrt(v+1)*2,t[3]=.25*y,t[0]=(f-h)/y,t[1]=(d-c)/y,t[2]=(s-l)/y):a>u&&a>p?(y=Math.sqrt(1+a-u-p)*2,t[3]=(f-h)/y,t[0]=.25*y,t[1]=(s+l)/y,t[2]=(d+c)/y):u>p?(y=Math.sqrt(1+u-a-p)*2,t[3]=(d-c)/y,t[0]=(s+l)/y,t[1]=.25*y,t[2]=(f+h)/y):(y=Math.sqrt(1+p-a-u)*2,t[3]=(s-l)/y,t[0]=(d+c)/y,t[1]=(f+h)/y,t[2]=.25*y),t}function $p(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=e[3],c=i+i,l=o+o,u=a+a,f=i*c,d=i*l,h=i*u,p=o*l,v=o*u,y=a*u,m=s*c,b=s*l,O=s*u,E=r[0],w=r[1],_=r[2];return t[0]=(1-(p+y))*E,t[1]=(d+O)*E,t[2]=(h-b)*E,t[3]=0,t[4]=(d-O)*w,t[5]=(1-(f+y))*w,t[6]=(v+m)*w,t[7]=0,t[8]=(h+b)*_,t[9]=(v-m)*_,t[10]=(1-(f+p))*_,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function Sr(t,e,n,r,i){var o=e[0],a=e[1],s=e[2],c=e[3],l=o+o,u=a+a,f=s+s,d=o*l,h=o*u,p=o*f,v=a*u,y=a*f,m=s*f,b=c*l,O=c*u,E=c*f,w=r[0],_=r[1],S=r[2],M=i[0],T=i[1],A=i[2],C=(1-(v+m))*w,N=(h+E)*w,k=(p-O)*w,R=(h-E)*_,I=(1-(d+m))*_,D=(y+b)*_,B=(p+O)*S,F=(y-b)*S,G=(1-(d+v))*S;return t[0]=C,t[1]=N,t[2]=k,t[3]=0,t[4]=R,t[5]=I,t[6]=D,t[7]=0,t[8]=B,t[9]=F,t[10]=G,t[11]=0,t[12]=n[0]+M-(C*M+R*T+B*A),t[13]=n[1]+T-(N*M+I*T+F*A),t[14]=n[2]+A-(k*M+D*T+G*A),t[15]=1,t}function ou(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,c=i+i,l=n*a,u=r*a,f=r*s,d=i*a,h=i*s,p=i*c,v=o*a,y=o*s,m=o*c;return t[0]=1-f-p,t[1]=u+m,t[2]=d-y,t[3]=0,t[4]=u-m,t[5]=1-l-p,t[6]=h+v,t[7]=0,t[8]=d+y,t[9]=h-v,t[10]=1-l-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function py(t,e,n,r,i,o,a){var s=1/(n-e),c=1/(i-r),l=1/(o-a);return t[0]=o*2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o*2*c,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(i+r)*c,t[10]=(a+o)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*l,t[15]=0,t}function qp(t,e,n,r,i){var o=1/Math.tan(e/2),a;return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,i!=null&&i!==1/0?(a=1/(r-i),t[10]=(i+r)*a,t[14]=2*i*r*a):(t[10]=-1,t[14]=-2*r),t}var vy=qp;function gy(t,e,n,r,i){var o=1/Math.tan(e/2),a;return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,i!=null&&i!==1/0?(a=1/(r-i),t[10]=i*a,t[14]=i*r*a):(t[10]=-1,t[14]=-r),t}function yy(t,e,n,r){var i=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),c=2/(a+s),l=2/(i+o);return t[0]=c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=-((a-s)*c*.5),t[9]=(i-o)*l*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function Lo(t,e,n,r,i,o,a){var s=1/(e-n),c=1/(r-i),l=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*c,t[14]=(a+o)*l,t[15]=1,t}var Ld=Lo;function vo(t,e,n,r,i,o,a){var s=1/(e-n),c=1/(r-i),l=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=l,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*c,t[14]=o*l,t[15]=1,t}function Id(t,e,n,r){var i,o,a,s,c,l,u,f,d,h,p=e[0],v=e[1],y=e[2],m=r[0],b=r[1],O=r[2],E=n[0],w=n[1],_=n[2];return Math.abs(p-E)<Mn&&Math.abs(v-w)<Mn&&Math.abs(y-_)<Mn?po(t):(u=p-E,f=v-w,d=y-_,h=1/Math.hypot(u,f,d),u*=h,f*=h,d*=h,i=b*d-O*f,o=O*u-m*d,a=m*f-b*u,h=Math.hypot(i,o,a),h?(h=1/h,i*=h,o*=h,a*=h):(i=0,o=0,a=0),s=f*a-d*o,c=d*i-u*a,l=u*o-f*i,h=Math.hypot(s,c,l),h?(h=1/h,s*=h,c*=h,l*=h):(s=0,c=0,l=0),t[0]=i,t[1]=s,t[2]=u,t[3]=0,t[4]=o,t[5]=c,t[6]=f,t[7]=0,t[8]=a,t[9]=l,t[10]=d,t[11]=0,t[12]=-(i*p+o*v+a*y),t[13]=-(s*p+c*v+l*y),t[14]=-(u*p+f*v+d*y),t[15]=1,t)}function my(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=r[0],c=r[1],l=r[2],u=i-n[0],f=o-n[1],d=a-n[2],h=u*u+f*f+d*d;h>0&&(h=1/Math.sqrt(h),u*=h,f*=h,d*=h);var p=c*d-l*f,v=l*u-s*d,y=s*f-c*u;return h=p*p+v*v+y*y,h>0&&(h=1/Math.sqrt(h),p*=h,v*=h,y*=h),t[0]=p,t[1]=v,t[2]=y,t[3]=0,t[4]=f*y-d*v,t[5]=d*p-u*y,t[6]=u*v-f*p,t[7]=0,t[8]=u,t[9]=f,t[10]=d,t[11]=0,t[12]=i,t[13]=o,t[14]=a,t[15]=1,t}function _c(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function Dd(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function Kp(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function Or(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function wc(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function Zp(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function m_(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function Jp(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],c=t[6],l=t[7],u=t[8],f=t[9],d=t[10],h=t[11],p=t[12],v=t[13],y=t[14],m=t[15],b=e[0],O=e[1],E=e[2],w=e[3],_=e[4],S=e[5],M=e[6],T=e[7],A=e[8],C=e[9],N=e[10],k=e[11],R=e[12],I=e[13],D=e[14],B=e[15];return Math.abs(n-b)<=Mn*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(r-O)<=Mn*Math.max(1,Math.abs(r),Math.abs(O))&&Math.abs(i-E)<=Mn*Math.max(1,Math.abs(i),Math.abs(E))&&Math.abs(o-w)<=Mn*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(a-_)<=Mn*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(s-S)<=Mn*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(c-M)<=Mn*Math.max(1,Math.abs(c),Math.abs(M))&&Math.abs(l-T)<=Mn*Math.max(1,Math.abs(l),Math.abs(T))&&Math.abs(u-A)<=Mn*Math.max(1,Math.abs(u),Math.abs(A))&&Math.abs(f-C)<=Mn*Math.max(1,Math.abs(f),Math.abs(C))&&Math.abs(d-N)<=Mn*Math.max(1,Math.abs(d),Math.abs(N))&&Math.abs(h-k)<=Mn*Math.max(1,Math.abs(h),Math.abs(k))&&Math.abs(p-R)<=Mn*Math.max(1,Math.abs(p),Math.abs(R))&&Math.abs(v-I)<=Mn*Math.max(1,Math.abs(v),Math.abs(I))&&Math.abs(y-D)<=Mn*Math.max(1,Math.abs(y),Math.abs(D))&&Math.abs(m-B)<=Mn*Math.max(1,Math.abs(m),Math.abs(B))}var Bd=Pn,x_=Or;function Fd(){var t=new er(9);return er!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function jd(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function Qp(t){var e=new glMatrix.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function ff(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function tv(t,e,n,r,i,o,a,s,c){var l=new er(9);return l[0]=t,l[1]=e,l[2]=n,l[3]=r,l[4]=i,l[5]=o,l[6]=a,l[7]=s,l[8]=c,l}function b_(t,e,n,r,i,o,a,s,c,l){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=c,t[8]=l,t}function __(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function xy(t,e){if(t===e){var n=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function by(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],c=e[6],l=e[7],u=e[8],f=u*a-s*l,d=-u*o+s*c,h=l*o-a*c,p=n*f+r*d+i*h;return p?(p=1/p,t[0]=f*p,t[1]=(-u*r+i*l)*p,t[2]=(s*r-i*a)*p,t[3]=d*p,t[4]=(u*n-i*c)*p,t[5]=(-s*n+i*o)*p,t[6]=h*p,t[7]=(-l*n+r*c)*p,t[8]=(a*n-r*o)*p,t):null}function w_(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],c=e[6],l=e[7],u=e[8];return t[0]=a*u-s*l,t[1]=i*l-r*u,t[2]=r*s-i*a,t[3]=s*c-o*u,t[4]=n*u-i*c,t[5]=i*o-n*s,t[6]=o*l-a*c,t[7]=r*c-n*l,t[8]=n*a-r*o,t}function iA(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],c=t[7],l=t[8];return e*(l*o-a*c)+n*(-l*i+a*s)+r*(c*i-o*s)}function _y(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],c=e[5],l=e[6],u=e[7],f=e[8],d=n[0],h=n[1],p=n[2],v=n[3],y=n[4],m=n[5],b=n[6],O=n[7],E=n[8];return t[0]=d*r+h*a+p*l,t[1]=d*i+h*s+p*u,t[2]=d*o+h*c+p*f,t[3]=v*r+y*a+m*l,t[4]=v*i+y*s+m*u,t[5]=v*o+y*c+m*f,t[6]=b*r+O*a+E*l,t[7]=b*i+O*s+E*u,t[8]=b*o+O*c+E*f,t}function wy(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],c=e[5],l=e[6],u=e[7],f=e[8],d=n[0],h=n[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=c,t[6]=d*r+h*a+l,t[7]=d*i+h*s+u,t[8]=d*o+h*c+f,t}function oA(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],c=e[5],l=e[6],u=e[7],f=e[8],d=Math.sin(n),h=Math.cos(n);return t[0]=h*r+d*a,t[1]=h*i+d*s,t[2]=h*o+d*c,t[3]=h*a-d*r,t[4]=h*s-d*i,t[5]=h*c-d*o,t[6]=l,t[7]=u,t[8]=f,t}function O_(t,e,n){var r=n[0],i=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function ma(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function Oy(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Gd(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function E_(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function S_(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,c=i+i,l=n*a,u=r*a,f=r*s,d=i*a,h=i*s,p=i*c,v=o*a,y=o*s,m=o*c;return t[0]=1-f-p,t[3]=u-m,t[6]=d+y,t[1]=u+m,t[4]=1-l-p,t[7]=h-v,t[2]=d-y,t[5]=h+v,t[8]=1-l-f,t}function aA(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],c=e[6],l=e[7],u=e[8],f=e[9],d=e[10],h=e[11],p=e[12],v=e[13],y=e[14],m=e[15],b=n*s-r*a,O=n*c-i*a,E=n*l-o*a,w=r*c-i*s,_=r*l-o*s,S=i*l-o*c,M=u*v-f*p,T=u*y-d*p,A=u*m-h*p,C=f*y-d*v,N=f*m-h*v,k=d*m-h*y,R=b*k-O*N+E*C+w*A-_*T+S*M;return R?(R=1/R,t[0]=(s*k-c*N+l*C)*R,t[1]=(c*A-a*k-l*T)*R,t[2]=(a*N-s*A+l*M)*R,t[3]=(i*N-r*k-o*C)*R,t[4]=(n*k-i*A+o*T)*R,t[5]=(r*A-n*N-o*M)*R,t[6]=(v*S-y*_+m*w)*R,t[7]=(y*E-p*S-m*O)*R,t[8]=(p*_-v*E+m*b)*R,t):null}function sA(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function cA(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function lA(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function uA(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t}function df(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}function fA(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t}function dA(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t}function Ey(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function M_(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],c=t[6],l=t[7],u=t[8],f=e[0],d=e[1],h=e[2],p=e[3],v=e[4],y=e[5],m=e[6],b=e[7],O=e[8];return Math.abs(n-f)<=glMatrix.EPSILON*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(r-d)<=glMatrix.EPSILON*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(i-h)<=glMatrix.EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(o-p)<=glMatrix.EPSILON*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(a-v)<=glMatrix.EPSILON*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(s-y)<=glMatrix.EPSILON*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(c-m)<=glMatrix.EPSILON*Math.max(1,Math.abs(c),Math.abs(m))&&Math.abs(l-b)<=glMatrix.EPSILON*Math.max(1,Math.abs(l),Math.abs(b))&&Math.abs(u-O)<=glMatrix.EPSILON*Math.max(1,Math.abs(u),Math.abs(O))}var yl=null,ev=null;function rr(){var t=new er(4);return er!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function P_(t){var e=new er(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function na(t,e,n,r){var i=new er(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function au(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function Ja(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function Sy(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function hA(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function pA(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function vA(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function gA(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function yA(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function nv(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t}function ct(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t}function Ot(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function yt(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function me(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}function Ze(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return Math.hypot(n,r,i,o)}function Wn(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return n*n+r*r+i*i+o*o}function Oi(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.hypot(e,n,r,i)}function ur(t){var e=t[0],n=t[1],r=t[2],i=t[3];return e*e+n*n+r*r+i*i}function My(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function mA(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function xa(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a)),t[0]=n*a,t[1]=r*a,t[2]=i*a,t[3]=o*a,t}function zd(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function xA(t,e,n,r){var i=n[0]*r[1]-n[1]*r[0],o=n[0]*r[2]-n[2]*r[0],a=n[0]*r[3]-n[3]*r[0],s=n[1]*r[2]-n[2]*r[1],c=n[1]*r[3]-n[3]*r[1],l=n[2]*r[3]-n[3]*r[2],u=e[0],f=e[1],d=e[2],h=e[3];return t[0]=f*l-d*c+h*s,t[1]=-(u*l)+d*a-h*o,t[2]=u*c-f*a+h*i,t[3]=-(u*s)+f*o-d*i,t}function su(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=e[3];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t[3]=s+r*(n[3]-s),t}function rv(t,e){e=e||1;var n,r,i,o,a,s;do n=glMatrix.RANDOM()*2-1,r=glMatrix.RANDOM()*2-1,a=n*n+r*r;while(a>=1);do i=glMatrix.RANDOM()*2-1,o=glMatrix.RANDOM()*2-1,s=i*i+o*o;while(s>=1);var c=Math.sqrt((1-a)/s);return t[0]=e*n,t[1]=e*r,t[2]=e*i*c,t[3]=e*o*c,t}function Yn(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t}function ir(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],c=n[2],l=n[3],u=l*r+s*o-c*i,f=l*i+c*r-a*o,d=l*o+a*i-s*r,h=-a*r-s*i-c*o;return t[0]=u*l+h*-a+f*-c-d*-s,t[1]=f*l+h*-s+d*-a-u*-c,t[2]=d*l+h*-c+u*-s-f*-a,t[3]=e[3],t}function bA(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function T_(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function Wd(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function A_(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=e[0],s=e[1],c=e[2],l=e[3];return Math.abs(n-a)<=Mn*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-s)<=Mn*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-c)<=Mn*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(o-l)<=Mn*Math.max(1,Math.abs(o),Math.abs(l))}var _A=null,wA=null,iv=null,ml=null,ov=null,C_=null,av=null,k_=function(){var t=rr();return function(e,n,r,i,o,a){var s,c;for(n||(n=4),r||(r=0),i?c=Math.min(i*n+r,e.length):c=e.length,s=r;s<c;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],o(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}}();function ze(){var t=new er(4);return er!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function sv(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function zi(t,e,n){n=n*.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function Yd(t,e){var n=Math.acos(e[3])*2,r=Math.sin(n/2);return r>glMatrix.EPSILON?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n}function cu(t,e){var n=pf(t,e);return Math.acos(2*n*n-1)}function ni(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],c=n[1],l=n[2],u=n[3];return t[0]=r*u+a*s+i*l-o*c,t[1]=i*u+a*c+o*s-r*l,t[2]=o*u+a*l+r*c-i*s,t[3]=a*u-r*s-i*c-o*l,t}function OA(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),c=Math.cos(n);return t[0]=r*c+a*s,t[1]=i*c+o*s,t[2]=o*c-i*s,t[3]=a*c-r*s,t}function EA(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),c=Math.cos(n);return t[0]=r*c-o*s,t[1]=i*c+a*s,t[2]=o*c+r*s,t[3]=a*c-i*s,t}function SA(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),c=Math.cos(n);return t[0]=r*c+i*s,t[1]=i*c-r*s,t[2]=o*c+a*s,t[3]=a*c-o*s,t}function cv(t,e){var n=e[0],r=e[1],i=e[2];return t[0]=n,t[1]=r,t[2]=i,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),t}function Hd(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=Math.sqrt(n*n+r*r+i*i),s=Math.exp(o),c=a>0?s*Math.sin(a)/a:0;return t[0]=n*c,t[1]=r*c,t[2]=i*c,t[3]=s*Math.cos(a),t}function lv(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=Math.sqrt(n*n+r*r+i*i),s=a>0?Math.atan2(a,o)/a:0;return t[0]=n*s,t[1]=r*s,t[2]=i*s,t[3]=.5*Math.log(n*n+r*r+i*i+o*o),t}function MA(t,e,n){return lv(t,e),hf(t,t,n),Hd(t,t),t}function Ud(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=e[3],c=n[0],l=n[1],u=n[2],f=n[3],d,h,p,v,y;return h=i*c+o*l+a*u+s*f,h<0&&(h=-h,c=-c,l=-l,u=-u,f=-f),1-h>Mn?(d=Math.acos(h),p=Math.sin(d),v=Math.sin((1-r)*d)/p,y=Math.sin(r*d)/p):(v=1-r,y=r),t[0]=v*i+y*c,t[1]=v*o+y*l,t[2]=v*a+y*u,t[3]=v*s+y*f,t}function PA(t){var e=glMatrix.RANDOM(),n=glMatrix.RANDOM(),r=glMatrix.RANDOM(),i=Math.sqrt(1-e),o=Math.sqrt(e);return t[0]=i*Math.sin(2*Math.PI*n),t[1]=i*Math.cos(2*Math.PI*n),t[2]=o*Math.sin(2*Math.PI*r),t[3]=o*Math.cos(2*Math.PI*r),t}function Us(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o,s=a?1/a:0;return t[0]=-n*s,t[1]=-r*s,t[2]=-i*s,t[3]=o*s,t}function Ii(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function Qi(t,e){var n=e[0]+e[4]+e[8],r;if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[i*3+i]&&(i=2);var o=(i+1)%3,a=(i+2)%3;r=Math.sqrt(e[i*3+i]-e[o*3+o]-e[a*3+a]+1),t[i]=.5*r,r=.5/r,t[3]=(e[o*3+a]-e[a*3+o])*r,t[o]=(e[o*3+i]+e[i*3+o])*r,t[a]=(e[a*3+i]+e[i*3+a])*r}return t}function ba(t,e,n,r){var i=.5*Math.PI/180;e*=i,n*=i,r*=i;var o=Math.sin(e),a=Math.cos(e),s=Math.sin(n),c=Math.cos(n),l=Math.sin(r),u=Math.cos(r);return t[0]=o*c*u-a*s*l,t[1]=a*s*u+o*c*l,t[2]=a*c*l-o*s*u,t[3]=a*c*u+o*s*l,t}function TA(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var N_=P_,Vs=na,Io=au,Vd=Ja,Py=Sy,Qa=ni,hf=yt,pf=zd,uv=su,vf=Oi,AA=null,CA=ur,kA=null,Oc=xa,NA=Wd,fv=A_,Xd=function(){var t=Gt(),e=te(1,0,0),n=te(0,1,0);return function(r,i,o){var a=Yt(i,o);return a<-.999999?(Wt(t,e,i),Br(t)<1e-6&&Wt(t,n,i),It(t,t),zi(r,t,Math.PI),r):a>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(Wt(t,i,o),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+a,Oc(r,r))}}(),R_=function(){var t=ze(),e=ze();return function(n,r,i,o,a,s){return Ud(t,r,a,s),Ud(e,i,o,s),Ud(n,t,e,2*s*(1-s)),n}}(),U=function(){var t=Fd();return function(e,n,r,i){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=i[0],t[4]=i[1],t[7]=i[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],Oc(e,Qi(e,t))}}();function lu(){var t=new er(2);return er!=Float32Array&&(t[0]=0,t[1]=0),t}function dv(t){var e=new glMatrix.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e}function Do(t,e){var n=new er(2);return n[0]=t,n[1]=e,n}function xn(t,e){return t[0]=e[0],t[1]=e[1],t}function RA(t,e,n){return t[0]=e,t[1]=n,t}function LA(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function IA(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function uu(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function DA(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function BA(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function FA(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function jA(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function GA(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}function Ec(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function zA(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function WA(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t}function YA(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.hypot(n,r)}function HA(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function UA(t){var e=t[0],n=t[1];return Math.hypot(e,n)}function Sc(t){var e=t[0],n=t[1];return e*e+n*n}function VA(t,e){return t[0]=-e[0],t[1]=-e[1],t}function XA(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function L_(t,e){var n=e[0],r=e[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t}function I_(t,e){return t[0]*e[0]+t[1]*e[1]}function $A(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t}function fu(t,e,n,r){var i=e[0],o=e[1];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t}function qA(t,e){e=e||1;var n=glMatrix.RANDOM()*2*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t}function KA(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t}function ps(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t}function ZA(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[3]*i+n[6],t[1]=n[1]*r+n[4]*i+n[7],t}function JA(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}function QA(t,e,n,r){var i=e[0]-n[0],o=e[1]-n[1],a=Math.sin(r),s=Math.cos(r);return t[0]=i*s-o*a+n[0],t[1]=i*a+o*s+n[1],t}function tC(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=Math.sqrt(n*n+r*r)*Math.sqrt(i*i+o*o),s=a&&(n*i+r*o)/a;return Math.acos(Math.min(Math.max(s,-1),1))}function eC(t){return t[0]=0,t[1]=0,t}function D_(t){return"vec2("+t[0]+", "+t[1]+")"}function Ty(t,e){return t[0]===e[0]&&t[1]===e[1]}function nC(t,e){var n=t[0],r=t[1],i=e[0],o=e[1];return Math.abs(n-i)<=glMatrix.EPSILON*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-o)<=glMatrix.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))}var rC=null,Ay=null,$d=null,hv=null,iC=null,B_=null,oC=null,Mc=function(){var t=lu();return function(e,n,r,i,o,a){var s,c;for(n||(n=2),r||(r=0),i?c=Math.min(i*n+r,e.length):c=e.length,s=r;s<c;s+=n)t[0]=e[s],t[1]=e[s+1],o(t,t,a),e[s]=t[0],e[s+1]=t[1];return e}}();function Je(t){return typeof t=="number"}function di(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}function Lt(t){return t==null}function Qe(t){return typeof t=="string"}var Cy=function(t,e,n){return t<e?e:t>n?n:t},Nn=Cy,Xs={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0};function $s(t){return Array.isArray(t)&&t.every(function(e){var n=e[0].toLowerCase();return Xs[n]===e.length-1&&"achlmqstvz".includes(n)})}function pv(t){return $s(t)&&t.every(function(e){var n=e[0];return n===n.toUpperCase()})}function ky(t){return pv(t)&&t.every(function(e){var n=e[0];return"ACLMQZ".includes(n)})}var gf={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null};function Ny(t){for(var e=t.pathValue[t.segmentStart],n=e.toLowerCase(),r=t.data;r.length>=Xs[n]&&(n==="m"&&r.length>2?(t.segments.push([e].concat(r.splice(0,2))),n="l",e=e==="m"?"l":"L"):t.segments.push([e].concat(r.splice(0,Xs[n]))),!!Xs[n]););}function Ry(t){var e=t.index,n=t.pathValue,r=n.charCodeAt(e);if(r===48){t.param=0,t.index+=1;return}if(r===49){t.param=1,t.index+=1;return}t.err='[path-util]: invalid Arc flag "'.concat(n[e],'", expecting 0 or 1 at index ').concat(e)}function Wi(t){return t>=48&&t<=57||t===43||t===45||t===46}function Pc(t){return t>=48&&t<=57}function Ly(t){var e=t.max,n=t.pathValue,r=t.index,i=r,o=!1,a=!1,s=!1,c=!1,l;if(i>=e){t.err="[path-util]: Invalid path value at index ".concat(i,', "pathValue" is missing param');return}if(l=n.charCodeAt(i),(l===43||l===45)&&(i+=1,l=n.charCodeAt(i)),!Pc(l)&&l!==46){t.err="[path-util]: Invalid path value at index ".concat(i,', "').concat(n[i],'" is not a number');return}if(l!==46){if(o=l===48,i+=1,l=n.charCodeAt(i),o&&i<e&&l&&Pc(l)){t.err="[path-util]: Invalid path value at index ".concat(r,', "').concat(n[r],'" illegal number');return}for(;i<e&&Pc(n.charCodeAt(i));)i+=1,a=!0;l=n.charCodeAt(i)}if(l===46){for(c=!0,i+=1;Pc(n.charCodeAt(i));)i+=1,s=!0;l=n.charCodeAt(i)}if(l===101||l===69){if(c&&!a&&!s){t.err="[path-util]: Invalid path value at index ".concat(i,', "').concat(n[i],'" invalid float exponent');return}if(i+=1,l=n.charCodeAt(i),(l===43||l===45)&&(i+=1),i<e&&Pc(n.charCodeAt(i)))for(;i<e&&Pc(n.charCodeAt(i));)i+=1;else{t.err="[path-util]: Invalid path value at index ".concat(i,', "').concat(n[i],'" invalid integer exponent');return}}t.index=i,t.param=+t.pathValue.slice(r,i)}function vs(t){var e=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];return t===10||t===13||t===8232||t===8233||t===32||t===9||t===11||t===12||t===160||t>=5760&&e.includes(t)}function du(t){for(var e=t.pathValue,n=t.max;t.index<n&&vs(e.charCodeAt(t.index));)t.index+=1}function qd(t){switch(t|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1}}function xl(t){return(t|32)===97}function Iy(t){var e=t.max,n=t.pathValue,r=t.index,i=n.charCodeAt(r),o=Xs[n[r].toLowerCase()];if(t.segmentStart=r,!qd(i)){t.err='[path-util]: Invalid path value "'.concat(n[r],'" is not a path command');return}if(t.index+=1,du(t),t.data=[],!o){Ny(t);return}for(;;){for(var a=o;a>0;a-=1){if(xl(i)&&(a===3||a===4)?Ry(t):Ly(t),t.err.length)return;t.data.push(t.param),du(t),t.index<e&&n.charCodeAt(t.index)===44&&(t.index+=1,du(t))}if(t.index>=t.max||!Wi(n.charCodeAt(t.index)))break}Ny(t)}var go=function(){function t(e){this.pathValue=e,this.segments=[],this.max=e.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""}return t}();function vv(t){if($s(t))return[].concat(t);var e=new go(t);for(du(e);e.index<e.max&&!e.err.length;)Iy(e);return e.err?e.err:e.segments}function F_(t){if(pv(t))return[].concat(t);var e=vv(t),n=0,r=0,i=0,o=0;return e.map(function(a){var s=a.slice(1).map(Number),c=a[0],l=c.toUpperCase();if(c==="M")return n=s[0],r=s[1],i=n,o=r,["M",n,r];var u;if(c!==l)switch(l){case"A":u=[l,s[0],s[1],s[2],s[3],s[4],s[5]+n,s[6]+r];break;case"V":u=[l,s[0]+r];break;case"H":u=[l,s[0]+n];break;default:{var f=s.map(function(h,p){return h+(p%2?r:n)});u=[l].concat(f)}}else u=[l].concat(s);var d=u.length;switch(l){case"Z":n=i,r=o;break;case"H":n=u[1];break;case"V":r=u[1];break;default:n=u[d-2],r=u[d-1],l==="M"&&(i=n,o=r)}return u})}function j_(t,e){var n=t[0],r=e.x1,i=e.y1,o=e.x2,a=e.y2,s=t.slice(1).map(Number),c=t;if("TQ".includes(n)||(e.qx=null,e.qy=null),n==="H")c=["L",t[1],i];else if(n==="V")c=["L",r,t[1]];else if(n==="S"){var l=r*2-o,u=i*2-a;e.x1=l,e.y1=u,c=["C",l,u].concat(s)}else if(n==="T"){var f=r*2-e.qx,d=i*2-e.qy;e.qx=f,e.qy=d,c=["Q",f,d].concat(s)}else if(n==="Q"){var h=s[0],p=s[1];e.qx=h,e.qy=p}return c}function Tc(t){if(ky(t))return[].concat(t);for(var e=F_(t),n=nt({},gf),r=0;r<e.length;r+=1){e[r]=j_(e[r],n);var i=e[r],o=i.length;n.x1=+i[o-2],n.y1=+i[o-1],n.x2=+i[o-4]||n.x1,n.y2=+i[o-3]||n.y1}return e}function gs(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return[r+(o-r)*n,i+(a-i)*n]}function gv(t,e,n,r,i){var o=di([t,e],[n,r]),a={x:0,y:0};if(typeof i=="number")if(i<=0)a={x:t,y:e};else if(i>=o)a={x:n,y:r};else{var s=gs([t,e],[n,r],i/o),c=s[0],l=s[1];a={x:c,y:l}}return{length:o,point:a,min:{x:Math.min(t,n),y:Math.min(e,r)},max:{x:Math.max(t,n),y:Math.max(e,r)}}}function hu(t,e){var n=t.x,r=t.y,i=e.x,o=e.y,a=n*i+r*o,s=Math.sqrt((Math.pow(n,2)+Math.pow(r,2))*(Math.pow(i,2)+Math.pow(o,2))),c=n*o-r*i<0?-1:1,l=c*Math.acos(a/s);return l}function Dy(t,e,n,r,i,o,a,s,c,l){var u=Math.abs,f=Math.sin,d=Math.cos,h=Math.sqrt,p=Math.PI,v=u(n),y=u(r),m=(i%360+360)%360,b=m*(p/180);if(t===s&&e===c)return{x:t,y:e};if(v===0||y===0)return gv(t,e,s,c,l).point;var O=(t-s)/2,E=(e-c)/2,w={x:d(b)*O+f(b)*E,y:-f(b)*O+d(b)*E},_=Math.pow(w.x,2)/Math.pow(v,2)+Math.pow(w.y,2)/Math.pow(y,2);_>1&&(v*=h(_),y*=h(_));var S=Math.pow(v,2)*Math.pow(y,2)-Math.pow(v,2)*Math.pow(w.y,2)-Math.pow(y,2)*Math.pow(w.x,2),M=Math.pow(v,2)*Math.pow(w.y,2)+Math.pow(y,2)*Math.pow(w.x,2),T=S/M;T=T<0?0:T;var A=(o!==a?1:-1)*h(T),C={x:A*(v*w.y/y),y:A*(-(y*w.x)/v)},N={x:d(b)*C.x-f(b)*C.y+(t+s)/2,y:f(b)*C.x+d(b)*C.y+(e+c)/2},k={x:(w.x-C.x)/v,y:(w.y-C.y)/y},R=hu({x:1,y:0},k),I={x:(-w.x-C.x)/v,y:(-w.y-C.y)/y},D=hu(k,I);!a&&D>0?D-=2*p:a&&D<0&&(D+=2*p),D%=2*p;var B=R+D*l,F=v*d(B),G=y*f(B),X={x:d(b)*F-f(b)*G+N.x,y:f(b)*F+d(b)*G+N.y};return X}function G_(t,e,n,r,i,o,a,s,c,l,u){var f,d=u.bbox,h=d===void 0?!0:d,p=u.length,v=p===void 0?!0:p,y=u.sampleSize,m=y===void 0?30:y,b=typeof l=="number",O=t,E=e,w=0,_=[O,E,w],S=[O,E],M=0,T={x:0,y:0},A=[{x:O,y:E}];b&&l<=0&&(T={x:O,y:E});for(var C=0;C<=m;C+=1){if(M=C/m,f=Dy(t,e,n,r,i,o,a,s,c,M),O=f.x,E=f.y,h&&A.push({x:O,y:E}),v&&(w+=di(S,[O,E])),S=[O,E],b&&w>=l&&l>_[2]){var N=(w-l)/(w-_[2]);T={x:S[0]*(1-N)+_[0]*N,y:S[1]*(1-N)+_[1]*N}}_=[O,E,w]}return b&&l>=w&&(T={x:s,y:c}),{length:w,point:T,min:{x:Math.min.apply(null,A.map(function(k){return k.x})),y:Math.min.apply(null,A.map(function(k){return k.y}))},max:{x:Math.max.apply(null,A.map(function(k){return k.x})),y:Math.max.apply(null,A.map(function(k){return k.y}))}}}function z_(t,e,n,r,i,o,a,s,c){var l=1-c;return{x:Math.pow(l,3)*t+3*Math.pow(l,2)*c*n+3*l*Math.pow(c,2)*i+Math.pow(c,3)*a,y:Math.pow(l,3)*e+3*Math.pow(l,2)*c*r+3*l*Math.pow(c,2)*o+Math.pow(c,3)*s}}function pu(t,e,n,r,i,o,a,s,c,l){var u,f=l.bbox,d=f===void 0?!0:f,h=l.length,p=h===void 0?!0:h,v=l.sampleSize,y=v===void 0?10:v,m=typeof c=="number",b=t,O=e,E=0,w=[b,O,E],_=[b,O],S=0,M={x:0,y:0},T=[{x:b,y:O}];m&&c<=0&&(M={x:b,y:O});for(var A=0;A<=y;A+=1){if(S=A/y,u=z_(t,e,n,r,i,o,a,s,S),b=u.x,O=u.y,d&&T.push({x:b,y:O}),p&&(E+=di(_,[b,O])),_=[b,O],m&&E>=c&&c>w[2]){var C=(E-c)/(E-w[2]);M={x:_[0]*(1-C)+w[0]*C,y:_[1]*(1-C)+w[1]*C}}w=[b,O,E]}return m&&c>=E&&(M={x:a,y:s}),{length:E,point:M,min:{x:Math.min.apply(null,T.map(function(N){return N.x})),y:Math.min.apply(null,T.map(function(N){return N.y}))},max:{x:Math.max.apply(null,T.map(function(N){return N.x})),y:Math.max.apply(null,T.map(function(N){return N.y}))}}}function W_(t,e,n,r,i,o,a){var s=1-a;return{x:Math.pow(s,2)*t+2*s*a*n+Math.pow(a,2)*i,y:Math.pow(s,2)*e+2*s*a*r+Math.pow(a,2)*o}}function Y_(t,e,n,r,i,o,a,s){var c,l=s.bbox,u=l===void 0?!0:l,f=s.length,d=f===void 0?!0:f,h=s.sampleSize,p=h===void 0?10:h,v=typeof a=="number",y=t,m=e,b=0,O=[y,m,b],E=[y,m],w=0,_={x:0,y:0},S=[{x:y,y:m}];v&&a<=0&&(_={x:y,y:m});for(var M=0;M<=p;M+=1){if(w=M/p,c=W_(t,e,n,r,i,o,w),y=c.x,m=c.y,u&&S.push({x:y,y:m}),d&&(b+=di(E,[y,m])),E=[y,m],v&&b>=a&&a>O[2]){var T=(b-a)/(b-O[2]);_={x:E[0]*(1-T)+O[0]*T,y:E[1]*(1-T)+O[1]*T}}O=[y,m,b]}return v&&a>=b&&(_={x:i,y:o}),{length:b,point:_,min:{x:Math.min.apply(null,S.map(function(A){return A.x})),y:Math.min.apply(null,S.map(function(A){return A.y}))},max:{x:Math.max.apply(null,S.map(function(A){return A.x})),y:Math.max.apply(null,S.map(function(A){return A.y}))}}}function Kd(t,e,n){for(var r,i,o,a,s,c,l=Tc(t),u=typeof e=="number",f,d=[],h,p=0,v=0,y=0,m=0,b,O=[],E=[],w=0,_={x:0,y:0},S=_,M=_,T=_,A=0,C=0,N=l.length;C<N;C+=1)b=l[C],h=b[0],f=h==="M",d=f?d:[p,v].concat(b.slice(1)),f?(y=b[1],m=b[2],_={x:y,y:m},S=_,w=0,u&&e<.001&&(T=_)):h==="L"?(r=gv(d[0],d[1],d[2],d[3],(e||0)-A),w=r.length,_=r.min,S=r.max,M=r.point):h==="A"?(i=G_(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],d[8],(e||0)-A,n||{}),w=i.length,_=i.min,S=i.max,M=i.point):h==="C"?(o=pu(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],(e||0)-A,n||{}),w=o.length,_=o.min,S=o.max,M=o.point):h==="Q"?(a=Y_(d[0],d[1],d[2],d[3],d[4],d[5],(e||0)-A,n||{}),w=a.length,_=a.min,S=a.max,M=a.point):h==="Z"&&(d=[p,v,y,m],s=gv(d[0],d[1],d[2],d[3],(e||0)-A),w=s.length,_=s.min,S=s.max,M=s.point),u&&A<e&&A+w>=e&&(T=M),E.push(S),O.push(_),A+=w,c=h!=="Z"?b.slice(-2):[y,m],p=c[0],v=c[1];return u&&e>=A&&(T={x:p,y:v}),{length:A,point:T,min:{x:Math.min.apply(null,O.map(function(k){return k.x})),y:Math.min.apply(null,O.map(function(k){return k.y}))},max:{x:Math.max.apply(null,E.map(function(k){return k.x})),y:Math.max.apply(null,E.map(function(k){return k.y}))}}}function Zd(t,e){return Kd(t,void 0,nt(nt({},e),{bbox:!1,length:!0})).length}function ri(t){return Array.isArray(t)}var Ac=function(t){if(ri(t))return t.reduce(function(e,n){return Math.min(e,n)},t[0])};function Cc(t){if(!Array.isArray(t))return-1/0;var e=t.length;if(!e)return-1/0;for(var n=t[0],r=1;r<e;r++)n=Math.max(n,t[r]);return n}var By=1e-5;function qs(t,e,n){return n===void 0&&(n=By),t===e||Math.abs(t-e)<n}var H_=function(t,e){return(t%e+e)%e},kc=H_;function Fy(t,e,n){if(t[n].length>7){t[n].shift();for(var r=t[n],i=n;r.length;)e[n]="A",t.splice(i+=1,0,["C"].concat(r.splice(0,6)));t.splice(n,1)}}function jy(t){return ky(t)&&t.every(function(e){var n=e[0];return"MC".includes(n)})}function yf(t,e,n){var r=t*Math.cos(n)-e*Math.sin(n),i=t*Math.sin(n)+e*Math.cos(n);return{x:r,y:i}}function vu(t,e,n,r,i,o,a,s,c,l){var u=t,f=e,d=n,h=r,p=s,v=c,y=Math.PI*120/180,m=Math.PI/180*(+i||0),b=[],O,E,w,_,S;if(l)E=l[0],w=l[1],_=l[2],S=l[3];else{O=yf(u,f,-m),u=O.x,f=O.y,O=yf(p,v,-m),p=O.x,v=O.y;var M=(u-p)/2,T=(f-v)/2,A=M*M/(d*d)+T*T/(h*h);A>1&&(A=Math.sqrt(A),d*=A,h*=A);var C=d*d,N=h*h,k=(o===a?-1:1)*Math.sqrt(Math.abs((C*N-C*T*T-N*M*M)/(C*T*T+N*M*M)));_=k*d*T/h+(u+p)/2,S=k*-h*M/d+(f+v)/2,E=Math.asin(((f-S)/h*Math.pow(10,9)>>0)/Math.pow(10,9)),w=Math.asin(((v-S)/h*Math.pow(10,9)>>0)/Math.pow(10,9)),E=u<_?Math.PI-E:E,w=p<_?Math.PI-w:w,E<0&&(E=Math.PI*2+E),w<0&&(w=Math.PI*2+w),a&&E>w&&(E-=Math.PI*2),!a&&w>E&&(w-=Math.PI*2)}var R=w-E;if(Math.abs(R)>y){var I=w,D=p,B=v;w=E+y*(a&&w>E?1:-1),p=_+d*Math.cos(w),v=S+h*Math.sin(w),b=vu(p,v,d,h,i,0,a,D,B,[w,I,_,S])}R=w-E;var F=Math.cos(E),G=Math.sin(E),X=Math.cos(w),q=Math.sin(w),J=Math.tan(R/4),et=4/3*d*J,dt=4/3*h*J,_t=[u,f],Dt=[u+et*G,f-dt*F],pt=[p+et*q,v-dt*X],vt=[p,v];if(Dt[0]=2*_t[0]-Dt[0],Dt[1]=2*_t[1]-Dt[1],l)return Dt.concat(pt,vt,b);b=Dt.concat(pt,vt,b);for(var Qt=[],Bt=0,Rt=b.length;Bt<Rt;Bt+=1)Qt[Bt]=Bt%2?yf(b[Bt-1],b[Bt],m).y:yf(b[Bt],b[Bt+1],m).x;return Qt}function U_(t,e,n,r,i,o){var a=.3333333333333333,s=2/3;return[a*t+s*n,a*e+s*r,a*i+s*n,a*o+s*r,i,o]}var yv=function(t,e,n,r){var i=.5,o=gs([t,e],[n,r],i);return ut(ut([],o,!0),[n,r,n,r],!1)};function Gy(t,e){var n=t[0],r=t.slice(1).map(Number),i=r[0],o=r[1],a,s=e.x1,c=e.y1,l=e.x,u=e.y;switch("TQ".includes(n)||(e.qx=null,e.qy=null),n){case"M":return e.x=i,e.y=o,t;case"A":return a=[s,c].concat(r),["C"].concat(vu(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9]));case"Q":return e.qx=i,e.qy=o,a=[s,c].concat(r),["C"].concat(U_(a[0],a[1],a[2],a[3],a[4],a[5]));case"L":return["C"].concat(yv(s,c,i,o));case"Z":return s===l&&c===u?["C",s,c,l,u,l,u]:["C"].concat(yv(s,c,l,u));default:}return t}function bl(t,e){if(e===void 0&&(e=!1),jy(t)){var n=[].concat(t);return e?[n,[]]:n}for(var r=Tc(t),i=nt({},gf),o=[],a="",s=r.length,c,l,u=[],f=0;f<s;f+=1){r[f]&&(a=r[f][0]),o[f]=a;var d=Gy(r[f],i);r[f]=d,Fy(r,o,f),s=r.length,a==="Z"&&u.push(f),c=r[f],l=c.length,i.x1=+c[l-2],i.y1=+c[l-1],i.x2=+c[l-4]||i.x1,i.y2=+c[l-3]||i.y1}return e?[r,u]:r}function zy(t,e){e===void 0&&(e=.5);var n=t.slice(0,2),r=t.slice(2,4),i=t.slice(4,6),o=t.slice(6,8),a=gs(n,r,e),s=gs(r,i,e),c=gs(i,o,e),l=gs(a,s,e),u=gs(s,c,e),f=gs(l,u,e);return[["C"].concat(a,l,f),["C"].concat(u,c,o)]}function Wy(t){return t.map(function(e,n,r){var i=n&&r[n-1].slice(-2).concat(e.slice(1)),o=n?pu(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],{bbox:!1}).length:0,a;return n?a=o?zy(i):[e,e]:a=[e],{s:e,ss:a,l:o}})}function gu(t,e,n){var r=Wy(t),i=Wy(e),o=r.length,a=i.length,s=r.filter(function(y){return y.l}).length,c=i.filter(function(y){return y.l}).length,l=r.filter(function(y){return y.l}).reduce(function(y,m){var b=m.l;return y+b},0)/s||0,u=i.filter(function(y){return y.l}).reduce(function(y,m){var b=m.l;return y+b},0)/c||0,f=n||Math.max(o,a),d=[l,u],h=[f-o,f-a],p=0,v=[r,i].map(function(y,m){return y.l===f?y.map(function(b){return b.s}):y.map(function(b,O){return p=O&&h[m]&&b.l>=d[m],h[m]-=p?1:0,p?b.ss:[b.s]}).flat()});return v[0].length===v[1].length?v:gu(v[0],v[1],f)}function Yy(t,e,n,r,i,o,a,s){return 3*((s-e)*(n+i)-(a-t)*(r+o)+r*(t-i)-n*(e-o)+s*(i+t/3)-a*(o+e/3))/20}function mv(t){var e=0,n=0,r=0;return bl(t).map(function(i){var o;switch(i[0]){case"M":return e=i[1],n=i[2],0;default:var a=i.slice(1),s=a[0],c=a[1],l=a[2],u=a[3],f=a[4],d=a[5];return r=Yy(e,n,s,c,l,u,f,d),o=i.slice(-2),e=o[0],n=o[1],r}}).reduce(function(i,o){return i+o},0)}function yu(t){return mv(t)>=0}function mf(t){var e=t.slice(1).map(function(n,r,i){return r?i[r-1].slice(-2).concat(n.slice(1)):t[0].slice(1).concat(n.slice(1))}).map(function(n){return n.map(function(r,i){return n[n.length-i-2*(1-i%2)]})}).reverse();return[["M"].concat(e[0].slice(0,2))].concat(e.map(function(n){return["C"].concat(n.slice(2))}))}function on(t){return t.map(function(e){return Array.isArray(e)?[].concat(e):e})}function V_(t){var e=t.length,n=e-1;return t.map(function(r,i){return t.map(function(o,a){var s=i+a,c;return a===0||t[s]&&t[s][0]==="M"?(c=t[s],["M"].concat(c.slice(-2))):(s>=e&&(s-=n),t[s])})})}function xv(t,e){var n=t.length-1,r=[],i=0,o=0,a=V_(t);return a.forEach(function(s,c){t.slice(1).forEach(function(l,u){o+=di(t[(c+u)%n].slice(-2),e[u%n].slice(-2))}),r[c]=o,o=0}),i=r.indexOf(Math.min.apply(null,r)),a[i]}var xf=function(t){return t===void 0},le=xf,X_={}.toString,$_=function(t,e){return X_.call(t)==="[object "+e+"]"},ra=$_,q_=function(t){return ra(t,"Boolean")},Ks=q_,Yi=function(t){var e=typeof t;return t!==null&&e==="object"||e==="function"};function Jd(t,e,n){return Kd(t,e,nt(nt({},n),{bbox:!1,length:!0})).point}function bf(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function yo(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function ia(){}var Zs=.7,_l=1/Zs,Js="\\s*([+-]?\\d+)\\s*",mu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",_a="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Hy=/^#([0-9a-f]{3,8})$/,bv=new RegExp("^rgb\\(".concat(Js,",").concat(Js,",").concat(Js,"\\)$")),_v=new RegExp("^rgb\\(".concat(_a,",").concat(_a,",").concat(_a,"\\)$")),Nc=new RegExp("^rgba\\(".concat(Js,",").concat(Js,",").concat(Js,",").concat(mu,"\\)$")),K_=new RegExp("^rgba\\(".concat(_a,",").concat(_a,",").concat(_a,",").concat(mu,"\\)$")),Rc=new RegExp("^hsl\\(".concat(mu,",").concat(_a,",").concat(_a,"\\)$")),Uy=new RegExp("^hsla\\(".concat(mu,",").concat(_a,",").concat(_a,",").concat(mu,"\\)$")),wv={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};bf(ia,wl,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Qd,formatHex:Qd,formatHex8:Z_,formatHsl:J_,formatRgb:Vy,toString:Vy});function Qd(){return this.rgb().formatHex()}function Z_(){return this.rgb().formatHex8()}function J_(){return $y(this).formatHsl()}function Vy(){return this.rgb().formatRgb()}function wl(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Hy.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Ov(e):n===3?new $n(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?th(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?th(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=bv.exec(t))?new $n(e[1],e[2],e[3],1):(e=_v.exec(t))?new $n(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Nc.exec(t))?th(e[1],e[2],e[3],e[4]):(e=K_.exec(t))?th(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Rc.exec(t))?Sv(e[1],e[2]/100,e[3]/100,1):(e=Uy.exec(t))?Sv(e[1],e[2]/100,e[3]/100,e[4]):wv.hasOwnProperty(t)?Ov(wv[t]):t==="transparent"?new $n(NaN,NaN,NaN,0):null}function Ov(t){return new $n(t>>16&255,t>>8&255,t&255,1)}function th(t,e,n,r){return r<=0&&(t=e=n=NaN),new $n(t,e,n,r)}function Ev(t){return t instanceof ia||(t=wl(t)),t?(t=t.rgb(),new $n(t.r,t.g,t.b,t.opacity)):new $n}function xu(t,e,n,r){return arguments.length===1?Ev(t):new $n(t,e,n,r==null?1:r)}function $n(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}bf($n,xu,yo(ia,{brighter:function(e){return e=e==null?_l:Math.pow(_l,e),new $n(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?Zs:Math.pow(Zs,e),new $n(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},clamp:function(){return new $n(wa(this.r),wa(this.g),wa(this.b),Ol(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ts,formatHex:ts,formatHex8:Q_,formatRgb:Xy,toString:Xy}));function ts(){return"#".concat(Lc(this.r)).concat(Lc(this.g)).concat(Lc(this.b))}function Q_(){return"#".concat(Lc(this.r)).concat(Lc(this.g)).concat(Lc(this.b)).concat(Lc((isNaN(this.opacity)?1:this.opacity)*255))}function Xy(){var t=Ol(this.opacity);return"".concat(t===1?"rgb(":"rgba(").concat(wa(this.r),", ").concat(wa(this.g),", ").concat(wa(this.b)).concat(t===1?")":", ".concat(t,")"))}function Ol(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function wa(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Lc(t){return t=wa(t),(t<16?"0":"")+t.toString(16)}function Sv(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new to(t,e,n,r)}function $y(t){if(t instanceof to)return new to(t.h,t.s,t.l,t.opacity);if(t instanceof ia||(t=wl(t)),!t)return new to;if(t instanceof to)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,c=(o+i)/2;return s?(e===o?a=(n-r)/s+(n<r)*6:n===o?a=(r-e)/s+2:a=(e-n)/s+4,s/=c<.5?o+i:2-o-i,a*=60):s=c>0&&c<1?0:a,new to(a,s,c,t.opacity)}function qy(t,e,n,r){return arguments.length===1?$y(t):new to(t,e,n,r==null?1:r)}function to(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}bf(to,qy,yo(ia,{brighter:function(e){return e=e==null?_l:Math.pow(_l,e),new to(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?Zs:Math.pow(Zs,e),new to(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,n=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*n,o=2*r-i;return new $n(nh(e>=240?e-240:e+120,o,i),nh(e,o,i),nh(e<120?e+240:e-120,o,i),this.opacity)},clamp:function(){return new to(bu(this.h),eh(this.s),eh(this.l),Ol(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=Ol(this.opacity);return"".concat(e===1?"hsl(":"hsla(").concat(bu(this.h),", ").concat(eh(this.s)*100,"%, ").concat(eh(this.l)*100,"%").concat(e===1?")":", ".concat(e,")"))}}));function bu(t){return t=(t||0)%360,t<0?t+360:t}function eh(t){return Math.max(0,Math.min(1,t||0))}function nh(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}function Hi(t,e,n,r){var i=t-n,o=e-r;return Math.sqrt(i*i+o*o)}function El(t,e){var n=Math.min.apply(Math,ut([],j(t),!1)),r=Math.min.apply(Math,ut([],j(e),!1)),i=Math.max.apply(Math,ut([],j(t),!1)),o=Math.max.apply(Math,ut([],j(e),!1));return{x:n,y:r,width:i-n,height:o-r}}function Mv(t){return(t+Math.PI*2)%(Math.PI*2)}function _f(t,e){var n=Math.abs(t);return e>0?n:n*-1}function Pv(t,e,n,r,i,o){var a=n,s=r;if(a===0||s===0)return{x:t,y:e};for(var c=i-t,l=o-e,u=Math.abs(c),f=Math.abs(l),d=a*a,h=s*s,p=Math.PI/4,v=0,y=0,m=0;m<4;m++){v=a*Math.cos(p),y=s*Math.sin(p);var b=(d-h)*Math.pow(Math.cos(p),3)/a,O=(h-d)*Math.pow(Math.sin(p),3)/s,E=v-b,w=y-O,_=u-b,S=f-O,M=Math.hypot(w,E),T=Math.hypot(S,_),A=M*Math.asin((E*S-w*_)/(M*T)),C=A/Math.sqrt(d+h-v*v-y*y);p+=C,p=Math.min(Math.PI/2,Math.max(0,p))}return{x:t+_f(v,c),y:e+_f(y,l)}}function rh(t,e,n,r,i,o,a,s){return-1*n*Math.cos(i)*Math.sin(s)-r*Math.sin(i)*Math.cos(s)}function t2(t,e,n,r,i,o,a,s){return-1*n*Math.sin(i)*Math.sin(s)+r*Math.cos(i)*Math.cos(s)}function Ky(t,e,n){return Math.atan(-e/t*Math.tan(n))}function ih(t,e,n){return Math.atan(e/(t*Math.tan(n)))}function Zy(t,e,n,r,i,o){return n*Math.cos(i)*Math.cos(o)-r*Math.sin(i)*Math.sin(o)+t}function Tv(t,e,n,r,i,o){return n*Math.sin(i)*Math.cos(o)+r*Math.cos(i)*Math.sin(o)+e}function e2(t,e,n,r){var i=Math.atan2(r*t,n*e);return(i+Math.PI*2)%(Math.PI*2)}function Av(t,e,n){return{x:t*Math.cos(n),y:e*Math.sin(n)}}function ys(t,e,n){var r=Math.cos(n),i=Math.sin(n);return[t*r-e*i,t*i+e*r]}function oh(t,e,n,r,i,o,a){for(var s=Ky(n,r,i),c=1/0,l=-1/0,u=[o,a],f=-Math.PI*2;f<=Math.PI*2;f+=Math.PI){var d=s+f;o<a?o<d&&d<a&&u.push(d):a<d&&d<o&&u.push(d)}for(var f=0;f<u.length;f++){var h=Zy(t,e,n,r,i,u[f]);h<c&&(c=h),h>l&&(l=h)}for(var p=ih(n,r,i),v=1/0,y=-1/0,m=[o,a],f=-Math.PI*2;f<=Math.PI*2;f+=Math.PI){var b=p+f;o<a?o<b&&b<a&&m.push(b):a<b&&b<o&&m.push(b)}for(var f=0;f<m.length;f++){var O=Tv(t,e,n,r,i,m[f]);O<v&&(v=O),O>y&&(y=O)}return{x:c,y:v,width:l-c,height:y-v}}function n2(t,e,n,r,i,o,a,s,c){var l=ys(s-t,c-e,-i),u=__read(l,2),f=u[0],d=u[1],h=Pv(0,0,n,r,f,d),p=e2(n,r,h.x,h.y);p<o?h=Av(n,r,o):p>a&&(h=Av(n,r,a));var v=ys(h.x,h.y,i);return{x:v[0]+t,y:v[1]+e}}function aC(t,e,n,r,i,o,a,s){var c=(a-o)*s+o,l=rh(t,e,n,r,i,o,a,c),u=t2(t,e,n,r,i,o,a,c);return Mv(Math.atan2(u,l))}var Jy=1e-4;function Qy(t,e,n,r,i,o){var a=-1,s=1/0,c=[n,r],l=20;o&&o>200&&(l=o/10);for(var u=1/l,f=u/10,d=0;d<=l;d++){var h=d*u,p=[i.apply(void 0,ut([],j(t.concat([h])),!1)),i.apply(void 0,ut([],j(e.concat([h])),!1))],v=Hi(c[0],c[1],p[0],p[1]);v<s&&(a=h,s=v)}if(a===0)return{x:t[0],y:e[0]};if(a===1){var y=t.length;return{x:t[y-1],y:e[y-1]}}s=1/0;for(var d=0;d<32&&!(f<Jy);d++){var m=a-f,b=a+f,p=[i.apply(void 0,ut([],j(t.concat([m])),!1)),i.apply(void 0,ut([],j(e.concat([m])),!1))],v=Hi(c[0],c[1],p[0],p[1]);if(m>=0&&v<s)a=m,s=v;else{var O=[i.apply(void 0,ut([],j(t.concat([b])),!1)),i.apply(void 0,ut([],j(e.concat([b])),!1))],E=Hi(c[0],c[1],O[0],O[1]);b<=1&&E<s?(a=b,s=E):f*=.5}}return{x:i.apply(void 0,ut([],j(t.concat([a])),!1)),y:i.apply(void 0,ut([],j(e.concat([a])),!1))}}function r2(t,e){for(var n=0,r=t.length,i=0;i<r;i++){var o=t[i],a=e[i],s=t[(i+1)%r],c=e[(i+1)%r];n+=Hi(o,a,s,c)}return n/2}function Ic(t,e,n,r){return El([t,n],[e,r])}function Dc(t,e,n,r){return Hi(t,e,n,r)}function eo(t,e,n,r,i){return{x:(1-i)*t+i*n,y:(1-i)*e+i*r}}function Cv(t,e,n,r,i,o){var a=(n-t)*(i-t)+(r-e)*(o-e);if(a<0)return Hi(t,e,i,o);var s=(n-t)*(n-t)+(r-e)*(r-e);return a>s?Hi(n,r,i,o):wf(t,e,n,r,i,o)}function wf(t,e,n,r,i,o){var a=[n-t,r-e];if(Ty(a,[0,0]))return Math.sqrt((i-t)*(i-t)+(o-e)*(o-e));var s=[-a[1],a[0]];L_(s,s);var c=[i-t,o-e];return Math.abs(I_(c,s))}function Of(t,e,n,r){return Math.atan2(r-e,n-t)}function Te(t,e,n,r,i){var o=1-i;return o*o*o*t+3*e*i*o*o+3*n*i*i*o+r*i*i*i}function Ef(t,e,n,r,i){var o=1-i;return 3*(o*o*(e-t)+2*o*i*(n-e)+i*i*(r-n))}function ah(t,e,n,r){var i=-3*t+9*e-9*n+3*r,o=6*t-12*e+6*n,a=3*e-3*t,s=[],c,l,u;if(qs(i,0))qs(o,0)||(c=-a/o,c>=0&&c<=1&&s.push(c));else{var f=o*o-4*i*a;qs(f,0)?s.push(-o/(2*i)):f>0&&(u=Math.sqrt(f),c=(-o+u)/(2*i),l=(-o-u)/(2*i),c>=0&&c<=1&&s.push(c),l>=0&&l<=1&&s.push(l))}return s}function Sl(t,e,n,r,i,o,a,s,c){var l=Te(t,n,i,a,c),u=Te(e,r,o,s,c),f=eo(t,e,n,r,c),d=eo(n,r,i,o,c),h=eo(i,o,a,s,c),p=eo(f.x,f.y,d.x,d.y,c),v=eo(d.x,d.y,h.x,h.y,c);return[[t,e,f.x,f.y,p.x,p.y,l,u],[l,u,v.x,v.y,h.x,h.y,a,s]]}function kv(t,e,n,r,i,o,a,s,c){if(c===0)return r2([t,n,i,a],[e,r,o,s]);var l=Sl(t,e,n,r,i,o,a,s,.5),u=__spreadArray(__spreadArray([],__read(l[0]),!1),[c-1],!1),f=__spreadArray(__spreadArray([],__read(l[1]),!1),[c-1],!1);return kv.apply(void 0,__spreadArray([],__read(u),!1))+kv.apply(void 0,__spreadArray([],__read(f),!1))}function Sf(t,e,n,r,i,o,a,s){for(var c=[t,a],l=[e,s],u=ah(t,n,i,a),f=ah(e,r,o,s),d=0;d<u.length;d++)c.push(Te(t,n,i,a,u[d]));for(var d=0;d<f.length;d++)l.push(Te(e,r,o,s,f[d]));return El(c,l)}function i2(t,e,n,r,i,o,a,s){return kv(t,e,n,r,i,o,a,s,3)}function no(t,e,n,r,i,o,a,s,c,l,u){return Qy([t,n,i,a],[e,r,o,s],c,l,Te,u)}function tm(t,e,n,r,i,o,a,s,c,l,u){var f=no(t,e,n,r,i,o,a,s,c,l,u);return Hi(f.x,f.y,c,l)}function sC(t,e,n,r,i,o,a,s,c){return{x:Te(t,n,i,a,c),y:Te(e,r,o,s,c)}}function o2(t,e,n,r,i,o,a,s,c){var l=Ef(t,n,i,a,c),u=Ef(e,r,o,s,c);return Mv(Math.atan2(u,l))}function em(t){for(var e=0,n=[],r=0;r<t.length-1;r++){var i=t[r],o=t[r+1],a=Hi(i[0],i[1],o[0],o[1]),s={from:i,to:o,length:a};n.push(s),e+=a}return{segments:n,totalLength:e}}function Nv(t){if(t.length<2)return 0;for(var e=0,n=0;n<t.length-1;n++){var r=t[n],i=t[n+1];e+=Hi(r[0],r[1],i[0],i[1])}return e}function nm(t,e){if(e>1||e<0||t.length<2)return null;var n=em(t),r=n.segments,i=n.totalLength;if(i===0)return{x:t[0][0],y:t[0][1]};for(var o=0,a=null,s=0;s<r.length;s++){var c=r[s],l=c.from,u=c.to,f=c.length/i;if(e>=o&&e<=o+f){var d=(e-o)/f;a=eo(l[0],l[1],u[0],u[1],d);break}o+=f}return a}function rm(t,e){if(e>1||e<0||t.length<2)return 0;for(var n=em(t),r=n.segments,i=n.totalLength,o=0,a=0,s=0;s<r.length;s++){var c=r[s],l=c.from,u=c.to,f=c.length/i;if(e>=o&&e<=o+f){a=Math.atan2(u[1]-l[1],u[0]-l[0]);break}o+=f}return a}function im(t,e,n){for(var r=1/0,i=0;i<t.length-1;i++){var o=t[i],a=t[i+1],s=Cv(o[0],o[1],a[0],a[1],e,n);s<r&&(r=s)}return r}function Qs(t){for(var e=[],n=[],r=0;r<t.length;r++){var i=t[r];e.push(i[0]),n.push(i[1])}return El(e,n)}function Ui(t){return Nv(t)}function om(t,e){return nm(t,e)}function cC(t,e,n){return im(t,e,n)}function am(t,e){return rm(t,e)}function sh(t){var e=t.slice(0);return t.length&&e.push(t[0]),e}function lC(t){return Qs(t)}function ch(t){return Nv(sh(t))}function a2(t,e){return nm(sh(t),e)}function s2(t,e,n){return im(sh(t),e,n)}function uC(t,e){return rm(sh(t),e)}function Mf(t,e,n,r){var i=1-r;return i*i*t+2*r*i*e+r*r*n}function sm(t,e,n){var r=t+n-2*e;if(qs(r,0))return[.5];var i=(t-e)/r;return i<=1&&i>=0?[i]:[]}function c2(t,e,n,r,i,o,a){var s=Mf(t,n,i,a),c=Mf(e,r,o,a),l=eo(t,e,n,r,a),u=eo(n,r,i,o,a);return[[t,e,l.x,l.y,s,c],[s,c,u.x,u.y,i,o]]}function lh(t,e,n,r,i,o,a){if(a===0)return(Hi(t,e,n,r)+Hi(n,r,i,o)+Hi(t,e,i,o))/2;var s=c2(t,e,n,r,i,o,.5),c=s[0],l=s[1];return c.push(a-1),l.push(a-1),lh.apply(void 0,__spreadArray([],__read(c),!1))+lh.apply(void 0,__spreadArray([],__read(l),!1))}function uh(t,e,n,r,i,o){var a=sm(t,n,i)[0],s=sm(e,r,o)[0],c=[t,i],l=[e,o];return a!==void 0&&c.push(Mf(t,n,i,a)),s!==void 0&&l.push(Mf(e,r,o,s)),El(c,l)}function fC(t,e,n,r,i,o){return lh(t,e,n,r,i,o,3)}function Rv(t,e,n,r,i,o,a,s){return Qy([t,n,i],[e,r,o],a,s,Mf)}function cm(t,e,n,r,i,o,a,s){var c=Rv(t,e,n,r,i,o,a,s);return Hi(c.x,c.y,a,s)}var Pf=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof gt.g!="undefined"?gt.g:typeof self!="undefined"?self:{},fh={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Pf,function(){function n(w,_,S,M,T){r(w,_,S||0,M||w.length-1,T||o)}function r(w,_,S,M,T){for(;M>S;){if(M-S>600){var A=M-S+1,C=_-S+1,N=Math.log(A),k=.5*Math.exp(2*N/3),R=.5*Math.sqrt(N*k*(A-k)/A)*(C-A/2<0?-1:1),I=Math.max(S,Math.floor(_-C*k/A+R)),D=Math.min(M,Math.floor(_+(A-C)*k/A+R));r(w,_,I,D,T)}var B=w[_],F=S,G=M;for(i(w,S,_),T(w[M],B)>0&&i(w,S,M);F<G;){for(i(w,F,G),F++,G--;T(w[F],B)<0;)F++;for(;T(w[G],B)>0;)G--}T(w[S],B)===0?i(w,S,G):(G++,i(w,G,M)),G<=_&&(S=G+1),_<=G&&(M=G-1)}}function i(w,_,S){var M=w[_];w[_]=w[S],w[S]=M}function o(w,_){return w<_?-1:w>_?1:0}var a=function(_){_===void 0&&(_=9),this._maxEntries=Math.max(4,_),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()};a.prototype.all=function(){return this._all(this.data,[])},a.prototype.search=function(_){var S=this.data,M=[];if(!b(_,S))return M;for(var T=this.toBBox,A=[];S;){for(var C=0;C<S.children.length;C++){var N=S.children[C],k=S.leaf?T(N):N;b(_,k)&&(S.leaf?M.push(N):m(_,k)?this._all(N,M):A.push(N))}S=A.pop()}return M},a.prototype.collides=function(_){var S=this.data;if(!b(_,S))return!1;for(var M=[];S;){for(var T=0;T<S.children.length;T++){var A=S.children[T],C=S.leaf?this.toBBox(A):A;if(b(_,C)){if(S.leaf||m(_,C))return!0;M.push(A)}}S=M.pop()}return!1},a.prototype.load=function(_){if(!(_&&_.length))return this;if(_.length<this._minEntries){for(var S=0;S<_.length;S++)this.insert(_[S]);return this}var M=this._build(_.slice(),0,_.length-1,0);if(!this.data.children.length)this.data=M;else if(this.data.height===M.height)this._splitRoot(this.data,M);else{if(this.data.height<M.height){var T=this.data;this.data=M,M=T}this._insert(M,this.data.height-M.height-1,!0)}return this},a.prototype.insert=function(_){return _&&this._insert(_,this.data.height-1),this},a.prototype.clear=function(){return this.data=O([]),this},a.prototype.remove=function(_,S){if(!_)return this;for(var M=this.data,T=this.toBBox(_),A=[],C=[],N,k,R;M||A.length;){if(M||(M=A.pop(),k=A[A.length-1],N=C.pop(),R=!0),M.leaf){var I=s(_,M.children,S);if(I!==-1)return M.children.splice(I,1),A.push(M),this._condense(A),this}!R&&!M.leaf&&m(M,T)?(A.push(M),C.push(N),N=0,k=M,M=M.children[0]):k?(N++,M=k.children[N],R=!1):M=null}return this},a.prototype.toBBox=function(_){return _},a.prototype.compareMinX=function(_,S){return _.minX-S.minX},a.prototype.compareMinY=function(_,S){return _.minY-S.minY},a.prototype.toJSON=function(){return this.data},a.prototype.fromJSON=function(_){return this.data=_,this},a.prototype._all=function(_,S){for(var M=[];_;)_.leaf?S.push.apply(S,_.children):M.push.apply(M,_.children),_=M.pop();return S},a.prototype._build=function(_,S,M,T){var A=M-S+1,C=this._maxEntries,N;if(A<=C)return N=O(_.slice(S,M+1)),c(N,this.toBBox),N;T||(T=Math.ceil(Math.log(A)/Math.log(C)),C=Math.ceil(A/Math.pow(C,T-1))),N=O([]),N.leaf=!1,N.height=T;var k=Math.ceil(A/C),R=k*Math.ceil(Math.sqrt(C));E(_,S,M,R,this.compareMinX);for(var I=S;I<=M;I+=R){var D=Math.min(I+R-1,M);E(_,I,D,k,this.compareMinY);for(var B=I;B<=D;B+=k){var F=Math.min(B+k-1,D);N.children.push(this._build(_,B,F,T-1))}}return c(N,this.toBBox),N},a.prototype._chooseSubtree=function(_,S,M,T){for(;T.push(S),!(S.leaf||T.length-1===M);){for(var A=1/0,C=1/0,N=void 0,k=0;k<S.children.length;k++){var R=S.children[k],I=h(R),D=v(_,R)-I;D<C?(C=D,A=I<A?I:A,N=R):D===C&&I<A&&(A=I,N=R)}S=N||S.children[0]}return S},a.prototype._insert=function(_,S,M){var T=M?_:this.toBBox(_),A=[],C=this._chooseSubtree(T,this.data,S,A);for(C.children.push(_),u(C,T);S>=0&&A[S].children.length>this._maxEntries;)this._split(A,S),S--;this._adjustParentBBoxes(T,A,S)},a.prototype._split=function(_,S){var M=_[S],T=M.children.length,A=this._minEntries;this._chooseSplitAxis(M,A,T);var C=this._chooseSplitIndex(M,A,T),N=O(M.children.splice(C,M.children.length-C));N.height=M.height,N.leaf=M.leaf,c(M,this.toBBox),c(N,this.toBBox),S?_[S-1].children.push(N):this._splitRoot(M,N)},a.prototype._splitRoot=function(_,S){this.data=O([_,S]),this.data.height=_.height+1,this.data.leaf=!1,c(this.data,this.toBBox)},a.prototype._chooseSplitIndex=function(_,S,M){for(var T,A=1/0,C=1/0,N=S;N<=M-S;N++){var k=l(_,0,N,this.toBBox),R=l(_,N,M,this.toBBox),I=y(k,R),D=h(k)+h(R);I<A?(A=I,T=N,C=D<C?D:C):I===A&&D<C&&(C=D,T=N)}return T||M-S},a.prototype._chooseSplitAxis=function(_,S,M){var T=_.leaf?this.compareMinX:f,A=_.leaf?this.compareMinY:d,C=this._allDistMargin(_,S,M,T),N=this._allDistMargin(_,S,M,A);C<N&&_.children.sort(T)},a.prototype._allDistMargin=function(_,S,M,T){_.children.sort(T);for(var A=this.toBBox,C=l(_,0,S,A),N=l(_,M-S,M,A),k=p(C)+p(N),R=S;R<M-S;R++){var I=_.children[R];u(C,_.leaf?A(I):I),k+=p(C)}for(var D=M-S-1;D>=S;D--){var B=_.children[D];u(N,_.leaf?A(B):B),k+=p(N)}return k},a.prototype._adjustParentBBoxes=function(_,S,M){for(var T=M;T>=0;T--)u(S[T],_)},a.prototype._condense=function(_){for(var S=_.length-1,M=void 0;S>=0;S--)_[S].children.length===0?S>0?(M=_[S-1].children,M.splice(M.indexOf(_[S]),1)):this.clear():c(_[S],this.toBBox)};function s(w,_,S){if(!S)return _.indexOf(w);for(var M=0;M<_.length;M++)if(S(w,_[M]))return M;return-1}function c(w,_){l(w,0,w.children.length,_,w)}function l(w,_,S,M,T){T||(T=O(null)),T.minX=1/0,T.minY=1/0,T.maxX=-1/0,T.maxY=-1/0;for(var A=_;A<S;A++){var C=w.children[A];u(T,w.leaf?M(C):C)}return T}function u(w,_){return w.minX=Math.min(w.minX,_.minX),w.minY=Math.min(w.minY,_.minY),w.maxX=Math.max(w.maxX,_.maxX),w.maxY=Math.max(w.maxY,_.maxY),w}function f(w,_){return w.minX-_.minX}function d(w,_){return w.minY-_.minY}function h(w){return(w.maxX-w.minX)*(w.maxY-w.minY)}function p(w){return w.maxX-w.minX+(w.maxY-w.minY)}function v(w,_){return(Math.max(_.maxX,w.maxX)-Math.min(_.minX,w.minX))*(Math.max(_.maxY,w.maxY)-Math.min(_.minY,w.minY))}function y(w,_){var S=Math.max(w.minX,_.minX),M=Math.max(w.minY,_.minY),T=Math.min(w.maxX,_.maxX),A=Math.min(w.maxY,_.maxY);return Math.max(0,T-S)*Math.max(0,A-M)}function m(w,_){return w.minX<=_.minX&&w.minY<=_.minY&&_.maxX<=w.maxX&&_.maxY<=w.maxY}function b(w,_){return _.minX<=w.maxX&&_.minY<=w.maxY&&_.maxX>=w.minX&&_.maxY>=w.minY}function O(w){return{children:w,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function E(w,_,S,M,T){for(var A=[_,S];A.length;)if(S=A.pop(),_=A.pop(),!(S-_<=M)){var C=_+Math.ceil((S-_)/M/2)*M;n(w,C,_,S,T),A.push(_,C,C,S)}}return a})})(fh);var lm=fh.exports,kt;(function(t){t.GROUP="g",t.CIRCLE="circle",t.ELLIPSE="ellipse",t.IMAGE="image",t.RECT="rect",t.LINE="line",t.POLYLINE="polyline",t.POLYGON="polygon",t.TEXT="text",t.PATH="path",t.HTML="html",t.MESH="mesh"})(kt||(kt={}));var tc;(function(t){t[t.ZERO=0]="ZERO",t[t.NEGATIVE_ONE=1]="NEGATIVE_ONE"})(tc||(tc={}));var Ml=function(){function t(){this.plugins=[]}return t.prototype.addRenderingPlugin=function(e){this.plugins.push(e),this.context.renderingPlugins.push(e)},t.prototype.removeAllRenderingPlugins=function(){var e=this;this.plugins.forEach(function(n){var r=e.context.renderingPlugins.indexOf(n);r>=0&&e.context.renderingPlugins.splice(r,1)})},t}(),ec=function(){function t(e){this.clipSpaceNearZ=tc.NEGATIVE_ONE,this.plugins=[],this.config=nt({enableDirtyCheck:!0,enableCulling:!1,enableAutoRendering:!0,enableDirtyRectangleRendering:!0,enableDirtyRectangleRenderingDebug:!1,enableSizeAttenuation:!0},e)}return t.prototype.registerPlugin=function(e){var n=this.plugins.findIndex(function(r){return r===e});n===-1&&this.plugins.push(e)},t.prototype.unregisterPlugin=function(e){var n=this.plugins.findIndex(function(r){return r===e});n>-1&&this.plugins.splice(n,1)},t.prototype.getPlugins=function(){return this.plugins},t.prototype.getPlugin=function(e){return this.plugins.find(function(n){return n.name===e})},t.prototype.getConfig=function(){return this.config},t.prototype.setConfig=function(e){Object.assign(this.config,e)},t}();function Oa(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Lv(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function Tf(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function um(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function l2(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function u2(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function _u(t){return t===void 0?0:t>360||t<-360?t%360:t}function mo(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=0),Array.isArray(t)&&t.length===3?ea(t):Je(t)?te(t,e,n):te(t[0],t[1]||e,t[2]||n)}function qn(t){return t*(Math.PI/180)}function Ea(t){return t*(180/Math.PI)}function dC(t){return t=t%400,t<0&&(t+=400),t/400*360}function hC(t){return t/360}function f2(t){return 360*t}function d2(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n,s=r*r,c=i*i,l=o*o,u=a+s+c+l,f=n*o-r*i;return f>.499995*u?(t[0]=Math.PI/2,t[1]=2*Math.atan2(r,n),t[2]=0):f<-.499995*u?(t[0]=-Math.PI/2,t[1]=2*Math.atan2(r,n),t[2]=0):(t[0]=Math.asin(2*(n*i-o*r)),t[1]=Math.atan2(2*(n*o+r*i),1-2*(c+l)),t[2]=Math.atan2(2*(n*r+i*o),1-2*(s+c))),t}function fm(t,e){var n,r,i=Math.PI*.5,o=j(Li(Gt(),e),3),a=o[0],s=o[1],c=o[2],l=Math.asin(-e[2]/a);return l<i?l>-i?(n=Math.atan2(e[6]/s,e[10]/c),r=Math.atan2(e[1]/a,e[0]/a)):(r=0,n=-Math.atan2(e[4]/s,e[5]/s)):(r=0,n=Math.atan2(e[4]/s,e[5]/s)),t[0]=n,t[1]=l,t[2]=r,t}function dh(t,e){return e.length===16?fm(t,e):d2(t,e)}function dm(t,e,n,r,i){var o=Math.cos(t),a=Math.sin(t);return tv(r*o,i*a,0,-r*a,i*o,0,e,n,1)}function h2(t,e,n,r,i,o,a,s){s===void 0&&(s=!1);var c=2*o/(n-e),l=2*o/(r-i),u=(n+e)/(n-e),f=(r+i)/(r-i),d,h;return s?(d=-a/(a-o),h=-a*o/(a-o)):(d=-(a+o)/(a-o),h=-2*a*o/(a-o)),t[0]=c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=u,t[9]=f,t[10]=d,t[11]=-1,t[12]=0,t[13]=0,t[14]=h,t[15]=0,t}function hm(t){var e=t[0],n=t[1],r=t[3],i=t[4],o=Math.sqrt(e*e+n*n),a=Math.sqrt(r*r+i*i),s=e*i-n*r;s<0&&(e<i?o=-o:a=-a),o&&(e*=1/o,n*=1/o),a&&(r*=1/a,i*=1/a);var c=Math.atan2(n,e),l=Ea(c);return[t[6],t[7],o,a,l]}var ms=ue(),Sa=ue(),Af=rr(),Ye=[Gt(),Gt(),Gt()],pm=Gt();function p2(t,e,n,r,i,o){if(!v2(ms,t)||(ga(Sa,ms),Sa[3]=0,Sa[7]=0,Sa[11]=0,Sa[15]=1,Math.abs(Cd(Sa))<1e-8))return!1;var a=ms[3],s=ms[7],c=ms[11],l=ms[12],u=ms[13],f=ms[14],d=ms[15];if(a!==0||s!==0||c!==0){Af[0]=a,Af[1]=s,Af[2]=c,Af[3]=d;var h=pr(Sa,Sa);if(!h)return!1;Ad(Sa,Sa),Yn(i,Af,Sa)}else i[0]=i[1]=i[2]=0,i[3]=1;if(e[0]=l,e[1]=u,e[2]=f,g2(Ye,ms),n[0]=cr(Ye[0]),It(Ye[0],Ye[0]),r[0]=Yt(Ye[0],Ye[1]),Bo(Ye[1],Ye[1],Ye[0],1,-r[0]),n[1]=cr(Ye[1]),It(Ye[1],Ye[1]),r[0]/=n[1],r[1]=Yt(Ye[0],Ye[2]),Bo(Ye[2],Ye[2],Ye[0],1,-r[1]),r[2]=Yt(Ye[1],Ye[2]),Bo(Ye[2],Ye[2],Ye[1],1,-r[2]),n[2]=cr(Ye[2]),It(Ye[2],Ye[2]),r[1]/=n[2],r[2]/=n[2],Wt(pm,Ye[1],Ye[2]),Yt(Ye[0],pm)<0)for(var p=0;p<3;p++)n[p]*=-1,Ye[p][0]*=-1,Ye[p][1]*=-1,Ye[p][2]*=-1;return o[0]=.5*Math.sqrt(Math.max(1+Ye[0][0]-Ye[1][1]-Ye[2][2],0)),o[1]=.5*Math.sqrt(Math.max(1-Ye[0][0]+Ye[1][1]-Ye[2][2],0)),o[2]=.5*Math.sqrt(Math.max(1-Ye[0][0]-Ye[1][1]+Ye[2][2],0)),o[3]=.5*Math.sqrt(Math.max(1+Ye[0][0]+Ye[1][1]+Ye[2][2],0)),Ye[2][1]>Ye[1][2]&&(o[0]=-o[0]),Ye[0][2]>Ye[2][0]&&(o[1]=-o[1]),Ye[1][0]>Ye[0][1]&&(o[2]=-o[2]),!0}function v2(t,e){var n=e[15];if(n===0)return!1;for(var r=1/n,i=0;i<16;i++)t[i]=e[i]*r;return!0}function g2(t,e){t[0][0]=e[0],t[0][1]=e[1],t[0][2]=e[2],t[1][0]=e[4],t[1][1]=e[5],t[1][2]=e[6],t[2][0]=e[8],t[2][1]=e[9],t[2][2]=e[10]}function Bo(t,e,n,r,i){t[0]=e[0]*r+n[0]*i,t[1]=e[1]*r+n[1]*i,t[2]=e[2]*r+n[2]*i}var ro=function(){function t(){this.center=[0,0,0],this.halfExtents=[0,0,0],this.min=[0,0,0],this.max=[0,0,0]}return t.isEmpty=function(e){return!e||e.halfExtents[0]===0&&e.halfExtents[1]===0&&e.halfExtents[2]===0},t.prototype.update=function(e,n){Oa(this.center,e),Oa(this.halfExtents,n),Lv(this.min,this.center,this.halfExtents),Tf(this.max,this.center,this.halfExtents)},t.prototype.setMinMax=function(e,n){Tf(this.center,n,e),um(this.center,this.center,.5),Lv(this.halfExtents,n,e),um(this.halfExtents,this.halfExtents,.5),Oa(this.min,e),Oa(this.max,n)},t.prototype.getMin=function(){return this.min},t.prototype.getMax=function(){return this.max},t.prototype.add=function(e){if(!t.isEmpty(e)){if(t.isEmpty(this)){this.setMinMax(e.getMin(),e.getMax());return}var n=this.center,r=n[0],i=n[1],o=n[2],a=this.halfExtents,s=a[0],c=a[1],l=a[2],u=r-s,f=r+s,d=i-c,h=i+c,p=o-l,v=o+l,y=e.center,m=y[0],b=y[1],O=y[2],E=e.halfExtents,w=E[0],_=E[1],S=E[2],M=m-w,T=m+w,A=b-_,C=b+_,N=O-S,k=O+S;M<u&&(u=M),T>f&&(f=T),A<d&&(d=A),C>h&&(h=C),N<p&&(p=N),k>v&&(v=k),n[0]=(u+f)*.5,n[1]=(d+h)*.5,n[2]=(p+v)*.5,a[0]=(f-u)*.5,a[1]=(h-d)*.5,a[2]=(v-p)*.5,this.min[0]=u,this.min[1]=d,this.min[2]=p,this.max[0]=f,this.max[1]=h,this.max[2]=v}},t.prototype.setFromTransformedAABB=function(e,n){var r=this.center,i=this.halfExtents,o=e.center,a=e.halfExtents,s=n[0],c=n[4],l=n[8],u=n[1],f=n[5],d=n[9],h=n[2],p=n[6],v=n[10],y=Math.abs(s),m=Math.abs(c),b=Math.abs(l),O=Math.abs(u),E=Math.abs(f),w=Math.abs(d),_=Math.abs(h),S=Math.abs(p),M=Math.abs(v);r[0]=n[12]+s*o[0]+c*o[1]+l*o[2],r[1]=n[13]+u*o[0]+f*o[1]+d*o[2],r[2]=n[14]+h*o[0]+p*o[1]+v*o[2],i[0]=y*a[0]+m*a[1]+b*a[2],i[1]=O*a[0]+E*a[1]+w*a[2],i[2]=_*a[0]+S*a[1]+M*a[2],Lv(this.min,r,i),Tf(this.max,r,i)},t.prototype.intersects=function(e){var n=this.getMax(),r=this.getMin(),i=e.getMax(),o=e.getMin();return r[0]<=i[0]&&n[0]>=o[0]&&r[1]<=i[1]&&n[1]>=o[1]&&r[2]<=i[2]&&n[2]>=o[2]},t.prototype.intersection=function(e){if(!this.intersects(e))return null;var n=new t,r=l2([0,0,0],this.getMin(),e.getMin()),i=u2([0,0,0],this.getMax(),e.getMax());return n.setMinMax(r,i),n},t.prototype.getNegativeFarPoint=function(e){return e.pnVertexFlag===273?Oa([0,0,0],this.min):e.pnVertexFlag===272?[this.min[0],this.min[1],this.max[2]]:e.pnVertexFlag===257?[this.min[0],this.max[1],this.min[2]]:e.pnVertexFlag===256?[this.min[0],this.max[1],this.max[2]]:e.pnVertexFlag===17?[this.max[0],this.min[1],this.min[2]]:e.pnVertexFlag===16?[this.max[0],this.min[1],this.max[2]]:e.pnVertexFlag===1?[this.max[0],this.max[1],this.min[2]]:[this.max[0],this.max[1],this.max[2]]},t.prototype.getPositiveFarPoint=function(e){return e.pnVertexFlag===273?Oa([0,0,0],this.max):e.pnVertexFlag===272?[this.max[0],this.max[1],this.min[2]]:e.pnVertexFlag===257?[this.max[0],this.min[1],this.max[2]]:e.pnVertexFlag===256?[this.max[0],this.min[1],this.min[2]]:e.pnVertexFlag===17?[this.min[0],this.max[1],this.max[2]]:e.pnVertexFlag===16?[this.min[0],this.max[1],this.min[2]]:e.pnVertexFlag===1?[this.min[0],this.min[1],this.max[2]]:[this.min[0],this.min[1],this.min[2]]},t}(),y2=function(){function t(e,n){this.distance=e||0,this.normal=n||te(0,1,0),this.updatePNVertexFlag()}return t.prototype.updatePNVertexFlag=function(){this.pnVertexFlag=(+(this.normal[0]>=0)<<8)+(+(this.normal[1]>=0)<<4)+ +(this.normal[2]>=0)},t.prototype.distanceToPoint=function(e){return Yt(e,this.normal)-this.distance},t.prototype.normalize=function(){var e=1/Br(this.normal);it(this.normal,this.normal,e),this.distance*=e},t.prototype.intersectsLine=function(e,n,r){var i=this.distanceToPoint(e),o=this.distanceToPoint(n),a=i/(i-o),s=a>=0&&a<=1;return s&&r&&ne(r,e,n,a),s},t}(),Bc;(function(t){t[t.OUTSIDE=4294967295]="OUTSIDE",t[t.INSIDE=0]="INSIDE",t[t.INDETERMINATE=2147483647]="INDETERMINATE"})(Bc||(Bc={}));var vm=function(){function t(e){if(this.planes=[],e)this.planes=e;else for(var n=0;n<6;n++)this.planes.push(new y2)}return t.prototype.extractFromVPMatrix=function(e){var n=j(e,16),r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],c=n[5],l=n[6],u=n[7],f=n[8],d=n[9],h=n[10],p=n[11],v=n[12],y=n[13],m=n[14],b=n[15];Dn(this.planes[0].normal,a-r,u-s,p-f),this.planes[0].distance=b-v,Dn(this.planes[1].normal,a+r,u+s,p+f),this.planes[1].distance=b+v,Dn(this.planes[2].normal,a+i,u+c,p+d),this.planes[2].distance=b+y,Dn(this.planes[3].normal,a-i,u-c,p-d),this.planes[3].distance=b-y,Dn(this.planes[4].normal,a-o,u-l,p-h),this.planes[4].distance=b-m,Dn(this.planes[5].normal,a+o,u+l,p+h),this.planes[5].distance=b+m,this.planes.forEach(function(O){O.normalize(),O.updatePNVertexFlag()})},t}(),Vi=function(){function t(e,n){e===void 0&&(e=0),n===void 0&&(n=0),this.x=0,this.y=0,this.x=e,this.y=n}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copyFrom=function(e){this.x=e.x,this.y=e.y},t}(),wu=function(){function t(e,n,r,i){this.x=e,this.y=n,this.width=r,this.height=i,this.left=e,this.right=e+r,this.top=n,this.bottom=n+i}return t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t.applyTransform=function(e,n){var r=na(e.x,e.y,0,1),i=na(e.x+e.width,e.y,0,1),o=na(e.x,e.y+e.height,0,1),a=na(e.x+e.width,e.y+e.height,0,1),s=rr(),c=rr(),l=rr(),u=rr();Yn(s,r,n),Yn(c,i,n),Yn(l,o,n),Yn(u,a,n);var f=Math.min(s[0],c[0],l[0],u[0]),d=Math.min(s[1],c[1],l[1],u[1]),h=Math.max(s[0],c[0],l[0],u[0]),p=Math.max(s[1],c[1],l[1],u[1]);return t.fromRect({x:f,y:d,width:h-f,height:p-d})},t.prototype.toJSON=function(){},t}(),Kn="Method not implemented.",Ou="Use document.documentElement instead.",Iv="Cannot append a destroyed element.",Bn;(function(t){t[t.ORBITING=0]="ORBITING",t[t.EXPLORING=1]="EXPLORING",t[t.TRACKING=2]="TRACKING"})(Bn||(Bn={}));var Cf;(function(t){t[t.DEFAULT=0]="DEFAULT",t[t.ROTATIONAL=1]="ROTATIONAL",t[t.TRANSLATIONAL=2]="TRANSLATIONAL",t[t.CINEMATIC=3]="CINEMATIC"})(Cf||(Cf={}));var Fo;(function(t){t[t.ORTHOGRAPHIC=0]="ORTHOGRAPHIC",t[t.PERSPECTIVE=1]="PERSPECTIVE"})(Fo||(Fo={}));var gm={UPDATED:"updated"},ym=2e-4,mm=function(){function t(){this.clipSpaceNearZ=tc.NEGATIVE_ONE,this.eventEmitter=new Xa,this.matrix=ue(),this.right=te(1,0,0),this.up=te(0,1,0),this.forward=te(0,0,1),this.position=te(0,0,1),this.focalPoint=te(0,0,0),this.distanceVector=te(0,0,-1),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.maxDistance=1/0,this.minDistance=-1/0,this.zoom=1,this.rotateWorld=!1,this.fov=30,this.near=.1,this.far=1e3,this.aspect=1,this.projectionMatrix=ue(),this.projectionMatrixInverse=ue(),this.jitteredProjectionMatrix=void 0,this.enableUpdate=!0,this.type=Bn.EXPLORING,this.trackingMode=Cf.DEFAULT,this.projectionMode=Fo.PERSPECTIVE,this.frustum=new vm,this.orthoMatrix=ue()}return t.prototype.isOrtho=function(){return this.projectionMode===Fo.ORTHOGRAPHIC},t.prototype.getProjectionMode=function(){return this.projectionMode},t.prototype.getPerspective=function(){return this.jitteredProjectionMatrix||this.projectionMatrix},t.prototype.getPerspectiveInverse=function(){return this.projectionMatrixInverse},t.prototype.getFrustum=function(){return this.frustum},t.prototype.getPosition=function(){return this.position},t.prototype.getFocalPoint=function(){return this.focalPoint},t.prototype.getDollyingStep=function(){return this.dollyingStep},t.prototype.getNear=function(){return this.near},t.prototype.getFar=function(){return this.far},t.prototype.getZoom=function(){return this.zoom},t.prototype.getOrthoMatrix=function(){return this.orthoMatrix},t.prototype.getView=function(){return this.view},t.prototype.setEnableUpdate=function(e){this.enableUpdate=e},t.prototype.setType=function(e,n){return this.type=e,this.type===Bn.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===Bn.TRACKING&&n!==void 0&&this.setTrackingMode(n),this},t.prototype.setProjectionMode=function(e){return this.projectionMode=e,this},t.prototype.setTrackingMode=function(e){if(this.type!==Bn.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=e,this},t.prototype.setWorldRotation=function(e){return this.rotateWorld=e,this._getAngles(),this},t.prototype.getViewTransform=function(){return pr(ue(),this.matrix)},t.prototype.getWorldTransform=function(){return this.matrix},t.prototype.jitterProjectionMatrix=function(e,n){var r=wi(ue(),[e,n,0]);this.jitteredProjectionMatrix=Pn(ue(),r,this.projectionMatrix)},t.prototype.clearJitterProjectionMatrix=function(){this.jitteredProjectionMatrix=void 0},t.prototype.setMatrix=function(e){return this.matrix=e,this._update(),this},t.prototype.setProjectionMatrix=function(e){this.projectionMatrix=e},t.prototype.setFov=function(e){return this.setPerspective(this.near,this.far,e,this.aspect),this},t.prototype.setAspect=function(e){return this.setPerspective(this.near,this.far,this.fov,e),this},t.prototype.setNear=function(e){return this.projectionMode===Fo.PERSPECTIVE?this.setPerspective(e,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,e,this.far),this},t.prototype.setFar=function(e){return this.projectionMode===Fo.PERSPECTIVE?this.setPerspective(this.near,e,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,e),this},t.prototype.setViewOffset=function(e,n,r,i,o,a){return this.aspect=e/n,this.view===void 0&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=o,this.view.height=a,this.projectionMode===Fo.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this},t.prototype.clearViewOffset=function(){return this.view!==void 0&&(this.view.enabled=!1),this.projectionMode===Fo.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this},t.prototype.setZoom=function(e){return this.zoom=e,this.projectionMode===Fo.ORTHOGRAPHIC?this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far):this.projectionMode===Fo.PERSPECTIVE&&this.setPerspective(this.near,this.far,this.fov,this.aspect),this},t.prototype.setZoomByViewportPoint=function(e,n){var r=this.canvas.viewport2Canvas({x:n[0],y:n[1]}),i=r.x,o=r.y,a=this.roll;this.rotate(0,0,-a),this.setPosition(i,o),this.setFocalPoint(i,o),this.setZoom(e),this.rotate(0,0,a);var s=this.canvas.viewport2Canvas({x:n[0],y:n[1]}),c=s.x,l=s.y,u=te(c-i,l-o,0),f=Yt(u,this.right)/cr(this.right),d=Yt(u,this.up)/cr(this.up),h=j(this.getPosition(),2),p=h[0],v=h[1],y=j(this.getFocalPoint(),2),m=y[0],b=y[1];return this.setPosition(p-f,v-d),this.setFocalPoint(m-f,b-d),this},t.prototype.setPerspective=function(e,n,r,i){var o;this.projectionMode=Fo.PERSPECTIVE,this.fov=r,this.near=e,this.far=n,this.aspect=i;var a=this.near*Math.tan(qn(.5*this.fov))/this.zoom,s=2*a,c=this.aspect*s,l=-.5*c;if(!((o=this.view)===null||o===void 0)&&o.enabled){var u=this.view.fullWidth,f=this.view.fullHeight;l+=this.view.offsetX*c/u,a-=this.view.offsetY*s/f,c*=this.view.width/u,s*=this.view.height/f}return h2(this.projectionMatrix,l,l+c,a-s,a,e,this.far,this.clipSpaceNearZ===tc.ZERO),pr(this.projectionMatrixInverse,this.projectionMatrix),this.triggerUpdate(),this},t.prototype.setOrthographic=function(e,n,r,i,o,a){var s;this.projectionMode=Fo.ORTHOGRAPHIC,this.rright=n,this.left=e,this.top=r,this.bottom=i,this.near=o,this.far=a;var c=(this.rright-this.left)/(2*this.zoom),l=(this.top-this.bottom)/(2*this.zoom),u=(this.rright+this.left)/2,f=(this.top+this.bottom)/2,d=u-c,h=u+c,p=f+l,v=f-l;if(!((s=this.view)===null||s===void 0)&&s.enabled){var y=(this.rright-this.left)/this.view.fullWidth/this.zoom,m=(this.top-this.bottom)/this.view.fullHeight/this.zoom;d+=y*this.view.offsetX,h=d+y*this.view.width,p-=m*this.view.offsetY,v=p-m*this.view.height}return this.clipSpaceNearZ===tc.NEGATIVE_ONE?Ld(this.projectionMatrix,d,h,p,v,o,a):vo(this.projectionMatrix,d,h,p,v,o,a),pr(this.projectionMatrixInverse,this.projectionMatrix),this._getOrthoMatrix(),this.triggerUpdate(),this},t.prototype.setPosition=function(e,n,r){n===void 0&&(n=this.position[1]),r===void 0&&(r=this.position[2]);var i=mo(e,n,r);return this._setPosition(i),this.setFocalPoint(this.focalPoint),this.triggerUpdate(),this},t.prototype.setFocalPoint=function(e,n,r){n===void 0&&(n=this.focalPoint[1]),r===void 0&&(r=this.focalPoint[2]);var i=te(0,1,0);if(this.focalPoint=mo(e,n,r),this.trackingMode===Cf.CINEMATIC){var o=mc(Gt(),this.focalPoint,this.position);e=o[0],n=o[1],r=o[2];var a=cr(o),s=Ea(Math.asin(n/a)),c=90+Ea(Math.atan2(r,e)),l=ue();Xn(l,l,qn(c)),nr(l,l,qn(s)),i=Ft(Gt(),[0,1,0],l)}return pr(this.matrix,Id(ue(),this.position,this.focalPoint,i)),this._getAxes(),this._getDistance(),this._getAngles(),this.triggerUpdate(),this},t.prototype.getDistance=function(){return this.distance},t.prototype.getDistanceVector=function(){return this.distanceVector},t.prototype.setDistance=function(e){if(this.distance===e||e<0)return this;this.distance=e,this.distance<ym&&(this.distance=ym),this.dollyingStep=this.distance/100;var n=Gt();e=this.distance;var r=this.forward,i=this.focalPoint;return n[0]=e*r[0]+i[0],n[1]=e*r[1]+i[1],n[2]=e*r[2]+i[2],this._setPosition(n),this.triggerUpdate(),this},t.prototype.setMaxDistance=function(e){return this.maxDistance=e,this},t.prototype.setMinDistance=function(e){return this.minDistance=e,this},t.prototype.setAzimuth=function(e){return this.azimuth=_u(e),this.computeMatrix(),this._getAxes(),this.type===Bn.ORBITING||this.type===Bn.EXPLORING?this._getPosition():this.type===Bn.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this},t.prototype.getAzimuth=function(){return this.azimuth},t.prototype.setElevation=function(e){return this.elevation=_u(e),this.computeMatrix(),this._getAxes(),this.type===Bn.ORBITING||this.type===Bn.EXPLORING?this._getPosition():this.type===Bn.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this},t.prototype.getElevation=function(){return this.elevation},t.prototype.setRoll=function(e){return this.roll=_u(e),this.computeMatrix(),this._getAxes(),this.type===Bn.ORBITING||this.type===Bn.EXPLORING?this._getPosition():this.type===Bn.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this},t.prototype.getRoll=function(){return this.roll},t.prototype._update=function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles(),this._getOrthoMatrix(),this.triggerUpdate()},t.prototype.computeMatrix=function(){var e=zi(ze(),[0,0,1],qn(this.roll));po(this.matrix);var n=zi(ze(),[1,0,0],qn((this.rotateWorld&&this.type!==Bn.TRACKING||this.type===Bn.TRACKING?1:-1)*this.elevation)),r=zi(ze(),[0,1,0],qn((this.rotateWorld&&this.type!==Bn.TRACKING||this.type===Bn.TRACKING?1:-1)*this.azimuth)),i=ni(ze(),r,n);i=ni(ze(),i,e);var o=ou(ue(),i);this.type===Bn.ORBITING||this.type===Bn.EXPLORING?(ya(this.matrix,this.matrix,this.focalPoint),Pn(this.matrix,this.matrix,o),ya(this.matrix,this.matrix,[0,0,this.distance])):this.type===Bn.TRACKING&&(ya(this.matrix,this.matrix,this.position),Pn(this.matrix,this.matrix,o))},t.prototype._setPosition=function(e,n,r){this.position=mo(e,n,r);var i=this.matrix;i[12]=this.position[0],i[13]=this.position[1],i[14]=this.position[2],i[15]=1,this._getOrthoMatrix()},t.prototype._getAxes=function(){lr(this.right,mo(Yn(rr(),[1,0,0,0],this.matrix))),lr(this.up,mo(Yn(rr(),[0,1,0,0],this.matrix))),lr(this.forward,mo(Yn(rr(),[0,0,1,0],this.matrix))),It(this.right,this.right),It(this.up,this.up),It(this.forward,this.forward)},t.prototype._getAngles=function(){var e=this.distanceVector[0],n=this.distanceVector[1],r=this.distanceVector[2],i=cr(this.distanceVector);if(i===0){this.elevation=0,this.azimuth=0;return}this.type===Bn.TRACKING?(this.elevation=Ea(Math.asin(n/i)),this.azimuth=Ea(Math.atan2(-e,-r))):this.rotateWorld?(this.elevation=Ea(Math.asin(n/i)),this.azimuth=Ea(Math.atan2(-e,-r))):(this.elevation=-Ea(Math.asin(n/i)),this.azimuth=-Ea(Math.atan2(-e,-r)))},t.prototype._getPosition=function(){lr(this.position,mo(Yn(rr(),[0,0,0,1],this.matrix))),this._getDistance()},t.prototype._getFocalPoint=function(){we(this.distanceVector,[0,0,-this.distance],jd(Fd(),this.matrix)),No(this.focalPoint,this.position,this.distanceVector),this._getDistance()},t.prototype._getDistance=function(){this.distanceVector=mc(Gt(),this.focalPoint,this.position),this.distance=cr(this.distanceVector),this.dollyingStep=this.distance/100},t.prototype._getOrthoMatrix=function(){if(this.projectionMode===Fo.ORTHOGRAPHIC){var e=this.position,n=zi(ze(),[0,0,1],-this.roll*Math.PI/180);Sr(this.orthoMatrix,n,te((this.rright-this.left)/2-e[0],(this.top-this.bottom)/2-e[1],0),te(this.zoom,this.zoom,1),e)}},t.prototype.triggerUpdate=function(){if(this.enableUpdate){var e=this.getViewTransform(),n=Pn(ue(),this.getPerspective(),e);this.getFrustum().extractFromVPMatrix(n),this.eventEmitter.emit(gm.UPDATED)}},t.prototype.rotate=function(e,n,r){throw new Error(Kn)},t.prototype.pan=function(e,n){throw new Error(Kn)},t.prototype.dolly=function(e){throw new Error(Kn)},t.prototype.createLandmark=function(e,n){throw new Error(Kn)},t.prototype.gotoLandmark=function(e,n){throw new Error(Kn)},t.prototype.cancelLandmarkAnimation=function(){throw new Error(Kn)},t}();function Xi(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError("Expected a function");var n=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=e?e.apply(this,r):r[0],a=n.cache;if(a.has(o))return a.get(o);var s=t.apply(this,r);return n.cache=a.set(o,s)||a,s};return n.cache=new(Xi.Cache||Map),n}Xi.Cache=Map;var Vt;(function(t){t[t.kUnknown=0]="kUnknown",t[t.kNumber=1]="kNumber",t[t.kPercentage=2]="kPercentage",t[t.kEms=3]="kEms",t[t.kPixels=4]="kPixels",t[t.kRems=5]="kRems",t[t.kDegrees=6]="kDegrees",t[t.kRadians=7]="kRadians",t[t.kGradians=8]="kGradians",t[t.kTurns=9]="kTurns",t[t.kMilliseconds=10]="kMilliseconds",t[t.kSeconds=11]="kSeconds",t[t.kInteger=12]="kInteger"})(Vt||(Vt={}));var oa;(function(t){t[t.kUNumber=0]="kUNumber",t[t.kUPercent=1]="kUPercent",t[t.kULength=2]="kULength",t[t.kUAngle=3]="kUAngle",t[t.kUTime=4]="kUTime",t[t.kUOther=5]="kUOther"})(oa||(oa={}));var xm;(function(t){t[t.kAll=0]="kAll",t[t.kNonNegative=1]="kNonNegative",t[t.kInteger=2]="kInteger",t[t.kNonNegativeInteger=3]="kNonNegativeInteger",t[t.kPositiveInteger=4]="kPositiveInteger"})(xm||(xm={}));var Dv;(function(t){t[t.kYes=0]="kYes",t[t.kNo=1]="kNo"})(Dv||(Dv={}));var Bv;(function(t){t[t.kYes=0]="kYes",t[t.kNo=1]="kNo"})(Bv||(Bv={}));var m2=[{name:"em",unit_type:Vt.kEms},{name:"px",unit_type:Vt.kPixels},{name:"deg",unit_type:Vt.kDegrees},{name:"rad",unit_type:Vt.kRadians},{name:"grad",unit_type:Vt.kGradians},{name:"ms",unit_type:Vt.kMilliseconds},{name:"s",unit_type:Vt.kSeconds},{name:"rem",unit_type:Vt.kRems},{name:"turn",unit_type:Vt.kTurns}],Fc;(function(t){t[t.kUnknownType=0]="kUnknownType",t[t.kUnparsedType=1]="kUnparsedType",t[t.kKeywordType=2]="kKeywordType",t[t.kUnitType=3]="kUnitType",t[t.kSumType=4]="kSumType",t[t.kProductType=5]="kProductType",t[t.kNegateType=6]="kNegateType",t[t.kInvertType=7]="kInvertType",t[t.kMinType=8]="kMinType",t[t.kMaxType=9]="kMaxType",t[t.kClampType=10]="kClampType",t[t.kTransformType=11]="kTransformType",t[t.kPositionType=12]="kPositionType",t[t.kURLImageType=13]="kURLImageType",t[t.kColorType=14]="kColorType",t[t.kUnsupportedColorType=15]="kUnsupportedColorType"})(Fc||(Fc={}));var x2=function(t){return m2.find(function(e){return e.name===t}).unit_type},b2=function(t){return t?t==="number"?Vt.kNumber:t==="percent"||t==="%"?Vt.kPercentage:x2(t):Vt.kUnknown},_2=function(t){switch(t){case Vt.kNumber:case Vt.kInteger:return oa.kUNumber;case Vt.kPercentage:return oa.kUPercent;case Vt.kPixels:return oa.kULength;case Vt.kMilliseconds:case Vt.kSeconds:return oa.kUTime;case Vt.kDegrees:case Vt.kRadians:case Vt.kGradians:case Vt.kTurns:return oa.kUAngle;default:return oa.kUOther}},w2=function(t){switch(t){case oa.kUNumber:return Vt.kNumber;case oa.kULength:return Vt.kPixels;case oa.kUPercent:return Vt.kPercentage;case oa.kUTime:return Vt.kSeconds;case oa.kUAngle:return Vt.kDegrees;default:return Vt.kUnknown}},bm=function(t){var e=1;switch(t){case Vt.kPixels:case Vt.kDegrees:case Vt.kSeconds:break;case Vt.kMilliseconds:e=.001;break;case Vt.kRadians:e=180/Math.PI;break;case Vt.kGradians:e=.9;break;case Vt.kTurns:e=360;break}return e},Fv=function(t){switch(t){case Vt.kNumber:case Vt.kInteger:return"";case Vt.kPercentage:return"%";case Vt.kEms:return"em";case Vt.kRems:return"rem";case Vt.kPixels:return"px";case Vt.kDegrees:return"deg";case Vt.kRadians:return"rad";case Vt.kGradians:return"grad";case Vt.kMilliseconds:return"ms";case Vt.kSeconds:return"s";case Vt.kTurns:return"turn"}return""},Eu=function(){function t(){}return t.isAngle=function(e){return e===Vt.kDegrees||e===Vt.kRadians||e===Vt.kGradians||e===Vt.kTurns},t.isLength=function(e){return e>=Vt.kEms&&e<Vt.kDegrees},t.isRelativeUnit=function(e){return e===Vt.kPercentage||e===Vt.kEms||e===Vt.kRems},t.isTime=function(e){return e===Vt.kSeconds||e===Vt.kMilliseconds},t.prototype.toString=function(){return this.buildCSSText(Dv.kNo,Bv.kNo,"")},t.prototype.isNumericValue=function(){return this.getType()>=Fc.kUnitType&&this.getType()<=Fc.kClampType},t}(),_m=function(t){xt(e,t);function e(n){var r=t.call(this)||this;return r.colorSpace=n,r}return e.prototype.getType=function(){return Fc.kColorType},e.prototype.to=function(n){return this},e}(Eu),jc;(function(t){t[t.Constant=0]="Constant",t[t.LinearGradient=1]="LinearGradient",t[t.RadialGradient=2]="RadialGradient"})(jc||(jc={}));var hh=function(t){xt(e,t);function e(n,r){var i=t.call(this)||this;return i.type=n,i.value=r,i}return e.prototype.clone=function(){return new e(this.type,this.value)},e.prototype.buildCSSText=function(n,r,i){return i},e.prototype.getType=function(){return Fc.kColorType},e}(Eu),jo=function(t){xt(e,t);function e(n){var r=t.call(this)||this;return r.value=n,r}return e.prototype.clone=function(){return new e(this.value)},e.prototype.getType=function(){return Fc.kKeywordType},e.prototype.buildCSSText=function(n,r,i){return i+this.value},e}(Eu),O2=Xi(function(t){return t===void 0&&(t=""),t.replace(/-([a-z])/g,function(e){return e[1].toUpperCase()})}),wm=function(t){return t.split("").map(function(e,n){return e.toUpperCase()===e?"".concat(n!==0?"-":"").concat(e.toLowerCase()):e}).join("")};function E2(t){if(!t)throw new Error}function Su(t){return typeof t=="function"}function S2(t){return typeof t=="symbol"}var M2=function(t){return Object.fromEntries(Object.entries(t).filter(function(e){var n=__read(e,2),r=n[1];return r!==void 0}))},P2={d:{alias:"path"},strokeDasharray:{alias:"lineDash"},strokeWidth:{alias:"lineWidth"},textAnchor:{alias:"textAlign"},src:{alias:"img"}},Mu=Xi(function(t){var e=O2(t),n=P2[e];return e=(n==null?void 0:n.alias)||e,e}),T2=function(t,e){e===void 0&&(e="");var n="";return Number.isFinite(t)?(E2(Number.isNaN(t)),n="NaN"):t>0?n="infinity":n="-infinity",n+=e},jv=function(t){return w2(_2(t))},Zn=function(t){xt(e,t);function e(n,r){r===void 0&&(r=Vt.kNumber);var i=t.call(this)||this,o;return typeof r=="string"?o=b2(r):o=r,i.unit=o,i.value=n,i}return e.prototype.clone=function(){return new e(this.value,this.unit)},e.prototype.equals=function(n){var r=n;return this.value===r.value&&this.unit===r.unit},e.prototype.getType=function(){return Fc.kUnitType},e.prototype.convertTo=function(n){if(this.unit===n)return new e(this.value,this.unit);var r=jv(this.unit);if(r!==jv(n)||r===Vt.kUnknown)return null;var i=bm(this.unit)/bm(n);return new e(this.value*i,n)},e.prototype.buildCSSText=function(n,r,i){var o;switch(this.unit){case Vt.kUnknown:break;case Vt.kInteger:o=Number(this.value).toFixed(0);break;case Vt.kNumber:case Vt.kPercentage:case Vt.kEms:case Vt.kRems:case Vt.kPixels:case Vt.kDegrees:case Vt.kRadians:case Vt.kGradians:case Vt.kMilliseconds:case Vt.kSeconds:case Vt.kTurns:{var a=-999999,s=999999,c=this.value,l=Fv(this.unit);if(c<a||c>s){var u=Fv(this.unit);!Number.isFinite(c)||Number.isNaN(c)?o=T2(c,u):o=c+(u||"")}else o="".concat(c).concat(l)}}return i+=o,i},e}(Eu),Yr=new Zn(0,"px");new Zn(1,"px");var Ma=new Zn(0,"deg"),Gv=function(t){xt(e,t);function e(n,r,i,o,a){o===void 0&&(o=1),a===void 0&&(a=!1);var s=t.call(this,"rgb")||this;return s.r=n,s.g=r,s.b=i,s.alpha=o,s.isNone=a,s}return e.prototype.clone=function(){return new e(this.r,this.g,this.b,this.alpha)},e.prototype.buildCSSText=function(n,r,i){return i+"rgba(".concat(this.r,",").concat(this.g,",").concat(this.b,",").concat(this.alpha,")")},e}(_m),vr=new jo("unset"),A2=new jo("initial"),C2=new jo("inherit"),zv={"":vr,unset:vr,initial:A2,inherit:C2},Wv=function(t){return zv[t]||(zv[t]=new jo(t)),zv[t]},ph=new Gv(0,0,0,0,!0),Om=new Gv(0,0,0,0),k2=Xi(function(t,e,n,r){return new Gv(t,e,n,r)},function(t,e,n,r){return"rgba(".concat(t,",").concat(e,",").concat(n,",").concat(r,")")}),or=function(t,e){return e===void 0&&(e=Vt.kNumber),new Zn(t,e)};new Zn(50,"%");var Yv;(function(t){t[t.Standard=0]="Standard"})(Yv||(Yv={}));var Pl;(function(t){t[t.ADDED=0]="ADDED",t[t.REMOVED=1]="REMOVED",t[t.Z_INDEX_CHANGED=2]="Z_INDEX_CHANGED"})(Pl||(Pl={}));var Hv={absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new wu(0,0,0,0)},ee;(function(t){t.COORDINATE="<coordinate>",t.COLOR="<color>",t.PAINT="<paint>",t.NUMBER="<number>",t.ANGLE="<angle>",t.OPACITY_VALUE="<opacity-value>",t.SHADOW_BLUR="<shadow-blur>",t.LENGTH="<length>",t.PERCENTAGE="<percentage>",t.LENGTH_PERCENTAGE="<length> | <percentage>",t.LENGTH_PERCENTAGE_12="[<length> | <percentage>]{1,2}",t.LENGTH_PERCENTAGE_14="[<length> | <percentage>]{1,4}",t.LIST_OF_POINTS="<list-of-points>",t.PATH="<path>",t.FILTER="<filter>",t.Z_INDEX="<z-index>",t.OFFSET_DISTANCE="<offset-distance>",t.DEFINED_PATH="<defined-path>",t.MARKER="<marker>",t.TRANSFORM="<transform>",t.TRANSFORM_ORIGIN="<transform-origin>",t.TEXT="<text>",t.TEXT_TRANSFORM="<text-transform>"})(ee||(ee={}));function N2(t){var e=t.type,n=t.value;return e==="hex"?"#".concat(n):e==="literal"?n:e==="rgb"?"rgb(".concat(n.join(","),")"):"rgba(".concat(n.join(","),")")}var R2=function(){var t={linearGradient:/^(linear\-gradient)/i,repeatingLinearGradient:/^(repeating\-linear\-gradient)/i,radialGradient:/^(radial\-gradient)/i,repeatingRadialGradient:/^(repeating\-radial\-gradient)/i,conicGradient:/^(conic\-gradient)/i,sideOrCorner:/^to (left (top|bottom)|right (top|bottom)|top (left|right)|bottom (left|right)|left|right|top|bottom)/i,extentKeywords:/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,positionKeywords:/^(left|center|right|top|bottom)/i,pixelValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,percentageValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,emValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,angleValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,startCall:/^\(/,endCall:/^\)/,comma:/^,/,hexColor:/^\#([0-9a-fA-F]+)/,literalColor:/^([a-zA-Z]+)/,rgbColor:/^rgb/i,rgbaColor:/^rgba/i,number:/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/},e="";function n(B){throw new Error(e+": "+B)}function r(){var B=i();return e.length>0&&n("Invalid input not EOF"),B}function i(){return O(o)}function o(){return a("linear-gradient",t.linearGradient,c)||a("repeating-linear-gradient",t.repeatingLinearGradient,c)||a("radial-gradient",t.radialGradient,f)||a("repeating-radial-gradient",t.repeatingRadialGradient,f)||a("conic-gradient",t.conicGradient,f)}function a(B,F,G){return s(F,function(X){var q=G();return q&&(I(t.comma)||n("Missing comma before color stops")),{type:B,orientation:q,colorStops:O(E)}})}function s(B,F){var G=I(B);if(G){I(t.startCall)||n("Missing (");var X=F(G);return I(t.endCall)||n("Missing )"),X}}function c(){return l()||u()}function l(){return R("directional",t.sideOrCorner,1)}function u(){return R("angular",t.angleValue,1)}function f(){var B,F=d(),G;return F&&(B=[],B.push(F),G=e,I(t.comma)&&(F=d(),F?B.push(F):e=G)),B}function d(){var B=h()||p();if(B)B.at=y();else{var F=v();if(F){B=F;var G=y();G&&(B.at=G)}else{var X=m();X&&(B={type:"default-radial",at:X})}}return B}function h(){var B=R("shape",/^(circle)/i,0);return B&&(B.style=k()||v()),B}function p(){var B=R("shape",/^(ellipse)/i,0);return B&&(B.style=C()||v()),B}function v(){return R("extent-keyword",t.extentKeywords,1)}function y(){if(R("position",/^at/,0)){var B=m();return B||n("Missing positioning value"),B}}function m(){var B=b();if(B.x||B.y)return{type:"position",value:B}}function b(){return{x:C(),y:C()}}function O(B){var F=B(),G=[];if(F)for(G.push(F);I(t.comma);)F=B(),F?G.push(F):n("One extra comma");return G}function E(){var B=w();return B||n("Expected color definition"),B.length=C(),B}function w(){return S()||T()||M()||_()}function _(){return R("literal",t.literalColor,0)}function S(){return R("hex",t.hexColor,1)}function M(){return s(t.rgbColor,function(){return{type:"rgb",value:O(A)}})}function T(){return s(t.rgbaColor,function(){return{type:"rgba",value:O(A)}})}function A(){return I(t.number)[1]}function C(){return R("%",t.percentageValue,1)||N()||k()}function N(){return R("position-keyword",t.positionKeywords,1)}function k(){return R("px",t.pixelValue,1)||R("em",t.emValue,1)}function R(B,F,G){var X=I(F);if(X)return{type:B,value:X[G]}}function I(B){var F=/^[\n\r\t\s]+/.exec(e);F&&D(F[0].length);var G=B.exec(e);return G&&D(G[0].length),G}function D(B){e=e.substring(B)}return function(B){return e=B,r()}}();function L2(t,e,n,r){var i=qn(r.value),o=0,a=0,s=o+e/2,c=a+n/2,l=Math.abs(e*Math.cos(i))+Math.abs(n*Math.sin(i)),u=t[0]+s-Math.cos(i)*l/2,f=t[1]+c-Math.sin(i)*l/2,d=t[0]+s+Math.cos(i)*l/2,h=t[1]+c+Math.sin(i)*l/2;return{x1:u,y1:f,x2:d,y2:h}}function vh(t,e,n,r,i,o){var a=r.value,s=i.value;r.unit===Vt.kPercentage&&(a=r.value/100*e),i.unit===Vt.kPercentage&&(s=i.value/100*n);var c=Math.max(di([0,0],[a,s]),di([0,n],[a,s]),di([e,n],[a,s]),di([e,0],[a,s]));return o&&(o instanceof Zn?c=o.value:o instanceof jo&&(o.value==="closest-side"?c=Math.min(a,e-a,s,n-s):o.value==="farthest-side"?c=Math.max(a,e-a,s,n-s):o.value==="closest-corner"&&(c=Math.min(di([0,0],[a,s]),di([0,n],[a,s]),di([e,n],[a,s]),di([e,0],[a,s]))))),{x:a+t[0],y:s+t[1],r:c}}var I2=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,D2=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,B2=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,Em=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function F2(t){var e,n,r,i=t.length;t[i-1].length=(e=t[i-1].length)!==null&&e!==void 0?e:{type:"%",value:"100"},i>1&&(t[0].length=(n=t[0].length)!==null&&n!==void 0?n:{type:"%",value:"0"});for(var o=0,a=Number(t[0].length.value),s=1;s<i;s++){var c=(r=t[s].length)===null||r===void 0?void 0:r.value;if(!Lt(c)&&!Lt(a)){for(var l=1;l<s-o;l++)t[o+l].length={type:"%",value:"".concat(a+(Number(c)-a)*l/(s-o))};o=s,a=Number(c)}}}var j2={left:180,top:-90,bottom:90,right:0,"left top":225,"top left":225,"left bottom":135,"bottom left":135,"right top":-45,"top right":-45,"right bottom":45,"bottom right":45},G2=Xi(function(t){var e;return t.type==="angular"?e=Number(t.value):e=j2[t.value]||0,or(e,"deg")}),z2=Xi(function(t){var e=50,n=50,r="%",i="%";if((t==null?void 0:t.type)==="position"){var o=t.value,a=o.x,s=o.y;(a==null?void 0:a.type)==="position-keyword"&&(a.value==="left"?e=0:a.value==="center"?e=50:a.value==="right"?e=100:a.value==="top"?n=0:a.value==="bottom"&&(n=100)),(s==null?void 0:s.type)==="position-keyword"&&(s.value==="left"?e=0:s.value==="center"?n=50:s.value==="right"?e=100:s.value==="top"?n=0:s.value==="bottom"&&(n=100)),((a==null?void 0:a.type)==="px"||(a==null?void 0:a.type)==="%"||(a==null?void 0:a.type)==="em")&&(r=a==null?void 0:a.type,e=Number(a.value)),((s==null?void 0:s.type)==="px"||(s==null?void 0:s.type)==="%"||(s==null?void 0:s.type)==="em")&&(i=s==null?void 0:s.type,n=Number(s.value))}return{cx:or(e,r),cy:or(n,i)}}),W2=Xi(function(t){var e;if(t.indexOf("linear")>-1||t.indexOf("radial")>-1){var n=R2(t);return n.map(function(s){var c=s.type,l=s.orientation,u=s.colorStops;F2(u);var f=u.map(function(O){return{offset:or(Number(O.length.value),"%"),color:N2(O)}});if(c==="linear-gradient")return new hh(jc.LinearGradient,{angle:l?G2(l):Ma,steps:f});if(c==="radial-gradient"&&(l||(l=[{type:"shape",value:"circle"}]),l[0].type==="shape"&&l[0].value==="circle")){var d=z2(l[0].at),h=d.cx,p=d.cy,v=void 0;if(l[0].style){var y=l[0].style,m=y.type,b=y.value;m==="extent-keyword"?v=Wv(b):v=or(b,m)}return new hh(jc.RadialGradient,{cx:h,cy:p,size:v,steps:f})}})}var r=t[0];if(t[1]==="("||t[2]==="("){if(r==="l"){var i=I2.exec(t);if(i){var o=((e=i[2].match(Em))===null||e===void 0?void 0:e.map(function(s){return s.split(":")}))||[];return[new hh(jc.LinearGradient,{angle:or(parseFloat(i[1]),"deg"),steps:o.map(function(s){var c=j(s,2),l=c[0],u=c[1];return{offset:or(Number(l)*100,"%"),color:u}})})]}}else if(r==="r"){var a=Y2(t);if(a)if(Qe(a))t=a;else return[new hh(jc.RadialGradient,a)]}else if(r==="p")return H2(t)}});function Y2(t){var e,n=D2.exec(t);if(n){var r=((e=n[4].match(Em))===null||e===void 0?void 0:e.map(function(i){return i.split(":")}))||[];return{cx:or(50,"%"),cy:or(50,"%"),steps:r.map(function(i){var o=j(i,2),a=o[0],s=o[1];return{offset:or(Number(a)*100,"%"),color:s}})}}return null}function H2(t){var e=B2.exec(t);if(e){var n=e[1],r=e[2];switch(n){case"a":n="repeat";break;case"x":n="repeat-x";break;case"y":n="repeat-y";break;case"n":n="no-repeat";break;default:n="no-repeat"}return{image:r,repetition:n}}return null}function Uv(t){return!!t.type&&!!t.value}function Vv(t){return t&&!!t.image}function kf(t){return t&&!Lt(t.r)&&!Lt(t.g)&&!Lt(t.b)}var xs=Xi(function(t){if(Vv(t))return nt({repetition:"repeat"},t);if(Lt(t)&&(t=""),t==="transparent")return Om;if(t==="currentColor")t="black";else if(t==="none")return ph;var e=W2(t);if(e)return e;var n=wl(t),r=[0,0,0,0];return n!==null&&(r[0]=n.r||0,r[1]=n.g||0,r[2]=n.b||0,r[3]=n.opacity),k2.apply(void 0,ut([],j(r),!1))});function Xv(t,e){if(!(!kf(t)||!kf(e)))return[[Number(t.r),Number(t.g),Number(t.b),Number(t.alpha)],[Number(e.r),Number(e.g),Number(e.b),Number(e.alpha)],function(n){var r=n.slice();if(r[3])for(var i=0;i<3;i++)r[i]=Math.round(Nn(r[i],0,255));return r[3]=Nn(r[3],0,1),"rgba(".concat(r.join(","),")")}]}function Pu(t,e){if(Lt(e))return or(0,"px");if(e="".concat(e).trim().toLowerCase(),isFinite(Number(e))){if("px".search(t)>=0)return or(Number(e),"px");if("deg".search(t)>=0)return or(Number(e),"deg")}var n=[];e=e.replace(t,function(i){return n.push(i),"U"+i});var r="U("+t.source+")";return n.map(function(i){return or(Number(e.replace(new RegExp("U"+i,"g"),"").replace(new RegExp(r,"g"),"*0")),i)})[0]}var $v=function(t){return Pu(new RegExp("px","g"),t)},Sm=Xi($v),Mm=function(t){return Pu(new RegExp("%","g"),t)};Xi(Mm);var Nf=function(t){return Je(t)||isFinite(Number(t))?or(Number(t)||0,"px"):Pu(new RegExp("px|%|em|rem","g"),t)},Tu=Xi(Nf),qv=function(t){return Pu(new RegExp("deg|rad|grad|turn","g"),t)},Rf=Xi(qv);function gh(t,e,n,r,i){i===void 0&&(i=0);var o="",a=t.value||0,s=e.value||0,c=jv(t.unit),l=t.convertTo(c),u=e.convertTo(c);return l&&u?(a=l.value,s=u.value,o=Fv(t.unit)):(Zn.isLength(t.unit)||Zn.isLength(e.unit))&&(a=zo(t,i,n),s=zo(e,i,n),o="px"),[a,s,function(f){return r&&(f=Math.max(f,0)),f+o}]}function Go(t){var e=0;return t.unit===Vt.kDegrees?e=t.value:t.unit===Vt.kRadians?e=Ea(Number(t.value)):t.unit===Vt.kTurns&&(e=f2(Number(t.value))),e}function Pm(t,e){var n;return Array.isArray(t)?n=t.map(function(r){return Number(r)}):Qe(t)?n=t.split(" ").map(function(r){return Number(r)}):Je(t)&&(n=[t]),e===2?n.length===1?[n[0],n[0]]:[n[0],n[1]]:n.length===1?[n[0],n[0],n[0],n[0]]:n.length===2?[n[0],n[1],n[0],n[1]]:n.length===3?[n[0],n[1],n[2],n[1]]:[n[0],n[1],n[2],n[3]]}function yh(t){return Qe(t)?t.split(" ").map(function(e){return Tu(e)}):t.map(function(e){return Tu(e.toString())})}function zo(t,e,n,r){if(r===void 0&&(r=!1),t.unit===Vt.kPixels)return Number(t.value);if(t.unit===Vt.kPercentage&&n){var i=n.nodeName===kt.GROUP?n.getLocalBounds():n.getGeometryBounds();return(r?i.min[e]:0)+t.value/100*i.halfExtents[e]*2}return 0}var U2=function(t){return Pu(/deg|rad|grad|turn|px|%/g,t)},V2=["blur","brightness","drop-shadow","contrast","grayscale","sepia","saturate","hue-rotate","invert"];function Tm(t){if(t===void 0&&(t=""),t=t.toLowerCase().trim(),t==="none")return[];for(var e=/\s*([\w-]+)\(([^)]*)\)/g,n=[],r,i=0;r=e.exec(t);){if(r.index!==i)return[];if(i=r.index+r[0].length,V2.indexOf(r[1])>-1&&n.push({name:r[1],params:r[2].split(" ").map(function(o){return U2(o)||xs(o)})}),e.lastIndex===t.length)return n}return[]}function Am(t){return t.toString()}var Au=function(t){return typeof t=="number"?or(t):/^\s*[-+]?(\d*\.)?\d+\s*$/.test(t)?or(Number(t)):or(0)},Tl=Xi(Au);Xi(function(t){return Qe(t)?t.split(" ").map(Tl):t.map(Tl)});function Kv(t,e){return[t,e,Am]}function Zv(t,e){return function(n,r){return[n,r,function(i){return Am(Nn(i,t,e))}]}}function Cm(t,e){if(t.length===e.length)return[t,e,function(n){return n}]}function Jv(t){return t.parsedStyle.d.totalLength===0&&(t.parsedStyle.d.totalLength=Zd(t.parsedStyle.d.absolutePath)),t.parsedStyle.d.totalLength}function X2(t){return t.parsedStyle.points.totalLength===0&&(t.parsedStyle.points.totalLength=Ui(t.parsedStyle.points.points)),t.parsedStyle.points.totalLength}function $2(t){for(var e=0;e<t.length;e++){var n=t[e-1],r=t[e],i=r[0];if(i==="M"&&n){var o=n[0],a=[r[1],r[2]],s=void 0;o==="L"||o==="M"?s=[n[1],n[2]]:(o==="C"||o==="A"||o==="Q")&&(s=[n[n.length-2],n[n.length-1]]),s&&mh(a,s)&&(t.splice(e,1),e--)}}}function es(t){for(var e=!1,n=t.length,r=0;r<n;r++){var i=t[r],o=i[0];if(o==="C"||o==="A"||o==="Q"){e=!0;break}}return e}function q2(t){for(var e=[],n=[],r=[],i=0;i<t.length;i++){var o=t[i],a=o[0];a==="M"?(r.length&&(n.push(r),r=[]),r.push([o[1],o[2]])):a==="Z"?r.length&&(e.push(r),r=[]):r.push([o[1],o[2]])}return r.length>0&&n.push(r),{polygons:e,polylines:n}}function mh(t,e){return t[0]===e[0]&&t[1]===e[1]}function Al(t,e){for(var n=[],r=[],i=[],o=0;o<t.length;o++){var a=t[o],s=a.currentPoint,c=a.params,l=a.prePoint,u=void 0;switch(a.command){case"Q":u=uh(l[0],l[1],c[1],c[2],c[3],c[4]);break;case"C":u=Sf(l[0],l[1],c[1],c[2],c[3],c[4],c[5],c[6]);break;case"A":var f=a.arcParams;u=oh(f.cx,f.cy,f.rx,f.ry,f.xRotation,f.startAngle,f.endAngle);break;default:n.push(s[0]),r.push(s[1]);break}u&&(a.box=u,n.push(u.x,u.x+u.width),r.push(u.y,u.y+u.height)),e&&(a.command==="L"||a.command==="M")&&a.prePoint&&a.nextPoint&&i.push(a)}n=n.filter(function(m){return!Number.isNaN(m)&&m!==1/0&&m!==-1/0}),r=r.filter(function(m){return!Number.isNaN(m)&&m!==1/0&&m!==-1/0});var d=Ac(n),h=Ac(r),p=Cc(n),v=Cc(r);if(i.length===0)return{x:d,y:h,width:p-d,height:v-h};for(var o=0;o<i.length;o++){var a=i[o],s=a.currentPoint,y=void 0;s[0]===d?(y=$e(a,e),d=d-y.xExtra):s[0]===p&&(y=$e(a,e),p=p+y.xExtra),s[1]===h?(y=$e(a,e),h=h-y.yExtra):s[1]===v&&(y=$e(a,e),v=v+y.yExtra)}return{x:d,y:h,width:p-d,height:v-h}}function $e(t,e){var n=t.prePoint,r=t.currentPoint,i=t.nextPoint,o=Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2),a=Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2),s=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),c=Math.acos((o+a-s)/(2*Math.sqrt(o)*Math.sqrt(a)));if(!c||Math.sin(c)===0||qs(c,0))return{xExtra:0,yExtra:0};var l=Math.abs(Math.atan2(i[1]-r[1],i[0]-r[0])),u=Math.abs(Math.atan2(i[0]-r[0],i[1]-r[1]));l=l>Math.PI/2?Math.PI-l:l,u=u>Math.PI/2?Math.PI-u:u;var f={xExtra:Math.cos(c/2-l)*(e/2*(1/Math.sin(c/2)))-e/2||0,yExtra:Math.cos(u-c/2)*(e/2*(1/Math.sin(c/2)))-e/2||0};return f}function km(t,e){return[e[0]+(e[0]-t[0]),e[1]+(e[1]-t[1])]}var xo=function(t,e){var n=t.x*e.x+t.y*e.y,r=Math.sqrt((Math.pow(t.x,2)+Math.pow(t.y,2))*(Math.pow(e.x,2)+Math.pow(e.y,2))),i=t.x*e.y-t.y*e.x<0?-1:1,o=i*Math.acos(n/r);return o},Hr=function(t,e,n,r,i,o,a,s){e=Math.abs(e),n=Math.abs(n),r=kc(r,360);var c=qn(r);if(t.x===a.x&&t.y===a.y)return{x:t.x,y:t.y,ellipticalArcAngle:0};if(e===0||n===0)return{x:0,y:0,ellipticalArcAngle:0};var l=(t.x-a.x)/2,u=(t.y-a.y)/2,f={x:Math.cos(c)*l+Math.sin(c)*u,y:-Math.sin(c)*l+Math.cos(c)*u},d=Math.pow(f.x,2)/Math.pow(e,2)+Math.pow(f.y,2)/Math.pow(n,2);d>1&&(e=Math.sqrt(d)*e,n=Math.sqrt(d)*n);var h=Math.pow(e,2)*Math.pow(n,2)-Math.pow(e,2)*Math.pow(f.y,2)-Math.pow(n,2)*Math.pow(f.x,2),p=Math.pow(e,2)*Math.pow(f.y,2)+Math.pow(n,2)*Math.pow(f.x,2),v=h/p;v=v<0?0:v;var y=(i!==o?1:-1)*Math.sqrt(v),m={x:y*(e*f.y/n),y:y*(-(n*f.x)/e)},b={x:Math.cos(c)*m.x-Math.sin(c)*m.y+(t.x+a.x)/2,y:Math.sin(c)*m.x+Math.cos(c)*m.y+(t.y+a.y)/2},O={x:(f.x-m.x)/e,y:(f.y-m.y)/n},E=xo({x:1,y:0},O),w={x:(-f.x-m.x)/e,y:(-f.y-m.y)/n},_=xo(O,w);!o&&_>0?_-=2*Math.PI:o&&_<0&&(_+=2*Math.PI),_%=2*Math.PI;var S=E+_*s,M=e*Math.cos(S),T=n*Math.sin(S),A={x:Math.cos(c)*M-Math.sin(c)*T+b.x,y:Math.sin(c)*M+Math.cos(c)*T+b.y,ellipticalArcStartAngle:E,ellipticalArcEndAngle:E+_,ellipticalArcAngle:S,ellipticalArcCenter:b,resultantRx:e,resultantRy:n};return A};function K2(t){for(var e=[],n=null,r=null,i=null,o=0,a=t.length,s=0;s<a;s++){var c=t[s];r=t[s+1];var l=c[0],u={command:l,prePoint:n,params:c,startTangent:null,endTangent:null,currentPoint:null,nextPoint:null,arcParams:null,box:null,cubicParams:null};switch(l){case"M":i=[c[1],c[2]],o=s;break;case"A":var f=Z2(n,c);u.arcParams=f;break}if(l==="Z")n=i,r=t[o+1];else{var d=c.length;n=[c[d-2],c[d-1]]}r&&r[0]==="Z"&&(r=t[o],e[o]&&(e[o].prePoint=n)),u.currentPoint=n,e[o]&&mh(n,e[o].currentPoint)&&(e[o].prePoint=u.prePoint);var h=r?[r[r.length-2],r[r.length-1]]:null;u.nextPoint=h;var p=u.prePoint;if(["L","H","V"].includes(l))u.startTangent=[p[0]-n[0],p[1]-n[1]],u.endTangent=[n[0]-p[0],n[1]-p[1]];else if(l==="Q"){var v=[c[1],c[2]];u.startTangent=[p[0]-v[0],p[1]-v[1]],u.endTangent=[n[0]-v[0],n[1]-v[1]]}else if(l==="T"){var y=e[s-1],v=km(y.currentPoint,p);y.command==="Q"?(u.command="Q",u.startTangent=[p[0]-v[0],p[1]-v[1]],u.endTangent=[n[0]-v[0],n[1]-v[1]]):(u.command="TL",u.startTangent=[p[0]-n[0],p[1]-n[1]],u.endTangent=[n[0]-p[0],n[1]-p[1]])}else if(l==="C"){var m=[c[1],c[2]],b=[c[3],c[4]];u.startTangent=[p[0]-m[0],p[1]-m[1]],u.endTangent=[n[0]-b[0],n[1]-b[1]],u.startTangent[0]===0&&u.startTangent[1]===0&&(u.startTangent=[m[0]-b[0],m[1]-b[1]]),u.endTangent[0]===0&&u.endTangent[1]===0&&(u.endTangent=[b[0]-m[0],b[1]-m[1]])}else if(l==="S"){var y=e[s-1],m=km(y.currentPoint,p),b=[c[1],c[2]];y.command==="C"?(u.command="C",u.startTangent=[p[0]-m[0],p[1]-m[1]],u.endTangent=[n[0]-b[0],n[1]-b[1]]):(u.command="SQ",u.startTangent=[p[0]-b[0],p[1]-b[1]],u.endTangent=[n[0]-b[0],n[1]-b[1]])}else if(l==="A"){var O=nc(u,0),E=O.x,w=O.y,_=nc(u,1,!1),S=_.x,M=_.y;u.startTangent=[E,w],u.endTangent=[S,M]}e.push(u)}return e}function nc(t,e,n){n===void 0&&(n=!0);var r=t.arcParams,i=r.rx,o=i===void 0?0:i,a=r.ry,s=a===void 0?0:a,c=r.xRotation,l=r.arcFlag,u=r.sweepFlag,f=Hr({x:t.prePoint[0],y:t.prePoint[1]},o,s,c,!!l,!!u,{x:t.currentPoint[0],y:t.currentPoint[1]},e),d=Hr({x:t.prePoint[0],y:t.prePoint[1]},o,s,c,!!l,!!u,{x:t.currentPoint[0],y:t.currentPoint[1]},n?e+.005:e-.005),h=d.x-f.x,p=d.y-f.y,v=Math.sqrt(h*h+p*p);return{x:-h/v,y:-p/v}}function xh(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Qv(t,e){return xh(t)*xh(e)?(t[0]*e[0]+t[1]*e[1])/(xh(t)*xh(e)):1}function Nm(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(Qv(t,e))}function Z2(t,e){var n=e[1],r=e[2],i=kc(qn(e[3]),Math.PI*2),o=e[4],a=e[5],s=t[0],c=t[1],l=e[6],u=e[7],f=Math.cos(i)*(s-l)/2+Math.sin(i)*(c-u)/2,d=-1*Math.sin(i)*(s-l)/2+Math.cos(i)*(c-u)/2,h=f*f/(n*n)+d*d/(r*r);h>1&&(n*=Math.sqrt(h),r*=Math.sqrt(h));var p=n*n*(d*d)+r*r*(f*f),v=p?Math.sqrt((n*n*(r*r)-p)/p):1;o===a&&(v*=-1),isNaN(v)&&(v=0);var y=r?v*n*d/r:0,m=n?v*-r*f/n:0,b=(s+l)/2+Math.cos(i)*y-Math.sin(i)*m,O=(c+u)/2+Math.sin(i)*y+Math.cos(i)*m,E=[(f-y)/n,(d-m)/r],w=[(-1*f-y)/n,(-1*d-m)/r],_=Nm([1,0],E),S=Nm(E,w);return Qv(E,w)<=-1&&(S=Math.PI),Qv(E,w)>=1&&(S=0),a===0&&S>0&&(S=S-2*Math.PI),a===1&&S<0&&(S=S+2*Math.PI),{cx:b,cy:O,rx:mh(t,[l,u])?0:n,ry:mh(t,[l,u])?0:r,startAngle:_,endAngle:_+S,xRotation:i,arcFlag:o,sweepFlag:a}}function J2(t,e,n){return t.reduce(function(r,i){var o="";if(i[0]==="M"||i[0]==="L"){var a=te(i[1],i[2],0);n&&Ft(a,a,n),o="".concat(i[0]).concat(a[0],",").concat(a[1])}else if(i[0]==="Z")o=i[0];else if(i[0]==="C"){var s=te(i[1],i[2],0),c=te(i[3],i[4],0),l=te(i[5],i[6],0);n&&(Ft(s,s,n),Ft(c,c,n),Ft(l,l,n)),o="".concat(i[0]).concat(s[0],",").concat(s[1],",").concat(c[0],",").concat(c[1],",").concat(l[0],",").concat(l[1])}else if(i[0]==="A"){var u=te(i[6],i[7],0);n&&Ft(u,u,n),o="".concat(i[0]).concat(i[1],",").concat(i[2],",").concat(i[3],",").concat(i[4],",").concat(i[5],",").concat(u[0],",").concat(u[1])}else if(i[0]==="Q"){var s=te(i[1],i[2],0),c=te(i[3],i[4],0);n&&(Ft(s,s,n),Ft(c,c,n)),o="".concat(i[0]).concat(i[1],",").concat(i[2],",").concat(i[3],",").concat(i[4],"}")}return r+=o},"")}function t0(t,e,n,r){return[["M",t,e],["L",n,r]]}function Rm(t,e,n,r){var i=(-1+Math.sqrt(2))/3*4,o=t*i,a=e*i,s=n-t,c=n+t,l=r-e,u=r+e;return[["M",s,r],["C",s,r-a,n-o,l,n,l],["C",n+o,l,c,r-a,c,r],["C",c,r+a,n+o,u,n,u],["C",n-o,u,s,r+a,s,r],["Z"]]}function rc(t,e){var n=t.map(function(r,i){return[i===0?"M":"L",r[0],r[1]]});return e&&n.push(["Z"]),n}function Lm(t,e,n,r,i){if(i){var o=j(i,4),a=o[0],s=o[1],c=o[2],l=o[3],u=t>0?1:-1,f=e>0?1:-1,d=u+f!==0?1:0;return[["M",u*a+n,r],["L",t-u*s+n,r],s?["A",s,s,0,0,d,t+n,f*s+r]:null,["L",t+n,e-f*c+r],c?["A",c,c,0,0,d,t+n-u*c,e+r]:null,["L",n+u*l,e+r],l?["A",l,l,0,0,d,n,e+r-f*l]:null,["L",n,f*a+r],a?["A",a,a,0,0,d,u*a+n,r]:null,["Z"]].filter(function(h){return h})}return[["M",n,r],["L",n+t,r],["L",n+t,r+e],["L",n,r+e],["Z"]]}function Lf(t,e){e===void 0&&(e=t.getLocalTransform());var n=[];switch(t.nodeName){case kt.LINE:var r=t.parsedStyle,i=r.x1,o=i===void 0?0:i,a=r.y1,s=a===void 0?0:a,c=r.x2,l=c===void 0?0:c,u=r.y2,f=u===void 0?0:u;n=t0(o,s,l,f);break;case kt.CIRCLE:{var d=t.parsedStyle,h=d.r,p=h===void 0?0:h,v=d.cx,y=v===void 0?0:v,m=d.cy,b=m===void 0?0:m;n=Rm(p,p,y,b);break}case kt.ELLIPSE:{var O=t.parsedStyle,E=O.rx,w=E===void 0?0:E,_=O.ry,S=_===void 0?0:_,M=O.cx,y=M===void 0?0:M,T=O.cy,b=T===void 0?0:T;n=Rm(w,S,y,b);break}case kt.POLYLINE:case kt.POLYGON:var A=t.parsedStyle.points;n=rc(A.points,t.nodeName===kt.POLYGON);break;case kt.RECT:var C=t.parsedStyle,N=C.width,k=N===void 0?0:N,R=C.height,I=R===void 0?0:R,D=C.x,B=D===void 0?0:D,F=C.y,G=F===void 0?0:F,X=C.radius,q=X&&X.some(function(et){return et!==0});n=Lm(k,I,B,G,q&&X.map(function(et){return Nn(et,0,Math.min(Math.abs(k)/2,Math.abs(I)/2))}));break;case kt.PATH:var J=t.parsedStyle.d.absolutePath;n=ut([],j(J),!1);break}if(n.length)return J2(n,t,e)}function Ur(t,e,n,r,i){e===void 0&&(e=0),n===void 0&&(n=0),r===void 0&&(r=0),i===void 0&&(i=0);var o=t.map(function(a,s){var c=a[0],l=t[s+1],u=s===0&&(e!==0||n!==0),f=(s===t.length-1||l&&(l[0]==="M"||l[0]==="Z"))&&r!==0&&i!==0;switch(c){case"M":return u?"M ".concat(a[1]+e,",").concat(a[2]+n," L ").concat(a[1],",").concat(a[2]):"M ".concat(a[1],",").concat(a[2]);case"L":return"L ".concat(a[1]+(f?r:0),",").concat(a[2]+(f?i:0));case"Q":return"Q ".concat(a[1]," ").concat(a[2],",").concat(a[3]," ").concat(a[4])+(f?" L ".concat(a[3]+r,",").concat(a[4]+i):"");case"C":return"C ".concat(a[1]," ").concat(a[2],",").concat(a[3]," ").concat(a[4],",").concat(a[5]," ").concat(a[6])+(f?" L ".concat(a[5]+r,",").concat(a[6]+i):"");case"A":return"A ".concat(a[1]," ").concat(a[2]," ").concat(a[3]," ").concat(a[4]," ").concat(a[5]," ").concat(a[6]," ").concat(a[7])+(f?" L ".concat(a[6]+r,",").concat(a[7]+i):"");case"Z":return"Z"}}).join(" ");return~o.indexOf("NaN")?"":o}var Fr=function(t){if(t===""||Array.isArray(t)&&t.length===0)return{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:{x:0,y:0,width:0,height:0}};var e;try{e=Tc(t)}catch(d){e=Tc(""),console.error("[g]: Invalid SVG Path definition: ".concat(t))}$2(e);var n=es(e),r=q2(e),i=r.polygons,o=r.polylines,a=K2(e),s=Al(a,0),c=s.x,l=s.y,u=s.width,f=s.height;return{absolutePath:e,hasArc:n,segments:a,polygons:i,polylines:o,totalLength:0,rect:{x:Number.isFinite(c)?c:0,y:Number.isFinite(l)?l:0,width:Number.isFinite(u)?u:0,height:Number.isFinite(f)?f:0}}},Im=Xi(Fr);function e0(t){return Qe(t)?Im(t):Fr(t)}function Q2(t,e,n){var r=t.curve,i=e.curve;(!r||r.length===0)&&(r=bl(t.absolutePath,!1),t.curve=r),(!i||i.length===0)&&(i=bl(e.absolutePath,!1),e.curve=i);var o=[r,i];r.length!==i.length&&(o=gu(r,i));var a=yu(o[0])!==yu(o[1])?mf(o[0]):on(o[0]);return[a,xv(o[1],a),function(s){return s}]}function Dm(t,e){var n;return Qe(t)?n=t.split(" ").map(function(r){var i=j(r.split(","),2),o=i[0],a=i[1];return[Number(o),Number(a)]}):n=t,{points:n,totalLength:0,segments:[]}}function tw(t,e){return[t.points,e.points,function(n){return n}]}var jr=null;function Wo(t){return function(e){var n=0;return t.map(function(r){return r===jr?e[n++]:r})}}function Gc(t){return t}var zc={matrix:["NNNNNN",[jr,jr,0,0,jr,jr,0,0,0,0,1,0,jr,jr,0,1],Gc],matrix3d:["NNNNNNNNNNNNNNNN",Gc],rotate:["A"],rotatex:["A"],rotatey:["A"],rotatez:["A"],rotate3d:["NNNA"],perspective:["L"],scale:["Nn",Wo([jr,jr,new Zn(1)]),Gc],scalex:["N",Wo([jr,new Zn(1),new Zn(1)]),Wo([jr,new Zn(1)])],scaley:["N",Wo([new Zn(1),jr,new Zn(1)]),Wo([new Zn(1),jr])],scalez:["N",Wo([new Zn(1),new Zn(1),jr])],scale3d:["NNN",Gc],skew:["Aa",null,Gc],skewx:["A",null,Wo([jr,Ma])],skewy:["A",null,Wo([Ma,jr])],translate:["Tt",Wo([jr,jr,Yr]),Gc],translatex:["T",Wo([jr,Yr,Yr]),Wo([jr,Yr])],translatey:["T",Wo([Yr,jr,Yr]),Wo([Yr,jr])],translatez:["L",Wo([Yr,Yr,jr])],translate3d:["TTL",Gc]};function If(t){if(t=(t||"none").toLowerCase().trim(),t==="none")return[];for(var e=/\s*(\w+)\(([^)]*)\)/g,n=[],r,i=0;r=e.exec(t);){if(r.index!==i)return[];i=r.index+r[0].length;var o=r[1],a=zc[o];if(!a)return[];var s=r[2].split(","),c=a[0];if(c.length<s.length)return[];for(var l=[],u=0;u<c.length;u++){var f=s[u],d=c[u],h=void 0;if(f?h={A:function(p){return p.trim()==="0"?Ma:Rf(p)},N:Tl,T:Tu,L:Sm}[d.toUpperCase()](f):h={a:Ma,n:l[0],t:Yr}[d],h===void 0)return[];l.push(h)}if(n.push({t:o,d:l}),e.lastIndex===t.length)return n}return[]}function Bm(t){if(t=(t||"none").toLowerCase().trim(),t==="none")return[];for(var e=/\s*(\w+)\(([^)]*)\)/g,n=[],r,i=0;r=e.exec(t);){if(r.index!==i)return[];i=r.index+r[0].length;var o=r[1],a=zc[o];if(!a)return[];var s=r[2].split(","),c=a[0];if(c.length<s.length)return[];for(var l=[],u=0;u<c.length;u++){var f=s[u],d=c[u],h=void 0;if(f?h={A:function(p){return p.trim()==="0"?Ma:qv(p)},N:Au,T:Nf,L:$v}[d.toUpperCase()](f):h={a:Ma,n:l[0],t:Yr}[d],h===void 0)return[];l.push(h)}if(n.push({t:o,d:l}),e.lastIndex===t.length)return n}return[]}function Fm(t){var e,n,r,i;switch(t.t){case"rotatex":return i=qn(Go(t.d[0])),[1,0,0,0,0,Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1];case"rotatey":return i=qn(Go(t.d[0])),[Math.cos(i),0,-Math.sin(i),0,0,1,0,0,Math.sin(i),0,Math.cos(i),0,0,0,0,1];case"rotate":case"rotatez":return i=qn(Go(t.d[0])),[Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1,0,0,0,0,1];case"rotate3d":e=t.d[0].value,n=t.d[1].value,r=t.d[2].value,i=qn(Go(t.d[3]));var o=e*e+n*n+r*r;if(o===0)e=1,n=0,r=0;else if(o!==1){var a=Math.sqrt(o);e/=a,n/=a,r/=a}var s=Math.sin(i/2),c=s*Math.cos(i/2),l=s*s;return[1-2*(n*n+r*r)*l,2*(e*n*l+r*c),2*(e*r*l-n*c),0,2*(e*n*l-r*c),1-2*(e*e+r*r)*l,2*(n*r*l+e*c),0,2*(e*r*l+n*c),2*(n*r*l-e*c),1-2*(e*e+n*n)*l,0,0,0,0,1];case"scale":return[t.d[0].value,0,0,0,0,t.d[1].value,0,0,0,0,1,0,0,0,0,1];case"scalex":return[t.d[0].value,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"scaley":return[1,0,0,0,0,t.d[0].value,0,0,0,0,1,0,0,0,0,1];case"scalez":return[1,0,0,0,0,1,0,0,0,0,t.d[0].value,0,0,0,0,1];case"scale3d":return[t.d[0].value,0,0,0,0,t.d[1].value,0,0,0,0,t.d[2].value,0,0,0,0,1];case"skew":var u=qn(Go(t.d[0])),f=qn(Go(t.d[1]));return[1,Math.tan(f),0,0,Math.tan(u),1,0,0,0,0,1,0,0,0,0,1];case"skewx":return i=qn(Go(t.d[0])),[1,0,0,0,Math.tan(i),1,0,0,0,0,1,0,0,0,0,1];case"skewy":return i=qn(Go(t.d[0])),[1,Math.tan(i),0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"translate":return e=zo(t.d[0],0,null)||0,n=zo(t.d[1],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,e,n,0,1];case"translatex":return e=zo(t.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,e,0,0,1];case"translatey":return n=zo(t.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,n,0,1];case"translatez":return r=zo(t.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,r,1];case"translate3d":return e=zo(t.d[0],0,null)||0,n=zo(t.d[1],0,null)||0,r=zo(t.d[2],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,e,n,r,1];case"perspective":var d=zo(t.d[0],0,null)||0,h=d?-1/d:0;return[1,0,0,0,0,1,0,0,0,0,1,h,0,0,0,1];case"matrix":return[t.d[0].value,t.d[1].value,0,0,t.d[2].value,t.d[3].value,0,0,0,0,1,0,t.d[4].value,t.d[5].value,0,1];case"matrix3d":return t.d.map(function(p){return p.value})}}function bh(t,e){return[t[0]*e[0]+t[4]*e[1]+t[8]*e[2]+t[12]*e[3],t[1]*e[0]+t[5]*e[1]+t[9]*e[2]+t[13]*e[3],t[2]*e[0]+t[6]*e[1]+t[10]*e[2]+t[14]*e[3],t[3]*e[0]+t[7]*e[1]+t[11]*e[2]+t[15]*e[3],t[0]*e[4]+t[4]*e[5]+t[8]*e[6]+t[12]*e[7],t[1]*e[4]+t[5]*e[5]+t[9]*e[6]+t[13]*e[7],t[2]*e[4]+t[6]*e[5]+t[10]*e[6]+t[14]*e[7],t[3]*e[4]+t[7]*e[5]+t[11]*e[6]+t[15]*e[7],t[0]*e[8]+t[4]*e[9]+t[8]*e[10]+t[12]*e[11],t[1]*e[8]+t[5]*e[9]+t[9]*e[10]+t[13]*e[11],t[2]*e[8]+t[6]*e[9]+t[10]*e[10]+t[14]*e[11],t[3]*e[8]+t[7]*e[9]+t[11]*e[10]+t[15]*e[11],t[0]*e[12]+t[4]*e[13]+t[8]*e[14]+t[12]*e[15],t[1]*e[12]+t[5]*e[13]+t[9]*e[14]+t[13]*e[15],t[2]*e[12]+t[6]*e[13]+t[10]*e[14]+t[14]*e[15],t[3]*e[12]+t[7]*e[13]+t[11]*e[14]+t[15]*e[15]]}function aa(t){return t.length===0?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:t.map(Fm).reduce(bh)}function Cl(t){var e=[0,0,0],n=[1,1,1],r=[0,0,0],i=[0,0,0,1],o=[0,0,0,1];return p2(aa(t),e,n,r,i,o),[[e,n,r,o,i]]}var ew=function(){function t(r,i){for(var o=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],a=0;a<4;a++)for(var s=0;s<4;s++)for(var c=0;c<4;c++)o[a][s]+=i[a][c]*r[c][s];return o}function e(r){return r[0][2]==0&&r[0][3]==0&&r[1][2]==0&&r[1][3]==0&&r[2][0]==0&&r[2][1]==0&&r[2][2]==1&&r[2][3]==0&&r[3][2]==0&&r[3][3]==1}function n(r,i,o,a,s){for(var c=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],l=0;l<4;l++)c[l][3]=s[l];for(var l=0;l<3;l++)for(var u=0;u<3;u++)c[3][l]+=r[u]*c[u][l];var f=a[0],d=a[1],h=a[2],p=a[3],v=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];v[0][0]=1-2*(d*d+h*h),v[0][1]=2*(f*d-h*p),v[0][2]=2*(f*h+d*p),v[1][0]=2*(f*d+h*p),v[1][1]=1-2*(f*f+h*h),v[1][2]=2*(d*h-f*p),v[2][0]=2*(f*h-d*p),v[2][1]=2*(d*h+f*p),v[2][2]=1-2*(f*f+d*d),c=t(c,v);var y=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];o[2]&&(y[2][1]=o[2],c=t(c,y)),o[1]&&(y[2][1]=0,y[2][0]=o[0],c=t(c,y)),o[0]&&(y[2][0]=0,y[1][0]=o[0],c=t(c,y));for(var l=0;l<3;l++)for(var u=0;u<3;u++)c[l][u]*=i[l];return e(c)?[c[0][0],c[0][1],c[1][0],c[1][1],c[3][0],c[3][1]]:c[0].concat(c[1],c[2],c[3])}return n}();function nw(t){return t.toFixed(6).replace(".000000","")}function n0(t,e){var n,r;return t.decompositionPair!==e&&(t.decompositionPair=e,n=Cl(t)),e.decompositionPair!==t&&(e.decompositionPair=t,r=Cl(e)),n[0]===null||r[0]===null?[[!1],[!0],function(i){return i?e[0].d:t[0].d}]:(n[0].push(0),r[0].push(1),[n,r,function(i){var o=iw(n[0][3],r[0][3],i[5]),a=ew(i[0],i[1],i[2],o,i[4]),s=a.map(nw).join(",");return s}])}function rw(t,e){for(var n=0,r=0;r<t.length;r++)n+=t[r]*e[r];return n}function iw(t,e,n){var r=rw(t,e);r=Nn(r,-1,1);var i=[];if(r===1)i=t;else for(var o=Math.acos(r),a=Math.sin(n*o)*1/Math.sqrt(1-r*r),s=0;s<4;s++)i.push(t[s]*(Math.cos(n*o)-r*a)+e[s]*a);return i}function _h(t){return t.replace(/[xy]/,"")}function ns(t){return t.replace(/(x|y|z|3d)?$/,"3d")}var an=function(t,e){return t==="perspective"&&e==="perspective"||(t==="matrix"||t==="matrix3d")&&(e==="matrix"||e==="matrix3d")};function jm(t,e,n){var r=!1;if(!t.length||!e.length){t.length||(r=!0,t=e,e=[]);for(var i=function(_){var S=t[_],M=S.t,T=S.d,A=M.substring(0,5)==="scale"?1:0;e.push({t:M,d:T.map(function(C){return typeof C=="number"?or(A):or(A,C.unit)})})},o=0;o<t.length;o++)i(o)}var a=[],s=[],c=[];if(t.length!==e.length){var l=n0(t,e);a=[l[0]],s=[l[1]],c=[["matrix",[l[2]]]]}else for(var o=0;o<t.length;o++){var u=t[o].t,f=e[o].t,d=t[o].d,h=e[o].d,p=zc[u],v=zc[f],y=void 0;if(an(u,f)){var l=n0([t[o]],[e[o]]);a.push(l[0]),s.push(l[1]),c.push(["matrix",[l[2]]]);continue}else if(u===f)y=u;else if(p[2]&&v[2]&&_h(u)===_h(f))y=_h(u),d=p[2](d),h=v[2](h);else if(p[1]&&v[1]&&ns(u)===ns(f))y=ns(u),d=p[1](d),h=v[1](h);else{var l=n0(t,e);a=[l[0]],s=[l[1]],c=[["matrix",[l[2]]]];break}for(var m=[],b=[],O=[],E=0;E<d.length;E++){var l=gh(d[E],h[E],n,!1,E);m[E]=l[0],b[E]=l[1],O.push(l[2])}a.push(m),s.push(b),c.push([y,O])}if(r){var w=a;a=s,s=w}return[a,s,function(_){return _.map(function(S,M){var T=S.map(function(A,C){return c[M][1][C](A)}).join(",");return c[M][0]==="matrix"&&T.split(",").length===16&&(c[M][0]="matrix3d"),c[M][0]==="matrix3d"&&T.split(",").length===6&&(c[M][0]="matrix"),c[M][0]+"("+T+")"}).join(" ")}]}var sa=Xi(function(t){if(Qe(t)){if(t==="text-anchor")return[or(0,"px"),or(0,"px")];var e=t.split(" ");return e.length===1&&(e[0]==="top"||e[0]==="bottom"?(e[1]=e[0],e[0]="center"):e[1]="center"),e.length!==2?null:[Tu(wh(e[0])),Tu(wh(e[1]))]}else return[or(t[0]||0,"px"),or(t[1]||0,"px")]}),Gm=function(t){if(Qe(t)){if(t==="text-anchor")return[or(0,"px"),or(0,"px")];var e=t.split(" ");return e.length===1&&(e[0]==="top"||e[0]==="bottom"?(e[1]=e[0],e[0]="center"):e[1]="center"),e.length!==2?null:[Nf(wh(e[0])),Nf(wh(e[1]))]}else return[or(t[0]||0,"px"),or(t[1]||0,"px")]};function wh(t){return t==="center"?"50%":t==="left"||t==="top"?"0%":t==="right"||t==="bottom"?"100%":t}var Rn=[{n:"display",k:["none"]},{n:"opacity",int:!0,inh:!0,d:"1",syntax:ee.OPACITY_VALUE},{n:"fillOpacity",int:!0,inh:!0,d:"1",syntax:ee.OPACITY_VALUE},{n:"strokeOpacity",int:!0,inh:!0,d:"1",syntax:ee.OPACITY_VALUE},{n:"fill",int:!0,k:["none"],d:"none",syntax:ee.PAINT},{n:"fillRule",k:["nonzero","evenodd"],d:"nonzero"},{n:"stroke",int:!0,k:["none"],d:"none",syntax:ee.PAINT,l:!0},{n:"shadowType",k:["inner","outer","both"],d:"outer",l:!0},{n:"shadowColor",int:!0,syntax:ee.COLOR},{n:"shadowOffsetX",int:!0,l:!0,d:"0",syntax:ee.LENGTH_PERCENTAGE},{n:"shadowOffsetY",int:!0,l:!0,d:"0",syntax:ee.LENGTH_PERCENTAGE},{n:"shadowBlur",int:!0,l:!0,d:"0",syntax:ee.SHADOW_BLUR},{n:"lineWidth",int:!0,inh:!0,d:"1",l:!0,a:["strokeWidth"],syntax:ee.LENGTH_PERCENTAGE},{n:"increasedLineWidthForHitTesting",inh:!0,d:"0",l:!0,syntax:ee.LENGTH_PERCENTAGE},{n:"lineJoin",inh:!0,l:!0,a:["strokeLinejoin"],k:["miter","bevel","round"],d:"miter"},{n:"lineCap",inh:!0,l:!0,a:["strokeLinecap"],k:["butt","round","square"],d:"butt"},{n:"lineDash",int:!0,inh:!0,k:["none"],a:["strokeDasharray"],syntax:ee.LENGTH_PERCENTAGE_12},{n:"lineDashOffset",int:!0,inh:!0,d:"0",a:["strokeDashoffset"],syntax:ee.LENGTH_PERCENTAGE},{n:"offsetPath",syntax:ee.DEFINED_PATH},{n:"offsetDistance",int:!0,syntax:ee.OFFSET_DISTANCE},{n:"dx",int:!0,l:!0,d:"0",syntax:ee.LENGTH_PERCENTAGE},{n:"dy",int:!0,l:!0,d:"0",syntax:ee.LENGTH_PERCENTAGE},{n:"zIndex",ind:!0,int:!0,d:"0",k:["auto"],syntax:ee.Z_INDEX},{n:"visibility",k:["visible","hidden"],ind:!0,inh:!0,int:!0,d:"visible"},{n:"pointerEvents",inh:!0,k:["none","auto","stroke","fill","painted","visible","visiblestroke","visiblefill","visiblepainted","all"],d:"auto"},{n:"filter",ind:!0,l:!0,k:["none"],d:"none",syntax:ee.FILTER},{n:"clipPath",syntax:ee.DEFINED_PATH},{n:"textPath",syntax:ee.DEFINED_PATH},{n:"textPathSide",k:["left","right"],d:"left"},{n:"textPathStartOffset",l:!0,d:"0",syntax:ee.LENGTH_PERCENTAGE},{n:"transform",p:100,int:!0,k:["none"],d:"none",syntax:ee.TRANSFORM},{n:"transformOrigin",p:100,d:"0 0",l:!0,syntax:ee.TRANSFORM_ORIGIN},{n:"cx",int:!0,l:!0,d:"0",syntax:ee.COORDINATE},{n:"cy",int:!0,l:!0,d:"0",syntax:ee.COORDINATE},{n:"cz",int:!0,l:!0,d:"0",syntax:ee.COORDINATE},{n:"r",int:!0,l:!0,d:"0",syntax:ee.LENGTH_PERCENTAGE},{n:"rx",int:!0,l:!0,d:"0",syntax:ee.LENGTH_PERCENTAGE},{n:"ry",int:!0,l:!0,d:"0",syntax:ee.LENGTH_PERCENTAGE},{n:"x",int:!0,l:!0,d:"0",syntax:ee.COORDINATE},{n:"y",int:!0,l:!0,d:"0",syntax:ee.COORDINATE},{n:"z",int:!0,l:!0,d:"0",syntax:ee.COORDINATE},{n:"width",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:ee.LENGTH_PERCENTAGE},{n:"height",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:ee.LENGTH_PERCENTAGE},{n:"radius",int:!0,l:!0,d:"0",syntax:ee.LENGTH_PERCENTAGE_14},{n:"x1",int:!0,l:!0,syntax:ee.COORDINATE},{n:"y1",int:!0,l:!0,syntax:ee.COORDINATE},{n:"z1",int:!0,l:!0,syntax:ee.COORDINATE},{n:"x2",int:!0,l:!0,syntax:ee.COORDINATE},{n:"y2",int:!0,l:!0,syntax:ee.COORDINATE},{n:"z2",int:!0,l:!0,syntax:ee.COORDINATE},{n:"d",int:!0,l:!0,d:"",syntax:ee.PATH,p:50},{n:"points",int:!0,l:!0,syntax:ee.LIST_OF_POINTS,p:50},{n:"text",l:!0,d:"",syntax:ee.TEXT,p:50},{n:"textTransform",l:!0,inh:!0,k:["capitalize","uppercase","lowercase","none"],d:"none",syntax:ee.TEXT_TRANSFORM,p:51},{n:"font",l:!0},{n:"fontSize",int:!0,inh:!0,d:"16px",l:!0,syntax:ee.LENGTH_PERCENTAGE},{n:"fontFamily",l:!0,inh:!0,d:"sans-serif"},{n:"fontStyle",l:!0,inh:!0,k:["normal","italic","oblique"],d:"normal"},{n:"fontWeight",l:!0,inh:!0,k:["normal","bold","bolder","lighter"],d:"normal"},{n:"fontVariant",l:!0,inh:!0,k:["normal","small-caps"],d:"normal"},{n:"lineHeight",l:!0,syntax:ee.LENGTH,int:!0,d:"0"},{n:"letterSpacing",l:!0,syntax:ee.LENGTH,int:!0,d:"0"},{n:"miterLimit",l:!0,syntax:ee.NUMBER,d:function(t){return t===kt.PATH||t===kt.POLYGON||t===kt.POLYLINE?"4":"10"}},{n:"wordWrap",l:!0},{n:"wordWrapWidth",l:!0},{n:"maxLines",l:!0},{n:"textOverflow",l:!0,d:"clip"},{n:"leading",l:!0},{n:"textBaseline",l:!0,inh:!0,k:["top","hanging","middle","alphabetic","ideographic","bottom"],d:"alphabetic"},{n:"textAlign",l:!0,inh:!0,k:["start","center","middle","end","left","right"],d:"start"},{n:"markerStart",syntax:ee.MARKER},{n:"markerEnd",syntax:ee.MARKER},{n:"markerMid",syntax:ee.MARKER},{n:"markerStartOffset",syntax:ee.LENGTH,l:!0,int:!0,d:"0"},{n:"markerEndOffset",syntax:ee.LENGTH,l:!0,int:!0,d:"0"}],zm=Rn.filter(function(t){return!!t.l}).map(function(t){return t.n}),ic={},oc=new WeakMap,ow=function(t,e){var n=oc.get(t);return!n||n.length===0?!0:n.includes(e)},aw=function(){function t(e){var n=this;this.runtime=e,Rn.forEach(function(r){n.registerMetadata(r)})}return t.prototype.registerMetadata=function(e){ut([e.n],j(e.a||[]),!1).forEach(function(n){ic[n]=e})},t.prototype.unregisterMetadata=function(e){delete ic[e]},t.prototype.getPropertySyntax=function(e){return this.runtime.CSSPropertySyntaxFactory[e]},t.prototype.processProperties=function(e,n,r){var i=this;if(r===void 0&&(r={skipUpdateAttribute:!1,skipParse:!1,forceUpdateGeometry:!1,usedAttributes:[],memoize:!0}),this.runtime.enableCSSParsing){var u=r.skipUpdateAttribute,f=r.skipParse,d=r.forceUpdateGeometry,h=r.usedAttributes,p=r.memoize,v=d,y=Object.keys(n);y.forEach(function(m){var b;u||(e.attributes[m]=n[m]),!v&&(!((b=ic[m])===null||b===void 0)&&b.l)&&(v=!0)}),f||y.forEach(function(m){e.computedStyle[m]=i.parseProperty(m,e.attributes[m],e,p)}),h!=null&&h.length&&(y=Array.from(new Set(y.concat(h)))),y.forEach(function(m){m in e.computedStyle&&(e.parsedStyle[m]=i.computeProperty(m,e.computedStyle[m],e,p))}),v&&(e.geometry.dirty=!0,e.renderable.boundsDirty=!0,e.renderable.renderBoundsDirty=!0,r.forceUpdateGeometry||this.runtime.sceneGraphService.dirtifyToRoot(e)),y.forEach(function(m){m in e.parsedStyle&&i.postProcessProperty(m,e,y)}),this.runtime.enableCSSParsing&&e.children.length&&y.forEach(function(m){m in e.parsedStyle&&i.isPropertyInheritable(m)&&e.children.forEach(function(b){b.internalSetAttribute(m,null,{skipUpdateAttribute:!0,skipParse:!0})})})}else{Object.assign(e.attributes,n);var o=Object.keys(n),a=e.parsedStyle.clipPath,s=e.parsedStyle.offsetPath;e.parsedStyle=Object.assign(e.parsedStyle,n);var c=!!r.forceUpdateGeometry;if(!c){for(var l=0;l<zm.length;l++)if(zm[l]in n){c=!0;break}}n.fill&&(e.parsedStyle.fill=xs(n.fill)),n.stroke&&(e.parsedStyle.stroke=xs(n.stroke)),n.shadowColor&&(e.parsedStyle.shadowColor=xs(n.shadowColor)),n.filter&&(e.parsedStyle.filter=Tm(n.filter)),Lt(n.radius)||(e.parsedStyle.radius=Pm(n.radius,4)),Lt(n.lineDash)||(e.parsedStyle.lineDash=Pm(n.lineDash,2)),n.points&&(e.parsedStyle.points=Dm(n.points)),n.d===""&&(e.parsedStyle.d=nt({},Hv)),n.d&&(e.parsedStyle.d=e0(n.d)),n.textTransform&&this.runtime.CSSPropertySyntaxFactory["<text-transform>"].calculator(null,null,{value:n.textTransform},e,null),le(n.clipPath)||this.runtime.CSSPropertySyntaxFactory["<defined-path>"].calculator("clipPath",a,n.clipPath,e,this.runtime),n.offsetPath&&this.runtime.CSSPropertySyntaxFactory["<defined-path>"].calculator("offsetPath",s,n.offsetPath,e,this.runtime),n.transform&&(e.parsedStyle.transform=If(n.transform)),n.transformOrigin&&(e.parsedStyle.transformOrigin=sa(n.transformOrigin)),n.markerStart&&(e.parsedStyle.markerStart=this.runtime.CSSPropertySyntaxFactory["<marker>"].calculator(null,n.markerStart,n.markerStart,null,null)),n.markerEnd&&(e.parsedStyle.markerEnd=this.runtime.CSSPropertySyntaxFactory["<marker>"].calculator(null,n.markerEnd,n.markerEnd,null,null)),n.markerMid&&(e.parsedStyle.markerMid=this.runtime.CSSPropertySyntaxFactory["<marker>"].calculator("",n.markerMid,n.markerMid,null,null)),Lt(n.zIndex)||this.runtime.CSSPropertySyntaxFactory["<z-index>"].postProcessor(e,o),Lt(n.offsetDistance)||this.runtime.CSSPropertySyntaxFactory["<offset-distance>"].postProcessor(e,o),n.transform&&this.runtime.CSSPropertySyntaxFactory["<transform>"].postProcessor(e,o),n.transformOrigin&&this.runtime.CSSPropertySyntaxFactory["<transform-origin>"].postProcessor(e,o),c&&(e.geometry.dirty=!0,e.renderable.boundsDirty=!0,e.renderable.renderBoundsDirty=!0,r.forceUpdateGeometry||this.runtime.sceneGraphService.dirtifyToRoot(e))}},t.prototype.parseProperty=function(e,n,r,i){var o=ic[e],a=n;if((n===""||Lt(n))&&(n="unset"),n==="unset"||n==="initial"||n==="inherit")a=Wv(n);else if(o){var s=o.k,c=o.syntax,l=c&&this.getPropertySyntax(c);s&&s.indexOf(n)>-1?a=Wv(n):l&&(!i&&l.parserUnmemoize?a=l.parserUnmemoize(n,r):l.parser&&(a=l.parser(n,r)))}return a},t.prototype.computeProperty=function(e,n,r,i){var o=ic[e],a=r.id==="g-root",s=n;if(o){var c=o.syntax,l=o.inh,u=o.d;if(n instanceof jo){var f=n.value;if(f==="unset"&&(l&&!a?f="inherit":f="initial"),f==="initial")Lt(u)||(n=this.parseProperty(e,Su(u)?u(r.nodeName):u,r,i));else if(f==="inherit"){var d=this.tryToResolveProperty(r,e,{inherited:!0});if(Lt(d)){this.addUnresolveProperty(r,e);return}else return d}}var h=c&&this.getPropertySyntax(c);if(h&&h.calculator){var p=r.parsedStyle[e];s=h.calculator(e,p,n,r,this.runtime)}else n instanceof jo?s=n.value:s=n}return s},t.prototype.postProcessProperty=function(e,n,r){var i=ic[e];if(i&&i.syntax){var o=i.syntax&&this.getPropertySyntax(i.syntax),a=o;a&&a.postProcessor&&a.postProcessor(n,r)}},t.prototype.addUnresolveProperty=function(e,n){var r=oc.get(e);r||(oc.set(e,[]),r=oc.get(e)),r.indexOf(n)===-1&&r.push(n)},t.prototype.tryToResolveProperty=function(e,n,r){r===void 0&&(r={});var i=r.inherited;if(i&&e.parentElement&&ow(e.parentElement,n)){var o=e.parentElement.parsedStyle[n];return o==="unset"||o==="initial"||o==="inherit"?void 0:o}},t.prototype.recalc=function(e){var n=oc.get(e);if(n&&n.length){var r={};n.forEach(function(i){r[i]=e.attributes[i]}),this.processProperties(e,r),oc.delete(e)}},t.prototype.updateGeometry=function(e){var n=e.nodeName,r=this.runtime.geometryUpdaterFactory[n];if(r){var i=e.geometry;i.contentBounds||(i.contentBounds=new ro),i.renderBounds||(i.renderBounds=new ro);var o=e.parsedStyle,a=r.update(o,e),s=a.cx,c=s===void 0?0:s,l=a.cy,u=l===void 0?0:l,f=a.cz,d=f===void 0?0:f,h=a.hwidth,p=h===void 0?0:h,v=a.hheight,y=v===void 0?0:v,m=a.hdepth,b=m===void 0?0:m,O=[Math.abs(p),Math.abs(y),b],E=o,w=E.stroke,_=E.lineWidth,S=_===void 0?1:_,M=E.increasedLineWidthForHitTesting,T=M===void 0?0:M,A=E.shadowType,C=A===void 0?"outer":A,N=E.shadowColor,k=E.filter,R=k===void 0?[]:k,I=E.transformOrigin,D=[c,u,d];i.contentBounds.update(D,O);var B=n===kt.POLYLINE||n===kt.POLYGON||n===kt.PATH?Math.SQRT2:.5,F=w&&!w.isNone;if(F){var G=((S||0)+(T||0))*B;O[0]+=G,O[1]+=G}if(i.renderBounds.update(D,O),N&&C&&C!=="inner"){var X=i.renderBounds,q=X.min,J=X.max,et=o,dt=et.shadowBlur,_t=et.shadowOffsetX,Dt=et.shadowOffsetY,pt=dt||0,vt=_t||0,Qt=Dt||0,Bt=q[0]-pt+vt,Rt=J[0]+pt+vt,$t=q[1]-pt+Qt,de=J[1]+pt+Qt;q[0]=Math.min(q[0],Bt),J[0]=Math.max(J[0],Rt),q[1]=Math.min(q[1],$t),J[1]=Math.max(J[1],de),i.renderBounds.setMinMax(q,J)}R.forEach(function(De){var An=De.name,jn=De.params;if(An==="blur"){var zr=jn[0].value;i.renderBounds.update(i.renderBounds.center,Tf(i.renderBounds.halfExtents,i.renderBounds.halfExtents,[zr,zr,0]))}else if(An==="drop-shadow"){var Vn=jn[0].value,Jr=jn[1].value,Gn=jn[2].value,Ti=i.renderBounds,en=Ti.min,ln=Ti.max,Ai=en[0]-Gn+Vn,Qr=ln[0]+Gn+Vn,ve=en[1]-Gn+Jr,je=ln[1]+Gn+Jr;en[0]=Math.min(en[0],Ai),ln[0]=Math.max(ln[0],Qr),en[1]=Math.min(en[1],ve),ln[1]=Math.max(ln[1],je),i.renderBounds.setMinMax(en,ln)}}),e.geometry.dirty=!1;var ye=p<0,Se=y<0,qe=(ye?-1:1)*(I?zo(I[0],0,e,!0):0),Me=(Se?-1:1)*(I?zo(I[1],1,e,!0):0);(qe||Me)&&e.setOrigin(qe,Me)}},t.prototype.updateSizeAttenuation=function(e,n){e.style.isSizeAttenuation?(e.style.rawLineWidth||(e.style.rawLineWidth=e.style.lineWidth),e.style.lineWidth=(e.style.rawLineWidth||1)/n,e.nodeName===kt.CIRCLE&&(e.style.rawR||(e.style.rawR=e.style.r),e.style.r=(e.style.rawR||1)/n)):(e.style.rawLineWidth&&(e.style.lineWidth=e.style.rawLineWidth,delete e.style.rawLineWidth),e.nodeName===kt.CIRCLE&&e.style.rawR&&(e.style.r=e.style.rawR,delete e.style.rawR))},t.prototype.isPropertyInheritable=function(e){var n=ic[e];return n?n.inh:!1},t}(),sw=function(){function t(){this.parser=Rf,this.parserUnmemoize=qv,this.parserWithCSSDisabled=null,this.mixer=Kv}return t.prototype.calculator=function(e,n,r,i){return Go(r)},t}(),cw=function(){function t(){}return t.prototype.calculator=function(e,n,r,i,o){return r instanceof jo&&(r=null),o.sceneGraphService.updateDisplayObjectDependency(e,n,r,i),e==="clipPath"&&i.forEach(function(a){a.childNodes.length===0&&o.sceneGraphService.dirtifyToRoot(a)}),r},t}(),lw=function(){function t(){this.parser=xs,this.parserWithCSSDisabled=xs,this.mixer=Xv}return t.prototype.calculator=function(e,n,r,i){return r instanceof jo?r.value==="none"?ph:Om:r},t}(),uw=function(){function t(){this.parser=Tm}return t.prototype.calculator=function(e,n,r){return r instanceof jo?[]:r},t}();function Wm(t){var e=t.parsedStyle.fontSize;return Lt(e)?null:e}var r0=function(){function t(){this.parser=Tu,this.parserUnmemoize=Nf,this.parserWithCSSDisabled=null,this.mixer=Kv}return t.prototype.calculator=function(e,n,r,i,o){var a;if(Je(r))return r;if(Zn.isRelativeUnit(r.unit)){var s=o.styleValueRegistry;if(r.unit===Vt.kPercentage)return 0;if(r.unit===Vt.kEms){if(i.parentNode){var c=Wm(i.parentNode);if(c)return c*=r.value,c;s.addUnresolveProperty(i,e)}else s.addUnresolveProperty(i,e);return 0}else if(r.unit===Vt.kRems){if(!((a=i==null?void 0:i.ownerDocument)===null||a===void 0)&&a.documentElement){var c=Wm(i.ownerDocument.documentElement);if(c)return c*=r.value,c;s.addUnresolveProperty(i,e)}else s.addUnresolveProperty(i,e);return 0}}else return r.value},t}(),fw=function(){function t(){this.mixer=Cm}return t.prototype.parser=function(e){var n=yh(Je(e)?[e]:e),r;return n.length===1?r=[n[0],n[0]]:r=[n[0],n[1]],r},t.prototype.calculator=function(e,n,r){return r.map(function(i){return i.value})},t}(),dw=function(){function t(){this.mixer=Cm}return t.prototype.parser=function(e){var n=yh(Je(e)?[e]:e),r;return n.length===1?r=[n[0],n[0],n[0],n[0]]:n.length===2?r=[n[0],n[1],n[0],n[1]]:n.length===3?r=[n[0],n[1],n[2],n[1]]:r=[n[0],n[1],n[2],n[3]],r},t.prototype.calculator=function(e,n,r){return r.map(function(i){return i.value})},t}(),hw=function(){function t(){}return t.prototype.calculator=function(e,n,r,i){r instanceof jo&&(r=null);var o=r==null?void 0:r.cloneNode(!0);return o&&(o.style.isMarker=!0),o},t}(),pw=function(){function t(){this.mixer=Kv,this.parser=Tl,this.parserUnmemoize=Au,this.parserWithCSSDisabled=null}return t.prototype.calculator=function(e,n,r){return r.value},t}(),vw=function(){function t(){this.parser=Tl,this.parserUnmemoize=Au,this.parserWithCSSDisabled=null,this.mixer=Zv(0,1)}return t.prototype.calculator=function(e,n,r){return r.value},t.prototype.postProcessor=function(e){var n=e.parsedStyle,r=n.offsetPath,i=n.offsetDistance;if(r){var o=r.nodeName;if(o===kt.LINE||o===kt.PATH||o===kt.POLYLINE){var a=r.getPoint(i);a&&e.setLocalPosition(a.x,a.y)}}},t}(),i0=function(){function t(){this.parser=Tl,this.parserUnmemoize=Au,this.parserWithCSSDisabled=null,this.mixer=Zv(0,1)}return t.prototype.calculator=function(e,n,r){return r.value},t}(),gw=function(){function t(){this.parser=e0,this.parserWithCSSDisabled=e0,this.mixer=Q2}return t.prototype.calculator=function(e,n,r){return r instanceof jo&&r.value==="unset"?{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new wu(0,0,0,0)}:r},t}(),o0=function(){function t(){this.parser=Dm,this.mixer=tw}return t}(),yw=function(t){xt(e,t);function e(){var n=t.apply(this,ut([],j(arguments),!1))||this;return n.mixer=Zv(0,1/0),n}return e}(r0),mw=function(){function t(){}return t.prototype.calculator=function(e,n,r,i){return r instanceof jo?r.value==="unset"?"":r.value:"".concat(r)},t.prototype.postProcessor=function(e){e.nodeValue="".concat(e.parsedStyle.text)||""},t}(),xw=function(){function t(){}return t.prototype.calculator=function(e,n,r,i){var o=i.getAttribute("text");if(o){var a=o;r.value==="capitalize"?a=o.charAt(0).toUpperCase()+o.slice(1):r.value==="lowercase"?a=o.toLowerCase():r.value==="uppercase"&&(a=o.toUpperCase()),i.parsedStyle.text=a}return r.value},t}(),hi={},Yo=0;function bw(t,e){if(t){var n=typeof t=="string"?t:t.id||Yo++;hi[n]&&hi[n].destroy(),hi[n]=e}}var Oh=typeof window!="undefined"&&typeof window.document!="undefined";function _w(t){return!!t.getAttribute}function Ym(t,e){for(var n=0,r=t.length;n<r;){var i=n+r>>>1;Hm(t[i],e)<0?n=i+1:r=i}return n}function Hm(t,e){var n=Number(t.parsedStyle.zIndex||0),r=Number(e.parsedStyle.zIndex||0);if(n===r){var i=t.parentNode;if(i){var o=i.childNodes||[];return o.indexOf(t)-o.indexOf(e)}}return n-r}function Um(t){var e,n=t;do{var r=(e=n.parsedStyle)===null||e===void 0?void 0:e.clipPath;if(r)return n;n=n.parentElement}while(n!==null);return null}var Vm="px";function ww(t,e,n){Oh&&t.style&&(t.style.width=e+Vm,t.style.height=n+Vm)}function Xm(t,e){if(Oh)return document.defaultView.getComputedStyle(t,null).getPropertyValue(e)}function Ow(t){var e=Xm(t,"width");return e==="auto"?t.offsetWidth:parseFloat(e)}function Ew(t){var e=Xm(t,"height");return e==="auto"?t.offsetHeight:parseFloat(e)}var $m=1,qm={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},a0=typeof performance=="object"&&performance.now?performance:Date;function kl(t,e,n){t===void 0&&(t="auto");var r=!1,i=!1,o=!!e&&!e.isNone,a=!!n&&!n.isNone;return t==="visiblepainted"||t==="painted"||t==="auto"?(r=o,i=a):t==="visiblefill"||t==="fill"?r=!0:t==="visiblestroke"||t==="stroke"?i=!0:(t==="visible"||t==="all")&&(r=!0,i=!0),[r,i]}var Sw=1,Mw=function(){return Sw++},bo=typeof self=="object"&&self.self==self?self:typeof gt.g=="object"&&gt.g.global==gt.g?gt.g:{},Pw=Date.now(),Tw=function(){return bo.performance&&typeof bo.performance.now=="function"?bo.performance.now():Date.now()-Pw},Df={},Km=Date.now(),Aw=function(t){if(typeof t!="function")throw new TypeError(t+" is not a function");var e=Date.now(),n=e-Km,r=n>16?0:16-n,i=Mw();return Df[i]=t,Object.keys(Df).length>1||setTimeout(function(){Km=e;var o=Df;Df={},Object.keys(o).forEach(function(a){return o[a](Tw())})},r),i},Zm=function(t){delete Df[t]},Jm=["","webkit","moz","ms","o"],Qm=function(t){return typeof t!="string"?Aw:t===""?bo.requestAnimationFrame:bo[t+"RequestAnimationFrame"]},Cw=function(t){return typeof t!="string"?Zm:t===""?bo.cancelAnimationFrame:bo[t+"CancelAnimationFrame"]||bo[t+"CancelRequestAnimationFrame"]},kw=function(t,e){for(var n=0;t[n]!==void 0;){if(e(t[n]))return t[n];n=n+1}},t1=kw(Jm,function(t){return!!Qm(t)}),s0=Qm(t1),e1=Cw(t1);bo.requestAnimationFrame=s0,bo.cancelAnimationFrame=e1;var Nw=function(){function t(){this.callbacks=[]}return t.prototype.getCallbacksNum=function(){return this.callbacks.length},t.prototype.tapPromise=function(e,n){this.callbacks.push(n)},t.prototype.promise=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return Promise.all(this.callbacks.map(function(r){return r.apply(void 0,ut([],j(e),!1))}))},t}(),Rw=function(){function t(){this.callbacks=[]}return t.prototype.tapPromise=function(e,n){this.callbacks.push(n)},t.prototype.promise=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return ti(this,void 0,void 0,function(){var r,i,o,a;return Fi(this,function(s){switch(s.label){case 0:return this.callbacks.length?[4,(a=this.callbacks)[0].apply(a,ut([],j(e),!1))]:[3,6];case 1:r=s.sent(),i=0,s.label=2;case 2:return i<this.callbacks.length-1?(o=this.callbacks[i],[4,o(r)]):[3,5];case 3:r=s.sent(),s.label=4;case 4:return i++,[3,2];case 5:return[2,r];case 6:return[2,null]}})})},t}(),_o=function(){function t(){this.callbacks=[]}return t.prototype.tap=function(e,n){this.callbacks.push(n)},t.prototype.call=function(){var e=arguments;this.callbacks.forEach(function(n){n.apply(void 0,e)})},t}(),c0=function(){function t(){this.callbacks=[]}return t.prototype.tap=function(e,n){this.callbacks.push(n)},t.prototype.call=function(){if(this.callbacks.length){for(var e=arguments,n=this.callbacks[0].apply(void 0,e),r=0;r<this.callbacks.length-1;r++){var i=this.callbacks[r];n=i(n)}return n}return null},t}(),Lw=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Iw=/([\"\'])[^\'\"]+\1/;function Dw(t){for(var e=t.fontSize,n=e===void 0?16:e,r=t.fontFamily,i=r===void 0?"sans-serif":r,o=t.fontStyle,a=o===void 0?"normal":o,s=t.fontVariant,c=s===void 0?"normal":s,l=t.fontWeight,u=l===void 0?"normal":l,f=Je(n)&&"".concat(n,"px")||"16px",d=i.split(","),h=d.length-1;h>=0;h--){var p=d[h].trim();!Iw.test(p)&&Lw.indexOf(p)<0&&(p='"'.concat(p,'"')),d[h]=p}return"".concat(a," ").concat(c," ").concat(u," ").concat(f," ").concat(d.join(","))}function l0(t,e,n){return po(t),t[4]=Math.tan(e),t[1]=Math.tan(n),t}var Bf=1e-5,Bw=ue(),ii=ue();function n1(t,e){if(t.length){var n=po(Bw);t.forEach(function(r){var i=r.t,o=r.d;if(i==="scale"){var a=(o==null?void 0:o.map(function(m){return Math.max(m.value,Bf)}))||[1,1];ji(ii,[a[0],a[1],1])}else if(i==="scalex"){var a=(o==null?void 0:o.map(function(b){return Math.max(b.value,Bf)}))||[1];ji(ii,[a[0],1,1])}else if(i==="scaley"){var a=(o==null?void 0:o.map(function(b){return Math.max(b.value,Bf)}))||[1];ji(ii,[1,a[0],1])}else if(i==="scalez"){var a=(o==null?void 0:o.map(function(b){return Math.max(b.value,Bf)}))||[1];ji(ii,[1,1,a[0]])}else if(i==="scale3d"){var a=(o==null?void 0:o.map(function(b){return Math.max(b.value,Bf)}))||[1,1,1];ji(ii,[a[0],a[1],a[2]])}else if(i==="translate"){var s=o||[Yr,Yr];wi(ii,[s[0].value,s[1].value,0])}else if(i==="translatex"){var s=o||[Yr];wi(ii,[s[0].value,0,0])}else if(i==="translatey"){var s=o||[Yr];wi(ii,[0,s[0].value,0])}else if(i==="translatez"){var s=o||[Yr];wi(ii,[0,0,s[0].value])}else if(i==="translate3d"){var s=o||[Yr,Yr,Yr];wi(ii,[s[0].value,s[1].value,s[2].value])}else if(i==="rotate"){var c=o||[Ma];bc(ii,qn(Go(c[0])))}else if(i==="rotatex"){var c=o||[Ma];Nd(ii,qn(Go(c[0])))}else if(i==="rotatey"){var c=o||[Ma];Rd(ii,qn(Go(c[0])))}else if(i==="rotatez"){var c=o||[Ma];bc(ii,qn(Go(c[0])))}else if(i==="rotate3d"){var c=o||[Yr,Yr,Yr,Ma];kd(ii,qn(Go(c[3])),[c[0].value,c[1].value,c[2].value])}else if(i==="skew"){var l=(o==null?void 0:o.map(function(m){return m.value}))||[0,0];l0(ii,qn(l[0]),qn(l[1]))}else if(i==="skewx"){var l=(o==null?void 0:o.map(function(b){return b.value}))||[0];l0(ii,qn(l[0]),0)}else if(i==="skewy"){var l=(o==null?void 0:o.map(function(b){return b.value}))||[0];l0(ii,0,qn(l[0]))}else if(i==="matrix"){var u=j(o.map(function(m){return m.value}),6),f=u[0],d=u[1],h=u[2],p=u[3],v=u[4],y=u[5];gl(ii,f,d,0,0,h,p,0,0,0,0,1,0,v,y,0,1)}else i==="matrix3d"&&gl.apply(_e,ut([ii],j(o.map(function(m){return m.value})),!1));Bd(n,n,ii)}),e.setLocalTransform(n)}else e.resetLocalTransform();return e.getLocalTransform()}var Fw=function(){function t(){this.parser=If,this.parserUnmemoize=Bm,this.parserWithCSSDisabled=Bm,this.mixer=jm}return t.prototype.calculator=function(e,n,r,i){return r instanceof jo?[]:r},t.prototype.postProcessor=function(e){var n=e.parsedStyle.transform;n1(n,e)},t}(),jw=function(){function t(){this.parser=sa,this.parserUnmemoize=Gm}return t.prototype.postProcessor=function(e){var n=e.parsedStyle.transformOrigin;n[0].unit===Vt.kPixels&&n[1].unit===Vt.kPixels?e.setOrigin(n[0].value,n[1].value):e.getGeometryBounds()},t}(),Gw=function(){function t(){this.parser=Tl,this.parserUnmemoize=Au}return t.prototype.calculator=function(e,n,r,i){return r.value},t.prototype.postProcessor=function(e){if(e.parentNode){var n=e.parentNode,r=n.renderable,i=n.sortable;r&&(r.dirty=!0),i&&(i.dirty=!0,i.dirtyReason=Pl.Z_INDEX_CHANGED)}},t}(),zw=function(){function t(){}return t.prototype.update=function(e,n){var r=e.cx,i=r===void 0?0:r,o=e.cy,a=o===void 0?0:o,s=e.r,c=s===void 0?0:s;return{cx:i,cy:a,hwidth:c,hheight:c}},t}(),Ww=function(){function t(){}return t.prototype.update=function(e,n){var r=e.cx,i=r===void 0?0:r,o=e.cy,a=o===void 0?0:o,s=e.rx,c=s===void 0?0:s,l=e.ry,u=l===void 0?0:l;return{cx:i,cy:a,hwidth:c,hheight:u}},t}(),Yw=function(){function t(){}return t.prototype.update=function(e){var n=e.x1,r=e.y1,i=e.x2,o=e.y2,a=Math.min(n,i),s=Math.max(n,i),c=Math.min(r,o),l=Math.max(r,o),u=s-a,f=l-c,d=u/2,h=f/2;return{cx:a+d,cy:c+h,hwidth:d,hheight:h}},t}(),Hw=function(){function t(){}return t.prototype.update=function(e){var n=e.d,r=n.rect,i=r.x,o=r.y,a=r.width,s=r.height,c=a/2,l=s/2;return{cx:i+c,cy:o+l,hwidth:c,hheight:l}},t}(),u0=function(){function t(){}return t.prototype.update=function(e){if(e.points&&ri(e.points.points)){var n=e.points.points,r=Math.min.apply(Math,ut([],j(n.map(function(f){return f[0]})),!1)),i=Math.max.apply(Math,ut([],j(n.map(function(f){return f[0]})),!1)),o=Math.min.apply(Math,ut([],j(n.map(function(f){return f[1]})),!1)),a=Math.max.apply(Math,ut([],j(n.map(function(f){return f[1]})),!1)),s=i-r,c=a-o,l=s/2,u=c/2;return{cx:r+l,cy:o+u,hwidth:l,hheight:u}}return{cx:0,cy:0,hwidth:0,hheight:0}},t}(),r1=function(){function t(){}return t.prototype.update=function(e,n){var r=e.x,i=r===void 0?0:r,o=e.y,a=o===void 0?0:o,s=e.src,c=e.width,l=c===void 0?0:c,u=e.height,f=u===void 0?0:u,d=l,h=f;return s&&!Qe(s)&&(d||(d=s.width,e.width=d),h||(h=s.height,e.height=h)),{cx:i+d/2,cy:a+h/2,hwidth:d/2,hheight:h/2}},t}(),i1=function(){function t(e){this.globalRuntime=e}return t.prototype.isReadyToMeasure=function(e,n){var r=e.text,i=e.textAlign,o=e.textBaseline,a=e.fontSize,s=e.fontStyle,c=e.fontWeight,l=e.fontVariant,u=e.lineWidth;return mt.enableCSSParsing?r&&a&&s&&c&&l&&i&&o&&!Lt(u):r},t.prototype.update=function(e,n){var r,i,o=e.text,a=e.textAlign,s=a===void 0?"start":a,c=e.lineWidth,l=c===void 0?1:c,u=e.textBaseline,f=u===void 0?"alphabetic":u,d=e.dx,h=d===void 0?0:d,p=e.dy,v=p===void 0?0:p,y=e.x,m=y===void 0?0:y,b=e.y,O=b===void 0?0:b;if(!this.isReadyToMeasure(e,n))return e.metrics={font:"",width:0,height:0,lines:[],lineWidths:[],lineHeight:0,maxLineWidth:0,fontProperties:{ascent:0,descent:0,fontSize:0},lineMetrics:[]},{hwidth:0,hheight:0,cx:0,cy:0};var E=(((i=(r=n==null?void 0:n.ownerDocument)===null||r===void 0?void 0:r.defaultView)===null||i===void 0?void 0:i.getConfig())||{}).offscreenCanvas,w=this.globalRuntime.textService.measureText(o,e,E);e.metrics=w;var _=w.width,S=w.height,M=w.lineHeight,T=w.fontProperties,A=_/2,C=S/2,N=m+A;s==="center"||s==="middle"?N+=l/2-A:(s==="right"||s==="end")&&(N+=l-A*2);var k=O-C;return f==="middle"?k+=C:f==="top"||f==="hanging"?k+=C*2:f==="alphabetic"?k+=this.globalRuntime.enableCSSParsing?M-T.ascent:0:(f==="bottom"||f==="ideographic")&&(k+=0),h&&(N+=h),v&&(k+=v),{cx:N,cy:k,hwidth:A,hheight:C}},t}(),Uw=function(){function t(){}return t.prototype.update=function(e,n){return{cx:0,cy:0,hwidth:0,hheight:0}},t}(),Vw=function(){function t(){}return t.prototype.update=function(e,n){var r=e.x,i=r===void 0?0:r,o=e.y,a=o===void 0?0:o,s=e.width,c=s===void 0?0:s,l=e.height,u=l===void 0?0:l;return{cx:i+c/2,cy:a+u/2,hwidth:c/2,hheight:u/2}},t}();function Xw(t){return!!t.type}var Cu=function(){function t(e){this.eventPhase=t.prototype.NONE,this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.defaultPrevented=!1,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Vi,this.page=new Vi,this.canvas=new Vi,this.viewport=new Vi,this.composed=!1,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"layerX",{get:function(){return this.layer.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"layerY",{get:function(){return this.layer.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageX",{get:function(){return this.page.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageY",{get:function(){return this.page.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this.canvas.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.canvas.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasX",{get:function(){return this.canvas.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasY",{get:function(){return this.canvas.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"viewportX",{get:function(){return this.viewport.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"viewportY",{get:function(){return this.viewport.y},enumerable:!1,configurable:!0}),t.prototype.composedPath=function(){return this.manager&&(!this.path||this.path[0]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path},Object.defineProperty(t.prototype,"propagationPath",{get:function(){return this.composedPath()},enumerable:!1,configurable:!0}),t.prototype.preventDefault=function(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0},t.prototype.stopImmediatePropagation=function(){this.propagationImmediatelyStopped=!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t.prototype.initEvent=function(){},t.prototype.initUIEvent=function(){},t.prototype.clone=function(){throw new Error(Kn)},t}(),o1=function(t){xt(e,t);function e(){var n=t.apply(this,ut([],j(arguments),!1))||this;return n.client=new Vi,n.movement=new Vi,n.offset=new Vi,n.global=new Vi,n.screen=new Vi,n}return Object.defineProperty(e.prototype,"clientX",{get:function(){return this.client.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clientY",{get:function(){return this.client.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"movementX",{get:function(){return this.movement.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"movementY",{get:function(){return this.movement.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offsetX",{get:function(){return this.offset.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offsetY",{get:function(){return this.offset.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"globalX",{get:function(){return this.global.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"globalY",{get:function(){return this.global.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"screenX",{get:function(){return this.screen.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"screenY",{get:function(){return this.screen.y},enumerable:!1,configurable:!0}),e.prototype.getModifierState=function(n){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(n)},e.prototype.initMouseEvent=function(){throw new Error(Kn)},e}(Cu),f0=function(t){xt(e,t);function e(){var n=t.apply(this,ut([],j(arguments),!1))||this;return n.width=0,n.height=0,n.isPrimary=!1,n}return e.prototype.getCoalescedEvents=function(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]},e.prototype.getPredictedEvents=function(){throw new Error("getPredictedEvents is not supported!")},e.prototype.clone=function(){return this.manager.clonePointerEvent(this)},e}(o1),d0=function(t){xt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.clone=function(){return this.manager.cloneWheelEvent(this)},e}(o1),sn=function(t){xt(e,t);function e(n,r){var i=t.call(this,null)||this;return i.type=n,i.detail=r,Object.assign(i,r),i}return e}(Cu),Eh=":",a1=function(){function t(){this.emitter=new Xa}return t.prototype.on=function(e,n,r){return this.addEventListener(e,n,r),this},t.prototype.addEventListener=function(e,n,r){var i=Ks(r)&&r||Yi(r)&&r.capture,o=Yi(r)&&r.once,a=Su(n)?void 0:n,s=!1,c="";if(e.indexOf(Eh)>-1){var l=j(e.split(Eh),2),u=l[0],f=l[1];e=f,c=u,s=!0}if(e=i?"".concat(e,"capture"):e,n=Su(n)?n:n.handleEvent,s){var d=n;n=function(){for(var h,p=[],v=0;v<arguments.length;v++)p[v]=arguments[v];((h=p[0].target)===null||h===void 0?void 0:h.name)===c&&d.apply(void 0,ut([],j(p),!1))}}return o?this.emitter.once(e,n,a):this.emitter.on(e,n,a),this},t.prototype.off=function(e,n,r){return e?this.removeEventListener(e,n,r):this.removeAllEventListeners(),this},t.prototype.removeAllEventListeners=function(){this.emitter.removeAllListeners()},t.prototype.removeEventListener=function(e,n,r){var i=Ks(r)&&r||Yi(r)&&r.capture,o=Su(n)?void 0:n;return e=i?"".concat(e,"capture"):e,n=Su(n)?n:n==null?void 0:n.handleEvent,this.emitter.off(e,n,o),this},t.prototype.emit=function(e,n){this.dispatchEvent(new sn(e,n))},t.prototype.dispatchEvent=function(e,n){var r,i;if(n===void 0&&(n=!1),!Xw(e))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");var o;if(this.document?o=this:this.defaultView?o=this.defaultView:o=(r=this.ownerDocument)===null||r===void 0?void 0:r.defaultView,o){if(e.manager=o.getEventService()||null,!e.manager)return!1;e.defaultPrevented=!1,e.path=[],n||(e.target=this),(i=e.manager)===null||i===void 0||i.dispatchEvent(e,e.type,n)}return!e.defaultPrevented},t}(),$i=function(t){xt(e,t);function e(){var n=t.call(this)||this;return n.shadow=!1,n.ownerDocument=null,n.isConnected=!1,n.baseURI="",n.childNodes=[],n.nodeType=0,n.nodeName="",n.nodeValue=null,n.parentNode=null,n}return e.isNode=function(n){return!!n.childNodes},Object.defineProperty(e.prototype,"textContent",{get:function(){var n,r,i="";this.nodeName===kt.TEXT&&(i+=this.style.text);try{for(var o=On(this.childNodes),a=o.next();!a.done;a=o.next()){var s=a.value;s.nodeName===kt.TEXT?i+=s.nodeValue:i+=s.textContent}}catch(c){n={error:c}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i},set:function(n){var r=this;this.childNodes.slice().forEach(function(i){r.removeChild(i)}),this.nodeName===kt.TEXT&&(this.style.text="".concat(n))},enumerable:!1,configurable:!0}),e.prototype.getRootNode=function(n){return n===void 0&&(n={}),this.parentNode?this.parentNode.getRootNode(n):n.composed&&this.host?this.host.getRootNode(n):this},e.prototype.hasChildNodes=function(){return this.childNodes.length>0},e.prototype.isDefaultNamespace=function(n){throw new Error(Kn)},e.prototype.lookupNamespaceURI=function(n){throw new Error(Kn)},e.prototype.lookupPrefix=function(n){throw new Error(Kn)},e.prototype.normalize=function(){throw new Error(Kn)},e.prototype.isEqualNode=function(n){return this===n},e.prototype.isSameNode=function(n){return this.isEqualNode(n)},Object.defineProperty(e.prototype,"parent",{get:function(){return this.parentNode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parentElement",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"firstChild",{get:function(){return this.childNodes.length>0?this.childNodes[0]:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastChild",{get:function(){return this.childNodes.length>0?this.childNodes[this.childNodes.length-1]:null},enumerable:!1,configurable:!0}),e.prototype.compareDocumentPosition=function(n){var r;if(n===this)return 0;for(var i=n,o=this,a=[i],s=[o];(r=i.parentNode)!==null&&r!==void 0?r:o.parentNode;)i=i.parentNode?(a.push(i.parentNode),i.parentNode):i,o=o.parentNode?(s.push(o.parentNode),o.parentNode):o;if(i!==o)return e.DOCUMENT_POSITION_DISCONNECTED|e.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC|e.DOCUMENT_POSITION_PRECEDING;var c=a.length>s.length?a:s,l=c===a?s:a;if(c[c.length-l.length]===l[0])return c===a?e.DOCUMENT_POSITION_CONTAINED_BY|e.DOCUMENT_POSITION_FOLLOWING:e.DOCUMENT_POSITION_CONTAINS|e.DOCUMENT_POSITION_PRECEDING;for(var u=c.length-l.length,f=l.length-1;f>=0;f--){var d=l[f],h=c[u+f];if(h!==d){var p=d.parentNode.childNodes;return p.indexOf(d)<p.indexOf(h)?l===a?e.DOCUMENT_POSITION_PRECEDING:e.DOCUMENT_POSITION_FOLLOWING:c===a?e.DOCUMENT_POSITION_PRECEDING:e.DOCUMENT_POSITION_FOLLOWING}}return e.DOCUMENT_POSITION_FOLLOWING},e.prototype.contain=function(n){return this.contains(n)},e.prototype.contains=function(n){for(var r=n;r&&this!==r;)r=r.parentNode;return!!r},e.prototype.getAncestor=function(n){for(var r=this;n>0&&r;)r=r.parentNode,n--;return r},e.prototype.forEach=function(n,r){r===void 0&&(r=!1),n(this)||(r?this.childNodes.slice():this.childNodes).forEach(function(i){i.forEach(n)})},e.DOCUMENT_POSITION_DISCONNECTED=1,e.DOCUMENT_POSITION_PRECEDING=2,e.DOCUMENT_POSITION_FOLLOWING=4,e.DOCUMENT_POSITION_CONTAINS=8,e.DOCUMENT_POSITION_CONTAINED_BY=16,e.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC=32,e}(a1),$w=2048,qw=function(){function t(e,n){var r=this;this.globalRuntime=e,this.context=n,this.emitter=new Xa,this.nativeHTMLMap=new WeakMap,this.cursor="default",this.mappingTable={},this.mappingState={trackingData:{}},this.eventPool=new Map,this.tmpMatrix=ue(),this.tmpVec3=Gt(),this.onPointerDown=function(i){var o=r.createPointerEvent(i);if(r.dispatchEvent(o,"pointerdown"),o.pointerType==="touch")r.dispatchEvent(o,"touchstart");else if(o.pointerType==="mouse"||o.pointerType==="pen"){var a=o.button===2;r.dispatchEvent(o,a?"rightdown":"mousedown")}var s=r.trackingData(i.pointerId);s.pressTargetsByButton[i.button]=o.composedPath(),r.freeEvent(o)},this.onPointerUp=function(i){var o,a=a0.now(),s=r.createPointerEvent(i,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0);if(r.dispatchEvent(s,"pointerup"),s.pointerType==="touch")r.dispatchEvent(s,"touchend");else if(s.pointerType==="mouse"||s.pointerType==="pen"){var c=s.button===2;r.dispatchEvent(s,c?"rightup":"mouseup")}var l=r.trackingData(i.pointerId),u=r.findMountedTarget(l.pressTargetsByButton[i.button]),f=u;if(u&&!s.composedPath().includes(u)){for(var d=u;d&&!s.composedPath().includes(d);){if(s.currentTarget=d,r.notifyTarget(s,"pointerupoutside"),s.pointerType==="touch")r.notifyTarget(s,"touchendoutside");else if(s.pointerType==="mouse"||s.pointerType==="pen"){var c=s.button===2;r.notifyTarget(s,c?"rightupoutside":"mouseupoutside")}$i.isNode(d)&&(d=d.parentNode)}delete l.pressTargetsByButton[i.button],f=d}if(f){var h=r.clonePointerEvent(s,"click");h.target=f,h.path=[],l.clicksByButton[i.button]||(l.clicksByButton[i.button]={clickCount:0,target:h.target,timeStamp:a});var p=r.context.renderingContext.root.ownerDocument.defaultView,v=l.clicksByButton[i.button];v.target===h.target&&a-v.timeStamp<p.dblClickSpeed?++v.clickCount:v.clickCount=1,v.target=h.target,v.timeStamp=a,h.detail=v.clickCount,!((o=s.detail)===null||o===void 0)&&o.preventClick||(!r.context.config.useNativeClickEvent&&(h.pointerType==="mouse"||h.pointerType==="touch")&&r.dispatchEvent(h,"click"),r.dispatchEvent(h,"pointertap")),r.freeEvent(h)}r.freeEvent(s)},this.onPointerMove=function(i){var o=r.createPointerEvent(i,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0),a=o.pointerType==="mouse"||o.pointerType==="pen",s=r.trackingData(i.pointerId),c=r.findMountedTarget(s.overTargets);if(s.overTargets&&c!==o.target){var l=i.type==="mousemove"?"mouseout":"pointerout",u=r.createPointerEvent(i,l,c||void 0);if(r.dispatchEvent(u,"pointerout"),a&&r.dispatchEvent(u,"mouseout"),!o.composedPath().includes(c)){var f=r.createPointerEvent(i,"pointerleave",c||void 0);for(f.eventPhase=f.AT_TARGET;f.target&&!o.composedPath().includes(f.target);)f.currentTarget=f.target,r.notifyTarget(f),a&&r.notifyTarget(f,"mouseleave"),$i.isNode(f.target)&&(f.target=f.target.parentNode);r.freeEvent(f)}r.freeEvent(u)}if(c!==o.target){var d=i.type==="mousemove"?"mouseover":"pointerover",h=r.clonePointerEvent(o,d);r.dispatchEvent(h,"pointerover"),a&&r.dispatchEvent(h,"mouseover");for(var p=c&&$i.isNode(c)&&c.parentNode;p&&p!==($i.isNode(r.rootTarget)&&r.rootTarget.parentNode)&&p!==o.target;)p=p.parentNode;var v=!p||p===($i.isNode(r.rootTarget)&&r.rootTarget.parentNode);if(v){var y=r.clonePointerEvent(o,"pointerenter");for(y.eventPhase=y.AT_TARGET;y.target&&y.target!==c&&y.target!==($i.isNode(r.rootTarget)&&r.rootTarget.parentNode);)y.currentTarget=y.target,r.notifyTarget(y),a&&r.notifyTarget(y,"mouseenter"),$i.isNode(y.target)&&(y.target=y.target.parentNode);r.freeEvent(y)}r.freeEvent(h)}r.dispatchEvent(o,"pointermove"),o.pointerType==="touch"&&r.dispatchEvent(o,"touchmove"),a&&(r.dispatchEvent(o,"mousemove"),r.cursor=r.getCursor(o.target)),s.overTargets=o.composedPath(),r.freeEvent(o)},this.onPointerOut=function(i){var o=r.trackingData(i.pointerId);if(o.overTargets){var a=i.pointerType==="mouse"||i.pointerType==="pen",s=r.findMountedTarget(o.overTargets),c=r.createPointerEvent(i,"pointerout",s||void 0);r.dispatchEvent(c),a&&r.dispatchEvent(c,"mouseout");var l=r.createPointerEvent(i,"pointerleave",s||void 0);for(l.eventPhase=l.AT_TARGET;l.target&&l.target!==($i.isNode(r.rootTarget)&&r.rootTarget.parentNode);)l.currentTarget=l.target,r.notifyTarget(l),a&&r.notifyTarget(l,"mouseleave"),$i.isNode(l.target)&&(l.target=l.target.parentNode);o.overTargets=null,r.freeEvent(c),r.freeEvent(l)}r.cursor=null},this.onPointerOver=function(i){var o=r.trackingData(i.pointerId),a=r.createPointerEvent(i),s=a.pointerType==="mouse"||a.pointerType==="pen";r.dispatchEvent(a,"pointerover"),s&&r.dispatchEvent(a,"mouseover"),a.pointerType==="mouse"&&(r.cursor=r.getCursor(a.target));var c=r.clonePointerEvent(a,"pointerenter");for(c.eventPhase=c.AT_TARGET;c.target&&c.target!==($i.isNode(r.rootTarget)&&r.rootTarget.parentNode);)c.currentTarget=c.target,r.notifyTarget(c),s&&r.notifyTarget(c,"mouseenter"),$i.isNode(c.target)&&(c.target=c.target.parentNode);o.overTargets=a.composedPath(),r.freeEvent(a),r.freeEvent(c)},this.onPointerUpOutside=function(i){var o=r.trackingData(i.pointerId),a=r.findMountedTarget(o.pressTargetsByButton[i.button]),s=r.createPointerEvent(i);if(a){for(var c=a;c;)s.currentTarget=c,r.notifyTarget(s,"pointerupoutside"),s.pointerType==="touch"||(s.pointerType==="mouse"||s.pointerType==="pen")&&r.notifyTarget(s,s.button===2?"rightupoutside":"mouseupoutside"),$i.isNode(c)&&(c=c.parentNode);delete o.pressTargetsByButton[i.button]}r.freeEvent(s)},this.onWheel=function(i){var o=r.createWheelEvent(i);r.dispatchEvent(o),r.freeEvent(o)},this.onClick=function(i){if(r.context.config.useNativeClickEvent){var o=r.createPointerEvent(i);r.dispatchEvent(o),r.freeEvent(o)}},this.onPointerCancel=function(i){var o=r.createPointerEvent(i,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0);r.dispatchEvent(o),r.freeEvent(o)}}return t.prototype.init=function(){this.rootTarget=this.context.renderingContext.root.parentNode,this.addEventMapping("pointerdown",this.onPointerDown),this.addEventMapping("pointerup",this.onPointerUp),this.addEventMapping("pointermove",this.onPointerMove),this.addEventMapping("pointerout",this.onPointerOut),this.addEventMapping("pointerleave",this.onPointerOut),this.addEventMapping("pointercancel",this.onPointerCancel),this.addEventMapping("pointerover",this.onPointerOver),this.addEventMapping("pointerupoutside",this.onPointerUpOutside),this.addEventMapping("wheel",this.onWheel),this.addEventMapping("click",this.onClick)},t.prototype.destroy=function(){this.emitter.removeAllListeners(),this.mappingTable={},this.mappingState={},this.eventPool.clear()},t.prototype.getScale=function(){var e=this.context.contextService.getBoundingClientRect(),n=1,r=1,i=this.context.contextService.getDomElement();if(i&&e){var o=i.offsetWidth,a=i.offsetHeight;o&&a&&(n=e.width/o,r=e.height/a)}return{scaleX:n,scaleY:r,bbox:e}},t.prototype.client2Viewport=function(e){var n=this.getScale(),r=n.scaleX,i=n.scaleY,o=n.bbox;return new Vi((e.x-((o==null?void 0:o.left)||0))/r,(e.y-((o==null?void 0:o.top)||0))/i)},t.prototype.viewport2Client=function(e){var n=this.getScale(),r=n.scaleX,i=n.scaleY,o=n.bbox;return new Vi((e.x+((o==null?void 0:o.left)||0))*r,(e.y+((o==null?void 0:o.top)||0))*i)},t.prototype.viewport2Canvas=function(e){var n=e.x,r=e.y,i=this.rootTarget.defaultView,o=i.getCamera(),a=this.context.config,s=a.width,c=a.height,l=o.getPerspectiveInverse(),u=o.getWorldTransform(),f=Pn(this.tmpMatrix,u,l),d=Dn(this.tmpVec3,n/s*2-1,(1-r/c)*2-1,0);return Ft(d,d,f),new Vi(d[0],d[1])},t.prototype.canvas2Viewport=function(e){var n=this.rootTarget.defaultView,r=n.getCamera(),i=r.getPerspective(),o=r.getViewTransform(),a=Pn(this.tmpMatrix,i,o),s=Dn(this.tmpVec3,e.x,e.y,0);Ft(this.tmpVec3,this.tmpVec3,a);var c=this.context.config,l=c.width,u=c.height;return new Vi((s[0]+1)/2*l,(1-(s[1]+1)/2)*u)},t.prototype.setPickHandler=function(e){this.pickHandler=e},t.prototype.addEventMapping=function(e,n){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:n,priority:0}),this.mappingTable[e].sort(function(r,i){return r.priority-i.priority})},t.prototype.mapEvent=function(e){if(this.rootTarget){var n=this.mappingTable[e.type];if(n)for(var r=0,i=n.length;r<i;r++)n[r].fn(e);else console.warn("[EventService]: Event mapping not defined for ".concat(e.type))}},t.prototype.dispatchEvent=function(e,n,r){if(!r)e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,n);else{e.eventPhase=e.AT_TARGET;var i=this.rootTarget.defaultView||null;e.currentTarget=i,this.notifyListeners(e,n)}this.emitter.emit(n||e.type,e)},t.prototype.propagate=function(e,n){if(e.target){var r=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(var i=r.length-1;i>=1;i--)if(e.currentTarget=r[i],this.notifyTarget(e,n),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,n),!(e.propagationStopped||e.propagationImmediatelyStopped)){var o=r.indexOf(e.currentTarget);e.eventPhase=e.BUBBLING_PHASE;for(var i=o+1;i<r.length;i++)if(e.currentTarget=r[i],this.notifyTarget(e,n),e.propagationStopped||e.propagationImmediatelyStopped)return}}},t.prototype.propagationPath=function(e){var n=[e],r=this.rootTarget.defaultView||null;if(r&&r===e)return n.unshift(r.document),n;for(var i=0;i<$w&&e!==this.rootTarget;i++)$i.isNode(e)&&e.parentNode&&(n.push(e.parentNode),e=e.parentNode);return r&&n.push(r),n},t.prototype.hitTest=function(e){var n=e.viewportX,r=e.viewportY,i=this.context.config,o=i.width,a=i.height,s=i.disableHitTesting;return n<0||r<0||n>o||r>a?null:!s&&this.pickHandler(e)||this.rootTarget||null},t.prototype.isNativeEventFromCanvas=function(e,n){var r=n==null?void 0:n.target;if(r!=null&&r.shadowRoot&&(r=n.composedPath()[0]),r){if(r===e)return!0;if(e&&e.contains)return e.contains(r)}return n!=null&&n.composedPath?n.composedPath().indexOf(e)>-1:!1},t.prototype.getExistedHTML=function(e){var n,r;if(e.nativeEvent.composedPath)try{for(var i=On(e.nativeEvent.composedPath()),o=i.next();!o.done;o=i.next()){var a=o.value,s=this.nativeHTMLMap.get(a);if(s)return s}}catch(c){n={error:c}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return null},t.prototype.pickTarget=function(e){return this.hitTest({clientX:e.clientX,clientY:e.clientY,viewportX:e.viewportX,viewportY:e.viewportY,x:e.canvasX,y:e.canvasY})},t.prototype.createPointerEvent=function(e,n,r,i){var o=this.allocateEvent(f0);this.copyPointerData(e,o),this.copyMouseData(e,o),this.copyData(e,o),o.nativeEvent=e.nativeEvent,o.originalEvent=e;var a=this.getExistedHTML(o),s=this.context.contextService.getDomElement();return o.target=r!=null?r:a||this.isNativeEventFromCanvas(s,o.nativeEvent)&&this.pickTarget(o)||i,typeof n=="string"&&(o.type=n),o},t.prototype.createWheelEvent=function(e){var n=this.allocateEvent(d0);this.copyWheelData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.nativeEvent=e.nativeEvent,n.originalEvent=e;var r=this.getExistedHTML(n),i=this.context.contextService.getDomElement();return n.target=r||this.isNativeEventFromCanvas(i,n.nativeEvent)&&this.pickTarget(n),n},t.prototype.trackingData=function(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]},t.prototype.cloneWheelEvent=function(e){var n=this.allocateEvent(d0);return n.nativeEvent=e.nativeEvent,n.originalEvent=e.originalEvent,this.copyWheelData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.target=e.target,n.path=e.composedPath().slice(),n.type=e.type,n},t.prototype.clonePointerEvent=function(e,n){var r=this.allocateEvent(f0);return r.nativeEvent=e.nativeEvent,r.originalEvent=e.originalEvent,this.copyPointerData(e,r),this.copyMouseData(e,r),this.copyData(e,r),r.target=e.target,r.path=e.composedPath().slice(),r.type=n!=null?n:r.type,r},t.prototype.copyPointerData=function(e,n){n.pointerId=e.pointerId,n.width=e.width,n.height=e.height,n.isPrimary=e.isPrimary,n.pointerType=e.pointerType,n.pressure=e.pressure,n.tangentialPressure=e.tangentialPressure,n.tiltX=e.tiltX,n.tiltY=e.tiltY,n.twist=e.twist},t.prototype.copyMouseData=function(e,n){n.altKey=e.altKey,n.button=e.button,n.buttons=e.buttons,n.ctrlKey=e.ctrlKey,n.metaKey=e.metaKey,n.shiftKey=e.shiftKey,n.client.copyFrom(e.client),n.movement.copyFrom(e.movement),n.canvas.copyFrom(e.canvas),n.screen.copyFrom(e.screen),n.global.copyFrom(e.global),n.offset.copyFrom(e.offset)},t.prototype.copyWheelData=function(e,n){n.deltaMode=e.deltaMode,n.deltaX=e.deltaX,n.deltaY=e.deltaY,n.deltaZ=e.deltaZ},t.prototype.copyData=function(e,n){n.isTrusted=e.isTrusted,n.timeStamp=a0.now(),n.type=e.type,n.detail=e.detail,n.view=e.view,n.page.copyFrom(e.page),n.viewport.copyFrom(e.viewport)},t.prototype.allocateEvent=function(e){this.eventPool.has(e)||this.eventPool.set(e,[]);var n=this.eventPool.get(e).pop()||new e(this);return n.eventPhase=n.NONE,n.currentTarget=null,n.path=[],n.target=null,n},t.prototype.freeEvent=function(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");var n=e.constructor;this.eventPool.has(n)||this.eventPool.set(n,[]),this.eventPool.get(n).push(e)},t.prototype.notifyTarget=function(e,n){n=n!=null?n:e.type;var r=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?"".concat(n,"capture"):n;this.notifyListeners(e,r),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,n)},t.prototype.notifyListeners=function(e,n){var r=e.currentTarget.emitter,i=r._events[n];if(i)if("fn"in i)i.once&&r.removeListener(n,i.fn,void 0,!0),i.fn.call(e.currentTarget||i.context,e);else for(var o=0;o<i.length&&!e.propagationImmediatelyStopped;o++)i[o].once&&r.removeListener(n,i[o].fn,void 0,!0),i[o].fn.call(e.currentTarget||i[o].context,e)},t.prototype.findMountedTarget=function(e){if(!e)return null;for(var n=e[e.length-1],r=e.length-2;r>=0;r--){var i=e[r];if(i===this.rootTarget||$i.isNode(i)&&i.parentNode===n)n=e[r];else break}return n},t.prototype.getCursor=function(e){for(var n=e;n;){var r=_w(n)&&n.getAttribute("cursor");if(r)return r;n=$i.isNode(n)&&n.parentNode}},t}(),h0=function(){function t(){}return t.prototype.getOrCreateCanvas=function(e,n){if(this.canvas)return this.canvas;if(e||mt.offscreenCanvas)this.canvas=e||mt.offscreenCanvas,this.context=this.canvas.getContext("2d",nt({willReadFrequently:!0},n));else try{this.canvas=new window.OffscreenCanvas(0,0),this.context=this.canvas.getContext("2d",nt({willReadFrequently:!0},n)),(!this.context||!this.context.measureText)&&(this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"))}catch(r){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d",nt({willReadFrequently:!0},n))}return this.canvas.width=10,this.canvas.height=10,this.canvas},t.prototype.getOrCreateContext=function(e,n){return this.context?this.context:(this.getOrCreateCanvas(e,n),this.context)},t}(),Nl;(function(t){t[t.CAMERA_CHANGED=0]="CAMERA_CHANGED",t[t.DISPLAY_OBJECT_CHANGED=1]="DISPLAY_OBJECT_CHANGED",t[t.NONE=2]="NONE"})(Nl||(Nl={}));var p0=function(){function t(e,n){this.globalRuntime=e,this.context=n,this.inited=!1,this.stats={total:0,rendered:0},this.zIndexCounter=0,this.hooks={init:new _o,initAsync:new Nw,dirtycheck:new c0,cull:new c0,beginFrame:new _o,beforeRender:new _o,render:new _o,afterRender:new _o,endFrame:new _o,destroy:new _o,pick:new Rw,pickSync:new c0,pointerDown:new _o,pointerUp:new _o,pointerMove:new _o,pointerOut:new _o,pointerOver:new _o,pointerWheel:new _o,pointerCancel:new _o,click:new _o}}return t.prototype.init=function(e){var n=this,r=nt(nt({},this.globalRuntime),this.context);this.context.renderingPlugins.forEach(function(i){i.apply(r,n.globalRuntime)}),this.hooks.init.call(),this.hooks.initAsync.getCallbacksNum()===0?(this.inited=!0,e()):this.hooks.initAsync.promise().then(function(){n.inited=!0,e()})},t.prototype.getStats=function(){return this.stats},t.prototype.disableDirtyRectangleRendering=function(){var e=this.context.config.renderer,n=e.getConfig().enableDirtyRectangleRendering;return!n||this.context.renderingContext.renderReasons.has(Nl.CAMERA_CHANGED)},t.prototype.render=function(e,n,r){var i=this;this.stats.total=0,this.stats.rendered=0,this.zIndexCounter=0;var o=this.context.renderingContext;if(this.globalRuntime.sceneGraphService.syncHierarchy(o.root),this.globalRuntime.sceneGraphService.triggerPendingEvents(),o.renderReasons.size&&this.inited){o.dirtyRectangleRenderingDisabled=this.disableDirtyRectangleRendering();var a=o.renderReasons.size===1&&o.renderReasons.has(Nl.CAMERA_CHANGED),s=!e.disableRenderHooks||!(e.disableRenderHooks&&a);s&&this.renderDisplayObject(o.root,e,o),this.hooks.beginFrame.call(n),s&&o.renderListCurrentFrame.forEach(function(c){i.hooks.beforeRender.call(c),i.hooks.render.call(c),i.hooks.afterRender.call(c)}),this.hooks.endFrame.call(n),o.renderListCurrentFrame=[],o.renderReasons.clear(),r()}},t.prototype.renderDisplayObject=function(e,n,r){var i=this,o=n.renderer.getConfig(),a=o.enableDirtyCheck,s=o.enableCulling;this.globalRuntime.enableCSSParsing&&this.globalRuntime.styleValueRegistry.recalc(e);var c=e.renderable,l=a?c.dirty||r.dirtyRectangleRenderingDisabled?e:null:e;if(l){var u=s?this.hooks.cull.call(l,this.context.camera):l;u&&(this.stats.rendered++,r.renderListCurrentFrame.push(u))}e.renderable.dirty=!1,e.sortable.renderOrder=this.zIndexCounter++,this.stats.total++;var f=e.sortable;f.dirty&&(this.sort(e,f),f.dirty=!1,f.dirtyChildren=[],f.dirtyReason=void 0),(f.sorted||e.childNodes).forEach(function(d){i.renderDisplayObject(d,n,r)})},t.prototype.sort=function(e,n){n.sorted&&n.dirtyReason!==Pl.Z_INDEX_CHANGED?n.dirtyChildren.forEach(function(r){var i=e.childNodes.indexOf(r);if(i===-1){var o=n.sorted.indexOf(r);o>=0&&n.sorted.splice(o,1)}else if(n.sorted.length===0)n.sorted.push(r);else{var a=Ym(n.sorted,r);n.sorted.splice(a,0,r)}}):n.sorted=e.childNodes.slice().sort(Hm)},t.prototype.destroy=function(){this.inited=!1,this.hooks.destroy.call(),this.globalRuntime.sceneGraphService.clearPendingEvents()},t.prototype.dirtify=function(){this.context.renderingContext.renderReasons.add(Nl.DISPLAY_OBJECT_CHANGED)},t}(),Kw=/\[\s*(.*)=(.*)\s*\]/,Zw=function(){function t(){}return t.prototype.selectOne=function(e,n){var r=this;if(e.startsWith("."))return n.find(function(s){return((s==null?void 0:s.classList)||[]).indexOf(r.getIdOrClassname(e))>-1});if(e.startsWith("#"))return n.find(function(s){return s.id===r.getIdOrClassname(e)});if(e.startsWith("[")){var i=this.getAttribute(e),o=i.name,a=i.value;return o?n.find(function(s){return n!==s&&(o==="name"?s.name===a:r.attributeToString(s,o)===a)}):null}else return n.find(function(s){return n!==s&&s.nodeName===e})},t.prototype.selectAll=function(e,n){var r=this;if(e.startsWith("."))return n.findAll(function(s){return n!==s&&((s==null?void 0:s.classList)||[]).indexOf(r.getIdOrClassname(e))>-1});if(e.startsWith("#"))return n.findAll(function(s){return n!==s&&s.id===r.getIdOrClassname(e)});if(e.startsWith("[")){var i=this.getAttribute(e),o=i.name,a=i.value;return o?n.findAll(function(s){return n!==s&&(o==="name"?s.name===a:r.attributeToString(s,o)===a)}):[]}else return n.findAll(function(s){return n!==s&&s.nodeName===e})},t.prototype.is=function(e,n){if(e.startsWith("."))return n.className===this.getIdOrClassname(e);if(e.startsWith("#"))return n.id===this.getIdOrClassname(e);if(e.startsWith("[")){var r=this.getAttribute(e),i=r.name,o=r.value;return i==="name"?n.name===o:this.attributeToString(n,i)===o}else return n.nodeName===e},t.prototype.getIdOrClassname=function(e){return e.substring(1)},t.prototype.getAttribute=function(e){var n=e.match(Kw),r="",i="";return n&&n.length>2&&(r=n[1].replace(/"/g,""),i=n[2].replace(/"/g,"")),{name:r,value:i}},t.prototype.attributeToString=function(e,n){if(!e.getAttribute)return"";var r=e.getAttribute(n);return Lt(r)?"":r.toString?r.toString():""},t}(),Wc=function(t){xt(e,t);function e(n,r,i,o,a,s,c,l){var u=t.call(this,null)||this;return u.relatedNode=r,u.prevValue=i,u.newValue=o,u.attrName=a,u.attrChange=s,u.prevParsedValue=c,u.newParsedValue=l,u.type=n,u}return e.ADDITION=2,e.MODIFICATION=1,e.REMOVAL=3,e}(Cu),He;(function(t){t.REPARENT="reparent",t.DESTROY="destroy",t.ATTR_MODIFIED="DOMAttrModified",t.INSERTED="DOMNodeInserted",t.REMOVED="removed",t.MOUNTED="DOMNodeInsertedIntoDocument",t.UNMOUNTED="DOMNodeRemovedFromDocument",t.BOUNDS_CHANGED="bounds-changed",t.CULLED="culled"})(He||(He={}));function v0(t){var e=t.renderable;e&&(e.renderBoundsDirty=!0,e.boundsDirty=!0)}var Jw=new Wc(He.REPARENT,null,"","","",0,"",""),Qw=function(){function t(e){var n=this;this.runtime=e,this.pendingEvents=[],this.boundsChangedEvent=new sn(He.BOUNDS_CHANGED),this.rotate=function(){var r=ze();return function(i,o,a,s,c){a===void 0&&(a=0),s===void 0&&(s=0),c===void 0&&(c=!0),typeof o=="number"&&(o=te(o,a,s));var l=i.transformable;if(i.parentNode===null||!i.parentNode.transformable)n.rotateLocal(i,o);else{var u=ze();ba(u,o[0],o[1],o[2]);var f=n.getRotation(i),d=n.getRotation(i.parentNode);Io(r,d),Us(r,r),ni(u,r,u),ni(l.localRotation,u,f),Oc(l.localRotation,l.localRotation),c&&n.dirtifyLocal(i,l)}}}(),this.rotateLocal=function(){var r=ze();return function(i,o,a,s,c){a===void 0&&(a=0),s===void 0&&(s=0),c===void 0&&(c=!0),typeof o=="number"&&(o=te(o,a,s));var l=i.transformable;ba(r,o[0],o[1],o[2]),Qa(l.localRotation,l.localRotation,r),c&&n.dirtifyLocal(i,l)}}(),this.setEulerAngles=function(){var r=ze();return function(i,o,a,s,c){a===void 0&&(a=0),s===void 0&&(s=0),c===void 0&&(c=!0),typeof o=="number"&&(o=te(o,a,s));var l=i.transformable;if(i.parentNode===null||!i.parentNode.transformable)n.setLocalEulerAngles(i,o);else{ba(l.localRotation,o[0],o[1],o[2]);var u=n.getRotation(i.parentNode);Io(r,Us(ze(),u)),Qa(l.localRotation,l.localRotation,r),c&&n.dirtifyLocal(i,l)}}}(),this.translateLocal=function(){return function(r,i,o,a,s){o===void 0&&(o=0),a===void 0&&(a=0),s===void 0&&(s=!0),typeof i=="number"&&(i=te(i,o,a));var c=r.transformable;fn(i,Gt())||(re(i,i,c.localRotation),No(c.localPosition,c.localPosition,i),s&&n.dirtifyLocal(r,c))}}(),this.setPosition=function(){var r=ue(),i=Gt();return function(o,a,s){s===void 0&&(s=!0);var c=o.transformable;if(i[0]=a[0],i[1]=a[1],i[2]=a[2]||0,!fn(n.getPosition(o),i)){if(lr(c.position,i),o.parentNode===null||!o.parentNode.transformable)lr(c.localPosition,i);else{var l=o.parentNode.transformable;ga(r,l.worldTransform),pr(r,r),Ft(c.localPosition,i,r)}s&&n.dirtifyLocal(o,c)}}}(),this.setLocalPosition=function(){var r=Gt();return function(i,o,a){a===void 0&&(a=!0);var s=i.transformable;r[0]=o[0],r[1]=o[1],r[2]=o[2]||0,!fn(s.localPosition,r)&&(lr(s.localPosition,r),a&&n.dirtifyLocal(i,s))}}(),this.translate=function(){var r=Gt(),i=Gt(),o=Gt();return function(a,s,c,l,u){c===void 0&&(c=0),l===void 0&&(l=0),u===void 0&&(u=!0),typeof s=="number"&&(s=Dn(i,s,c,l)),!fn(s,r)&&(No(o,n.getPosition(a),s),n.setPosition(a,o,u))}}(),this.setRotation=function(){var r=ze();return function(i,o,a,s,c,l){l===void 0&&(l=!0);var u=i.transformable;if(typeof o=="number"&&(o=Vs(o,a,s,c)),i.parentNode===null||!i.parentNode.transformable)n.setLocalRotation(i,o);else{var f=n.getRotation(i.parentNode);Io(r,f),Us(r,r),ni(u.localRotation,r,o),Oc(u.localRotation,u.localRotation),l&&n.dirtifyLocal(i,u)}}},this.displayObjectDependencyMap=new WeakMap,this.calcLocalTransform=function(){var r=ue(),i=Gt(),o=Vs(0,0,0,1);return function(a){var s=a.localSkew[0]!==0||a.localSkew[1]!==0;if(s){if(Sr(a.localTransform,a.localRotation,a.localPosition,te(1,1,1),a.origin),a.localSkew[0]!==0||a.localSkew[1]!==0){var c=po(r);c[4]=Math.tan(a.localSkew[0]),c[1]=Math.tan(a.localSkew[1]),Pn(a.localTransform,a.localTransform,c)}var l=Sr(r,o,i,a.localScale,a.origin);Pn(a.localTransform,a.localTransform,l)}else Sr(a.localTransform,a.localRotation,a.localPosition,a.localScale,a.origin)}}()}return t.prototype.matches=function(e,n){return this.runtime.sceneGraphSelector.is(e,n)},t.prototype.querySelector=function(e,n){return this.runtime.sceneGraphSelector.selectOne(e,n)},t.prototype.querySelectorAll=function(e,n){return this.runtime.sceneGraphSelector.selectAll(e,n)},t.prototype.attach=function(e,n,r){var i,o=!1;e.parentNode&&(o=e.parentNode!==n,this.detach(e)),e.parentNode=n,Lt(r)?e.parentNode.childNodes.push(e):e.parentNode.childNodes.splice(r,0,e);var a=n.sortable;(!((i=a==null?void 0:a.sorted)===null||i===void 0)&&i.length||e.parsedStyle.zIndex)&&(a.dirtyChildren.indexOf(e)===-1&&a.dirtyChildren.push(e),a.dirty=!0,a.dirtyReason=Pl.ADDED);var s=e.transformable;s&&this.dirtifyWorld(e,s),s.frozen&&this.unfreezeParentToRoot(e),o&&e.dispatchEvent(Jw)},t.prototype.detach=function(e){var n,r;if(e.parentNode){var i=e.transformable,o=e.parentNode.sortable;(!((n=o==null?void 0:o.sorted)===null||n===void 0)&&n.length||!((r=e.style)===null||r===void 0)&&r.zIndex)&&(o.dirtyChildren.indexOf(e)===-1&&o.dirtyChildren.push(e),o.dirty=!0,o.dirtyReason=Pl.REMOVED);var a=e.parentNode.childNodes.indexOf(e);a>-1&&e.parentNode.childNodes.splice(a,1),i&&this.dirtifyWorld(e,i),e.parentNode=null}},t.prototype.getOrigin=function(e){return e.getGeometryBounds(),e.transformable.origin},t.prototype.setOrigin=function(e,n,r,i){r===void 0&&(r=0),i===void 0&&(i=0),typeof n=="number"&&(n=[n,r,i]);var o=e.transformable;if(!(n[0]===o.origin[0]&&n[1]===o.origin[1]&&n[2]===o.origin[2])){var a=o.origin;a[0]=n[0],a[1]=n[1],a[2]=n[2]||0,this.dirtifyLocal(e,o)}},t.prototype.setLocalEulerAngles=function(e,n,r,i,o){r===void 0&&(r=0),i===void 0&&(i=0),o===void 0&&(o=!0),typeof n=="number"&&(n=te(n,r,i));var a=e.transformable;ba(a.localRotation,n[0],n[1],n[2]),o&&this.dirtifyLocal(e,a)},t.prototype.scaleLocal=function(e,n,r){r===void 0&&(r=!0);var i=e.transformable;uf(i.localScale,i.localScale,te(n[0],n[1],n[2]||1)),r&&this.dirtifyLocal(e,i)},t.prototype.setLocalScale=function(e,n,r){r===void 0&&(r=!0);var i=e.transformable,o=te(n[0],n[1],n[2]||i.localScale[2]);fn(o,i.localScale)||(lr(i.localScale,o),r&&this.dirtifyLocal(e,i))},t.prototype.setLocalRotation=function(e,n,r,i,o,a){a===void 0&&(a=!0),typeof n=="number"&&(n=Vs(n,r,i,o));var s=e.transformable;Io(s.localRotation,n),a&&this.dirtifyLocal(e,s)},t.prototype.setLocalSkew=function(e,n,r){typeof n=="number"&&(n=Do(n,r));var i=e.transformable;xn(i.localSkew,n),this.dirtifyLocal(e,i)},t.prototype.dirtifyLocal=function(e,n){n.localDirtyFlag||(n.localDirtyFlag=!0,n.dirtyFlag||this.dirtifyWorld(e,n))},t.prototype.dirtifyWorld=function(e,n){n.dirtyFlag||this.unfreezeParentToRoot(e),this.dirtifyWorldInternal(e,n),this.dirtifyToRoot(e,!0)},t.prototype.triggerPendingEvents=function(){var e=this,n=new Set,r=function(i,o){i.isConnected&&!n.has(i.entity)&&(e.boundsChangedEvent.detail=o,e.boundsChangedEvent.target=i,i.isMutationObserved?i.dispatchEvent(e.boundsChangedEvent):i.ownerDocument.defaultView.dispatchEvent(e.boundsChangedEvent,!0),n.add(i.entity))};this.pendingEvents.forEach(function(i){var o=j(i,2),a=o[0],s=o[1];s.affectChildren?a.forEach(function(c){r(c,s)}):r(a,s)}),this.clearPendingEvents(),n.clear()},t.prototype.clearPendingEvents=function(){this.pendingEvents=[]},t.prototype.dirtifyToRoot=function(e,n){n===void 0&&(n=!1);var r=e;for(r.renderable&&(r.renderable.dirty=!0);r;)v0(r),r=r.parentNode;n&&e.forEach(function(i){v0(i)}),this.informDependentDisplayObjects(e),this.pendingEvents.push([e,{affectChildren:n}])},t.prototype.updateDisplayObjectDependency=function(e,n,r,i){if(n&&n!==r){var o=this.displayObjectDependencyMap.get(n);if(o&&o[e]){var a=o[e].indexOf(i);o[e].splice(a,1)}}if(r){var s=this.displayObjectDependencyMap.get(r);s||(this.displayObjectDependencyMap.set(r,{}),s=this.displayObjectDependencyMap.get(r)),s[e]||(s[e]=[]),s[e].push(i)}},t.prototype.informDependentDisplayObjects=function(e){var n=this,r=this.displayObjectDependencyMap.get(e);r&&Object.keys(r).forEach(function(i){r[i].forEach(function(o){n.dirtifyToRoot(o,!0),o.dispatchEvent(new Wc(He.ATTR_MODIFIED,o,n,n,i,Wc.MODIFICATION,n,n)),o.isCustomElement&&o.isConnected&&o.attributeChangedCallback&&o.attributeChangedCallback(i,n,n)})})},t.prototype.getPosition=function(e){var n=e.transformable;return Ka(n.position,this.getWorldTransform(e,n))},t.prototype.getRotation=function(e){var n=e.transformable;return Za(n.rotation,this.getWorldTransform(e,n))},t.prototype.getScale=function(e){var n=e.transformable;return Li(n.scaling,this.getWorldTransform(e,n))},t.prototype.getWorldTransform=function(e,n){return n===void 0&&(n=e.transformable),!n.localDirtyFlag&&!n.dirtyFlag||(e.parentNode&&e.parentNode.transformable&&this.getWorldTransform(e.parentNode),this.sync(e,n)),n.worldTransform},t.prototype.getLocalPosition=function(e){return e.transformable.localPosition},t.prototype.getLocalRotation=function(e){return e.transformable.localRotation},t.prototype.getLocalScale=function(e){return e.transformable.localScale},t.prototype.getLocalSkew=function(e){return e.transformable.localSkew},t.prototype.getLocalTransform=function(e){var n=e.transformable;return n.localDirtyFlag&&(this.calcLocalTransform(n),n.localDirtyFlag=!1),n.localTransform},t.prototype.setLocalTransform=function(e,n){var r=Ka(Gt(),n),i=Za(ze(),n),o=Li(Gt(),n);this.setLocalScale(e,o,!1),this.setLocalPosition(e,r,!1),this.setLocalRotation(e,i,void 0,void 0,void 0,!1),this.dirtifyLocal(e,e.transformable)},t.prototype.resetLocalTransform=function(e){this.setLocalScale(e,[1,1,1]),this.setLocalPosition(e,[0,0,0]),this.setLocalEulerAngles(e,[0,0,0]),this.setLocalSkew(e,[0,0])},t.prototype.getTransformedGeometryBounds=function(e,n,r){n===void 0&&(n=!1);var i=this.getGeometryBounds(e,n);if(ro.isEmpty(i))return null;var o=r||new ro;return o.setFromTransformedAABB(i,this.getWorldTransform(e)),o},t.prototype.getGeometryBounds=function(e,n){n===void 0&&(n=!1);var r=e.geometry;r.dirty&&mt.styleValueRegistry.updateGeometry(e);var i=n?r.renderBounds:r.contentBounds||null;return i||new ro},t.prototype.getBounds=function(e,n){var r=this;n===void 0&&(n=!1);var i=e.renderable;if(!i.boundsDirty&&!n&&i.bounds)return i.bounds;if(!i.renderBoundsDirty&&n&&i.renderBounds)return i.renderBounds;var o=n?i.renderBounds:i.bounds,a=this.getTransformedGeometryBounds(e,n,o),s=e.childNodes;if(s.forEach(function(u){var f=r.getBounds(u,n);f&&(a?a.add(f):(a=o||new ro,a.update(f.center,f.halfExtents)))}),a||(a=new ro),n){var c=Um(e);if(c){var l=c.parsedStyle.clipPath.getBounds(n);a?l&&(a=l.intersection(a)):a.update(l.center,l.halfExtents)}}return n?(i.renderBounds=a,i.renderBoundsDirty=!1):(i.bounds=a,i.boundsDirty=!1),a},t.prototype.getLocalBounds=function(e){if(e.parentNode){var n=ue();e.parentNode.transformable&&(n=pr(ue(),this.getWorldTransform(e.parentNode)));var r=this.getBounds(e);if(!ro.isEmpty(r)){var i=new ro;return i.setFromTransformedAABB(r,n),i}}return this.getBounds(e)},t.prototype.getBoundingClientRect=function(e){var n,r,i,o=this.getGeometryBounds(e);ro.isEmpty(o)||(i=new ro,i.setFromTransformedAABB(o,this.getWorldTransform(e)));var a=(r=(n=e.ownerDocument)===null||n===void 0?void 0:n.defaultView)===null||r===void 0?void 0:r.getContextService().getBoundingClientRect();if(i){var s=j(i.getMin(),2),c=s[0],l=s[1],u=j(i.getMax(),2),f=u[0],d=u[1];return new wu(c+((a==null?void 0:a.left)||0),l+((a==null?void 0:a.top)||0),f-c,d-l)}return new wu((a==null?void 0:a.left)||0,(a==null?void 0:a.top)||0,0,0)},t.prototype.dirtifyWorldInternal=function(e,n){var r=this;if(!n.dirtyFlag){n.dirtyFlag=!0,n.frozen=!1,e.childNodes.forEach(function(o){var a=o.transformable;a.dirtyFlag||r.dirtifyWorldInternal(o,a)});var i=e.renderable;i&&(i.renderBoundsDirty=!0,i.boundsDirty=!0,i.dirty=!0)}},t.prototype.syncHierarchy=function(e){var n=e.transformable;if(!n.frozen){n.frozen=!0,(n.localDirtyFlag||n.dirtyFlag)&&this.sync(e,n);for(var r=e.childNodes,i=0;i<r.length;i++)this.syncHierarchy(r[i])}},t.prototype.sync=function(e,n){if(n.localDirtyFlag&&(this.calcLocalTransform(n),n.localDirtyFlag=!1),n.dirtyFlag){var r=e.parentNode,i=r&&r.transformable;r===null||!i?ga(n.worldTransform,n.localTransform):Pn(n.worldTransform,i.worldTransform,n.localTransform),n.dirtyFlag=!1}},t.prototype.unfreezeParentToRoot=function(e){for(var n=e.parentNode;n;){var r=n.transformable;r&&(r.frozen=!1),n=n.parentNode}},t}(),Rl={MetricsString:"|\xC9q\xC5",BaselineSymbol:"M",BaselineMultiplier:1.4,HeightMultiplier:2,Newlines:[10,13],BreakingSpaces:[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]},Sh=/[a-zA-Z0-9\u00C0-\u00D6\u00D8-\u00f6\u00f8-\u00ff!"#$%&'()*+,-./:;]/,g0=/[!%),.:;?\]}'""]/,tO=/[$('"]/,eO=/[!),.:;?\]}'""]/,nO=/[([{'"]/,rO=/[)\]'"?!:;,.]/,iO=/[(['"...]/,oO=/[!%),.:;?\]}'"]/,aO=/[$([{'"#]/,sO=new RegExp("".concat(g0.source,"|").concat(eO.source,"|").concat(rO.source,"|").concat(oO.source)),cO=new RegExp("".concat(tO.source,"|").concat(nO.source,"|").concat(iO.source,"|").concat(aO.source)),lO=function(){function t(e){var n=this;this.runtime=e,this.fontMetricsCache={},this.shouldBreakByKinsokuShorui=function(r,i){return n.isBreakingSpace(i)?!1:!!(r&&(cO.exec(i)||sO.exec(r)))},this.trimByKinsokuShorui=function(r){var i=ut([],j(r),!1),o=i[i.length-2];if(!o)return r;var a=o[o.length-1];return i[i.length-2]=o.slice(0,-1),i[i.length-1]=a+i[i.length-1],i}}return t.prototype.measureFont=function(e,n){if(this.fontMetricsCache[e])return this.fontMetricsCache[e];var r={ascent:0,descent:0,fontSize:0},i=this.runtime.offscreenCanvasCreator.getOrCreateCanvas(n),o=this.runtime.offscreenCanvasCreator.getOrCreateContext(n,{willReadFrequently:!0});o.font=e;var a=Rl.MetricsString+Rl.BaselineSymbol,s=Math.ceil(o.measureText(a).width),c=Math.ceil(o.measureText(Rl.BaselineSymbol).width),l=Rl.HeightMultiplier*c;c=c*Rl.BaselineMultiplier|0,i.width=s,i.height=l,o.fillStyle="#f00",o.fillRect(0,0,s,l),o.font=e,o.textBaseline="alphabetic",o.fillStyle="#000",o.fillText(a,0,c);var u=o.getImageData(0,0,s||1,l||1).data,f=u.length,d=s*4,h=0,p=0,v=!1;for(h=0;h<c;++h){for(var y=0;y<d;y+=4)if(u[p+y]!==255){v=!0;break}if(!v)p+=d;else break}for(r.ascent=c-h,p=f-d,v=!1,h=l;h>c;--h){for(var y=0;y<d;y+=4)if(u[p+y]!==255){v=!0;break}if(!v)p-=d;else break}return r.descent=h-c,r.fontSize=r.ascent+r.descent,this.fontMetricsCache[e]=r,r},t.prototype.measureText=function(e,n,r){var i=n.fontSize,o=i===void 0?16:i,a=n.wordWrap,s=a===void 0?!1:a,c=n.lineHeight,l=n.lineWidth,u=l===void 0?1:l,f=n.textBaseline,d=f===void 0?"alphabetic":f,h=n.textAlign,p=h===void 0?"start":h,v=n.letterSpacing,y=v===void 0?0:v,m=n.textPath;n.textPathSide,n.textPathStartOffset;var b=n.leading,O=b===void 0?0:b,E=Dw(n),w=this.measureFont(E,r);w.fontSize===0&&(w.fontSize=o,w.ascent=o);var _=this.runtime.offscreenCanvasCreator.getOrCreateContext(r);_.font=E,n.isOverflowing=!1;var S=s?this.wordWrap(e,n,r):e,M=S.split(/(?:\r\n|\r|\n)/),T=new Array(M.length),A=0;if(m){m.getTotalLength();for(var C=0;C<M.length;C++)var N=_.measureText(M[C]).width+(M[C].length-1)*y}else{for(var C=0;C<M.length;C++){var k=_.measureText(M[C]).width+(M[C].length-1)*y;T[C]=k,A=Math.max(A,k)}var N=A+u,R=c||w.fontSize+u,I=Math.max(R,w.fontSize+u)+(M.length-1)*(R+O);R+=O;var D=0;return d==="middle"?D=-I/2:d==="bottom"||d==="alphabetic"||d==="ideographic"?D=-I:(d==="top"||d==="hanging")&&(D=0),{font:E,width:N,height:I,lines:M,lineWidths:T,lineHeight:R,maxLineWidth:A,fontProperties:w,lineMetrics:T.map(function(F,G){var X=0;return p==="center"||p==="middle"?X-=F/2:(p==="right"||p==="end")&&(X-=F),new wu(X-u/2,D+G*R,F+u,R)})}}},t.prototype.setGraphemeOnPath=function(){},t.prototype.wordWrap=function(e,n,r){var i=this,o=n.wordWrapWidth,a=o===void 0?0:o,s=n.letterSpacing,c=s===void 0?0:s,l=n.maxLines,u=l===void 0?1/0:l,f=n.textOverflow,d=this.runtime.offscreenCanvasCreator.getOrCreateContext(r),h=a+c,p="";f==="ellipsis"?p="...":f&&f!=="clip"&&(p=f);for(var v=[],y=0,m=0,b={},O=function(D){return i.getFromCache(D,c,b,d)},E=Array.from(p).reduce(function(D,B){return D+O(B)},0),w=Array.from(e),_=0;_<w.length;_++){var S=w[_],M=e[_-1],T=e[_+1],A=O(S);if(this.isNewline(S)){if(y++,y>=u){n.isOverflowing=!0;break}m=0,v[y]="";continue}if(m>0&&m+A>h){if(y+1>=u){if(n.isOverflowing=!0,E>0&&E<=h){for(var C=v[y].length,N=0,k=C,R=0;R<C;R++){var I=O(v[y][R]);if(N+I+E>h){k=R;break}N+=I}v[y]=(v[y]||"").slice(0,k)+p}break}if(y++,m=0,v[y]="",this.isBreakingSpace(S))continue;this.canBreakInLastChar(S)||(v=this.trimToBreakable(v),m=this.sumTextWidthByCache(v[y]||"",b)),this.shouldBreakByKinsokuShorui(S,T)&&(v=this.trimByKinsokuShorui(v),m+=O(M||""))}m+=A,v[y]=(v[y]||"")+S}return v.join(`
`)},t.prototype.isBreakingSpace=function(e){return typeof e!="string"?!1:Rl.BreakingSpaces.indexOf(e.charCodeAt(0))>=0},t.prototype.isNewline=function(e){return typeof e!="string"?!1:Rl.Newlines.indexOf(e.charCodeAt(0))>=0},t.prototype.trimToBreakable=function(e){var n=ut([],j(e),!1),r=n[n.length-2],i=this.findBreakableIndex(r);if(i===-1||!r)return n;var o=r.slice(i,i+1),a=this.isBreakingSpace(o),s=i+1,c=i+(a?0:1);return n[n.length-1]+=r.slice(s,r.length),n[n.length-2]=r.slice(0,c),n},t.prototype.canBreakInLastChar=function(e){return!(e&&Sh.test(e))},t.prototype.sumTextWidthByCache=function(e,n){return e.split("").reduce(function(r,i){if(!n[i])throw Error("cannot count the word without cache");return r+n[i]},0)},t.prototype.findBreakableIndex=function(e){for(var n=e.length-1;n>=0;n--)if(!Sh.test(e[n]))return n;return-1},t.prototype.getFromCache=function(e,n,r,i){var o=r[e];if(typeof o!="number"){var a=e.length*n;o=i.measureText(e).width+a,r[e]=o}return o},t}(),mt={},uO=function(){var t,e=new r1,n=new u0;return t={},t[kt.CIRCLE]=new zw,t[kt.ELLIPSE]=new Ww,t[kt.RECT]=e,t[kt.IMAGE]=e,t[kt.GROUP]=new Uw,t[kt.LINE]=new Yw,t[kt.TEXT]=new i1(mt),t[kt.POLYLINE]=n,t[kt.POLYGON]=n,t[kt.PATH]=new Hw,t[kt.HTML]=new Vw,t[kt.MESH]=null,t}(),fO=function(){var t,e=new lw,n=new r0;return t={},t[ee.PERCENTAGE]=null,t[ee.NUMBER]=new pw,t[ee.ANGLE]=new sw,t[ee.DEFINED_PATH]=new cw,t[ee.PAINT]=e,t[ee.COLOR]=e,t[ee.FILTER]=new uw,t[ee.LENGTH]=n,t[ee.LENGTH_PERCENTAGE]=n,t[ee.LENGTH_PERCENTAGE_12]=new fw,t[ee.LENGTH_PERCENTAGE_14]=new dw,t[ee.COORDINATE]=new r0,t[ee.OFFSET_DISTANCE]=new vw,t[ee.OPACITY_VALUE]=new i0,t[ee.PATH]=new gw,t[ee.LIST_OF_POINTS]=new o0,t[ee.SHADOW_BLUR]=new yw,t[ee.TEXT]=new mw,t[ee.TEXT_TRANSFORM]=new xw,t[ee.TRANSFORM]=new Fw,t[ee.TRANSFORM_ORIGIN]=new jw,t[ee.Z_INDEX]=new Gw,t[ee.MARKER]=new hw,t}(),dO=function(){return typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof gt.g!="undefined"?gt.g:{}};mt.CameraContribution=mm,mt.AnimationTimeline=null,mt.EasingFunction=null,mt.offscreenCanvasCreator=new h0,mt.sceneGraphSelector=new Zw,mt.sceneGraphService=new Qw(mt),mt.textService=new lO(mt),mt.geometryUpdaterFactory=uO,mt.CSSPropertySyntaxFactory=fO,mt.styleValueRegistry=new aw(mt),mt.layoutRegistry=null,mt.globalThis=dO(),mt.enableCSSParsing=!1,mt.enableDataset=!1,mt.enableStyleSyntax=!0,mt.enableAttributeDashCased=!1,mt.enableSizeAttenuation=!1;var s1=0;function pC(){s1=0}var c1=new Wc(He.INSERTED,null,"","","",0,"",""),l1=new Wc(He.REMOVED,null,"","","",0,"",""),hO=new sn(He.DESTROY),pO=function(t){xt(e,t);function e(){var n=t.call(this)||this;return n.entity=s1++,n.renderable={bounds:void 0,boundsDirty:!0,renderBounds:void 0,renderBoundsDirty:!0,dirtyRenderBounds:void 0,dirty:!1},n.cullable={strategy:Yv.Standard,visibilityPlaneMask:-1,visible:!0,enable:!0},n.transformable={dirtyFlag:!1,localDirtyFlag:!1,frozen:!1,localPosition:[0,0,0],localRotation:[0,0,0,1],localScale:[1,1,1],localTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],localSkew:[0,0],position:[0,0,0],rotation:[0,0,0,1],scaling:[1,1,1],worldTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],origin:[0,0,0]},n.sortable={dirty:!1,sorted:void 0,renderOrder:0,dirtyChildren:[],dirtyReason:void 0},n.geometry={contentBounds:void 0,renderBounds:void 0,dirty:!0},n.rBushNode={aabb:void 0},n.namespaceURI="g",n.scrollLeft=0,n.scrollTop=0,n.clientTop=0,n.clientLeft=0,n.destroyed=!1,n.style={},n.computedStyle=mt.enableCSSParsing?{opacity:vr,fillOpacity:vr,strokeOpacity:vr,fill:vr,stroke:vr,transform:vr,transformOrigin:vr,visibility:vr,pointerEvents:vr,lineWidth:vr,lineCap:vr,lineJoin:vr,increasedLineWidthForHitTesting:vr,fontSize:vr,fontFamily:vr,fontStyle:vr,fontWeight:vr,fontVariant:vr,textAlign:vr,textBaseline:vr,textTransform:vr,zIndex:vr,filter:vr,shadowType:vr}:null,n.parsedStyle={},n.attributes={},n}return Object.defineProperty(e.prototype,"className",{get:function(){return this.getAttribute("class")||""},set:function(n){this.setAttribute("class",n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"classList",{get:function(){return this.className.split(" ").filter(function(n){return n!==""})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tagName",{get:function(){return this.nodeName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"children",{get:function(){return this.childNodes},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"childElementCount",{get:function(){return this.childNodes.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"firstElementChild",{get:function(){return this.firstChild},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastElementChild",{get:function(){return this.lastChild},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parentElement",{get:function(){return this.parentNode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){if(this.parentNode){var n=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[n+1]||null}return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){if(this.parentNode){var n=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[n-1]||null}return null},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(n){throw new Error(Kn)},e.prototype.appendChild=function(n,r){var i;if(n.destroyed)throw new Error(Iv);return mt.sceneGraphService.attach(n,this,r),!((i=this.ownerDocument)===null||i===void 0)&&i.defaultView&&this.ownerDocument.defaultView.mountChildren(n),this.isMutationObserved&&(c1.relatedNode=this,n.dispatchEvent(c1)),n},e.prototype.insertBefore=function(n,r){if(!r)this.appendChild(n);else{n.parentElement&&n.parentElement.removeChild(n);var i=this.childNodes.indexOf(r);i===-1?this.appendChild(n):this.appendChild(n,i)}return n},e.prototype.replaceChild=function(n,r){var i=this.childNodes.indexOf(r);return this.removeChild(r),this.appendChild(n,i),r},e.prototype.removeChild=function(n){var r;return l1.relatedNode=this,n.dispatchEvent(l1),!((r=n.ownerDocument)===null||r===void 0)&&r.defaultView&&n.ownerDocument.defaultView.unmountChildren(n),mt.sceneGraphService.detach(n),n},e.prototype.removeChildren=function(){for(var n=this.childNodes.length-1;n>=0;n--){var r=this.childNodes[n];this.removeChild(r)}},e.prototype.destroyChildren=function(){for(var n=this.childNodes.length-1;n>=0;n--){var r=this.childNodes[n];r.childNodes.length&&r.destroyChildren(),r.destroy()}},e.prototype.matches=function(n){return mt.sceneGraphService.matches(n,this)},e.prototype.getElementById=function(n){return mt.sceneGraphService.querySelector("#".concat(n),this)},e.prototype.getElementsByName=function(n){return mt.sceneGraphService.querySelectorAll('[name="'.concat(n,'"]'),this)},e.prototype.getElementsByClassName=function(n){return mt.sceneGraphService.querySelectorAll(".".concat(n),this)},e.prototype.getElementsByTagName=function(n){return mt.sceneGraphService.querySelectorAll(n,this)},e.prototype.querySelector=function(n){return mt.sceneGraphService.querySelector(n,this)},e.prototype.querySelectorAll=function(n){return mt.sceneGraphService.querySelectorAll(n,this)},e.prototype.closest=function(n){var r=this;do{if(mt.sceneGraphService.matches(n,r))return r;r=r.parentElement}while(r!==null);return null},e.prototype.find=function(n){var r=this,i=null;return this.forEach(function(o){return o!==r&&n(o)?(i=o,!0):!1}),i},e.prototype.findAll=function(n){var r=this,i=[];return this.forEach(function(o){o!==r&&n(o)&&i.push(o)}),i},e.prototype.after=function(){for(var n=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(this.parentNode){var o=this.parentNode.childNodes.indexOf(this);r.forEach(function(a,s){var c;return(c=n.parentNode)===null||c===void 0?void 0:c.appendChild(a,o+s+1)})}},e.prototype.before=function(){for(var n,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(this.parentNode){var o=this.parentNode.childNodes.indexOf(this),a=j(r),s=a[0],c=a.slice(1);this.parentNode.appendChild(s,o),(n=s).after.apply(n,ut([],j(c),!1))}},e.prototype.replaceWith=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];this.after.apply(this,ut([],j(n),!1)),this.remove()},e.prototype.append=function(){for(var n=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];r.forEach(function(o){return n.appendChild(o)})},e.prototype.prepend=function(){for(var n=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];r.forEach(function(o,a){return n.appendChild(o,a)})},e.prototype.replaceChildren=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];for(;this.childNodes.length&&this.firstChild;)this.removeChild(this.firstChild);this.append.apply(this,ut([],j(n),!1))},e.prototype.remove=function(){return this.parentNode?this.parentNode.removeChild(this):this},e.prototype.destroy=function(){this.dispatchEvent(hO),this.remove(),this.emitter.removeAllListeners(),this.destroyed=!0},e.prototype.getGeometryBounds=function(){return mt.sceneGraphService.getGeometryBounds(this)},e.prototype.getRenderBounds=function(){return mt.sceneGraphService.getBounds(this,!0)},e.prototype.getBounds=function(){return mt.sceneGraphService.getBounds(this)},e.prototype.getLocalBounds=function(){return mt.sceneGraphService.getLocalBounds(this)},e.prototype.getBoundingClientRect=function(){return mt.sceneGraphService.getBoundingClientRect(this)},e.prototype.getClientRects=function(){return[this.getBoundingClientRect()]},e.prototype.computedStyleMap=function(){return new Map(Object.entries(this.computedStyle))},e.prototype.getAttributeNames=function(){return Object.keys(this.attributes)},e.prototype.getAttribute=function(n){if(S2(n))return mt.enableCSSParsing?null:void 0;var r=this.attributes[n];if(r===void 0){if(mt.enableAttributeDashCased){var i=Mu(n);r=this.attributes[i]}return mt.enableCSSParsing&&Lt(r)?null:r}else return r},e.prototype.hasAttribute=function(n){return this.getAttributeNames().includes(n)},e.prototype.hasAttributes=function(){return!!this.getAttributeNames().length},e.prototype.removeAttribute=function(n){this.setAttribute(n,null),delete this.attributes[n]},e.prototype.setAttribute=function(n,r,i,o){this.attributes[n]=r},e.prototype.getAttributeNS=function(n,r){throw new Error(Kn)},e.prototype.getAttributeNode=function(n){throw new Error(Kn)},e.prototype.getAttributeNodeNS=function(n,r){throw new Error(Kn)},e.prototype.hasAttributeNS=function(n,r){throw new Error(Kn)},e.prototype.removeAttributeNS=function(n,r){throw new Error(Kn)},e.prototype.removeAttributeNode=function(n){throw new Error(Kn)},e.prototype.setAttributeNS=function(n,r,i){throw new Error(Kn)},e.prototype.setAttributeNode=function(n){throw new Error(Kn)},e.prototype.setAttributeNodeNS=function(n){throw new Error(Kn)},e.prototype.toggleAttribute=function(n,r){throw new Error(Kn)},e}($i);function Tn(t){return!!(t!=null&&t.nodeName)}var g=mt.globalThis.Proxy?mt.globalThis.Proxy:function(){},x=new Wc(He.ATTR_MODIFIED,null,null,null,null,Wc.MODIFICATION,null,null),P={opacity:"",fillOpacity:"",strokeOpacity:"",fill:"",stroke:"",transform:"",transformOrigin:"",visibility:"",pointerEvents:"",lineWidth:"",lineCap:"",lineJoin:"",increasedLineWidthForHitTesting:"",fontSize:"",fontFamily:"",fontStyle:"",fontWeight:"",fontVariant:"",textAlign:"",textBaseline:"",textTransform:"",zIndex:"",filter:"",shadowType:""},L={fill:ph,stroke:ph,transform:[],zIndex:0,filter:[],shadowType:"outer",miterLimit:10},W=["opacity","fillOpacity","strokeOpacity","transformOrigin","visibility","pointerEvents","lineWidth","lineCap","lineJoin","increasedLineWidthForHitTesting"],V=ut(ut([],j(W),!1),["fontSize","fontFamily","fontStyle","fontWeight","fontVariant","textAlign","textBaseline","textTransform"],!1),Z="data-",rt=function(t){xt(e,t);function e(n){var r=t.call(this)||this;return r.isCustomElement=!1,r.isMutationObserved=!1,r.activeAnimations=[],r.config=n,r.id=r.config.id||"",r.name=r.config.name||"",(r.config.className||r.config.class)&&(r.className=r.config.className||r.config.class),r.nodeName=r.config.type||kt.GROUP,mt.enableCSSParsing?(Object.assign(r.attributes,P),Object.assign(r.parsedStyle,L,r.config.initialParsedStyle)):r.config.initialParsedStyle&&Object.assign(r.parsedStyle,r.config.initialParsedStyle),r.initAttributes(r.config.style),mt.enableDataset&&(r.dataset=new g({},{get:function(i,o){var a="".concat(Z).concat(wm(o));return i[a]!==void 0?i[a]:r.getAttribute(a)},set:function(i,o,a){return r.setAttribute("".concat(Z).concat(wm(o)),a),!0}})),mt.enableStyleSyntax&&(r.style=new g({setProperty:function(i,o){r.setAttribute(i,o)},getPropertyValue:function(i){return r.getAttribute(i)},removeProperty:function(i){r.removeAttribute(i)},item:function(){return""}},{get:function(i,o){return i[o]!==void 0?i[o]:r.getAttribute(o)},set:function(i,o,a){return r.setAttribute(o,a),!0}})),r}return e.prototype.destroy=function(){t.prototype.destroy.call(this),this.getAnimations().forEach(function(n){n.cancel()})},e.prototype.cloneNode=function(n,r){var i=nt({},this.attributes);for(var o in i){var a=i[o];Tn(a)&&o!=="clipPath"&&o!=="offsetPath"&&o!=="textPath"&&(i[o]=a.cloneNode(n)),r&&(i[o]=r(o,a))}var s=new this.constructor({id:this.id,name:this.name,className:this.name,interactive:this.interactive,style:i});return s.setLocalTransform(this.getLocalTransform()),n&&this.children.forEach(function(c){if(!c.style.isMarker){var l=c.cloneNode(n);s.appendChild(l)}}),s},e.prototype.initAttributes=function(n){n===void 0&&(n={});var r=this.renderable,i={forceUpdateGeometry:!0};mt.enableCSSParsing&&(i.usedAttributes=V);var o=n;if(mt.enableAttributeDashCased){o={};for(var a in n){var s=Mu(a);o[s]=n[a]}}mt.styleValueRegistry.processProperties(this,o,i),r.dirty=!0},e.prototype.setAttribute=function(n,r,i,o){i===void 0&&(i=!1),o===void 0&&(o=!0),mt.enableAttributeDashCased&&(n=Mu(n)),!le(r)&&(i||r!==this.attributes[n])&&(this.internalSetAttribute(n,r,{memoize:o}),t.prototype.setAttribute.call(this,n,r))},e.prototype.internalSetAttribute=function(n,r,i){var o;i===void 0&&(i={});var a=this.renderable,s=this.attributes[n],c=this.parsedStyle[n];mt.styleValueRegistry.processProperties(this,(o={},o[n]=r,o),i),a.dirty=!0;var l=this.parsedStyle[n];this.isConnected&&(x.relatedNode=this,x.prevValue=s,x.newValue=r,x.attrName=n,x.prevParsedValue=c,x.newParsedValue=l,this.isMutationObserved?this.dispatchEvent(x):(x.target=this,this.ownerDocument.defaultView.dispatchEvent(x,!0))),(this.isCustomElement&&this.isConnected||!this.isCustomElement)&&this.attributeChangedCallback&&this.attributeChangedCallback(n,s,r,c,l)},e.prototype.getBBox=function(){var n=this.getBounds(),r=j(n.getMin(),2),i=r[0],o=r[1],a=j(n.getMax(),2),s=a[0],c=a[1];return new wu(i,o,s-i,c-o)},e.prototype.setOrigin=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),mt.sceneGraphService.setOrigin(this,mo(n,r,i)),this},e.prototype.getOrigin=function(){return mt.sceneGraphService.getOrigin(this)},e.prototype.setPosition=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),mt.sceneGraphService.setPosition(this,mo(n,r,i)),this},e.prototype.setLocalPosition=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),mt.sceneGraphService.setLocalPosition(this,mo(n,r,i)),this},e.prototype.translate=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),mt.sceneGraphService.translate(this,mo(n,r,i)),this},e.prototype.translateLocal=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),mt.sceneGraphService.translateLocal(this,mo(n,r,i)),this},e.prototype.getPosition=function(){return mt.sceneGraphService.getPosition(this)},e.prototype.getLocalPosition=function(){return mt.sceneGraphService.getLocalPosition(this)},e.prototype.scale=function(n,r,i){return this.scaleLocal(n,r,i)},e.prototype.scaleLocal=function(n,r,i){return typeof n=="number"&&(r=r||n,i=i||n,n=mo(n,r,i)),mt.sceneGraphService.scaleLocal(this,n),this},e.prototype.setLocalScale=function(n,r,i){return typeof n=="number"&&(r=r||n,i=i||n,n=mo(n,r,i)),mt.sceneGraphService.setLocalScale(this,n),this},e.prototype.getLocalScale=function(){return mt.sceneGraphService.getLocalScale(this)},e.prototype.getScale=function(){return mt.sceneGraphService.getScale(this)},e.prototype.getEulerAngles=function(){var n=j(dh(Gt(),mt.sceneGraphService.getWorldTransform(this)),3),r=n[2];return Ea(r)},e.prototype.getLocalEulerAngles=function(){var n=j(dh(Gt(),mt.sceneGraphService.getLocalRotation(this)),3),r=n[2];return Ea(r)},e.prototype.setEulerAngles=function(n){return mt.sceneGraphService.setEulerAngles(this,0,0,n),this},e.prototype.setLocalEulerAngles=function(n){return mt.sceneGraphService.setLocalEulerAngles(this,0,0,n),this},e.prototype.rotateLocal=function(n,r,i){return Lt(r)&&Lt(i)?mt.sceneGraphService.rotateLocal(this,0,0,n):mt.sceneGraphService.rotateLocal(this,n,r,i),this},e.prototype.rotate=function(n,r,i){return Lt(r)&&Lt(i)?mt.sceneGraphService.rotate(this,0,0,n):mt.sceneGraphService.rotate(this,n,r,i),this},e.prototype.setRotation=function(n,r,i,o){return mt.sceneGraphService.setRotation(this,n,r,i,o),this},e.prototype.setLocalRotation=function(n,r,i,o){return mt.sceneGraphService.setLocalRotation(this,n,r,i,o),this},e.prototype.setLocalSkew=function(n,r){return mt.sceneGraphService.setLocalSkew(this,n,r),this},e.prototype.getRotation=function(){return mt.sceneGraphService.getRotation(this)},e.prototype.getLocalRotation=function(){return mt.sceneGraphService.getLocalRotation(this)},e.prototype.getLocalSkew=function(){return mt.sceneGraphService.getLocalSkew(this)},e.prototype.getLocalTransform=function(){return mt.sceneGraphService.getLocalTransform(this)},e.prototype.getWorldTransform=function(){return mt.sceneGraphService.getWorldTransform(this)},e.prototype.setLocalTransform=function(n){return mt.sceneGraphService.setLocalTransform(this,n),this},e.prototype.resetLocalTransform=function(){mt.sceneGraphService.resetLocalTransform(this)},e.prototype.getAnimations=function(){return this.activeAnimations},e.prototype.animate=function(n,r){var i,o=(i=this.ownerDocument)===null||i===void 0?void 0:i.timeline;return o?o.play(this,n,r):null},e.prototype.isVisible=function(){var n,r;return mt.enableCSSParsing?((n=this.parsedStyle)===null||n===void 0?void 0:n.visibility)==="visible":((r=this.parsedStyle)===null||r===void 0?void 0:r.visibility)!=="hidden"},Object.defineProperty(e.prototype,"interactive",{get:function(){return this.isInteractive()},set:function(n){this.style.pointerEvents=n?"auto":"none"},enumerable:!1,configurable:!0}),e.prototype.isInteractive=function(){var n;return((n=this.parsedStyle)===null||n===void 0?void 0:n.pointerEvents)!=="none"},e.prototype.isCulled=function(){return!!(this.cullable&&this.cullable.enable&&!this.cullable.visible)},e.prototype.toFront=function(){return this.parentNode&&(this.style.zIndex=Math.max.apply(Math,ut([],j(this.parentNode.children.map(function(n){return Number(n.style.zIndex)})),!1))+1),this},e.prototype.toBack=function(){return this.parentNode&&(this.style.zIndex=Math.min.apply(Math,ut([],j(this.parentNode.children.map(function(n){return Number(n.style.zIndex)})),!1))-1),this},e.prototype.getConfig=function(){return this.config},e.prototype.attr=function(){for(var n=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=j(r,2),a=o[0],s=o[1];return a?Yi(a)?(Object.keys(a).forEach(function(c){n.setAttribute(c,a[c])}),this):r.length===2?(this.setAttribute(a,s),this):this.attributes[a]:this.attributes},e.prototype.getMatrix=function(n){var r=n||this.getWorldTransform(),i=j(Ka(Gt(),r),2),o=i[0],a=i[1],s=j(Li(Gt(),r),2),c=s[0],l=s[1],u=Za(ze(),r),f=j(dh(Gt(),u),3),d=f[0],h=f[2];return dm(d||h,o,a,c,l)},e.prototype.getLocalMatrix=function(){return this.getMatrix(this.getLocalTransform())},e.prototype.setMatrix=function(n){var r=j(hm(n),5),i=r[0],o=r[1],a=r[2],s=r[3],c=r[4];this.setEulerAngles(c).setPosition(i,o).setLocalScale(a,s)},e.prototype.setLocalMatrix=function(n){var r=j(hm(n),5),i=r[0],o=r[1],a=r[2],s=r[3],c=r[4];this.setLocalEulerAngles(c).setLocalPosition(i,o).setLocalScale(a,s)},e.prototype.show=function(){mt.enableCSSParsing?this.style.visibility="visible":this.forEach(function(n){n.style.visibility="visible"})},e.prototype.hide=function(){mt.enableCSSParsing?this.style.visibility="hidden":this.forEach(function(n){n.style.visibility="hidden"})},e.prototype.getCount=function(){return this.childElementCount},e.prototype.getParent=function(){return this.parentElement},e.prototype.getChildren=function(){return this.children},e.prototype.getFirst=function(){return this.firstElementChild},e.prototype.getLast=function(){return this.lastElementChild},e.prototype.getChildByIndex=function(n){return this.children[n]||null},e.prototype.add=function(n,r){return this.appendChild(n,r)},e.prototype.set=function(n,r){this.config[n]=r},e.prototype.get=function(n){return this.config[n]},e.prototype.moveTo=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),this.setPosition(n,r,i),this},e.prototype.move=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),this.setPosition(n,r,i),this},e.prototype.setZIndex=function(n){return this.style.zIndex=n,this},e}(pO),st=function(t){xt(e,t);function e(n){return n===void 0&&(n={}),t.call(this,nt({type:kt.CIRCLE},n))||this}return e}(rt),Tt=function(t){xt(e,t);function e(n){n===void 0&&(n={});var r=this,i=n.style,o=Ge(n,["style"]);return r=t.call(this,nt({style:mt.enableCSSParsing?nt({},i):nt({},i)},o))||this,r.isCustomElement=!0,r}return e}(rt),At=function(t){xt(e,t);function e(n){return n===void 0&&(n={}),t.call(this,nt({type:kt.ELLIPSE},n))||this}return e}(rt),Mt=function(t){xt(e,t);function e(n){return n===void 0&&(n={}),t.call(this,nt({type:kt.GROUP},n))||this}return e}(rt),ae=function(t){xt(e,t);function e(n){n===void 0&&(n={});var r=this,i=n.style,o=Ge(n,["style"]);return r=t.call(this,nt({type:kt.HTML,style:mt.enableCSSParsing?nt({x:"",y:"",width:"auto",height:"auto",innerHTML:""},i):nt({},i)},o))||this,r.cullable.enable=!1,r}return e.prototype.getDomElement=function(){return this.parsedStyle.$el},e.prototype.getClientRects=function(){return[this.getBoundingClientRect()]},e.prototype.getLocalBounds=function(){if(this.parentNode){var n=pr(ue(),this.parentNode.getWorldTransform()),r=this.getBounds();if(!ro.isEmpty(r)){var i=new ro;return i.setFromTransformedAABB(r,n),i}}return this.getBounds()},e}(rt),Oe=function(t){xt(e,t);function e(n){return n===void 0&&(n={}),t.call(this,nt({type:kt.IMAGE},n))||this}return e}(rt),Ce=function(t){xt(e,t);function e(n){n===void 0&&(n={});var r=this,i=n.style,o=Ge(n,["style"]);r=t.call(this,nt({type:kt.LINE,style:nt({x1:0,y1:0,x2:0,y2:0,z1:0,z2:0},i)},o))||this,r.markerStartAngle=0,r.markerEndAngle=0;var a=r.parsedStyle,s=a.markerStart,c=a.markerEnd;return s&&Tn(s)&&(r.markerStartAngle=s.getLocalEulerAngles(),r.appendChild(s)),c&&Tn(c)&&(r.markerEndAngle=c.getLocalEulerAngles(),r.appendChild(c)),r.transformMarker(!0),r.transformMarker(!1),r}return e.prototype.attributeChangedCallback=function(n,r,i,o,a){n==="x1"||n==="y1"||n==="x2"||n==="y2"||n==="markerStartOffset"||n==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):n==="markerStart"?(o&&Tn(o)&&(this.markerStartAngle=0,o.remove()),a&&Tn(a)&&(this.markerStartAngle=a.getLocalEulerAngles(),this.appendChild(a),this.transformMarker(!0))):n==="markerEnd"&&(o&&Tn(o)&&(this.markerEndAngle=0,o.remove()),a&&Tn(a)&&(this.markerEndAngle=a.getLocalEulerAngles(),this.appendChild(a),this.transformMarker(!1)))},e.prototype.transformMarker=function(n){var r=this.parsedStyle,i=r.markerStart,o=r.markerEnd,a=r.markerStartOffset,s=r.markerEndOffset,c=r.x1,l=r.x2,u=r.y1,f=r.y2,d=n?i:o;if(!(!d||!Tn(d))){var h=0,p,v,y,m,b,O;n?(y=c,m=u,p=l-c,v=f-u,b=a||0,O=this.markerStartAngle):(y=l,m=f,p=c-l,v=u-f,b=s||0,O=this.markerEndAngle),h=Math.atan2(v,p),d.setLocalEulerAngles(h*180/Math.PI+O),d.setLocalPosition(y+Math.cos(h)*b,m+Math.sin(h)*b)}},e.prototype.getPoint=function(n,r){r===void 0&&(r=!1);var i=this.parsedStyle,o=i.x1,a=i.y1,s=i.x2,c=i.y2,l=eo(o,a,s,c,n),u=l.x,f=l.y,d=Ft(Gt(),te(u,f,0),r?this.getWorldTransform():this.getLocalTransform());return new Vi(d[0],d[1])},e.prototype.getPointAtLength=function(n,r){return r===void 0&&(r=!1),this.getPoint(n/this.getTotalLength(),r)},e.prototype.getTotalLength=function(){var n=this.parsedStyle,r=n.x1,i=n.y1,o=n.x2,a=n.y2;return Dc(r,i,o,a)},e}(rt),ke=function(t){xt(e,t);function e(n){n===void 0&&(n={});var r=this,i=n.style,o=Ge(n,["style"]);r=t.call(this,nt({type:kt.PATH,style:mt.enableCSSParsing?nt({d:"",miterLimit:""},i):nt({},i),initialParsedStyle:mt.enableCSSParsing?null:{miterLimit:4,d:nt({},Hv)}},o))||this,r.markerStartAngle=0,r.markerEndAngle=0,r.markerMidList=[];var a=r.parsedStyle,s=a.markerStart,c=a.markerEnd,l=a.markerMid;return s&&Tn(s)&&(r.markerStartAngle=s.getLocalEulerAngles(),r.appendChild(s)),l&&Tn(l)&&r.placeMarkerMid(l),c&&Tn(c)&&(r.markerEndAngle=c.getLocalEulerAngles(),r.appendChild(c)),r.transformMarker(!0),r.transformMarker(!1),r}return e.prototype.attributeChangedCallback=function(n,r,i,o,a){n==="d"?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):n==="markerStartOffset"||n==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):n==="markerStart"?(o&&Tn(o)&&(this.markerStartAngle=0,o.remove()),a&&Tn(a)&&(this.markerStartAngle=a.getLocalEulerAngles(),this.appendChild(a),this.transformMarker(!0))):n==="markerEnd"?(o&&Tn(o)&&(this.markerEndAngle=0,o.remove()),a&&Tn(a)&&(this.markerEndAngle=a.getLocalEulerAngles(),this.appendChild(a),this.transformMarker(!1))):n==="markerMid"&&this.placeMarkerMid(a)},e.prototype.transformMarker=function(n){var r=this.parsedStyle,i=r.markerStart,o=r.markerEnd,a=r.markerStartOffset,s=r.markerEndOffset,c=n?i:o;if(!(!c||!Tn(c))){var l=0,u,f,d,h,p,v;if(n){var y=j(this.getStartTangent(),2),m=y[0],b=y[1];d=b[0],h=b[1],u=m[0]-b[0],f=m[1]-b[1],p=a||0,v=this.markerStartAngle}else{var O=j(this.getEndTangent(),2),m=O[0],b=O[1];d=b[0],h=b[1],u=m[0]-b[0],f=m[1]-b[1],p=s||0,v=this.markerEndAngle}l=Math.atan2(f,u),c.setLocalEulerAngles(l*180/Math.PI+v),c.setLocalPosition(d+Math.cos(l)*p,h+Math.sin(l)*p)}},e.prototype.placeMarkerMid=function(n){var r=this.parsedStyle.d.segments;if(this.markerMidList.forEach(function(l){l.remove()}),n&&Tn(n))for(var i=1;i<r.length-1;i++){var o=j(r[i].currentPoint,2),a=o[0],s=o[1],c=i===1?n:n.cloneNode(!0);this.markerMidList.push(c),this.appendChild(c),c.setLocalPosition(a,s)}},e.prototype.getTotalLength=function(){return Jv(this)},e.prototype.getPointAtLength=function(n,r){r===void 0&&(r=!1);var i=this.parsedStyle.d.absolutePath,o=Jd(i,n),a=o.x,s=o.y,c=Ft(Gt(),te(a,s,0),r?this.getWorldTransform():this.getLocalTransform());return new Vi(c[0],c[1])},e.prototype.getPoint=function(n,r){return r===void 0&&(r=!1),this.getPointAtLength(n*Jv(this),r)},e.prototype.getStartTangent=function(){var n=this.parsedStyle.d.segments,r=[];if(n.length>1){var i=n[0].currentPoint,o=n[1].currentPoint,a=n[1].startTangent;r=[],a?(r.push([i[0]-a[0],i[1]-a[1]]),r.push([i[0],i[1]])):(r.push([o[0],o[1]]),r.push([i[0],i[1]]))}return r},e.prototype.getEndTangent=function(){var n=this.parsedStyle.d.segments,r=n.length,i=[];if(r>1){var o=n[r-2].currentPoint,a=n[r-1].currentPoint,s=n[r-1].endTangent;i=[],s?(i.push([a[0]-s[0],a[1]-s[1]]),i.push([a[0],a[1]])):(i.push([o[0],o[1]]),i.push([a[0],a[1]]))}return i},e}(rt),Ne=function(t){xt(e,t);function e(n){n===void 0&&(n={});var r=this,i=n.style,o=Ge(n,["style"]);r=t.call(this,nt({type:kt.POLYGON,style:mt.enableCSSParsing?nt({points:"",miterLimit:"",isClosed:!0},i):nt({},i),initialParsedStyle:mt.enableCSSParsing?null:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!0}},o))||this,r.markerStartAngle=0,r.markerEndAngle=0,r.markerMidList=[];var a=r.parsedStyle,s=a.markerStart,c=a.markerEnd,l=a.markerMid;return s&&Tn(s)&&(r.markerStartAngle=s.getLocalEulerAngles(),r.appendChild(s)),l&&Tn(l)&&r.placeMarkerMid(l),c&&Tn(c)&&(r.markerEndAngle=c.getLocalEulerAngles(),r.appendChild(c)),r.transformMarker(!0),r.transformMarker(!1),r}return e.prototype.attributeChangedCallback=function(n,r,i,o,a){n==="points"?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):n==="markerStartOffset"||n==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):n==="markerStart"?(o&&Tn(o)&&(this.markerStartAngle=0,o.remove()),a&&Tn(a)&&(this.markerStartAngle=a.getLocalEulerAngles(),this.appendChild(a),this.transformMarker(!0))):n==="markerEnd"?(o&&Tn(o)&&(this.markerEndAngle=0,o.remove()),a&&Tn(a)&&(this.markerEndAngle=a.getLocalEulerAngles(),this.appendChild(a),this.transformMarker(!1))):n==="markerMid"&&this.placeMarkerMid(a)},e.prototype.transformMarker=function(n){var r=this.parsedStyle,i=r.markerStart,o=r.markerEnd,a=r.markerStartOffset,s=r.markerEndOffset,c=r.points,l=(c||{}).points,u=n?i:o;if(!(!u||!Tn(u)||!l)){var f=0,d,h,p,v,y,m;if(p=l[0][0],v=l[0][1],n)d=l[1][0]-l[0][0],h=l[1][1]-l[0][1],y=a||0,m=this.markerStartAngle;else{var b=l.length;this.parsedStyle.isClosed?(d=l[b-1][0]-l[0][0],h=l[b-1][1]-l[0][1]):(p=l[b-1][0],v=l[b-1][1],d=l[b-2][0]-l[b-1][0],h=l[b-2][1]-l[b-1][1]),y=s||0,m=this.markerEndAngle}f=Math.atan2(h,d),u.setLocalEulerAngles(f*180/Math.PI+m),u.setLocalPosition(p+Math.cos(f)*y,v+Math.sin(f)*y)}},e.prototype.placeMarkerMid=function(n){var r=this.parsedStyle.points,i=(r||{}).points;if(this.markerMidList.forEach(function(l){l.remove()}),this.markerMidList=[],n&&Tn(n)&&i)for(var o=1;o<(this.parsedStyle.isClosed?i.length:i.length-1);o++){var a=i[o][0],s=i[o][1],c=o===1?n:n.cloneNode(!0);this.markerMidList.push(c),this.appendChild(c),c.setLocalPosition(a,s)}},e}(rt),vn=function(t){xt(e,t);function e(n){n===void 0&&(n={});var r=n.style,i=Ge(n,["style"]);return t.call(this,nt({type:kt.POLYLINE,style:mt.enableCSSParsing?nt({points:"",miterLimit:"",isClosed:!1},r):nt({},r),initialParsedStyle:mt.enableCSSParsing?null:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!1}},i))||this}return e.prototype.getTotalLength=function(){return X2(this)},e.prototype.getPointAtLength=function(n,r){return r===void 0&&(r=!1),this.getPoint(n/this.getTotalLength(),r)},e.prototype.getPoint=function(n,r){r===void 0&&(r=!1);var i=this.parsedStyle.points.points;if(this.parsedStyle.points.segments.length===0){var o=[],a=0,s,c,l=this.getTotalLength();i.forEach(function(y,m){i[m+1]&&(s=[0,0],s[0]=a/l,c=Dc(y[0],y[1],i[m+1][0],i[m+1][1]),a+=c,s[1]=a/l,o.push(s))}),this.parsedStyle.points.segments=o}var u=0,f=0;this.parsedStyle.points.segments.forEach(function(y,m){n>=y[0]&&n<=y[1]&&(u=(n-y[0])/(y[1]-y[0]),f=m)});var d=eo(i[f][0],i[f][1],i[f+1][0],i[f+1][1],u),h=d.x,p=d.y,v=Ft(Gt(),te(h,p,0),r?this.getWorldTransform():this.getLocalTransform());return new Vi(v[0],v[1])},e.prototype.getStartTangent=function(){var n=this.parsedStyle.points.points,r=[];return r.push([n[1][0],n[1][1]]),r.push([n[0][0],n[0][1]]),r},e.prototype.getEndTangent=function(){var n=this.parsedStyle.points.points,r=n.length-1,i=[];return i.push([n[r-1][0],n[r-1][1]]),i.push([n[r][0],n[r][1]]),i},e}(Ne),cn=function(t){xt(e,t);function e(n){return n===void 0&&(n={}),t.call(this,nt({type:kt.RECT},n))||this}return e}(rt),Gr=function(t){xt(e,t);function e(n){n===void 0&&(n={});var r=n.style,i=Ge(n,["style"]);return t.call(this,nt({type:kt.TEXT,style:mt.enableCSSParsing?nt({x:"",y:"",text:"",fontSize:"",fontFamily:"",fontStyle:"",fontWeight:"",fontVariant:"",textAlign:"",textBaseline:"",textTransform:"",fill:"black",letterSpacing:"",lineHeight:"",miterLimit:"",wordWrap:!1,wordWrapWidth:0,leading:0,dx:"",dy:""},r):nt({fill:"black"},r)},i))||this}return e.prototype.getComputedTextLength=function(){var n;return this.getGeometryBounds(),((n=this.parsedStyle.metrics)===null||n===void 0?void 0:n.maxLineWidth)||0},e.prototype.getLineBoundingRects=function(){var n;return this.getGeometryBounds(),((n=this.parsedStyle.metrics)===null||n===void 0?void 0:n.lineMetrics)||[]},e.prototype.isOverflowing=function(){return this.getGeometryBounds(),!!this.parsedStyle.isOverflowing},e}(rt),wo=function(){function t(){this.registry={},this.define(kt.CIRCLE,st),this.define(kt.ELLIPSE,At),this.define(kt.RECT,cn),this.define(kt.IMAGE,Oe),this.define(kt.LINE,Ce),this.define(kt.GROUP,Mt),this.define(kt.PATH,ke),this.define(kt.POLYGON,Ne),this.define(kt.POLYLINE,vn),this.define(kt.TEXT,Gr),this.define(kt.HTML,ae)}return t.prototype.define=function(e,n){this.registry[e]=n},t.prototype.get=function(e){return this.registry[e]},t}(),Ho={number:function(t){return new Zn(t)},percent:function(t){return new Zn(t,"%")},px:function(t){return new Zn(t,"px")},em:function(t){return new Zn(t,"em")},rem:function(t){return new Zn(t,"rem")},deg:function(t){return new Zn(t,"deg")},grad:function(t){return new Zn(t,"grad")},rad:function(t){return new Zn(t,"rad")},turn:function(t){return new Zn(t,"turn")},s:function(t){return new Zn(t,"s")},ms:function(t){return new Zn(t,"ms")},registerProperty:function(t){var e=t.name,n=t.inherits,r=t.interpolable,i=t.initialValue,o=t.syntax;mt.styleValueRegistry.registerMetadata({n:e,inh:n,int:r,d:i,syntax:o})},registerLayout:function(t,e){mt.layoutRegistry.registerLayout(t,e)}},oi=function(t){xt(e,t);function e(){var n=t.call(this)||this;n.defaultView=null,n.ownerDocument=null,n.nodeName="document";try{n.timeline=new mt.AnimationTimeline(n)}catch(i){}var r={};return Rn.forEach(function(i){var o=i.n,a=i.inh,s=i.d;a&&s&&(r[o]=Su(s)?s(kt.GROUP):s)}),n.documentElement=new Mt({id:"g-root",style:r}),n.documentElement.ownerDocument=n,n.documentElement.parentNode=n,n.childNodes=[n.documentElement],n}return Object.defineProperty(e.prototype,"children",{get:function(){return this.childNodes},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"childElementCount",{get:function(){return this.childNodes.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"firstElementChild",{get:function(){return this.firstChild},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastElementChild",{get:function(){return this.lastChild},enumerable:!1,configurable:!0}),e.prototype.createElement=function(n,r){if(n==="svg")return this.documentElement;var i=this.defaultView.customElements.get(n);i||(console.warn("Unsupported tagName: ",n),i=n==="tspan"?Gr:Mt);var o=new i(r);return o.ownerDocument=this,o},e.prototype.createElementNS=function(n,r,i){return this.createElement(r,i)},e.prototype.cloneNode=function(n){throw new Error(Kn)},e.prototype.destroy=function(){try{this.documentElement.destroyChildren(),this.timeline.destroy()}catch(n){}},e.prototype.elementsFromBBox=function(n,r,i,o){var a=this.defaultView.context.rBushRoot,s=a.search({minX:n,minY:r,maxX:i,maxY:o}),c=[];return s.forEach(function(l){var u=l.displayObject,f=u.parsedStyle.pointerEvents,d=f===void 0?"auto":f,h=["auto","visiblepainted","visiblefill","visiblestroke","visible"].includes(d);(!h||h&&u.isVisible())&&!u.isCulled()&&u.isInteractive()&&c.push(u)}),c.sort(function(l,u){return u.sortable.renderOrder-l.sortable.renderOrder}),c},e.prototype.elementFromPointSync=function(n,r){var i=this.defaultView.canvas2Viewport({x:n,y:r}),o=i.x,a=i.y,s=this.defaultView.getConfig(),c=s.width,l=s.height;if(o<0||a<0||o>c||a>l)return null;var u=this.defaultView.viewport2Client({x:o,y:a}),f=u.x,d=u.y,h=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!0,position:{x:n,y:r,viewportX:o,viewportY:a,clientX:f,clientY:d},picked:[]}).picked;return h&&h[0]||this.documentElement},e.prototype.elementFromPoint=function(n,r){return ti(this,void 0,void 0,function(){var i,o,a,s,c,l,u,f,d,h;return Fi(this,function(p){switch(p.label){case 0:return i=this.defaultView.canvas2Viewport({x:n,y:r}),o=i.x,a=i.y,s=this.defaultView.getConfig(),c=s.width,l=s.height,o<0||a<0||o>c||a>l?[2,null]:(u=this.defaultView.viewport2Client({x:o,y:a}),f=u.x,d=u.y,[4,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!0,position:{x:n,y:r,viewportX:o,viewportY:a,clientX:f,clientY:d},picked:[]})]);case 1:return h=p.sent().picked,[2,h&&h[0]||this.documentElement]}})})},e.prototype.elementsFromPointSync=function(n,r){var i=this.defaultView.canvas2Viewport({x:n,y:r}),o=i.x,a=i.y,s=this.defaultView.getConfig(),c=s.width,l=s.height;if(o<0||a<0||o>c||a>l)return[];var u=this.defaultView.viewport2Client({x:o,y:a}),f=u.x,d=u.y,h=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!1,position:{x:n,y:r,viewportX:o,viewportY:a,clientX:f,clientY:d},picked:[]}).picked;return h[h.length-1]!==this.documentElement&&h.push(this.documentElement),h},e.prototype.elementsFromPoint=function(n,r){return ti(this,void 0,void 0,function(){var i,o,a,s,c,l,u,f,d,h;return Fi(this,function(p){switch(p.label){case 0:return i=this.defaultView.canvas2Viewport({x:n,y:r}),o=i.x,a=i.y,s=this.defaultView.getConfig(),c=s.width,l=s.height,o<0||a<0||o>c||a>l?[2,[]]:(u=this.defaultView.viewport2Client({x:o,y:a}),f=u.x,d=u.y,[4,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!1,position:{x:n,y:r,viewportX:o,viewportY:a,clientX:f,clientY:d},picked:[]})]);case 1:return h=p.sent().picked,h[h.length-1]!==this.documentElement&&h.push(this.documentElement),[2,h]}})})},e.prototype.appendChild=function(n,r){throw new Error(Ou)},e.prototype.insertBefore=function(n,r){throw new Error(Ou)},e.prototype.removeChild=function(n,r){throw new Error(Ou)},e.prototype.replaceChild=function(n,r,i){throw new Error(Ou)},e.prototype.append=function(){throw new Error(Ou)},e.prototype.prepend=function(){throw new Error(Ou)},e.prototype.getElementById=function(n){return this.documentElement.getElementById(n)},e.prototype.getElementsByName=function(n){return this.documentElement.getElementsByName(n)},e.prototype.getElementsByTagName=function(n){return this.documentElement.getElementsByTagName(n)},e.prototype.getElementsByClassName=function(n){return this.documentElement.getElementsByClassName(n)},e.prototype.querySelector=function(n){return this.documentElement.querySelector(n)},e.prototype.querySelectorAll=function(n){return this.documentElement.querySelectorAll(n)},e.prototype.find=function(n){return this.documentElement.find(n)},e.prototype.findAll=function(n){return this.documentElement.findAll(n)},e}($i),rs=function(){function t(e){this.strategies=e}return t.prototype.apply=function(e){var n=e.camera,r=e.renderingService,i=e.renderingContext,o=this.strategies;r.hooks.cull.tap(t.tag,function(a){if(a){var s=a.cullable;return o.length===0?s.visible=i.unculledEntities.indexOf(a.entity)>-1:s.visible=o.every(function(c){return c.isVisible(n,a)}),!a.isCulled()&&a.isVisible()?a:(a.dispatchEvent(new sn(He.CULLED)),null)}return a}),r.hooks.afterRender.tap(t.tag,function(a){a.cullable.visibilityPlaneMask=-1})},t.tag="Culling",t}(),ac=function(){function t(){var e=this;this.autoPreventDefault=!1,this.rootPointerEvent=new f0(null),this.rootWheelEvent=new d0(null),this.onPointerMove=function(n){var r,i,o,a,s=(a=(o=e.context.renderingContext.root)===null||o===void 0?void 0:o.ownerDocument)===null||a===void 0?void 0:a.defaultView;if(!(s.supportsTouchEvents&&n.pointerType==="touch")){var c=e.normalizeToPointerEvent(n,s);try{for(var l=On(c),u=l.next();!u.done;u=l.next()){var f=u.value,d=e.bootstrapEvent(e.rootPointerEvent,f,s,n);e.context.eventService.mapEvent(d)}}catch(h){r={error:h}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}e.setCursor(e.context.eventService.cursor)}},this.onClick=function(n){var r,i,o,a,s=(a=(o=e.context.renderingContext.root)===null||o===void 0?void 0:o.ownerDocument)===null||a===void 0?void 0:a.defaultView,c=e.normalizeToPointerEvent(n,s);try{for(var l=On(c),u=l.next();!u.done;u=l.next()){var f=u.value,d=e.bootstrapEvent(e.rootPointerEvent,f,s,n);e.context.eventService.mapEvent(d)}}catch(h){r={error:h}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}e.setCursor(e.context.eventService.cursor)}}return t.prototype.apply=function(e){var n=this;this.context=e;var r=e.renderingService,i=this.context.renderingContext.root.ownerDocument.defaultView;this.context.eventService.setPickHandler(function(o){var a=n.context.renderingService.hooks.pickSync.call({position:o,picked:[],topmost:!0}).picked;return a[0]||null}),r.hooks.pointerWheel.tap(t.tag,function(o){var a=n.normalizeWheelEvent(o);n.context.eventService.mapEvent(a)}),r.hooks.pointerDown.tap(t.tag,function(o){var a,s;if(!(i.supportsTouchEvents&&o.pointerType==="touch")){var c=n.normalizeToPointerEvent(o,i);if(n.autoPreventDefault&&c[0].isNormalized){var l=o.cancelable||!("cancelable"in o);l&&o.preventDefault()}try{for(var u=On(c),f=u.next();!f.done;f=u.next()){var d=f.value,h=n.bootstrapEvent(n.rootPointerEvent,d,i,o);n.context.eventService.mapEvent(h)}}catch(p){a={error:p}}finally{try{f&&!f.done&&(s=u.return)&&s.call(u)}finally{if(a)throw a.error}}n.setCursor(n.context.eventService.cursor)}}),r.hooks.pointerUp.tap(t.tag,function(o){var a,s;if(!(i.supportsTouchEvents&&o.pointerType==="touch")){var c=n.context.contextService.getDomElement(),l=n.context.eventService.isNativeEventFromCanvas(c,o),u=l?"":"outside",f=n.normalizeToPointerEvent(o,i);try{for(var d=On(f),h=d.next();!h.done;h=d.next()){var p=h.value,v=n.bootstrapEvent(n.rootPointerEvent,p,i,o);v.type+=u,n.context.eventService.mapEvent(v)}}catch(y){a={error:y}}finally{try{h&&!h.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}n.setCursor(n.context.eventService.cursor)}}),r.hooks.pointerMove.tap(t.tag,this.onPointerMove),r.hooks.pointerOver.tap(t.tag,this.onPointerMove),r.hooks.pointerOut.tap(t.tag,this.onPointerMove),r.hooks.click.tap(t.tag,this.onClick),r.hooks.pointerCancel.tap(t.tag,function(o){var a,s,c=n.normalizeToPointerEvent(o,i);try{for(var l=On(c),u=l.next();!u.done;u=l.next()){var f=u.value,d=n.bootstrapEvent(n.rootPointerEvent,f,i,o);n.context.eventService.mapEvent(d)}}catch(h){a={error:h}}finally{try{u&&!u.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}n.setCursor(n.context.eventService.cursor)})},t.prototype.bootstrapEvent=function(e,n,r,i){e.view=r,e.originalEvent=null,e.nativeEvent=i,e.pointerId=n.pointerId,e.width=n.width,e.height=n.height,e.isPrimary=n.isPrimary,e.pointerType=n.pointerType,e.pressure=n.pressure,e.tangentialPressure=n.tangentialPressure,e.tiltX=n.tiltX,e.tiltY=n.tiltY,e.twist=n.twist,this.transferMouseData(e,n);var o=this.context.eventService.client2Viewport({x:n.clientX,y:n.clientY}),a=o.x,s=o.y;e.viewport.x=a,e.viewport.y=s;var c=this.context.eventService.viewport2Canvas(e.viewport),l=c.x,u=c.y;return e.canvas.x=l,e.canvas.y=u,e.global.copyFrom(e.canvas),e.offset.copyFrom(e.canvas),e.isTrusted=i.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=qm[e.type]||e.type),e},t.prototype.normalizeWheelEvent=function(e){var n=this.rootWheelEvent;this.transferMouseData(n,e),n.deltaMode=e.deltaMode,n.deltaX=e.deltaX,n.deltaY=e.deltaY,n.deltaZ=e.deltaZ;var r=this.context.eventService.client2Viewport({x:e.clientX,y:e.clientY}),i=r.x,o=r.y;n.viewport.x=i,n.viewport.y=o;var a=this.context.eventService.viewport2Canvas(n.viewport),s=a.x,c=a.y;return n.canvas.x=s,n.canvas.y=c,n.global.copyFrom(n.canvas),n.offset.copyFrom(n.canvas),n.nativeEvent=e,n.type=e.type,n},t.prototype.transferMouseData=function(e,n){e.isTrusted=n.isTrusted,e.srcElement=n.srcElement,e.timeStamp=a0.now(),e.type=n.type,e.altKey=n.altKey,e.metaKey=n.metaKey,e.shiftKey=n.shiftKey,e.ctrlKey=n.ctrlKey,e.button=n.button,e.buttons=n.buttons,e.client.x=n.clientX,e.client.y=n.clientY,e.movement.x=n.movementX,e.movement.y=n.movementY,e.page.x=n.pageX,e.page.y=n.pageY,e.screen.x=n.screenX,e.screen.y=n.screenY,e.relatedTarget=null},t.prototype.setCursor=function(e){this.context.contextService.applyCursorStyle(e||this.context.config.cursor||"default")},t.prototype.normalizeToPointerEvent=function(e,n){var r=[];if(n.isTouchEvent(e))for(var i=0;i<e.changedTouches.length;i++){var o=e.changedTouches[i];le(o.button)&&(o.button=0),le(o.buttons)&&(o.buttons=1),le(o.isPrimary)&&(o.isPrimary=e.touches.length===1&&e.type==="touchstart"),le(o.width)&&(o.width=o.radiusX||1),le(o.height)&&(o.height=o.radiusY||1),le(o.tiltX)&&(o.tiltX=0),le(o.tiltY)&&(o.tiltY=0),le(o.pointerType)&&(o.pointerType="touch"),le(o.pointerId)&&(o.pointerId=o.identifier||0),le(o.pressure)&&(o.pressure=o.force||.5),le(o.twist)&&(o.twist=0),le(o.tangentialPressure)&&(o.tangentialPressure=0),o.isNormalized=!0,o.type=e.type,r.push(o)}else if(n.isMouseEvent(e)){var a=e;le(a.isPrimary)&&(a.isPrimary=!0),le(a.width)&&(a.width=1),le(a.height)&&(a.height=1),le(a.tiltX)&&(a.tiltX=0),le(a.tiltY)&&(a.tiltY=0),le(a.pointerType)&&(a.pointerType="mouse"),le(a.pointerId)&&(a.pointerId=$m),le(a.pressure)&&(a.pressure=.5),le(a.twist)&&(a.twist=0),le(a.tangentialPressure)&&(a.tangentialPressure=0),a.isNormalized=!0,r.push(a)}else r.push(e);return r},t.tag="Event",t}(),u1=[kt.CIRCLE,kt.ELLIPSE,kt.IMAGE,kt.RECT,kt.LINE,kt.POLYLINE,kt.POLYGON,kt.TEXT,kt.PATH,kt.HTML],Z9=function(){function t(){}return t.prototype.isVisible=function(e,n){var r,i,o=n.cullable;if(!o.enable)return!0;var a=n.getRenderBounds();if(ro.isEmpty(a))return!1;var s=e.getFrustum(),c=(i=(r=n.parentNode)===null||r===void 0?void 0:r.cullable)===null||i===void 0?void 0:i.visibilityPlaneMask;return o.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(n,a,c||Bc.INDETERMINATE,s.planes),o.visible=o.visibilityPlaneMask!==Bc.OUTSIDE,o.visible},t.prototype.computeVisibilityWithPlaneMask=function(e,n,r,i){if(r===Bc.OUTSIDE||r===Bc.INSIDE)return r;for(var o=Bc.INSIDE,a=u1.indexOf(e.nodeName)>-1,s=0,c=i.length;s<c;++s){var l=1<<s;if(r&l&&!(a&&(s===4||s===5))){var u=i[s],f=u.normal,d=u.distance;if(Yt(f,n.getPositiveFarPoint(i[s]))+d<0)return Bc.OUTSIDE;Yt(f,n.getNegativeFarPoint(i[s]))+d<0&&(o|=l)}}return o},t}(),J9=function(){function t(){this.toSync=new Set,this.isFirstTimeRendering=!0,this.syncing=!1,this.isFirstTimeRenderingFinished=!1}return t.prototype.apply=function(e){var n=this,r,i=e.renderingService,o=e.renderingContext,a=e.rBushRoot,s=o.root.ownerDocument.defaultView;this.rBush=a;var c=function(h){var p=h.target;p.renderable.dirty=!0,i.dirtify()},l=function(h){var p=h.detail.affectChildren,v=h.target;p&&v.forEach(function(m){n.toSync.add(m)});for(var y=v;y;)y.renderable&&n.toSync.add(y),y=y.parentElement;i.dirtify()},u=function(h){var p=h.target;mt.enableSizeAttenuation&&mt.styleValueRegistry.updateSizeAttenuation(p,s.getCamera().getZoom()),mt.enableCSSParsing&&mt.styleValueRegistry.recalc(p),mt.sceneGraphService.dirtifyToRoot(p),i.dirtify()},f=function(h){var p=h.target,v=p.rBushNode;v.aabb&&n.rBush.remove(v.aabb),n.toSync.delete(p),mt.sceneGraphService.dirtifyToRoot(p),i.dirtify()};i.hooks.init.tap(t.tag,function(){s.addEventListener(He.MOUNTED,u),s.addEventListener(He.UNMOUNTED,f),s.addEventListener(He.ATTR_MODIFIED,c),s.addEventListener(He.BOUNDS_CHANGED,l)}),i.hooks.destroy.tap(t.tag,function(){s.removeEventListener(He.MOUNTED,u),s.removeEventListener(He.UNMOUNTED,f),s.removeEventListener(He.ATTR_MODIFIED,c),s.removeEventListener(He.BOUNDS_CHANGED,l),n.toSync.clear()});var d=(r=mt.globalThis.requestIdleCallback)!==null&&r!==void 0?r:s0.bind(mt.globalThis);i.hooks.endFrame.tap(t.tag,function(){n.isFirstTimeRendering?(n.isFirstTimeRendering=!1,n.syncing=!0,d(function(){n.syncRTree(!0),n.isFirstTimeRenderingFinished=!0})):n.syncRTree()})},t.prototype.syncRTree=function(e){var n=this;if(e===void 0&&(e=!1),!(!e&&(this.syncing||this.toSync.size===0))){this.syncing=!0;var r=[];Array.from(this.toSync).filter(function(i){return i.isConnected}).forEach(function(i){var o=i.rBushNode;o&&o.aabb&&n.rBush.remove(o.aabb);var a=i.getRenderBounds();if(a){var s=i.renderable;e&&(s.dirtyRenderBounds||(s.dirtyRenderBounds=new ro),s.dirtyRenderBounds.update(a.center,a.halfExtents));var c=j(a.getMin(),2),l=c[0],u=c[1],f=j(a.getMax(),2),d=f[0],h=f[1];o.aabb||(o.aabb={}),o.aabb.displayObject=i,o.aabb.minX=l,o.aabb.minY=u,o.aabb.maxX=d,o.aabb.maxY=h}o.aabb&&!isNaN(o.aabb.maxX)&&!isNaN(o.aabb.maxX)&&!isNaN(o.aabb.minX)&&!isNaN(o.aabb.minY)&&r.push(o.aabb)}),this.rBush.load(r),r.length=0,this.toSync.clear(),this.syncing=!1}},t.tag="Prepare",t}();function a0t(t){return!!t.document}var is;(function(t){t.READY="ready",t.BEFORE_RENDER="beforerender",t.RERENDER="rerender",t.AFTER_RENDER="afterrender",t.BEFORE_DESTROY="beforedestroy",t.AFTER_DESTROY="afterdestroy",t.RESIZE="resize",t.DIRTY_RECTANGLE="dirtyrectangle",t.RENDERER_CHANGED="rendererchanged"})(is||(is={}));var vC=500,Q9=.1,t7=1e3,vO=new sn(He.MOUNTED),gO=new sn(He.UNMOUNTED),gC=new sn(is.BEFORE_RENDER),e7=new sn(is.RERENDER),yC=new sn(is.AFTER_RENDER),mC=function(t){xt(e,t);function e(n){var r=t.call(this)||this;r.Element=rt,r.inited=!1,r.context={},r.document=new oi,r.document.defaultView=r,r.customElements=new wo;var i=n.container,o=n.canvas,a=n.offscreenCanvas,s=n.width,c=n.height,l=n.devicePixelRatio,u=n.renderer,f=n.background,d=n.cursor,h=n.document,p=n.requestAnimationFrame,v=n.cancelAnimationFrame,y=n.createImage,m=n.supportsPointerEvents,b=n.supportsTouchEvents,O=n.supportsCSSTransform,E=n.supportsMutipleCanvasesInOneContainer,w=n.useNativeClickEvent,_=n.alwaysTriggerPointerEventOnCanvas,S=n.isTouchEvent,M=n.isMouseEvent,T=n.dblClickSpeed;E||bw(i,r);var A=s,C=c,N=l;return o&&(N=l||Oh&&window.devicePixelRatio||1,N=N>=1?Math.ceil(N):1,A=s||Ow(o)||o.width/N,C=c||Ew(o)||o.height/N),a&&(mt.offscreenCanvas=a),r.devicePixelRatio=N,r.requestAnimationFrame=p!=null?p:s0.bind(mt.globalThis),r.cancelAnimationFrame=v!=null?v:e1.bind(mt.globalThis),r.supportsTouchEvents=b!=null?b:"ontouchstart"in mt.globalThis,r.supportsPointerEvents=m!=null?m:!!mt.globalThis.PointerEvent,r.isTouchEvent=S!=null?S:function(k){return r.supportsTouchEvents&&k instanceof mt.globalThis.TouchEvent},r.isMouseEvent=M!=null?M:function(k){return!mt.globalThis.MouseEvent||k instanceof mt.globalThis.MouseEvent&&(!r.supportsPointerEvents||!(k instanceof mt.globalThis.PointerEvent))},r.dblClickSpeed=T!=null?T:200,r.initRenderingContext({container:i,canvas:o,width:A,height:C,renderer:u,offscreenCanvas:a,devicePixelRatio:N,cursor:d||"default",background:f||"transparent",createImage:y,document:h,supportsCSSTransform:O,useNativeClickEvent:w,alwaysTriggerPointerEventOnCanvas:_}),r.initDefaultCamera(A,C,u.clipSpaceNearZ),r.initRenderer(u,!0),r}return e.prototype.initRenderingContext=function(n){this.context.config=n,this.context.renderingContext={root:this.document.documentElement,renderListCurrentFrame:[],unculledEntities:[],renderReasons:new Set,force:!1,dirty:!1}},e.prototype.initDefaultCamera=function(n,r,i){var o=this,a=new mt.CameraContribution;a.clipSpaceNearZ=i,a.setType(Bn.EXPLORING,Cf.DEFAULT).setPosition(n/2,r/2,vC).setFocalPoint(n/2,r/2,0).setOrthographic(n/-2,n/2,r/2,r/-2,Q9,t7),a.canvas=this,a.eventEmitter.on(gm.UPDATED,function(){o.context.renderingContext.renderReasons.add(Nl.CAMERA_CHANGED),mt.enableSizeAttenuation&&o.getConfig().renderer.getConfig().enableSizeAttenuation&&o.updateSizeAttenuation()}),this.context.camera=a},e.prototype.updateSizeAttenuation=function(){var n=this.getCamera().getZoom();this.document.documentElement.forEach(function(r){mt.styleValueRegistry.updateSizeAttenuation(r,n)})},e.prototype.getConfig=function(){return this.context.config},e.prototype.getRoot=function(){return this.document.documentElement},e.prototype.getCamera=function(){return this.context.camera},e.prototype.getContextService=function(){return this.context.contextService},e.prototype.getEventService=function(){return this.context.eventService},e.prototype.getRenderingService=function(){return this.context.renderingService},e.prototype.getRenderingContext=function(){return this.context.renderingContext},e.prototype.getStats=function(){return this.getRenderingService().getStats()},Object.defineProperty(e.prototype,"ready",{get:function(){var n=this;return this.readyPromise||(this.readyPromise=new Promise(function(r){n.resolveReadyPromise=function(){r(n)}}),this.inited&&this.resolveReadyPromise()),this.readyPromise},enumerable:!1,configurable:!0}),e.prototype.destroy=function(n,r){if(n===void 0&&(n=!0),r===void 0&&(r=!1),r||this.dispatchEvent(new sn(is.BEFORE_DESTROY)),this.frameId){var i=this.getConfig().cancelAnimationFrame||cancelAnimationFrame;i(this.frameId)}var o=this.getRoot();this.unmountChildren(o),n&&(this.document.destroy(),this.getEventService().destroy()),this.getRenderingService().destroy(),this.getContextService().destroy(),n&&this.context.rBushRoot&&(this.context.rBushRoot.clear(),this.context.rBushRoot=null,this.context.renderingContext.root=null),r||this.dispatchEvent(new sn(is.AFTER_DESTROY))},e.prototype.changeSize=function(n,r){this.resize(n,r)},e.prototype.resize=function(n,r){var i=this.context.config;i.width=n,i.height=r,this.getContextService().resize(n,r);var o=this.context.camera,a=o.getProjectionMode();o.setPosition(n/2,r/2,vC).setFocalPoint(n/2,r/2,0),a===Fo.ORTHOGRAPHIC?o.setOrthographic(n/-2,n/2,r/2,r/-2,o.getNear(),o.getFar()):o.setAspect(n/r),this.dispatchEvent(new sn(is.RESIZE,{width:n,height:r}))},e.prototype.appendChild=function(n,r){return this.document.documentElement.appendChild(n,r)},e.prototype.insertBefore=function(n,r){return this.document.documentElement.insertBefore(n,r)},e.prototype.removeChild=function(n){return this.document.documentElement.removeChild(n)},e.prototype.removeChildren=function(){this.document.documentElement.removeChildren()},e.prototype.destroyChildren=function(){this.document.documentElement.destroyChildren()},e.prototype.render=function(n){var r=this;n&&(gC.detail=n,yC.detail=n),this.dispatchEvent(gC);var i=this.getRenderingService();i.render(this.getConfig(),n,function(){r.dispatchEvent(e7)}),this.dispatchEvent(yC)},e.prototype.run=function(){var n=this,r=function(i,o){n.render(o),n.frameId=n.requestAnimationFrame(r)};r()},e.prototype.initRenderer=function(n,r){var i=this;if(r===void 0&&(r=!1),!n)throw new Error("Renderer is required.");this.inited=!1,this.readyPromise=void 0,this.context.rBushRoot=new lm,this.context.renderingPlugins=[],this.context.renderingPlugins.push(new ac,new J9,new rs([new Z9])),this.loadRendererContainerModule(n),this.context.contextService=new this.context.ContextService(nt(nt({},mt),this.context)),this.context.renderingService=new p0(mt,this.context),this.context.eventService=new qw(mt,this.context),this.context.eventService.init(),this.context.contextService.init?(this.context.contextService.init(),this.initRenderingService(n,r,!0)):this.context.contextService.initAsync().then(function(){i.initRenderingService(n,r)})},e.prototype.initRenderingService=function(n,r,i){var o=this;r===void 0&&(r=!1),i===void 0&&(i=!1),this.context.renderingService.init(function(){o.inited=!0,r?i?o.requestAnimationFrame(function(){o.dispatchEvent(new sn(is.READY))}):o.dispatchEvent(new sn(is.READY)):o.dispatchEvent(new sn(is.RENDERER_CHANGED)),o.readyPromise&&o.resolveReadyPromise(),r||o.getRoot().forEach(function(a){var s=a.renderable;s&&(s.renderBoundsDirty=!0,s.boundsDirty=!0,s.dirty=!0)}),o.mountChildren(o.getRoot()),n.getConfig().enableAutoRendering&&o.run()})},e.prototype.loadRendererContainerModule=function(n){var r=this,i=n.getPlugins();i.forEach(function(o){o.context=r.context,o.init(mt)})},e.prototype.setRenderer=function(n){var r=this.getConfig();if(r.renderer!==n){var i=r.renderer;r.renderer=n,this.destroy(!1,!0),ut([],j(i==null?void 0:i.getPlugins()),!1).reverse().forEach(function(o){o.destroy(mt)}),this.initRenderer(n)}},e.prototype.setCursor=function(n){var r=this.getConfig();r.cursor=n,this.getContextService().applyCursorStyle(n)},e.prototype.unmountChildren=function(n){var r=this;n.childNodes.forEach(function(i){r.unmountChildren(i)}),this.inited&&(n.isMutationObserved?n.dispatchEvent(gO):(gO.target=n,this.dispatchEvent(gO,!0)),n!==this.document.documentElement&&(n.ownerDocument=null),n.isConnected=!1),n.isCustomElement&&n.disconnectedCallback&&n.disconnectedCallback()},e.prototype.mountChildren=function(n){var r=this;this.inited?n.isConnected||(n.ownerDocument=this.document,n.isConnected=!0,n.isMutationObserved?n.dispatchEvent(vO):(vO.target=n,this.dispatchEvent(vO,!0))):console.warn("[g]: You are trying to call `canvas.appendChild` before canvas' initialization finished. You can either await `canvas.ready` or listen to `CanvasEvent.READY` manually.","appended child: ",n.nodeName),n.childNodes.forEach(function(i){r.mountChildren(i)}),n.isCustomElement&&n.connectedCallback&&n.connectedCallback()},e.prototype.client2Viewport=function(n){return this.getEventService().client2Viewport(n)},e.prototype.viewport2Client=function(n){return this.getEventService().viewport2Client(n)},e.prototype.viewport2Canvas=function(n){return this.getEventService().viewport2Canvas(n)},e.prototype.canvas2Viewport=function(n){return this.getEventService().canvas2Viewport(n)},e.prototype.getPointByClient=function(n,r){return this.client2Viewport({x:n,y:r})},e.prototype.getClientByPoint=function(n,r){return this.viewport2Client({x:n,y:r})},e}(a1),n7=function(t){xt(e,t);function e(){var n=t.apply(this,ut([],j(arguments),!1))||this;return n.landmarks=[],n}return e.prototype.rotate=function(n,r,i){if(this.relElevation=_u(r),this.relAzimuth=_u(n),this.relRoll=_u(i),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.type===Bn.EXPLORING){var o=zi(ze(),[1,0,0],qn((this.rotateWorld?1:-1)*this.relElevation)),a=zi(ze(),[0,1,0],qn((this.rotateWorld?1:-1)*this.relAzimuth)),s=zi(ze(),[0,0,1],qn(this.relRoll)),c=ni(ze(),a,o);c=ni(ze(),c,s);var l=ou(ue(),c);ya(this.matrix,this.matrix,[0,0,-this.distance]),Pn(this.matrix,this.matrix,l),ya(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation)>90)return this;this.computeMatrix()}return this._getAxes(),this.type===Bn.ORBITING||this.type===Bn.EXPLORING?this._getPosition():this.type===Bn.TRACKING&&this._getFocalPoint(),this._update(),this},e.prototype.pan=function(n,r){var i=mo(n,r,0),o=ea(this.position);return No(o,o,it(Gt(),this.right,i[0])),No(o,o,it(Gt(),this.up,i[1])),this._setPosition(o),this.triggerUpdate(),this},e.prototype.dolly=function(n){var r=this.forward,i=ea(this.position),o=n*this.dollyingStep,a=this.distance+n*this.dollyingStep;return o=Math.max(Math.min(a,this.maxDistance),this.minDistance)-this.distance,i[0]+=o*r[0],i[1]+=o*r[1],i[2]+=o*r[2],this._setPosition(i),this.type===Bn.ORBITING||this.type===Bn.EXPLORING?this._getDistance():this.type===Bn.TRACKING&&No(this.focalPoint,i,this.distanceVector),this.triggerUpdate(),this},e.prototype.cancelLandmarkAnimation=function(){this.landmarkAnimationID!==void 0&&this.canvas.cancelAnimationFrame(this.landmarkAnimationID)},e.prototype.createLandmark=function(n,r){var i,o,a,s;r===void 0&&(r={});var c=r.position,l=c===void 0?this.position:c,u=r.focalPoint,f=u===void 0?this.focalPoint:u,d=r.roll,h=r.zoom,p=new mt.CameraContribution;p.setType(this.type,void 0),p.setPosition(l[0],(i=l[1])!==null&&i!==void 0?i:this.position[1],(o=l[2])!==null&&o!==void 0?o:this.position[2]),p.setFocalPoint(f[0],(a=f[1])!==null&&a!==void 0?a:this.focalPoint[1],(s=f[2])!==null&&s!==void 0?s:this.focalPoint[2]),p.setRoll(d!=null?d:this.roll),p.setZoom(h!=null?h:this.zoom);var v={name:n,matrix:qa(p.getWorldTransform()),right:ea(p.right),up:ea(p.up),forward:ea(p.forward),position:ea(p.getPosition()),focalPoint:ea(p.getFocalPoint()),distanceVector:ea(p.getDistanceVector()),distance:p.getDistance(),dollyingStep:p.getDollyingStep(),azimuth:p.getAzimuth(),elevation:p.getElevation(),roll:p.getRoll(),relAzimuth:p.relAzimuth,relElevation:p.relElevation,relRoll:p.relRoll,zoom:p.getZoom()};return this.landmarks.push(v),v},e.prototype.gotoLandmark=function(n,r){var i=this;r===void 0&&(r={});var o=Qe(n)?this.landmarks.find(function(A){return A.name===n}):n;if(o){var a=Je(r)?{duration:r}:r,s=a.easing,c=s===void 0?"linear":s,l=a.duration,u=l===void 0?100:l,f=a.easingFunction,d=f===void 0?void 0:f,h=a.onfinish,p=h===void 0?void 0:h,v=a.onframe,y=v===void 0?void 0:v,m=.01;this.cancelLandmarkAnimation();var b=o.position,O=o.focalPoint,E=o.zoom,w=o.roll,_=d||mt.EasingFunction(c),S,M=function(){i.setFocalPoint(O),i.setPosition(b),i.setRoll(w),i.setZoom(E),i.computeMatrix(),i.triggerUpdate(),p==null||p()};if(u===0)return M();var T=function(A){S===void 0&&(S=A);var C=A-S;if(C>=u){M();return}var N=_(C/u),k=Gt(),R=Gt(),I=1,D=0;ne(k,i.focalPoint,O,N),ne(R,i.position,b,N),D=i.roll*(1-N)+w*N,I=i.zoom*(1-N)+E*N,i.setFocalPoint(k),i.setPosition(R),i.setRoll(D),i.setZoom(I);var B=xc(k,O)+xc(R,b);if(B<=m&&E==null&&w==null)return M();i.computeMatrix(),i.triggerUpdate(),C<u&&(y==null||y(N),i.landmarkAnimationID=i.canvas.requestAnimationFrame(T))};this.canvas.requestAnimationFrame(T)}},e}(mm);mt.CameraContribution=n7;var xC=function(){function t(e,n){this.type=e,this.target=n,this.addedNodes=[],this.attributeName=null,this.attributeNamespace=null,this.nextSibling=null,this.oldValue=null,this.previousSibling=null,this.removedNodes=[]}return t.copy=function(e){var n=new t(e.type,e.target);return n.addedNodes=e.addedNodes.slice(),n.removedNodes=e.removedNodes.slice(),n.previousSibling=e.previousSibling,n.nextSibling=e.nextSibling,n.attributeName=e.attributeName,n.attributeNamespace=e.attributeNamespace,n.oldValue=e.oldValue,n},t}(),r7=0,Mh=new WeakMap,i7=function(){function t(e,n,r){this.observer=e,this.target=n,this.options=r,this.transientObservedNodes=[]}return t.prototype.enqueue=function(e){var n=this.observer.records,r=n.length;if(n.length>0){var i=n[r-1],o=c7(i,e);if(o){n[r-1]=o;return}}else u7(this.observer);n[r]=e},t.prototype.addListeners=function(){this.addListeners_(this.target)},t.prototype.addListeners_=function(e){var n=this.options;n.attributes&&e.addEventListener(He.ATTR_MODIFIED,this,!0),n.childList&&e.addEventListener(He.INSERTED,this,!0),(n.childList||n.subtree)&&e.addEventListener(He.REMOVED,this,!0)},t.prototype.removeListeners=function(){this.removeListeners_(this.target)},t.prototype.removeListeners_=function(e){var n=this.options;n.attributes&&e.removeEventListener(He.ATTR_MODIFIED,this,!0),n.childList&&e.removeEventListener(He.INSERTED,this,!0),(n.childList||n.subtree)&&e.removeEventListener(He.REMOVED,this,!0)},t.prototype.removeTransientObservers=function(){var e=this.transientObservedNodes;this.transientObservedNodes=[],e.forEach(function(n){this.removeListeners_(n);for(var r=Mh.get(n),i=0;i<r.length;i++)if(r[i]===this){r.splice(i,1);break}},this)},t.prototype.handleEvent=function(e){e.stopImmediatePropagation();var n,r;switch(e.type){case He.ATTR_MODIFIED:var i=e.attrName,o=e.relatedNode.namespaceURI;r=e.target,n=bC("attributes",r),n.attributeName=i,n.attributeNamespace=o;var a=e.attrChange===Wc.ADDITION?null:e.prevValue;_C(r,function(d){if(d.attributes&&!(d.attributeFilter&&d.attributeFilter.length&&d.attributeFilter.indexOf(i)===-1&&d.attributeFilter.indexOf(o)===-1))return d.attributeOldValue?o7(a):n});break;case He.REMOVED:case He.INSERTED:r=e.relatedNode;var s=e.target,c=void 0,l=void 0;e.type===He.INSERTED?(c=[s],l=[]):(c=[],l=[s]);var u=s.previousSibling,f=s.nextSibling;n=bC("childList",r),n.addedNodes=c,n.removedNodes=l,n.previousSibling=u,n.nextSibling=f,_C(r,function(d){if(d.childList)return n})}a7()},t}(),s0t=function(){function t(e){this.callback=e,this.nodes=[],this.records=[],this.uid=r7++}return t.prototype.observe=function(e,n){if(!n.childList&&!n.attributes&&!n.characterData||n.attributeOldValue&&!n.attributes||n.attributeFilter&&n.attributeFilter.length&&!n.attributes||n.characterDataOldValue&&!n.characterData)throw new SyntaxError;var r=Mh.get(e);r||Mh.set(e,r=[]);for(var i,o=0;o<r.length;o++)if(r[o].observer===this){i=r[o],i.removeListeners(),i.options=n;break}i||(i=new i7(this,e,n),r.push(i),this.nodes.push(e)),i.addListeners()},t.prototype.disconnect=function(){var e=this;this.nodes.forEach(function(n){for(var r=Mh.get(n),i=0;i<r.length;i++){var o=r[i];if(o.observer===e){o.removeListeners(),r.splice(i,1);break}}},this),this.records=[]},t.prototype.takeRecords=function(){var e=this.records;return this.records=[],e},t}(),f1,Ll;function bC(t,e){return f1=new xC(t,e)}function o7(t){return Ll||(Ll=xC.copy(f1),Ll.oldValue=t,Ll)}function a7(){f1=Ll=void 0}function s7(t){return t===Ll||t===f1}function c7(t,e){return t===e?t:Ll&&s7(t)?Ll:null}function l7(t){t.nodes.forEach(function(e){var n=Mh.get(e);n&&n.forEach(function(r){r.observer===t&&r.removeTransientObservers()})})}function _C(t,e){for(var n=t;n;n=n.parentNode){var r=Mh.get(n);if(r)for(var i=0;i<r.length;i++){var o=r[i],a=o.options;if(!(n!==t&&!a.subtree)){var s=e(a);s&&o.enqueue(s)}}}}var yO=!1,mO=[];function u7(t){mO.push(t),yO||(yO=!0,typeof mt.globalThis!="undefined"?mt.globalThis.setTimeout(xO):xO())}function xO(){yO=!1;var t=mO;mO=[],t.sort(function(n,r){return n.uid-r.uid});var e=!1;t.forEach(function(n){var r=n.takeRecords();l7(n),r.length&&(n.callback(r,n),e=!0)}),e&&xO()}var bO=function(t){xt(e,t);function e(n,r,i,o){var a=t.call(this,n)||this;return a.currentTime=i,a.timelineTime=o,a.target=r,a.type="finish",a.bubbles=!1,a.currentTarget=r,a.defaultPrevented=!1,a.eventPhase=a.AT_TARGET,a.timeStamp=Date.now(),a.currentTime=i,a.timelineTime=o,a}return e}(Cu),f7=0,d7=function(){function t(e,n){var r;this.currentTimePending=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._playbackRate=1,this._inTimeline=!0,this.effect=e,e.animation=this,this.timeline=n,this.id="".concat(f7++),this._inEffect=!!this.effect.update(0),this._totalDuration=Number((r=this.effect)===null||r===void 0?void 0:r.getComputedTiming().endTime),this._holdTime=0,this._paused=!1,this.oldPlayState="idle",this.updatePromises()}return Object.defineProperty(t.prototype,"pending",{get:function(){return this._startTime===null&&!this._paused&&this.playbackRate!==0||this.currentTimePending},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"playState",{get:function(){return this._idle?"idle":this._isFinished?"finished":this._paused?"paused":"running"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ready",{get:function(){var e=this;return this.readyPromise||(this.timeline.animationsWithPromises.indexOf(this)===-1&&this.timeline.animationsWithPromises.push(this),this.readyPromise=new Promise(function(n,r){e.resolveReadyPromise=function(){n(e)},e.rejectReadyPromise=function(){r(new Error)}}),this.pending||this.resolveReadyPromise()),this.readyPromise},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"finished",{get:function(){var e=this;return this.finishedPromise||(this.timeline.animationsWithPromises.indexOf(this)===-1&&this.timeline.animationsWithPromises.push(this),this.finishedPromise=new Promise(function(n,r){e.resolveFinishedPromise=function(){n(e)},e.rejectFinishedPromise=function(){r(new Error)}}),this.playState==="finished"&&this.resolveFinishedPromise()),this.finishedPromise},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentTime",{get:function(){return this.updatePromises(),this._idle||this.currentTimePending?null:this._currentTime},set:function(e){var n;e=Number(e),!isNaN(e)&&(this.timeline.restart(),!this._paused&&this._startTime!==null&&(this._startTime=Number((n=this.timeline)===null||n===void 0?void 0:n.currentTime)-e/this.playbackRate),this.currentTimePending=!1,this._currentTime!==e&&(this._idle&&(this._idle=!1,this._paused=!0),this.tickCurrentTime(e,!0),this.timeline.applyDirtiedAnimation(this)))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"startTime",{get:function(){return this._startTime},set:function(e){if(e!==null){if(this.updatePromises(),e=Number(e),isNaN(e)||this._paused||this._idle)return;this._startTime=e,this.tickCurrentTime((Number(this.timeline.currentTime)-this._startTime)*this.playbackRate),this.timeline.applyDirtiedAnimation(this),this.updatePromises()}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(e){if(e!==this._playbackRate){this.updatePromises();var n=this.currentTime;this._playbackRate=e,this.startTime=null,this.playState!=="paused"&&this.playState!=="idle"&&(this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this)),n!==null&&(this.currentTime=n),this.updatePromises()}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_isFinished",{get:function(){return!this._idle&&(this._playbackRate>0&&Number(this._currentTime)>=this._totalDuration||this._playbackRate<0&&Number(this._currentTime)<=0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalDuration",{get:function(){return this._totalDuration},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_needsTick",{get:function(){return this.pending||this.playState==="running"||!this._finishedFlag},enumerable:!1,configurable:!0}),t.prototype.updatePromises=function(){var e=this.oldPlayState,n=this.pending?"pending":this.playState;return this.readyPromise&&n!==e&&(n==="idle"?(this.rejectReadyPromise(),this.readyPromise=void 0):e==="pending"?this.resolveReadyPromise():n==="pending"&&(this.readyPromise=void 0)),this.finishedPromise&&n!==e&&(n==="idle"?(this.rejectFinishedPromise(),this.finishedPromise=void 0):n==="finished"?this.resolveFinishedPromise():e==="finished"&&(this.finishedPromise=void 0)),this.oldPlayState=n,this.readyPromise||this.finishedPromise},t.prototype.play=function(){this.updatePromises(),this._paused=!1,(this._isFinished||this._idle)&&(this.rewind(),this._startTime=null),this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this),this.timeline.animations.indexOf(this)===-1&&this.timeline.animations.push(this),this.updatePromises()},t.prototype.pause=function(){this.updatePromises(),this.currentTime&&(this._holdTime=this.currentTime),!this._isFinished&&!this._paused&&!this._idle?this.currentTimePending=!0:this._idle&&(this.rewind(),this._idle=!1),this._startTime=null,this._paused=!0,this.updatePromises()},t.prototype.finish=function(){this.updatePromises(),!this._idle&&(this.currentTime=this._playbackRate>0?this._totalDuration:0,this._startTime=this._totalDuration-this.currentTime,this.currentTimePending=!1,this.timeline.applyDirtiedAnimation(this),this.updatePromises())},t.prototype.cancel=function(){var e=this;if(this.updatePromises(),!!this._inEffect&&(this._inEffect=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._startTime=null,this.effect.update(null),this.timeline.applyDirtiedAnimation(this),this.updatePromises(),this.oncancel)){var n=new bO(null,this,this.currentTime,null);setTimeout(function(){e.oncancel(n)})}},t.prototype.reverse=function(){this.updatePromises();var e=this.currentTime;this.playbackRate*=-1,this.play(),e!==null&&(this.currentTime=e),this.updatePromises()},t.prototype.updatePlaybackRate=function(e){this.playbackRate=e},t.prototype.targetAnimations=function(){var e,n=(e=this.effect)===null||e===void 0?void 0:e.target;return n.getAnimations()},t.prototype.markTarget=function(){var e=this.targetAnimations();e.indexOf(this)===-1&&e.push(this)},t.prototype.unmarkTarget=function(){var e=this.targetAnimations(),n=e.indexOf(this);n!==-1&&e.splice(n,1)},t.prototype.tick=function(e,n){!this._idle&&!this._paused&&(this._startTime===null?n&&(this.startTime=e-this._currentTime/this.playbackRate):this._isFinished||this.tickCurrentTime((e-this._startTime)*this.playbackRate)),n&&(this.currentTimePending=!1,this.fireEvents(e))},t.prototype.rewind=function(){if(this.playbackRate>=0)this.currentTime=0;else if(this._totalDuration<1/0)this.currentTime=this._totalDuration;else throw new Error("Unable to rewind negative playback rate animation with infinite duration")},t.prototype.persist=function(){throw new Error(Kn)},t.prototype.addEventListener=function(e,n,r){throw new Error(Kn)},t.prototype.removeEventListener=function(e,n,r){throw new Error(Kn)},t.prototype.dispatchEvent=function(e){throw new Error(Kn)},t.prototype.commitStyles=function(){throw new Error(Kn)},t.prototype.ensureAlive=function(){var e,n;this.playbackRate<0&&this.currentTime===0?this._inEffect=!!(!((e=this.effect)===null||e===void 0)&&e.update(-1)):this._inEffect=!!(!((n=this.effect)===null||n===void 0)&&n.update(this.currentTime)),!this._inTimeline&&(this._inEffect||!this._finishedFlag)&&(this._inTimeline=!0,this.timeline.animations.push(this))},t.prototype.tickCurrentTime=function(e,n){e!==this._currentTime&&(this._currentTime=e,this._isFinished&&!n&&(this._currentTime=this._playbackRate>0?this._totalDuration:0),this.ensureAlive())},t.prototype.fireEvents=function(e){var n=this;if(this._isFinished){if(!this._finishedFlag){if(this.onfinish){var r=new bO(null,this,this.currentTime,e);setTimeout(function(){n.onfinish&&n.onfinish(r)})}this._finishedFlag=!0}}else{if(this.onframe&&this.playState==="running"){var i=new bO(null,this,this.currentTime,e);this.onframe(i)}this._finishedFlag=!1}},t}(),h7=4,p7=.001,v7=1e-7,g7=10,y0=11,d1=1/(y0-1),y7=typeof Float32Array=="function",wC=function(t,e){return 1-3*e+3*t},OC=function(t,e){return 3*e-6*t},EC=function(t){return 3*t},h1=function(t,e,n){return((wC(e,n)*t+OC(e,n))*t+EC(e))*t},SC=function(t,e,n){return 3*wC(e,n)*t*t+2*OC(e,n)*t+EC(e)},m7=function(t,e,n,r,i){var o,a,s=0;do a=e+(n-e)/2,o=h1(a,r,i)-t,o>0?n=a:e=a;while(Math.abs(o)>v7&&++s<g7);return a},x7=function(t,e,n,r){for(var i=0;i<h7;++i){var o=SC(e,n,r);if(o===0)return e;var a=h1(e,n,r)-t;e-=a/o}return e},_O=function(t,e,n,r){if(!(0<=t&&t<=1&&0<=n&&n<=1))throw new Error("bezier x values must be in [0, 1] range");if(t===e&&n===r)return function(s){return s};for(var i=y7?new Float32Array(y0):new Array(y0),o=0;o<y0;++o)i[o]=h1(o*d1,t,n);var a=function(s){for(var c=0,l=1,u=y0-1;l!==u&&i[l]<=s;++l)c+=d1;--l;var f=(s-i[l])/(i[l+1]-i[l]),d=c+f*d1,h=SC(d,t,n);return h>=p7?x7(s,d,t,n):h===0?d:m7(s,c,c+d1,t,n)};return function(s){return s===0||s===1?s:h1(a(s),e,r)}},b7=function(t){return t=t.replace(/([A-Z])/g,function(e){return"-".concat(e.toLowerCase())}),t.charAt(0)==="-"?t.substring(1):t},p1=function(t){return Math.pow(t,2)},v1=function(t){return Math.pow(t,3)},g1=function(t){return Math.pow(t,4)},y1=function(t){return Math.pow(t,5)},m1=function(t){return Math.pow(t,6)},x1=function(t){return 1-Math.cos(t*Math.PI/2)},b1=function(t){return 1-Math.sqrt(1-t*t)},_1=function(t){return t*t*(3*t-2)},w1=function(t){for(var e,n=4;t<((e=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((e*3-2)/22-t,2)},O1=function(t,e){e===void 0&&(e=[]);var n=j(e,2),r=n[0],i=r===void 0?1:r,o=n[1],a=o===void 0?.5:o,s=Nn(Number(i),1,10),c=Nn(Number(a),.1,2);return t===0||t===1?t:-s*Math.pow(2,10*(t-1))*Math.sin((t-1-c/(Math.PI*2)*Math.asin(1/s))*(Math.PI*2)/c)},m0=function(t,e,n){e===void 0&&(e=[]);var r=j(e,4),i=r[0],o=i===void 0?1:i,a=r[1],s=a===void 0?100:a,c=r[2],l=c===void 0?10:c,u=r[3],f=u===void 0?0:u;o=Nn(o,.1,1e3),s=Nn(s,.1,1e3),l=Nn(l,.1,1e3),f=Nn(f,.1,1e3);var d=Math.sqrt(s/o),h=l/(2*Math.sqrt(s*o)),p=h<1?d*Math.sqrt(1-h*h):0,v=1,y=h<1?(h*d+-f)/p:-f+d,m=n?n*t/1e3:t;return h<1?m=Math.exp(-m*h*d)*(v*Math.cos(p*m)+y*Math.sin(p*m)):m=(v+y*m)*Math.exp(-m*d),t===0||t===1?t:1-m},wO=function(t,e){e===void 0&&(e=[]);var n=j(e,2),r=n[0],i=r===void 0?10:r,o=n[1],a=o=="start"?Math.ceil:Math.floor;return a(Nn(t,0,1)*i)/i},MC=function(t,e){e===void 0&&(e=[]);var n=j(e,4),r=n[0],i=n[1],o=n[2],a=n[3];return _O(r,i,o,a)(t)},E1=_O(.42,0,1,1),bs=function(t){return function(e,n,r){return n===void 0&&(n=[]),1-t(1-e,n,r)}},_s=function(t){return function(e,n,r){return n===void 0&&(n=[]),e<.5?t(e*2,n,r)/2:1-t(e*-2+2,n,r)/2}},ws=function(t){return function(e,n,r){return n===void 0&&(n=[]),e<.5?(1-t(1-e*2,n,r))/2:(t(e*2-1,n,r)+1)/2}},PC={steps:wO,"step-start":function(t){return wO(t,[1,"start"])},"step-end":function(t){return wO(t,[1,"end"])},linear:function(t){return t},"cubic-bezier":MC,ease:function(t){return MC(t,[.25,.1,.25,1])},in:E1,out:bs(E1),"in-out":_s(E1),"out-in":ws(E1),"in-quad":p1,"out-quad":bs(p1),"in-out-quad":_s(p1),"out-in-quad":ws(p1),"in-cubic":v1,"out-cubic":bs(v1),"in-out-cubic":_s(v1),"out-in-cubic":ws(v1),"in-quart":g1,"out-quart":bs(g1),"in-out-quart":_s(g1),"out-in-quart":ws(g1),"in-quint":y1,"out-quint":bs(y1),"in-out-quint":_s(y1),"out-in-quint":ws(y1),"in-expo":m1,"out-expo":bs(m1),"in-out-expo":_s(m1),"out-in-expo":ws(m1),"in-sine":x1,"out-sine":bs(x1),"in-out-sine":_s(x1),"out-in-sine":ws(x1),"in-circ":b1,"out-circ":bs(b1),"in-out-circ":_s(b1),"out-in-circ":ws(b1),"in-back":_1,"out-back":bs(_1),"in-out-back":_s(_1),"out-in-back":ws(_1),"in-bounce":w1,"out-bounce":bs(w1),"in-out-bounce":_s(w1),"out-in-bounce":ws(w1),"in-elastic":O1,"out-elastic":bs(O1),"in-out-elastic":_s(O1),"out-in-elastic":ws(O1),spring:m0,"spring-in":m0,"spring-out":bs(m0),"spring-in-out":_s(m0),"spring-out-in":ws(m0)},_7=function(t){return b7(t).replace(/^ease-/,"").replace(/(\(|\s).+/,"").toLowerCase().trim()},w7=function(t){return PC[_7(t)]||PC.linear},O7=function(t){return t},E7=1,S7=.5,TC=0;function AC(t,e){return function(n){if(n>=1)return 1;var r=1/t;return n+=e*r,n-n%r}}var S1="\\s*(-?\\d+\\.?\\d*|-?\\.\\d+)\\s*",M7=new RegExp("cubic-bezier\\("+S1+","+S1+","+S1+","+S1+"\\)"),P7=/steps\(\s*(\d+)\s*\)/,T7=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/;function OO(t){var e=M7.exec(t);if(e)return _O.apply(void 0,ut([],j(e.slice(1).map(Number)),!1));var n=P7.exec(t);if(n)return AC(Number(n[1]),TC);var r=T7.exec(t);return r?AC(Number(r[1]),{start:E7,middle:S7,end:TC}[r[2]]):w7(t)}function A7(t){return Math.abs(C7(t)/(t.playbackRate||1))}function C7(t){var e;return t.duration===0||t.iterations===0?0:(t.duration==="auto"?0:Number(t.duration))*((e=t.iterations)!==null&&e!==void 0?e:1)}var CC=0,EO=1,M1=2,kC=3;function k7(t,e,n){if(e===null)return CC;var r=n.endTime;return e<Math.min(n.delay,r)?EO:e>=Math.min(n.delay+t+n.endDelay,r)?M1:kC}function N7(t,e,n,r,i){switch(r){case EO:return e==="backwards"||e==="both"?0:null;case kC:return n-i;case M1:return e==="forwards"||e==="both"?t:null;case CC:return null}}function R7(t,e,n,r,i){var o=i;return t===0?e!==EO&&(o+=n):o+=r/t,o}function L7(t,e,n,r,i,o){var a=t===1/0?e%1:t%1;return a===0&&n===M1&&r!==0&&(i!==0||o===0)&&(a=1),a}function I7(t,e,n,r){return t===M1&&e===1/0?1/0:n===1?Math.floor(r)-1:Math.floor(r)}function D7(t,e,n){var r=t;if(t!=="normal"&&t!=="reverse"){var i=e;t==="alternate-reverse"&&(i+=1),r="normal",i!==1/0&&i%2!==0&&(r="reverse")}return r==="normal"?n:1-n}function B7(t,e,n){var r=k7(t,e,n),i=N7(t,n.fill,e,r,n.delay);if(i===null)return null;var o=n.duration==="auto"?0:n.duration,a=R7(o,r,n.iterations,i,n.iterationStart),s=L7(a,n.iterationStart,r,n.iterations,i,o),c=I7(r,n.iterations,s,a),l=D7(n.direction,c,s);return n.currentIteration=c,n.progress=l,n.easingFunction(l)}function F7(t,e,n){var r=j7(t,e),i=G7(r,n);return function(o,a){if(a!==null)i.filter(function(c){return a>=c.applyFrom&&a<c.applyTo}).forEach(function(c){var l=a-c.startOffset,u=c.endOffset-c.startOffset,f=u===0?0:l/u;o.setAttribute(c.property,c.interpolation(f),!1,!1)});else for(var s in r)NC(s)&&o.setAttribute(s,null)}}function NC(t){return t!=="offset"&&t!=="easing"&&t!=="composite"&&t!=="computedOffset"}function j7(t,e){for(var n={},r=0;r<t.length;r++)for(var i in t[r])if(NC(i)){var o={offset:t[r].offset,computedOffset:t[r].computedOffset,easing:t[r].easing,easingFunction:OO(t[r].easing)||e.easingFunction,value:t[r][i]};n[i]=n[i]||[],n[i].push(o)}return n}function G7(t,e){var n=[];for(var r in t)for(var i=t[r],o=0;o<i.length-1;o++){var a=o,s=o+1,c=i[a].computedOffset,l=i[s].computedOffset,u=c,f=l;o===0&&(u=-1/0,l===0&&(s=a)),o===i.length-2&&(f=1/0,c===1&&(a=s)),n.push({applyFrom:u,applyTo:f,startOffset:i[a].computedOffset,endOffset:i[s].computedOffset,easingFunction:i[a].easingFunction,property:r,interpolation:z7(r,i[a].value,i[s].value,e)})}return n.sort(function(d,h){return d.startOffset-h.startOffset}),n}var RC=function(t,e,n){return function(r){var i=LC(t,e,r);return!mt.enableCSSParsing&&Je(i)?i:n(i)}};function z7(t,e,n,r){var i=ic[t];if(i&&i.syntax&&i.int){var o=mt.styleValueRegistry.getPropertySyntax(i.syntax);if(o){var a=void 0,s=void 0;if(mt.enableCSSParsing){var c=mt.styleValueRegistry.parseProperty(t,e,r,!1),l=mt.styleValueRegistry.parseProperty(t,n,r,!1);a=mt.styleValueRegistry.computeProperty(t,c,r,!1),s=mt.styleValueRegistry.computeProperty(t,l,r,!1)}else{var u=o.parserWithCSSDisabled;a=u?u(e,r):e,s=u?u(n,r):n}var f=o.mixer(a,s,r);if(f){var d=RC.apply(void 0,ut([],j(f),!1));return function(h){return h===0?e:h===1?n:d(h)}}}}return RC(!1,!0,function(h){return h?n:e})}function LC(t,e,n){if(typeof t=="number"&&typeof e=="number")return t*(1-n)+e*n;if(typeof t=="boolean"&&typeof e=="boolean"||typeof t=="string"&&typeof e=="string")return n<.5?t:e;if(Array.isArray(t)&&Array.isArray(e)){for(var r=t.length,i=e.length,o=Math.max(r,i),a=[],s=0;s<o;s++)a.push(LC(t[s<r?s:r-1],e[s<i?s:i-1],n));return a}throw new Error("Mismatched interpolation arguments "+t+":"+e)}var W7=function(){function t(){this.delay=0,this.direction="normal",this.duration="auto",this._easing="linear",this.easingFunction=O7,this.endDelay=0,this.fill="auto",this.iterationStart=0,this.iterations=1,this.currentIteration=null,this.progress=null}return Object.defineProperty(t.prototype,"easing",{get:function(){return this._easing},set:function(e){this.easingFunction=OO(e),this._easing=e},enumerable:!1,configurable:!0}),t}();function Y7(t){var e=[];for(var n in t)if(!(n in["easing","offset","composite"])){var r=t[n];Array.isArray(r)||(r=[r]);for(var i=r.length,o=0;o<i;o++){if(!e[o]){var a={};"offset"in t&&(a.offset=Number(t.offset)),"easing"in t&&(a.easing=t.easing),"composite"in t&&(a.composite=t.composite),e[o]=a}r[o]!==void 0&&r[o]!==null&&(e[o][n]=r[o])}}return e.sort(function(s,c){return(s.computedOffset||0)-(c.computedOffset||0)}),e}function IC(t,e){if(t===null)return[];Array.isArray(t)||(t=Y7(t));for(var n=t.map(function(c){var l={};e!=null&&e.composite&&(l.composite="auto");for(var u in c){var f=c[u];if(u==="offset"){if(f!==null){if(f=Number(f),!isFinite(f))throw new Error("Keyframe offsets must be numbers.");if(f<0||f>1)throw new Error("Keyframe offsets must be between 0 and 1.");l.computedOffset=f}}else if(u==="composite"&&["replace","add","accumulate","auto"].indexOf(f)===-1)throw new Error("".concat(f," compositing is not supported"));l[u]=f}return l.offset===void 0&&(l.offset=null),l.easing===void 0&&(l.easing=(e==null?void 0:e.easing)||"linear"),l.composite===void 0&&(l.composite="auto"),l}),r=!0,i=-1/0,o=0;o<n.length;o++){var a=n[o].offset;if(Lt(a))r=!1;else{if(a<i)throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");i=a}}n=n.filter(function(c){return Number(c.offset)>=0&&Number(c.offset)<=1});function s(){var c,l,u=n.length;n[u-1].computedOffset=Number((c=n[u-1].offset)!==null&&c!==void 0?c:1),u>1&&(n[0].computedOffset=Number((l=n[0].offset)!==null&&l!==void 0?l:0));for(var f=0,d=Number(n[0].computedOffset),h=1;h<u;h++){var p=n[h].computedOffset;if(!Lt(p)&&!Lt(d)){for(var v=1;v<h-f;v++)n[f+v].computedOffset=d+(Number(p)-d)*v/(h-f);f=h,d=Number(p)}}}return r||s(),n}var H7="backwards|forwards|both|none".split("|"),U7="reverse|alternate|alternate-reverse".split("|");function V7(t,e){var n=new W7;return e&&(n.fill="both",n.duration="auto"),typeof t=="number"&&!isNaN(t)?n.duration=t:t!==void 0&&Object.keys(t).forEach(function(r){if(t[r]!==void 0&&t[r]!==null&&t[r]!=="auto"){if((typeof n[r]=="number"||r==="duration")&&(typeof t[r]!="number"||isNaN(t[r]))||r==="fill"&&H7.indexOf(t[r])===-1||r==="direction"&&U7.indexOf(t[r])===-1)return;n[r]=t[r]}}),n}function X7(t,e){return t=$7(t!=null?t:{duration:"auto"}),V7(t,e)}function $7(t){return typeof t=="number"&&(isNaN(t)?t={duration:"auto"}:t={duration:t}),t}var q7=function(){function t(e,n,r){var i=this;this.composite="replace",this.iterationComposite="replace",this.target=e,this.timing=X7(r,!1),this.timing.effect=this,this.timing.activeDuration=A7(this.timing),this.timing.endTime=Math.max(0,this.timing.delay+this.timing.activeDuration+this.timing.endDelay),this.normalizedKeyframes=IC(n,this.timing),this.interpolations=F7(this.normalizedKeyframes,this.timing,this.target);var o=mt.globalThis.Proxy;this.computedTiming=o?new o(this.timing,{get:function(a,s){return s==="duration"?a.duration==="auto"?0:a.duration:s==="fill"?a.fill==="auto"?"none":a.fill:s==="localTime"?i.animation&&i.animation.currentTime||null:s==="currentIteration"?!i.animation||i.animation.playState!=="running"?null:a.currentIteration||0:s==="progress"?!i.animation||i.animation.playState!=="running"?null:a.progress||0:a[s]},set:function(){return!0}}):this.timing}return t.prototype.applyInterpolations=function(){this.interpolations(this.target,Number(this.timeFraction))},t.prototype.update=function(e){return e===null?!1:(this.timeFraction=B7(this.timing.activeDuration,e,this.timing),this.timeFraction!==null)},t.prototype.getKeyframes=function(){return this.normalizedKeyframes},t.prototype.setKeyframes=function(e){this.normalizedKeyframes=IC(e)},t.prototype.getComputedTiming=function(){return this.computedTiming},t.prototype.getTiming=function(){return this.timing},t.prototype.updateTiming=function(e){var n=this;Object.keys(e||{}).forEach(function(r){n.timing[r]=e[r]})},t}();function DC(t,e){return Number(t.id)-Number(e.id)}var K7=function(){function t(e){var n=this;this.document=e,this.animations=[],this.ticking=!1,this.timelineTicking=!1,this.hasRestartedThisFrame=!1,this.animationsWithPromises=[],this.inTick=!1,this.pendingEffects=[],this.currentTime=null,this.rafId=0,this.rafCallbacks=[],this.webAnimationsNextTick=function(r){n.currentTime=r,n.discardAnimations(),n.animations.length===0?n.timelineTicking=!1:n.requestAnimationFrame(n.webAnimationsNextTick)},this.processRafCallbacks=function(r){var i=n.rafCallbacks;n.rafCallbacks=[],r<Number(n.currentTime)&&(r=Number(n.currentTime)),n.animations.sort(DC),n.animations=n.tick(r,!0,n.animations)[0],i.forEach(function(o){o[1](r)}),n.applyPendingEffects()}}return t.prototype.getAnimations=function(){return this.discardAnimations(),this.animations.slice()},t.prototype.isTicking=function(){return this.inTick},t.prototype.play=function(e,n,r){var i=new q7(e,n,r),o=new d7(i,this);return this.animations.push(o),this.restartWebAnimationsNextTick(),o.updatePromises(),o.play(),o.updatePromises(),o},t.prototype.applyDirtiedAnimation=function(e){var n=this;if(!this.inTick){e.markTarget();var r=e.targetAnimations();r.sort(DC);var i=this.tick(Number(this.currentTime),!1,r.slice())[1];i.forEach(function(o){var a=n.animations.indexOf(o);a!==-1&&n.animations.splice(a,1)}),this.applyPendingEffects()}},t.prototype.restart=function(){return this.ticking||(this.ticking=!0,this.requestAnimationFrame(function(){}),this.hasRestartedThisFrame=!0),this.hasRestartedThisFrame},t.prototype.destroy=function(){this.document.defaultView.cancelAnimationFrame(this.frameId)},t.prototype.applyPendingEffects=function(){this.pendingEffects.forEach(function(e){e==null||e.applyInterpolations()}),this.pendingEffects=[]},t.prototype.updateAnimationsPromises=function(){this.animationsWithPromises=this.animationsWithPromises.filter(function(e){return e.updatePromises()})},t.prototype.discardAnimations=function(){this.updateAnimationsPromises(),this.animations=this.animations.filter(function(e){return e.playState!=="finished"&&e.playState!=="idle"})},t.prototype.restartWebAnimationsNextTick=function(){this.timelineTicking||(this.timelineTicking=!0,this.requestAnimationFrame(this.webAnimationsNextTick))},t.prototype.rAF=function(e){var n=this.rafId++;return this.rafCallbacks.length===0&&(this.frameId=this.document.defaultView.requestAnimationFrame(this.processRafCallbacks)),this.rafCallbacks.push([n,e]),n},t.prototype.requestAnimationFrame=function(e){var n=this;return this.rAF(function(r){n.updateAnimationsPromises(),e(r),n.updateAnimationsPromises()})},t.prototype.tick=function(e,n,r){var i,o,a=this;this.inTick=!0,this.hasRestartedThisFrame=!1,this.currentTime=e,this.ticking=!1;var s=[],c=[],l=[],u=[];return r.forEach(function(f){f.tick(e,n),f._inEffect?(c.push(f.effect),f.markTarget()):(s.push(f.effect),f.unmarkTarget()),f._needsTick&&(a.ticking=!0);var d=f._inEffect||f._needsTick;f._inTimeline=d,d?l.push(f):u.push(f)}),(i=this.pendingEffects).push.apply(i,ut([],j(s),!1)),(o=this.pendingEffects).push.apply(o,ut([],j(c),!1)),this.ticking&&this.requestAnimationFrame(function(){}),this.inTick=!1,[l,u]},t}();mt.EasingFunction=OO,mt.AnimationTimeline=K7;var Z7=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const SO=(t,e,n)=>[["M",t-n,e],["A",n,n,0,1,0,t+n,e],["A",n,n,0,1,0,t-n,e],["Z"]];SO.style=["fill"];const BC=SO.bind(void 0);BC.style=["stroke","lineWidth"];const P1=(t,e,n)=>[["M",t-n,e-n],["L",t+n,e-n],["L",t+n,e+n],["L",t-n,e+n],["Z"]];P1.style=["fill"];const FC=P1.bind(void 0);FC.style=["fill"];const jC=P1.bind(void 0);jC.style=["stroke","lineWidth"];const MO=(t,e,n)=>{const r=n*.618;return[["M",t-r,e],["L",t,e-n],["L",t+r,e],["L",t,e+n],["Z"]]};MO.style=["fill"];const GC=MO.bind(void 0);GC.style=["stroke","lineWidth"];const PO=(t,e,n)=>{const r=n*Math.sin(.3333333333333333*Math.PI);return[["M",t-n,e+r],["L",t,e-r],["L",t+n,e+r],["Z"]]};PO.style=["fill"];const zC=PO.bind(void 0);zC.style=["stroke","lineWidth"];const TO=(t,e,n)=>{const r=n*Math.sin(.3333333333333333*Math.PI);return[["M",t-n,e-r],["L",t+n,e-r],["L",t,e+r],["Z"]]};TO.style=["fill"];const WC=TO.bind(void 0);WC.style=["stroke","lineWidth"];const AO=(t,e,n)=>{const r=n/2*Math.sqrt(3);return[["M",t,e-n],["L",t+r,e-n/2],["L",t+r,e+n/2],["L",t,e+n],["L",t-r,e+n/2],["L",t-r,e-n/2],["Z"]]};AO.style=["fill"];const YC=AO.bind(void 0);YC.style=["stroke","lineWidth"];const CO=(t,e,n)=>{const r=n-1.5;return[["M",t-n,e-r],["L",t+n,e+r],["L",t+n,e-r],["L",t-n,e+r],["Z"]]};CO.style=["fill"];const HC=CO.bind(void 0);HC.style=["stroke","lineWidth"];const UC=(t,e,n)=>[["M",t,e+n],["L",t,e-n]];UC.style=["stroke","lineWidth"];const VC=(t,e,n)=>[["M",t-n,e-n],["L",t+n,e+n],["M",t+n,e-n],["L",t-n,e+n]];VC.style=["stroke","lineWidth"];const XC=(t,e,n)=>[["M",t-n/2,e-n],["L",t+n/2,e-n],["M",t,e-n],["L",t,e+n],["M",t-n/2,e+n],["L",t+n/2,e+n]];XC.style=["stroke","lineWidth"];const $C=(t,e,n)=>[["M",t-n,e],["L",t+n,e],["M",t,e-n],["L",t,e+n]];$C.style=["stroke","lineWidth"];const qC=(t,e,n)=>[["M",t-n,e],["L",t+n,e]];qC.style=["stroke","lineWidth"];const kO=(t,e,n)=>[["M",t-n,e],["L",t+n,e]];kO.style=["stroke","lineWidth"];const KC=kO.bind(void 0);KC.style=["stroke","lineWidth"];const ZC=(t,e,n)=>[["M",t-n,e],["A",n/2,n/2,0,1,1,t,e],["A",n/2,n/2,0,1,0,t+n,e]];ZC.style=["stroke","lineWidth"];const JC=(t,e,n)=>[["M",t-n-1,e-2.5],["L",t,e-2.5],["L",t,e+2.5],["L",t+n+1,e+2.5]];JC.style=["stroke","lineWidth"];const QC=(t,e,n)=>[["M",t-n-1,e+2.5],["L",t,e+2.5],["L",t,e-2.5],["L",t+n+1,e-2.5]];QC.style=["stroke","lineWidth"];const tk=(t,e,n)=>[["M",t-(n+1),e+2.5],["L",t-n/2,e+2.5],["L",t-n/2,e-2.5],["L",t+n/2,e-2.5],["L",t+n/2,e+2.5],["L",t+n+1,e+2.5]];tk.style=["stroke","lineWidth"];const ek=(t,e,n)=>[["M",t-5,e+2.5],["L",t-5,e],["L",t,e],["L",t,e-3],["L",t,e+3],["L",t+6.5,e+3]];ek.style=["stroke","lineWidth"];const Ph=new Map([["bowtie",CO],["cross",VC],["dash",KC],["diamond",MO],["dot",kO],["hexagon",AO],["hollowBowtie",HC],["hollowDiamond",GC],["hollowHexagon",YC],["hollowPoint",BC],["hollowSquare",jC],["hollowTriangle",zC],["hollowTriangleDown",WC],["hv",JC],["hvh",tk],["hyphen",qC],["line",UC],["plus",$C],["point",SO],["rect",FC],["smooth",ZC],["square",P1],["tick",XC],["triangleDown",TO],["triangle",PO],["vh",QC],["vhv",ek]]);function J7(t,e){var{d:n,fill:r,lineWidth:i,path:o,stroke:a,color:s}=e,c=Z7(e,["d","fill","lineWidth","path","stroke","color"]);const l=Ph.get(t)||Ph.get("point");return(...u)=>new ke({style:Object.assign(Object.assign({},c),{d:l(...u),stroke:l.style.includes("stroke")?s||a:"",fill:l.style.includes("fill")?s||r:"",lineWidth:l.style.includes("lineWidth")?i||i||2:0})})}function Q7(t,e){Ph.set(t,e)}function c0t(t){Ph.delete(t)}const nk={};function rk(t,e){t.startsWith("symbol.")?Q7(t.split(".").pop(),e):Object.assign(nk,{[t]:e})}var tG=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof gt.g!="undefined"?gt.g:typeof self!="undefined"?self:{},ik={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(tG,function(){function n(w,_,S,M,T){r(w,_,S||0,M||w.length-1,T||o)}function r(w,_,S,M,T){for(;M>S;){if(M-S>600){var A=M-S+1,C=_-S+1,N=Math.log(A),k=.5*Math.exp(2*N/3),R=.5*Math.sqrt(N*k*(A-k)/A)*(C-A/2<0?-1:1),I=Math.max(S,Math.floor(_-C*k/A+R)),D=Math.min(M,Math.floor(_+(A-C)*k/A+R));r(w,_,I,D,T)}var B=w[_],F=S,G=M;for(i(w,S,_),T(w[M],B)>0&&i(w,S,M);F<G;){for(i(w,F,G),F++,G--;T(w[F],B)<0;)F++;for(;T(w[G],B)>0;)G--}T(w[S],B)===0?i(w,S,G):(G++,i(w,G,M)),G<=_&&(S=G+1),_<=G&&(M=G-1)}}function i(w,_,S){var M=w[_];w[_]=w[S],w[S]=M}function o(w,_){return w<_?-1:w>_?1:0}var a=function(_){_===void 0&&(_=9),this._maxEntries=Math.max(4,_),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()};a.prototype.all=function(){return this._all(this.data,[])},a.prototype.search=function(_){var S=this.data,M=[];if(!b(_,S))return M;for(var T=this.toBBox,A=[];S;){for(var C=0;C<S.children.length;C++){var N=S.children[C],k=S.leaf?T(N):N;b(_,k)&&(S.leaf?M.push(N):m(_,k)?this._all(N,M):A.push(N))}S=A.pop()}return M},a.prototype.collides=function(_){var S=this.data;if(!b(_,S))return!1;for(var M=[];S;){for(var T=0;T<S.children.length;T++){var A=S.children[T],C=S.leaf?this.toBBox(A):A;if(b(_,C)){if(S.leaf||m(_,C))return!0;M.push(A)}}S=M.pop()}return!1},a.prototype.load=function(_){if(!(_&&_.length))return this;if(_.length<this._minEntries){for(var S=0;S<_.length;S++)this.insert(_[S]);return this}var M=this._build(_.slice(),0,_.length-1,0);if(!this.data.children.length)this.data=M;else if(this.data.height===M.height)this._splitRoot(this.data,M);else{if(this.data.height<M.height){var T=this.data;this.data=M,M=T}this._insert(M,this.data.height-M.height-1,!0)}return this},a.prototype.insert=function(_){return _&&this._insert(_,this.data.height-1),this},a.prototype.clear=function(){return this.data=O([]),this},a.prototype.remove=function(_,S){if(!_)return this;for(var M=this.data,T=this.toBBox(_),A=[],C=[],N,k,R;M||A.length;){if(M||(M=A.pop(),k=A[A.length-1],N=C.pop(),R=!0),M.leaf){var I=s(_,M.children,S);if(I!==-1)return M.children.splice(I,1),A.push(M),this._condense(A),this}!R&&!M.leaf&&m(M,T)?(A.push(M),C.push(N),N=0,k=M,M=M.children[0]):k?(N++,M=k.children[N],R=!1):M=null}return this},a.prototype.toBBox=function(_){return _},a.prototype.compareMinX=function(_,S){return _.minX-S.minX},a.prototype.compareMinY=function(_,S){return _.minY-S.minY},a.prototype.toJSON=function(){return this.data},a.prototype.fromJSON=function(_){return this.data=_,this},a.prototype._all=function(_,S){for(var M=[];_;)_.leaf?S.push.apply(S,_.children):M.push.apply(M,_.children),_=M.pop();return S},a.prototype._build=function(_,S,M,T){var A=M-S+1,C=this._maxEntries,N;if(A<=C)return N=O(_.slice(S,M+1)),c(N,this.toBBox),N;T||(T=Math.ceil(Math.log(A)/Math.log(C)),C=Math.ceil(A/Math.pow(C,T-1))),N=O([]),N.leaf=!1,N.height=T;var k=Math.ceil(A/C),R=k*Math.ceil(Math.sqrt(C));E(_,S,M,R,this.compareMinX);for(var I=S;I<=M;I+=R){var D=Math.min(I+R-1,M);E(_,I,D,k,this.compareMinY);for(var B=I;B<=D;B+=k){var F=Math.min(B+k-1,D);N.children.push(this._build(_,B,F,T-1))}}return c(N,this.toBBox),N},a.prototype._chooseSubtree=function(_,S,M,T){for(;T.push(S),!(S.leaf||T.length-1===M);){for(var A=1/0,C=1/0,N=void 0,k=0;k<S.children.length;k++){var R=S.children[k],I=h(R),D=v(_,R)-I;D<C?(C=D,A=I<A?I:A,N=R):D===C&&I<A&&(A=I,N=R)}S=N||S.children[0]}return S},a.prototype._insert=function(_,S,M){var T=M?_:this.toBBox(_),A=[],C=this._chooseSubtree(T,this.data,S,A);for(C.children.push(_),u(C,T);S>=0&&A[S].children.length>this._maxEntries;)this._split(A,S),S--;this._adjustParentBBoxes(T,A,S)},a.prototype._split=function(_,S){var M=_[S],T=M.children.length,A=this._minEntries;this._chooseSplitAxis(M,A,T);var C=this._chooseSplitIndex(M,A,T),N=O(M.children.splice(C,M.children.length-C));N.height=M.height,N.leaf=M.leaf,c(M,this.toBBox),c(N,this.toBBox),S?_[S-1].children.push(N):this._splitRoot(M,N)},a.prototype._splitRoot=function(_,S){this.data=O([_,S]),this.data.height=_.height+1,this.data.leaf=!1,c(this.data,this.toBBox)},a.prototype._chooseSplitIndex=function(_,S,M){for(var T,A=1/0,C=1/0,N=S;N<=M-S;N++){var k=l(_,0,N,this.toBBox),R=l(_,N,M,this.toBBox),I=y(k,R),D=h(k)+h(R);I<A?(A=I,T=N,C=D<C?D:C):I===A&&D<C&&(C=D,T=N)}return T||M-S},a.prototype._chooseSplitAxis=function(_,S,M){var T=_.leaf?this.compareMinX:f,A=_.leaf?this.compareMinY:d,C=this._allDistMargin(_,S,M,T),N=this._allDistMargin(_,S,M,A);C<N&&_.children.sort(T)},a.prototype._allDistMargin=function(_,S,M,T){_.children.sort(T);for(var A=this.toBBox,C=l(_,0,S,A),N=l(_,M-S,M,A),k=p(C)+p(N),R=S;R<M-S;R++){var I=_.children[R];u(C,_.leaf?A(I):I),k+=p(C)}for(var D=M-S-1;D>=S;D--){var B=_.children[D];u(N,_.leaf?A(B):B),k+=p(N)}return k},a.prototype._adjustParentBBoxes=function(_,S,M){for(var T=M;T>=0;T--)u(S[T],_)},a.prototype._condense=function(_){for(var S=_.length-1,M=void 0;S>=0;S--)_[S].children.length===0?S>0?(M=_[S-1].children,M.splice(M.indexOf(_[S]),1)):this.clear():c(_[S],this.toBBox)};function s(w,_,S){if(!S)return _.indexOf(w);for(var M=0;M<_.length;M++)if(S(w,_[M]))return M;return-1}function c(w,_){l(w,0,w.children.length,_,w)}function l(w,_,S,M,T){T||(T=O(null)),T.minX=1/0,T.minY=1/0,T.maxX=-1/0,T.maxY=-1/0;for(var A=_;A<S;A++){var C=w.children[A];u(T,w.leaf?M(C):C)}return T}function u(w,_){return w.minX=Math.min(w.minX,_.minX),w.minY=Math.min(w.minY,_.minY),w.maxX=Math.max(w.maxX,_.maxX),w.maxY=Math.max(w.maxY,_.maxY),w}function f(w,_){return w.minX-_.minX}function d(w,_){return w.minY-_.minY}function h(w){return(w.maxX-w.minX)*(w.maxY-w.minY)}function p(w){return w.maxX-w.minX+(w.maxY-w.minY)}function v(w,_){return(Math.max(_.maxX,w.maxX)-Math.min(_.minX,w.minX))*(Math.max(_.maxY,w.maxY)-Math.min(_.minY,w.minY))}function y(w,_){var S=Math.max(w.minX,_.minX),M=Math.max(w.minY,_.minY),T=Math.min(w.maxX,_.maxX),A=Math.min(w.maxY,_.maxY);return Math.max(0,T-S)*Math.max(0,A-M)}function m(w,_){return w.minX<=_.minX&&w.minY<=_.minY&&_.maxX<=w.maxX&&_.maxY<=w.maxY}function b(w,_){return _.minX<=w.maxX&&_.minY<=w.maxY&&_.maxX>=w.minX&&_.maxY>=w.minY}function O(w){return{children:w,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function E(w,_,S,M,T){for(var A=[_,S];A.length;)if(S=A.pop(),_=A.pop(),!(S-_<=M)){var C=_+Math.ceil((S-_)/M/2)*M;n(w,C,_,S,T),A.push(_,C,C,S)}}return a})})(ik);var eG=ik.exports,ge;(function(t){t.GROUP="g",t.CIRCLE="circle",t.ELLIPSE="ellipse",t.IMAGE="image",t.RECT="rect",t.LINE="line",t.POLYLINE="polyline",t.POLYGON="polygon",t.TEXT="text",t.PATH="path",t.HTML="html",t.MESH="mesh"})(ge||(ge={}));var Th;(function(t){t[t.ZERO=0]="ZERO",t[t.NEGATIVE_ONE=1]="NEGATIVE_ONE"})(Th||(Th={}));var nG=function(){function t(){this.plugins=[]}return t.prototype.addRenderingPlugin=function(e){this.plugins.push(e),this.context.renderingPlugins.push(e)},t.prototype.removeAllRenderingPlugins=function(){var e=this;this.plugins.forEach(function(n){var r=e.context.renderingPlugins.indexOf(n);r>=0&&e.context.renderingPlugins.splice(r,1)})},t}(),rG=function(){function t(e){this.clipSpaceNearZ=Th.NEGATIVE_ONE,this.plugins=[],this.config=nt({enableDirtyCheck:!0,enableCulling:!1,enableAutoRendering:!0,enableDirtyRectangleRendering:!0,enableDirtyRectangleRenderingDebug:!1,enableSizeAttenuation:!0},e)}return t.prototype.registerPlugin=function(e){var n=this.plugins.findIndex(function(r){return r===e});n===-1&&this.plugins.push(e)},t.prototype.unregisterPlugin=function(e){var n=this.plugins.findIndex(function(r){return r===e});n>-1&&this.plugins.splice(n,1)},t.prototype.getPlugins=function(){return this.plugins},t.prototype.getPlugin=function(e){return this.plugins.find(function(n){return n.name===e})},t.prototype.getConfig=function(){return this.config},t.prototype.setConfig=function(e){Object.assign(this.config,e)},t}();function Ah(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function NO(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function T1(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function ok(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function iG(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function oG(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function RO(t){return t===void 0?0:t>360||t<-360?t%360:t}function Pa(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=0),Array.isArray(t)&&t.length===3?ea(t):Je(t)?te(t,e,n):te(t[0],t[1]||e,t[2]||n)}function Mr(t){return t*(Math.PI/180)}function Os(t){return t*(180/Math.PI)}function l0t(t){return t=t%400,t<0&&(t+=400),t/400*360}function u0t(t){return t/360}function aG(t){return 360*t}function sG(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n,s=r*r,c=i*i,l=o*o,u=a+s+c+l,f=n*o-r*i;return f>.499995*u?(t[0]=Math.PI/2,t[1]=2*Math.atan2(r,n),t[2]=0):f<-.499995*u?(t[0]=-Math.PI/2,t[1]=2*Math.atan2(r,n),t[2]=0):(t[0]=Math.asin(2*(n*i-o*r)),t[1]=Math.atan2(2*(n*o+r*i),1-2*(c+l)),t[2]=Math.atan2(2*(n*r+i*o),1-2*(s+c))),t}function cG(t,e){var n,r,i=Math.PI*.5,o=j(Li(Gt(),e),3),a=o[0],s=o[1],c=o[2],l=Math.asin(-e[2]/a);return l<i?l>-i?(n=Math.atan2(e[6]/s,e[10]/c),r=Math.atan2(e[1]/a,e[0]/a)):(r=0,n=-Math.atan2(e[4]/s,e[5]/s)):(r=0,n=Math.atan2(e[4]/s,e[5]/s)),t[0]=n,t[1]=l,t[2]=r,t}function LO(t,e){return e.length===16?cG(t,e):sG(t,e)}function lG(t,e,n,r,i){var o=Math.cos(t),a=Math.sin(t);return tv(r*o,i*a,0,-r*a,i*o,0,e,n,1)}function uG(t,e,n,r,i,o,a,s){s===void 0&&(s=!1);var c=2*o/(n-e),l=2*o/(r-i),u=(n+e)/(n-e),f=(r+i)/(r-i),d,h;return s?(d=-a/(a-o),h=-a*o/(a-o)):(d=-(a+o)/(a-o),h=-2*a*o/(a-o)),t[0]=c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=u,t[9]=f,t[10]=d,t[11]=-1,t[12]=0,t[13]=0,t[14]=h,t[15]=0,t}function ak(t){var e=t[0],n=t[1],r=t[3],i=t[4],o=Math.sqrt(e*e+n*n),a=Math.sqrt(r*r+i*i),s=e*i-n*r;s<0&&(e<i?o=-o:a=-a),o&&(e*=1/o,n*=1/o),a&&(r*=1/a,i*=1/a);var c=Math.atan2(n,e),l=Os(c);return[t[6],t[7],o,a,l]}var Yc=ue(),sc=ue(),x0=rr(),Ve=[Gt(),Gt(),Gt()],sk=Gt();function fG(t,e,n,r,i,o){if(!dG(Yc,t)||(ga(sc,Yc),sc[3]=0,sc[7]=0,sc[11]=0,sc[15]=1,Math.abs(Cd(sc))<1e-8))return!1;var a=Yc[3],s=Yc[7],c=Yc[11],l=Yc[12],u=Yc[13],f=Yc[14],d=Yc[15];if(a!==0||s!==0||c!==0){x0[0]=a,x0[1]=s,x0[2]=c,x0[3]=d;var h=pr(sc,sc);if(!h)return!1;Ad(sc,sc),Yn(i,x0,sc)}else i[0]=i[1]=i[2]=0,i[3]=1;if(e[0]=l,e[1]=u,e[2]=f,hG(Ve,Yc),n[0]=cr(Ve[0]),It(Ve[0],Ve[0]),r[0]=Yt(Ve[0],Ve[1]),IO(Ve[1],Ve[1],Ve[0],1,-r[0]),n[1]=cr(Ve[1]),It(Ve[1],Ve[1]),r[0]/=n[1],r[1]=Yt(Ve[0],Ve[2]),IO(Ve[2],Ve[2],Ve[0],1,-r[1]),r[2]=Yt(Ve[1],Ve[2]),IO(Ve[2],Ve[2],Ve[1],1,-r[2]),n[2]=cr(Ve[2]),It(Ve[2],Ve[2]),r[1]/=n[2],r[2]/=n[2],Wt(sk,Ve[1],Ve[2]),Yt(Ve[0],sk)<0)for(var p=0;p<3;p++)n[p]*=-1,Ve[p][0]*=-1,Ve[p][1]*=-1,Ve[p][2]*=-1;return o[0]=.5*Math.sqrt(Math.max(1+Ve[0][0]-Ve[1][1]-Ve[2][2],0)),o[1]=.5*Math.sqrt(Math.max(1-Ve[0][0]+Ve[1][1]-Ve[2][2],0)),o[2]=.5*Math.sqrt(Math.max(1-Ve[0][0]-Ve[1][1]+Ve[2][2],0)),o[3]=.5*Math.sqrt(Math.max(1+Ve[0][0]+Ve[1][1]+Ve[2][2],0)),Ve[2][1]>Ve[1][2]&&(o[0]=-o[0]),Ve[0][2]>Ve[2][0]&&(o[1]=-o[1]),Ve[1][0]>Ve[0][1]&&(o[2]=-o[2]),!0}function dG(t,e){var n=e[15];if(n===0)return!1;for(var r=1/n,i=0;i<16;i++)t[i]=e[i]*r;return!0}function hG(t,e){t[0][0]=e[0],t[0][1]=e[1],t[0][2]=e[2],t[1][0]=e[4],t[1][1]=e[5],t[1][2]=e[6],t[2][0]=e[8],t[2][1]=e[9],t[2][2]=e[10]}function IO(t,e,n,r,i){t[0]=e[0]*r+n[0]*i,t[1]=e[1]*r+n[1]*i,t[2]=e[2]*r+n[2]*i}var ca=function(){function t(){this.center=[0,0,0],this.halfExtents=[0,0,0],this.min=[0,0,0],this.max=[0,0,0]}return t.isEmpty=function(e){return!e||e.halfExtents[0]===0&&e.halfExtents[1]===0&&e.halfExtents[2]===0},t.prototype.update=function(e,n){Ah(this.center,e),Ah(this.halfExtents,n),NO(this.min,this.center,this.halfExtents),T1(this.max,this.center,this.halfExtents)},t.prototype.setMinMax=function(e,n){T1(this.center,n,e),ok(this.center,this.center,.5),NO(this.halfExtents,n,e),ok(this.halfExtents,this.halfExtents,.5),Ah(this.min,e),Ah(this.max,n)},t.prototype.getMin=function(){return this.min},t.prototype.getMax=function(){return this.max},t.prototype.add=function(e){if(!t.isEmpty(e)){if(t.isEmpty(this)){this.setMinMax(e.getMin(),e.getMax());return}var n=this.center,r=n[0],i=n[1],o=n[2],a=this.halfExtents,s=a[0],c=a[1],l=a[2],u=r-s,f=r+s,d=i-c,h=i+c,p=o-l,v=o+l,y=e.center,m=y[0],b=y[1],O=y[2],E=e.halfExtents,w=E[0],_=E[1],S=E[2],M=m-w,T=m+w,A=b-_,C=b+_,N=O-S,k=O+S;M<u&&(u=M),T>f&&(f=T),A<d&&(d=A),C>h&&(h=C),N<p&&(p=N),k>v&&(v=k),n[0]=(u+f)*.5,n[1]=(d+h)*.5,n[2]=(p+v)*.5,a[0]=(f-u)*.5,a[1]=(h-d)*.5,a[2]=(v-p)*.5,this.min[0]=u,this.min[1]=d,this.min[2]=p,this.max[0]=f,this.max[1]=h,this.max[2]=v}},t.prototype.setFromTransformedAABB=function(e,n){var r=this.center,i=this.halfExtents,o=e.center,a=e.halfExtents,s=n[0],c=n[4],l=n[8],u=n[1],f=n[5],d=n[9],h=n[2],p=n[6],v=n[10],y=Math.abs(s),m=Math.abs(c),b=Math.abs(l),O=Math.abs(u),E=Math.abs(f),w=Math.abs(d),_=Math.abs(h),S=Math.abs(p),M=Math.abs(v);r[0]=n[12]+s*o[0]+c*o[1]+l*o[2],r[1]=n[13]+u*o[0]+f*o[1]+d*o[2],r[2]=n[14]+h*o[0]+p*o[1]+v*o[2],i[0]=y*a[0]+m*a[1]+b*a[2],i[1]=O*a[0]+E*a[1]+w*a[2],i[2]=_*a[0]+S*a[1]+M*a[2],NO(this.min,r,i),T1(this.max,r,i)},t.prototype.intersects=function(e){var n=this.getMax(),r=this.getMin(),i=e.getMax(),o=e.getMin();return r[0]<=i[0]&&n[0]>=o[0]&&r[1]<=i[1]&&n[1]>=o[1]&&r[2]<=i[2]&&n[2]>=o[2]},t.prototype.intersection=function(e){if(!this.intersects(e))return null;var n=new t,r=iG([0,0,0],this.getMin(),e.getMin()),i=oG([0,0,0],this.getMax(),e.getMax());return n.setMinMax(r,i),n},t.prototype.getNegativeFarPoint=function(e){return e.pnVertexFlag===273?Ah([0,0,0],this.min):e.pnVertexFlag===272?[this.min[0],this.min[1],this.max[2]]:e.pnVertexFlag===257?[this.min[0],this.max[1],this.min[2]]:e.pnVertexFlag===256?[this.min[0],this.max[1],this.max[2]]:e.pnVertexFlag===17?[this.max[0],this.min[1],this.min[2]]:e.pnVertexFlag===16?[this.max[0],this.min[1],this.max[2]]:e.pnVertexFlag===1?[this.max[0],this.max[1],this.min[2]]:[this.max[0],this.max[1],this.max[2]]},t.prototype.getPositiveFarPoint=function(e){return e.pnVertexFlag===273?Ah([0,0,0],this.max):e.pnVertexFlag===272?[this.max[0],this.max[1],this.min[2]]:e.pnVertexFlag===257?[this.max[0],this.min[1],this.max[2]]:e.pnVertexFlag===256?[this.max[0],this.min[1],this.min[2]]:e.pnVertexFlag===17?[this.min[0],this.max[1],this.max[2]]:e.pnVertexFlag===16?[this.min[0],this.max[1],this.min[2]]:e.pnVertexFlag===1?[this.min[0],this.min[1],this.max[2]]:[this.min[0],this.min[1],this.min[2]]},t}(),pG=function(){function t(e,n){this.distance=e||0,this.normal=n||te(0,1,0),this.updatePNVertexFlag()}return t.prototype.updatePNVertexFlag=function(){this.pnVertexFlag=(+(this.normal[0]>=0)<<8)+(+(this.normal[1]>=0)<<4)+ +(this.normal[2]>=0)},t.prototype.distanceToPoint=function(e){return Yt(e,this.normal)-this.distance},t.prototype.normalize=function(){var e=1/Br(this.normal);it(this.normal,this.normal,e),this.distance*=e},t.prototype.intersectsLine=function(e,n,r){var i=this.distanceToPoint(e),o=this.distanceToPoint(n),a=i/(i-o),s=a>=0&&a<=1;return s&&r&&ne(r,e,n,a),s},t}(),ku;(function(t){t[t.OUTSIDE=4294967295]="OUTSIDE",t[t.INSIDE=0]="INSIDE",t[t.INDETERMINATE=2147483647]="INDETERMINATE"})(ku||(ku={}));var vG=function(){function t(e){if(this.planes=[],e)this.planes=e;else for(var n=0;n<6;n++)this.planes.push(new pG)}return t.prototype.extractFromVPMatrix=function(e){var n=j(e,16),r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],c=n[5],l=n[6],u=n[7],f=n[8],d=n[9],h=n[10],p=n[11],v=n[12],y=n[13],m=n[14],b=n[15];Dn(this.planes[0].normal,a-r,u-s,p-f),this.planes[0].distance=b-v,Dn(this.planes[1].normal,a+r,u+s,p+f),this.planes[1].distance=b+v,Dn(this.planes[2].normal,a+i,u+c,p+d),this.planes[2].distance=b+y,Dn(this.planes[3].normal,a-i,u-c,p-d),this.planes[3].distance=b-y,Dn(this.planes[4].normal,a-o,u-l,p-h),this.planes[4].distance=b-m,Dn(this.planes[5].normal,a+o,u+l,p+h),this.planes[5].distance=b+m,this.planes.forEach(function(O){O.normalize(),O.updatePNVertexFlag()})},t}(),Uo=function(){function t(e,n){e===void 0&&(e=0),n===void 0&&(n=0),this.x=0,this.y=0,this.x=e,this.y=n}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copyFrom=function(e){this.x=e.x,this.y=e.y},t}(),Ch=function(){function t(e,n,r,i){this.x=e,this.y=n,this.width=r,this.height=i,this.left=e,this.right=e+r,this.top=n,this.bottom=n+i}return t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t.applyTransform=function(e,n){var r=na(e.x,e.y,0,1),i=na(e.x+e.width,e.y,0,1),o=na(e.x,e.y+e.height,0,1),a=na(e.x+e.width,e.y+e.height,0,1),s=rr(),c=rr(),l=rr(),u=rr();Yn(s,r,n),Yn(c,i,n),Yn(l,o,n),Yn(u,a,n);var f=Math.min(s[0],c[0],l[0],u[0]),d=Math.min(s[1],c[1],l[1],u[1]),h=Math.max(s[0],c[0],l[0],u[0]),p=Math.max(s[1],c[1],l[1],u[1]);return t.fromRect({x:f,y:d,width:h-f,height:p-d})},t.prototype.toJSON=function(){},t}(),Vr="Method not implemented.",kh="Use document.documentElement instead.",gG="Cannot append a destroyed element.",Xr;(function(t){t[t.ORBITING=0]="ORBITING",t[t.EXPLORING=1]="EXPLORING",t[t.TRACKING=2]="TRACKING"})(Xr||(Xr={}));var b0;(function(t){t[t.DEFAULT=0]="DEFAULT",t[t.ROTATIONAL=1]="ROTATIONAL",t[t.TRANSLATIONAL=2]="TRANSLATIONAL",t[t.CINEMATIC=3]="CINEMATIC"})(b0||(b0={}));var Ta;(function(t){t[t.ORTHOGRAPHIC=0]="ORTHOGRAPHIC",t[t.PERSPECTIVE=1]="PERSPECTIVE"})(Ta||(Ta={}));var ck={UPDATED:"updated"},lk=2e-4,yG=function(){function t(){this.clipSpaceNearZ=Th.NEGATIVE_ONE,this.eventEmitter=new Xa,this.matrix=ue(),this.right=te(1,0,0),this.up=te(0,1,0),this.forward=te(0,0,1),this.position=te(0,0,1),this.focalPoint=te(0,0,0),this.distanceVector=te(0,0,-1),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.maxDistance=1/0,this.minDistance=-1/0,this.zoom=1,this.rotateWorld=!1,this.fov=30,this.near=.1,this.far=1e3,this.aspect=1,this.projectionMatrix=ue(),this.projectionMatrixInverse=ue(),this.jitteredProjectionMatrix=void 0,this.enableUpdate=!0,this.type=Xr.EXPLORING,this.trackingMode=b0.DEFAULT,this.projectionMode=Ta.PERSPECTIVE,this.frustum=new vG,this.orthoMatrix=ue()}return t.prototype.isOrtho=function(){return this.projectionMode===Ta.ORTHOGRAPHIC},t.prototype.getProjectionMode=function(){return this.projectionMode},t.prototype.getPerspective=function(){return this.jitteredProjectionMatrix||this.projectionMatrix},t.prototype.getPerspectiveInverse=function(){return this.projectionMatrixInverse},t.prototype.getFrustum=function(){return this.frustum},t.prototype.getPosition=function(){return this.position},t.prototype.getFocalPoint=function(){return this.focalPoint},t.prototype.getDollyingStep=function(){return this.dollyingStep},t.prototype.getNear=function(){return this.near},t.prototype.getFar=function(){return this.far},t.prototype.getZoom=function(){return this.zoom},t.prototype.getOrthoMatrix=function(){return this.orthoMatrix},t.prototype.getView=function(){return this.view},t.prototype.setEnableUpdate=function(e){this.enableUpdate=e},t.prototype.setType=function(e,n){return this.type=e,this.type===Xr.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===Xr.TRACKING&&n!==void 0&&this.setTrackingMode(n),this},t.prototype.setProjectionMode=function(e){return this.projectionMode=e,this},t.prototype.setTrackingMode=function(e){if(this.type!==Xr.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=e,this},t.prototype.setWorldRotation=function(e){return this.rotateWorld=e,this._getAngles(),this},t.prototype.getViewTransform=function(){return pr(ue(),this.matrix)},t.prototype.getWorldTransform=function(){return this.matrix},t.prototype.jitterProjectionMatrix=function(e,n){var r=wi(ue(),[e,n,0]);this.jitteredProjectionMatrix=Pn(ue(),r,this.projectionMatrix)},t.prototype.clearJitterProjectionMatrix=function(){this.jitteredProjectionMatrix=void 0},t.prototype.setMatrix=function(e){return this.matrix=e,this._update(),this},t.prototype.setProjectionMatrix=function(e){this.projectionMatrix=e},t.prototype.setFov=function(e){return this.setPerspective(this.near,this.far,e,this.aspect),this},t.prototype.setAspect=function(e){return this.setPerspective(this.near,this.far,this.fov,e),this},t.prototype.setNear=function(e){return this.projectionMode===Ta.PERSPECTIVE?this.setPerspective(e,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,e,this.far),this},t.prototype.setFar=function(e){return this.projectionMode===Ta.PERSPECTIVE?this.setPerspective(this.near,e,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,e),this},t.prototype.setViewOffset=function(e,n,r,i,o,a){return this.aspect=e/n,this.view===void 0&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=o,this.view.height=a,this.projectionMode===Ta.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this},t.prototype.clearViewOffset=function(){return this.view!==void 0&&(this.view.enabled=!1),this.projectionMode===Ta.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this},t.prototype.setZoom=function(e){return this.zoom=e,this.projectionMode===Ta.ORTHOGRAPHIC?this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far):this.projectionMode===Ta.PERSPECTIVE&&this.setPerspective(this.near,this.far,this.fov,this.aspect),this},t.prototype.setZoomByViewportPoint=function(e,n){var r=this.canvas.viewport2Canvas({x:n[0],y:n[1]}),i=r.x,o=r.y,a=this.roll;this.rotate(0,0,-a),this.setPosition(i,o),this.setFocalPoint(i,o),this.setZoom(e),this.rotate(0,0,a);var s=this.canvas.viewport2Canvas({x:n[0],y:n[1]}),c=s.x,l=s.y,u=te(c-i,l-o,0),f=Yt(u,this.right)/cr(this.right),d=Yt(u,this.up)/cr(this.up),h=j(this.getPosition(),2),p=h[0],v=h[1],y=j(this.getFocalPoint(),2),m=y[0],b=y[1];return this.setPosition(p-f,v-d),this.setFocalPoint(m-f,b-d),this},t.prototype.setPerspective=function(e,n,r,i){var o;this.projectionMode=Ta.PERSPECTIVE,this.fov=r,this.near=e,this.far=n,this.aspect=i;var a=this.near*Math.tan(Mr(.5*this.fov))/this.zoom,s=2*a,c=this.aspect*s,l=-.5*c;if(!((o=this.view)===null||o===void 0)&&o.enabled){var u=this.view.fullWidth,f=this.view.fullHeight;l+=this.view.offsetX*c/u,a-=this.view.offsetY*s/f,c*=this.view.width/u,s*=this.view.height/f}return uG(this.projectionMatrix,l,l+c,a-s,a,e,this.far,this.clipSpaceNearZ===Th.ZERO),pr(this.projectionMatrixInverse,this.projectionMatrix),this.triggerUpdate(),this},t.prototype.setOrthographic=function(e,n,r,i,o,a){var s;this.projectionMode=Ta.ORTHOGRAPHIC,this.rright=n,this.left=e,this.top=r,this.bottom=i,this.near=o,this.far=a;var c=(this.rright-this.left)/(2*this.zoom),l=(this.top-this.bottom)/(2*this.zoom),u=(this.rright+this.left)/2,f=(this.top+this.bottom)/2,d=u-c,h=u+c,p=f+l,v=f-l;if(!((s=this.view)===null||s===void 0)&&s.enabled){var y=(this.rright-this.left)/this.view.fullWidth/this.zoom,m=(this.top-this.bottom)/this.view.fullHeight/this.zoom;d+=y*this.view.offsetX,h=d+y*this.view.width,p-=m*this.view.offsetY,v=p-m*this.view.height}return this.clipSpaceNearZ===Th.NEGATIVE_ONE?Ld(this.projectionMatrix,d,h,p,v,o,a):vo(this.projectionMatrix,d,h,p,v,o,a),pr(this.projectionMatrixInverse,this.projectionMatrix),this._getOrthoMatrix(),this.triggerUpdate(),this},t.prototype.setPosition=function(e,n,r){n===void 0&&(n=this.position[1]),r===void 0&&(r=this.position[2]);var i=Pa(e,n,r);return this._setPosition(i),this.setFocalPoint(this.focalPoint),this.triggerUpdate(),this},t.prototype.setFocalPoint=function(e,n,r){n===void 0&&(n=this.focalPoint[1]),r===void 0&&(r=this.focalPoint[2]);var i=te(0,1,0);if(this.focalPoint=Pa(e,n,r),this.trackingMode===b0.CINEMATIC){var o=mc(Gt(),this.focalPoint,this.position);e=o[0],n=o[1],r=o[2];var a=cr(o),s=Os(Math.asin(n/a)),c=90+Os(Math.atan2(r,e)),l=ue();Xn(l,l,Mr(c)),nr(l,l,Mr(s)),i=Ft(Gt(),[0,1,0],l)}return pr(this.matrix,Id(ue(),this.position,this.focalPoint,i)),this._getAxes(),this._getDistance(),this._getAngles(),this.triggerUpdate(),this},t.prototype.getDistance=function(){return this.distance},t.prototype.getDistanceVector=function(){return this.distanceVector},t.prototype.setDistance=function(e){if(this.distance===e||e<0)return this;this.distance=e,this.distance<lk&&(this.distance=lk),this.dollyingStep=this.distance/100;var n=Gt();e=this.distance;var r=this.forward,i=this.focalPoint;return n[0]=e*r[0]+i[0],n[1]=e*r[1]+i[1],n[2]=e*r[2]+i[2],this._setPosition(n),this.triggerUpdate(),this},t.prototype.setMaxDistance=function(e){return this.maxDistance=e,this},t.prototype.setMinDistance=function(e){return this.minDistance=e,this},t.prototype.setAzimuth=function(e){return this.azimuth=RO(e),this.computeMatrix(),this._getAxes(),this.type===Xr.ORBITING||this.type===Xr.EXPLORING?this._getPosition():this.type===Xr.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this},t.prototype.getAzimuth=function(){return this.azimuth},t.prototype.setElevation=function(e){return this.elevation=RO(e),this.computeMatrix(),this._getAxes(),this.type===Xr.ORBITING||this.type===Xr.EXPLORING?this._getPosition():this.type===Xr.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this},t.prototype.getElevation=function(){return this.elevation},t.prototype.setRoll=function(e){return this.roll=RO(e),this.computeMatrix(),this._getAxes(),this.type===Xr.ORBITING||this.type===Xr.EXPLORING?this._getPosition():this.type===Xr.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this},t.prototype.getRoll=function(){return this.roll},t.prototype._update=function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles(),this._getOrthoMatrix(),this.triggerUpdate()},t.prototype.computeMatrix=function(){var e=zi(ze(),[0,0,1],Mr(this.roll));po(this.matrix);var n=zi(ze(),[1,0,0],Mr((this.rotateWorld&&this.type!==Xr.TRACKING||this.type===Xr.TRACKING?1:-1)*this.elevation)),r=zi(ze(),[0,1,0],Mr((this.rotateWorld&&this.type!==Xr.TRACKING||this.type===Xr.TRACKING?1:-1)*this.azimuth)),i=ni(ze(),r,n);i=ni(ze(),i,e);var o=ou(ue(),i);this.type===Xr.ORBITING||this.type===Xr.EXPLORING?(ya(this.matrix,this.matrix,this.focalPoint),Pn(this.matrix,this.matrix,o),ya(this.matrix,this.matrix,[0,0,this.distance])):this.type===Xr.TRACKING&&(ya(this.matrix,this.matrix,this.position),Pn(this.matrix,this.matrix,o))},t.prototype._setPosition=function(e,n,r){this.position=Pa(e,n,r);var i=this.matrix;i[12]=this.position[0],i[13]=this.position[1],i[14]=this.position[2],i[15]=1,this._getOrthoMatrix()},t.prototype._getAxes=function(){lr(this.right,Pa(Yn(rr(),[1,0,0,0],this.matrix))),lr(this.up,Pa(Yn(rr(),[0,1,0,0],this.matrix))),lr(this.forward,Pa(Yn(rr(),[0,0,1,0],this.matrix))),It(this.right,this.right),It(this.up,this.up),It(this.forward,this.forward)},t.prototype._getAngles=function(){var e=this.distanceVector[0],n=this.distanceVector[1],r=this.distanceVector[2],i=cr(this.distanceVector);if(i===0){this.elevation=0,this.azimuth=0;return}this.type===Xr.TRACKING?(this.elevation=Os(Math.asin(n/i)),this.azimuth=Os(Math.atan2(-e,-r))):this.rotateWorld?(this.elevation=Os(Math.asin(n/i)),this.azimuth=Os(Math.atan2(-e,-r))):(this.elevation=-Os(Math.asin(n/i)),this.azimuth=-Os(Math.atan2(-e,-r)))},t.prototype._getPosition=function(){lr(this.position,Pa(Yn(rr(),[0,0,0,1],this.matrix))),this._getDistance()},t.prototype._getFocalPoint=function(){we(this.distanceVector,[0,0,-this.distance],jd(Fd(),this.matrix)),No(this.focalPoint,this.position,this.distanceVector),this._getDistance()},t.prototype._getDistance=function(){this.distanceVector=mc(Gt(),this.focalPoint,this.position),this.distance=cr(this.distanceVector),this.dollyingStep=this.distance/100},t.prototype._getOrthoMatrix=function(){if(this.projectionMode===Ta.ORTHOGRAPHIC){var e=this.position,n=zi(ze(),[0,0,1],-this.roll*Math.PI/180);Sr(this.orthoMatrix,n,te((this.rright-this.left)/2-e[0],(this.top-this.bottom)/2-e[1],0),te(this.zoom,this.zoom,1),e)}},t.prototype.triggerUpdate=function(){if(this.enableUpdate){var e=this.getViewTransform(),n=Pn(ue(),this.getPerspective(),e);this.getFrustum().extractFromVPMatrix(n),this.eventEmitter.emit(ck.UPDATED)}},t.prototype.rotate=function(e,n,r){throw new Error(Vr)},t.prototype.pan=function(e,n){throw new Error(Vr)},t.prototype.dolly=function(e){throw new Error(Vr)},t.prototype.createLandmark=function(e,n){throw new Error(Vr)},t.prototype.gotoLandmark=function(e,n){throw new Error(Vr)},t.prototype.cancelLandmarkAnimation=function(){throw new Error(Vr)},t}();function Oo(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError("Expected a function");var n=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=e?e.apply(this,r):r[0],a=n.cache;if(a.has(o))return a.get(o);var s=t.apply(this,r);return n.cache=a.set(o,s)||a,s};return n.cache=new(Oo.Cache||Map),n}Oo.Cache=Map;var Zt;(function(t){t[t.kUnknown=0]="kUnknown",t[t.kNumber=1]="kNumber",t[t.kPercentage=2]="kPercentage",t[t.kEms=3]="kEms",t[t.kPixels=4]="kPixels",t[t.kRems=5]="kRems",t[t.kDegrees=6]="kDegrees",t[t.kRadians=7]="kRadians",t[t.kGradians=8]="kGradians",t[t.kTurns=9]="kTurns",t[t.kMilliseconds=10]="kMilliseconds",t[t.kSeconds=11]="kSeconds",t[t.kInteger=12]="kInteger"})(Zt||(Zt={}));var os;(function(t){t[t.kUNumber=0]="kUNumber",t[t.kUPercent=1]="kUPercent",t[t.kULength=2]="kULength",t[t.kUAngle=3]="kUAngle",t[t.kUTime=4]="kUTime",t[t.kUOther=5]="kUOther"})(os||(os={}));var uk;(function(t){t[t.kAll=0]="kAll",t[t.kNonNegative=1]="kNonNegative",t[t.kInteger=2]="kInteger",t[t.kNonNegativeInteger=3]="kNonNegativeInteger",t[t.kPositiveInteger=4]="kPositiveInteger"})(uk||(uk={}));var DO;(function(t){t[t.kYes=0]="kYes",t[t.kNo=1]="kNo"})(DO||(DO={}));var BO;(function(t){t[t.kYes=0]="kYes",t[t.kNo=1]="kNo"})(BO||(BO={}));var mG=[{name:"em",unit_type:Zt.kEms},{name:"px",unit_type:Zt.kPixels},{name:"deg",unit_type:Zt.kDegrees},{name:"rad",unit_type:Zt.kRadians},{name:"grad",unit_type:Zt.kGradians},{name:"ms",unit_type:Zt.kMilliseconds},{name:"s",unit_type:Zt.kSeconds},{name:"rem",unit_type:Zt.kRems},{name:"turn",unit_type:Zt.kTurns}],Nu;(function(t){t[t.kUnknownType=0]="kUnknownType",t[t.kUnparsedType=1]="kUnparsedType",t[t.kKeywordType=2]="kKeywordType",t[t.kUnitType=3]="kUnitType",t[t.kSumType=4]="kSumType",t[t.kProductType=5]="kProductType",t[t.kNegateType=6]="kNegateType",t[t.kInvertType=7]="kInvertType",t[t.kMinType=8]="kMinType",t[t.kMaxType=9]="kMaxType",t[t.kClampType=10]="kClampType",t[t.kTransformType=11]="kTransformType",t[t.kPositionType=12]="kPositionType",t[t.kURLImageType=13]="kURLImageType",t[t.kColorType=14]="kColorType",t[t.kUnsupportedColorType=15]="kUnsupportedColorType"})(Nu||(Nu={}));var xG=function(t){return mG.find(function(e){return e.name===t}).unit_type},bG=function(t){return t?t==="number"?Zt.kNumber:t==="percent"||t==="%"?Zt.kPercentage:xG(t):Zt.kUnknown},_G=function(t){switch(t){case Zt.kNumber:case Zt.kInteger:return os.kUNumber;case Zt.kPercentage:return os.kUPercent;case Zt.kPixels:return os.kULength;case Zt.kMilliseconds:case Zt.kSeconds:return os.kUTime;case Zt.kDegrees:case Zt.kRadians:case Zt.kGradians:case Zt.kTurns:return os.kUAngle;default:return os.kUOther}},wG=function(t){switch(t){case os.kUNumber:return Zt.kNumber;case os.kULength:return Zt.kPixels;case os.kUPercent:return Zt.kPercentage;case os.kUTime:return Zt.kSeconds;case os.kUAngle:return Zt.kDegrees;default:return Zt.kUnknown}},fk=function(t){var e=1;switch(t){case Zt.kPixels:case Zt.kDegrees:case Zt.kSeconds:break;case Zt.kMilliseconds:e=.001;break;case Zt.kRadians:e=180/Math.PI;break;case Zt.kGradians:e=.9;break;case Zt.kTurns:e=360;break}return e},FO=function(t){switch(t){case Zt.kNumber:case Zt.kInteger:return"";case Zt.kPercentage:return"%";case Zt.kEms:return"em";case Zt.kRems:return"rem";case Zt.kPixels:return"px";case Zt.kDegrees:return"deg";case Zt.kRadians:return"rad";case Zt.kGradians:return"grad";case Zt.kMilliseconds:return"ms";case Zt.kSeconds:return"s";case Zt.kTurns:return"turn"}return""},A1=function(){function t(){}return t.isAngle=function(e){return e===Zt.kDegrees||e===Zt.kRadians||e===Zt.kGradians||e===Zt.kTurns},t.isLength=function(e){return e>=Zt.kEms&&e<Zt.kDegrees},t.isRelativeUnit=function(e){return e===Zt.kPercentage||e===Zt.kEms||e===Zt.kRems},t.isTime=function(e){return e===Zt.kSeconds||e===Zt.kMilliseconds},t.prototype.toString=function(){return this.buildCSSText(DO.kNo,BO.kNo,"")},t.prototype.isNumericValue=function(){return this.getType()>=Nu.kUnitType&&this.getType()<=Nu.kClampType},t}(),OG=function(t){xt(e,t);function e(n){var r=t.call(this)||this;return r.colorSpace=n,r}return e.prototype.getType=function(){return Nu.kColorType},e.prototype.to=function(n){return this},e}(A1),Nh;(function(t){t[t.Constant=0]="Constant",t[t.LinearGradient=1]="LinearGradient",t[t.RadialGradient=2]="RadialGradient"})(Nh||(Nh={}));var C1=function(t){xt(e,t);function e(n,r){var i=t.call(this)||this;return i.type=n,i.value=r,i}return e.prototype.clone=function(){return new e(this.type,this.value)},e.prototype.buildCSSText=function(n,r,i){return i},e.prototype.getType=function(){return Nu.kColorType},e}(A1),Aa=function(t){xt(e,t);function e(n){var r=t.call(this)||this;return r.value=n,r}return e.prototype.clone=function(){return new e(this.value)},e.prototype.getType=function(){return Nu.kKeywordType},e.prototype.buildCSSText=function(n,r,i){return i+this.value},e}(A1),EG=Oo(function(t){return t===void 0&&(t=""),t.replace(/-([a-z])/g,function(e){return e[1].toUpperCase()})}),dk=function(t){return t.split("").map(function(e,n){return e.toUpperCase()===e?"".concat(n!==0?"-":"").concat(e.toLowerCase()):e}).join("")};function SG(t){if(!t)throw new Error}function Rh(t){return typeof t=="function"}function MG(t){return typeof t=="symbol"}var f0t=function(t){return Object.fromEntries(Object.entries(t).filter(function(e){var n=__read(e,2),r=n[1];return r!==void 0}))},PG={d:{alias:"path"},strokeDasharray:{alias:"lineDash"},strokeWidth:{alias:"lineWidth"},textAnchor:{alias:"textAlign"},src:{alias:"img"}},jO=Oo(function(t){var e=EG(t),n=PG[e];return e=(n==null?void 0:n.alias)||e,e}),TG=function(t,e){e===void 0&&(e="");var n="";return Number.isFinite(t)?(SG(Number.isNaN(t)),n="NaN"):t>0?n="infinity":n="-infinity",n+=e},GO=function(t){return wG(_G(t))},fr=function(t){xt(e,t);function e(n,r){r===void 0&&(r=Zt.kNumber);var i=t.call(this)||this,o;return typeof r=="string"?o=bG(r):o=r,i.unit=o,i.value=n,i}return e.prototype.clone=function(){return new e(this.value,this.unit)},e.prototype.equals=function(n){var r=n;return this.value===r.value&&this.unit===r.unit},e.prototype.getType=function(){return Nu.kUnitType},e.prototype.convertTo=function(n){if(this.unit===n)return new e(this.value,this.unit);var r=GO(this.unit);if(r!==GO(n)||r===Zt.kUnknown)return null;var i=fk(this.unit)/fk(n);return new e(this.value*i,n)},e.prototype.buildCSSText=function(n,r,i){var o;switch(this.unit){case Zt.kUnknown:break;case Zt.kInteger:o=Number(this.value).toFixed(0);break;case Zt.kNumber:case Zt.kPercentage:case Zt.kEms:case Zt.kRems:case Zt.kPixels:case Zt.kDegrees:case Zt.kRadians:case Zt.kGradians:case Zt.kMilliseconds:case Zt.kSeconds:case Zt.kTurns:{var a=-999999,s=999999,c=this.value,l=FO(this.unit);if(c<a||c>s){var u=FO(this.unit);!Number.isFinite(c)||Number.isNaN(c)?o=TG(c,u):o=c+(u||"")}else o="".concat(c).concat(l)}}return i+=o,i},e}(A1),pi=new fr(0,"px");new fr(1,"px");var Es=new fr(0,"deg"),zO=function(t){xt(e,t);function e(n,r,i,o,a){o===void 0&&(o=1),a===void 0&&(a=!1);var s=t.call(this,"rgb")||this;return s.r=n,s.g=r,s.b=i,s.alpha=o,s.isNone=a,s}return e.prototype.clone=function(){return new e(this.r,this.g,this.b,this.alpha)},e.prototype.buildCSSText=function(n,r,i){return i+"rgba(".concat(this.r,",").concat(this.g,",").concat(this.b,",").concat(this.alpha,")")},e}(OG),Pr=new Aa("unset"),AG=new Aa("initial"),CG=new Aa("inherit"),WO={"":Pr,unset:Pr,initial:AG,inherit:CG},YO=function(t){return WO[t]||(WO[t]=new Aa(t)),WO[t]},k1=new zO(0,0,0,0,!0),hk=new zO(0,0,0,0),kG=Oo(function(t,e,n,r){return new zO(t,e,n,r)},function(t,e,n,r){return"rgba(".concat(t,",").concat(e,",").concat(n,",").concat(r,")")}),gr=function(t,e){return e===void 0&&(e=Zt.kNumber),new fr(t,e)};new fr(50,"%");var HO;(function(t){t[t.Standard=0]="Standard"})(HO||(HO={}));var Lh;(function(t){t[t.ADDED=0]="ADDED",t[t.REMOVED=1]="REMOVED",t[t.Z_INDEX_CHANGED=2]="Z_INDEX_CHANGED"})(Lh||(Lh={}));var pk={absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new Ch(0,0,0,0)},se;(function(t){t.COORDINATE="<coordinate>",t.COLOR="<color>",t.PAINT="<paint>",t.NUMBER="<number>",t.ANGLE="<angle>",t.OPACITY_VALUE="<opacity-value>",t.SHADOW_BLUR="<shadow-blur>",t.LENGTH="<length>",t.PERCENTAGE="<percentage>",t.LENGTH_PERCENTAGE="<length> | <percentage>",t.LENGTH_PERCENTAGE_12="[<length> | <percentage>]{1,2}",t.LENGTH_PERCENTAGE_14="[<length> | <percentage>]{1,4}",t.LIST_OF_POINTS="<list-of-points>",t.PATH="<path>",t.FILTER="<filter>",t.Z_INDEX="<z-index>",t.OFFSET_DISTANCE="<offset-distance>",t.DEFINED_PATH="<defined-path>",t.MARKER="<marker>",t.TRANSFORM="<transform>",t.TRANSFORM_ORIGIN="<transform-origin>",t.TEXT="<text>",t.TEXT_TRANSFORM="<text-transform>"})(se||(se={}));function NG(t){var e=t.type,n=t.value;return e==="hex"?"#".concat(n):e==="literal"?n:e==="rgb"?"rgb(".concat(n.join(","),")"):"rgba(".concat(n.join(","),")")}var RG=function(){var t={linearGradient:/^(linear\-gradient)/i,repeatingLinearGradient:/^(repeating\-linear\-gradient)/i,radialGradient:/^(radial\-gradient)/i,repeatingRadialGradient:/^(repeating\-radial\-gradient)/i,conicGradient:/^(conic\-gradient)/i,sideOrCorner:/^to (left (top|bottom)|right (top|bottom)|top (left|right)|bottom (left|right)|left|right|top|bottom)/i,extentKeywords:/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,positionKeywords:/^(left|center|right|top|bottom)/i,pixelValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,percentageValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,emValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,angleValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,startCall:/^\(/,endCall:/^\)/,comma:/^,/,hexColor:/^\#([0-9a-fA-F]+)/,literalColor:/^([a-zA-Z]+)/,rgbColor:/^rgb/i,rgbaColor:/^rgba/i,number:/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/},e="";function n(B){throw new Error(e+": "+B)}function r(){var B=i();return e.length>0&&n("Invalid input not EOF"),B}function i(){return O(o)}function o(){return a("linear-gradient",t.linearGradient,c)||a("repeating-linear-gradient",t.repeatingLinearGradient,c)||a("radial-gradient",t.radialGradient,f)||a("repeating-radial-gradient",t.repeatingRadialGradient,f)||a("conic-gradient",t.conicGradient,f)}function a(B,F,G){return s(F,function(X){var q=G();return q&&(I(t.comma)||n("Missing comma before color stops")),{type:B,orientation:q,colorStops:O(E)}})}function s(B,F){var G=I(B);if(G){I(t.startCall)||n("Missing (");var X=F(G);return I(t.endCall)||n("Missing )"),X}}function c(){return l()||u()}function l(){return R("directional",t.sideOrCorner,1)}function u(){return R("angular",t.angleValue,1)}function f(){var B,F=d(),G;return F&&(B=[],B.push(F),G=e,I(t.comma)&&(F=d(),F?B.push(F):e=G)),B}function d(){var B=h()||p();if(B)B.at=y();else{var F=v();if(F){B=F;var G=y();G&&(B.at=G)}else{var X=m();X&&(B={type:"default-radial",at:X})}}return B}function h(){var B=R("shape",/^(circle)/i,0);return B&&(B.style=k()||v()),B}function p(){var B=R("shape",/^(ellipse)/i,0);return B&&(B.style=C()||v()),B}function v(){return R("extent-keyword",t.extentKeywords,1)}function y(){if(R("position",/^at/,0)){var B=m();return B||n("Missing positioning value"),B}}function m(){var B=b();if(B.x||B.y)return{type:"position",value:B}}function b(){return{x:C(),y:C()}}function O(B){var F=B(),G=[];if(F)for(G.push(F);I(t.comma);)F=B(),F?G.push(F):n("One extra comma");return G}function E(){var B=w();return B||n("Expected color definition"),B.length=C(),B}function w(){return S()||T()||M()||_()}function _(){return R("literal",t.literalColor,0)}function S(){return R("hex",t.hexColor,1)}function M(){return s(t.rgbColor,function(){return{type:"rgb",value:O(A)}})}function T(){return s(t.rgbaColor,function(){return{type:"rgba",value:O(A)}})}function A(){return I(t.number)[1]}function C(){return R("%",t.percentageValue,1)||N()||k()}function N(){return R("position-keyword",t.positionKeywords,1)}function k(){return R("px",t.pixelValue,1)||R("em",t.emValue,1)}function R(B,F,G){var X=I(F);if(X)return{type:B,value:X[G]}}function I(B){var F=/^[\n\r\t\s]+/.exec(e);F&&D(F[0].length);var G=B.exec(e);return G&&D(G[0].length),G}function D(B){e=e.substring(B)}return function(B){return e=B,r()}}();function d0t(t,e,n,r){var i=Mr(r.value),o=0,a=0,s=o+e/2,c=a+n/2,l=Math.abs(e*Math.cos(i))+Math.abs(n*Math.sin(i)),u=t[0]+s-Math.cos(i)*l/2,f=t[1]+c-Math.sin(i)*l/2,d=t[0]+s+Math.cos(i)*l/2,h=t[1]+c+Math.sin(i)*l/2;return{x1:u,y1:f,x2:d,y2:h}}function h0t(t,e,n,r,i,o){var a=r.value,s=i.value;r.unit===Zt.kPercentage&&(a=r.value/100*e),i.unit===Zt.kPercentage&&(s=i.value/100*n);var c=Math.max(distanceSquareRoot([0,0],[a,s]),distanceSquareRoot([0,n],[a,s]),distanceSquareRoot([e,n],[a,s]),distanceSquareRoot([e,0],[a,s]));return o&&(o instanceof fr?c=o.value:o instanceof Aa&&(o.value==="closest-side"?c=Math.min(a,e-a,s,n-s):o.value==="farthest-side"?c=Math.max(a,e-a,s,n-s):o.value==="closest-corner"&&(c=Math.min(distanceSquareRoot([0,0],[a,s]),distanceSquareRoot([0,n],[a,s]),distanceSquareRoot([e,n],[a,s]),distanceSquareRoot([e,0],[a,s]))))),{x:a+t[0],y:s+t[1],r:c}}var LG=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,IG=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,DG=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,vk=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function BG(t){var e,n,r,i=t.length;t[i-1].length=(e=t[i-1].length)!==null&&e!==void 0?e:{type:"%",value:"100"},i>1&&(t[0].length=(n=t[0].length)!==null&&n!==void 0?n:{type:"%",value:"0"});for(var o=0,a=Number(t[0].length.value),s=1;s<i;s++){var c=(r=t[s].length)===null||r===void 0?void 0:r.value;if(!Lt(c)&&!Lt(a)){for(var l=1;l<s-o;l++)t[o+l].length={type:"%",value:"".concat(a+(Number(c)-a)*l/(s-o))};o=s,a=Number(c)}}}var FG={left:180,top:-90,bottom:90,right:0,"left top":225,"top left":225,"left bottom":135,"bottom left":135,"right top":-45,"top right":-45,"right bottom":45,"bottom right":45},jG=Oo(function(t){var e;return t.type==="angular"?e=Number(t.value):e=FG[t.value]||0,gr(e,"deg")}),GG=Oo(function(t){var e=50,n=50,r="%",i="%";if((t==null?void 0:t.type)==="position"){var o=t.value,a=o.x,s=o.y;(a==null?void 0:a.type)==="position-keyword"&&(a.value==="left"?e=0:a.value==="center"?e=50:a.value==="right"?e=100:a.value==="top"?n=0:a.value==="bottom"&&(n=100)),(s==null?void 0:s.type)==="position-keyword"&&(s.value==="left"?e=0:s.value==="center"?n=50:s.value==="right"?e=100:s.value==="top"?n=0:s.value==="bottom"&&(n=100)),((a==null?void 0:a.type)==="px"||(a==null?void 0:a.type)==="%"||(a==null?void 0:a.type)==="em")&&(r=a==null?void 0:a.type,e=Number(a.value)),((s==null?void 0:s.type)==="px"||(s==null?void 0:s.type)==="%"||(s==null?void 0:s.type)==="em")&&(i=s==null?void 0:s.type,n=Number(s.value))}return{cx:gr(e,r),cy:gr(n,i)}}),zG=Oo(function(t){var e;if(t.indexOf("linear")>-1||t.indexOf("radial")>-1){var n=RG(t);return n.map(function(s){var c=s.type,l=s.orientation,u=s.colorStops;BG(u);var f=u.map(function(O){return{offset:gr(Number(O.length.value),"%"),color:NG(O)}});if(c==="linear-gradient")return new C1(Nh.LinearGradient,{angle:l?jG(l):Es,steps:f});if(c==="radial-gradient"&&(l||(l=[{type:"shape",value:"circle"}]),l[0].type==="shape"&&l[0].value==="circle")){var d=GG(l[0].at),h=d.cx,p=d.cy,v=void 0;if(l[0].style){var y=l[0].style,m=y.type,b=y.value;m==="extent-keyword"?v=YO(b):v=gr(b,m)}return new C1(Nh.RadialGradient,{cx:h,cy:p,size:v,steps:f})}})}var r=t[0];if(t[1]==="("||t[2]==="("){if(r==="l"){var i=LG.exec(t);if(i){var o=((e=i[2].match(vk))===null||e===void 0?void 0:e.map(function(s){return s.split(":")}))||[];return[new C1(Nh.LinearGradient,{angle:gr(parseFloat(i[1]),"deg"),steps:o.map(function(s){var c=j(s,2),l=c[0],u=c[1];return{offset:gr(Number(l)*100,"%"),color:u}})})]}}else if(r==="r"){var a=WG(t);if(a)if(Qe(a))t=a;else return[new C1(Nh.RadialGradient,a)]}else if(r==="p")return YG(t)}});function WG(t){var e,n=IG.exec(t);if(n){var r=((e=n[4].match(vk))===null||e===void 0?void 0:e.map(function(i){return i.split(":")}))||[];return{cx:gr(50,"%"),cy:gr(50,"%"),steps:r.map(function(i){var o=j(i,2),a=o[0],s=o[1];return{offset:gr(Number(a)*100,"%"),color:s}})}}return null}function YG(t){var e=DG.exec(t);if(e){var n=e[1],r=e[2];switch(n){case"a":n="repeat";break;case"x":n="repeat-x";break;case"y":n="repeat-y";break;case"n":n="no-repeat";break;default:n="no-repeat"}return{image:r,repetition:n}}return null}function p0t(t){return!!t.type&&!!t.value}function HG(t){return t&&!!t.image}function gk(t){return t&&!Lt(t.r)&&!Lt(t.g)&&!Lt(t.b)}var Ih=Oo(function(t){if(HG(t))return nt({repetition:"repeat"},t);if(Lt(t)&&(t=""),t==="transparent")return hk;if(t==="currentColor")t="black";else if(t==="none")return k1;var e=zG(t);if(e)return e;var n=wl(t),r=[0,0,0,0];return n!==null&&(r[0]=n.r||0,r[1]=n.g||0,r[2]=n.b||0,r[3]=n.opacity),kG.apply(void 0,ut([],j(r),!1))});function UG(t,e){if(!(!gk(t)||!gk(e)))return[[Number(t.r),Number(t.g),Number(t.b),Number(t.alpha)],[Number(e.r),Number(e.g),Number(e.b),Number(e.alpha)],function(n){var r=n.slice();if(r[3])for(var i=0;i<3;i++)r[i]=Math.round(Nn(r[i],0,255));return r[3]=Nn(r[3],0,1),"rgba(".concat(r.join(","),")")}]}function _0(t,e){if(Lt(e))return gr(0,"px");if(e="".concat(e).trim().toLowerCase(),isFinite(Number(e))){if("px".search(t)>=0)return gr(Number(e),"px");if("deg".search(t)>=0)return gr(Number(e),"deg")}var n=[];e=e.replace(t,function(i){return n.push(i),"U"+i});var r="U("+t.source+")";return n.map(function(i){return gr(Number(e.replace(new RegExp("U"+i,"g"),"").replace(new RegExp(r,"g"),"*0")),i)})[0]}var yk=function(t){return _0(new RegExp("px","g"),t)},VG=Oo(yk),XG=function(t){return _0(new RegExp("%","g"),t)};Oo(XG);var w0=function(t){return Je(t)||isFinite(Number(t))?gr(Number(t)||0,"px"):_0(new RegExp("px|%|em|rem","g"),t)},Dh=Oo(w0),UO=function(t){return _0(new RegExp("deg|rad|grad|turn","g"),t)},mk=Oo(UO);function $G(t,e,n,r,i){i===void 0&&(i=0);var o="",a=t.value||0,s=e.value||0,c=GO(t.unit),l=t.convertTo(c),u=e.convertTo(c);return l&&u?(a=l.value,s=u.value,o=FO(t.unit)):(fr.isLength(t.unit)||fr.isLength(e.unit))&&(a=as(t,i,n),s=as(e,i,n),o="px"),[a,s,function(f){return r&&(f=Math.max(f,0)),f+o}]}function Ca(t){var e=0;return t.unit===Zt.kDegrees?e=t.value:t.unit===Zt.kRadians?e=Os(Number(t.value)):t.unit===Zt.kTurns&&(e=aG(Number(t.value))),e}function xk(t,e){var n;return Array.isArray(t)?n=t.map(function(r){return Number(r)}):Qe(t)?n=t.split(" ").map(function(r){return Number(r)}):Je(t)&&(n=[t]),e===2?n.length===1?[n[0],n[0]]:[n[0],n[1]]:n.length===1?[n[0],n[0],n[0],n[0]]:n.length===2?[n[0],n[1],n[0],n[1]]:n.length===3?[n[0],n[1],n[2],n[1]]:[n[0],n[1],n[2],n[3]]}function bk(t){return Qe(t)?t.split(" ").map(function(e){return Dh(e)}):t.map(function(e){return Dh(e.toString())})}function as(t,e,n,r){if(r===void 0&&(r=!1),t.unit===Zt.kPixels)return Number(t.value);if(t.unit===Zt.kPercentage&&n){var i=n.nodeName===ge.GROUP?n.getLocalBounds():n.getGeometryBounds();return(r?i.min[e]:0)+t.value/100*i.halfExtents[e]*2}return 0}var qG=function(t){return _0(/deg|rad|grad|turn|px|%/g,t)},KG=["blur","brightness","drop-shadow","contrast","grayscale","sepia","saturate","hue-rotate","invert"];function _k(t){if(t===void 0&&(t=""),t=t.toLowerCase().trim(),t==="none")return[];for(var e=/\s*([\w-]+)\(([^)]*)\)/g,n=[],r,i=0;r=e.exec(t);){if(r.index!==i)return[];if(i=r.index+r[0].length,KG.indexOf(r[1])>-1&&n.push({name:r[1],params:r[2].split(" ").map(function(o){return qG(o)||Ih(o)})}),e.lastIndex===t.length)return n}return[]}function wk(t){return t.toString()}var Bh=function(t){return typeof t=="number"?gr(t):/^\s*[-+]?(\d*\.)?\d+\s*$/.test(t)?gr(Number(t)):gr(0)},Ff=Oo(Bh);Oo(function(t){return Qe(t)?t.split(" ").map(Ff):t.map(Ff)});function VO(t,e){return[t,e,wk]}function XO(t,e){return function(n,r){return[n,r,function(i){return wk(Nn(i,t,e))}]}}function Ok(t,e){if(t.length===e.length)return[t,e,function(n){return n}]}function Ek(t){return t.parsedStyle.d.totalLength===0&&(t.parsedStyle.d.totalLength=Zd(t.parsedStyle.d.absolutePath)),t.parsedStyle.d.totalLength}function ZG(t){return t.parsedStyle.points.totalLength===0&&(t.parsedStyle.points.totalLength=Ui(t.parsedStyle.points.points)),t.parsedStyle.points.totalLength}function JG(t){for(var e=0;e<t.length;e++){var n=t[e-1],r=t[e],i=r[0];if(i==="M"&&n){var o=n[0],a=[r[1],r[2]],s=void 0;o==="L"||o==="M"?s=[n[1],n[2]]:(o==="C"||o==="A"||o==="Q")&&(s=[n[n.length-2],n[n.length-1]]),s&&N1(a,s)&&(t.splice(e,1),e--)}}}function QG(t){for(var e=!1,n=t.length,r=0;r<n;r++){var i=t[r],o=i[0];if(o==="C"||o==="A"||o==="Q"){e=!0;break}}return e}function tz(t){for(var e=[],n=[],r=[],i=0;i<t.length;i++){var o=t[i],a=o[0];a==="M"?(r.length&&(n.push(r),r=[]),r.push([o[1],o[2]])):a==="Z"?r.length&&(e.push(r),r=[]):r.push([o[1],o[2]])}return r.length>0&&n.push(r),{polygons:e,polylines:n}}function N1(t,e){return t[0]===e[0]&&t[1]===e[1]}function ez(t,e){for(var n=[],r=[],i=[],o=0;o<t.length;o++){var a=t[o],s=a.currentPoint,c=a.params,l=a.prePoint,u=void 0;switch(a.command){case"Q":u=uh(l[0],l[1],c[1],c[2],c[3],c[4]);break;case"C":u=Sf(l[0],l[1],c[1],c[2],c[3],c[4],c[5],c[6]);break;case"A":var f=a.arcParams;u=oh(f.cx,f.cy,f.rx,f.ry,f.xRotation,f.startAngle,f.endAngle);break;default:n.push(s[0]),r.push(s[1]);break}u&&(a.box=u,n.push(u.x,u.x+u.width),r.push(u.y,u.y+u.height)),e&&(a.command==="L"||a.command==="M")&&a.prePoint&&a.nextPoint&&i.push(a)}n=n.filter(function(m){return!Number.isNaN(m)&&m!==1/0&&m!==-1/0}),r=r.filter(function(m){return!Number.isNaN(m)&&m!==1/0&&m!==-1/0});var d=Ac(n),h=Ac(r),p=Cc(n),v=Cc(r);if(i.length===0)return{x:d,y:h,width:p-d,height:v-h};for(var o=0;o<i.length;o++){var a=i[o],s=a.currentPoint,y=void 0;s[0]===d?(y=R1(a,e),d=d-y.xExtra):s[0]===p&&(y=R1(a,e),p=p+y.xExtra),s[1]===h?(y=R1(a,e),h=h-y.yExtra):s[1]===v&&(y=R1(a,e),v=v+y.yExtra)}return{x:d,y:h,width:p-d,height:v-h}}function R1(t,e){var n=t.prePoint,r=t.currentPoint,i=t.nextPoint,o=Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2),a=Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2),s=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),c=Math.acos((o+a-s)/(2*Math.sqrt(o)*Math.sqrt(a)));if(!c||Math.sin(c)===0||qs(c,0))return{xExtra:0,yExtra:0};var l=Math.abs(Math.atan2(i[1]-r[1],i[0]-r[0])),u=Math.abs(Math.atan2(i[0]-r[0],i[1]-r[1]));l=l>Math.PI/2?Math.PI-l:l,u=u>Math.PI/2?Math.PI-u:u;var f={xExtra:Math.cos(c/2-l)*(e/2*(1/Math.sin(c/2)))-e/2||0,yExtra:Math.cos(u-c/2)*(e/2*(1/Math.sin(c/2)))-e/2||0};return f}function Sk(t,e){return[e[0]+(e[0]-t[0]),e[1]+(e[1]-t[1])]}var Mk=function(t,e){var n=t.x*e.x+t.y*e.y,r=Math.sqrt((Math.pow(t.x,2)+Math.pow(t.y,2))*(Math.pow(e.x,2)+Math.pow(e.y,2))),i=t.x*e.y-t.y*e.x<0?-1:1,o=i*Math.acos(n/r);return o},Pk=function(t,e,n,r,i,o,a,s){e=Math.abs(e),n=Math.abs(n),r=kc(r,360);var c=Mr(r);if(t.x===a.x&&t.y===a.y)return{x:t.x,y:t.y,ellipticalArcAngle:0};if(e===0||n===0)return{x:0,y:0,ellipticalArcAngle:0};var l=(t.x-a.x)/2,u=(t.y-a.y)/2,f={x:Math.cos(c)*l+Math.sin(c)*u,y:-Math.sin(c)*l+Math.cos(c)*u},d=Math.pow(f.x,2)/Math.pow(e,2)+Math.pow(f.y,2)/Math.pow(n,2);d>1&&(e=Math.sqrt(d)*e,n=Math.sqrt(d)*n);var h=Math.pow(e,2)*Math.pow(n,2)-Math.pow(e,2)*Math.pow(f.y,2)-Math.pow(n,2)*Math.pow(f.x,2),p=Math.pow(e,2)*Math.pow(f.y,2)+Math.pow(n,2)*Math.pow(f.x,2),v=h/p;v=v<0?0:v;var y=(i!==o?1:-1)*Math.sqrt(v),m={x:y*(e*f.y/n),y:y*(-(n*f.x)/e)},b={x:Math.cos(c)*m.x-Math.sin(c)*m.y+(t.x+a.x)/2,y:Math.sin(c)*m.x+Math.cos(c)*m.y+(t.y+a.y)/2},O={x:(f.x-m.x)/e,y:(f.y-m.y)/n},E=Mk({x:1,y:0},O),w={x:(-f.x-m.x)/e,y:(-f.y-m.y)/n},_=Mk(O,w);!o&&_>0?_-=2*Math.PI:o&&_<0&&(_+=2*Math.PI),_%=2*Math.PI;var S=E+_*s,M=e*Math.cos(S),T=n*Math.sin(S),A={x:Math.cos(c)*M-Math.sin(c)*T+b.x,y:Math.sin(c)*M+Math.cos(c)*T+b.y,ellipticalArcStartAngle:E,ellipticalArcEndAngle:E+_,ellipticalArcAngle:S,ellipticalArcCenter:b,resultantRx:e,resultantRy:n};return A};function nz(t){for(var e=[],n=null,r=null,i=null,o=0,a=t.length,s=0;s<a;s++){var c=t[s];r=t[s+1];var l=c[0],u={command:l,prePoint:n,params:c,startTangent:null,endTangent:null,currentPoint:null,nextPoint:null,arcParams:null,box:null,cubicParams:null};switch(l){case"M":i=[c[1],c[2]],o=s;break;case"A":var f=rz(n,c);u.arcParams=f;break}if(l==="Z")n=i,r=t[o+1];else{var d=c.length;n=[c[d-2],c[d-1]]}r&&r[0]==="Z"&&(r=t[o],e[o]&&(e[o].prePoint=n)),u.currentPoint=n,e[o]&&N1(n,e[o].currentPoint)&&(e[o].prePoint=u.prePoint);var h=r?[r[r.length-2],r[r.length-1]]:null;u.nextPoint=h;var p=u.prePoint;if(["L","H","V"].includes(l))u.startTangent=[p[0]-n[0],p[1]-n[1]],u.endTangent=[n[0]-p[0],n[1]-p[1]];else if(l==="Q"){var v=[c[1],c[2]];u.startTangent=[p[0]-v[0],p[1]-v[1]],u.endTangent=[n[0]-v[0],n[1]-v[1]]}else if(l==="T"){var y=e[s-1],v=Sk(y.currentPoint,p);y.command==="Q"?(u.command="Q",u.startTangent=[p[0]-v[0],p[1]-v[1]],u.endTangent=[n[0]-v[0],n[1]-v[1]]):(u.command="TL",u.startTangent=[p[0]-n[0],p[1]-n[1]],u.endTangent=[n[0]-p[0],n[1]-p[1]])}else if(l==="C"){var m=[c[1],c[2]],b=[c[3],c[4]];u.startTangent=[p[0]-m[0],p[1]-m[1]],u.endTangent=[n[0]-b[0],n[1]-b[1]],u.startTangent[0]===0&&u.startTangent[1]===0&&(u.startTangent=[m[0]-b[0],m[1]-b[1]]),u.endTangent[0]===0&&u.endTangent[1]===0&&(u.endTangent=[b[0]-m[0],b[1]-m[1]])}else if(l==="S"){var y=e[s-1],m=Sk(y.currentPoint,p),b=[c[1],c[2]];y.command==="C"?(u.command="C",u.startTangent=[p[0]-m[0],p[1]-m[1]],u.endTangent=[n[0]-b[0],n[1]-b[1]]):(u.command="SQ",u.startTangent=[p[0]-b[0],p[1]-b[1]],u.endTangent=[n[0]-b[0],n[1]-b[1]])}else if(l==="A"){var O=Tk(u,0),E=O.x,w=O.y,_=Tk(u,1,!1),S=_.x,M=_.y;u.startTangent=[E,w],u.endTangent=[S,M]}e.push(u)}return e}function Tk(t,e,n){n===void 0&&(n=!0);var r=t.arcParams,i=r.rx,o=i===void 0?0:i,a=r.ry,s=a===void 0?0:a,c=r.xRotation,l=r.arcFlag,u=r.sweepFlag,f=Pk({x:t.prePoint[0],y:t.prePoint[1]},o,s,c,!!l,!!u,{x:t.currentPoint[0],y:t.currentPoint[1]},e),d=Pk({x:t.prePoint[0],y:t.prePoint[1]},o,s,c,!!l,!!u,{x:t.currentPoint[0],y:t.currentPoint[1]},n?e+.005:e-.005),h=d.x-f.x,p=d.y-f.y,v=Math.sqrt(h*h+p*p);return{x:-h/v,y:-p/v}}function L1(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function $O(t,e){return L1(t)*L1(e)?(t[0]*e[0]+t[1]*e[1])/(L1(t)*L1(e)):1}function Ak(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos($O(t,e))}function rz(t,e){var n=e[1],r=e[2],i=kc(Mr(e[3]),Math.PI*2),o=e[4],a=e[5],s=t[0],c=t[1],l=e[6],u=e[7],f=Math.cos(i)*(s-l)/2+Math.sin(i)*(c-u)/2,d=-1*Math.sin(i)*(s-l)/2+Math.cos(i)*(c-u)/2,h=f*f/(n*n)+d*d/(r*r);h>1&&(n*=Math.sqrt(h),r*=Math.sqrt(h));var p=n*n*(d*d)+r*r*(f*f),v=p?Math.sqrt((n*n*(r*r)-p)/p):1;o===a&&(v*=-1),isNaN(v)&&(v=0);var y=r?v*n*d/r:0,m=n?v*-r*f/n:0,b=(s+l)/2+Math.cos(i)*y-Math.sin(i)*m,O=(c+u)/2+Math.sin(i)*y+Math.cos(i)*m,E=[(f-y)/n,(d-m)/r],w=[(-1*f-y)/n,(-1*d-m)/r],_=Ak([1,0],E),S=Ak(E,w);return $O(E,w)<=-1&&(S=Math.PI),$O(E,w)>=1&&(S=0),a===0&&S>0&&(S=S-2*Math.PI),a===1&&S<0&&(S=S+2*Math.PI),{cx:b,cy:O,rx:N1(t,[l,u])?0:n,ry:N1(t,[l,u])?0:r,startAngle:_,endAngle:_+S,xRotation:i,arcFlag:o,sweepFlag:a}}function iz(t,e,n){return t.reduce(function(r,i){var o="";if(i[0]==="M"||i[0]==="L"){var a=vec3.fromValues(i[1],i[2],0);n&&vec3.transformMat4(a,a,n),o="".concat(i[0]).concat(a[0],",").concat(a[1])}else if(i[0]==="Z")o=i[0];else if(i[0]==="C"){var s=vec3.fromValues(i[1],i[2],0),c=vec3.fromValues(i[3],i[4],0),l=vec3.fromValues(i[5],i[6],0);n&&(vec3.transformMat4(s,s,n),vec3.transformMat4(c,c,n),vec3.transformMat4(l,l,n)),o="".concat(i[0]).concat(s[0],",").concat(s[1],",").concat(c[0],",").concat(c[1],",").concat(l[0],",").concat(l[1])}else if(i[0]==="A"){var u=vec3.fromValues(i[6],i[7],0);n&&vec3.transformMat4(u,u,n),o="".concat(i[0]).concat(i[1],",").concat(i[2],",").concat(i[3],",").concat(i[4],",").concat(i[5],",").concat(u[0],",").concat(u[1])}else if(i[0]==="Q"){var s=vec3.fromValues(i[1],i[2],0),c=vec3.fromValues(i[3],i[4],0);n&&(vec3.transformMat4(s,s,n),vec3.transformMat4(c,c,n)),o="".concat(i[0]).concat(i[1],",").concat(i[2],",").concat(i[3],",").concat(i[4],"}")}return r+=o},"")}function oz(t,e,n,r){return[["M",t,e],["L",n,r]]}function Ck(t,e,n,r){var i=(-1+Math.sqrt(2))/3*4,o=t*i,a=e*i,s=n-t,c=n+t,l=r-e,u=r+e;return[["M",s,r],["C",s,r-a,n-o,l,n,l],["C",n+o,l,c,r-a,c,r],["C",c,r+a,n+o,u,n,u],["C",n-o,u,s,r+a,s,r],["Z"]]}function az(t,e){var n=t.map(function(r,i){return[i===0?"M":"L",r[0],r[1]]});return e&&n.push(["Z"]),n}function sz(t,e,n,r,i){if(i){var o=__read(i,4),a=o[0],s=o[1],c=o[2],l=o[3],u=t>0?1:-1,f=e>0?1:-1,d=u+f!==0?1:0;return[["M",u*a+n,r],["L",t-u*s+n,r],s?["A",s,s,0,0,d,t+n,f*s+r]:null,["L",t+n,e-f*c+r],c?["A",c,c,0,0,d,t+n-u*c,e+r]:null,["L",n+u*l,e+r],l?["A",l,l,0,0,d,n,e+r-f*l]:null,["L",n,f*a+r],a?["A",a,a,0,0,d,u*a+n,r]:null,["Z"]].filter(function(h){return h})}return[["M",n,r],["L",n+t,r],["L",n+t,r+e],["L",n,r+e],["Z"]]}function v0t(t,e){e===void 0&&(e=t.getLocalTransform());var n=[];switch(t.nodeName){case ge.LINE:var r=t.parsedStyle,i=r.x1,o=i===void 0?0:i,a=r.y1,s=a===void 0?0:a,c=r.x2,l=c===void 0?0:c,u=r.y2,f=u===void 0?0:u;n=oz(o,s,l,f);break;case ge.CIRCLE:{var d=t.parsedStyle,h=d.r,p=h===void 0?0:h,v=d.cx,y=v===void 0?0:v,m=d.cy,b=m===void 0?0:m;n=Ck(p,p,y,b);break}case ge.ELLIPSE:{var O=t.parsedStyle,E=O.rx,w=E===void 0?0:E,_=O.ry,S=_===void 0?0:_,M=O.cx,y=M===void 0?0:M,T=O.cy,b=T===void 0?0:T;n=Ck(w,S,y,b);break}case ge.POLYLINE:case ge.POLYGON:var A=t.parsedStyle.points;n=az(A.points,t.nodeName===ge.POLYGON);break;case ge.RECT:var C=t.parsedStyle,N=C.width,k=N===void 0?0:N,R=C.height,I=R===void 0?0:R,D=C.x,B=D===void 0?0:D,F=C.y,G=F===void 0?0:F,X=C.radius,q=X&&X.some(function(et){return et!==0});n=sz(k,I,B,G,q&&X.map(function(et){return clamp(et,0,Math.min(Math.abs(k)/2,Math.abs(I)/2))}));break;case ge.PATH:var J=t.parsedStyle.d.absolutePath;n=__spreadArray([],__read(J),!1);break}if(n.length)return iz(n,t,e)}function g0t(t,e,n,r,i){e===void 0&&(e=0),n===void 0&&(n=0),r===void 0&&(r=0),i===void 0&&(i=0);var o=t.map(function(a,s){var c=a[0],l=t[s+1],u=s===0&&(e!==0||n!==0),f=(s===t.length-1||l&&(l[0]==="M"||l[0]==="Z"))&&r!==0&&i!==0;switch(c){case"M":return u?"M ".concat(a[1]+e,",").concat(a[2]+n," L ").concat(a[1],",").concat(a[2]):"M ".concat(a[1],",").concat(a[2]);case"L":return"L ".concat(a[1]+(f?r:0),",").concat(a[2]+(f?i:0));case"Q":return"Q ".concat(a[1]," ").concat(a[2],",").concat(a[3]," ").concat(a[4])+(f?" L ".concat(a[3]+r,",").concat(a[4]+i):"");case"C":return"C ".concat(a[1]," ").concat(a[2],",").concat(a[3]," ").concat(a[4],",").concat(a[5]," ").concat(a[6])+(f?" L ".concat(a[5]+r,",").concat(a[6]+i):"");case"A":return"A ".concat(a[1]," ").concat(a[2]," ").concat(a[3]," ").concat(a[4]," ").concat(a[5]," ").concat(a[6]," ").concat(a[7])+(f?" L ".concat(a[6]+r,",").concat(a[7]+i):"");case"Z":return"Z"}}).join(" ");return~o.indexOf("NaN")?"":o}var kk=function(t){if(t===""||Array.isArray(t)&&t.length===0)return{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:{x:0,y:0,width:0,height:0}};var e;try{e=Tc(t)}catch(d){e=Tc(""),console.error("[g]: Invalid SVG Path definition: ".concat(t))}JG(e);var n=QG(e),r=tz(e),i=r.polygons,o=r.polylines,a=nz(e),s=ez(a,0),c=s.x,l=s.y,u=s.width,f=s.height;return{absolutePath:e,hasArc:n,segments:a,polygons:i,polylines:o,totalLength:0,rect:{x:Number.isFinite(c)?c:0,y:Number.isFinite(l)?l:0,width:Number.isFinite(u)?u:0,height:Number.isFinite(f)?f:0}}},cz=Oo(kk);function qO(t){return Qe(t)?cz(t):kk(t)}function lz(t,e,n){var r=t.curve,i=e.curve;(!r||r.length===0)&&(r=bl(t.absolutePath,!1),t.curve=r),(!i||i.length===0)&&(i=bl(e.absolutePath,!1),e.curve=i);var o=[r,i];r.length!==i.length&&(o=gu(r,i));var a=yu(o[0])!==yu(o[1])?mf(o[0]):on(o[0]);return[a,xv(o[1],a),function(s){return s}]}function Nk(t,e){var n;return Qe(t)?n=t.split(" ").map(function(r){var i=j(r.split(","),2),o=i[0],a=i[1];return[Number(o),Number(a)]}):n=t,{points:n,totalLength:0,segments:[]}}function uz(t,e){return[t.points,e.points,function(n){return n}]}var ai=null;function ka(t){return function(e){var n=0;return t.map(function(r){return r===ai?e[n++]:r})}}function jf(t){return t}var I1={matrix:["NNNNNN",[ai,ai,0,0,ai,ai,0,0,0,0,1,0,ai,ai,0,1],jf],matrix3d:["NNNNNNNNNNNNNNNN",jf],rotate:["A"],rotatex:["A"],rotatey:["A"],rotatez:["A"],rotate3d:["NNNA"],perspective:["L"],scale:["Nn",ka([ai,ai,new fr(1)]),jf],scalex:["N",ka([ai,new fr(1),new fr(1)]),ka([ai,new fr(1)])],scaley:["N",ka([new fr(1),ai,new fr(1)]),ka([new fr(1),ai])],scalez:["N",ka([new fr(1),new fr(1),ai])],scale3d:["NNN",jf],skew:["Aa",null,jf],skewx:["A",null,ka([ai,Es])],skewy:["A",null,ka([Es,ai])],translate:["Tt",ka([ai,ai,pi]),jf],translatex:["T",ka([ai,pi,pi]),ka([ai,pi])],translatey:["T",ka([pi,ai,pi]),ka([pi,ai])],translatez:["L",ka([pi,pi,ai])],translate3d:["TTL",jf]};function Rk(t){if(t=(t||"none").toLowerCase().trim(),t==="none")return[];for(var e=/\s*(\w+)\(([^)]*)\)/g,n=[],r,i=0;r=e.exec(t);){if(r.index!==i)return[];i=r.index+r[0].length;var o=r[1],a=I1[o];if(!a)return[];var s=r[2].split(","),c=a[0];if(c.length<s.length)return[];for(var l=[],u=0;u<c.length;u++){var f=s[u],d=c[u],h=void 0;if(f?h={A:function(p){return p.trim()==="0"?Es:mk(p)},N:Ff,T:Dh,L:VG}[d.toUpperCase()](f):h={a:Es,n:l[0],t:pi}[d],h===void 0)return[];l.push(h)}if(n.push({t:o,d:l}),e.lastIndex===t.length)return n}return[]}function Lk(t){if(t=(t||"none").toLowerCase().trim(),t==="none")return[];for(var e=/\s*(\w+)\(([^)]*)\)/g,n=[],r,i=0;r=e.exec(t);){if(r.index!==i)return[];i=r.index+r[0].length;var o=r[1],a=I1[o];if(!a)return[];var s=r[2].split(","),c=a[0];if(c.length<s.length)return[];for(var l=[],u=0;u<c.length;u++){var f=s[u],d=c[u],h=void 0;if(f?h={A:function(p){return p.trim()==="0"?Es:UO(p)},N:Bh,T:w0,L:yk}[d.toUpperCase()](f):h={a:Es,n:l[0],t:pi}[d],h===void 0)return[];l.push(h)}if(n.push({t:o,d:l}),e.lastIndex===t.length)return n}return[]}function fz(t){var e,n,r,i;switch(t.t){case"rotatex":return i=Mr(Ca(t.d[0])),[1,0,0,0,0,Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1];case"rotatey":return i=Mr(Ca(t.d[0])),[Math.cos(i),0,-Math.sin(i),0,0,1,0,0,Math.sin(i),0,Math.cos(i),0,0,0,0,1];case"rotate":case"rotatez":return i=Mr(Ca(t.d[0])),[Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1,0,0,0,0,1];case"rotate3d":e=t.d[0].value,n=t.d[1].value,r=t.d[2].value,i=Mr(Ca(t.d[3]));var o=e*e+n*n+r*r;if(o===0)e=1,n=0,r=0;else if(o!==1){var a=Math.sqrt(o);e/=a,n/=a,r/=a}var s=Math.sin(i/2),c=s*Math.cos(i/2),l=s*s;return[1-2*(n*n+r*r)*l,2*(e*n*l+r*c),2*(e*r*l-n*c),0,2*(e*n*l-r*c),1-2*(e*e+r*r)*l,2*(n*r*l+e*c),0,2*(e*r*l+n*c),2*(n*r*l-e*c),1-2*(e*e+n*n)*l,0,0,0,0,1];case"scale":return[t.d[0].value,0,0,0,0,t.d[1].value,0,0,0,0,1,0,0,0,0,1];case"scalex":return[t.d[0].value,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"scaley":return[1,0,0,0,0,t.d[0].value,0,0,0,0,1,0,0,0,0,1];case"scalez":return[1,0,0,0,0,1,0,0,0,0,t.d[0].value,0,0,0,0,1];case"scale3d":return[t.d[0].value,0,0,0,0,t.d[1].value,0,0,0,0,t.d[2].value,0,0,0,0,1];case"skew":var u=Mr(Ca(t.d[0])),f=Mr(Ca(t.d[1]));return[1,Math.tan(f),0,0,Math.tan(u),1,0,0,0,0,1,0,0,0,0,1];case"skewx":return i=Mr(Ca(t.d[0])),[1,0,0,0,Math.tan(i),1,0,0,0,0,1,0,0,0,0,1];case"skewy":return i=Mr(Ca(t.d[0])),[1,Math.tan(i),0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"translate":return e=as(t.d[0],0,null)||0,n=as(t.d[1],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,e,n,0,1];case"translatex":return e=as(t.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,e,0,0,1];case"translatey":return n=as(t.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,n,0,1];case"translatez":return r=as(t.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,r,1];case"translate3d":return e=as(t.d[0],0,null)||0,n=as(t.d[1],0,null)||0,r=as(t.d[2],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,e,n,r,1];case"perspective":var d=as(t.d[0],0,null)||0,h=d?-1/d:0;return[1,0,0,0,0,1,0,0,0,0,1,h,0,0,0,1];case"matrix":return[t.d[0].value,t.d[1].value,0,0,t.d[2].value,t.d[3].value,0,0,0,0,1,0,t.d[4].value,t.d[5].value,0,1];case"matrix3d":return t.d.map(function(p){return p.value})}}function dz(t,e){return[t[0]*e[0]+t[4]*e[1]+t[8]*e[2]+t[12]*e[3],t[1]*e[0]+t[5]*e[1]+t[9]*e[2]+t[13]*e[3],t[2]*e[0]+t[6]*e[1]+t[10]*e[2]+t[14]*e[3],t[3]*e[0]+t[7]*e[1]+t[11]*e[2]+t[15]*e[3],t[0]*e[4]+t[4]*e[5]+t[8]*e[6]+t[12]*e[7],t[1]*e[4]+t[5]*e[5]+t[9]*e[6]+t[13]*e[7],t[2]*e[4]+t[6]*e[5]+t[10]*e[6]+t[14]*e[7],t[3]*e[4]+t[7]*e[5]+t[11]*e[6]+t[15]*e[7],t[0]*e[8]+t[4]*e[9]+t[8]*e[10]+t[12]*e[11],t[1]*e[8]+t[5]*e[9]+t[9]*e[10]+t[13]*e[11],t[2]*e[8]+t[6]*e[9]+t[10]*e[10]+t[14]*e[11],t[3]*e[8]+t[7]*e[9]+t[11]*e[10]+t[15]*e[11],t[0]*e[12]+t[4]*e[13]+t[8]*e[14]+t[12]*e[15],t[1]*e[12]+t[5]*e[13]+t[9]*e[14]+t[13]*e[15],t[2]*e[12]+t[6]*e[13]+t[10]*e[14]+t[14]*e[15],t[3]*e[12]+t[7]*e[13]+t[11]*e[14]+t[15]*e[15]]}function hz(t){return t.length===0?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:t.map(fz).reduce(dz)}function Ik(t){var e=[0,0,0],n=[1,1,1],r=[0,0,0],i=[0,0,0,1],o=[0,0,0,1];return fG(hz(t),e,n,r,i,o),[[e,n,r,o,i]]}var pz=function(){function t(r,i){for(var o=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],a=0;a<4;a++)for(var s=0;s<4;s++)for(var c=0;c<4;c++)o[a][s]+=i[a][c]*r[c][s];return o}function e(r){return r[0][2]==0&&r[0][3]==0&&r[1][2]==0&&r[1][3]==0&&r[2][0]==0&&r[2][1]==0&&r[2][2]==1&&r[2][3]==0&&r[3][2]==0&&r[3][3]==1}function n(r,i,o,a,s){for(var c=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],l=0;l<4;l++)c[l][3]=s[l];for(var l=0;l<3;l++)for(var u=0;u<3;u++)c[3][l]+=r[u]*c[u][l];var f=a[0],d=a[1],h=a[2],p=a[3],v=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];v[0][0]=1-2*(d*d+h*h),v[0][1]=2*(f*d-h*p),v[0][2]=2*(f*h+d*p),v[1][0]=2*(f*d+h*p),v[1][1]=1-2*(f*f+h*h),v[1][2]=2*(d*h-f*p),v[2][0]=2*(f*h-d*p),v[2][1]=2*(d*h+f*p),v[2][2]=1-2*(f*f+d*d),c=t(c,v);var y=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];o[2]&&(y[2][1]=o[2],c=t(c,y)),o[1]&&(y[2][1]=0,y[2][0]=o[0],c=t(c,y)),o[0]&&(y[2][0]=0,y[1][0]=o[0],c=t(c,y));for(var l=0;l<3;l++)for(var u=0;u<3;u++)c[l][u]*=i[l];return e(c)?[c[0][0],c[0][1],c[1][0],c[1][1],c[3][0],c[3][1]]:c[0].concat(c[1],c[2],c[3])}return n}();function vz(t){return t.toFixed(6).replace(".000000","")}function KO(t,e){var n,r;return t.decompositionPair!==e&&(t.decompositionPair=e,n=Ik(t)),e.decompositionPair!==t&&(e.decompositionPair=t,r=Ik(e)),n[0]===null||r[0]===null?[[!1],[!0],function(i){return i?e[0].d:t[0].d}]:(n[0].push(0),r[0].push(1),[n,r,function(i){var o=yz(n[0][3],r[0][3],i[5]),a=pz(i[0],i[1],i[2],o,i[4]),s=a.map(vz).join(",");return s}])}function gz(t,e){for(var n=0,r=0;r<t.length;r++)n+=t[r]*e[r];return n}function yz(t,e,n){var r=gz(t,e);r=Nn(r,-1,1);var i=[];if(r===1)i=t;else for(var o=Math.acos(r),a=Math.sin(n*o)*1/Math.sqrt(1-r*r),s=0;s<4;s++)i.push(t[s]*(Math.cos(n*o)-r*a)+e[s]*a);return i}function ZO(t){return t.replace(/[xy]/,"")}function JO(t){return t.replace(/(x|y|z|3d)?$/,"3d")}var mz=function(t,e){return t==="perspective"&&e==="perspective"||(t==="matrix"||t==="matrix3d")&&(e==="matrix"||e==="matrix3d")};function xz(t,e,n){var r=!1;if(!t.length||!e.length){t.length||(r=!0,t=e,e=[]);for(var i=function(_){var S=t[_],M=S.t,T=S.d,A=M.substring(0,5)==="scale"?1:0;e.push({t:M,d:T.map(function(C){return typeof C=="number"?gr(A):gr(A,C.unit)})})},o=0;o<t.length;o++)i(o)}var a=[],s=[],c=[];if(t.length!==e.length){var l=KO(t,e);a=[l[0]],s=[l[1]],c=[["matrix",[l[2]]]]}else for(var o=0;o<t.length;o++){var u=t[o].t,f=e[o].t,d=t[o].d,h=e[o].d,p=I1[u],v=I1[f],y=void 0;if(mz(u,f)){var l=KO([t[o]],[e[o]]);a.push(l[0]),s.push(l[1]),c.push(["matrix",[l[2]]]);continue}else if(u===f)y=u;else if(p[2]&&v[2]&&ZO(u)===ZO(f))y=ZO(u),d=p[2](d),h=v[2](h);else if(p[1]&&v[1]&&JO(u)===JO(f))y=JO(u),d=p[1](d),h=v[1](h);else{var l=KO(t,e);a=[l[0]],s=[l[1]],c=[["matrix",[l[2]]]];break}for(var m=[],b=[],O=[],E=0;E<d.length;E++){var l=$G(d[E],h[E],n,!1,E);m[E]=l[0],b[E]=l[1],O.push(l[2])}a.push(m),s.push(b),c.push([y,O])}if(r){var w=a;a=s,s=w}return[a,s,function(_){return _.map(function(S,M){var T=S.map(function(A,C){return c[M][1][C](A)}).join(",");return c[M][0]==="matrix"&&T.split(",").length===16&&(c[M][0]="matrix3d"),c[M][0]==="matrix3d"&&T.split(",").length===6&&(c[M][0]="matrix"),c[M][0]+"("+T+")"}).join(" ")}]}var Dk=Oo(function(t){if(Qe(t)){if(t==="text-anchor")return[gr(0,"px"),gr(0,"px")];var e=t.split(" ");return e.length===1&&(e[0]==="top"||e[0]==="bottom"?(e[1]=e[0],e[0]="center"):e[1]="center"),e.length!==2?null:[Dh(D1(e[0])),Dh(D1(e[1]))]}else return[gr(t[0]||0,"px"),gr(t[1]||0,"px")]}),bz=function(t){if(Qe(t)){if(t==="text-anchor")return[gr(0,"px"),gr(0,"px")];var e=t.split(" ");return e.length===1&&(e[0]==="top"||e[0]==="bottom"?(e[1]=e[0],e[0]="center"):e[1]="center"),e.length!==2?null:[w0(D1(e[0])),w0(D1(e[1]))]}else return[gr(t[0]||0,"px"),gr(t[1]||0,"px")]};function D1(t){return t==="center"?"50%":t==="left"||t==="top"?"0%":t==="right"||t==="bottom"?"100%":t}var QO=[{n:"display",k:["none"]},{n:"opacity",int:!0,inh:!0,d:"1",syntax:se.OPACITY_VALUE},{n:"fillOpacity",int:!0,inh:!0,d:"1",syntax:se.OPACITY_VALUE},{n:"strokeOpacity",int:!0,inh:!0,d:"1",syntax:se.OPACITY_VALUE},{n:"fill",int:!0,k:["none"],d:"none",syntax:se.PAINT},{n:"fillRule",k:["nonzero","evenodd"],d:"nonzero"},{n:"stroke",int:!0,k:["none"],d:"none",syntax:se.PAINT,l:!0},{n:"shadowType",k:["inner","outer","both"],d:"outer",l:!0},{n:"shadowColor",int:!0,syntax:se.COLOR},{n:"shadowOffsetX",int:!0,l:!0,d:"0",syntax:se.LENGTH_PERCENTAGE},{n:"shadowOffsetY",int:!0,l:!0,d:"0",syntax:se.LENGTH_PERCENTAGE},{n:"shadowBlur",int:!0,l:!0,d:"0",syntax:se.SHADOW_BLUR},{n:"lineWidth",int:!0,inh:!0,d:"1",l:!0,a:["strokeWidth"],syntax:se.LENGTH_PERCENTAGE},{n:"increasedLineWidthForHitTesting",inh:!0,d:"0",l:!0,syntax:se.LENGTH_PERCENTAGE},{n:"lineJoin",inh:!0,l:!0,a:["strokeLinejoin"],k:["miter","bevel","round"],d:"miter"},{n:"lineCap",inh:!0,l:!0,a:["strokeLinecap"],k:["butt","round","square"],d:"butt"},{n:"lineDash",int:!0,inh:!0,k:["none"],a:["strokeDasharray"],syntax:se.LENGTH_PERCENTAGE_12},{n:"lineDashOffset",int:!0,inh:!0,d:"0",a:["strokeDashoffset"],syntax:se.LENGTH_PERCENTAGE},{n:"offsetPath",syntax:se.DEFINED_PATH},{n:"offsetDistance",int:!0,syntax:se.OFFSET_DISTANCE},{n:"dx",int:!0,l:!0,d:"0",syntax:se.LENGTH_PERCENTAGE},{n:"dy",int:!0,l:!0,d:"0",syntax:se.LENGTH_PERCENTAGE},{n:"zIndex",ind:!0,int:!0,d:"0",k:["auto"],syntax:se.Z_INDEX},{n:"visibility",k:["visible","hidden"],ind:!0,inh:!0,int:!0,d:"visible"},{n:"pointerEvents",inh:!0,k:["none","auto","stroke","fill","painted","visible","visiblestroke","visiblefill","visiblepainted","all"],d:"auto"},{n:"filter",ind:!0,l:!0,k:["none"],d:"none",syntax:se.FILTER},{n:"clipPath",syntax:se.DEFINED_PATH},{n:"textPath",syntax:se.DEFINED_PATH},{n:"textPathSide",k:["left","right"],d:"left"},{n:"textPathStartOffset",l:!0,d:"0",syntax:se.LENGTH_PERCENTAGE},{n:"transform",p:100,int:!0,k:["none"],d:"none",syntax:se.TRANSFORM},{n:"transformOrigin",p:100,d:"0 0",l:!0,syntax:se.TRANSFORM_ORIGIN},{n:"cx",int:!0,l:!0,d:"0",syntax:se.COORDINATE},{n:"cy",int:!0,l:!0,d:"0",syntax:se.COORDINATE},{n:"cz",int:!0,l:!0,d:"0",syntax:se.COORDINATE},{n:"r",int:!0,l:!0,d:"0",syntax:se.LENGTH_PERCENTAGE},{n:"rx",int:!0,l:!0,d:"0",syntax:se.LENGTH_PERCENTAGE},{n:"ry",int:!0,l:!0,d:"0",syntax:se.LENGTH_PERCENTAGE},{n:"x",int:!0,l:!0,d:"0",syntax:se.COORDINATE},{n:"y",int:!0,l:!0,d:"0",syntax:se.COORDINATE},{n:"z",int:!0,l:!0,d:"0",syntax:se.COORDINATE},{n:"width",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:se.LENGTH_PERCENTAGE},{n:"height",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:se.LENGTH_PERCENTAGE},{n:"radius",int:!0,l:!0,d:"0",syntax:se.LENGTH_PERCENTAGE_14},{n:"x1",int:!0,l:!0,syntax:se.COORDINATE},{n:"y1",int:!0,l:!0,syntax:se.COORDINATE},{n:"z1",int:!0,l:!0,syntax:se.COORDINATE},{n:"x2",int:!0,l:!0,syntax:se.COORDINATE},{n:"y2",int:!0,l:!0,syntax:se.COORDINATE},{n:"z2",int:!0,l:!0,syntax:se.COORDINATE},{n:"d",int:!0,l:!0,d:"",syntax:se.PATH,p:50},{n:"points",int:!0,l:!0,syntax:se.LIST_OF_POINTS,p:50},{n:"text",l:!0,d:"",syntax:se.TEXT,p:50},{n:"textTransform",l:!0,inh:!0,k:["capitalize","uppercase","lowercase","none"],d:"none",syntax:se.TEXT_TRANSFORM,p:51},{n:"font",l:!0},{n:"fontSize",int:!0,inh:!0,d:"16px",l:!0,syntax:se.LENGTH_PERCENTAGE},{n:"fontFamily",l:!0,inh:!0,d:"sans-serif"},{n:"fontStyle",l:!0,inh:!0,k:["normal","italic","oblique"],d:"normal"},{n:"fontWeight",l:!0,inh:!0,k:["normal","bold","bolder","lighter"],d:"normal"},{n:"fontVariant",l:!0,inh:!0,k:["normal","small-caps"],d:"normal"},{n:"lineHeight",l:!0,syntax:se.LENGTH,int:!0,d:"0"},{n:"letterSpacing",l:!0,syntax:se.LENGTH,int:!0,d:"0"},{n:"miterLimit",l:!0,syntax:se.NUMBER,d:function(t){return t===ge.PATH||t===ge.POLYGON||t===ge.POLYLINE?"4":"10"}},{n:"wordWrap",l:!0},{n:"wordWrapWidth",l:!0},{n:"maxLines",l:!0},{n:"textOverflow",l:!0,d:"clip"},{n:"leading",l:!0},{n:"textBaseline",l:!0,inh:!0,k:["top","hanging","middle","alphabetic","ideographic","bottom"],d:"alphabetic"},{n:"textAlign",l:!0,inh:!0,k:["start","center","middle","end","left","right"],d:"start"},{n:"markerStart",syntax:se.MARKER},{n:"markerEnd",syntax:se.MARKER},{n:"markerMid",syntax:se.MARKER},{n:"markerStartOffset",syntax:se.LENGTH,l:!0,int:!0,d:"0"},{n:"markerEndOffset",syntax:se.LENGTH,l:!0,int:!0,d:"0"}],Bk=QO.filter(function(t){return!!t.l}).map(function(t){return t.n}),Gf={},Fh=new WeakMap,_z=function(t,e){var n=Fh.get(t);return!n||n.length===0?!0:n.includes(e)},wz=function(){function t(e){var n=this;this.runtime=e,QO.forEach(function(r){n.registerMetadata(r)})}return t.prototype.registerMetadata=function(e){ut([e.n],j(e.a||[]),!1).forEach(function(n){Gf[n]=e})},t.prototype.unregisterMetadata=function(e){delete Gf[e]},t.prototype.getPropertySyntax=function(e){return this.runtime.CSSPropertySyntaxFactory[e]},t.prototype.processProperties=function(e,n,r){var i=this;if(r===void 0&&(r={skipUpdateAttribute:!1,skipParse:!1,forceUpdateGeometry:!1,usedAttributes:[],memoize:!0}),this.runtime.enableCSSParsing){var u=r.skipUpdateAttribute,f=r.skipParse,d=r.forceUpdateGeometry,h=r.usedAttributes,p=r.memoize,v=d,y=Object.keys(n);y.forEach(function(m){var b;u||(e.attributes[m]=n[m]),!v&&(!((b=Gf[m])===null||b===void 0)&&b.l)&&(v=!0)}),f||y.forEach(function(m){e.computedStyle[m]=i.parseProperty(m,e.attributes[m],e,p)}),h!=null&&h.length&&(y=Array.from(new Set(y.concat(h)))),y.forEach(function(m){m in e.computedStyle&&(e.parsedStyle[m]=i.computeProperty(m,e.computedStyle[m],e,p))}),v&&(e.geometry.dirty=!0,e.renderable.boundsDirty=!0,e.renderable.renderBoundsDirty=!0,r.forceUpdateGeometry||this.runtime.sceneGraphService.dirtifyToRoot(e)),y.forEach(function(m){m in e.parsedStyle&&i.postProcessProperty(m,e,y)}),this.runtime.enableCSSParsing&&e.children.length&&y.forEach(function(m){m in e.parsedStyle&&i.isPropertyInheritable(m)&&e.children.forEach(function(b){b.internalSetAttribute(m,null,{skipUpdateAttribute:!0,skipParse:!0})})})}else{Object.assign(e.attributes,n);var o=Object.keys(n),a=e.parsedStyle.clipPath,s=e.parsedStyle.offsetPath;e.parsedStyle=Object.assign(e.parsedStyle,n);var c=!!r.forceUpdateGeometry;if(!c){for(var l=0;l<Bk.length;l++)if(Bk[l]in n){c=!0;break}}n.fill&&(e.parsedStyle.fill=Ih(n.fill)),n.stroke&&(e.parsedStyle.stroke=Ih(n.stroke)),n.shadowColor&&(e.parsedStyle.shadowColor=Ih(n.shadowColor)),n.filter&&(e.parsedStyle.filter=_k(n.filter)),Lt(n.radius)||(e.parsedStyle.radius=xk(n.radius,4)),Lt(n.lineDash)||(e.parsedStyle.lineDash=xk(n.lineDash,2)),n.points&&(e.parsedStyle.points=Nk(n.points)),n.d===""&&(e.parsedStyle.d=nt({},pk)),n.d&&(e.parsedStyle.d=qO(n.d)),n.textTransform&&this.runtime.CSSPropertySyntaxFactory["<text-transform>"].calculator(null,null,{value:n.textTransform},e,null),le(n.clipPath)||this.runtime.CSSPropertySyntaxFactory["<defined-path>"].calculator("clipPath",a,n.clipPath,e,this.runtime),n.offsetPath&&this.runtime.CSSPropertySyntaxFactory["<defined-path>"].calculator("offsetPath",s,n.offsetPath,e,this.runtime),n.transform&&(e.parsedStyle.transform=Rk(n.transform)),n.transformOrigin&&(e.parsedStyle.transformOrigin=Dk(n.transformOrigin)),n.markerStart&&(e.parsedStyle.markerStart=this.runtime.CSSPropertySyntaxFactory["<marker>"].calculator(null,n.markerStart,n.markerStart,null,null)),n.markerEnd&&(e.parsedStyle.markerEnd=this.runtime.CSSPropertySyntaxFactory["<marker>"].calculator(null,n.markerEnd,n.markerEnd,null,null)),n.markerMid&&(e.parsedStyle.markerMid=this.runtime.CSSPropertySyntaxFactory["<marker>"].calculator("",n.markerMid,n.markerMid,null,null)),Lt(n.zIndex)||this.runtime.CSSPropertySyntaxFactory["<z-index>"].postProcessor(e,o),Lt(n.offsetDistance)||this.runtime.CSSPropertySyntaxFactory["<offset-distance>"].postProcessor(e,o),n.transform&&this.runtime.CSSPropertySyntaxFactory["<transform>"].postProcessor(e,o),n.transformOrigin&&this.runtime.CSSPropertySyntaxFactory["<transform-origin>"].postProcessor(e,o),c&&(e.geometry.dirty=!0,e.renderable.boundsDirty=!0,e.renderable.renderBoundsDirty=!0,r.forceUpdateGeometry||this.runtime.sceneGraphService.dirtifyToRoot(e))}},t.prototype.parseProperty=function(e,n,r,i){var o=Gf[e],a=n;if((n===""||Lt(n))&&(n="unset"),n==="unset"||n==="initial"||n==="inherit")a=YO(n);else if(o){var s=o.k,c=o.syntax,l=c&&this.getPropertySyntax(c);s&&s.indexOf(n)>-1?a=YO(n):l&&(!i&&l.parserUnmemoize?a=l.parserUnmemoize(n,r):l.parser&&(a=l.parser(n,r)))}return a},t.prototype.computeProperty=function(e,n,r,i){var o=Gf[e],a=r.id==="g-root",s=n;if(o){var c=o.syntax,l=o.inh,u=o.d;if(n instanceof Aa){var f=n.value;if(f==="unset"&&(l&&!a?f="inherit":f="initial"),f==="initial")Lt(u)||(n=this.parseProperty(e,Rh(u)?u(r.nodeName):u,r,i));else if(f==="inherit"){var d=this.tryToResolveProperty(r,e,{inherited:!0});if(Lt(d)){this.addUnresolveProperty(r,e);return}else return d}}var h=c&&this.getPropertySyntax(c);if(h&&h.calculator){var p=r.parsedStyle[e];s=h.calculator(e,p,n,r,this.runtime)}else n instanceof Aa?s=n.value:s=n}return s},t.prototype.postProcessProperty=function(e,n,r){var i=Gf[e];if(i&&i.syntax){var o=i.syntax&&this.getPropertySyntax(i.syntax),a=o;a&&a.postProcessor&&a.postProcessor(n,r)}},t.prototype.addUnresolveProperty=function(e,n){var r=Fh.get(e);r||(Fh.set(e,[]),r=Fh.get(e)),r.indexOf(n)===-1&&r.push(n)},t.prototype.tryToResolveProperty=function(e,n,r){r===void 0&&(r={});var i=r.inherited;if(i&&e.parentElement&&_z(e.parentElement,n)){var o=e.parentElement.parsedStyle[n];return o==="unset"||o==="initial"||o==="inherit"?void 0:o}},t.prototype.recalc=function(e){var n=Fh.get(e);if(n&&n.length){var r={};n.forEach(function(i){r[i]=e.attributes[i]}),this.processProperties(e,r),Fh.delete(e)}},t.prototype.updateGeometry=function(e){var n=e.nodeName,r=this.runtime.geometryUpdaterFactory[n];if(r){var i=e.geometry;i.contentBounds||(i.contentBounds=new ca),i.renderBounds||(i.renderBounds=new ca);var o=e.parsedStyle,a=r.update(o,e),s=a.cx,c=s===void 0?0:s,l=a.cy,u=l===void 0?0:l,f=a.cz,d=f===void 0?0:f,h=a.hwidth,p=h===void 0?0:h,v=a.hheight,y=v===void 0?0:v,m=a.hdepth,b=m===void 0?0:m,O=[Math.abs(p),Math.abs(y),b],E=o,w=E.stroke,_=E.lineWidth,S=_===void 0?1:_,M=E.increasedLineWidthForHitTesting,T=M===void 0?0:M,A=E.shadowType,C=A===void 0?"outer":A,N=E.shadowColor,k=E.filter,R=k===void 0?[]:k,I=E.transformOrigin,D=[c,u,d];i.contentBounds.update(D,O);var B=n===ge.POLYLINE||n===ge.POLYGON||n===ge.PATH?Math.SQRT2:.5,F=w&&!w.isNone;if(F){var G=((S||0)+(T||0))*B;O[0]+=G,O[1]+=G}if(i.renderBounds.update(D,O),N&&C&&C!=="inner"){var X=i.renderBounds,q=X.min,J=X.max,et=o,dt=et.shadowBlur,_t=et.shadowOffsetX,Dt=et.shadowOffsetY,pt=dt||0,vt=_t||0,Qt=Dt||0,Bt=q[0]-pt+vt,Rt=J[0]+pt+vt,$t=q[1]-pt+Qt,de=J[1]+pt+Qt;q[0]=Math.min(q[0],Bt),J[0]=Math.max(J[0],Rt),q[1]=Math.min(q[1],$t),J[1]=Math.max(J[1],de),i.renderBounds.setMinMax(q,J)}R.forEach(function(De){var An=De.name,jn=De.params;if(An==="blur"){var zr=jn[0].value;i.renderBounds.update(i.renderBounds.center,T1(i.renderBounds.halfExtents,i.renderBounds.halfExtents,[zr,zr,0]))}else if(An==="drop-shadow"){var Vn=jn[0].value,Jr=jn[1].value,Gn=jn[2].value,Ti=i.renderBounds,en=Ti.min,ln=Ti.max,Ai=en[0]-Gn+Vn,Qr=ln[0]+Gn+Vn,ve=en[1]-Gn+Jr,je=ln[1]+Gn+Jr;en[0]=Math.min(en[0],Ai),ln[0]=Math.max(ln[0],Qr),en[1]=Math.min(en[1],ve),ln[1]=Math.max(ln[1],je),i.renderBounds.setMinMax(en,ln)}}),e.geometry.dirty=!1;var ye=p<0,Se=y<0,qe=(ye?-1:1)*(I?as(I[0],0,e,!0):0),Me=(Se?-1:1)*(I?as(I[1],1,e,!0):0);(qe||Me)&&e.setOrigin(qe,Me)}},t.prototype.updateSizeAttenuation=function(e,n){e.style.isSizeAttenuation?(e.style.rawLineWidth||(e.style.rawLineWidth=e.style.lineWidth),e.style.lineWidth=(e.style.rawLineWidth||1)/n,e.nodeName===ge.CIRCLE&&(e.style.rawR||(e.style.rawR=e.style.r),e.style.r=(e.style.rawR||1)/n)):(e.style.rawLineWidth&&(e.style.lineWidth=e.style.rawLineWidth,delete e.style.rawLineWidth),e.nodeName===ge.CIRCLE&&e.style.rawR&&(e.style.r=e.style.rawR,delete e.style.rawR))},t.prototype.isPropertyInheritable=function(e){var n=Gf[e];return n?n.inh:!1},t}(),Oz=function(){function t(){this.parser=mk,this.parserUnmemoize=UO,this.parserWithCSSDisabled=null,this.mixer=VO}return t.prototype.calculator=function(e,n,r,i){return Ca(r)},t}(),Ez=function(){function t(){}return t.prototype.calculator=function(e,n,r,i,o){return r instanceof Aa&&(r=null),o.sceneGraphService.updateDisplayObjectDependency(e,n,r,i),e==="clipPath"&&i.forEach(function(a){a.childNodes.length===0&&o.sceneGraphService.dirtifyToRoot(a)}),r},t}(),Sz=function(){function t(){this.parser=Ih,this.parserWithCSSDisabled=Ih,this.mixer=UG}return t.prototype.calculator=function(e,n,r,i){return r instanceof Aa?r.value==="none"?k1:hk:r},t}(),Mz=function(){function t(){this.parser=_k}return t.prototype.calculator=function(e,n,r){return r instanceof Aa?[]:r},t}();function Fk(t){var e=t.parsedStyle.fontSize;return Lt(e)?null:e}var tE=function(){function t(){this.parser=Dh,this.parserUnmemoize=w0,this.parserWithCSSDisabled=null,this.mixer=VO}return t.prototype.calculator=function(e,n,r,i,o){var a;if(Je(r))return r;if(fr.isRelativeUnit(r.unit)){var s=o.styleValueRegistry;if(r.unit===Zt.kPercentage)return 0;if(r.unit===Zt.kEms){if(i.parentNode){var c=Fk(i.parentNode);if(c)return c*=r.value,c;s.addUnresolveProperty(i,e)}else s.addUnresolveProperty(i,e);return 0}else if(r.unit===Zt.kRems){if(!((a=i==null?void 0:i.ownerDocument)===null||a===void 0)&&a.documentElement){var c=Fk(i.ownerDocument.documentElement);if(c)return c*=r.value,c;s.addUnresolveProperty(i,e)}else s.addUnresolveProperty(i,e);return 0}}else return r.value},t}(),Pz=function(){function t(){this.mixer=Ok}return t.prototype.parser=function(e){var n=bk(Je(e)?[e]:e),r;return n.length===1?r=[n[0],n[0]]:r=[n[0],n[1]],r},t.prototype.calculator=function(e,n,r){return r.map(function(i){return i.value})},t}(),Tz=function(){function t(){this.mixer=Ok}return t.prototype.parser=function(e){var n=bk(Je(e)?[e]:e),r;return n.length===1?r=[n[0],n[0],n[0],n[0]]:n.length===2?r=[n[0],n[1],n[0],n[1]]:n.length===3?r=[n[0],n[1],n[2],n[1]]:r=[n[0],n[1],n[2],n[3]],r},t.prototype.calculator=function(e,n,r){return r.map(function(i){return i.value})},t}(),Az=function(){function t(){}return t.prototype.calculator=function(e,n,r,i){r instanceof Aa&&(r=null);var o=r==null?void 0:r.cloneNode(!0);return o&&(o.style.isMarker=!0),o},t}(),Cz=function(){function t(){this.mixer=VO,this.parser=Ff,this.parserUnmemoize=Bh,this.parserWithCSSDisabled=null}return t.prototype.calculator=function(e,n,r){return r.value},t}(),kz=function(){function t(){this.parser=Ff,this.parserUnmemoize=Bh,this.parserWithCSSDisabled=null,this.mixer=XO(0,1)}return t.prototype.calculator=function(e,n,r){return r.value},t.prototype.postProcessor=function(e){var n=e.parsedStyle,r=n.offsetPath,i=n.offsetDistance;if(r){var o=r.nodeName;if(o===ge.LINE||o===ge.PATH||o===ge.POLYLINE){var a=r.getPoint(i);a&&e.setLocalPosition(a.x,a.y)}}},t}(),Nz=function(){function t(){this.parser=Ff,this.parserUnmemoize=Bh,this.parserWithCSSDisabled=null,this.mixer=XO(0,1)}return t.prototype.calculator=function(e,n,r){return r.value},t}(),Rz=function(){function t(){this.parser=qO,this.parserWithCSSDisabled=qO,this.mixer=lz}return t.prototype.calculator=function(e,n,r){return r instanceof Aa&&r.value==="unset"?{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new Ch(0,0,0,0)}:r},t}(),Lz=function(){function t(){this.parser=Nk,this.mixer=uz}return t}(),Iz=function(t){xt(e,t);function e(){var n=t.apply(this,ut([],j(arguments),!1))||this;return n.mixer=XO(0,1/0),n}return e}(tE),Dz=function(){function t(){}return t.prototype.calculator=function(e,n,r,i){return r instanceof Aa?r.value==="unset"?"":r.value:"".concat(r)},t.prototype.postProcessor=function(e){e.nodeValue="".concat(e.parsedStyle.text)||""},t}(),Bz=function(){function t(){}return t.prototype.calculator=function(e,n,r,i){var o=i.getAttribute("text");if(o){var a=o;r.value==="capitalize"?a=o.charAt(0).toUpperCase()+o.slice(1):r.value==="lowercase"?a=o.toLowerCase():r.value==="uppercase"&&(a=o.toUpperCase()),i.parsedStyle.text=a}return r.value},t}(),eE={},Fz=0;function jz(t,e){if(t){var n=typeof t=="string"?t:t.id||Fz++;eE[n]&&eE[n].destroy(),eE[n]=e}}var B1=typeof window!="undefined"&&typeof window.document!="undefined";function Gz(t){return!!t.getAttribute}function zz(t,e){for(var n=0,r=t.length;n<r;){var i=n+r>>>1;jk(t[i],e)<0?n=i+1:r=i}return n}function jk(t,e){var n=Number(t.parsedStyle.zIndex||0),r=Number(e.parsedStyle.zIndex||0);if(n===r){var i=t.parentNode;if(i){var o=i.childNodes||[];return o.indexOf(t)-o.indexOf(e)}}return n-r}function Wz(t){var e,n=t;do{var r=(e=n.parsedStyle)===null||e===void 0?void 0:e.clipPath;if(r)return n;n=n.parentElement}while(n!==null);return null}var Gk="px";function Yz(t,e,n){B1&&t.style&&(t.style.width=e+Gk,t.style.height=n+Gk)}function zk(t,e){if(B1)return document.defaultView.getComputedStyle(t,null).getPropertyValue(e)}function Hz(t){var e=zk(t,"width");return e==="auto"?t.offsetWidth:parseFloat(e)}function Uz(t){var e=zk(t,"height");return e==="auto"?t.offsetHeight:parseFloat(e)}var Vz=1,Xz={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},nE=typeof performance=="object"&&performance.now?performance:Date;function y0t(t,e,n){t===void 0&&(t="auto");var r=!1,i=!1,o=!!e&&!e.isNone,a=!!n&&!n.isNone;return t==="visiblepainted"||t==="painted"||t==="auto"?(r=o,i=a):t==="visiblefill"||t==="fill"?r=!0:t==="visiblestroke"||t==="stroke"?i=!0:(t==="visible"||t==="all")&&(r=!0,i=!0),[r,i]}var $z=1,qz=function(){return $z++},Hc=typeof self=="object"&&self.self==self?self:typeof gt.g=="object"&&gt.g.global==gt.g?gt.g:{},Kz=Date.now(),Zz=function(){return Hc.performance&&typeof Hc.performance.now=="function"?Hc.performance.now():Date.now()-Kz},O0={},Wk=Date.now(),Jz=function(t){if(typeof t!="function")throw new TypeError(t+" is not a function");var e=Date.now(),n=e-Wk,r=n>16?0:16-n,i=qz();return O0[i]=t,Object.keys(O0).length>1||setTimeout(function(){Wk=e;var o=O0;O0={},Object.keys(o).forEach(function(a){return o[a](Zz())})},r),i},Qz=function(t){delete O0[t]},tW=["","webkit","moz","ms","o"],Yk=function(t){return typeof t!="string"?Jz:t===""?Hc.requestAnimationFrame:Hc[t+"RequestAnimationFrame"]},eW=function(t){return typeof t!="string"?Qz:t===""?Hc.cancelAnimationFrame:Hc[t+"CancelAnimationFrame"]||Hc[t+"CancelRequestAnimationFrame"]},nW=function(t,e){for(var n=0;t[n]!==void 0;){if(e(t[n]))return t[n];n=n+1}},Hk=nW(tW,function(t){return!!Yk(t)}),rE=Yk(Hk),Uk=eW(Hk);Hc.requestAnimationFrame=rE,Hc.cancelAnimationFrame=Uk;var rW=function(){function t(){this.callbacks=[]}return t.prototype.getCallbacksNum=function(){return this.callbacks.length},t.prototype.tapPromise=function(e,n){this.callbacks.push(n)},t.prototype.promise=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return Promise.all(this.callbacks.map(function(r){return r.apply(void 0,ut([],j(e),!1))}))},t}(),iW=function(){function t(){this.callbacks=[]}return t.prototype.tapPromise=function(e,n){this.callbacks.push(n)},t.prototype.promise=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return ti(this,void 0,void 0,function(){var r,i,o,a;return Fi(this,function(s){switch(s.label){case 0:return this.callbacks.length?[4,(a=this.callbacks)[0].apply(a,ut([],j(e),!1))]:[3,6];case 1:r=s.sent(),i=0,s.label=2;case 2:return i<this.callbacks.length-1?(o=this.callbacks[i],[4,o(r)]):[3,5];case 3:r=s.sent(),s.label=4;case 4:return i++,[3,2];case 5:return[2,r];case 6:return[2,null]}})})},t}(),la=function(){function t(){this.callbacks=[]}return t.prototype.tap=function(e,n){this.callbacks.push(n)},t.prototype.call=function(){var e=arguments;this.callbacks.forEach(function(n){n.apply(void 0,e)})},t}(),iE=function(){function t(){this.callbacks=[]}return t.prototype.tap=function(e,n){this.callbacks.push(n)},t.prototype.call=function(){if(this.callbacks.length){for(var e=arguments,n=this.callbacks[0].apply(void 0,e),r=0;r<this.callbacks.length-1;r++){var i=this.callbacks[r];n=i(n)}return n}return null},t}(),oW=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],aW=/([\"\'])[^\'\"]+\1/;function sW(t){for(var e=t.fontSize,n=e===void 0?16:e,r=t.fontFamily,i=r===void 0?"sans-serif":r,o=t.fontStyle,a=o===void 0?"normal":o,s=t.fontVariant,c=s===void 0?"normal":s,l=t.fontWeight,u=l===void 0?"normal":l,f=Je(n)&&"".concat(n,"px")||"16px",d=i.split(","),h=d.length-1;h>=0;h--){var p=d[h].trim();!aW.test(p)&&oW.indexOf(p)<0&&(p='"'.concat(p,'"')),d[h]=p}return"".concat(a," ").concat(c," ").concat(u," ").concat(f," ").concat(d.join(","))}function oE(t,e,n){return po(t),t[4]=Math.tan(e),t[1]=Math.tan(n),t}var E0=1e-5,cW=ue(),Ei=ue();function lW(t,e){if(t.length){var n=po(cW);t.forEach(function(r){var i=r.t,o=r.d;if(i==="scale"){var a=(o==null?void 0:o.map(function(m){return Math.max(m.value,E0)}))||[1,1];ji(Ei,[a[0],a[1],1])}else if(i==="scalex"){var a=(o==null?void 0:o.map(function(b){return Math.max(b.value,E0)}))||[1];ji(Ei,[a[0],1,1])}else if(i==="scaley"){var a=(o==null?void 0:o.map(function(b){return Math.max(b.value,E0)}))||[1];ji(Ei,[1,a[0],1])}else if(i==="scalez"){var a=(o==null?void 0:o.map(function(b){return Math.max(b.value,E0)}))||[1];ji(Ei,[1,1,a[0]])}else if(i==="scale3d"){var a=(o==null?void 0:o.map(function(b){return Math.max(b.value,E0)}))||[1,1,1];ji(Ei,[a[0],a[1],a[2]])}else if(i==="translate"){var s=o||[pi,pi];wi(Ei,[s[0].value,s[1].value,0])}else if(i==="translatex"){var s=o||[pi];wi(Ei,[s[0].value,0,0])}else if(i==="translatey"){var s=o||[pi];wi(Ei,[0,s[0].value,0])}else if(i==="translatez"){var s=o||[pi];wi(Ei,[0,0,s[0].value])}else if(i==="translate3d"){var s=o||[pi,pi,pi];wi(Ei,[s[0].value,s[1].value,s[2].value])}else if(i==="rotate"){var c=o||[Es];bc(Ei,Mr(Ca(c[0])))}else if(i==="rotatex"){var c=o||[Es];Nd(Ei,Mr(Ca(c[0])))}else if(i==="rotatey"){var c=o||[Es];Rd(Ei,Mr(Ca(c[0])))}else if(i==="rotatez"){var c=o||[Es];bc(Ei,Mr(Ca(c[0])))}else if(i==="rotate3d"){var c=o||[pi,pi,pi,Es];kd(Ei,Mr(Ca(c[3])),[c[0].value,c[1].value,c[2].value])}else if(i==="skew"){var l=(o==null?void 0:o.map(function(m){return m.value}))||[0,0];oE(Ei,Mr(l[0]),Mr(l[1]))}else if(i==="skewx"){var l=(o==null?void 0:o.map(function(b){return b.value}))||[0];oE(Ei,Mr(l[0]),0)}else if(i==="skewy"){var l=(o==null?void 0:o.map(function(b){return b.value}))||[0];oE(Ei,0,Mr(l[0]))}else if(i==="matrix"){var u=j(o.map(function(m){return m.value}),6),f=u[0],d=u[1],h=u[2],p=u[3],v=u[4],y=u[5];gl(Ei,f,d,0,0,h,p,0,0,0,0,1,0,v,y,0,1)}else i==="matrix3d"&&gl.apply(_e,ut([Ei],j(o.map(function(m){return m.value})),!1));Bd(n,n,Ei)}),e.setLocalTransform(n)}else e.resetLocalTransform();return e.getLocalTransform()}var uW=function(){function t(){this.parser=Rk,this.parserUnmemoize=Lk,this.parserWithCSSDisabled=Lk,this.mixer=xz}return t.prototype.calculator=function(e,n,r,i){return r instanceof Aa?[]:r},t.prototype.postProcessor=function(e){var n=e.parsedStyle.transform;lW(n,e)},t}(),fW=function(){function t(){this.parser=Dk,this.parserUnmemoize=bz}return t.prototype.postProcessor=function(e){var n=e.parsedStyle.transformOrigin;n[0].unit===Zt.kPixels&&n[1].unit===Zt.kPixels?e.setOrigin(n[0].value,n[1].value):e.getGeometryBounds()},t}(),dW=function(){function t(){this.parser=Ff,this.parserUnmemoize=Bh}return t.prototype.calculator=function(e,n,r,i){return r.value},t.prototype.postProcessor=function(e){if(e.parentNode){var n=e.parentNode,r=n.renderable,i=n.sortable;r&&(r.dirty=!0),i&&(i.dirty=!0,i.dirtyReason=Lh.Z_INDEX_CHANGED)}},t}(),hW=function(){function t(){}return t.prototype.update=function(e,n){var r=e.cx,i=r===void 0?0:r,o=e.cy,a=o===void 0?0:o,s=e.r,c=s===void 0?0:s;return{cx:i,cy:a,hwidth:c,hheight:c}},t}(),pW=function(){function t(){}return t.prototype.update=function(e,n){var r=e.cx,i=r===void 0?0:r,o=e.cy,a=o===void 0?0:o,s=e.rx,c=s===void 0?0:s,l=e.ry,u=l===void 0?0:l;return{cx:i,cy:a,hwidth:c,hheight:u}},t}(),vW=function(){function t(){}return t.prototype.update=function(e){var n=e.x1,r=e.y1,i=e.x2,o=e.y2,a=Math.min(n,i),s=Math.max(n,i),c=Math.min(r,o),l=Math.max(r,o),u=s-a,f=l-c,d=u/2,h=f/2;return{cx:a+d,cy:c+h,hwidth:d,hheight:h}},t}(),gW=function(){function t(){}return t.prototype.update=function(e){var n=e.d,r=n.rect,i=r.x,o=r.y,a=r.width,s=r.height,c=a/2,l=s/2;return{cx:i+c,cy:o+l,hwidth:c,hheight:l}},t}(),yW=function(){function t(){}return t.prototype.update=function(e){if(e.points&&ri(e.points.points)){var n=e.points.points,r=Math.min.apply(Math,ut([],j(n.map(function(f){return f[0]})),!1)),i=Math.max.apply(Math,ut([],j(n.map(function(f){return f[0]})),!1)),o=Math.min.apply(Math,ut([],j(n.map(function(f){return f[1]})),!1)),a=Math.max.apply(Math,ut([],j(n.map(function(f){return f[1]})),!1)),s=i-r,c=a-o,l=s/2,u=c/2;return{cx:r+l,cy:o+u,hwidth:l,hheight:u}}return{cx:0,cy:0,hwidth:0,hheight:0}},t}(),mW=function(){function t(){}return t.prototype.update=function(e,n){var r=e.x,i=r===void 0?0:r,o=e.y,a=o===void 0?0:o,s=e.src,c=e.width,l=c===void 0?0:c,u=e.height,f=u===void 0?0:u,d=l,h=f;return s&&!Qe(s)&&(d||(d=s.width,e.width=d),h||(h=s.height,e.height=h)),{cx:i+d/2,cy:a+h/2,hwidth:d/2,hheight:h/2}},t}(),xW=function(){function t(e){this.globalRuntime=e}return t.prototype.isReadyToMeasure=function(e,n){var r=e.text,i=e.textAlign,o=e.textBaseline,a=e.fontSize,s=e.fontStyle,c=e.fontWeight,l=e.fontVariant,u=e.lineWidth;return Et.enableCSSParsing?r&&a&&s&&c&&l&&i&&o&&!Lt(u):r},t.prototype.update=function(e,n){var r,i,o=e.text,a=e.textAlign,s=a===void 0?"start":a,c=e.lineWidth,l=c===void 0?1:c,u=e.textBaseline,f=u===void 0?"alphabetic":u,d=e.dx,h=d===void 0?0:d,p=e.dy,v=p===void 0?0:p,y=e.x,m=y===void 0?0:y,b=e.y,O=b===void 0?0:b;if(!this.isReadyToMeasure(e,n))return e.metrics={font:"",width:0,height:0,lines:[],lineWidths:[],lineHeight:0,maxLineWidth:0,fontProperties:{ascent:0,descent:0,fontSize:0},lineMetrics:[]},{hwidth:0,hheight:0,cx:0,cy:0};var E=(((i=(r=n==null?void 0:n.ownerDocument)===null||r===void 0?void 0:r.defaultView)===null||i===void 0?void 0:i.getConfig())||{}).offscreenCanvas,w=this.globalRuntime.textService.measureText(o,e,E);e.metrics=w;var _=w.width,S=w.height,M=w.lineHeight,T=w.fontProperties,A=_/2,C=S/2,N=m+A;s==="center"||s==="middle"?N+=l/2-A:(s==="right"||s==="end")&&(N+=l-A*2);var k=O-C;return f==="middle"?k+=C:f==="top"||f==="hanging"?k+=C*2:f==="alphabetic"?k+=this.globalRuntime.enableCSSParsing?M-T.ascent:0:(f==="bottom"||f==="ideographic")&&(k+=0),h&&(N+=h),v&&(k+=v),{cx:N,cy:k,hwidth:A,hheight:C}},t}(),bW=function(){function t(){}return t.prototype.update=function(e,n){return{cx:0,cy:0,hwidth:0,hheight:0}},t}(),_W=function(){function t(){}return t.prototype.update=function(e,n){var r=e.x,i=r===void 0?0:r,o=e.y,a=o===void 0?0:o,s=e.width,c=s===void 0?0:s,l=e.height,u=l===void 0?0:l;return{cx:i+c/2,cy:a+u/2,hwidth:c/2,hheight:u/2}},t}();function wW(t){return!!t.type}var aE=function(){function t(e){this.eventPhase=t.prototype.NONE,this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.defaultPrevented=!1,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Uo,this.page=new Uo,this.canvas=new Uo,this.viewport=new Uo,this.composed=!1,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"layerX",{get:function(){return this.layer.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"layerY",{get:function(){return this.layer.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageX",{get:function(){return this.page.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageY",{get:function(){return this.page.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this.canvas.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.canvas.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasX",{get:function(){return this.canvas.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasY",{get:function(){return this.canvas.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"viewportX",{get:function(){return this.viewport.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"viewportY",{get:function(){return this.viewport.y},enumerable:!1,configurable:!0}),t.prototype.composedPath=function(){return this.manager&&(!this.path||this.path[0]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path},Object.defineProperty(t.prototype,"propagationPath",{get:function(){return this.composedPath()},enumerable:!1,configurable:!0}),t.prototype.preventDefault=function(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0},t.prototype.stopImmediatePropagation=function(){this.propagationImmediatelyStopped=!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t.prototype.initEvent=function(){},t.prototype.initUIEvent=function(){},t.prototype.clone=function(){throw new Error(Vr)},t}(),Vk=function(t){xt(e,t);function e(){var n=t.apply(this,ut([],j(arguments),!1))||this;return n.client=new Uo,n.movement=new Uo,n.offset=new Uo,n.global=new Uo,n.screen=new Uo,n}return Object.defineProperty(e.prototype,"clientX",{get:function(){return this.client.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clientY",{get:function(){return this.client.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"movementX",{get:function(){return this.movement.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"movementY",{get:function(){return this.movement.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offsetX",{get:function(){return this.offset.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offsetY",{get:function(){return this.offset.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"globalX",{get:function(){return this.global.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"globalY",{get:function(){return this.global.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"screenX",{get:function(){return this.screen.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"screenY",{get:function(){return this.screen.y},enumerable:!1,configurable:!0}),e.prototype.getModifierState=function(n){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(n)},e.prototype.initMouseEvent=function(){throw new Error(Vr)},e}(aE),sE=function(t){xt(e,t);function e(){var n=t.apply(this,ut([],j(arguments),!1))||this;return n.width=0,n.height=0,n.isPrimary=!1,n}return e.prototype.getCoalescedEvents=function(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]},e.prototype.getPredictedEvents=function(){throw new Error("getPredictedEvents is not supported!")},e.prototype.clone=function(){return this.manager.clonePointerEvent(this)},e}(Vk),cE=function(t){xt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.clone=function(){return this.manager.cloneWheelEvent(this)},e}(Vk),ua=function(t){xt(e,t);function e(n,r){var i=t.call(this,null)||this;return i.type=n,i.detail=r,Object.assign(i,r),i}return e}(aE),Xk=":",$k=function(){function t(){this.emitter=new Xa}return t.prototype.on=function(e,n,r){return this.addEventListener(e,n,r),this},t.prototype.addEventListener=function(e,n,r){var i=Ks(r)&&r||Yi(r)&&r.capture,o=Yi(r)&&r.once,a=Rh(n)?void 0:n,s=!1,c="";if(e.indexOf(Xk)>-1){var l=j(e.split(Xk),2),u=l[0],f=l[1];e=f,c=u,s=!0}if(e=i?"".concat(e,"capture"):e,n=Rh(n)?n:n.handleEvent,s){var d=n;n=function(){for(var h,p=[],v=0;v<arguments.length;v++)p[v]=arguments[v];((h=p[0].target)===null||h===void 0?void 0:h.name)===c&&d.apply(void 0,ut([],j(p),!1))}}return o?this.emitter.once(e,n,a):this.emitter.on(e,n,a),this},t.prototype.off=function(e,n,r){return e?this.removeEventListener(e,n,r):this.removeAllEventListeners(),this},t.prototype.removeAllEventListeners=function(){this.emitter.removeAllListeners()},t.prototype.removeEventListener=function(e,n,r){var i=Ks(r)&&r||Yi(r)&&r.capture,o=Rh(n)?void 0:n;return e=i?"".concat(e,"capture"):e,n=Rh(n)?n:n==null?void 0:n.handleEvent,this.emitter.off(e,n,o),this},t.prototype.emit=function(e,n){this.dispatchEvent(new ua(e,n))},t.prototype.dispatchEvent=function(e,n){var r,i;if(n===void 0&&(n=!1),!wW(e))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");var o;if(this.document?o=this:this.defaultView?o=this.defaultView:o=(r=this.ownerDocument)===null||r===void 0?void 0:r.defaultView,o){if(e.manager=o.getEventService()||null,!e.manager)return!1;e.defaultPrevented=!1,e.path=[],n||(e.target=this),(i=e.manager)===null||i===void 0||i.dispatchEvent(e,e.type,n)}return!e.defaultPrevented},t}(),Eo=function(t){xt(e,t);function e(){var n=t.call(this)||this;return n.shadow=!1,n.ownerDocument=null,n.isConnected=!1,n.baseURI="",n.childNodes=[],n.nodeType=0,n.nodeName="",n.nodeValue=null,n.parentNode=null,n}return e.isNode=function(n){return!!n.childNodes},Object.defineProperty(e.prototype,"textContent",{get:function(){var n,r,i="";this.nodeName===ge.TEXT&&(i+=this.style.text);try{for(var o=On(this.childNodes),a=o.next();!a.done;a=o.next()){var s=a.value;s.nodeName===ge.TEXT?i+=s.nodeValue:i+=s.textContent}}catch(c){n={error:c}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i},set:function(n){var r=this;this.childNodes.slice().forEach(function(i){r.removeChild(i)}),this.nodeName===ge.TEXT&&(this.style.text="".concat(n))},enumerable:!1,configurable:!0}),e.prototype.getRootNode=function(n){return n===void 0&&(n={}),this.parentNode?this.parentNode.getRootNode(n):n.composed&&this.host?this.host.getRootNode(n):this},e.prototype.hasChildNodes=function(){return this.childNodes.length>0},e.prototype.isDefaultNamespace=function(n){throw new Error(Vr)},e.prototype.lookupNamespaceURI=function(n){throw new Error(Vr)},e.prototype.lookupPrefix=function(n){throw new Error(Vr)},e.prototype.normalize=function(){throw new Error(Vr)},e.prototype.isEqualNode=function(n){return this===n},e.prototype.isSameNode=function(n){return this.isEqualNode(n)},Object.defineProperty(e.prototype,"parent",{get:function(){return this.parentNode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parentElement",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"firstChild",{get:function(){return this.childNodes.length>0?this.childNodes[0]:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastChild",{get:function(){return this.childNodes.length>0?this.childNodes[this.childNodes.length-1]:null},enumerable:!1,configurable:!0}),e.prototype.compareDocumentPosition=function(n){var r;if(n===this)return 0;for(var i=n,o=this,a=[i],s=[o];(r=i.parentNode)!==null&&r!==void 0?r:o.parentNode;)i=i.parentNode?(a.push(i.parentNode),i.parentNode):i,o=o.parentNode?(s.push(o.parentNode),o.parentNode):o;if(i!==o)return e.DOCUMENT_POSITION_DISCONNECTED|e.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC|e.DOCUMENT_POSITION_PRECEDING;var c=a.length>s.length?a:s,l=c===a?s:a;if(c[c.length-l.length]===l[0])return c===a?e.DOCUMENT_POSITION_CONTAINED_BY|e.DOCUMENT_POSITION_FOLLOWING:e.DOCUMENT_POSITION_CONTAINS|e.DOCUMENT_POSITION_PRECEDING;for(var u=c.length-l.length,f=l.length-1;f>=0;f--){var d=l[f],h=c[u+f];if(h!==d){var p=d.parentNode.childNodes;return p.indexOf(d)<p.indexOf(h)?l===a?e.DOCUMENT_POSITION_PRECEDING:e.DOCUMENT_POSITION_FOLLOWING:c===a?e.DOCUMENT_POSITION_PRECEDING:e.DOCUMENT_POSITION_FOLLOWING}}return e.DOCUMENT_POSITION_FOLLOWING},e.prototype.contain=function(n){return this.contains(n)},e.prototype.contains=function(n){for(var r=n;r&&this!==r;)r=r.parentNode;return!!r},e.prototype.getAncestor=function(n){for(var r=this;n>0&&r;)r=r.parentNode,n--;return r},e.prototype.forEach=function(n,r){r===void 0&&(r=!1),n(this)||(r?this.childNodes.slice():this.childNodes).forEach(function(i){i.forEach(n)})},e.DOCUMENT_POSITION_DISCONNECTED=1,e.DOCUMENT_POSITION_PRECEDING=2,e.DOCUMENT_POSITION_FOLLOWING=4,e.DOCUMENT_POSITION_CONTAINS=8,e.DOCUMENT_POSITION_CONTAINED_BY=16,e.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC=32,e}($k),OW=2048,EW=function(){function t(e,n){var r=this;this.globalRuntime=e,this.context=n,this.emitter=new Xa,this.nativeHTMLMap=new WeakMap,this.cursor="default",this.mappingTable={},this.mappingState={trackingData:{}},this.eventPool=new Map,this.tmpMatrix=ue(),this.tmpVec3=Gt(),this.onPointerDown=function(i){var o=r.createPointerEvent(i);if(r.dispatchEvent(o,"pointerdown"),o.pointerType==="touch")r.dispatchEvent(o,"touchstart");else if(o.pointerType==="mouse"||o.pointerType==="pen"){var a=o.button===2;r.dispatchEvent(o,a?"rightdown":"mousedown")}var s=r.trackingData(i.pointerId);s.pressTargetsByButton[i.button]=o.composedPath(),r.freeEvent(o)},this.onPointerUp=function(i){var o,a=nE.now(),s=r.createPointerEvent(i,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0);if(r.dispatchEvent(s,"pointerup"),s.pointerType==="touch")r.dispatchEvent(s,"touchend");else if(s.pointerType==="mouse"||s.pointerType==="pen"){var c=s.button===2;r.dispatchEvent(s,c?"rightup":"mouseup")}var l=r.trackingData(i.pointerId),u=r.findMountedTarget(l.pressTargetsByButton[i.button]),f=u;if(u&&!s.composedPath().includes(u)){for(var d=u;d&&!s.composedPath().includes(d);){if(s.currentTarget=d,r.notifyTarget(s,"pointerupoutside"),s.pointerType==="touch")r.notifyTarget(s,"touchendoutside");else if(s.pointerType==="mouse"||s.pointerType==="pen"){var c=s.button===2;r.notifyTarget(s,c?"rightupoutside":"mouseupoutside")}Eo.isNode(d)&&(d=d.parentNode)}delete l.pressTargetsByButton[i.button],f=d}if(f){var h=r.clonePointerEvent(s,"click");h.target=f,h.path=[],l.clicksByButton[i.button]||(l.clicksByButton[i.button]={clickCount:0,target:h.target,timeStamp:a});var p=r.context.renderingContext.root.ownerDocument.defaultView,v=l.clicksByButton[i.button];v.target===h.target&&a-v.timeStamp<p.dblClickSpeed?++v.clickCount:v.clickCount=1,v.target=h.target,v.timeStamp=a,h.detail=v.clickCount,!((o=s.detail)===null||o===void 0)&&o.preventClick||(!r.context.config.useNativeClickEvent&&(h.pointerType==="mouse"||h.pointerType==="touch")&&r.dispatchEvent(h,"click"),r.dispatchEvent(h,"pointertap")),r.freeEvent(h)}r.freeEvent(s)},this.onPointerMove=function(i){var o=r.createPointerEvent(i,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0),a=o.pointerType==="mouse"||o.pointerType==="pen",s=r.trackingData(i.pointerId),c=r.findMountedTarget(s.overTargets);if(s.overTargets&&c!==o.target){var l=i.type==="mousemove"?"mouseout":"pointerout",u=r.createPointerEvent(i,l,c||void 0);if(r.dispatchEvent(u,"pointerout"),a&&r.dispatchEvent(u,"mouseout"),!o.composedPath().includes(c)){var f=r.createPointerEvent(i,"pointerleave",c||void 0);for(f.eventPhase=f.AT_TARGET;f.target&&!o.composedPath().includes(f.target);)f.currentTarget=f.target,r.notifyTarget(f),a&&r.notifyTarget(f,"mouseleave"),Eo.isNode(f.target)&&(f.target=f.target.parentNode);r.freeEvent(f)}r.freeEvent(u)}if(c!==o.target){var d=i.type==="mousemove"?"mouseover":"pointerover",h=r.clonePointerEvent(o,d);r.dispatchEvent(h,"pointerover"),a&&r.dispatchEvent(h,"mouseover");for(var p=c&&Eo.isNode(c)&&c.parentNode;p&&p!==(Eo.isNode(r.rootTarget)&&r.rootTarget.parentNode)&&p!==o.target;)p=p.parentNode;var v=!p||p===(Eo.isNode(r.rootTarget)&&r.rootTarget.parentNode);if(v){var y=r.clonePointerEvent(o,"pointerenter");for(y.eventPhase=y.AT_TARGET;y.target&&y.target!==c&&y.target!==(Eo.isNode(r.rootTarget)&&r.rootTarget.parentNode);)y.currentTarget=y.target,r.notifyTarget(y),a&&r.notifyTarget(y,"mouseenter"),Eo.isNode(y.target)&&(y.target=y.target.parentNode);r.freeEvent(y)}r.freeEvent(h)}r.dispatchEvent(o,"pointermove"),o.pointerType==="touch"&&r.dispatchEvent(o,"touchmove"),a&&(r.dispatchEvent(o,"mousemove"),r.cursor=r.getCursor(o.target)),s.overTargets=o.composedPath(),r.freeEvent(o)},this.onPointerOut=function(i){var o=r.trackingData(i.pointerId);if(o.overTargets){var a=i.pointerType==="mouse"||i.pointerType==="pen",s=r.findMountedTarget(o.overTargets),c=r.createPointerEvent(i,"pointerout",s||void 0);r.dispatchEvent(c),a&&r.dispatchEvent(c,"mouseout");var l=r.createPointerEvent(i,"pointerleave",s||void 0);for(l.eventPhase=l.AT_TARGET;l.target&&l.target!==(Eo.isNode(r.rootTarget)&&r.rootTarget.parentNode);)l.currentTarget=l.target,r.notifyTarget(l),a&&r.notifyTarget(l,"mouseleave"),Eo.isNode(l.target)&&(l.target=l.target.parentNode);o.overTargets=null,r.freeEvent(c),r.freeEvent(l)}r.cursor=null},this.onPointerOver=function(i){var o=r.trackingData(i.pointerId),a=r.createPointerEvent(i),s=a.pointerType==="mouse"||a.pointerType==="pen";r.dispatchEvent(a,"pointerover"),s&&r.dispatchEvent(a,"mouseover"),a.pointerType==="mouse"&&(r.cursor=r.getCursor(a.target));var c=r.clonePointerEvent(a,"pointerenter");for(c.eventPhase=c.AT_TARGET;c.target&&c.target!==(Eo.isNode(r.rootTarget)&&r.rootTarget.parentNode);)c.currentTarget=c.target,r.notifyTarget(c),s&&r.notifyTarget(c,"mouseenter"),Eo.isNode(c.target)&&(c.target=c.target.parentNode);o.overTargets=a.composedPath(),r.freeEvent(a),r.freeEvent(c)},this.onPointerUpOutside=function(i){var o=r.trackingData(i.pointerId),a=r.findMountedTarget(o.pressTargetsByButton[i.button]),s=r.createPointerEvent(i);if(a){for(var c=a;c;)s.currentTarget=c,r.notifyTarget(s,"pointerupoutside"),s.pointerType==="touch"||(s.pointerType==="mouse"||s.pointerType==="pen")&&r.notifyTarget(s,s.button===2?"rightupoutside":"mouseupoutside"),Eo.isNode(c)&&(c=c.parentNode);delete o.pressTargetsByButton[i.button]}r.freeEvent(s)},this.onWheel=function(i){var o=r.createWheelEvent(i);r.dispatchEvent(o),r.freeEvent(o)},this.onClick=function(i){if(r.context.config.useNativeClickEvent){var o=r.createPointerEvent(i);r.dispatchEvent(o),r.freeEvent(o)}},this.onPointerCancel=function(i){var o=r.createPointerEvent(i,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0);r.dispatchEvent(o),r.freeEvent(o)}}return t.prototype.init=function(){this.rootTarget=this.context.renderingContext.root.parentNode,this.addEventMapping("pointerdown",this.onPointerDown),this.addEventMapping("pointerup",this.onPointerUp),this.addEventMapping("pointermove",this.onPointerMove),this.addEventMapping("pointerout",this.onPointerOut),this.addEventMapping("pointerleave",this.onPointerOut),this.addEventMapping("pointercancel",this.onPointerCancel),this.addEventMapping("pointerover",this.onPointerOver),this.addEventMapping("pointerupoutside",this.onPointerUpOutside),this.addEventMapping("wheel",this.onWheel),this.addEventMapping("click",this.onClick)},t.prototype.destroy=function(){this.emitter.removeAllListeners(),this.mappingTable={},this.mappingState={},this.eventPool.clear()},t.prototype.getScale=function(){var e=this.context.contextService.getBoundingClientRect(),n=1,r=1,i=this.context.contextService.getDomElement();if(i&&e){var o=i.offsetWidth,a=i.offsetHeight;o&&a&&(n=e.width/o,r=e.height/a)}return{scaleX:n,scaleY:r,bbox:e}},t.prototype.client2Viewport=function(e){var n=this.getScale(),r=n.scaleX,i=n.scaleY,o=n.bbox;return new Uo((e.x-((o==null?void 0:o.left)||0))/r,(e.y-((o==null?void 0:o.top)||0))/i)},t.prototype.viewport2Client=function(e){var n=this.getScale(),r=n.scaleX,i=n.scaleY,o=n.bbox;return new Uo((e.x+((o==null?void 0:o.left)||0))*r,(e.y+((o==null?void 0:o.top)||0))*i)},t.prototype.viewport2Canvas=function(e){var n=e.x,r=e.y,i=this.rootTarget.defaultView,o=i.getCamera(),a=this.context.config,s=a.width,c=a.height,l=o.getPerspectiveInverse(),u=o.getWorldTransform(),f=Pn(this.tmpMatrix,u,l),d=Dn(this.tmpVec3,n/s*2-1,(1-r/c)*2-1,0);return Ft(d,d,f),new Uo(d[0],d[1])},t.prototype.canvas2Viewport=function(e){var n=this.rootTarget.defaultView,r=n.getCamera(),i=r.getPerspective(),o=r.getViewTransform(),a=Pn(this.tmpMatrix,i,o),s=Dn(this.tmpVec3,e.x,e.y,0);Ft(this.tmpVec3,this.tmpVec3,a);var c=this.context.config,l=c.width,u=c.height;return new Uo((s[0]+1)/2*l,(1-(s[1]+1)/2)*u)},t.prototype.setPickHandler=function(e){this.pickHandler=e},t.prototype.addEventMapping=function(e,n){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:n,priority:0}),this.mappingTable[e].sort(function(r,i){return r.priority-i.priority})},t.prototype.mapEvent=function(e){if(this.rootTarget){var n=this.mappingTable[e.type];if(n)for(var r=0,i=n.length;r<i;r++)n[r].fn(e);else console.warn("[EventService]: Event mapping not defined for ".concat(e.type))}},t.prototype.dispatchEvent=function(e,n,r){if(!r)e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,n);else{e.eventPhase=e.AT_TARGET;var i=this.rootTarget.defaultView||null;e.currentTarget=i,this.notifyListeners(e,n)}this.emitter.emit(n||e.type,e)},t.prototype.propagate=function(e,n){if(e.target){var r=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(var i=r.length-1;i>=1;i--)if(e.currentTarget=r[i],this.notifyTarget(e,n),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,n),!(e.propagationStopped||e.propagationImmediatelyStopped)){var o=r.indexOf(e.currentTarget);e.eventPhase=e.BUBBLING_PHASE;for(var i=o+1;i<r.length;i++)if(e.currentTarget=r[i],this.notifyTarget(e,n),e.propagationStopped||e.propagationImmediatelyStopped)return}}},t.prototype.propagationPath=function(e){var n=[e],r=this.rootTarget.defaultView||null;if(r&&r===e)return n.unshift(r.document),n;for(var i=0;i<OW&&e!==this.rootTarget;i++)Eo.isNode(e)&&e.parentNode&&(n.push(e.parentNode),e=e.parentNode);return r&&n.push(r),n},t.prototype.hitTest=function(e){var n=e.viewportX,r=e.viewportY,i=this.context.config,o=i.width,a=i.height,s=i.disableHitTesting;return n<0||r<0||n>o||r>a?null:!s&&this.pickHandler(e)||this.rootTarget||null},t.prototype.isNativeEventFromCanvas=function(e,n){var r=n==null?void 0:n.target;if(r!=null&&r.shadowRoot&&(r=n.composedPath()[0]),r){if(r===e)return!0;if(e&&e.contains)return e.contains(r)}return n!=null&&n.composedPath?n.composedPath().indexOf(e)>-1:!1},t.prototype.getExistedHTML=function(e){var n,r;if(e.nativeEvent.composedPath)try{for(var i=On(e.nativeEvent.composedPath()),o=i.next();!o.done;o=i.next()){var a=o.value,s=this.nativeHTMLMap.get(a);if(s)return s}}catch(c){n={error:c}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return null},t.prototype.pickTarget=function(e){return this.hitTest({clientX:e.clientX,clientY:e.clientY,viewportX:e.viewportX,viewportY:e.viewportY,x:e.canvasX,y:e.canvasY})},t.prototype.createPointerEvent=function(e,n,r,i){var o=this.allocateEvent(sE);this.copyPointerData(e,o),this.copyMouseData(e,o),this.copyData(e,o),o.nativeEvent=e.nativeEvent,o.originalEvent=e;var a=this.getExistedHTML(o),s=this.context.contextService.getDomElement();return o.target=r!=null?r:a||this.isNativeEventFromCanvas(s,o.nativeEvent)&&this.pickTarget(o)||i,typeof n=="string"&&(o.type=n),o},t.prototype.createWheelEvent=function(e){var n=this.allocateEvent(cE);this.copyWheelData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.nativeEvent=e.nativeEvent,n.originalEvent=e;var r=this.getExistedHTML(n),i=this.context.contextService.getDomElement();return n.target=r||this.isNativeEventFromCanvas(i,n.nativeEvent)&&this.pickTarget(n),n},t.prototype.trackingData=function(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]},t.prototype.cloneWheelEvent=function(e){var n=this.allocateEvent(cE);return n.nativeEvent=e.nativeEvent,n.originalEvent=e.originalEvent,this.copyWheelData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.target=e.target,n.path=e.composedPath().slice(),n.type=e.type,n},t.prototype.clonePointerEvent=function(e,n){var r=this.allocateEvent(sE);return r.nativeEvent=e.nativeEvent,r.originalEvent=e.originalEvent,this.copyPointerData(e,r),this.copyMouseData(e,r),this.copyData(e,r),r.target=e.target,r.path=e.composedPath().slice(),r.type=n!=null?n:r.type,r},t.prototype.copyPointerData=function(e,n){n.pointerId=e.pointerId,n.width=e.width,n.height=e.height,n.isPrimary=e.isPrimary,n.pointerType=e.pointerType,n.pressure=e.pressure,n.tangentialPressure=e.tangentialPressure,n.tiltX=e.tiltX,n.tiltY=e.tiltY,n.twist=e.twist},t.prototype.copyMouseData=function(e,n){n.altKey=e.altKey,n.button=e.button,n.buttons=e.buttons,n.ctrlKey=e.ctrlKey,n.metaKey=e.metaKey,n.shiftKey=e.shiftKey,n.client.copyFrom(e.client),n.movement.copyFrom(e.movement),n.canvas.copyFrom(e.canvas),n.screen.copyFrom(e.screen),n.global.copyFrom(e.global),n.offset.copyFrom(e.offset)},t.prototype.copyWheelData=function(e,n){n.deltaMode=e.deltaMode,n.deltaX=e.deltaX,n.deltaY=e.deltaY,n.deltaZ=e.deltaZ},t.prototype.copyData=function(e,n){n.isTrusted=e.isTrusted,n.timeStamp=nE.now(),n.type=e.type,n.detail=e.detail,n.view=e.view,n.page.copyFrom(e.page),n.viewport.copyFrom(e.viewport)},t.prototype.allocateEvent=function(e){this.eventPool.has(e)||this.eventPool.set(e,[]);var n=this.eventPool.get(e).pop()||new e(this);return n.eventPhase=n.NONE,n.currentTarget=null,n.path=[],n.target=null,n},t.prototype.freeEvent=function(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");var n=e.constructor;this.eventPool.has(n)||this.eventPool.set(n,[]),this.eventPool.get(n).push(e)},t.prototype.notifyTarget=function(e,n){n=n!=null?n:e.type;var r=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?"".concat(n,"capture"):n;this.notifyListeners(e,r),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,n)},t.prototype.notifyListeners=function(e,n){var r=e.currentTarget.emitter,i=r._events[n];if(i)if("fn"in i)i.once&&r.removeListener(n,i.fn,void 0,!0),i.fn.call(e.currentTarget||i.context,e);else for(var o=0;o<i.length&&!e.propagationImmediatelyStopped;o++)i[o].once&&r.removeListener(n,i[o].fn,void 0,!0),i[o].fn.call(e.currentTarget||i[o].context,e)},t.prototype.findMountedTarget=function(e){if(!e)return null;for(var n=e[e.length-1],r=e.length-2;r>=0;r--){var i=e[r];if(i===this.rootTarget||Eo.isNode(i)&&i.parentNode===n)n=e[r];else break}return n},t.prototype.getCursor=function(e){for(var n=e;n;){var r=Gz(n)&&n.getAttribute("cursor");if(r)return r;n=Eo.isNode(n)&&n.parentNode}},t}(),SW=function(){function t(){}return t.prototype.getOrCreateCanvas=function(e,n){if(this.canvas)return this.canvas;if(e||Et.offscreenCanvas)this.canvas=e||Et.offscreenCanvas,this.context=this.canvas.getContext("2d",nt({willReadFrequently:!0},n));else try{this.canvas=new window.OffscreenCanvas(0,0),this.context=this.canvas.getContext("2d",nt({willReadFrequently:!0},n)),(!this.context||!this.context.measureText)&&(this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"))}catch(r){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d",nt({willReadFrequently:!0},n))}return this.canvas.width=10,this.canvas.height=10,this.canvas},t.prototype.getOrCreateContext=function(e,n){return this.context?this.context:(this.getOrCreateCanvas(e,n),this.context)},t}(),zf;(function(t){t[t.CAMERA_CHANGED=0]="CAMERA_CHANGED",t[t.DISPLAY_OBJECT_CHANGED=1]="DISPLAY_OBJECT_CHANGED",t[t.NONE=2]="NONE"})(zf||(zf={}));var MW=function(){function t(e,n){this.globalRuntime=e,this.context=n,this.inited=!1,this.stats={total:0,rendered:0},this.zIndexCounter=0,this.hooks={init:new la,initAsync:new rW,dirtycheck:new iE,cull:new iE,beginFrame:new la,beforeRender:new la,render:new la,afterRender:new la,endFrame:new la,destroy:new la,pick:new iW,pickSync:new iE,pointerDown:new la,pointerUp:new la,pointerMove:new la,pointerOut:new la,pointerOver:new la,pointerWheel:new la,pointerCancel:new la,click:new la}}return t.prototype.init=function(e){var n=this,r=nt(nt({},this.globalRuntime),this.context);this.context.renderingPlugins.forEach(function(i){i.apply(r,n.globalRuntime)}),this.hooks.init.call(),this.hooks.initAsync.getCallbacksNum()===0?(this.inited=!0,e()):this.hooks.initAsync.promise().then(function(){n.inited=!0,e()})},t.prototype.getStats=function(){return this.stats},t.prototype.disableDirtyRectangleRendering=function(){var e=this.context.config.renderer,n=e.getConfig().enableDirtyRectangleRendering;return!n||this.context.renderingContext.renderReasons.has(zf.CAMERA_CHANGED)},t.prototype.render=function(e,n,r){var i=this;this.stats.total=0,this.stats.rendered=0,this.zIndexCounter=0;var o=this.context.renderingContext;if(this.globalRuntime.sceneGraphService.syncHierarchy(o.root),this.globalRuntime.sceneGraphService.triggerPendingEvents(),o.renderReasons.size&&this.inited){o.dirtyRectangleRenderingDisabled=this.disableDirtyRectangleRendering();var a=o.renderReasons.size===1&&o.renderReasons.has(zf.CAMERA_CHANGED),s=!e.disableRenderHooks||!(e.disableRenderHooks&&a);s&&this.renderDisplayObject(o.root,e,o),this.hooks.beginFrame.call(n),s&&o.renderListCurrentFrame.forEach(function(c){i.hooks.beforeRender.call(c),i.hooks.render.call(c),i.hooks.afterRender.call(c)}),this.hooks.endFrame.call(n),o.renderListCurrentFrame=[],o.renderReasons.clear(),r()}},t.prototype.renderDisplayObject=function(e,n,r){var i=this,o=n.renderer.getConfig(),a=o.enableDirtyCheck,s=o.enableCulling;this.globalRuntime.enableCSSParsing&&this.globalRuntime.styleValueRegistry.recalc(e);var c=e.renderable,l=a?c.dirty||r.dirtyRectangleRenderingDisabled?e:null:e;if(l){var u=s?this.hooks.cull.call(l,this.context.camera):l;u&&(this.stats.rendered++,r.renderListCurrentFrame.push(u))}e.renderable.dirty=!1,e.sortable.renderOrder=this.zIndexCounter++,this.stats.total++;var f=e.sortable;f.dirty&&(this.sort(e,f),f.dirty=!1,f.dirtyChildren=[],f.dirtyReason=void 0),(f.sorted||e.childNodes).forEach(function(d){i.renderDisplayObject(d,n,r)})},t.prototype.sort=function(e,n){n.sorted&&n.dirtyReason!==Lh.Z_INDEX_CHANGED?n.dirtyChildren.forEach(function(r){var i=e.childNodes.indexOf(r);if(i===-1){var o=n.sorted.indexOf(r);o>=0&&n.sorted.splice(o,1)}else if(n.sorted.length===0)n.sorted.push(r);else{var a=zz(n.sorted,r);n.sorted.splice(a,0,r)}}):n.sorted=e.childNodes.slice().sort(jk)},t.prototype.destroy=function(){this.inited=!1,this.hooks.destroy.call(),this.globalRuntime.sceneGraphService.clearPendingEvents()},t.prototype.dirtify=function(){this.context.renderingContext.renderReasons.add(zf.DISPLAY_OBJECT_CHANGED)},t}(),PW=/\[\s*(.*)=(.*)\s*\]/,TW=function(){function t(){}return t.prototype.selectOne=function(e,n){var r=this;if(e.startsWith("."))return n.find(function(s){return((s==null?void 0:s.classList)||[]).indexOf(r.getIdOrClassname(e))>-1});if(e.startsWith("#"))return n.find(function(s){return s.id===r.getIdOrClassname(e)});if(e.startsWith("[")){var i=this.getAttribute(e),o=i.name,a=i.value;return o?n.find(function(s){return n!==s&&(o==="name"?s.name===a:r.attributeToString(s,o)===a)}):null}else return n.find(function(s){return n!==s&&s.nodeName===e})},t.prototype.selectAll=function(e,n){var r=this;if(e.startsWith("."))return n.findAll(function(s){return n!==s&&((s==null?void 0:s.classList)||[]).indexOf(r.getIdOrClassname(e))>-1});if(e.startsWith("#"))return n.findAll(function(s){return n!==s&&s.id===r.getIdOrClassname(e)});if(e.startsWith("[")){var i=this.getAttribute(e),o=i.name,a=i.value;return o?n.findAll(function(s){return n!==s&&(o==="name"?s.name===a:r.attributeToString(s,o)===a)}):[]}else return n.findAll(function(s){return n!==s&&s.nodeName===e})},t.prototype.is=function(e,n){if(e.startsWith("."))return n.className===this.getIdOrClassname(e);if(e.startsWith("#"))return n.id===this.getIdOrClassname(e);if(e.startsWith("[")){var r=this.getAttribute(e),i=r.name,o=r.value;return i==="name"?n.name===o:this.attributeToString(n,i)===o}else return n.nodeName===e},t.prototype.getIdOrClassname=function(e){return e.substring(1)},t.prototype.getAttribute=function(e){var n=e.match(PW),r="",i="";return n&&n.length>2&&(r=n[1].replace(/"/g,""),i=n[2].replace(/"/g,"")),{name:r,value:i}},t.prototype.attributeToString=function(e,n){if(!e.getAttribute)return"";var r=e.getAttribute(n);return Lt(r)?"":r.toString?r.toString():""},t}(),Wf=function(t){xt(e,t);function e(n,r,i,o,a,s,c,l){var u=t.call(this,null)||this;return u.relatedNode=r,u.prevValue=i,u.newValue=o,u.attrName=a,u.attrChange=s,u.prevParsedValue=c,u.newParsedValue=l,u.type=n,u}return e.ADDITION=2,e.MODIFICATION=1,e.REMOVAL=3,e}(aE),Di;(function(t){t.REPARENT="reparent",t.DESTROY="destroy",t.ATTR_MODIFIED="DOMAttrModified",t.INSERTED="DOMNodeInserted",t.REMOVED="removed",t.MOUNTED="DOMNodeInsertedIntoDocument",t.UNMOUNTED="DOMNodeRemovedFromDocument",t.BOUNDS_CHANGED="bounds-changed",t.CULLED="culled"})(Di||(Di={}));function qk(t){var e=t.renderable;e&&(e.renderBoundsDirty=!0,e.boundsDirty=!0)}var AW=new Wf(Di.REPARENT,null,"","","",0,"",""),CW=function(){function t(e){var n=this;this.runtime=e,this.pendingEvents=[],this.boundsChangedEvent=new ua(Di.BOUNDS_CHANGED),this.rotate=function(){var r=ze();return function(i,o,a,s,c){a===void 0&&(a=0),s===void 0&&(s=0),c===void 0&&(c=!0),typeof o=="number"&&(o=te(o,a,s));var l=i.transformable;if(i.parentNode===null||!i.parentNode.transformable)n.rotateLocal(i,o);else{var u=ze();ba(u,o[0],o[1],o[2]);var f=n.getRotation(i),d=n.getRotation(i.parentNode);Io(r,d),Us(r,r),ni(u,r,u),ni(l.localRotation,u,f),Oc(l.localRotation,l.localRotation),c&&n.dirtifyLocal(i,l)}}}(),this.rotateLocal=function(){var r=ze();return function(i,o,a,s,c){a===void 0&&(a=0),s===void 0&&(s=0),c===void 0&&(c=!0),typeof o=="number"&&(o=te(o,a,s));var l=i.transformable;ba(r,o[0],o[1],o[2]),Qa(l.localRotation,l.localRotation,r),c&&n.dirtifyLocal(i,l)}}(),this.setEulerAngles=function(){var r=ze();return function(i,o,a,s,c){a===void 0&&(a=0),s===void 0&&(s=0),c===void 0&&(c=!0),typeof o=="number"&&(o=te(o,a,s));var l=i.transformable;if(i.parentNode===null||!i.parentNode.transformable)n.setLocalEulerAngles(i,o);else{ba(l.localRotation,o[0],o[1],o[2]);var u=n.getRotation(i.parentNode);Io(r,Us(ze(),u)),Qa(l.localRotation,l.localRotation,r),c&&n.dirtifyLocal(i,l)}}}(),this.translateLocal=function(){return function(r,i,o,a,s){o===void 0&&(o=0),a===void 0&&(a=0),s===void 0&&(s=!0),typeof i=="number"&&(i=te(i,o,a));var c=r.transformable;fn(i,Gt())||(re(i,i,c.localRotation),No(c.localPosition,c.localPosition,i),s&&n.dirtifyLocal(r,c))}}(),this.setPosition=function(){var r=ue(),i=Gt();return function(o,a,s){s===void 0&&(s=!0);var c=o.transformable;if(i[0]=a[0],i[1]=a[1],i[2]=a[2]||0,!fn(n.getPosition(o),i)){if(lr(c.position,i),o.parentNode===null||!o.parentNode.transformable)lr(c.localPosition,i);else{var l=o.parentNode.transformable;ga(r,l.worldTransform),pr(r,r),Ft(c.localPosition,i,r)}s&&n.dirtifyLocal(o,c)}}}(),this.setLocalPosition=function(){var r=Gt();return function(i,o,a){a===void 0&&(a=!0);var s=i.transformable;r[0]=o[0],r[1]=o[1],r[2]=o[2]||0,!fn(s.localPosition,r)&&(lr(s.localPosition,r),a&&n.dirtifyLocal(i,s))}}(),this.translate=function(){var r=Gt(),i=Gt(),o=Gt();return function(a,s,c,l,u){c===void 0&&(c=0),l===void 0&&(l=0),u===void 0&&(u=!0),typeof s=="number"&&(s=Dn(i,s,c,l)),!fn(s,r)&&(No(o,n.getPosition(a),s),n.setPosition(a,o,u))}}(),this.setRotation=function(){var r=ze();return function(i,o,a,s,c,l){l===void 0&&(l=!0);var u=i.transformable;if(typeof o=="number"&&(o=Vs(o,a,s,c)),i.parentNode===null||!i.parentNode.transformable)n.setLocalRotation(i,o);else{var f=n.getRotation(i.parentNode);Io(r,f),Us(r,r),ni(u.localRotation,r,o),Oc(u.localRotation,u.localRotation),l&&n.dirtifyLocal(i,u)}}},this.displayObjectDependencyMap=new WeakMap,this.calcLocalTransform=function(){var r=ue(),i=Gt(),o=Vs(0,0,0,1);return function(a){var s=a.localSkew[0]!==0||a.localSkew[1]!==0;if(s){if(Sr(a.localTransform,a.localRotation,a.localPosition,te(1,1,1),a.origin),a.localSkew[0]!==0||a.localSkew[1]!==0){var c=po(r);c[4]=Math.tan(a.localSkew[0]),c[1]=Math.tan(a.localSkew[1]),Pn(a.localTransform,a.localTransform,c)}var l=Sr(r,o,i,a.localScale,a.origin);Pn(a.localTransform,a.localTransform,l)}else Sr(a.localTransform,a.localRotation,a.localPosition,a.localScale,a.origin)}}()}return t.prototype.matches=function(e,n){return this.runtime.sceneGraphSelector.is(e,n)},t.prototype.querySelector=function(e,n){return this.runtime.sceneGraphSelector.selectOne(e,n)},t.prototype.querySelectorAll=function(e,n){return this.runtime.sceneGraphSelector.selectAll(e,n)},t.prototype.attach=function(e,n,r){var i,o=!1;e.parentNode&&(o=e.parentNode!==n,this.detach(e)),e.parentNode=n,Lt(r)?e.parentNode.childNodes.push(e):e.parentNode.childNodes.splice(r,0,e);var a=n.sortable;(!((i=a==null?void 0:a.sorted)===null||i===void 0)&&i.length||e.parsedStyle.zIndex)&&(a.dirtyChildren.indexOf(e)===-1&&a.dirtyChildren.push(e),a.dirty=!0,a.dirtyReason=Lh.ADDED);var s=e.transformable;s&&this.dirtifyWorld(e,s),s.frozen&&this.unfreezeParentToRoot(e),o&&e.dispatchEvent(AW)},t.prototype.detach=function(e){var n,r;if(e.parentNode){var i=e.transformable,o=e.parentNode.sortable;(!((n=o==null?void 0:o.sorted)===null||n===void 0)&&n.length||!((r=e.style)===null||r===void 0)&&r.zIndex)&&(o.dirtyChildren.indexOf(e)===-1&&o.dirtyChildren.push(e),o.dirty=!0,o.dirtyReason=Lh.REMOVED);var a=e.parentNode.childNodes.indexOf(e);a>-1&&e.parentNode.childNodes.splice(a,1),i&&this.dirtifyWorld(e,i),e.parentNode=null}},t.prototype.getOrigin=function(e){return e.getGeometryBounds(),e.transformable.origin},t.prototype.setOrigin=function(e,n,r,i){r===void 0&&(r=0),i===void 0&&(i=0),typeof n=="number"&&(n=[n,r,i]);var o=e.transformable;if(!(n[0]===o.origin[0]&&n[1]===o.origin[1]&&n[2]===o.origin[2])){var a=o.origin;a[0]=n[0],a[1]=n[1],a[2]=n[2]||0,this.dirtifyLocal(e,o)}},t.prototype.setLocalEulerAngles=function(e,n,r,i,o){r===void 0&&(r=0),i===void 0&&(i=0),o===void 0&&(o=!0),typeof n=="number"&&(n=te(n,r,i));var a=e.transformable;ba(a.localRotation,n[0],n[1],n[2]),o&&this.dirtifyLocal(e,a)},t.prototype.scaleLocal=function(e,n,r){r===void 0&&(r=!0);var i=e.transformable;uf(i.localScale,i.localScale,te(n[0],n[1],n[2]||1)),r&&this.dirtifyLocal(e,i)},t.prototype.setLocalScale=function(e,n,r){r===void 0&&(r=!0);var i=e.transformable,o=te(n[0],n[1],n[2]||i.localScale[2]);fn(o,i.localScale)||(lr(i.localScale,o),r&&this.dirtifyLocal(e,i))},t.prototype.setLocalRotation=function(e,n,r,i,o,a){a===void 0&&(a=!0),typeof n=="number"&&(n=Vs(n,r,i,o));var s=e.transformable;Io(s.localRotation,n),a&&this.dirtifyLocal(e,s)},t.prototype.setLocalSkew=function(e,n,r){typeof n=="number"&&(n=Do(n,r));var i=e.transformable;xn(i.localSkew,n),this.dirtifyLocal(e,i)},t.prototype.dirtifyLocal=function(e,n){n.localDirtyFlag||(n.localDirtyFlag=!0,n.dirtyFlag||this.dirtifyWorld(e,n))},t.prototype.dirtifyWorld=function(e,n){n.dirtyFlag||this.unfreezeParentToRoot(e),this.dirtifyWorldInternal(e,n),this.dirtifyToRoot(e,!0)},t.prototype.triggerPendingEvents=function(){var e=this,n=new Set,r=function(i,o){i.isConnected&&!n.has(i.entity)&&(e.boundsChangedEvent.detail=o,e.boundsChangedEvent.target=i,i.isMutationObserved?i.dispatchEvent(e.boundsChangedEvent):i.ownerDocument.defaultView.dispatchEvent(e.boundsChangedEvent,!0),n.add(i.entity))};this.pendingEvents.forEach(function(i){var o=j(i,2),a=o[0],s=o[1];s.affectChildren?a.forEach(function(c){r(c,s)}):r(a,s)}),this.clearPendingEvents(),n.clear()},t.prototype.clearPendingEvents=function(){this.pendingEvents=[]},t.prototype.dirtifyToRoot=function(e,n){n===void 0&&(n=!1);var r=e;for(r.renderable&&(r.renderable.dirty=!0);r;)qk(r),r=r.parentNode;n&&e.forEach(function(i){qk(i)}),this.informDependentDisplayObjects(e),this.pendingEvents.push([e,{affectChildren:n}])},t.prototype.updateDisplayObjectDependency=function(e,n,r,i){if(n&&n!==r){var o=this.displayObjectDependencyMap.get(n);if(o&&o[e]){var a=o[e].indexOf(i);o[e].splice(a,1)}}if(r){var s=this.displayObjectDependencyMap.get(r);s||(this.displayObjectDependencyMap.set(r,{}),s=this.displayObjectDependencyMap.get(r)),s[e]||(s[e]=[]),s[e].push(i)}},t.prototype.informDependentDisplayObjects=function(e){var n=this,r=this.displayObjectDependencyMap.get(e);r&&Object.keys(r).forEach(function(i){r[i].forEach(function(o){n.dirtifyToRoot(o,!0),o.dispatchEvent(new Wf(Di.ATTR_MODIFIED,o,n,n,i,Wf.MODIFICATION,n,n)),o.isCustomElement&&o.isConnected&&o.attributeChangedCallback&&o.attributeChangedCallback(i,n,n)})})},t.prototype.getPosition=function(e){var n=e.transformable;return Ka(n.position,this.getWorldTransform(e,n))},t.prototype.getRotation=function(e){var n=e.transformable;return Za(n.rotation,this.getWorldTransform(e,n))},t.prototype.getScale=function(e){var n=e.transformable;return Li(n.scaling,this.getWorldTransform(e,n))},t.prototype.getWorldTransform=function(e,n){return n===void 0&&(n=e.transformable),!n.localDirtyFlag&&!n.dirtyFlag||(e.parentNode&&e.parentNode.transformable&&this.getWorldTransform(e.parentNode),this.sync(e,n)),n.worldTransform},t.prototype.getLocalPosition=function(e){return e.transformable.localPosition},t.prototype.getLocalRotation=function(e){return e.transformable.localRotation},t.prototype.getLocalScale=function(e){return e.transformable.localScale},t.prototype.getLocalSkew=function(e){return e.transformable.localSkew},t.prototype.getLocalTransform=function(e){var n=e.transformable;return n.localDirtyFlag&&(this.calcLocalTransform(n),n.localDirtyFlag=!1),n.localTransform},t.prototype.setLocalTransform=function(e,n){var r=Ka(Gt(),n),i=Za(ze(),n),o=Li(Gt(),n);this.setLocalScale(e,o,!1),this.setLocalPosition(e,r,!1),this.setLocalRotation(e,i,void 0,void 0,void 0,!1),this.dirtifyLocal(e,e.transformable)},t.prototype.resetLocalTransform=function(e){this.setLocalScale(e,[1,1,1]),this.setLocalPosition(e,[0,0,0]),this.setLocalEulerAngles(e,[0,0,0]),this.setLocalSkew(e,[0,0])},t.prototype.getTransformedGeometryBounds=function(e,n,r){n===void 0&&(n=!1);var i=this.getGeometryBounds(e,n);if(ca.isEmpty(i))return null;var o=r||new ca;return o.setFromTransformedAABB(i,this.getWorldTransform(e)),o},t.prototype.getGeometryBounds=function(e,n){n===void 0&&(n=!1);var r=e.geometry;r.dirty&&Et.styleValueRegistry.updateGeometry(e);var i=n?r.renderBounds:r.contentBounds||null;return i||new ca},t.prototype.getBounds=function(e,n){var r=this;n===void 0&&(n=!1);var i=e.renderable;if(!i.boundsDirty&&!n&&i.bounds)return i.bounds;if(!i.renderBoundsDirty&&n&&i.renderBounds)return i.renderBounds;var o=n?i.renderBounds:i.bounds,a=this.getTransformedGeometryBounds(e,n,o),s=e.childNodes;if(s.forEach(function(u){var f=r.getBounds(u,n);f&&(a?a.add(f):(a=o||new ca,a.update(f.center,f.halfExtents)))}),a||(a=new ca),n){var c=Wz(e);if(c){var l=c.parsedStyle.clipPath.getBounds(n);a?l&&(a=l.intersection(a)):a.update(l.center,l.halfExtents)}}return n?(i.renderBounds=a,i.renderBoundsDirty=!1):(i.bounds=a,i.boundsDirty=!1),a},t.prototype.getLocalBounds=function(e){if(e.parentNode){var n=ue();e.parentNode.transformable&&(n=pr(ue(),this.getWorldTransform(e.parentNode)));var r=this.getBounds(e);if(!ca.isEmpty(r)){var i=new ca;return i.setFromTransformedAABB(r,n),i}}return this.getBounds(e)},t.prototype.getBoundingClientRect=function(e){var n,r,i,o=this.getGeometryBounds(e);ca.isEmpty(o)||(i=new ca,i.setFromTransformedAABB(o,this.getWorldTransform(e)));var a=(r=(n=e.ownerDocument)===null||n===void 0?void 0:n.defaultView)===null||r===void 0?void 0:r.getContextService().getBoundingClientRect();if(i){var s=j(i.getMin(),2),c=s[0],l=s[1],u=j(i.getMax(),2),f=u[0],d=u[1];return new Ch(c+((a==null?void 0:a.left)||0),l+((a==null?void 0:a.top)||0),f-c,d-l)}return new Ch((a==null?void 0:a.left)||0,(a==null?void 0:a.top)||0,0,0)},t.prototype.dirtifyWorldInternal=function(e,n){var r=this;if(!n.dirtyFlag){n.dirtyFlag=!0,n.frozen=!1,e.childNodes.forEach(function(o){var a=o.transformable;a.dirtyFlag||r.dirtifyWorldInternal(o,a)});var i=e.renderable;i&&(i.renderBoundsDirty=!0,i.boundsDirty=!0,i.dirty=!0)}},t.prototype.syncHierarchy=function(e){var n=e.transformable;if(!n.frozen){n.frozen=!0,(n.localDirtyFlag||n.dirtyFlag)&&this.sync(e,n);for(var r=e.childNodes,i=0;i<r.length;i++)this.syncHierarchy(r[i])}},t.prototype.sync=function(e,n){if(n.localDirtyFlag&&(this.calcLocalTransform(n),n.localDirtyFlag=!1),n.dirtyFlag){var r=e.parentNode,i=r&&r.transformable;r===null||!i?ga(n.worldTransform,n.localTransform):Pn(n.worldTransform,i.worldTransform,n.localTransform),n.dirtyFlag=!1}},t.prototype.unfreezeParentToRoot=function(e){for(var n=e.parentNode;n;){var r=n.transformable;r&&(r.frozen=!1),n=n.parentNode}},t}(),Yf={MetricsString:"|\xC9q\xC5",BaselineSymbol:"M",BaselineMultiplier:1.4,HeightMultiplier:2,Newlines:[10,13],BreakingSpaces:[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]},Kk=/[a-zA-Z0-9\u00C0-\u00D6\u00D8-\u00f6\u00f8-\u00ff!"#$%&'()*+,-./:;]/,kW=/[!%),.:;?\]}'""]/,NW=/[$('"]/,RW=/[!),.:;?\]}'""]/,LW=/[([{'"]/,IW=/[)\]'"?!:;,.]/,DW=/[(['"...]/,BW=/[!%),.:;?\]}'"]/,FW=/[$([{'"#]/,jW=new RegExp("".concat(kW.source,"|").concat(RW.source,"|").concat(IW.source,"|").concat(BW.source)),GW=new RegExp("".concat(NW.source,"|").concat(LW.source,"|").concat(DW.source,"|").concat(FW.source)),zW=function(){function t(e){var n=this;this.runtime=e,this.fontMetricsCache={},this.shouldBreakByKinsokuShorui=function(r,i){return n.isBreakingSpace(i)?!1:!!(r&&(GW.exec(i)||jW.exec(r)))},this.trimByKinsokuShorui=function(r){var i=ut([],j(r),!1),o=i[i.length-2];if(!o)return r;var a=o[o.length-1];return i[i.length-2]=o.slice(0,-1),i[i.length-1]=a+i[i.length-1],i}}return t.prototype.measureFont=function(e,n){if(this.fontMetricsCache[e])return this.fontMetricsCache[e];var r={ascent:0,descent:0,fontSize:0},i=this.runtime.offscreenCanvasCreator.getOrCreateCanvas(n),o=this.runtime.offscreenCanvasCreator.getOrCreateContext(n,{willReadFrequently:!0});o.font=e;var a=Yf.MetricsString+Yf.BaselineSymbol,s=Math.ceil(o.measureText(a).width),c=Math.ceil(o.measureText(Yf.BaselineSymbol).width),l=Yf.HeightMultiplier*c;c=c*Yf.BaselineMultiplier|0,i.width=s,i.height=l,o.fillStyle="#f00",o.fillRect(0,0,s,l),o.font=e,o.textBaseline="alphabetic",o.fillStyle="#000",o.fillText(a,0,c);var u=o.getImageData(0,0,s||1,l||1).data,f=u.length,d=s*4,h=0,p=0,v=!1;for(h=0;h<c;++h){for(var y=0;y<d;y+=4)if(u[p+y]!==255){v=!0;break}if(!v)p+=d;else break}for(r.ascent=c-h,p=f-d,v=!1,h=l;h>c;--h){for(var y=0;y<d;y+=4)if(u[p+y]!==255){v=!0;break}if(!v)p-=d;else break}return r.descent=h-c,r.fontSize=r.ascent+r.descent,this.fontMetricsCache[e]=r,r},t.prototype.measureText=function(e,n,r){var i=n.fontSize,o=i===void 0?16:i,a=n.wordWrap,s=a===void 0?!1:a,c=n.lineHeight,l=n.lineWidth,u=l===void 0?1:l,f=n.textBaseline,d=f===void 0?"alphabetic":f,h=n.textAlign,p=h===void 0?"start":h,v=n.letterSpacing,y=v===void 0?0:v,m=n.textPath;n.textPathSide,n.textPathStartOffset;var b=n.leading,O=b===void 0?0:b,E=sW(n),w=this.measureFont(E,r);w.fontSize===0&&(w.fontSize=o,w.ascent=o);var _=this.runtime.offscreenCanvasCreator.getOrCreateContext(r);_.font=E,n.isOverflowing=!1;var S=s?this.wordWrap(e,n,r):e,M=S.split(/(?:\r\n|\r|\n)/),T=new Array(M.length),A=0;if(m){m.getTotalLength();for(var C=0;C<M.length;C++)var N=_.measureText(M[C]).width+(M[C].length-1)*y}else{for(var C=0;C<M.length;C++){var k=_.measureText(M[C]).width+(M[C].length-1)*y;T[C]=k,A=Math.max(A,k)}var N=A+u,R=c||w.fontSize+u,I=Math.max(R,w.fontSize+u)+(M.length-1)*(R+O);R+=O;var D=0;return d==="middle"?D=-I/2:d==="bottom"||d==="alphabetic"||d==="ideographic"?D=-I:(d==="top"||d==="hanging")&&(D=0),{font:E,width:N,height:I,lines:M,lineWidths:T,lineHeight:R,maxLineWidth:A,fontProperties:w,lineMetrics:T.map(function(F,G){var X=0;return p==="center"||p==="middle"?X-=F/2:(p==="right"||p==="end")&&(X-=F),new Ch(X-u/2,D+G*R,F+u,R)})}}},t.prototype.setGraphemeOnPath=function(){},t.prototype.wordWrap=function(e,n,r){var i=this,o=n.wordWrapWidth,a=o===void 0?0:o,s=n.letterSpacing,c=s===void 0?0:s,l=n.maxLines,u=l===void 0?1/0:l,f=n.textOverflow,d=this.runtime.offscreenCanvasCreator.getOrCreateContext(r),h=a+c,p="";f==="ellipsis"?p="...":f&&f!=="clip"&&(p=f);for(var v=[],y=0,m=0,b={},O=function(D){return i.getFromCache(D,c,b,d)},E=Array.from(p).reduce(function(D,B){return D+O(B)},0),w=Array.from(e),_=0;_<w.length;_++){var S=w[_],M=e[_-1],T=e[_+1],A=O(S);if(this.isNewline(S)){if(y++,y>=u){n.isOverflowing=!0;break}m=0,v[y]="";continue}if(m>0&&m+A>h){if(y+1>=u){if(n.isOverflowing=!0,E>0&&E<=h){for(var C=v[y].length,N=0,k=C,R=0;R<C;R++){var I=O(v[y][R]);if(N+I+E>h){k=R;break}N+=I}v[y]=(v[y]||"").slice(0,k)+p}break}if(y++,m=0,v[y]="",this.isBreakingSpace(S))continue;this.canBreakInLastChar(S)||(v=this.trimToBreakable(v),m=this.sumTextWidthByCache(v[y]||"",b)),this.shouldBreakByKinsokuShorui(S,T)&&(v=this.trimByKinsokuShorui(v),m+=O(M||""))}m+=A,v[y]=(v[y]||"")+S}return v.join(`
`)},t.prototype.isBreakingSpace=function(e){return typeof e!="string"?!1:Yf.BreakingSpaces.indexOf(e.charCodeAt(0))>=0},t.prototype.isNewline=function(e){return typeof e!="string"?!1:Yf.Newlines.indexOf(e.charCodeAt(0))>=0},t.prototype.trimToBreakable=function(e){var n=ut([],j(e),!1),r=n[n.length-2],i=this.findBreakableIndex(r);if(i===-1||!r)return n;var o=r.slice(i,i+1),a=this.isBreakingSpace(o),s=i+1,c=i+(a?0:1);return n[n.length-1]+=r.slice(s,r.length),n[n.length-2]=r.slice(0,c),n},t.prototype.canBreakInLastChar=function(e){return!(e&&Kk.test(e))},t.prototype.sumTextWidthByCache=function(e,n){return e.split("").reduce(function(r,i){if(!n[i])throw Error("cannot count the word without cache");return r+n[i]},0)},t.prototype.findBreakableIndex=function(e){for(var n=e.length-1;n>=0;n--)if(!Kk.test(e[n]))return n;return-1},t.prototype.getFromCache=function(e,n,r,i){var o=r[e];if(typeof o!="number"){var a=e.length*n;o=i.measureText(e).width+a,r[e]=o}return o},t}(),Et={},WW=function(){var t,e=new mW,n=new yW;return t={},t[ge.CIRCLE]=new hW,t[ge.ELLIPSE]=new pW,t[ge.RECT]=e,t[ge.IMAGE]=e,t[ge.GROUP]=new bW,t[ge.LINE]=new vW,t[ge.TEXT]=new xW(Et),t[ge.POLYLINE]=n,t[ge.POLYGON]=n,t[ge.PATH]=new gW,t[ge.HTML]=new _W,t[ge.MESH]=null,t}(),YW=function(){var t,e=new Sz,n=new tE;return t={},t[se.PERCENTAGE]=null,t[se.NUMBER]=new Cz,t[se.ANGLE]=new Oz,t[se.DEFINED_PATH]=new Ez,t[se.PAINT]=e,t[se.COLOR]=e,t[se.FILTER]=new Mz,t[se.LENGTH]=n,t[se.LENGTH_PERCENTAGE]=n,t[se.LENGTH_PERCENTAGE_12]=new Pz,t[se.LENGTH_PERCENTAGE_14]=new Tz,t[se.COORDINATE]=new tE,t[se.OFFSET_DISTANCE]=new kz,t[se.OPACITY_VALUE]=new Nz,t[se.PATH]=new Rz,t[se.LIST_OF_POINTS]=new Lz,t[se.SHADOW_BLUR]=new Iz,t[se.TEXT]=new Dz,t[se.TEXT_TRANSFORM]=new Bz,t[se.TRANSFORM]=new uW,t[se.TRANSFORM_ORIGIN]=new fW,t[se.Z_INDEX]=new dW,t[se.MARKER]=new Az,t}(),HW=function(){return typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof gt.g!="undefined"?gt.g:{}};Et.CameraContribution=yG,Et.AnimationTimeline=null,Et.EasingFunction=null,Et.offscreenCanvasCreator=new SW,Et.sceneGraphSelector=new TW,Et.sceneGraphService=new CW(Et),Et.textService=new zW(Et),Et.geometryUpdaterFactory=WW,Et.CSSPropertySyntaxFactory=YW,Et.styleValueRegistry=new wz(Et),Et.layoutRegistry=null,Et.globalThis=HW(),Et.enableCSSParsing=!1,Et.enableDataset=!1,Et.enableStyleSyntax=!0,Et.enableAttributeDashCased=!1,Et.enableSizeAttenuation=!1;var Zk=0;function m0t(){Zk=0}var Jk=new Wf(Di.INSERTED,null,"","","",0,"",""),Qk=new Wf(Di.REMOVED,null,"","","",0,"",""),UW=new ua(Di.DESTROY),VW=function(t){xt(e,t);function e(){var n=t.call(this)||this;return n.entity=Zk++,n.renderable={bounds:void 0,boundsDirty:!0,renderBounds:void 0,renderBoundsDirty:!0,dirtyRenderBounds:void 0,dirty:!1},n.cullable={strategy:HO.Standard,visibilityPlaneMask:-1,visible:!0,enable:!0},n.transformable={dirtyFlag:!1,localDirtyFlag:!1,frozen:!1,localPosition:[0,0,0],localRotation:[0,0,0,1],localScale:[1,1,1],localTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],localSkew:[0,0],position:[0,0,0],rotation:[0,0,0,1],scaling:[1,1,1],worldTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],origin:[0,0,0]},n.sortable={dirty:!1,sorted:void 0,renderOrder:0,dirtyChildren:[],dirtyReason:void 0},n.geometry={contentBounds:void 0,renderBounds:void 0,dirty:!0},n.rBushNode={aabb:void 0},n.namespaceURI="g",n.scrollLeft=0,n.scrollTop=0,n.clientTop=0,n.clientLeft=0,n.destroyed=!1,n.style={},n.computedStyle=Et.enableCSSParsing?{opacity:Pr,fillOpacity:Pr,strokeOpacity:Pr,fill:Pr,stroke:Pr,transform:Pr,transformOrigin:Pr,visibility:Pr,pointerEvents:Pr,lineWidth:Pr,lineCap:Pr,lineJoin:Pr,increasedLineWidthForHitTesting:Pr,fontSize:Pr,fontFamily:Pr,fontStyle:Pr,fontWeight:Pr,fontVariant:Pr,textAlign:Pr,textBaseline:Pr,textTransform:Pr,zIndex:Pr,filter:Pr,shadowType:Pr}:null,n.parsedStyle={},n.attributes={},n}return Object.defineProperty(e.prototype,"className",{get:function(){return this.getAttribute("class")||""},set:function(n){this.setAttribute("class",n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"classList",{get:function(){return this.className.split(" ").filter(function(n){return n!==""})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tagName",{get:function(){return this.nodeName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"children",{get:function(){return this.childNodes},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"childElementCount",{get:function(){return this.childNodes.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"firstElementChild",{get:function(){return this.firstChild},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastElementChild",{get:function(){return this.lastChild},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parentElement",{get:function(){return this.parentNode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){if(this.parentNode){var n=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[n+1]||null}return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){if(this.parentNode){var n=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[n-1]||null}return null},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(n){throw new Error(Vr)},e.prototype.appendChild=function(n,r){var i;if(n.destroyed)throw new Error(gG);return Et.sceneGraphService.attach(n,this,r),!((i=this.ownerDocument)===null||i===void 0)&&i.defaultView&&this.ownerDocument.defaultView.mountChildren(n),this.isMutationObserved&&(Jk.relatedNode=this,n.dispatchEvent(Jk)),n},e.prototype.insertBefore=function(n,r){if(!r)this.appendChild(n);else{n.parentElement&&n.parentElement.removeChild(n);var i=this.childNodes.indexOf(r);i===-1?this.appendChild(n):this.appendChild(n,i)}return n},e.prototype.replaceChild=function(n,r){var i=this.childNodes.indexOf(r);return this.removeChild(r),this.appendChild(n,i),r},e.prototype.removeChild=function(n){var r;return Qk.relatedNode=this,n.dispatchEvent(Qk),!((r=n.ownerDocument)===null||r===void 0)&&r.defaultView&&n.ownerDocument.defaultView.unmountChildren(n),Et.sceneGraphService.detach(n),n},e.prototype.removeChildren=function(){for(var n=this.childNodes.length-1;n>=0;n--){var r=this.childNodes[n];this.removeChild(r)}},e.prototype.destroyChildren=function(){for(var n=this.childNodes.length-1;n>=0;n--){var r=this.childNodes[n];r.childNodes.length&&r.destroyChildren(),r.destroy()}},e.prototype.matches=function(n){return Et.sceneGraphService.matches(n,this)},e.prototype.getElementById=function(n){return Et.sceneGraphService.querySelector("#".concat(n),this)},e.prototype.getElementsByName=function(n){return Et.sceneGraphService.querySelectorAll('[name="'.concat(n,'"]'),this)},e.prototype.getElementsByClassName=function(n){return Et.sceneGraphService.querySelectorAll(".".concat(n),this)},e.prototype.getElementsByTagName=function(n){return Et.sceneGraphService.querySelectorAll(n,this)},e.prototype.querySelector=function(n){return Et.sceneGraphService.querySelector(n,this)},e.prototype.querySelectorAll=function(n){return Et.sceneGraphService.querySelectorAll(n,this)},e.prototype.closest=function(n){var r=this;do{if(Et.sceneGraphService.matches(n,r))return r;r=r.parentElement}while(r!==null);return null},e.prototype.find=function(n){var r=this,i=null;return this.forEach(function(o){return o!==r&&n(o)?(i=o,!0):!1}),i},e.prototype.findAll=function(n){var r=this,i=[];return this.forEach(function(o){o!==r&&n(o)&&i.push(o)}),i},e.prototype.after=function(){for(var n=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(this.parentNode){var o=this.parentNode.childNodes.indexOf(this);r.forEach(function(a,s){var c;return(c=n.parentNode)===null||c===void 0?void 0:c.appendChild(a,o+s+1)})}},e.prototype.before=function(){for(var n,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(this.parentNode){var o=this.parentNode.childNodes.indexOf(this),a=j(r),s=a[0],c=a.slice(1);this.parentNode.appendChild(s,o),(n=s).after.apply(n,ut([],j(c),!1))}},e.prototype.replaceWith=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];this.after.apply(this,ut([],j(n),!1)),this.remove()},e.prototype.append=function(){for(var n=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];r.forEach(function(o){return n.appendChild(o)})},e.prototype.prepend=function(){for(var n=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];r.forEach(function(o,a){return n.appendChild(o,a)})},e.prototype.replaceChildren=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];for(;this.childNodes.length&&this.firstChild;)this.removeChild(this.firstChild);this.append.apply(this,ut([],j(n),!1))},e.prototype.remove=function(){return this.parentNode?this.parentNode.removeChild(this):this},e.prototype.destroy=function(){this.dispatchEvent(UW),this.remove(),this.emitter.removeAllListeners(),this.destroyed=!0},e.prototype.getGeometryBounds=function(){return Et.sceneGraphService.getGeometryBounds(this)},e.prototype.getRenderBounds=function(){return Et.sceneGraphService.getBounds(this,!0)},e.prototype.getBounds=function(){return Et.sceneGraphService.getBounds(this)},e.prototype.getLocalBounds=function(){return Et.sceneGraphService.getLocalBounds(this)},e.prototype.getBoundingClientRect=function(){return Et.sceneGraphService.getBoundingClientRect(this)},e.prototype.getClientRects=function(){return[this.getBoundingClientRect()]},e.prototype.computedStyleMap=function(){return new Map(Object.entries(this.computedStyle))},e.prototype.getAttributeNames=function(){return Object.keys(this.attributes)},e.prototype.getAttribute=function(n){if(MG(n))return Et.enableCSSParsing?null:void 0;var r=this.attributes[n];if(r===void 0){if(Et.enableAttributeDashCased){var i=jO(n);r=this.attributes[i]}return Et.enableCSSParsing&&Lt(r)?null:r}else return r},e.prototype.hasAttribute=function(n){return this.getAttributeNames().includes(n)},e.prototype.hasAttributes=function(){return!!this.getAttributeNames().length},e.prototype.removeAttribute=function(n){this.setAttribute(n,null),delete this.attributes[n]},e.prototype.setAttribute=function(n,r,i,o){this.attributes[n]=r},e.prototype.getAttributeNS=function(n,r){throw new Error(Vr)},e.prototype.getAttributeNode=function(n){throw new Error(Vr)},e.prototype.getAttributeNodeNS=function(n,r){throw new Error(Vr)},e.prototype.hasAttributeNS=function(n,r){throw new Error(Vr)},e.prototype.removeAttributeNS=function(n,r){throw new Error(Vr)},e.prototype.removeAttributeNode=function(n){throw new Error(Vr)},e.prototype.setAttributeNS=function(n,r,i){throw new Error(Vr)},e.prototype.setAttributeNode=function(n){throw new Error(Vr)},e.prototype.setAttributeNodeNS=function(n){throw new Error(Vr)},e.prototype.toggleAttribute=function(n,r){throw new Error(Vr)},e}(Eo);function Tr(t){return!!(t!=null&&t.nodeName)}var tN=Et.globalThis.Proxy?Et.globalThis.Proxy:function(){},Il=new Wf(Di.ATTR_MODIFIED,null,null,null,null,Wf.MODIFICATION,null,null),XW={opacity:"",fillOpacity:"",strokeOpacity:"",fill:"",stroke:"",transform:"",transformOrigin:"",visibility:"",pointerEvents:"",lineWidth:"",lineCap:"",lineJoin:"",increasedLineWidthForHitTesting:"",fontSize:"",fontFamily:"",fontStyle:"",fontWeight:"",fontVariant:"",textAlign:"",textBaseline:"",textTransform:"",zIndex:"",filter:"",shadowType:""},$W={fill:k1,stroke:k1,transform:[],zIndex:0,filter:[],shadowType:"outer",miterLimit:10},qW=["opacity","fillOpacity","strokeOpacity","transformOrigin","visibility","pointerEvents","lineWidth","lineCap","lineJoin","increasedLineWidthForHitTesting"],KW=ut(ut([],j(qW),!1),["fontSize","fontFamily","fontStyle","fontWeight","fontVariant","textAlign","textBaseline","textTransform"],!1),eN="data-",Ss=function(t){xt(e,t);function e(n){var r=t.call(this)||this;return r.isCustomElement=!1,r.isMutationObserved=!1,r.activeAnimations=[],r.config=n,r.id=r.config.id||"",r.name=r.config.name||"",(r.config.className||r.config.class)&&(r.className=r.config.className||r.config.class),r.nodeName=r.config.type||ge.GROUP,Et.enableCSSParsing?(Object.assign(r.attributes,XW),Object.assign(r.parsedStyle,$W,r.config.initialParsedStyle)):r.config.initialParsedStyle&&Object.assign(r.parsedStyle,r.config.initialParsedStyle),r.initAttributes(r.config.style),Et.enableDataset&&(r.dataset=new tN({},{get:function(i,o){var a="".concat(eN).concat(dk(o));return i[a]!==void 0?i[a]:r.getAttribute(a)},set:function(i,o,a){return r.setAttribute("".concat(eN).concat(dk(o)),a),!0}})),Et.enableStyleSyntax&&(r.style=new tN({setProperty:function(i,o){r.setAttribute(i,o)},getPropertyValue:function(i){return r.getAttribute(i)},removeProperty:function(i){r.removeAttribute(i)},item:function(){return""}},{get:function(i,o){return i[o]!==void 0?i[o]:r.getAttribute(o)},set:function(i,o,a){return r.setAttribute(o,a),!0}})),r}return e.prototype.destroy=function(){t.prototype.destroy.call(this),this.getAnimations().forEach(function(n){n.cancel()})},e.prototype.cloneNode=function(n,r){var i=nt({},this.attributes);for(var o in i){var a=i[o];Tr(a)&&o!=="clipPath"&&o!=="offsetPath"&&o!=="textPath"&&(i[o]=a.cloneNode(n)),r&&(i[o]=r(o,a))}var s=new this.constructor({id:this.id,name:this.name,className:this.name,interactive:this.interactive,style:i});return s.setLocalTransform(this.getLocalTransform()),n&&this.children.forEach(function(c){if(!c.style.isMarker){var l=c.cloneNode(n);s.appendChild(l)}}),s},e.prototype.initAttributes=function(n){n===void 0&&(n={});var r=this.renderable,i={forceUpdateGeometry:!0};Et.enableCSSParsing&&(i.usedAttributes=KW);var o=n;if(Et.enableAttributeDashCased){o={};for(var a in n){var s=jO(a);o[s]=n[a]}}Et.styleValueRegistry.processProperties(this,o,i),r.dirty=!0},e.prototype.setAttribute=function(n,r,i,o){i===void 0&&(i=!1),o===void 0&&(o=!0),Et.enableAttributeDashCased&&(n=jO(n)),!le(r)&&(i||r!==this.attributes[n])&&(this.internalSetAttribute(n,r,{memoize:o}),t.prototype.setAttribute.call(this,n,r))},e.prototype.internalSetAttribute=function(n,r,i){var o;i===void 0&&(i={});var a=this.renderable,s=this.attributes[n],c=this.parsedStyle[n];Et.styleValueRegistry.processProperties(this,(o={},o[n]=r,o),i),a.dirty=!0;var l=this.parsedStyle[n];this.isConnected&&(Il.relatedNode=this,Il.prevValue=s,Il.newValue=r,Il.attrName=n,Il.prevParsedValue=c,Il.newParsedValue=l,this.isMutationObserved?this.dispatchEvent(Il):(Il.target=this,this.ownerDocument.defaultView.dispatchEvent(Il,!0))),(this.isCustomElement&&this.isConnected||!this.isCustomElement)&&this.attributeChangedCallback&&this.attributeChangedCallback(n,s,r,c,l)},e.prototype.getBBox=function(){var n=this.getBounds(),r=j(n.getMin(),2),i=r[0],o=r[1],a=j(n.getMax(),2),s=a[0],c=a[1];return new Ch(i,o,s-i,c-o)},e.prototype.setOrigin=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),Et.sceneGraphService.setOrigin(this,Pa(n,r,i)),this},e.prototype.getOrigin=function(){return Et.sceneGraphService.getOrigin(this)},e.prototype.setPosition=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),Et.sceneGraphService.setPosition(this,Pa(n,r,i)),this},e.prototype.setLocalPosition=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),Et.sceneGraphService.setLocalPosition(this,Pa(n,r,i)),this},e.prototype.translate=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),Et.sceneGraphService.translate(this,Pa(n,r,i)),this},e.prototype.translateLocal=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),Et.sceneGraphService.translateLocal(this,Pa(n,r,i)),this},e.prototype.getPosition=function(){return Et.sceneGraphService.getPosition(this)},e.prototype.getLocalPosition=function(){return Et.sceneGraphService.getLocalPosition(this)},e.prototype.scale=function(n,r,i){return this.scaleLocal(n,r,i)},e.prototype.scaleLocal=function(n,r,i){return typeof n=="number"&&(r=r||n,i=i||n,n=Pa(n,r,i)),Et.sceneGraphService.scaleLocal(this,n),this},e.prototype.setLocalScale=function(n,r,i){return typeof n=="number"&&(r=r||n,i=i||n,n=Pa(n,r,i)),Et.sceneGraphService.setLocalScale(this,n),this},e.prototype.getLocalScale=function(){return Et.sceneGraphService.getLocalScale(this)},e.prototype.getScale=function(){return Et.sceneGraphService.getScale(this)},e.prototype.getEulerAngles=function(){var n=j(LO(Gt(),Et.sceneGraphService.getWorldTransform(this)),3),r=n[2];return Os(r)},e.prototype.getLocalEulerAngles=function(){var n=j(LO(Gt(),Et.sceneGraphService.getLocalRotation(this)),3),r=n[2];return Os(r)},e.prototype.setEulerAngles=function(n){return Et.sceneGraphService.setEulerAngles(this,0,0,n),this},e.prototype.setLocalEulerAngles=function(n){return Et.sceneGraphService.setLocalEulerAngles(this,0,0,n),this},e.prototype.rotateLocal=function(n,r,i){return Lt(r)&&Lt(i)?Et.sceneGraphService.rotateLocal(this,0,0,n):Et.sceneGraphService.rotateLocal(this,n,r,i),this},e.prototype.rotate=function(n,r,i){return Lt(r)&&Lt(i)?Et.sceneGraphService.rotate(this,0,0,n):Et.sceneGraphService.rotate(this,n,r,i),this},e.prototype.setRotation=function(n,r,i,o){return Et.sceneGraphService.setRotation(this,n,r,i,o),this},e.prototype.setLocalRotation=function(n,r,i,o){return Et.sceneGraphService.setLocalRotation(this,n,r,i,o),this},e.prototype.setLocalSkew=function(n,r){return Et.sceneGraphService.setLocalSkew(this,n,r),this},e.prototype.getRotation=function(){return Et.sceneGraphService.getRotation(this)},e.prototype.getLocalRotation=function(){return Et.sceneGraphService.getLocalRotation(this)},e.prototype.getLocalSkew=function(){return Et.sceneGraphService.getLocalSkew(this)},e.prototype.getLocalTransform=function(){return Et.sceneGraphService.getLocalTransform(this)},e.prototype.getWorldTransform=function(){return Et.sceneGraphService.getWorldTransform(this)},e.prototype.setLocalTransform=function(n){return Et.sceneGraphService.setLocalTransform(this,n),this},e.prototype.resetLocalTransform=function(){Et.sceneGraphService.resetLocalTransform(this)},e.prototype.getAnimations=function(){return this.activeAnimations},e.prototype.animate=function(n,r){var i,o=(i=this.ownerDocument)===null||i===void 0?void 0:i.timeline;return o?o.play(this,n,r):null},e.prototype.isVisible=function(){var n,r;return Et.enableCSSParsing?((n=this.parsedStyle)===null||n===void 0?void 0:n.visibility)==="visible":((r=this.parsedStyle)===null||r===void 0?void 0:r.visibility)!=="hidden"},Object.defineProperty(e.prototype,"interactive",{get:function(){return this.isInteractive()},set:function(n){this.style.pointerEvents=n?"auto":"none"},enumerable:!1,configurable:!0}),e.prototype.isInteractive=function(){var n;return((n=this.parsedStyle)===null||n===void 0?void 0:n.pointerEvents)!=="none"},e.prototype.isCulled=function(){return!!(this.cullable&&this.cullable.enable&&!this.cullable.visible)},e.prototype.toFront=function(){return this.parentNode&&(this.style.zIndex=Math.max.apply(Math,ut([],j(this.parentNode.children.map(function(n){return Number(n.style.zIndex)})),!1))+1),this},e.prototype.toBack=function(){return this.parentNode&&(this.style.zIndex=Math.min.apply(Math,ut([],j(this.parentNode.children.map(function(n){return Number(n.style.zIndex)})),!1))-1),this},e.prototype.getConfig=function(){return this.config},e.prototype.attr=function(){for(var n=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=j(r,2),a=o[0],s=o[1];return a?Yi(a)?(Object.keys(a).forEach(function(c){n.setAttribute(c,a[c])}),this):r.length===2?(this.setAttribute(a,s),this):this.attributes[a]:this.attributes},e.prototype.getMatrix=function(n){var r=n||this.getWorldTransform(),i=j(Ka(Gt(),r),2),o=i[0],a=i[1],s=j(Li(Gt(),r),2),c=s[0],l=s[1],u=Za(ze(),r),f=j(LO(Gt(),u),3),d=f[0],h=f[2];return lG(d||h,o,a,c,l)},e.prototype.getLocalMatrix=function(){return this.getMatrix(this.getLocalTransform())},e.prototype.setMatrix=function(n){var r=j(ak(n),5),i=r[0],o=r[1],a=r[2],s=r[3],c=r[4];this.setEulerAngles(c).setPosition(i,o).setLocalScale(a,s)},e.prototype.setLocalMatrix=function(n){var r=j(ak(n),5),i=r[0],o=r[1],a=r[2],s=r[3],c=r[4];this.setLocalEulerAngles(c).setLocalPosition(i,o).setLocalScale(a,s)},e.prototype.show=function(){Et.enableCSSParsing?this.style.visibility="visible":this.forEach(function(n){n.style.visibility="visible"})},e.prototype.hide=function(){Et.enableCSSParsing?this.style.visibility="hidden":this.forEach(function(n){n.style.visibility="hidden"})},e.prototype.getCount=function(){return this.childElementCount},e.prototype.getParent=function(){return this.parentElement},e.prototype.getChildren=function(){return this.children},e.prototype.getFirst=function(){return this.firstElementChild},e.prototype.getLast=function(){return this.lastElementChild},e.prototype.getChildByIndex=function(n){return this.children[n]||null},e.prototype.add=function(n,r){return this.appendChild(n,r)},e.prototype.set=function(n,r){this.config[n]=r},e.prototype.get=function(n){return this.config[n]},e.prototype.moveTo=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),this.setPosition(n,r,i),this},e.prototype.move=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),this.setPosition(n,r,i),this},e.prototype.setZIndex=function(n){return this.style.zIndex=n,this},e}(VW),ZW=function(t){xt(e,t);function e(n){return n===void 0&&(n={}),t.call(this,nt({type:ge.CIRCLE},n))||this}return e}(Ss),x0t=function(t){xt(e,t);function e(n){n===void 0&&(n={});var r=this,i=n.style,o=Ge(n,["style"]);return r=t.call(this,nt({style:Et.enableCSSParsing?nt({},i):nt({},i)},o))||this,r.isCustomElement=!0,r}return e}(Ss),JW=function(t){xt(e,t);function e(n){return n===void 0&&(n={}),t.call(this,nt({type:ge.ELLIPSE},n))||this}return e}(Ss),lE=function(t){xt(e,t);function e(n){return n===void 0&&(n={}),t.call(this,nt({type:ge.GROUP},n))||this}return e}(Ss),QW=function(t){xt(e,t);function e(n){n===void 0&&(n={});var r=this,i=n.style,o=Ge(n,["style"]);return r=t.call(this,nt({type:ge.HTML,style:Et.enableCSSParsing?nt({x:"",y:"",width:"auto",height:"auto",innerHTML:""},i):nt({},i)},o))||this,r.cullable.enable=!1,r}return e.prototype.getDomElement=function(){return this.parsedStyle.$el},e.prototype.getClientRects=function(){return[this.getBoundingClientRect()]},e.prototype.getLocalBounds=function(){if(this.parentNode){var n=pr(ue(),this.parentNode.getWorldTransform()),r=this.getBounds();if(!ca.isEmpty(r)){var i=new ca;return i.setFromTransformedAABB(r,n),i}}return this.getBounds()},e}(Ss),tY=function(t){xt(e,t);function e(n){return n===void 0&&(n={}),t.call(this,nt({type:ge.IMAGE},n))||this}return e}(Ss),eY=function(t){xt(e,t);function e(n){n===void 0&&(n={});var r=this,i=n.style,o=Ge(n,["style"]);r=t.call(this,nt({type:ge.LINE,style:nt({x1:0,y1:0,x2:0,y2:0,z1:0,z2:0},i)},o))||this,r.markerStartAngle=0,r.markerEndAngle=0;var a=r.parsedStyle,s=a.markerStart,c=a.markerEnd;return s&&Tr(s)&&(r.markerStartAngle=s.getLocalEulerAngles(),r.appendChild(s)),c&&Tr(c)&&(r.markerEndAngle=c.getLocalEulerAngles(),r.appendChild(c)),r.transformMarker(!0),r.transformMarker(!1),r}return e.prototype.attributeChangedCallback=function(n,r,i,o,a){n==="x1"||n==="y1"||n==="x2"||n==="y2"||n==="markerStartOffset"||n==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):n==="markerStart"?(o&&Tr(o)&&(this.markerStartAngle=0,o.remove()),a&&Tr(a)&&(this.markerStartAngle=a.getLocalEulerAngles(),this.appendChild(a),this.transformMarker(!0))):n==="markerEnd"&&(o&&Tr(o)&&(this.markerEndAngle=0,o.remove()),a&&Tr(a)&&(this.markerEndAngle=a.getLocalEulerAngles(),this.appendChild(a),this.transformMarker(!1)))},e.prototype.transformMarker=function(n){var r=this.parsedStyle,i=r.markerStart,o=r.markerEnd,a=r.markerStartOffset,s=r.markerEndOffset,c=r.x1,l=r.x2,u=r.y1,f=r.y2,d=n?i:o;if(!(!d||!Tr(d))){var h=0,p,v,y,m,b,O;n?(y=c,m=u,p=l-c,v=f-u,b=a||0,O=this.markerStartAngle):(y=l,m=f,p=c-l,v=u-f,b=s||0,O=this.markerEndAngle),h=Math.atan2(v,p),d.setLocalEulerAngles(h*180/Math.PI+O),d.setLocalPosition(y+Math.cos(h)*b,m+Math.sin(h)*b)}},e.prototype.getPoint=function(n,r){r===void 0&&(r=!1);var i=this.parsedStyle,o=i.x1,a=i.y1,s=i.x2,c=i.y2,l=eo(o,a,s,c,n),u=l.x,f=l.y,d=Ft(Gt(),te(u,f,0),r?this.getWorldTransform():this.getLocalTransform());return new Uo(d[0],d[1])},e.prototype.getPointAtLength=function(n,r){return r===void 0&&(r=!1),this.getPoint(n/this.getTotalLength(),r)},e.prototype.getTotalLength=function(){var n=this.parsedStyle,r=n.x1,i=n.y1,o=n.x2,a=n.y2;return Dc(r,i,o,a)},e}(Ss),nY=function(t){xt(e,t);function e(n){n===void 0&&(n={});var r=this,i=n.style,o=Ge(n,["style"]);r=t.call(this,nt({type:ge.PATH,style:Et.enableCSSParsing?nt({d:"",miterLimit:""},i):nt({},i),initialParsedStyle:Et.enableCSSParsing?null:{miterLimit:4,d:nt({},pk)}},o))||this,r.markerStartAngle=0,r.markerEndAngle=0,r.markerMidList=[];var a=r.parsedStyle,s=a.markerStart,c=a.markerEnd,l=a.markerMid;return s&&Tr(s)&&(r.markerStartAngle=s.getLocalEulerAngles(),r.appendChild(s)),l&&Tr(l)&&r.placeMarkerMid(l),c&&Tr(c)&&(r.markerEndAngle=c.getLocalEulerAngles(),r.appendChild(c)),r.transformMarker(!0),r.transformMarker(!1),r}return e.prototype.attributeChangedCallback=function(n,r,i,o,a){n==="d"?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):n==="markerStartOffset"||n==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):n==="markerStart"?(o&&Tr(o)&&(this.markerStartAngle=0,o.remove()),a&&Tr(a)&&(this.markerStartAngle=a.getLocalEulerAngles(),this.appendChild(a),this.transformMarker(!0))):n==="markerEnd"?(o&&Tr(o)&&(this.markerEndAngle=0,o.remove()),a&&Tr(a)&&(this.markerEndAngle=a.getLocalEulerAngles(),this.appendChild(a),this.transformMarker(!1))):n==="markerMid"&&this.placeMarkerMid(a)},e.prototype.transformMarker=function(n){var r=this.parsedStyle,i=r.markerStart,o=r.markerEnd,a=r.markerStartOffset,s=r.markerEndOffset,c=n?i:o;if(!(!c||!Tr(c))){var l=0,u,f,d,h,p,v;if(n){var y=j(this.getStartTangent(),2),m=y[0],b=y[1];d=b[0],h=b[1],u=m[0]-b[0],f=m[1]-b[1],p=a||0,v=this.markerStartAngle}else{var O=j(this.getEndTangent(),2),m=O[0],b=O[1];d=b[0],h=b[1],u=m[0]-b[0],f=m[1]-b[1],p=s||0,v=this.markerEndAngle}l=Math.atan2(f,u),c.setLocalEulerAngles(l*180/Math.PI+v),c.setLocalPosition(d+Math.cos(l)*p,h+Math.sin(l)*p)}},e.prototype.placeMarkerMid=function(n){var r=this.parsedStyle.d.segments;if(this.markerMidList.forEach(function(l){l.remove()}),n&&Tr(n))for(var i=1;i<r.length-1;i++){var o=j(r[i].currentPoint,2),a=o[0],s=o[1],c=i===1?n:n.cloneNode(!0);this.markerMidList.push(c),this.appendChild(c),c.setLocalPosition(a,s)}},e.prototype.getTotalLength=function(){return Ek(this)},e.prototype.getPointAtLength=function(n,r){r===void 0&&(r=!1);var i=this.parsedStyle.d.absolutePath,o=Jd(i,n),a=o.x,s=o.y,c=Ft(Gt(),te(a,s,0),r?this.getWorldTransform():this.getLocalTransform());return new Uo(c[0],c[1])},e.prototype.getPoint=function(n,r){return r===void 0&&(r=!1),this.getPointAtLength(n*Ek(this),r)},e.prototype.getStartTangent=function(){var n=this.parsedStyle.d.segments,r=[];if(n.length>1){var i=n[0].currentPoint,o=n[1].currentPoint,a=n[1].startTangent;r=[],a?(r.push([i[0]-a[0],i[1]-a[1]]),r.push([i[0],i[1]])):(r.push([o[0],o[1]]),r.push([i[0],i[1]]))}return r},e.prototype.getEndTangent=function(){var n=this.parsedStyle.d.segments,r=n.length,i=[];if(r>1){var o=n[r-2].currentPoint,a=n[r-1].currentPoint,s=n[r-1].endTangent;i=[],s?(i.push([a[0]-s[0],a[1]-s[1]]),i.push([a[0],a[1]])):(i.push([o[0],o[1]]),i.push([a[0],a[1]]))}return i},e}(Ss),nN=function(t){xt(e,t);function e(n){n===void 0&&(n={});var r=this,i=n.style,o=Ge(n,["style"]);r=t.call(this,nt({type:ge.POLYGON,style:Et.enableCSSParsing?nt({points:"",miterLimit:"",isClosed:!0},i):nt({},i),initialParsedStyle:Et.enableCSSParsing?null:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!0}},o))||this,r.markerStartAngle=0,r.markerEndAngle=0,r.markerMidList=[];var a=r.parsedStyle,s=a.markerStart,c=a.markerEnd,l=a.markerMid;return s&&Tr(s)&&(r.markerStartAngle=s.getLocalEulerAngles(),r.appendChild(s)),l&&Tr(l)&&r.placeMarkerMid(l),c&&Tr(c)&&(r.markerEndAngle=c.getLocalEulerAngles(),r.appendChild(c)),r.transformMarker(!0),r.transformMarker(!1),r}return e.prototype.attributeChangedCallback=function(n,r,i,o,a){n==="points"?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):n==="markerStartOffset"||n==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):n==="markerStart"?(o&&Tr(o)&&(this.markerStartAngle=0,o.remove()),a&&Tr(a)&&(this.markerStartAngle=a.getLocalEulerAngles(),this.appendChild(a),this.transformMarker(!0))):n==="markerEnd"?(o&&Tr(o)&&(this.markerEndAngle=0,o.remove()),a&&Tr(a)&&(this.markerEndAngle=a.getLocalEulerAngles(),this.appendChild(a),this.transformMarker(!1))):n==="markerMid"&&this.placeMarkerMid(a)},e.prototype.transformMarker=function(n){var r=this.parsedStyle,i=r.markerStart,o=r.markerEnd,a=r.markerStartOffset,s=r.markerEndOffset,c=r.points,l=(c||{}).points,u=n?i:o;if(!(!u||!Tr(u)||!l)){var f=0,d,h,p,v,y,m;if(p=l[0][0],v=l[0][1],n)d=l[1][0]-l[0][0],h=l[1][1]-l[0][1],y=a||0,m=this.markerStartAngle;else{var b=l.length;this.parsedStyle.isClosed?(d=l[b-1][0]-l[0][0],h=l[b-1][1]-l[0][1]):(p=l[b-1][0],v=l[b-1][1],d=l[b-2][0]-l[b-1][0],h=l[b-2][1]-l[b-1][1]),y=s||0,m=this.markerEndAngle}f=Math.atan2(h,d),u.setLocalEulerAngles(f*180/Math.PI+m),u.setLocalPosition(p+Math.cos(f)*y,v+Math.sin(f)*y)}},e.prototype.placeMarkerMid=function(n){var r=this.parsedStyle.points,i=(r||{}).points;if(this.markerMidList.forEach(function(l){l.remove()}),this.markerMidList=[],n&&Tr(n)&&i)for(var o=1;o<(this.parsedStyle.isClosed?i.length:i.length-1);o++){var a=i[o][0],s=i[o][1],c=o===1?n:n.cloneNode(!0);this.markerMidList.push(c),this.appendChild(c),c.setLocalPosition(a,s)}},e}(Ss),rY=function(t){xt(e,t);function e(n){n===void 0&&(n={});var r=n.style,i=Ge(n,["style"]);return t.call(this,nt({type:ge.POLYLINE,style:Et.enableCSSParsing?nt({points:"",miterLimit:"",isClosed:!1},r):nt({},r),initialParsedStyle:Et.enableCSSParsing?null:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!1}},i))||this}return e.prototype.getTotalLength=function(){return ZG(this)},e.prototype.getPointAtLength=function(n,r){return r===void 0&&(r=!1),this.getPoint(n/this.getTotalLength(),r)},e.prototype.getPoint=function(n,r){r===void 0&&(r=!1);var i=this.parsedStyle.points.points;if(this.parsedStyle.points.segments.length===0){var o=[],a=0,s,c,l=this.getTotalLength();i.forEach(function(y,m){i[m+1]&&(s=[0,0],s[0]=a/l,c=Dc(y[0],y[1],i[m+1][0],i[m+1][1]),a+=c,s[1]=a/l,o.push(s))}),this.parsedStyle.points.segments=o}var u=0,f=0;this.parsedStyle.points.segments.forEach(function(y,m){n>=y[0]&&n<=y[1]&&(u=(n-y[0])/(y[1]-y[0]),f=m)});var d=eo(i[f][0],i[f][1],i[f+1][0],i[f+1][1],u),h=d.x,p=d.y,v=Ft(Gt(),te(h,p,0),r?this.getWorldTransform():this.getLocalTransform());return new Uo(v[0],v[1])},e.prototype.getStartTangent=function(){var n=this.parsedStyle.points.points,r=[];return r.push([n[1][0],n[1][1]]),r.push([n[0][0],n[0][1]]),r},e.prototype.getEndTangent=function(){var n=this.parsedStyle.points.points,r=n.length-1,i=[];return i.push([n[r-1][0],n[r-1][1]]),i.push([n[r][0],n[r][1]]),i},e}(nN),iY=function(t){xt(e,t);function e(n){return n===void 0&&(n={}),t.call(this,nt({type:ge.RECT},n))||this}return e}(Ss),rN=function(t){xt(e,t);function e(n){n===void 0&&(n={});var r=n.style,i=Ge(n,["style"]);return t.call(this,nt({type:ge.TEXT,style:Et.enableCSSParsing?nt({x:"",y:"",text:"",fontSize:"",fontFamily:"",fontStyle:"",fontWeight:"",fontVariant:"",textAlign:"",textBaseline:"",textTransform:"",fill:"black",letterSpacing:"",lineHeight:"",miterLimit:"",wordWrap:!1,wordWrapWidth:0,leading:0,dx:"",dy:""},r):nt({fill:"black"},r)},i))||this}return e.prototype.getComputedTextLength=function(){var n;return this.getGeometryBounds(),((n=this.parsedStyle.metrics)===null||n===void 0?void 0:n.maxLineWidth)||0},e.prototype.getLineBoundingRects=function(){var n;return this.getGeometryBounds(),((n=this.parsedStyle.metrics)===null||n===void 0?void 0:n.lineMetrics)||[]},e.prototype.isOverflowing=function(){return this.getGeometryBounds(),!!this.parsedStyle.isOverflowing},e}(Ss),oY=function(){function t(){this.registry={},this.define(ge.CIRCLE,ZW),this.define(ge.ELLIPSE,JW),this.define(ge.RECT,iY),this.define(ge.IMAGE,tY),this.define(ge.LINE,eY),this.define(ge.GROUP,lE),this.define(ge.PATH,nY),this.define(ge.POLYGON,nN),this.define(ge.POLYLINE,rY),this.define(ge.TEXT,rN),this.define(ge.HTML,QW)}return t.prototype.define=function(e,n){this.registry[e]=n},t.prototype.get=function(e){return this.registry[e]},t}(),b0t={number:function(t){return new fr(t)},percent:function(t){return new fr(t,"%")},px:function(t){return new fr(t,"px")},em:function(t){return new fr(t,"em")},rem:function(t){return new fr(t,"rem")},deg:function(t){return new fr(t,"deg")},grad:function(t){return new fr(t,"grad")},rad:function(t){return new fr(t,"rad")},turn:function(t){return new fr(t,"turn")},s:function(t){return new fr(t,"s")},ms:function(t){return new fr(t,"ms")},registerProperty:function(t){var e=t.name,n=t.inherits,r=t.interpolable,i=t.initialValue,o=t.syntax;Et.styleValueRegistry.registerMetadata({n:e,inh:n,int:r,d:i,syntax:o})},registerLayout:function(t,e){Et.layoutRegistry.registerLayout(t,e)}},aY=function(t){xt(e,t);function e(){var n=t.call(this)||this;n.defaultView=null,n.ownerDocument=null,n.nodeName="document";try{n.timeline=new Et.AnimationTimeline(n)}catch(i){}var r={};return QO.forEach(function(i){var o=i.n,a=i.inh,s=i.d;a&&s&&(r[o]=Rh(s)?s(ge.GROUP):s)}),n.documentElement=new lE({id:"g-root",style:r}),n.documentElement.ownerDocument=n,n.documentElement.parentNode=n,n.childNodes=[n.documentElement],n}return Object.defineProperty(e.prototype,"children",{get:function(){return this.childNodes},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"childElementCount",{get:function(){return this.childNodes.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"firstElementChild",{get:function(){return this.firstChild},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastElementChild",{get:function(){return this.lastChild},enumerable:!1,configurable:!0}),e.prototype.createElement=function(n,r){if(n==="svg")return this.documentElement;var i=this.defaultView.customElements.get(n);i||(console.warn("Unsupported tagName: ",n),i=n==="tspan"?rN:lE);var o=new i(r);return o.ownerDocument=this,o},e.prototype.createElementNS=function(n,r,i){return this.createElement(r,i)},e.prototype.cloneNode=function(n){throw new Error(Vr)},e.prototype.destroy=function(){try{this.documentElement.destroyChildren(),this.timeline.destroy()}catch(n){}},e.prototype.elementsFromBBox=function(n,r,i,o){var a=this.defaultView.context.rBushRoot,s=a.search({minX:n,minY:r,maxX:i,maxY:o}),c=[];return s.forEach(function(l){var u=l.displayObject,f=u.parsedStyle.pointerEvents,d=f===void 0?"auto":f,h=["auto","visiblepainted","visiblefill","visiblestroke","visible"].includes(d);(!h||h&&u.isVisible())&&!u.isCulled()&&u.isInteractive()&&c.push(u)}),c.sort(function(l,u){return u.sortable.renderOrder-l.sortable.renderOrder}),c},e.prototype.elementFromPointSync=function(n,r){var i=this.defaultView.canvas2Viewport({x:n,y:r}),o=i.x,a=i.y,s=this.defaultView.getConfig(),c=s.width,l=s.height;if(o<0||a<0||o>c||a>l)return null;var u=this.defaultView.viewport2Client({x:o,y:a}),f=u.x,d=u.y,h=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!0,position:{x:n,y:r,viewportX:o,viewportY:a,clientX:f,clientY:d},picked:[]}).picked;return h&&h[0]||this.documentElement},e.prototype.elementFromPoint=function(n,r){return ti(this,void 0,void 0,function(){var i,o,a,s,c,l,u,f,d,h;return Fi(this,function(p){switch(p.label){case 0:return i=this.defaultView.canvas2Viewport({x:n,y:r}),o=i.x,a=i.y,s=this.defaultView.getConfig(),c=s.width,l=s.height,o<0||a<0||o>c||a>l?[2,null]:(u=this.defaultView.viewport2Client({x:o,y:a}),f=u.x,d=u.y,[4,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!0,position:{x:n,y:r,viewportX:o,viewportY:a,clientX:f,clientY:d},picked:[]})]);case 1:return h=p.sent().picked,[2,h&&h[0]||this.documentElement]}})})},e.prototype.elementsFromPointSync=function(n,r){var i=this.defaultView.canvas2Viewport({x:n,y:r}),o=i.x,a=i.y,s=this.defaultView.getConfig(),c=s.width,l=s.height;if(o<0||a<0||o>c||a>l)return[];var u=this.defaultView.viewport2Client({x:o,y:a}),f=u.x,d=u.y,h=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!1,position:{x:n,y:r,viewportX:o,viewportY:a,clientX:f,clientY:d},picked:[]}).picked;return h[h.length-1]!==this.documentElement&&h.push(this.documentElement),h},e.prototype.elementsFromPoint=function(n,r){return ti(this,void 0,void 0,function(){var i,o,a,s,c,l,u,f,d,h;return Fi(this,function(p){switch(p.label){case 0:return i=this.defaultView.canvas2Viewport({x:n,y:r}),o=i.x,a=i.y,s=this.defaultView.getConfig(),c=s.width,l=s.height,o<0||a<0||o>c||a>l?[2,[]]:(u=this.defaultView.viewport2Client({x:o,y:a}),f=u.x,d=u.y,[4,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!1,position:{x:n,y:r,viewportX:o,viewportY:a,clientX:f,clientY:d},picked:[]})]);case 1:return h=p.sent().picked,h[h.length-1]!==this.documentElement&&h.push(this.documentElement),[2,h]}})})},e.prototype.appendChild=function(n,r){throw new Error(kh)},e.prototype.insertBefore=function(n,r){throw new Error(kh)},e.prototype.removeChild=function(n,r){throw new Error(kh)},e.prototype.replaceChild=function(n,r,i){throw new Error(kh)},e.prototype.append=function(){throw new Error(kh)},e.prototype.prepend=function(){throw new Error(kh)},e.prototype.getElementById=function(n){return this.documentElement.getElementById(n)},e.prototype.getElementsByName=function(n){return this.documentElement.getElementsByName(n)},e.prototype.getElementsByTagName=function(n){return this.documentElement.getElementsByTagName(n)},e.prototype.getElementsByClassName=function(n){return this.documentElement.getElementsByClassName(n)},e.prototype.querySelector=function(n){return this.documentElement.querySelector(n)},e.prototype.querySelectorAll=function(n){return this.documentElement.querySelectorAll(n)},e.prototype.find=function(n){return this.documentElement.find(n)},e.prototype.findAll=function(n){return this.documentElement.findAll(n)},e}(Eo),sY=function(){function t(e){this.strategies=e}return t.prototype.apply=function(e){var n=e.camera,r=e.renderingService,i=e.renderingContext,o=this.strategies;r.hooks.cull.tap(t.tag,function(a){if(a){var s=a.cullable;return o.length===0?s.visible=i.unculledEntities.indexOf(a.entity)>-1:s.visible=o.every(function(c){return c.isVisible(n,a)}),!a.isCulled()&&a.isVisible()?a:(a.dispatchEvent(new ua(Di.CULLED)),null)}return a}),r.hooks.afterRender.tap(t.tag,function(a){a.cullable.visibilityPlaneMask=-1})},t.tag="Culling",t}(),cY=function(){function t(){var e=this;this.autoPreventDefault=!1,this.rootPointerEvent=new sE(null),this.rootWheelEvent=new cE(null),this.onPointerMove=function(n){var r,i,o,a,s=(a=(o=e.context.renderingContext.root)===null||o===void 0?void 0:o.ownerDocument)===null||a===void 0?void 0:a.defaultView;if(!(s.supportsTouchEvents&&n.pointerType==="touch")){var c=e.normalizeToPointerEvent(n,s);try{for(var l=On(c),u=l.next();!u.done;u=l.next()){var f=u.value,d=e.bootstrapEvent(e.rootPointerEvent,f,s,n);e.context.eventService.mapEvent(d)}}catch(h){r={error:h}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}e.setCursor(e.context.eventService.cursor)}},this.onClick=function(n){var r,i,o,a,s=(a=(o=e.context.renderingContext.root)===null||o===void 0?void 0:o.ownerDocument)===null||a===void 0?void 0:a.defaultView,c=e.normalizeToPointerEvent(n,s);try{for(var l=On(c),u=l.next();!u.done;u=l.next()){var f=u.value,d=e.bootstrapEvent(e.rootPointerEvent,f,s,n);e.context.eventService.mapEvent(d)}}catch(h){r={error:h}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}e.setCursor(e.context.eventService.cursor)}}return t.prototype.apply=function(e){var n=this;this.context=e;var r=e.renderingService,i=this.context.renderingContext.root.ownerDocument.defaultView;this.context.eventService.setPickHandler(function(o){var a=n.context.renderingService.hooks.pickSync.call({position:o,picked:[],topmost:!0}).picked;return a[0]||null}),r.hooks.pointerWheel.tap(t.tag,function(o){var a=n.normalizeWheelEvent(o);n.context.eventService.mapEvent(a)}),r.hooks.pointerDown.tap(t.tag,function(o){var a,s;if(!(i.supportsTouchEvents&&o.pointerType==="touch")){var c=n.normalizeToPointerEvent(o,i);if(n.autoPreventDefault&&c[0].isNormalized){var l=o.cancelable||!("cancelable"in o);l&&o.preventDefault()}try{for(var u=On(c),f=u.next();!f.done;f=u.next()){var d=f.value,h=n.bootstrapEvent(n.rootPointerEvent,d,i,o);n.context.eventService.mapEvent(h)}}catch(p){a={error:p}}finally{try{f&&!f.done&&(s=u.return)&&s.call(u)}finally{if(a)throw a.error}}n.setCursor(n.context.eventService.cursor)}}),r.hooks.pointerUp.tap(t.tag,function(o){var a,s;if(!(i.supportsTouchEvents&&o.pointerType==="touch")){var c=n.context.contextService.getDomElement(),l=n.context.eventService.isNativeEventFromCanvas(c,o),u=l?"":"outside",f=n.normalizeToPointerEvent(o,i);try{for(var d=On(f),h=d.next();!h.done;h=d.next()){var p=h.value,v=n.bootstrapEvent(n.rootPointerEvent,p,i,o);v.type+=u,n.context.eventService.mapEvent(v)}}catch(y){a={error:y}}finally{try{h&&!h.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}n.setCursor(n.context.eventService.cursor)}}),r.hooks.pointerMove.tap(t.tag,this.onPointerMove),r.hooks.pointerOver.tap(t.tag,this.onPointerMove),r.hooks.pointerOut.tap(t.tag,this.onPointerMove),r.hooks.click.tap(t.tag,this.onClick),r.hooks.pointerCancel.tap(t.tag,function(o){var a,s,c=n.normalizeToPointerEvent(o,i);try{for(var l=On(c),u=l.next();!u.done;u=l.next()){var f=u.value,d=n.bootstrapEvent(n.rootPointerEvent,f,i,o);n.context.eventService.mapEvent(d)}}catch(h){a={error:h}}finally{try{u&&!u.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}n.setCursor(n.context.eventService.cursor)})},t.prototype.bootstrapEvent=function(e,n,r,i){e.view=r,e.originalEvent=null,e.nativeEvent=i,e.pointerId=n.pointerId,e.width=n.width,e.height=n.height,e.isPrimary=n.isPrimary,e.pointerType=n.pointerType,e.pressure=n.pressure,e.tangentialPressure=n.tangentialPressure,e.tiltX=n.tiltX,e.tiltY=n.tiltY,e.twist=n.twist,this.transferMouseData(e,n);var o=this.context.eventService.client2Viewport({x:n.clientX,y:n.clientY}),a=o.x,s=o.y;e.viewport.x=a,e.viewport.y=s;var c=this.context.eventService.viewport2Canvas(e.viewport),l=c.x,u=c.y;return e.canvas.x=l,e.canvas.y=u,e.global.copyFrom(e.canvas),e.offset.copyFrom(e.canvas),e.isTrusted=i.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=Xz[e.type]||e.type),e},t.prototype.normalizeWheelEvent=function(e){var n=this.rootWheelEvent;this.transferMouseData(n,e),n.deltaMode=e.deltaMode,n.deltaX=e.deltaX,n.deltaY=e.deltaY,n.deltaZ=e.deltaZ;var r=this.context.eventService.client2Viewport({x:e.clientX,y:e.clientY}),i=r.x,o=r.y;n.viewport.x=i,n.viewport.y=o;var a=this.context.eventService.viewport2Canvas(n.viewport),s=a.x,c=a.y;return n.canvas.x=s,n.canvas.y=c,n.global.copyFrom(n.canvas),n.offset.copyFrom(n.canvas),n.nativeEvent=e,n.type=e.type,n},t.prototype.transferMouseData=function(e,n){e.isTrusted=n.isTrusted,e.srcElement=n.srcElement,e.timeStamp=nE.now(),e.type=n.type,e.altKey=n.altKey,e.metaKey=n.metaKey,e.shiftKey=n.shiftKey,e.ctrlKey=n.ctrlKey,e.button=n.button,e.buttons=n.buttons,e.client.x=n.clientX,e.client.y=n.clientY,e.movement.x=n.movementX,e.movement.y=n.movementY,e.page.x=n.pageX,e.page.y=n.pageY,e.screen.x=n.screenX,e.screen.y=n.screenY,e.relatedTarget=null},t.prototype.setCursor=function(e){this.context.contextService.applyCursorStyle(e||this.context.config.cursor||"default")},t.prototype.normalizeToPointerEvent=function(e,n){var r=[];if(n.isTouchEvent(e))for(var i=0;i<e.changedTouches.length;i++){var o=e.changedTouches[i];le(o.button)&&(o.button=0),le(o.buttons)&&(o.buttons=1),le(o.isPrimary)&&(o.isPrimary=e.touches.length===1&&e.type==="touchstart"),le(o.width)&&(o.width=o.radiusX||1),le(o.height)&&(o.height=o.radiusY||1),le(o.tiltX)&&(o.tiltX=0),le(o.tiltY)&&(o.tiltY=0),le(o.pointerType)&&(o.pointerType="touch"),le(o.pointerId)&&(o.pointerId=o.identifier||0),le(o.pressure)&&(o.pressure=o.force||.5),le(o.twist)&&(o.twist=0),le(o.tangentialPressure)&&(o.tangentialPressure=0),o.isNormalized=!0,o.type=e.type,r.push(o)}else if(n.isMouseEvent(e)){var a=e;le(a.isPrimary)&&(a.isPrimary=!0),le(a.width)&&(a.width=1),le(a.height)&&(a.height=1),le(a.tiltX)&&(a.tiltX=0),le(a.tiltY)&&(a.tiltY=0),le(a.pointerType)&&(a.pointerType="mouse"),le(a.pointerId)&&(a.pointerId=Vz),le(a.pressure)&&(a.pressure=.5),le(a.twist)&&(a.twist=0),le(a.tangentialPressure)&&(a.tangentialPressure=0),a.isNormalized=!0,r.push(a)}else r.push(e);return r},t.tag="Event",t}(),lY=[ge.CIRCLE,ge.ELLIPSE,ge.IMAGE,ge.RECT,ge.LINE,ge.POLYLINE,ge.POLYGON,ge.TEXT,ge.PATH,ge.HTML],uY=function(){function t(){}return t.prototype.isVisible=function(e,n){var r,i,o=n.cullable;if(!o.enable)return!0;var a=n.getRenderBounds();if(ca.isEmpty(a))return!1;var s=e.getFrustum(),c=(i=(r=n.parentNode)===null||r===void 0?void 0:r.cullable)===null||i===void 0?void 0:i.visibilityPlaneMask;return o.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(n,a,c||ku.INDETERMINATE,s.planes),o.visible=o.visibilityPlaneMask!==ku.OUTSIDE,o.visible},t.prototype.computeVisibilityWithPlaneMask=function(e,n,r,i){if(r===ku.OUTSIDE||r===ku.INSIDE)return r;for(var o=ku.INSIDE,a=lY.indexOf(e.nodeName)>-1,s=0,c=i.length;s<c;++s){var l=1<<s;if(r&l&&!(a&&(s===4||s===5))){var u=i[s],f=u.normal,d=u.distance;if(Yt(f,n.getPositiveFarPoint(i[s]))+d<0)return ku.OUTSIDE;Yt(f,n.getNegativeFarPoint(i[s]))+d<0&&(o|=l)}}return o},t}(),fY=function(){function t(){this.toSync=new Set,this.isFirstTimeRendering=!0,this.syncing=!1,this.isFirstTimeRenderingFinished=!1}return t.prototype.apply=function(e){var n=this,r,i=e.renderingService,o=e.renderingContext,a=e.rBushRoot,s=o.root.ownerDocument.defaultView;this.rBush=a;var c=function(h){var p=h.target;p.renderable.dirty=!0,i.dirtify()},l=function(h){var p=h.detail.affectChildren,v=h.target;p&&v.forEach(function(m){n.toSync.add(m)});for(var y=v;y;)y.renderable&&n.toSync.add(y),y=y.parentElement;i.dirtify()},u=function(h){var p=h.target;Et.enableSizeAttenuation&&Et.styleValueRegistry.updateSizeAttenuation(p,s.getCamera().getZoom()),Et.enableCSSParsing&&Et.styleValueRegistry.recalc(p),Et.sceneGraphService.dirtifyToRoot(p),i.dirtify()},f=function(h){var p=h.target,v=p.rBushNode;v.aabb&&n.rBush.remove(v.aabb),n.toSync.delete(p),Et.sceneGraphService.dirtifyToRoot(p),i.dirtify()};i.hooks.init.tap(t.tag,function(){s.addEventListener(Di.MOUNTED,u),s.addEventListener(Di.UNMOUNTED,f),s.addEventListener(Di.ATTR_MODIFIED,c),s.addEventListener(Di.BOUNDS_CHANGED,l)}),i.hooks.destroy.tap(t.tag,function(){s.removeEventListener(Di.MOUNTED,u),s.removeEventListener(Di.UNMOUNTED,f),s.removeEventListener(Di.ATTR_MODIFIED,c),s.removeEventListener(Di.BOUNDS_CHANGED,l),n.toSync.clear()});var d=(r=Et.globalThis.requestIdleCallback)!==null&&r!==void 0?r:rE.bind(Et.globalThis);i.hooks.endFrame.tap(t.tag,function(){n.isFirstTimeRendering?(n.isFirstTimeRendering=!1,n.syncing=!0,d(function(){n.syncRTree(!0),n.isFirstTimeRenderingFinished=!0})):n.syncRTree()})},t.prototype.syncRTree=function(e){var n=this;if(e===void 0&&(e=!1),!(!e&&(this.syncing||this.toSync.size===0))){this.syncing=!0;var r=[];Array.from(this.toSync).filter(function(i){return i.isConnected}).forEach(function(i){var o=i.rBushNode;o&&o.aabb&&n.rBush.remove(o.aabb);var a=i.getRenderBounds();if(a){var s=i.renderable;e&&(s.dirtyRenderBounds||(s.dirtyRenderBounds=new ca),s.dirtyRenderBounds.update(a.center,a.halfExtents));var c=j(a.getMin(),2),l=c[0],u=c[1],f=j(a.getMax(),2),d=f[0],h=f[1];o.aabb||(o.aabb={}),o.aabb.displayObject=i,o.aabb.minX=l,o.aabb.minY=u,o.aabb.maxX=d,o.aabb.maxY=h}o.aabb&&!isNaN(o.aabb.maxX)&&!isNaN(o.aabb.maxX)&&!isNaN(o.aabb.minX)&&!isNaN(o.aabb.minY)&&r.push(o.aabb)}),this.rBush.load(r),r.length=0,this.toSync.clear(),this.syncing=!1}},t.tag="Prepare",t}();function _0t(t){return!!t.document}var cc;(function(t){t.READY="ready",t.BEFORE_RENDER="beforerender",t.RERENDER="rerender",t.AFTER_RENDER="afterrender",t.BEFORE_DESTROY="beforedestroy",t.AFTER_DESTROY="afterdestroy",t.RESIZE="resize",t.DIRTY_RECTANGLE="dirtyrectangle",t.RENDERER_CHANGED="rendererchanged"})(cc||(cc={}));var iN=500,dY=.1,hY=1e3,uE=new ua(Di.MOUNTED),fE=new ua(Di.UNMOUNTED),oN=new ua(cc.BEFORE_RENDER),pY=new ua(cc.RERENDER),aN=new ua(cc.AFTER_RENDER),w0t=function(t){xt(e,t);function e(n){var r=t.call(this)||this;r.Element=Ss,r.inited=!1,r.context={},r.document=new aY,r.document.defaultView=r,r.customElements=new oY;var i=n.container,o=n.canvas,a=n.offscreenCanvas,s=n.width,c=n.height,l=n.devicePixelRatio,u=n.renderer,f=n.background,d=n.cursor,h=n.document,p=n.requestAnimationFrame,v=n.cancelAnimationFrame,y=n.createImage,m=n.supportsPointerEvents,b=n.supportsTouchEvents,O=n.supportsCSSTransform,E=n.supportsMutipleCanvasesInOneContainer,w=n.useNativeClickEvent,_=n.alwaysTriggerPointerEventOnCanvas,S=n.isTouchEvent,M=n.isMouseEvent,T=n.dblClickSpeed;E||jz(i,r);var A=s,C=c,N=l;return o&&(N=l||B1&&window.devicePixelRatio||1,N=N>=1?Math.ceil(N):1,A=s||Hz(o)||o.width/N,C=c||Uz(o)||o.height/N),a&&(Et.offscreenCanvas=a),r.devicePixelRatio=N,r.requestAnimationFrame=p!=null?p:rE.bind(Et.globalThis),r.cancelAnimationFrame=v!=null?v:Uk.bind(Et.globalThis),r.supportsTouchEvents=b!=null?b:"ontouchstart"in Et.globalThis,r.supportsPointerEvents=m!=null?m:!!Et.globalThis.PointerEvent,r.isTouchEvent=S!=null?S:function(k){return r.supportsTouchEvents&&k instanceof Et.globalThis.TouchEvent},r.isMouseEvent=M!=null?M:function(k){return!Et.globalThis.MouseEvent||k instanceof Et.globalThis.MouseEvent&&(!r.supportsPointerEvents||!(k instanceof Et.globalThis.PointerEvent))},r.dblClickSpeed=T!=null?T:200,r.initRenderingContext({container:i,canvas:o,width:A,height:C,renderer:u,offscreenCanvas:a,devicePixelRatio:N,cursor:d||"default",background:f||"transparent",createImage:y,document:h,supportsCSSTransform:O,useNativeClickEvent:w,alwaysTriggerPointerEventOnCanvas:_}),r.initDefaultCamera(A,C,u.clipSpaceNearZ),r.initRenderer(u,!0),r}return e.prototype.initRenderingContext=function(n){this.context.config=n,this.context.renderingContext={root:this.document.documentElement,renderListCurrentFrame:[],unculledEntities:[],renderReasons:new Set,force:!1,dirty:!1}},e.prototype.initDefaultCamera=function(n,r,i){var o=this,a=new Et.CameraContribution;a.clipSpaceNearZ=i,a.setType(Xr.EXPLORING,b0.DEFAULT).setPosition(n/2,r/2,iN).setFocalPoint(n/2,r/2,0).setOrthographic(n/-2,n/2,r/2,r/-2,dY,hY),a.canvas=this,a.eventEmitter.on(ck.UPDATED,function(){o.context.renderingContext.renderReasons.add(zf.CAMERA_CHANGED),Et.enableSizeAttenuation&&o.getConfig().renderer.getConfig().enableSizeAttenuation&&o.updateSizeAttenuation()}),this.context.camera=a},e.prototype.updateSizeAttenuation=function(){var n=this.getCamera().getZoom();this.document.documentElement.forEach(function(r){Et.styleValueRegistry.updateSizeAttenuation(r,n)})},e.prototype.getConfig=function(){return this.context.config},e.prototype.getRoot=function(){return this.document.documentElement},e.prototype.getCamera=function(){return this.context.camera},e.prototype.getContextService=function(){return this.context.contextService},e.prototype.getEventService=function(){return this.context.eventService},e.prototype.getRenderingService=function(){return this.context.renderingService},e.prototype.getRenderingContext=function(){return this.context.renderingContext},e.prototype.getStats=function(){return this.getRenderingService().getStats()},Object.defineProperty(e.prototype,"ready",{get:function(){var n=this;return this.readyPromise||(this.readyPromise=new Promise(function(r){n.resolveReadyPromise=function(){r(n)}}),this.inited&&this.resolveReadyPromise()),this.readyPromise},enumerable:!1,configurable:!0}),e.prototype.destroy=function(n,r){if(n===void 0&&(n=!0),r===void 0&&(r=!1),r||this.dispatchEvent(new ua(cc.BEFORE_DESTROY)),this.frameId){var i=this.getConfig().cancelAnimationFrame||cancelAnimationFrame;i(this.frameId)}var o=this.getRoot();this.unmountChildren(o),n&&(this.document.destroy(),this.getEventService().destroy()),this.getRenderingService().destroy(),this.getContextService().destroy(),n&&this.context.rBushRoot&&(this.context.rBushRoot.clear(),this.context.rBushRoot=null,this.context.renderingContext.root=null),r||this.dispatchEvent(new ua(cc.AFTER_DESTROY))},e.prototype.changeSize=function(n,r){this.resize(n,r)},e.prototype.resize=function(n,r){var i=this.context.config;i.width=n,i.height=r,this.getContextService().resize(n,r);var o=this.context.camera,a=o.getProjectionMode();o.setPosition(n/2,r/2,iN).setFocalPoint(n/2,r/2,0),a===Ta.ORTHOGRAPHIC?o.setOrthographic(n/-2,n/2,r/2,r/-2,o.getNear(),o.getFar()):o.setAspect(n/r),this.dispatchEvent(new ua(cc.RESIZE,{width:n,height:r}))},e.prototype.appendChild=function(n,r){return this.document.documentElement.appendChild(n,r)},e.prototype.insertBefore=function(n,r){return this.document.documentElement.insertBefore(n,r)},e.prototype.removeChild=function(n){return this.document.documentElement.removeChild(n)},e.prototype.removeChildren=function(){this.document.documentElement.removeChildren()},e.prototype.destroyChildren=function(){this.document.documentElement.destroyChildren()},e.prototype.render=function(n){var r=this;n&&(oN.detail=n,aN.detail=n),this.dispatchEvent(oN);var i=this.getRenderingService();i.render(this.getConfig(),n,function(){r.dispatchEvent(pY)}),this.dispatchEvent(aN)},e.prototype.run=function(){var n=this,r=function(i,o){n.render(o),n.frameId=n.requestAnimationFrame(r)};r()},e.prototype.initRenderer=function(n,r){var i=this;if(r===void 0&&(r=!1),!n)throw new Error("Renderer is required.");this.inited=!1,this.readyPromise=void 0,this.context.rBushRoot=new eG,this.context.renderingPlugins=[],this.context.renderingPlugins.push(new cY,new fY,new sY([new uY])),this.loadRendererContainerModule(n),this.context.contextService=new this.context.ContextService(nt(nt({},Et),this.context)),this.context.renderingService=new MW(Et,this.context),this.context.eventService=new EW(Et,this.context),this.context.eventService.init(),this.context.contextService.init?(this.context.contextService.init(),this.initRenderingService(n,r,!0)):this.context.contextService.initAsync().then(function(){i.initRenderingService(n,r)})},e.prototype.initRenderingService=function(n,r,i){var o=this;r===void 0&&(r=!1),i===void 0&&(i=!1),this.context.renderingService.init(function(){o.inited=!0,r?i?o.requestAnimationFrame(function(){o.dispatchEvent(new ua(cc.READY))}):o.dispatchEvent(new ua(cc.READY)):o.dispatchEvent(new ua(cc.RENDERER_CHANGED)),o.readyPromise&&o.resolveReadyPromise(),r||o.getRoot().forEach(function(a){var s=a.renderable;s&&(s.renderBoundsDirty=!0,s.boundsDirty=!0,s.dirty=!0)}),o.mountChildren(o.getRoot()),n.getConfig().enableAutoRendering&&o.run()})},e.prototype.loadRendererContainerModule=function(n){var r=this,i=n.getPlugins();i.forEach(function(o){o.context=r.context,o.init(Et)})},e.prototype.setRenderer=function(n){var r=this.getConfig();if(r.renderer!==n){var i=r.renderer;r.renderer=n,this.destroy(!1,!0),ut([],j(i==null?void 0:i.getPlugins()),!1).reverse().forEach(function(o){o.destroy(Et)}),this.initRenderer(n)}},e.prototype.setCursor=function(n){var r=this.getConfig();r.cursor=n,this.getContextService().applyCursorStyle(n)},e.prototype.unmountChildren=function(n){var r=this;n.childNodes.forEach(function(i){r.unmountChildren(i)}),this.inited&&(n.isMutationObserved?n.dispatchEvent(fE):(fE.target=n,this.dispatchEvent(fE,!0)),n!==this.document.documentElement&&(n.ownerDocument=null),n.isConnected=!1),n.isCustomElement&&n.disconnectedCallback&&n.disconnectedCallback()},e.prototype.mountChildren=function(n){var r=this;this.inited?n.isConnected||(n.ownerDocument=this.document,n.isConnected=!0,n.isMutationObserved?n.dispatchEvent(uE):(uE.target=n,this.dispatchEvent(uE,!0))):console.warn("[g]: You are trying to call `canvas.appendChild` before canvas' initialization finished. You can either await `canvas.ready` or listen to `CanvasEvent.READY` manually.","appended child: ",n.nodeName),n.childNodes.forEach(function(i){r.mountChildren(i)}),n.isCustomElement&&n.connectedCallback&&n.connectedCallback()},e.prototype.client2Viewport=function(n){return this.getEventService().client2Viewport(n)},e.prototype.viewport2Client=function(n){return this.getEventService().viewport2Client(n)},e.prototype.viewport2Canvas=function(n){return this.getEventService().viewport2Canvas(n)},e.prototype.canvas2Viewport=function(n){return this.getEventService().canvas2Viewport(n)},e.prototype.getPointByClient=function(n,r){return this.client2Viewport({x:n,y:r})},e.prototype.getClientByPoint=function(n,r){return this.viewport2Client({x:n,y:r})},e}($k);function vY(t,e){var n=e.cx,r=n===void 0?0:n,i=e.cy,o=i===void 0?0:i,a=e.r;t.arc(r,o,a,0,Math.PI*2,!1)}function gY(t,e){var n=e.cx,r=n===void 0?0:n,i=e.cy,o=i===void 0?0:i,a=e.rx,s=e.ry;if(t.ellipse)t.ellipse(r,o,a,s,0,0,Math.PI*2,!1);else{var c=a>s?a:s,l=a>s?1:a/s,u=a>s?s/a:1;t.save(),t.scale(l,u),t.arc(r,o,c,0,Math.PI*2)}}function yY(t,e){var n=e.x1,r=e.y1,i=e.x2,o=e.y2,a=e.markerStart,s=e.markerEnd,c=e.markerStartOffset,l=e.markerEndOffset,u=0,f=0,d=0,h=0,p=0,v,y;a&&Tn(a)&&c&&(v=i-n,y=o-r,p=Math.atan2(y,v),u=Math.cos(p)*(c||0),f=Math.sin(p)*(c||0)),s&&Tn(s)&&l&&(v=n-i,y=r-o,p=Math.atan2(y,v),d=Math.cos(p)*(l||0),h=Math.sin(p)*(l||0)),t.moveTo(n+u,r+f),t.lineTo(i+d,o+h)}function mY(t,e){var n=e.markerStart,r=e.markerEnd,i=e.markerStartOffset,o=e.markerEndOffset,a=e.d,s=a.absolutePath,c=a.segments,l=0,u=0,f=0,d=0,h=0,p,v;if(n&&Tn(n)&&i){var y=j(n.parentNode.getStartTangent(),2),m=y[0],b=y[1];p=m[0]-b[0],v=m[1]-b[1],h=Math.atan2(v,p),l=Math.cos(h)*(i||0),u=Math.sin(h)*(i||0)}if(r&&Tn(r)&&o){var O=j(r.parentNode.getEndTangent(),2),m=O[0],b=O[1];p=m[0]-b[0],v=m[1]-b[1],h=Math.atan2(v,p),f=Math.cos(h)*(o||0),d=Math.sin(h)*(o||0)}for(var E=0;E<s.length;E++){var w=s[E],_=w[0],S=s[E+1],M=E===0&&(l!==0||u!==0),T=(E===s.length-1||S&&(S[0]==="M"||S[0]==="Z"))&&f!==0&&d!==0;switch(_){case"M":M?t.moveTo(w[1]+l,w[2]+u):t.moveTo(w[1],w[2]);break;case"L":T?t.lineTo(w[1]+f,w[2]+d):t.lineTo(w[1],w[2]);break;case"Q":t.quadraticCurveTo(w[1],w[2],w[3],w[4]),T&&t.lineTo(w[3]+f,w[4]+d);break;case"C":t.bezierCurveTo(w[1],w[2],w[3],w[4],w[5],w[6]),T&&t.lineTo(w[5]+f,w[6]+d);break;case"A":{var A=c[E].arcParams,C=A.cx,N=A.cy,k=A.rx,R=A.ry,I=A.startAngle,D=A.endAngle,B=A.xRotation,F=A.sweepFlag;if(t.ellipse)t.ellipse(C,N,k,R,B,I,D,!!(1-F));else{var G=k>R?k:R,X=k>R?1:k/R,q=k>R?R/k:1;t.translate(C,N),t.rotate(B),t.scale(X,q),t.arc(0,0,G,I,D,!!(1-F)),t.scale(1/X,1/q),t.rotate(-B),t.translate(-C,-N)}T&&t.lineTo(w[6]+f,w[7]+d);break}case"Z":t.closePath();break}}}function xY(t,e){var n=e.markerStart,r=e.markerEnd,i=e.markerStartOffset,o=e.markerEndOffset,a=e.points.points,s=a.length,c=a[0][0],l=a[0][1],u=a[s-1][0],f=a[s-1][1],d=0,h=0,p=0,v=0,y=0,m,b;n&&Tn(n)&&i&&(m=a[1][0]-a[0][0],b=a[1][1]-a[0][1],y=Math.atan2(b,m),d=Math.cos(y)*(i||0),h=Math.sin(y)*(i||0)),r&&Tn(r)&&o&&(m=a[s-1][0]-a[0][0],b=a[s-1][1]-a[0][1],y=Math.atan2(b,m),p=Math.cos(y)*(o||0),v=Math.sin(y)*(o||0)),t.moveTo(c+(d||p),l+(h||v));for(var O=1;O<s-1;O++){var E=a[O];t.lineTo(E[0],E[1])}t.lineTo(u,f)}function bY(t,e){var n=e.markerStart,r=e.markerEnd,i=e.markerStartOffset,o=e.markerEndOffset,a=e.points.points,s=a.length,c=a[0][0],l=a[0][1],u=a[s-1][0],f=a[s-1][1],d=0,h=0,p=0,v=0,y=0,m,b;n&&Tn(n)&&i&&(m=a[1][0]-a[0][0],b=a[1][1]-a[0][1],y=Math.atan2(b,m),d=Math.cos(y)*(i||0),h=Math.sin(y)*(i||0)),r&&Tn(r)&&o&&(m=a[s-2][0]-a[s-1][0],b=a[s-2][1]-a[s-1][1],y=Math.atan2(b,m),p=Math.cos(y)*(o||0),v=Math.sin(y)*(o||0)),t.moveTo(c+d,l+h);for(var O=1;O<s-1;O++){var E=a[O];t.lineTo(E[0],E[1])}t.lineTo(u+p,f+v)}function _Y(t,e){var n=e.x,r=n===void 0?0:n,i=e.y,o=i===void 0?0:i,a=e.radius,s=e.width,c=e.height,l=s,u=c,f=a&&a.some(function(E){return E!==0});if(!f)t.rect(r,o,l,u);else{var d=s>0?1:-1,h=c>0?1:-1,p=d+h===0,v=j(a.map(function(E){return Nn(E,0,Math.min(Math.abs(l)/2,Math.abs(u)/2))}),4),y=v[0],m=v[1],b=v[2],O=v[3];t.moveTo(d*y+r,o),t.lineTo(l-d*m+r,o),m!==0&&t.arc(l-d*m+r,h*m+o,m,-h*Math.PI/2,d>0?0:Math.PI,p),t.lineTo(l+r,u-h*b+o),b!==0&&t.arc(l-d*b+r,u-h*b+o,b,d>0?0:Math.PI,h>0?Math.PI/2:1.5*Math.PI,p),t.lineTo(d*O+r,u+o),O!==0&&t.arc(d*O+r,u-h*O+o,O,h>0?Math.PI/2:-Math.PI/2,d>0?Math.PI:0,p),t.lineTo(r,h*y+o),y!==0&&t.arc(d*y+r,h*y+o,y,d>0?Math.PI:0,h>0?Math.PI*1.5:Math.PI/2,p)}}var wY=function(t){xt(e,t);function e(){var n=t.apply(this,ut([],j(arguments),!1))||this;return n.name="canvas-path-generator",n}return e.prototype.init=function(){var n,r=(n={},n[kt.CIRCLE]=vY,n[kt.ELLIPSE]=gY,n[kt.RECT]=_Y,n[kt.LINE]=yY,n[kt.POLYLINE]=bY,n[kt.POLYGON]=xY,n[kt.PATH]=mY,n[kt.TEXT]=void 0,n[kt.GROUP]=void 0,n[kt.IMAGE]=void 0,n[kt.HTML]=void 0,n[kt.MESH]=void 0,n);this.context.pathGeneratorFactory=r},e.prototype.destroy=function(){delete this.context.pathGeneratorFactory},e}(Ml),OY=Gt(),EY=Gt(),SY=Gt(),MY=ue(),PY=function(){function t(){var e=this;this.isHit=function(n,r,i,o){var a=e.context.pointInPathPickerFactory[n.nodeName];if(a){var s=pr(MY,i),c=Ft(EY,Dn(SY,r[0],r[1],0),s);if(a(n,new Vi(c[0],c[1]),o,e.isPointInPath,e.context,e.runtime))return!0}return!1},this.isPointInPath=function(n,r){var i=e.runtime.offscreenCanvasCreator.getOrCreateContext(e.context.config.offscreenCanvas),o=e.context.pathGeneratorFactory[n.nodeName];return o&&(i.beginPath(),o(i,n.parsedStyle),i.closePath()),i.isPointInPath(r.x,r.y)}}return t.prototype.apply=function(e,n){var r=this,i,o=e.renderingService,a=e.renderingContext;this.context=e,this.runtime=n;var s=(i=a.root)===null||i===void 0?void 0:i.ownerDocument;o.hooks.pick.tapPromise(t.tag,function(c){return ti(r,void 0,void 0,function(){return Fi(this,function(l){return[2,this.pick(s,c)]})})}),o.hooks.pickSync.tap(t.tag,function(c){return r.pick(s,c)})},t.prototype.pick=function(e,n){var r,i,o=n.topmost,a=n.position,s=a.x,c=a.y,l=Dn(OY,s,c,0),u=e.elementsFromBBox(l[0],l[1],l[0],l[1]),f=[];try{for(var d=On(u),h=d.next();!h.done;h=d.next()){var p=h.value,v=p.getWorldTransform(),y=this.isHit(p,l,v,!1);if(y){var m=Um(p);if(m){var b=m.parsedStyle.clipPath,O=this.isHit(b,l,b.getWorldTransform(),!0);if(O){if(o)return n.picked=[p],n;f.push(p)}}else{if(o)return n.picked=[p],n;f.push(p)}}}}catch(E){r={error:E}}finally{try{h&&!h.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}return n.picked=f,n},t.tag="CanvasPicker",t}();function TY(t,e,n){var r=t.parsedStyle,i=r.cx,o=i===void 0?0:i,a=r.cy,s=a===void 0?0:a,c=r.r,l=r.fill,u=r.stroke,f=r.lineWidth,d=f===void 0?1:f,h=r.increasedLineWidthForHitTesting,p=h===void 0?0:h,v=r.pointerEvents,y=v===void 0?"auto":v,m=(d+p)/2,b=Hi(o,s,e.x,e.y),O=j(kl(y,l,u),2),E=O[0],w=O[1];return E&&w||n?b<=c+m:E?b<=c:w?b>=c-m&&b<=c+m:!1}function F1(t,e,n,r){return t/(n*n)+e/(r*r)}function AY(t,e,n){var r=t.parsedStyle,i=r.cx,o=i===void 0?0:i,a=r.cy,s=a===void 0?0:a,c=r.rx,l=r.ry,u=r.fill,f=r.stroke,d=r.lineWidth,h=d===void 0?1:d,p=r.increasedLineWidthForHitTesting,v=p===void 0?0:p,y=r.pointerEvents,m=y===void 0?"auto":y,b=e.x,O=e.y,E=j(kl(m,u,f),2),w=E[0],_=E[1],S=(h+v)/2,M=(b-o)*(b-o),T=(O-s)*(O-s);return w&&_||n?F1(M,T,c+S,l+S)<=1:w?F1(M,T,c,l)<=1:_?F1(M,T,c-S,l-S)>=1&&F1(M,T,c+S,l+S)<=1:!1}function Hf(t,e,n,r,i,o){return i>=t&&i<=t+n&&o>=e&&o<=e+r}function CY(t,e,n,r,i,o,a){var s=i/2;return Hf(t-s,e-s,n,i,o,a)||Hf(t+n-s,e-s,i,r,o,a)||Hf(t+s,e+r-s,n,i,o,a)||Hf(t-s,e+s,i,r,o,a)}function j1(t,e,n,r,i,o,a,s){var c=(Math.atan2(s-e,a-t)+Math.PI*2)%(Math.PI*2),l={x:t+n*Math.cos(c),y:e+n*Math.sin(c)};return Hi(l.x,l.y,a,s)<=o/2}function Ru(t,e,n,r,i,o,a){var s=Math.min(t,n),c=Math.max(t,n),l=Math.min(e,r),u=Math.max(e,r),f=i/2;return o>=s-f&&o<=c+f&&a>=l-f&&a<=u+f?wf(t,e,n,r,o,a)<=i/2:!1}function sN(t,e,n,r,i){var o=t.length;if(o<2)return!1;for(var a=0;a<o-1;a++){var s=t[a][0],c=t[a][1],l=t[a+1][0],u=t[a+1][1];if(Ru(s,c,l,u,e,n,r))return!0}if(i){var f=t[0],d=t[o-1];if(Ru(f[0],f[1],d[0],d[1],e,n,r))return!0}return!1}var kY=1e-6;function dE(t){return Math.abs(t)<kY?0:t<0?-1:1}function NY(t,e,n){return(n[0]-t[0])*(e[1]-t[1])===(e[0]-t[0])*(n[1]-t[1])&&Math.min(t[0],e[0])<=n[0]&&n[0]<=Math.max(t[0],e[0])&&Math.min(t[1],e[1])<=n[1]&&n[1]<=Math.max(t[1],e[1])}function cN(t,e,n){var r=!1,i=t.length;if(i<=2)return!1;for(var o=0;o<i;o++){var a=t[o],s=t[(o+1)%i];if(NY(a,s,[e,n]))return!0;dE(a[1]-n)>0!=dE(s[1]-n)>0&&dE(e-(n-a[1])*(a[0]-s[0])/(a[1]-s[1])-a[0])<0&&(r=!r)}return r}function lN(t,e,n){for(var r=!1,i=0;i<t.length;i++){var o=t[i];if(r=cN(o,e,n),r)break}return r}function RY(t,e,n){var r=t.parsedStyle,i=r.x1,o=r.y1,a=r.x2,s=r.y2,c=r.lineWidth,l=c===void 0?1:c,u=r.increasedLineWidthForHitTesting,f=u===void 0?0:u,d=r.pointerEvents,h=d===void 0?"auto":d,p=r.fill,v=r.stroke,y=j(kl(h,p,v),2),m=y[1];return!m&&!n||!l?!1:Ru(i,o,a,s,l+f,e.x,e.y)}function LY(t,e,n,r,i){for(var o=!1,a=e/2,s=0;s<t.length;s++){var c=t[s],l=c.currentPoint,u=c.params,f=c.prePoint,d=c.box;if(!(d&&!Hf(d.x-a,d.y-a,d.width+e,d.height+e,n,r)))switch(c.command){case"L":case"Z":if(o=Ru(f[0],f[1],l[0],l[1],e,n,r),o)return!0;break;case"Q":var h=cm(f[0],f[1],u[1],u[2],u[3],u[4],n,r);if(o=h<=e/2,o)return!0;break;case"C":var p=tm(f[0],f[1],u[1],u[2],u[3],u[4],u[5],u[6],n,r,i);if(o=p<=e/2,o)return!0;break;case"A":c.cubicParams||(c.cubicParams=vu(f[0],f[1],u[1],u[2],u[3],u[4],u[5],u[6],u[7],void 0));for(var v=c.cubicParams,y=f,m=0;m<v.length;m+=6){var b=tm(y[0],y[1],v[m],v[m+1],v[m+2],v[m+3],v[m+4],v[m+5],n,r,i);if(y=[v[m+4],v[m+5]],o=b<=e/2,o)return!0}break}}return o}function IY(t,e,n,r,i,o){var a=t.parsedStyle,s=a.lineWidth,c=s===void 0?1:s,l=a.increasedLineWidthForHitTesting,u=l===void 0?0:l,f=a.stroke,d=a.fill,h=a.d,p=a.pointerEvents,v=p===void 0?"auto":p,y=h.segments,m=h.hasArc,b=h.polylines,O=h.polygons,E=j(kl(v,(O==null?void 0:O.length)&&d,f),2),w=E[0],_=E[1],S=Jv(t),M=!1;return w||n?(m?M=r(t,e):M=lN(O,e.x,e.y)||lN(b,e.x,e.y),M):((_||n)&&(M=LY(y,c+u,e.x,e.y,S)),M)}function DY(t,e,n){var r=t.parsedStyle,i=r.stroke,o=r.fill,a=r.lineWidth,s=a===void 0?1:a,c=r.increasedLineWidthForHitTesting,l=c===void 0?0:c,u=r.points,f=r.pointerEvents,d=f===void 0?"auto":f,h=j(kl(d,o,i),2),p=h[0],v=h[1],y=!1;return(v||n)&&(y=sN(u.points,s+l,e.x,e.y,!0)),!y&&(p||n)&&(y=cN(u.points,e.x,e.y)),y}function BY(t,e,n){var r=t.parsedStyle,i=r.lineWidth,o=i===void 0?1:i,a=r.increasedLineWidthForHitTesting,s=a===void 0?0:a,c=r.points,l=r.pointerEvents,u=l===void 0?"auto":l,f=r.fill,d=r.stroke,h=j(kl(u,f,d),2),p=h[1];return!p&&!n||!o?!1:sN(c.points,o+s,e.x,e.y,!1)}function FY(t,e,n,r,i){var o=t.parsedStyle,a=o.radius,s=o.fill,c=o.stroke,l=o.lineWidth,u=l===void 0?1:l,f=o.increasedLineWidthForHitTesting,d=f===void 0?0:f,h=o.x,p=h===void 0?0:h,v=o.y,y=v===void 0?0:v,m=o.width,b=o.height,O=o.pointerEvents,E=O===void 0?"auto":O,w=j(kl(E,s,c),2),_=w[0],S=w[1],M=a&&a.some(function(N){return N!==0}),T=u+d;if(M){var C=!1;return(S||n)&&(C=jY(p,y,m,b,a.map(function(N){return Nn(N,0,Math.min(Math.abs(m)/2,Math.abs(b)/2))}),T,e.x,e.y)),!C&&(_||n)&&(C=r(t,e)),C}else{var A=T/2;if(_&&S||n)return Hf(p-A,y-A,m+A,b+A,e.x,e.y);if(_)return Hf(p,y,m,b,e.x,e.y);if(S)return CY(p,y,m,b,T,e.x,e.y)}return!1}function jY(t,e,n,r,i,o,a,s){var c=j(i,4),l=c[0],u=c[1],f=c[2],d=c[3];return Ru(t+l,e,t+n-u,e,o,a,s)||Ru(t+n,e+u,t+n,e+r-f,o,a,s)||Ru(t+n-f,e+r,t+d,e+r,o,a,s)||Ru(t,e+r-d,t,e+l,o,a,s)||j1(t+n-u,e+u,u,1.5*Math.PI,2*Math.PI,o,a,s)||j1(t+n-f,e+r-f,f,0,.5*Math.PI,o,a,s)||j1(t+d,e+r-d,d,.5*Math.PI,Math.PI,o,a,s)||j1(t+l,e+l,l,Math.PI,1.5*Math.PI,o,a,s)}function GY(t,e,n,r,i,o){var a=t.parsedStyle,s=a.pointerEvents,c=s===void 0?"auto":s,l=a.x,u=l===void 0?0:l,f=a.y,d=f===void 0?0:f,h=a.width,p=a.height;if(c==="non-transparent-pixel"){var v=i.config.offscreenCanvas,y=o.offscreenCanvasCreator.getOrCreateCanvas(v),m=o.offscreenCanvasCreator.getOrCreateContext(v,{willReadFrequently:!0});y.width=h,y.height=p,i.defaultStyleRendererFactory[kt.IMAGE].render(m,nt(nt({},t.parsedStyle),{x:0,y:0}),t,void 0,void 0,void 0);var b=m.getImageData(e.x-u,e.y-d,1,1).data;return b.every(function(O){return O!==0})}return!0}function zY(t,e,n,r){var i=t.getGeometryBounds();return e.x>=i.min[0]&&e.y>=i.min[1]&&e.x<=i.max[0]&&e.y<=i.max[1]}var WY=function(t){xt(e,t);function e(){var n=t.apply(this,ut([],j(arguments),!1))||this;return n.name="canvas-picker",n}return e.prototype.init=function(){var n,r=(n={},n[kt.CIRCLE]=TY,n[kt.ELLIPSE]=AY,n[kt.RECT]=FY,n[kt.LINE]=RY,n[kt.POLYLINE]=BY,n[kt.POLYGON]=DY,n[kt.PATH]=IY,n[kt.TEXT]=zY,n[kt.GROUP]=null,n[kt.IMAGE]=GY,n[kt.HTML]=null,n[kt.MESH]=null,n);this.context.pointInPathPickerFactory=r,this.addRenderingPlugin(new PY)},e.prototype.destroy=function(){delete this.context.pointInPathPickerFactory,this.removeAllRenderingPlugins()},e}(Ml),YY=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof gt.g!="undefined"?gt.g:typeof self!="undefined"?self:{},uN={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(YY,function(){function n(w,_,S,M,T){r(w,_,S||0,M||w.length-1,T||o)}function r(w,_,S,M,T){for(;M>S;){if(M-S>600){var A=M-S+1,C=_-S+1,N=Math.log(A),k=.5*Math.exp(2*N/3),R=.5*Math.sqrt(N*k*(A-k)/A)*(C-A/2<0?-1:1),I=Math.max(S,Math.floor(_-C*k/A+R)),D=Math.min(M,Math.floor(_+(A-C)*k/A+R));r(w,_,I,D,T)}var B=w[_],F=S,G=M;for(i(w,S,_),T(w[M],B)>0&&i(w,S,M);F<G;){for(i(w,F,G),F++,G--;T(w[F],B)<0;)F++;for(;T(w[G],B)>0;)G--}T(w[S],B)===0?i(w,S,G):(G++,i(w,G,M)),G<=_&&(S=G+1),_<=G&&(M=G-1)}}function i(w,_,S){var M=w[_];w[_]=w[S],w[S]=M}function o(w,_){return w<_?-1:w>_?1:0}var a=function(_){_===void 0&&(_=9),this._maxEntries=Math.max(4,_),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()};a.prototype.all=function(){return this._all(this.data,[])},a.prototype.search=function(_){var S=this.data,M=[];if(!b(_,S))return M;for(var T=this.toBBox,A=[];S;){for(var C=0;C<S.children.length;C++){var N=S.children[C],k=S.leaf?T(N):N;b(_,k)&&(S.leaf?M.push(N):m(_,k)?this._all(N,M):A.push(N))}S=A.pop()}return M},a.prototype.collides=function(_){var S=this.data;if(!b(_,S))return!1;for(var M=[];S;){for(var T=0;T<S.children.length;T++){var A=S.children[T],C=S.leaf?this.toBBox(A):A;if(b(_,C)){if(S.leaf||m(_,C))return!0;M.push(A)}}S=M.pop()}return!1},a.prototype.load=function(_){if(!(_&&_.length))return this;if(_.length<this._minEntries){for(var S=0;S<_.length;S++)this.insert(_[S]);return this}var M=this._build(_.slice(),0,_.length-1,0);if(!this.data.children.length)this.data=M;else if(this.data.height===M.height)this._splitRoot(this.data,M);else{if(this.data.height<M.height){var T=this.data;this.data=M,M=T}this._insert(M,this.data.height-M.height-1,!0)}return this},a.prototype.insert=function(_){return _&&this._insert(_,this.data.height-1),this},a.prototype.clear=function(){return this.data=O([]),this},a.prototype.remove=function(_,S){if(!_)return this;for(var M=this.data,T=this.toBBox(_),A=[],C=[],N,k,R;M||A.length;){if(M||(M=A.pop(),k=A[A.length-1],N=C.pop(),R=!0),M.leaf){var I=s(_,M.children,S);if(I!==-1)return M.children.splice(I,1),A.push(M),this._condense(A),this}!R&&!M.leaf&&m(M,T)?(A.push(M),C.push(N),N=0,k=M,M=M.children[0]):k?(N++,M=k.children[N],R=!1):M=null}return this},a.prototype.toBBox=function(_){return _},a.prototype.compareMinX=function(_,S){return _.minX-S.minX},a.prototype.compareMinY=function(_,S){return _.minY-S.minY},a.prototype.toJSON=function(){return this.data},a.prototype.fromJSON=function(_){return this.data=_,this},a.prototype._all=function(_,S){for(var M=[];_;)_.leaf?S.push.apply(S,_.children):M.push.apply(M,_.children),_=M.pop();return S},a.prototype._build=function(_,S,M,T){var A=M-S+1,C=this._maxEntries,N;if(A<=C)return N=O(_.slice(S,M+1)),c(N,this.toBBox),N;T||(T=Math.ceil(Math.log(A)/Math.log(C)),C=Math.ceil(A/Math.pow(C,T-1))),N=O([]),N.leaf=!1,N.height=T;var k=Math.ceil(A/C),R=k*Math.ceil(Math.sqrt(C));E(_,S,M,R,this.compareMinX);for(var I=S;I<=M;I+=R){var D=Math.min(I+R-1,M);E(_,I,D,k,this.compareMinY);for(var B=I;B<=D;B+=k){var F=Math.min(B+k-1,D);N.children.push(this._build(_,B,F,T-1))}}return c(N,this.toBBox),N},a.prototype._chooseSubtree=function(_,S,M,T){for(;T.push(S),!(S.leaf||T.length-1===M);){for(var A=1/0,C=1/0,N=void 0,k=0;k<S.children.length;k++){var R=S.children[k],I=h(R),D=v(_,R)-I;D<C?(C=D,A=I<A?I:A,N=R):D===C&&I<A&&(A=I,N=R)}S=N||S.children[0]}return S},a.prototype._insert=function(_,S,M){var T=M?_:this.toBBox(_),A=[],C=this._chooseSubtree(T,this.data,S,A);for(C.children.push(_),u(C,T);S>=0&&A[S].children.length>this._maxEntries;)this._split(A,S),S--;this._adjustParentBBoxes(T,A,S)},a.prototype._split=function(_,S){var M=_[S],T=M.children.length,A=this._minEntries;this._chooseSplitAxis(M,A,T);var C=this._chooseSplitIndex(M,A,T),N=O(M.children.splice(C,M.children.length-C));N.height=M.height,N.leaf=M.leaf,c(M,this.toBBox),c(N,this.toBBox),S?_[S-1].children.push(N):this._splitRoot(M,N)},a.prototype._splitRoot=function(_,S){this.data=O([_,S]),this.data.height=_.height+1,this.data.leaf=!1,c(this.data,this.toBBox)},a.prototype._chooseSplitIndex=function(_,S,M){for(var T,A=1/0,C=1/0,N=S;N<=M-S;N++){var k=l(_,0,N,this.toBBox),R=l(_,N,M,this.toBBox),I=y(k,R),D=h(k)+h(R);I<A?(A=I,T=N,C=D<C?D:C):I===A&&D<C&&(C=D,T=N)}return T||M-S},a.prototype._chooseSplitAxis=function(_,S,M){var T=_.leaf?this.compareMinX:f,A=_.leaf?this.compareMinY:d,C=this._allDistMargin(_,S,M,T),N=this._allDistMargin(_,S,M,A);C<N&&_.children.sort(T)},a.prototype._allDistMargin=function(_,S,M,T){_.children.sort(T);for(var A=this.toBBox,C=l(_,0,S,A),N=l(_,M-S,M,A),k=p(C)+p(N),R=S;R<M-S;R++){var I=_.children[R];u(C,_.leaf?A(I):I),k+=p(C)}for(var D=M-S-1;D>=S;D--){var B=_.children[D];u(N,_.leaf?A(B):B),k+=p(N)}return k},a.prototype._adjustParentBBoxes=function(_,S,M){for(var T=M;T>=0;T--)u(S[T],_)},a.prototype._condense=function(_){for(var S=_.length-1,M=void 0;S>=0;S--)_[S].children.length===0?S>0?(M=_[S-1].children,M.splice(M.indexOf(_[S]),1)):this.clear():c(_[S],this.toBBox)};function s(w,_,S){if(!S)return _.indexOf(w);for(var M=0;M<_.length;M++)if(S(w,_[M]))return M;return-1}function c(w,_){l(w,0,w.children.length,_,w)}function l(w,_,S,M,T){T||(T=O(null)),T.minX=1/0,T.minY=1/0,T.maxX=-1/0,T.maxY=-1/0;for(var A=_;A<S;A++){var C=w.children[A];u(T,w.leaf?M(C):C)}return T}function u(w,_){return w.minX=Math.min(w.minX,_.minX),w.minY=Math.min(w.minY,_.minY),w.maxX=Math.max(w.maxX,_.maxX),w.maxY=Math.max(w.maxY,_.maxY),w}function f(w,_){return w.minX-_.minX}function d(w,_){return w.minY-_.minY}function h(w){return(w.maxX-w.minX)*(w.maxY-w.minY)}function p(w){return w.maxX-w.minX+(w.maxY-w.minY)}function v(w,_){return(Math.max(_.maxX,w.maxX)-Math.min(_.minX,w.minX))*(Math.max(_.maxY,w.maxY)-Math.min(_.minY,w.minY))}function y(w,_){var S=Math.max(w.minX,_.minX),M=Math.max(w.minY,_.minY),T=Math.min(w.maxX,_.maxX),A=Math.min(w.maxY,_.maxY);return Math.max(0,T-S)*Math.max(0,A-M)}function m(w,_){return w.minX<=_.minX&&w.minY<=_.minY&&_.maxX<=w.maxX&&_.maxY<=w.maxY}function b(w,_){return _.minX<=w.maxX&&_.minY<=w.maxY&&_.maxX>=w.minX&&_.maxY>=w.minY}function O(w){return{children:w,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function E(w,_,S,M,T){for(var A=[_,S];A.length;)if(S=A.pop(),_=A.pop(),!(S-_<=M)){var C=_+Math.ceil((S-_)/M/2)*M;n(w,C,_,S,T),A.push(_,C,C,S)}}return a})})(uN);var HY=uN.exports,qt;(function(t){t.GROUP="g",t.CIRCLE="circle",t.ELLIPSE="ellipse",t.IMAGE="image",t.RECT="rect",t.LINE="line",t.POLYLINE="polyline",t.POLYGON="polygon",t.TEXT="text",t.PATH="path",t.HTML="html",t.MESH="mesh"})(qt||(qt={}));var jh;(function(t){t[t.ZERO=0]="ZERO",t[t.NEGATIVE_ONE=1]="NEGATIVE_ONE"})(jh||(jh={}));var UY=function(){function t(){this.plugins=[]}return t.prototype.addRenderingPlugin=function(e){this.plugins.push(e),this.context.renderingPlugins.push(e)},t.prototype.removeAllRenderingPlugins=function(){var e=this;this.plugins.forEach(function(n){var r=e.context.renderingPlugins.indexOf(n);r>=0&&e.context.renderingPlugins.splice(r,1)})},t}(),O0t=function(){function t(e){this.clipSpaceNearZ=jh.NEGATIVE_ONE,this.plugins=[],this.config=nt({enableDirtyCheck:!0,enableCulling:!1,enableAutoRendering:!0,enableDirtyRectangleRendering:!0,enableDirtyRectangleRenderingDebug:!1,enableSizeAttenuation:!0},e)}return t.prototype.registerPlugin=function(e){var n=this.plugins.findIndex(function(r){return r===e});n===-1&&this.plugins.push(e)},t.prototype.unregisterPlugin=function(e){var n=this.plugins.findIndex(function(r){return r===e});n>-1&&this.plugins.splice(n,1)},t.prototype.getPlugins=function(){return this.plugins},t.prototype.getPlugin=function(e){return this.plugins.find(function(n){return n.name===e})},t.prototype.getConfig=function(){return this.config},t.prototype.setConfig=function(e){Object.assign(this.config,e)},t}();function Gh(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function hE(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function G1(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function fN(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function VY(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function XY(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function pE(t){return t===void 0?0:t>360||t<-360?t%360:t}function Na(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=0),Array.isArray(t)&&t.length===3?ea(t):Je(t)?te(t,e,n):te(t[0],t[1]||e,t[2]||n)}function Ar(t){return t*(Math.PI/180)}function Ms(t){return t*(180/Math.PI)}function E0t(t){return t=t%400,t<0&&(t+=400),t/400*360}function S0t(t){return t/360}function $Y(t){return 360*t}function qY(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n,s=r*r,c=i*i,l=o*o,u=a+s+c+l,f=n*o-r*i;return f>.499995*u?(t[0]=Math.PI/2,t[1]=2*Math.atan2(r,n),t[2]=0):f<-.499995*u?(t[0]=-Math.PI/2,t[1]=2*Math.atan2(r,n),t[2]=0):(t[0]=Math.asin(2*(n*i-o*r)),t[1]=Math.atan2(2*(n*o+r*i),1-2*(c+l)),t[2]=Math.atan2(2*(n*r+i*o),1-2*(s+c))),t}function KY(t,e){var n,r,i=Math.PI*.5,o=j(Li(Gt(),e),3),a=o[0],s=o[1],c=o[2],l=Math.asin(-e[2]/a);return l<i?l>-i?(n=Math.atan2(e[6]/s,e[10]/c),r=Math.atan2(e[1]/a,e[0]/a)):(r=0,n=-Math.atan2(e[4]/s,e[5]/s)):(r=0,n=Math.atan2(e[4]/s,e[5]/s)),t[0]=n,t[1]=l,t[2]=r,t}function vE(t,e){return e.length===16?KY(t,e):qY(t,e)}function ZY(t,e,n,r,i){var o=Math.cos(t),a=Math.sin(t);return tv(r*o,i*a,0,-r*a,i*o,0,e,n,1)}function JY(t,e,n,r,i,o,a,s){s===void 0&&(s=!1);var c=2*o/(n-e),l=2*o/(r-i),u=(n+e)/(n-e),f=(r+i)/(r-i),d,h;return s?(d=-a/(a-o),h=-a*o/(a-o)):(d=-(a+o)/(a-o),h=-2*a*o/(a-o)),t[0]=c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=u,t[9]=f,t[10]=d,t[11]=-1,t[12]=0,t[13]=0,t[14]=h,t[15]=0,t}function dN(t){var e=t[0],n=t[1],r=t[3],i=t[4],o=Math.sqrt(e*e+n*n),a=Math.sqrt(r*r+i*i),s=e*i-n*r;s<0&&(e<i?o=-o:a=-a),o&&(e*=1/o,n*=1/o),a&&(r*=1/a,i*=1/a);var c=Math.atan2(n,e),l=Ms(c);return[t[6],t[7],o,a,l]}var Uc=ue(),lc=ue(),S0=rr(),Xe=[Gt(),Gt(),Gt()],hN=Gt();function QY(t,e,n,r,i,o){if(!tH(Uc,t)||(ga(lc,Uc),lc[3]=0,lc[7]=0,lc[11]=0,lc[15]=1,Math.abs(Cd(lc))<1e-8))return!1;var a=Uc[3],s=Uc[7],c=Uc[11],l=Uc[12],u=Uc[13],f=Uc[14],d=Uc[15];if(a!==0||s!==0||c!==0){S0[0]=a,S0[1]=s,S0[2]=c,S0[3]=d;var h=pr(lc,lc);if(!h)return!1;Ad(lc,lc),Yn(i,S0,lc)}else i[0]=i[1]=i[2]=0,i[3]=1;if(e[0]=l,e[1]=u,e[2]=f,eH(Xe,Uc),n[0]=cr(Xe[0]),It(Xe[0],Xe[0]),r[0]=Yt(Xe[0],Xe[1]),gE(Xe[1],Xe[1],Xe[0],1,-r[0]),n[1]=cr(Xe[1]),It(Xe[1],Xe[1]),r[0]/=n[1],r[1]=Yt(Xe[0],Xe[2]),gE(Xe[2],Xe[2],Xe[0],1,-r[1]),r[2]=Yt(Xe[1],Xe[2]),gE(Xe[2],Xe[2],Xe[1],1,-r[2]),n[2]=cr(Xe[2]),It(Xe[2],Xe[2]),r[1]/=n[2],r[2]/=n[2],Wt(hN,Xe[1],Xe[2]),Yt(Xe[0],hN)<0)for(var p=0;p<3;p++)n[p]*=-1,Xe[p][0]*=-1,Xe[p][1]*=-1,Xe[p][2]*=-1;return o[0]=.5*Math.sqrt(Math.max(1+Xe[0][0]-Xe[1][1]-Xe[2][2],0)),o[1]=.5*Math.sqrt(Math.max(1-Xe[0][0]+Xe[1][1]-Xe[2][2],0)),o[2]=.5*Math.sqrt(Math.max(1-Xe[0][0]-Xe[1][1]+Xe[2][2],0)),o[3]=.5*Math.sqrt(Math.max(1+Xe[0][0]+Xe[1][1]+Xe[2][2],0)),Xe[2][1]>Xe[1][2]&&(o[0]=-o[0]),Xe[0][2]>Xe[2][0]&&(o[1]=-o[1]),Xe[1][0]>Xe[0][1]&&(o[2]=-o[2]),!0}function tH(t,e){var n=e[15];if(n===0)return!1;for(var r=1/n,i=0;i<16;i++)t[i]=e[i]*r;return!0}function eH(t,e){t[0][0]=e[0],t[0][1]=e[1],t[0][2]=e[2],t[1][0]=e[4],t[1][1]=e[5],t[1][2]=e[6],t[2][0]=e[8],t[2][1]=e[9],t[2][2]=e[10]}function gE(t,e,n,r,i){t[0]=e[0]*r+n[0]*i,t[1]=e[1]*r+n[1]*i,t[2]=e[2]*r+n[2]*i}var Bi=function(){function t(){this.center=[0,0,0],this.halfExtents=[0,0,0],this.min=[0,0,0],this.max=[0,0,0]}return t.isEmpty=function(e){return!e||e.halfExtents[0]===0&&e.halfExtents[1]===0&&e.halfExtents[2]===0},t.prototype.update=function(e,n){Gh(this.center,e),Gh(this.halfExtents,n),hE(this.min,this.center,this.halfExtents),G1(this.max,this.center,this.halfExtents)},t.prototype.setMinMax=function(e,n){G1(this.center,n,e),fN(this.center,this.center,.5),hE(this.halfExtents,n,e),fN(this.halfExtents,this.halfExtents,.5),Gh(this.min,e),Gh(this.max,n)},t.prototype.getMin=function(){return this.min},t.prototype.getMax=function(){return this.max},t.prototype.add=function(e){if(!t.isEmpty(e)){if(t.isEmpty(this)){this.setMinMax(e.getMin(),e.getMax());return}var n=this.center,r=n[0],i=n[1],o=n[2],a=this.halfExtents,s=a[0],c=a[1],l=a[2],u=r-s,f=r+s,d=i-c,h=i+c,p=o-l,v=o+l,y=e.center,m=y[0],b=y[1],O=y[2],E=e.halfExtents,w=E[0],_=E[1],S=E[2],M=m-w,T=m+w,A=b-_,C=b+_,N=O-S,k=O+S;M<u&&(u=M),T>f&&(f=T),A<d&&(d=A),C>h&&(h=C),N<p&&(p=N),k>v&&(v=k),n[0]=(u+f)*.5,n[1]=(d+h)*.5,n[2]=(p+v)*.5,a[0]=(f-u)*.5,a[1]=(h-d)*.5,a[2]=(v-p)*.5,this.min[0]=u,this.min[1]=d,this.min[2]=p,this.max[0]=f,this.max[1]=h,this.max[2]=v}},t.prototype.setFromTransformedAABB=function(e,n){var r=this.center,i=this.halfExtents,o=e.center,a=e.halfExtents,s=n[0],c=n[4],l=n[8],u=n[1],f=n[5],d=n[9],h=n[2],p=n[6],v=n[10],y=Math.abs(s),m=Math.abs(c),b=Math.abs(l),O=Math.abs(u),E=Math.abs(f),w=Math.abs(d),_=Math.abs(h),S=Math.abs(p),M=Math.abs(v);r[0]=n[12]+s*o[0]+c*o[1]+l*o[2],r[1]=n[13]+u*o[0]+f*o[1]+d*o[2],r[2]=n[14]+h*o[0]+p*o[1]+v*o[2],i[0]=y*a[0]+m*a[1]+b*a[2],i[1]=O*a[0]+E*a[1]+w*a[2],i[2]=_*a[0]+S*a[1]+M*a[2],hE(this.min,r,i),G1(this.max,r,i)},t.prototype.intersects=function(e){var n=this.getMax(),r=this.getMin(),i=e.getMax(),o=e.getMin();return r[0]<=i[0]&&n[0]>=o[0]&&r[1]<=i[1]&&n[1]>=o[1]&&r[2]<=i[2]&&n[2]>=o[2]},t.prototype.intersection=function(e){if(!this.intersects(e))return null;var n=new t,r=VY([0,0,0],this.getMin(),e.getMin()),i=XY([0,0,0],this.getMax(),e.getMax());return n.setMinMax(r,i),n},t.prototype.getNegativeFarPoint=function(e){return e.pnVertexFlag===273?Gh([0,0,0],this.min):e.pnVertexFlag===272?[this.min[0],this.min[1],this.max[2]]:e.pnVertexFlag===257?[this.min[0],this.max[1],this.min[2]]:e.pnVertexFlag===256?[this.min[0],this.max[1],this.max[2]]:e.pnVertexFlag===17?[this.max[0],this.min[1],this.min[2]]:e.pnVertexFlag===16?[this.max[0],this.min[1],this.max[2]]:e.pnVertexFlag===1?[this.max[0],this.max[1],this.min[2]]:[this.max[0],this.max[1],this.max[2]]},t.prototype.getPositiveFarPoint=function(e){return e.pnVertexFlag===273?Gh([0,0,0],this.max):e.pnVertexFlag===272?[this.max[0],this.max[1],this.min[2]]:e.pnVertexFlag===257?[this.max[0],this.min[1],this.max[2]]:e.pnVertexFlag===256?[this.max[0],this.min[1],this.min[2]]:e.pnVertexFlag===17?[this.min[0],this.max[1],this.max[2]]:e.pnVertexFlag===16?[this.min[0],this.max[1],this.min[2]]:e.pnVertexFlag===1?[this.min[0],this.min[1],this.max[2]]:[this.min[0],this.min[1],this.min[2]]},t}(),nH=function(){function t(e,n){this.distance=e||0,this.normal=n||te(0,1,0),this.updatePNVertexFlag()}return t.prototype.updatePNVertexFlag=function(){this.pnVertexFlag=(+(this.normal[0]>=0)<<8)+(+(this.normal[1]>=0)<<4)+ +(this.normal[2]>=0)},t.prototype.distanceToPoint=function(e){return Yt(e,this.normal)-this.distance},t.prototype.normalize=function(){var e=1/Br(this.normal);it(this.normal,this.normal,e),this.distance*=e},t.prototype.intersectsLine=function(e,n,r){var i=this.distanceToPoint(e),o=this.distanceToPoint(n),a=i/(i-o),s=a>=0&&a<=1;return s&&r&&ne(r,e,n,a),s},t}(),Lu;(function(t){t[t.OUTSIDE=4294967295]="OUTSIDE",t[t.INSIDE=0]="INSIDE",t[t.INDETERMINATE=2147483647]="INDETERMINATE"})(Lu||(Lu={}));var rH=function(){function t(e){if(this.planes=[],e)this.planes=e;else for(var n=0;n<6;n++)this.planes.push(new nH)}return t.prototype.extractFromVPMatrix=function(e){var n=j(e,16),r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],c=n[5],l=n[6],u=n[7],f=n[8],d=n[9],h=n[10],p=n[11],v=n[12],y=n[13],m=n[14],b=n[15];Dn(this.planes[0].normal,a-r,u-s,p-f),this.planes[0].distance=b-v,Dn(this.planes[1].normal,a+r,u+s,p+f),this.planes[1].distance=b+v,Dn(this.planes[2].normal,a+i,u+c,p+d),this.planes[2].distance=b+y,Dn(this.planes[3].normal,a-i,u-c,p-d),this.planes[3].distance=b-y,Dn(this.planes[4].normal,a-o,u-l,p-h),this.planes[4].distance=b-m,Dn(this.planes[5].normal,a+o,u+l,p+h),this.planes[5].distance=b+m,this.planes.forEach(function(O){O.normalize(),O.updatePNVertexFlag()})},t}(),Vo=function(){function t(e,n){e===void 0&&(e=0),n===void 0&&(n=0),this.x=0,this.y=0,this.x=e,this.y=n}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copyFrom=function(e){this.x=e.x,this.y=e.y},t}(),zh=function(){function t(e,n,r,i){this.x=e,this.y=n,this.width=r,this.height=i,this.left=e,this.right=e+r,this.top=n,this.bottom=n+i}return t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t.applyTransform=function(e,n){var r=na(e.x,e.y,0,1),i=na(e.x+e.width,e.y,0,1),o=na(e.x,e.y+e.height,0,1),a=na(e.x+e.width,e.y+e.height,0,1),s=rr(),c=rr(),l=rr(),u=rr();Yn(s,r,n),Yn(c,i,n),Yn(l,o,n),Yn(u,a,n);var f=Math.min(s[0],c[0],l[0],u[0]),d=Math.min(s[1],c[1],l[1],u[1]),h=Math.max(s[0],c[0],l[0],u[0]),p=Math.max(s[1],c[1],l[1],u[1]);return t.fromRect({x:f,y:d,width:h-f,height:p-d})},t.prototype.toJSON=function(){},t}(),$r="Method not implemented.",Wh="Use document.documentElement instead.",iH="Cannot append a destroyed element.",qr;(function(t){t[t.ORBITING=0]="ORBITING",t[t.EXPLORING=1]="EXPLORING",t[t.TRACKING=2]="TRACKING"})(qr||(qr={}));var M0;(function(t){t[t.DEFAULT=0]="DEFAULT",t[t.ROTATIONAL=1]="ROTATIONAL",t[t.TRANSLATIONAL=2]="TRANSLATIONAL",t[t.CINEMATIC=3]="CINEMATIC"})(M0||(M0={}));var Ra;(function(t){t[t.ORTHOGRAPHIC=0]="ORTHOGRAPHIC",t[t.PERSPECTIVE=1]="PERSPECTIVE"})(Ra||(Ra={}));var pN={UPDATED:"updated"},vN=2e-4,oH=function(){function t(){this.clipSpaceNearZ=jh.NEGATIVE_ONE,this.eventEmitter=new Xa,this.matrix=ue(),this.right=te(1,0,0),this.up=te(0,1,0),this.forward=te(0,0,1),this.position=te(0,0,1),this.focalPoint=te(0,0,0),this.distanceVector=te(0,0,-1),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.maxDistance=1/0,this.minDistance=-1/0,this.zoom=1,this.rotateWorld=!1,this.fov=30,this.near=.1,this.far=1e3,this.aspect=1,this.projectionMatrix=ue(),this.projectionMatrixInverse=ue(),this.jitteredProjectionMatrix=void 0,this.enableUpdate=!0,this.type=qr.EXPLORING,this.trackingMode=M0.DEFAULT,this.projectionMode=Ra.PERSPECTIVE,this.frustum=new rH,this.orthoMatrix=ue()}return t.prototype.isOrtho=function(){return this.projectionMode===Ra.ORTHOGRAPHIC},t.prototype.getProjectionMode=function(){return this.projectionMode},t.prototype.getPerspective=function(){return this.jitteredProjectionMatrix||this.projectionMatrix},t.prototype.getPerspectiveInverse=function(){return this.projectionMatrixInverse},t.prototype.getFrustum=function(){return this.frustum},t.prototype.getPosition=function(){return this.position},t.prototype.getFocalPoint=function(){return this.focalPoint},t.prototype.getDollyingStep=function(){return this.dollyingStep},t.prototype.getNear=function(){return this.near},t.prototype.getFar=function(){return this.far},t.prototype.getZoom=function(){return this.zoom},t.prototype.getOrthoMatrix=function(){return this.orthoMatrix},t.prototype.getView=function(){return this.view},t.prototype.setEnableUpdate=function(e){this.enableUpdate=e},t.prototype.setType=function(e,n){return this.type=e,this.type===qr.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===qr.TRACKING&&n!==void 0&&this.setTrackingMode(n),this},t.prototype.setProjectionMode=function(e){return this.projectionMode=e,this},t.prototype.setTrackingMode=function(e){if(this.type!==qr.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=e,this},t.prototype.setWorldRotation=function(e){return this.rotateWorld=e,this._getAngles(),this},t.prototype.getViewTransform=function(){return pr(ue(),this.matrix)},t.prototype.getWorldTransform=function(){return this.matrix},t.prototype.jitterProjectionMatrix=function(e,n){var r=wi(ue(),[e,n,0]);this.jitteredProjectionMatrix=Pn(ue(),r,this.projectionMatrix)},t.prototype.clearJitterProjectionMatrix=function(){this.jitteredProjectionMatrix=void 0},t.prototype.setMatrix=function(e){return this.matrix=e,this._update(),this},t.prototype.setProjectionMatrix=function(e){this.projectionMatrix=e},t.prototype.setFov=function(e){return this.setPerspective(this.near,this.far,e,this.aspect),this},t.prototype.setAspect=function(e){return this.setPerspective(this.near,this.far,this.fov,e),this},t.prototype.setNear=function(e){return this.projectionMode===Ra.PERSPECTIVE?this.setPerspective(e,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,e,this.far),this},t.prototype.setFar=function(e){return this.projectionMode===Ra.PERSPECTIVE?this.setPerspective(this.near,e,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,e),this},t.prototype.setViewOffset=function(e,n,r,i,o,a){return this.aspect=e/n,this.view===void 0&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=o,this.view.height=a,this.projectionMode===Ra.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this},t.prototype.clearViewOffset=function(){return this.view!==void 0&&(this.view.enabled=!1),this.projectionMode===Ra.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this},t.prototype.setZoom=function(e){return this.zoom=e,this.projectionMode===Ra.ORTHOGRAPHIC?this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far):this.projectionMode===Ra.PERSPECTIVE&&this.setPerspective(this.near,this.far,this.fov,this.aspect),this},t.prototype.setZoomByViewportPoint=function(e,n){var r=this.canvas.viewport2Canvas({x:n[0],y:n[1]}),i=r.x,o=r.y,a=this.roll;this.rotate(0,0,-a),this.setPosition(i,o),this.setFocalPoint(i,o),this.setZoom(e),this.rotate(0,0,a);var s=this.canvas.viewport2Canvas({x:n[0],y:n[1]}),c=s.x,l=s.y,u=te(c-i,l-o,0),f=Yt(u,this.right)/cr(this.right),d=Yt(u,this.up)/cr(this.up),h=j(this.getPosition(),2),p=h[0],v=h[1],y=j(this.getFocalPoint(),2),m=y[0],b=y[1];return this.setPosition(p-f,v-d),this.setFocalPoint(m-f,b-d),this},t.prototype.setPerspective=function(e,n,r,i){var o;this.projectionMode=Ra.PERSPECTIVE,this.fov=r,this.near=e,this.far=n,this.aspect=i;var a=this.near*Math.tan(Ar(.5*this.fov))/this.zoom,s=2*a,c=this.aspect*s,l=-.5*c;if(!((o=this.view)===null||o===void 0)&&o.enabled){var u=this.view.fullWidth,f=this.view.fullHeight;l+=this.view.offsetX*c/u,a-=this.view.offsetY*s/f,c*=this.view.width/u,s*=this.view.height/f}return JY(this.projectionMatrix,l,l+c,a-s,a,e,this.far,this.clipSpaceNearZ===jh.ZERO),pr(this.projectionMatrixInverse,this.projectionMatrix),this.triggerUpdate(),this},t.prototype.setOrthographic=function(e,n,r,i,o,a){var s;this.projectionMode=Ra.ORTHOGRAPHIC,this.rright=n,this.left=e,this.top=r,this.bottom=i,this.near=o,this.far=a;var c=(this.rright-this.left)/(2*this.zoom),l=(this.top-this.bottom)/(2*this.zoom),u=(this.rright+this.left)/2,f=(this.top+this.bottom)/2,d=u-c,h=u+c,p=f+l,v=f-l;if(!((s=this.view)===null||s===void 0)&&s.enabled){var y=(this.rright-this.left)/this.view.fullWidth/this.zoom,m=(this.top-this.bottom)/this.view.fullHeight/this.zoom;d+=y*this.view.offsetX,h=d+y*this.view.width,p-=m*this.view.offsetY,v=p-m*this.view.height}return this.clipSpaceNearZ===jh.NEGATIVE_ONE?Ld(this.projectionMatrix,d,h,p,v,o,a):vo(this.projectionMatrix,d,h,p,v,o,a),pr(this.projectionMatrixInverse,this.projectionMatrix),this._getOrthoMatrix(),this.triggerUpdate(),this},t.prototype.setPosition=function(e,n,r){n===void 0&&(n=this.position[1]),r===void 0&&(r=this.position[2]);var i=Na(e,n,r);return this._setPosition(i),this.setFocalPoint(this.focalPoint),this.triggerUpdate(),this},t.prototype.setFocalPoint=function(e,n,r){n===void 0&&(n=this.focalPoint[1]),r===void 0&&(r=this.focalPoint[2]);var i=te(0,1,0);if(this.focalPoint=Na(e,n,r),this.trackingMode===M0.CINEMATIC){var o=mc(Gt(),this.focalPoint,this.position);e=o[0],n=o[1],r=o[2];var a=cr(o),s=Ms(Math.asin(n/a)),c=90+Ms(Math.atan2(r,e)),l=ue();Xn(l,l,Ar(c)),nr(l,l,Ar(s)),i=Ft(Gt(),[0,1,0],l)}return pr(this.matrix,Id(ue(),this.position,this.focalPoint,i)),this._getAxes(),this._getDistance(),this._getAngles(),this.triggerUpdate(),this},t.prototype.getDistance=function(){return this.distance},t.prototype.getDistanceVector=function(){return this.distanceVector},t.prototype.setDistance=function(e){if(this.distance===e||e<0)return this;this.distance=e,this.distance<vN&&(this.distance=vN),this.dollyingStep=this.distance/100;var n=Gt();e=this.distance;var r=this.forward,i=this.focalPoint;return n[0]=e*r[0]+i[0],n[1]=e*r[1]+i[1],n[2]=e*r[2]+i[2],this._setPosition(n),this.triggerUpdate(),this},t.prototype.setMaxDistance=function(e){return this.maxDistance=e,this},t.prototype.setMinDistance=function(e){return this.minDistance=e,this},t.prototype.setAzimuth=function(e){return this.azimuth=pE(e),this.computeMatrix(),this._getAxes(),this.type===qr.ORBITING||this.type===qr.EXPLORING?this._getPosition():this.type===qr.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this},t.prototype.getAzimuth=function(){return this.azimuth},t.prototype.setElevation=function(e){return this.elevation=pE(e),this.computeMatrix(),this._getAxes(),this.type===qr.ORBITING||this.type===qr.EXPLORING?this._getPosition():this.type===qr.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this},t.prototype.getElevation=function(){return this.elevation},t.prototype.setRoll=function(e){return this.roll=pE(e),this.computeMatrix(),this._getAxes(),this.type===qr.ORBITING||this.type===qr.EXPLORING?this._getPosition():this.type===qr.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this},t.prototype.getRoll=function(){return this.roll},t.prototype._update=function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles(),this._getOrthoMatrix(),this.triggerUpdate()},t.prototype.computeMatrix=function(){var e=zi(ze(),[0,0,1],Ar(this.roll));po(this.matrix);var n=zi(ze(),[1,0,0],Ar((this.rotateWorld&&this.type!==qr.TRACKING||this.type===qr.TRACKING?1:-1)*this.elevation)),r=zi(ze(),[0,1,0],Ar((this.rotateWorld&&this.type!==qr.TRACKING||this.type===qr.TRACKING?1:-1)*this.azimuth)),i=ni(ze(),r,n);i=ni(ze(),i,e);var o=ou(ue(),i);this.type===qr.ORBITING||this.type===qr.EXPLORING?(ya(this.matrix,this.matrix,this.focalPoint),Pn(this.matrix,this.matrix,o),ya(this.matrix,this.matrix,[0,0,this.distance])):this.type===qr.TRACKING&&(ya(this.matrix,this.matrix,this.position),Pn(this.matrix,this.matrix,o))},t.prototype._setPosition=function(e,n,r){this.position=Na(e,n,r);var i=this.matrix;i[12]=this.position[0],i[13]=this.position[1],i[14]=this.position[2],i[15]=1,this._getOrthoMatrix()},t.prototype._getAxes=function(){lr(this.right,Na(Yn(rr(),[1,0,0,0],this.matrix))),lr(this.up,Na(Yn(rr(),[0,1,0,0],this.matrix))),lr(this.forward,Na(Yn(rr(),[0,0,1,0],this.matrix))),It(this.right,this.right),It(this.up,this.up),It(this.forward,this.forward)},t.prototype._getAngles=function(){var e=this.distanceVector[0],n=this.distanceVector[1],r=this.distanceVector[2],i=cr(this.distanceVector);if(i===0){this.elevation=0,this.azimuth=0;return}this.type===qr.TRACKING?(this.elevation=Ms(Math.asin(n/i)),this.azimuth=Ms(Math.atan2(-e,-r))):this.rotateWorld?(this.elevation=Ms(Math.asin(n/i)),this.azimuth=Ms(Math.atan2(-e,-r))):(this.elevation=-Ms(Math.asin(n/i)),this.azimuth=-Ms(Math.atan2(-e,-r)))},t.prototype._getPosition=function(){lr(this.position,Na(Yn(rr(),[0,0,0,1],this.matrix))),this._getDistance()},t.prototype._getFocalPoint=function(){we(this.distanceVector,[0,0,-this.distance],jd(Fd(),this.matrix)),No(this.focalPoint,this.position,this.distanceVector),this._getDistance()},t.prototype._getDistance=function(){this.distanceVector=mc(Gt(),this.focalPoint,this.position),this.distance=cr(this.distanceVector),this.dollyingStep=this.distance/100},t.prototype._getOrthoMatrix=function(){if(this.projectionMode===Ra.ORTHOGRAPHIC){var e=this.position,n=zi(ze(),[0,0,1],-this.roll*Math.PI/180);Sr(this.orthoMatrix,n,te((this.rright-this.left)/2-e[0],(this.top-this.bottom)/2-e[1],0),te(this.zoom,this.zoom,1),e)}},t.prototype.triggerUpdate=function(){if(this.enableUpdate){var e=this.getViewTransform(),n=Pn(ue(),this.getPerspective(),e);this.getFrustum().extractFromVPMatrix(n),this.eventEmitter.emit(pN.UPDATED)}},t.prototype.rotate=function(e,n,r){throw new Error($r)},t.prototype.pan=function(e,n){throw new Error($r)},t.prototype.dolly=function(e){throw new Error($r)},t.prototype.createLandmark=function(e,n){throw new Error($r)},t.prototype.gotoLandmark=function(e,n){throw new Error($r)},t.prototype.cancelLandmarkAnimation=function(){throw new Error($r)},t}();function So(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError("Expected a function");var n=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=e?e.apply(this,r):r[0],a=n.cache;if(a.has(o))return a.get(o);var s=t.apply(this,r);return n.cache=a.set(o,s)||a,s};return n.cache=new(So.Cache||Map),n}So.Cache=Map;var Jt;(function(t){t[t.kUnknown=0]="kUnknown",t[t.kNumber=1]="kNumber",t[t.kPercentage=2]="kPercentage",t[t.kEms=3]="kEms",t[t.kPixels=4]="kPixels",t[t.kRems=5]="kRems",t[t.kDegrees=6]="kDegrees",t[t.kRadians=7]="kRadians",t[t.kGradians=8]="kGradians",t[t.kTurns=9]="kTurns",t[t.kMilliseconds=10]="kMilliseconds",t[t.kSeconds=11]="kSeconds",t[t.kInteger=12]="kInteger"})(Jt||(Jt={}));var ss;(function(t){t[t.kUNumber=0]="kUNumber",t[t.kUPercent=1]="kUPercent",t[t.kULength=2]="kULength",t[t.kUAngle=3]="kUAngle",t[t.kUTime=4]="kUTime",t[t.kUOther=5]="kUOther"})(ss||(ss={}));var gN;(function(t){t[t.kAll=0]="kAll",t[t.kNonNegative=1]="kNonNegative",t[t.kInteger=2]="kInteger",t[t.kNonNegativeInteger=3]="kNonNegativeInteger",t[t.kPositiveInteger=4]="kPositiveInteger"})(gN||(gN={}));var yE;(function(t){t[t.kYes=0]="kYes",t[t.kNo=1]="kNo"})(yE||(yE={}));var mE;(function(t){t[t.kYes=0]="kYes",t[t.kNo=1]="kNo"})(mE||(mE={}));var aH=[{name:"em",unit_type:Jt.kEms},{name:"px",unit_type:Jt.kPixels},{name:"deg",unit_type:Jt.kDegrees},{name:"rad",unit_type:Jt.kRadians},{name:"grad",unit_type:Jt.kGradians},{name:"ms",unit_type:Jt.kMilliseconds},{name:"s",unit_type:Jt.kSeconds},{name:"rem",unit_type:Jt.kRems},{name:"turn",unit_type:Jt.kTurns}],Iu;(function(t){t[t.kUnknownType=0]="kUnknownType",t[t.kUnparsedType=1]="kUnparsedType",t[t.kKeywordType=2]="kKeywordType",t[t.kUnitType=3]="kUnitType",t[t.kSumType=4]="kSumType",t[t.kProductType=5]="kProductType",t[t.kNegateType=6]="kNegateType",t[t.kInvertType=7]="kInvertType",t[t.kMinType=8]="kMinType",t[t.kMaxType=9]="kMaxType",t[t.kClampType=10]="kClampType",t[t.kTransformType=11]="kTransformType",t[t.kPositionType=12]="kPositionType",t[t.kURLImageType=13]="kURLImageType",t[t.kColorType=14]="kColorType",t[t.kUnsupportedColorType=15]="kUnsupportedColorType"})(Iu||(Iu={}));var sH=function(t){return aH.find(function(e){return e.name===t}).unit_type},cH=function(t){return t?t==="number"?Jt.kNumber:t==="percent"||t==="%"?Jt.kPercentage:sH(t):Jt.kUnknown},lH=function(t){switch(t){case Jt.kNumber:case Jt.kInteger:return ss.kUNumber;case Jt.kPercentage:return ss.kUPercent;case Jt.kPixels:return ss.kULength;case Jt.kMilliseconds:case Jt.kSeconds:return ss.kUTime;case Jt.kDegrees:case Jt.kRadians:case Jt.kGradians:case Jt.kTurns:return ss.kUAngle;default:return ss.kUOther}},uH=function(t){switch(t){case ss.kUNumber:return Jt.kNumber;case ss.kULength:return Jt.kPixels;case ss.kUPercent:return Jt.kPercentage;case ss.kUTime:return Jt.kSeconds;case ss.kUAngle:return Jt.kDegrees;default:return Jt.kUnknown}},yN=function(t){var e=1;switch(t){case Jt.kPixels:case Jt.kDegrees:case Jt.kSeconds:break;case Jt.kMilliseconds:e=.001;break;case Jt.kRadians:e=180/Math.PI;break;case Jt.kGradians:e=.9;break;case Jt.kTurns:e=360;break}return e},xE=function(t){switch(t){case Jt.kNumber:case Jt.kInteger:return"";case Jt.kPercentage:return"%";case Jt.kEms:return"em";case Jt.kRems:return"rem";case Jt.kPixels:return"px";case Jt.kDegrees:return"deg";case Jt.kRadians:return"rad";case Jt.kGradians:return"grad";case Jt.kMilliseconds:return"ms";case Jt.kSeconds:return"s";case Jt.kTurns:return"turn"}return""},z1=function(){function t(){}return t.isAngle=function(e){return e===Jt.kDegrees||e===Jt.kRadians||e===Jt.kGradians||e===Jt.kTurns},t.isLength=function(e){return e>=Jt.kEms&&e<Jt.kDegrees},t.isRelativeUnit=function(e){return e===Jt.kPercentage||e===Jt.kEms||e===Jt.kRems},t.isTime=function(e){return e===Jt.kSeconds||e===Jt.kMilliseconds},t.prototype.toString=function(){return this.buildCSSText(yE.kNo,mE.kNo,"")},t.prototype.isNumericValue=function(){return this.getType()>=Iu.kUnitType&&this.getType()<=Iu.kClampType},t}(),fH=function(t){xt(e,t);function e(n){var r=t.call(this)||this;return r.colorSpace=n,r}return e.prototype.getType=function(){return Iu.kColorType},e.prototype.to=function(n){return this},e}(z1),Du;(function(t){t[t.Constant=0]="Constant",t[t.LinearGradient=1]="LinearGradient",t[t.RadialGradient=2]="RadialGradient"})(Du||(Du={}));var W1=function(t){xt(e,t);function e(n,r){var i=t.call(this)||this;return i.type=n,i.value=r,i}return e.prototype.clone=function(){return new e(this.type,this.value)},e.prototype.buildCSSText=function(n,r,i){return i},e.prototype.getType=function(){return Iu.kColorType},e}(z1),La=function(t){xt(e,t);function e(n){var r=t.call(this)||this;return r.value=n,r}return e.prototype.clone=function(){return new e(this.value)},e.prototype.getType=function(){return Iu.kKeywordType},e.prototype.buildCSSText=function(n,r,i){return i+this.value},e}(z1),dH=So(function(t){return t===void 0&&(t=""),t.replace(/-([a-z])/g,function(e){return e[1].toUpperCase()})}),mN=function(t){return t.split("").map(function(e,n){return e.toUpperCase()===e?"".concat(n!==0?"-":"").concat(e.toLowerCase()):e}).join("")};function hH(t){if(!t)throw new Error}function Yh(t){return typeof t=="function"}function pH(t){return typeof t=="symbol"}var M0t=function(t){return Object.fromEntries(Object.entries(t).filter(function(e){var n=__read(e,2),r=n[1];return r!==void 0}))},vH={d:{alias:"path"},strokeDasharray:{alias:"lineDash"},strokeWidth:{alias:"lineWidth"},textAnchor:{alias:"textAlign"},src:{alias:"img"}},bE=So(function(t){var e=dH(t),n=vH[e];return e=(n==null?void 0:n.alias)||e,e}),gH=function(t,e){e===void 0&&(e="");var n="";return Number.isFinite(t)?(hH(Number.isNaN(t)),n="NaN"):t>0?n="infinity":n="-infinity",n+=e},_E=function(t){return uH(lH(t))},dr=function(t){xt(e,t);function e(n,r){r===void 0&&(r=Jt.kNumber);var i=t.call(this)||this,o;return typeof r=="string"?o=cH(r):o=r,i.unit=o,i.value=n,i}return e.prototype.clone=function(){return new e(this.value,this.unit)},e.prototype.equals=function(n){var r=n;return this.value===r.value&&this.unit===r.unit},e.prototype.getType=function(){return Iu.kUnitType},e.prototype.convertTo=function(n){if(this.unit===n)return new e(this.value,this.unit);var r=_E(this.unit);if(r!==_E(n)||r===Jt.kUnknown)return null;var i=yN(this.unit)/yN(n);return new e(this.value*i,n)},e.prototype.buildCSSText=function(n,r,i){var o;switch(this.unit){case Jt.kUnknown:break;case Jt.kInteger:o=Number(this.value).toFixed(0);break;case Jt.kNumber:case Jt.kPercentage:case Jt.kEms:case Jt.kRems:case Jt.kPixels:case Jt.kDegrees:case Jt.kRadians:case Jt.kGradians:case Jt.kMilliseconds:case Jt.kSeconds:case Jt.kTurns:{var a=-999999,s=999999,c=this.value,l=xE(this.unit);if(c<a||c>s){var u=xE(this.unit);!Number.isFinite(c)||Number.isNaN(c)?o=gH(c,u):o=c+(u||"")}else o="".concat(c).concat(l)}}return i+=o,i},e}(z1),vi=new dr(0,"px");new dr(1,"px");var Ps=new dr(0,"deg"),wE=function(t){xt(e,t);function e(n,r,i,o,a){o===void 0&&(o=1),a===void 0&&(a=!1);var s=t.call(this,"rgb")||this;return s.r=n,s.g=r,s.b=i,s.alpha=o,s.isNone=a,s}return e.prototype.clone=function(){return new e(this.r,this.g,this.b,this.alpha)},e.prototype.buildCSSText=function(n,r,i){return i+"rgba(".concat(this.r,",").concat(this.g,",").concat(this.b,",").concat(this.alpha,")")},e}(fH),Cr=new La("unset"),yH=new La("initial"),mH=new La("inherit"),OE={"":Cr,unset:Cr,initial:yH,inherit:mH},EE=function(t){return OE[t]||(OE[t]=new La(t)),OE[t]},Y1=new wE(0,0,0,0,!0),xN=new wE(0,0,0,0),xH=So(function(t,e,n,r){return new wE(t,e,n,r)},function(t,e,n,r){return"rgba(".concat(t,",").concat(e,",").concat(n,",").concat(r,")")}),yr=function(t,e){return e===void 0&&(e=Jt.kNumber),new dr(t,e)};new dr(50,"%");var SE;(function(t){t[t.Standard=0]="Standard"})(SE||(SE={}));var Hh;(function(t){t[t.ADDED=0]="ADDED",t[t.REMOVED=1]="REMOVED",t[t.Z_INDEX_CHANGED=2]="Z_INDEX_CHANGED"})(Hh||(Hh={}));var bN={absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new zh(0,0,0,0)},ce;(function(t){t.COORDINATE="<coordinate>",t.COLOR="<color>",t.PAINT="<paint>",t.NUMBER="<number>",t.ANGLE="<angle>",t.OPACITY_VALUE="<opacity-value>",t.SHADOW_BLUR="<shadow-blur>",t.LENGTH="<length>",t.PERCENTAGE="<percentage>",t.LENGTH_PERCENTAGE="<length> | <percentage>",t.LENGTH_PERCENTAGE_12="[<length> | <percentage>]{1,2}",t.LENGTH_PERCENTAGE_14="[<length> | <percentage>]{1,4}",t.LIST_OF_POINTS="<list-of-points>",t.PATH="<path>",t.FILTER="<filter>",t.Z_INDEX="<z-index>",t.OFFSET_DISTANCE="<offset-distance>",t.DEFINED_PATH="<defined-path>",t.MARKER="<marker>",t.TRANSFORM="<transform>",t.TRANSFORM_ORIGIN="<transform-origin>",t.TEXT="<text>",t.TEXT_TRANSFORM="<text-transform>"})(ce||(ce={}));function bH(t){var e=t.type,n=t.value;return e==="hex"?"#".concat(n):e==="literal"?n:e==="rgb"?"rgb(".concat(n.join(","),")"):"rgba(".concat(n.join(","),")")}var _H=function(){var t={linearGradient:/^(linear\-gradient)/i,repeatingLinearGradient:/^(repeating\-linear\-gradient)/i,radialGradient:/^(radial\-gradient)/i,repeatingRadialGradient:/^(repeating\-radial\-gradient)/i,conicGradient:/^(conic\-gradient)/i,sideOrCorner:/^to (left (top|bottom)|right (top|bottom)|top (left|right)|bottom (left|right)|left|right|top|bottom)/i,extentKeywords:/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,positionKeywords:/^(left|center|right|top|bottom)/i,pixelValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,percentageValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,emValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,angleValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,startCall:/^\(/,endCall:/^\)/,comma:/^,/,hexColor:/^\#([0-9a-fA-F]+)/,literalColor:/^([a-zA-Z]+)/,rgbColor:/^rgb/i,rgbaColor:/^rgba/i,number:/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/},e="";function n(B){throw new Error(e+": "+B)}function r(){var B=i();return e.length>0&&n("Invalid input not EOF"),B}function i(){return O(o)}function o(){return a("linear-gradient",t.linearGradient,c)||a("repeating-linear-gradient",t.repeatingLinearGradient,c)||a("radial-gradient",t.radialGradient,f)||a("repeating-radial-gradient",t.repeatingRadialGradient,f)||a("conic-gradient",t.conicGradient,f)}function a(B,F,G){return s(F,function(X){var q=G();return q&&(I(t.comma)||n("Missing comma before color stops")),{type:B,orientation:q,colorStops:O(E)}})}function s(B,F){var G=I(B);if(G){I(t.startCall)||n("Missing (");var X=F(G);return I(t.endCall)||n("Missing )"),X}}function c(){return l()||u()}function l(){return R("directional",t.sideOrCorner,1)}function u(){return R("angular",t.angleValue,1)}function f(){var B,F=d(),G;return F&&(B=[],B.push(F),G=e,I(t.comma)&&(F=d(),F?B.push(F):e=G)),B}function d(){var B=h()||p();if(B)B.at=y();else{var F=v();if(F){B=F;var G=y();G&&(B.at=G)}else{var X=m();X&&(B={type:"default-radial",at:X})}}return B}function h(){var B=R("shape",/^(circle)/i,0);return B&&(B.style=k()||v()),B}function p(){var B=R("shape",/^(ellipse)/i,0);return B&&(B.style=C()||v()),B}function v(){return R("extent-keyword",t.extentKeywords,1)}function y(){if(R("position",/^at/,0)){var B=m();return B||n("Missing positioning value"),B}}function m(){var B=b();if(B.x||B.y)return{type:"position",value:B}}function b(){return{x:C(),y:C()}}function O(B){var F=B(),G=[];if(F)for(G.push(F);I(t.comma);)F=B(),F?G.push(F):n("One extra comma");return G}function E(){var B=w();return B||n("Expected color definition"),B.length=C(),B}function w(){return S()||T()||M()||_()}function _(){return R("literal",t.literalColor,0)}function S(){return R("hex",t.hexColor,1)}function M(){return s(t.rgbColor,function(){return{type:"rgb",value:O(A)}})}function T(){return s(t.rgbaColor,function(){return{type:"rgba",value:O(A)}})}function A(){return I(t.number)[1]}function C(){return R("%",t.percentageValue,1)||N()||k()}function N(){return R("position-keyword",t.positionKeywords,1)}function k(){return R("px",t.pixelValue,1)||R("em",t.emValue,1)}function R(B,F,G){var X=I(F);if(X)return{type:B,value:X[G]}}function I(B){var F=/^[\n\r\t\s]+/.exec(e);F&&D(F[0].length);var G=B.exec(e);return G&&D(G[0].length),G}function D(B){e=e.substring(B)}return function(B){return e=B,r()}}();function P0t(t,e,n,r){var i=Ar(r.value),o=0,a=0,s=o+e/2,c=a+n/2,l=Math.abs(e*Math.cos(i))+Math.abs(n*Math.sin(i)),u=t[0]+s-Math.cos(i)*l/2,f=t[1]+c-Math.sin(i)*l/2,d=t[0]+s+Math.cos(i)*l/2,h=t[1]+c+Math.sin(i)*l/2;return{x1:u,y1:f,x2:d,y2:h}}function T0t(t,e,n,r,i,o){var a=r.value,s=i.value;r.unit===Jt.kPercentage&&(a=r.value/100*e),i.unit===Jt.kPercentage&&(s=i.value/100*n);var c=Math.max(distanceSquareRoot([0,0],[a,s]),distanceSquareRoot([0,n],[a,s]),distanceSquareRoot([e,n],[a,s]),distanceSquareRoot([e,0],[a,s]));return o&&(o instanceof dr?c=o.value:o instanceof La&&(o.value==="closest-side"?c=Math.min(a,e-a,s,n-s):o.value==="farthest-side"?c=Math.max(a,e-a,s,n-s):o.value==="closest-corner"&&(c=Math.min(distanceSquareRoot([0,0],[a,s]),distanceSquareRoot([0,n],[a,s]),distanceSquareRoot([e,n],[a,s]),distanceSquareRoot([e,0],[a,s]))))),{x:a+t[0],y:s+t[1],r:c}}var wH=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,OH=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,EH=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,_N=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function SH(t){var e,n,r,i=t.length;t[i-1].length=(e=t[i-1].length)!==null&&e!==void 0?e:{type:"%",value:"100"},i>1&&(t[0].length=(n=t[0].length)!==null&&n!==void 0?n:{type:"%",value:"0"});for(var o=0,a=Number(t[0].length.value),s=1;s<i;s++){var c=(r=t[s].length)===null||r===void 0?void 0:r.value;if(!Lt(c)&&!Lt(a)){for(var l=1;l<s-o;l++)t[o+l].length={type:"%",value:"".concat(a+(Number(c)-a)*l/(s-o))};o=s,a=Number(c)}}}var MH={left:180,top:-90,bottom:90,right:0,"left top":225,"top left":225,"left bottom":135,"bottom left":135,"right top":-45,"top right":-45,"right bottom":45,"bottom right":45},PH=So(function(t){var e;return t.type==="angular"?e=Number(t.value):e=MH[t.value]||0,yr(e,"deg")}),TH=So(function(t){var e=50,n=50,r="%",i="%";if((t==null?void 0:t.type)==="position"){var o=t.value,a=o.x,s=o.y;(a==null?void 0:a.type)==="position-keyword"&&(a.value==="left"?e=0:a.value==="center"?e=50:a.value==="right"?e=100:a.value==="top"?n=0:a.value==="bottom"&&(n=100)),(s==null?void 0:s.type)==="position-keyword"&&(s.value==="left"?e=0:s.value==="center"?n=50:s.value==="right"?e=100:s.value==="top"?n=0:s.value==="bottom"&&(n=100)),((a==null?void 0:a.type)==="px"||(a==null?void 0:a.type)==="%"||(a==null?void 0:a.type)==="em")&&(r=a==null?void 0:a.type,e=Number(a.value)),((s==null?void 0:s.type)==="px"||(s==null?void 0:s.type)==="%"||(s==null?void 0:s.type)==="em")&&(i=s==null?void 0:s.type,n=Number(s.value))}return{cx:yr(e,r),cy:yr(n,i)}}),AH=So(function(t){var e;if(t.indexOf("linear")>-1||t.indexOf("radial")>-1){var n=_H(t);return n.map(function(s){var c=s.type,l=s.orientation,u=s.colorStops;SH(u);var f=u.map(function(O){return{offset:yr(Number(O.length.value),"%"),color:bH(O)}});if(c==="linear-gradient")return new W1(Du.LinearGradient,{angle:l?PH(l):Ps,steps:f});if(c==="radial-gradient"&&(l||(l=[{type:"shape",value:"circle"}]),l[0].type==="shape"&&l[0].value==="circle")){var d=TH(l[0].at),h=d.cx,p=d.cy,v=void 0;if(l[0].style){var y=l[0].style,m=y.type,b=y.value;m==="extent-keyword"?v=EE(b):v=yr(b,m)}return new W1(Du.RadialGradient,{cx:h,cy:p,size:v,steps:f})}})}var r=t[0];if(t[1]==="("||t[2]==="("){if(r==="l"){var i=wH.exec(t);if(i){var o=((e=i[2].match(_N))===null||e===void 0?void 0:e.map(function(s){return s.split(":")}))||[];return[new W1(Du.LinearGradient,{angle:yr(parseFloat(i[1]),"deg"),steps:o.map(function(s){var c=j(s,2),l=c[0],u=c[1];return{offset:yr(Number(l)*100,"%"),color:u}})})]}}else if(r==="r"){var a=CH(t);if(a)if(Qe(a))t=a;else return[new W1(Du.RadialGradient,a)]}else if(r==="p")return kH(t)}});function CH(t){var e,n=OH.exec(t);if(n){var r=((e=n[4].match(_N))===null||e===void 0?void 0:e.map(function(i){return i.split(":")}))||[];return{cx:yr(50,"%"),cy:yr(50,"%"),steps:r.map(function(i){var o=j(i,2),a=o[0],s=o[1];return{offset:yr(Number(a)*100,"%"),color:s}})}}return null}function kH(t){var e=EH.exec(t);if(e){var n=e[1],r=e[2];switch(n){case"a":n="repeat";break;case"x":n="repeat-x";break;case"y":n="repeat-y";break;case"n":n="no-repeat";break;default:n="no-repeat"}return{image:r,repetition:n}}return null}function A0t(t){return!!t.type&&!!t.value}function ME(t){return t&&!!t.image}function wN(t){return t&&!Lt(t.r)&&!Lt(t.g)&&!Lt(t.b)}var Uh=So(function(t){if(ME(t))return nt({repetition:"repeat"},t);if(Lt(t)&&(t=""),t==="transparent")return xN;if(t==="currentColor")t="black";else if(t==="none")return Y1;var e=AH(t);if(e)return e;var n=wl(t),r=[0,0,0,0];return n!==null&&(r[0]=n.r||0,r[1]=n.g||0,r[2]=n.b||0,r[3]=n.opacity),xH.apply(void 0,ut([],j(r),!1))});function NH(t,e){if(!(!wN(t)||!wN(e)))return[[Number(t.r),Number(t.g),Number(t.b),Number(t.alpha)],[Number(e.r),Number(e.g),Number(e.b),Number(e.alpha)],function(n){var r=n.slice();if(r[3])for(var i=0;i<3;i++)r[i]=Math.round(Nn(r[i],0,255));return r[3]=Nn(r[3],0,1),"rgba(".concat(r.join(","),")")}]}function P0(t,e){if(Lt(e))return yr(0,"px");if(e="".concat(e).trim().toLowerCase(),isFinite(Number(e))){if("px".search(t)>=0)return yr(Number(e),"px");if("deg".search(t)>=0)return yr(Number(e),"deg")}var n=[];e=e.replace(t,function(i){return n.push(i),"U"+i});var r="U("+t.source+")";return n.map(function(i){return yr(Number(e.replace(new RegExp("U"+i,"g"),"").replace(new RegExp(r,"g"),"*0")),i)})[0]}var ON=function(t){return P0(new RegExp("px","g"),t)},RH=So(ON),LH=function(t){return P0(new RegExp("%","g"),t)};So(LH);var T0=function(t){return Je(t)||isFinite(Number(t))?yr(Number(t)||0,"px"):P0(new RegExp("px|%|em|rem","g"),t)},Vh=So(T0),PE=function(t){return P0(new RegExp("deg|rad|grad|turn","g"),t)},EN=So(PE);function IH(t,e,n,r,i){i===void 0&&(i=0);var o="",a=t.value||0,s=e.value||0,c=_E(t.unit),l=t.convertTo(c),u=e.convertTo(c);return l&&u?(a=l.value,s=u.value,o=xE(t.unit)):(dr.isLength(t.unit)||dr.isLength(e.unit))&&(a=cs(t,i,n),s=cs(e,i,n),o="px"),[a,s,function(f){return r&&(f=Math.max(f,0)),f+o}]}function Ia(t){var e=0;return t.unit===Jt.kDegrees?e=t.value:t.unit===Jt.kRadians?e=Ms(Number(t.value)):t.unit===Jt.kTurns&&(e=$Y(Number(t.value))),e}function SN(t,e){var n;return Array.isArray(t)?n=t.map(function(r){return Number(r)}):Qe(t)?n=t.split(" ").map(function(r){return Number(r)}):Je(t)&&(n=[t]),e===2?n.length===1?[n[0],n[0]]:[n[0],n[1]]:n.length===1?[n[0],n[0],n[0],n[0]]:n.length===2?[n[0],n[1],n[0],n[1]]:n.length===3?[n[0],n[1],n[2],n[1]]:[n[0],n[1],n[2],n[3]]}function MN(t){return Qe(t)?t.split(" ").map(function(e){return Vh(e)}):t.map(function(e){return Vh(e.toString())})}function cs(t,e,n,r){if(r===void 0&&(r=!1),t.unit===Jt.kPixels)return Number(t.value);if(t.unit===Jt.kPercentage&&n){var i=n.nodeName===qt.GROUP?n.getLocalBounds():n.getGeometryBounds();return(r?i.min[e]:0)+t.value/100*i.halfExtents[e]*2}return 0}var DH=function(t){return P0(/deg|rad|grad|turn|px|%/g,t)},BH=["blur","brightness","drop-shadow","contrast","grayscale","sepia","saturate","hue-rotate","invert"];function PN(t){if(t===void 0&&(t=""),t=t.toLowerCase().trim(),t==="none")return[];for(var e=/\s*([\w-]+)\(([^)]*)\)/g,n=[],r,i=0;r=e.exec(t);){if(r.index!==i)return[];if(i=r.index+r[0].length,BH.indexOf(r[1])>-1&&n.push({name:r[1],params:r[2].split(" ").map(function(o){return DH(o)||Uh(o)})}),e.lastIndex===t.length)return n}return[]}function TN(t){return t.toString()}var Xh=function(t){return typeof t=="number"?yr(t):/^\s*[-+]?(\d*\.)?\d+\s*$/.test(t)?yr(Number(t)):yr(0)},Uf=So(Xh);So(function(t){return Qe(t)?t.split(" ").map(Uf):t.map(Uf)});function TE(t,e){return[t,e,TN]}function AE(t,e){return function(n,r){return[n,r,function(i){return TN(Nn(i,t,e))}]}}function AN(t,e){if(t.length===e.length)return[t,e,function(n){return n}]}function CN(t){return t.parsedStyle.d.totalLength===0&&(t.parsedStyle.d.totalLength=Zd(t.parsedStyle.d.absolutePath)),t.parsedStyle.d.totalLength}function FH(t){return t.parsedStyle.points.totalLength===0&&(t.parsedStyle.points.totalLength=Ui(t.parsedStyle.points.points)),t.parsedStyle.points.totalLength}function jH(t){for(var e=0;e<t.length;e++){var n=t[e-1],r=t[e],i=r[0];if(i==="M"&&n){var o=n[0],a=[r[1],r[2]],s=void 0;o==="L"||o==="M"?s=[n[1],n[2]]:(o==="C"||o==="A"||o==="Q")&&(s=[n[n.length-2],n[n.length-1]]),s&&H1(a,s)&&(t.splice(e,1),e--)}}}function GH(t){for(var e=!1,n=t.length,r=0;r<n;r++){var i=t[r],o=i[0];if(o==="C"||o==="A"||o==="Q"){e=!0;break}}return e}function zH(t){for(var e=[],n=[],r=[],i=0;i<t.length;i++){var o=t[i],a=o[0];a==="M"?(r.length&&(n.push(r),r=[]),r.push([o[1],o[2]])):a==="Z"?r.length&&(e.push(r),r=[]):r.push([o[1],o[2]])}return r.length>0&&n.push(r),{polygons:e,polylines:n}}function H1(t,e){return t[0]===e[0]&&t[1]===e[1]}function WH(t,e){for(var n=[],r=[],i=[],o=0;o<t.length;o++){var a=t[o],s=a.currentPoint,c=a.params,l=a.prePoint,u=void 0;switch(a.command){case"Q":u=uh(l[0],l[1],c[1],c[2],c[3],c[4]);break;case"C":u=Sf(l[0],l[1],c[1],c[2],c[3],c[4],c[5],c[6]);break;case"A":var f=a.arcParams;u=oh(f.cx,f.cy,f.rx,f.ry,f.xRotation,f.startAngle,f.endAngle);break;default:n.push(s[0]),r.push(s[1]);break}u&&(a.box=u,n.push(u.x,u.x+u.width),r.push(u.y,u.y+u.height)),e&&(a.command==="L"||a.command==="M")&&a.prePoint&&a.nextPoint&&i.push(a)}n=n.filter(function(m){return!Number.isNaN(m)&&m!==1/0&&m!==-1/0}),r=r.filter(function(m){return!Number.isNaN(m)&&m!==1/0&&m!==-1/0});var d=Ac(n),h=Ac(r),p=Cc(n),v=Cc(r);if(i.length===0)return{x:d,y:h,width:p-d,height:v-h};for(var o=0;o<i.length;o++){var a=i[o],s=a.currentPoint,y=void 0;s[0]===d?(y=U1(a,e),d=d-y.xExtra):s[0]===p&&(y=U1(a,e),p=p+y.xExtra),s[1]===h?(y=U1(a,e),h=h-y.yExtra):s[1]===v&&(y=U1(a,e),v=v+y.yExtra)}return{x:d,y:h,width:p-d,height:v-h}}function U1(t,e){var n=t.prePoint,r=t.currentPoint,i=t.nextPoint,o=Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2),a=Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2),s=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),c=Math.acos((o+a-s)/(2*Math.sqrt(o)*Math.sqrt(a)));if(!c||Math.sin(c)===0||qs(c,0))return{xExtra:0,yExtra:0};var l=Math.abs(Math.atan2(i[1]-r[1],i[0]-r[0])),u=Math.abs(Math.atan2(i[0]-r[0],i[1]-r[1]));l=l>Math.PI/2?Math.PI-l:l,u=u>Math.PI/2?Math.PI-u:u;var f={xExtra:Math.cos(c/2-l)*(e/2*(1/Math.sin(c/2)))-e/2||0,yExtra:Math.cos(u-c/2)*(e/2*(1/Math.sin(c/2)))-e/2||0};return f}function kN(t,e){return[e[0]+(e[0]-t[0]),e[1]+(e[1]-t[1])]}var NN=function(t,e){var n=t.x*e.x+t.y*e.y,r=Math.sqrt((Math.pow(t.x,2)+Math.pow(t.y,2))*(Math.pow(e.x,2)+Math.pow(e.y,2))),i=t.x*e.y-t.y*e.x<0?-1:1,o=i*Math.acos(n/r);return o},RN=function(t,e,n,r,i,o,a,s){e=Math.abs(e),n=Math.abs(n),r=kc(r,360);var c=Ar(r);if(t.x===a.x&&t.y===a.y)return{x:t.x,y:t.y,ellipticalArcAngle:0};if(e===0||n===0)return{x:0,y:0,ellipticalArcAngle:0};var l=(t.x-a.x)/2,u=(t.y-a.y)/2,f={x:Math.cos(c)*l+Math.sin(c)*u,y:-Math.sin(c)*l+Math.cos(c)*u},d=Math.pow(f.x,2)/Math.pow(e,2)+Math.pow(f.y,2)/Math.pow(n,2);d>1&&(e=Math.sqrt(d)*e,n=Math.sqrt(d)*n);var h=Math.pow(e,2)*Math.pow(n,2)-Math.pow(e,2)*Math.pow(f.y,2)-Math.pow(n,2)*Math.pow(f.x,2),p=Math.pow(e,2)*Math.pow(f.y,2)+Math.pow(n,2)*Math.pow(f.x,2),v=h/p;v=v<0?0:v;var y=(i!==o?1:-1)*Math.sqrt(v),m={x:y*(e*f.y/n),y:y*(-(n*f.x)/e)},b={x:Math.cos(c)*m.x-Math.sin(c)*m.y+(t.x+a.x)/2,y:Math.sin(c)*m.x+Math.cos(c)*m.y+(t.y+a.y)/2},O={x:(f.x-m.x)/e,y:(f.y-m.y)/n},E=NN({x:1,y:0},O),w={x:(-f.x-m.x)/e,y:(-f.y-m.y)/n},_=NN(O,w);!o&&_>0?_-=2*Math.PI:o&&_<0&&(_+=2*Math.PI),_%=2*Math.PI;var S=E+_*s,M=e*Math.cos(S),T=n*Math.sin(S),A={x:Math.cos(c)*M-Math.sin(c)*T+b.x,y:Math.sin(c)*M+Math.cos(c)*T+b.y,ellipticalArcStartAngle:E,ellipticalArcEndAngle:E+_,ellipticalArcAngle:S,ellipticalArcCenter:b,resultantRx:e,resultantRy:n};return A};function YH(t){for(var e=[],n=null,r=null,i=null,o=0,a=t.length,s=0;s<a;s++){var c=t[s];r=t[s+1];var l=c[0],u={command:l,prePoint:n,params:c,startTangent:null,endTangent:null,currentPoint:null,nextPoint:null,arcParams:null,box:null,cubicParams:null};switch(l){case"M":i=[c[1],c[2]],o=s;break;case"A":var f=HH(n,c);u.arcParams=f;break}if(l==="Z")n=i,r=t[o+1];else{var d=c.length;n=[c[d-2],c[d-1]]}r&&r[0]==="Z"&&(r=t[o],e[o]&&(e[o].prePoint=n)),u.currentPoint=n,e[o]&&H1(n,e[o].currentPoint)&&(e[o].prePoint=u.prePoint);var h=r?[r[r.length-2],r[r.length-1]]:null;u.nextPoint=h;var p=u.prePoint;if(["L","H","V"].includes(l))u.startTangent=[p[0]-n[0],p[1]-n[1]],u.endTangent=[n[0]-p[0],n[1]-p[1]];else if(l==="Q"){var v=[c[1],c[2]];u.startTangent=[p[0]-v[0],p[1]-v[1]],u.endTangent=[n[0]-v[0],n[1]-v[1]]}else if(l==="T"){var y=e[s-1],v=kN(y.currentPoint,p);y.command==="Q"?(u.command="Q",u.startTangent=[p[0]-v[0],p[1]-v[1]],u.endTangent=[n[0]-v[0],n[1]-v[1]]):(u.command="TL",u.startTangent=[p[0]-n[0],p[1]-n[1]],u.endTangent=[n[0]-p[0],n[1]-p[1]])}else if(l==="C"){var m=[c[1],c[2]],b=[c[3],c[4]];u.startTangent=[p[0]-m[0],p[1]-m[1]],u.endTangent=[n[0]-b[0],n[1]-b[1]],u.startTangent[0]===0&&u.startTangent[1]===0&&(u.startTangent=[m[0]-b[0],m[1]-b[1]]),u.endTangent[0]===0&&u.endTangent[1]===0&&(u.endTangent=[b[0]-m[0],b[1]-m[1]])}else if(l==="S"){var y=e[s-1],m=kN(y.currentPoint,p),b=[c[1],c[2]];y.command==="C"?(u.command="C",u.startTangent=[p[0]-m[0],p[1]-m[1]],u.endTangent=[n[0]-b[0],n[1]-b[1]]):(u.command="SQ",u.startTangent=[p[0]-b[0],p[1]-b[1]],u.endTangent=[n[0]-b[0],n[1]-b[1]])}else if(l==="A"){var O=LN(u,0),E=O.x,w=O.y,_=LN(u,1,!1),S=_.x,M=_.y;u.startTangent=[E,w],u.endTangent=[S,M]}e.push(u)}return e}function LN(t,e,n){n===void 0&&(n=!0);var r=t.arcParams,i=r.rx,o=i===void 0?0:i,a=r.ry,s=a===void 0?0:a,c=r.xRotation,l=r.arcFlag,u=r.sweepFlag,f=RN({x:t.prePoint[0],y:t.prePoint[1]},o,s,c,!!l,!!u,{x:t.currentPoint[0],y:t.currentPoint[1]},e),d=RN({x:t.prePoint[0],y:t.prePoint[1]},o,s,c,!!l,!!u,{x:t.currentPoint[0],y:t.currentPoint[1]},n?e+.005:e-.005),h=d.x-f.x,p=d.y-f.y,v=Math.sqrt(h*h+p*p);return{x:-h/v,y:-p/v}}function V1(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function CE(t,e){return V1(t)*V1(e)?(t[0]*e[0]+t[1]*e[1])/(V1(t)*V1(e)):1}function IN(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(CE(t,e))}function HH(t,e){var n=e[1],r=e[2],i=kc(Ar(e[3]),Math.PI*2),o=e[4],a=e[5],s=t[0],c=t[1],l=e[6],u=e[7],f=Math.cos(i)*(s-l)/2+Math.sin(i)*(c-u)/2,d=-1*Math.sin(i)*(s-l)/2+Math.cos(i)*(c-u)/2,h=f*f/(n*n)+d*d/(r*r);h>1&&(n*=Math.sqrt(h),r*=Math.sqrt(h));var p=n*n*(d*d)+r*r*(f*f),v=p?Math.sqrt((n*n*(r*r)-p)/p):1;o===a&&(v*=-1),isNaN(v)&&(v=0);var y=r?v*n*d/r:0,m=n?v*-r*f/n:0,b=(s+l)/2+Math.cos(i)*y-Math.sin(i)*m,O=(c+u)/2+Math.sin(i)*y+Math.cos(i)*m,E=[(f-y)/n,(d-m)/r],w=[(-1*f-y)/n,(-1*d-m)/r],_=IN([1,0],E),S=IN(E,w);return CE(E,w)<=-1&&(S=Math.PI),CE(E,w)>=1&&(S=0),a===0&&S>0&&(S=S-2*Math.PI),a===1&&S<0&&(S=S+2*Math.PI),{cx:b,cy:O,rx:H1(t,[l,u])?0:n,ry:H1(t,[l,u])?0:r,startAngle:_,endAngle:_+S,xRotation:i,arcFlag:o,sweepFlag:a}}function UH(t,e,n){return t.reduce(function(r,i){var o="";if(i[0]==="M"||i[0]==="L"){var a=vec3.fromValues(i[1],i[2],0);n&&vec3.transformMat4(a,a,n),o="".concat(i[0]).concat(a[0],",").concat(a[1])}else if(i[0]==="Z")o=i[0];else if(i[0]==="C"){var s=vec3.fromValues(i[1],i[2],0),c=vec3.fromValues(i[3],i[4],0),l=vec3.fromValues(i[5],i[6],0);n&&(vec3.transformMat4(s,s,n),vec3.transformMat4(c,c,n),vec3.transformMat4(l,l,n)),o="".concat(i[0]).concat(s[0],",").concat(s[1],",").concat(c[0],",").concat(c[1],",").concat(l[0],",").concat(l[1])}else if(i[0]==="A"){var u=vec3.fromValues(i[6],i[7],0);n&&vec3.transformMat4(u,u,n),o="".concat(i[0]).concat(i[1],",").concat(i[2],",").concat(i[3],",").concat(i[4],",").concat(i[5],",").concat(u[0],",").concat(u[1])}else if(i[0]==="Q"){var s=vec3.fromValues(i[1],i[2],0),c=vec3.fromValues(i[3],i[4],0);n&&(vec3.transformMat4(s,s,n),vec3.transformMat4(c,c,n)),o="".concat(i[0]).concat(i[1],",").concat(i[2],",").concat(i[3],",").concat(i[4],"}")}return r+=o},"")}function VH(t,e,n,r){return[["M",t,e],["L",n,r]]}function DN(t,e,n,r){var i=(-1+Math.sqrt(2))/3*4,o=t*i,a=e*i,s=n-t,c=n+t,l=r-e,u=r+e;return[["M",s,r],["C",s,r-a,n-o,l,n,l],["C",n+o,l,c,r-a,c,r],["C",c,r+a,n+o,u,n,u],["C",n-o,u,s,r+a,s,r],["Z"]]}function XH(t,e){var n=t.map(function(r,i){return[i===0?"M":"L",r[0],r[1]]});return e&&n.push(["Z"]),n}function $H(t,e,n,r,i){if(i){var o=__read(i,4),a=o[0],s=o[1],c=o[2],l=o[3],u=t>0?1:-1,f=e>0?1:-1,d=u+f!==0?1:0;return[["M",u*a+n,r],["L",t-u*s+n,r],s?["A",s,s,0,0,d,t+n,f*s+r]:null,["L",t+n,e-f*c+r],c?["A",c,c,0,0,d,t+n-u*c,e+r]:null,["L",n+u*l,e+r],l?["A",l,l,0,0,d,n,e+r-f*l]:null,["L",n,f*a+r],a?["A",a,a,0,0,d,u*a+n,r]:null,["Z"]].filter(function(h){return h})}return[["M",n,r],["L",n+t,r],["L",n+t,r+e],["L",n,r+e],["Z"]]}function C0t(t,e){e===void 0&&(e=t.getLocalTransform());var n=[];switch(t.nodeName){case qt.LINE:var r=t.parsedStyle,i=r.x1,o=i===void 0?0:i,a=r.y1,s=a===void 0?0:a,c=r.x2,l=c===void 0?0:c,u=r.y2,f=u===void 0?0:u;n=VH(o,s,l,f);break;case qt.CIRCLE:{var d=t.parsedStyle,h=d.r,p=h===void 0?0:h,v=d.cx,y=v===void 0?0:v,m=d.cy,b=m===void 0?0:m;n=DN(p,p,y,b);break}case qt.ELLIPSE:{var O=t.parsedStyle,E=O.rx,w=E===void 0?0:E,_=O.ry,S=_===void 0?0:_,M=O.cx,y=M===void 0?0:M,T=O.cy,b=T===void 0?0:T;n=DN(w,S,y,b);break}case qt.POLYLINE:case qt.POLYGON:var A=t.parsedStyle.points;n=XH(A.points,t.nodeName===qt.POLYGON);break;case qt.RECT:var C=t.parsedStyle,N=C.width,k=N===void 0?0:N,R=C.height,I=R===void 0?0:R,D=C.x,B=D===void 0?0:D,F=C.y,G=F===void 0?0:F,X=C.radius,q=X&&X.some(function(et){return et!==0});n=$H(k,I,B,G,q&&X.map(function(et){return clamp(et,0,Math.min(Math.abs(k)/2,Math.abs(I)/2))}));break;case qt.PATH:var J=t.parsedStyle.d.absolutePath;n=__spreadArray([],__read(J),!1);break}if(n.length)return UH(n,t,e)}function k0t(t,e,n,r,i){e===void 0&&(e=0),n===void 0&&(n=0),r===void 0&&(r=0),i===void 0&&(i=0);var o=t.map(function(a,s){var c=a[0],l=t[s+1],u=s===0&&(e!==0||n!==0),f=(s===t.length-1||l&&(l[0]==="M"||l[0]==="Z"))&&r!==0&&i!==0;switch(c){case"M":return u?"M ".concat(a[1]+e,",").concat(a[2]+n," L ").concat(a[1],",").concat(a[2]):"M ".concat(a[1],",").concat(a[2]);case"L":return"L ".concat(a[1]+(f?r:0),",").concat(a[2]+(f?i:0));case"Q":return"Q ".concat(a[1]," ").concat(a[2],",").concat(a[3]," ").concat(a[4])+(f?" L ".concat(a[3]+r,",").concat(a[4]+i):"");case"C":return"C ".concat(a[1]," ").concat(a[2],",").concat(a[3]," ").concat(a[4],",").concat(a[5]," ").concat(a[6])+(f?" L ".concat(a[5]+r,",").concat(a[6]+i):"");case"A":return"A ".concat(a[1]," ").concat(a[2]," ").concat(a[3]," ").concat(a[4]," ").concat(a[5]," ").concat(a[6]," ").concat(a[7])+(f?" L ".concat(a[6]+r,",").concat(a[7]+i):"");case"Z":return"Z"}}).join(" ");return~o.indexOf("NaN")?"":o}var BN=function(t){if(t===""||Array.isArray(t)&&t.length===0)return{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:{x:0,y:0,width:0,height:0}};var e;try{e=Tc(t)}catch(d){e=Tc(""),console.error("[g]: Invalid SVG Path definition: ".concat(t))}jH(e);var n=GH(e),r=zH(e),i=r.polygons,o=r.polylines,a=YH(e),s=WH(a,0),c=s.x,l=s.y,u=s.width,f=s.height;return{absolutePath:e,hasArc:n,segments:a,polygons:i,polylines:o,totalLength:0,rect:{x:Number.isFinite(c)?c:0,y:Number.isFinite(l)?l:0,width:Number.isFinite(u)?u:0,height:Number.isFinite(f)?f:0}}},qH=So(BN);function kE(t){return Qe(t)?qH(t):BN(t)}function KH(t,e,n){var r=t.curve,i=e.curve;(!r||r.length===0)&&(r=bl(t.absolutePath,!1),t.curve=r),(!i||i.length===0)&&(i=bl(e.absolutePath,!1),e.curve=i);var o=[r,i];r.length!==i.length&&(o=gu(r,i));var a=yu(o[0])!==yu(o[1])?mf(o[0]):on(o[0]);return[a,xv(o[1],a),function(s){return s}]}function FN(t,e){var n;return Qe(t)?n=t.split(" ").map(function(r){var i=j(r.split(","),2),o=i[0],a=i[1];return[Number(o),Number(a)]}):n=t,{points:n,totalLength:0,segments:[]}}function ZH(t,e){return[t.points,e.points,function(n){return n}]}var si=null;function Da(t){return function(e){var n=0;return t.map(function(r){return r===si?e[n++]:r})}}function Vf(t){return t}var X1={matrix:["NNNNNN",[si,si,0,0,si,si,0,0,0,0,1,0,si,si,0,1],Vf],matrix3d:["NNNNNNNNNNNNNNNN",Vf],rotate:["A"],rotatex:["A"],rotatey:["A"],rotatez:["A"],rotate3d:["NNNA"],perspective:["L"],scale:["Nn",Da([si,si,new dr(1)]),Vf],scalex:["N",Da([si,new dr(1),new dr(1)]),Da([si,new dr(1)])],scaley:["N",Da([new dr(1),si,new dr(1)]),Da([new dr(1),si])],scalez:["N",Da([new dr(1),new dr(1),si])],scale3d:["NNN",Vf],skew:["Aa",null,Vf],skewx:["A",null,Da([si,Ps])],skewy:["A",null,Da([Ps,si])],translate:["Tt",Da([si,si,vi]),Vf],translatex:["T",Da([si,vi,vi]),Da([si,vi])],translatey:["T",Da([vi,si,vi]),Da([vi,si])],translatez:["L",Da([vi,vi,si])],translate3d:["TTL",Vf]};function jN(t){if(t=(t||"none").toLowerCase().trim(),t==="none")return[];for(var e=/\s*(\w+)\(([^)]*)\)/g,n=[],r,i=0;r=e.exec(t);){if(r.index!==i)return[];i=r.index+r[0].length;var o=r[1],a=X1[o];if(!a)return[];var s=r[2].split(","),c=a[0];if(c.length<s.length)return[];for(var l=[],u=0;u<c.length;u++){var f=s[u],d=c[u],h=void 0;if(f?h={A:function(p){return p.trim()==="0"?Ps:EN(p)},N:Uf,T:Vh,L:RH}[d.toUpperCase()](f):h={a:Ps,n:l[0],t:vi}[d],h===void 0)return[];l.push(h)}if(n.push({t:o,d:l}),e.lastIndex===t.length)return n}return[]}function GN(t){if(t=(t||"none").toLowerCase().trim(),t==="none")return[];for(var e=/\s*(\w+)\(([^)]*)\)/g,n=[],r,i=0;r=e.exec(t);){if(r.index!==i)return[];i=r.index+r[0].length;var o=r[1],a=X1[o];if(!a)return[];var s=r[2].split(","),c=a[0];if(c.length<s.length)return[];for(var l=[],u=0;u<c.length;u++){var f=s[u],d=c[u],h=void 0;if(f?h={A:function(p){return p.trim()==="0"?Ps:PE(p)},N:Xh,T:T0,L:ON}[d.toUpperCase()](f):h={a:Ps,n:l[0],t:vi}[d],h===void 0)return[];l.push(h)}if(n.push({t:o,d:l}),e.lastIndex===t.length)return n}return[]}function JH(t){var e,n,r,i;switch(t.t){case"rotatex":return i=Ar(Ia(t.d[0])),[1,0,0,0,0,Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1];case"rotatey":return i=Ar(Ia(t.d[0])),[Math.cos(i),0,-Math.sin(i),0,0,1,0,0,Math.sin(i),0,Math.cos(i),0,0,0,0,1];case"rotate":case"rotatez":return i=Ar(Ia(t.d[0])),[Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1,0,0,0,0,1];case"rotate3d":e=t.d[0].value,n=t.d[1].value,r=t.d[2].value,i=Ar(Ia(t.d[3]));var o=e*e+n*n+r*r;if(o===0)e=1,n=0,r=0;else if(o!==1){var a=Math.sqrt(o);e/=a,n/=a,r/=a}var s=Math.sin(i/2),c=s*Math.cos(i/2),l=s*s;return[1-2*(n*n+r*r)*l,2*(e*n*l+r*c),2*(e*r*l-n*c),0,2*(e*n*l-r*c),1-2*(e*e+r*r)*l,2*(n*r*l+e*c),0,2*(e*r*l+n*c),2*(n*r*l-e*c),1-2*(e*e+n*n)*l,0,0,0,0,1];case"scale":return[t.d[0].value,0,0,0,0,t.d[1].value,0,0,0,0,1,0,0,0,0,1];case"scalex":return[t.d[0].value,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"scaley":return[1,0,0,0,0,t.d[0].value,0,0,0,0,1,0,0,0,0,1];case"scalez":return[1,0,0,0,0,1,0,0,0,0,t.d[0].value,0,0,0,0,1];case"scale3d":return[t.d[0].value,0,0,0,0,t.d[1].value,0,0,0,0,t.d[2].value,0,0,0,0,1];case"skew":var u=Ar(Ia(t.d[0])),f=Ar(Ia(t.d[1]));return[1,Math.tan(f),0,0,Math.tan(u),1,0,0,0,0,1,0,0,0,0,1];case"skewx":return i=Ar(Ia(t.d[0])),[1,0,0,0,Math.tan(i),1,0,0,0,0,1,0,0,0,0,1];case"skewy":return i=Ar(Ia(t.d[0])),[1,Math.tan(i),0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"translate":return e=cs(t.d[0],0,null)||0,n=cs(t.d[1],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,e,n,0,1];case"translatex":return e=cs(t.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,e,0,0,1];case"translatey":return n=cs(t.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,n,0,1];case"translatez":return r=cs(t.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,r,1];case"translate3d":return e=cs(t.d[0],0,null)||0,n=cs(t.d[1],0,null)||0,r=cs(t.d[2],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,e,n,r,1];case"perspective":var d=cs(t.d[0],0,null)||0,h=d?-1/d:0;return[1,0,0,0,0,1,0,0,0,0,1,h,0,0,0,1];case"matrix":return[t.d[0].value,t.d[1].value,0,0,t.d[2].value,t.d[3].value,0,0,0,0,1,0,t.d[4].value,t.d[5].value,0,1];case"matrix3d":return t.d.map(function(p){return p.value})}}function QH(t,e){return[t[0]*e[0]+t[4]*e[1]+t[8]*e[2]+t[12]*e[3],t[1]*e[0]+t[5]*e[1]+t[9]*e[2]+t[13]*e[3],t[2]*e[0]+t[6]*e[1]+t[10]*e[2]+t[14]*e[3],t[3]*e[0]+t[7]*e[1]+t[11]*e[2]+t[15]*e[3],t[0]*e[4]+t[4]*e[5]+t[8]*e[6]+t[12]*e[7],t[1]*e[4]+t[5]*e[5]+t[9]*e[6]+t[13]*e[7],t[2]*e[4]+t[6]*e[5]+t[10]*e[6]+t[14]*e[7],t[3]*e[4]+t[7]*e[5]+t[11]*e[6]+t[15]*e[7],t[0]*e[8]+t[4]*e[9]+t[8]*e[10]+t[12]*e[11],t[1]*e[8]+t[5]*e[9]+t[9]*e[10]+t[13]*e[11],t[2]*e[8]+t[6]*e[9]+t[10]*e[10]+t[14]*e[11],t[3]*e[8]+t[7]*e[9]+t[11]*e[10]+t[15]*e[11],t[0]*e[12]+t[4]*e[13]+t[8]*e[14]+t[12]*e[15],t[1]*e[12]+t[5]*e[13]+t[9]*e[14]+t[13]*e[15],t[2]*e[12]+t[6]*e[13]+t[10]*e[14]+t[14]*e[15],t[3]*e[12]+t[7]*e[13]+t[11]*e[14]+t[15]*e[15]]}function tU(t){return t.length===0?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:t.map(JH).reduce(QH)}function zN(t){var e=[0,0,0],n=[1,1,1],r=[0,0,0],i=[0,0,0,1],o=[0,0,0,1];return QY(tU(t),e,n,r,i,o),[[e,n,r,o,i]]}var eU=function(){function t(r,i){for(var o=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],a=0;a<4;a++)for(var s=0;s<4;s++)for(var c=0;c<4;c++)o[a][s]+=i[a][c]*r[c][s];return o}function e(r){return r[0][2]==0&&r[0][3]==0&&r[1][2]==0&&r[1][3]==0&&r[2][0]==0&&r[2][1]==0&&r[2][2]==1&&r[2][3]==0&&r[3][2]==0&&r[3][3]==1}function n(r,i,o,a,s){for(var c=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],l=0;l<4;l++)c[l][3]=s[l];for(var l=0;l<3;l++)for(var u=0;u<3;u++)c[3][l]+=r[u]*c[u][l];var f=a[0],d=a[1],h=a[2],p=a[3],v=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];v[0][0]=1-2*(d*d+h*h),v[0][1]=2*(f*d-h*p),v[0][2]=2*(f*h+d*p),v[1][0]=2*(f*d+h*p),v[1][1]=1-2*(f*f+h*h),v[1][2]=2*(d*h-f*p),v[2][0]=2*(f*h-d*p),v[2][1]=2*(d*h+f*p),v[2][2]=1-2*(f*f+d*d),c=t(c,v);var y=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];o[2]&&(y[2][1]=o[2],c=t(c,y)),o[1]&&(y[2][1]=0,y[2][0]=o[0],c=t(c,y)),o[0]&&(y[2][0]=0,y[1][0]=o[0],c=t(c,y));for(var l=0;l<3;l++)for(var u=0;u<3;u++)c[l][u]*=i[l];return e(c)?[c[0][0],c[0][1],c[1][0],c[1][1],c[3][0],c[3][1]]:c[0].concat(c[1],c[2],c[3])}return n}();function nU(t){return t.toFixed(6).replace(".000000","")}function NE(t,e){var n,r;return t.decompositionPair!==e&&(t.decompositionPair=e,n=zN(t)),e.decompositionPair!==t&&(e.decompositionPair=t,r=zN(e)),n[0]===null||r[0]===null?[[!1],[!0],function(i){return i?e[0].d:t[0].d}]:(n[0].push(0),r[0].push(1),[n,r,function(i){var o=iU(n[0][3],r[0][3],i[5]),a=eU(i[0],i[1],i[2],o,i[4]),s=a.map(nU).join(",");return s}])}function rU(t,e){for(var n=0,r=0;r<t.length;r++)n+=t[r]*e[r];return n}function iU(t,e,n){var r=rU(t,e);r=Nn(r,-1,1);var i=[];if(r===1)i=t;else for(var o=Math.acos(r),a=Math.sin(n*o)*1/Math.sqrt(1-r*r),s=0;s<4;s++)i.push(t[s]*(Math.cos(n*o)-r*a)+e[s]*a);return i}function RE(t){return t.replace(/[xy]/,"")}function LE(t){return t.replace(/(x|y|z|3d)?$/,"3d")}var oU=function(t,e){return t==="perspective"&&e==="perspective"||(t==="matrix"||t==="matrix3d")&&(e==="matrix"||e==="matrix3d")};function aU(t,e,n){var r=!1;if(!t.length||!e.length){t.length||(r=!0,t=e,e=[]);for(var i=function(_){var S=t[_],M=S.t,T=S.d,A=M.substring(0,5)==="scale"?1:0;e.push({t:M,d:T.map(function(C){return typeof C=="number"?yr(A):yr(A,C.unit)})})},o=0;o<t.length;o++)i(o)}var a=[],s=[],c=[];if(t.length!==e.length){var l=NE(t,e);a=[l[0]],s=[l[1]],c=[["matrix",[l[2]]]]}else for(var o=0;o<t.length;o++){var u=t[o].t,f=e[o].t,d=t[o].d,h=e[o].d,p=X1[u],v=X1[f],y=void 0;if(oU(u,f)){var l=NE([t[o]],[e[o]]);a.push(l[0]),s.push(l[1]),c.push(["matrix",[l[2]]]);continue}else if(u===f)y=u;else if(p[2]&&v[2]&&RE(u)===RE(f))y=RE(u),d=p[2](d),h=v[2](h);else if(p[1]&&v[1]&&LE(u)===LE(f))y=LE(u),d=p[1](d),h=v[1](h);else{var l=NE(t,e);a=[l[0]],s=[l[1]],c=[["matrix",[l[2]]]];break}for(var m=[],b=[],O=[],E=0;E<d.length;E++){var l=IH(d[E],h[E],n,!1,E);m[E]=l[0],b[E]=l[1],O.push(l[2])}a.push(m),s.push(b),c.push([y,O])}if(r){var w=a;a=s,s=w}return[a,s,function(_){return _.map(function(S,M){var T=S.map(function(A,C){return c[M][1][C](A)}).join(",");return c[M][0]==="matrix"&&T.split(",").length===16&&(c[M][0]="matrix3d"),c[M][0]==="matrix3d"&&T.split(",").length===6&&(c[M][0]="matrix"),c[M][0]+"("+T+")"}).join(" ")}]}var WN=So(function(t){if(Qe(t)){if(t==="text-anchor")return[yr(0,"px"),yr(0,"px")];var e=t.split(" ");return e.length===1&&(e[0]==="top"||e[0]==="bottom"?(e[1]=e[0],e[0]="center"):e[1]="center"),e.length!==2?null:[Vh($1(e[0])),Vh($1(e[1]))]}else return[yr(t[0]||0,"px"),yr(t[1]||0,"px")]}),sU=function(t){if(Qe(t)){if(t==="text-anchor")return[yr(0,"px"),yr(0,"px")];var e=t.split(" ");return e.length===1&&(e[0]==="top"||e[0]==="bottom"?(e[1]=e[0],e[0]="center"):e[1]="center"),e.length!==2?null:[T0($1(e[0])),T0($1(e[1]))]}else return[yr(t[0]||0,"px"),yr(t[1]||0,"px")]};function $1(t){return t==="center"?"50%":t==="left"||t==="top"?"0%":t==="right"||t==="bottom"?"100%":t}var IE=[{n:"display",k:["none"]},{n:"opacity",int:!0,inh:!0,d:"1",syntax:ce.OPACITY_VALUE},{n:"fillOpacity",int:!0,inh:!0,d:"1",syntax:ce.OPACITY_VALUE},{n:"strokeOpacity",int:!0,inh:!0,d:"1",syntax:ce.OPACITY_VALUE},{n:"fill",int:!0,k:["none"],d:"none",syntax:ce.PAINT},{n:"fillRule",k:["nonzero","evenodd"],d:"nonzero"},{n:"stroke",int:!0,k:["none"],d:"none",syntax:ce.PAINT,l:!0},{n:"shadowType",k:["inner","outer","both"],d:"outer",l:!0},{n:"shadowColor",int:!0,syntax:ce.COLOR},{n:"shadowOffsetX",int:!0,l:!0,d:"0",syntax:ce.LENGTH_PERCENTAGE},{n:"shadowOffsetY",int:!0,l:!0,d:"0",syntax:ce.LENGTH_PERCENTAGE},{n:"shadowBlur",int:!0,l:!0,d:"0",syntax:ce.SHADOW_BLUR},{n:"lineWidth",int:!0,inh:!0,d:"1",l:!0,a:["strokeWidth"],syntax:ce.LENGTH_PERCENTAGE},{n:"increasedLineWidthForHitTesting",inh:!0,d:"0",l:!0,syntax:ce.LENGTH_PERCENTAGE},{n:"lineJoin",inh:!0,l:!0,a:["strokeLinejoin"],k:["miter","bevel","round"],d:"miter"},{n:"lineCap",inh:!0,l:!0,a:["strokeLinecap"],k:["butt","round","square"],d:"butt"},{n:"lineDash",int:!0,inh:!0,k:["none"],a:["strokeDasharray"],syntax:ce.LENGTH_PERCENTAGE_12},{n:"lineDashOffset",int:!0,inh:!0,d:"0",a:["strokeDashoffset"],syntax:ce.LENGTH_PERCENTAGE},{n:"offsetPath",syntax:ce.DEFINED_PATH},{n:"offsetDistance",int:!0,syntax:ce.OFFSET_DISTANCE},{n:"dx",int:!0,l:!0,d:"0",syntax:ce.LENGTH_PERCENTAGE},{n:"dy",int:!0,l:!0,d:"0",syntax:ce.LENGTH_PERCENTAGE},{n:"zIndex",ind:!0,int:!0,d:"0",k:["auto"],syntax:ce.Z_INDEX},{n:"visibility",k:["visible","hidden"],ind:!0,inh:!0,int:!0,d:"visible"},{n:"pointerEvents",inh:!0,k:["none","auto","stroke","fill","painted","visible","visiblestroke","visiblefill","visiblepainted","all"],d:"auto"},{n:"filter",ind:!0,l:!0,k:["none"],d:"none",syntax:ce.FILTER},{n:"clipPath",syntax:ce.DEFINED_PATH},{n:"textPath",syntax:ce.DEFINED_PATH},{n:"textPathSide",k:["left","right"],d:"left"},{n:"textPathStartOffset",l:!0,d:"0",syntax:ce.LENGTH_PERCENTAGE},{n:"transform",p:100,int:!0,k:["none"],d:"none",syntax:ce.TRANSFORM},{n:"transformOrigin",p:100,d:"0 0",l:!0,syntax:ce.TRANSFORM_ORIGIN},{n:"cx",int:!0,l:!0,d:"0",syntax:ce.COORDINATE},{n:"cy",int:!0,l:!0,d:"0",syntax:ce.COORDINATE},{n:"cz",int:!0,l:!0,d:"0",syntax:ce.COORDINATE},{n:"r",int:!0,l:!0,d:"0",syntax:ce.LENGTH_PERCENTAGE},{n:"rx",int:!0,l:!0,d:"0",syntax:ce.LENGTH_PERCENTAGE},{n:"ry",int:!0,l:!0,d:"0",syntax:ce.LENGTH_PERCENTAGE},{n:"x",int:!0,l:!0,d:"0",syntax:ce.COORDINATE},{n:"y",int:!0,l:!0,d:"0",syntax:ce.COORDINATE},{n:"z",int:!0,l:!0,d:"0",syntax:ce.COORDINATE},{n:"width",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:ce.LENGTH_PERCENTAGE},{n:"height",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:ce.LENGTH_PERCENTAGE},{n:"radius",int:!0,l:!0,d:"0",syntax:ce.LENGTH_PERCENTAGE_14},{n:"x1",int:!0,l:!0,syntax:ce.COORDINATE},{n:"y1",int:!0,l:!0,syntax:ce.COORDINATE},{n:"z1",int:!0,l:!0,syntax:ce.COORDINATE},{n:"x2",int:!0,l:!0,syntax:ce.COORDINATE},{n:"y2",int:!0,l:!0,syntax:ce.COORDINATE},{n:"z2",int:!0,l:!0,syntax:ce.COORDINATE},{n:"d",int:!0,l:!0,d:"",syntax:ce.PATH,p:50},{n:"points",int:!0,l:!0,syntax:ce.LIST_OF_POINTS,p:50},{n:"text",l:!0,d:"",syntax:ce.TEXT,p:50},{n:"textTransform",l:!0,inh:!0,k:["capitalize","uppercase","lowercase","none"],d:"none",syntax:ce.TEXT_TRANSFORM,p:51},{n:"font",l:!0},{n:"fontSize",int:!0,inh:!0,d:"16px",l:!0,syntax:ce.LENGTH_PERCENTAGE},{n:"fontFamily",l:!0,inh:!0,d:"sans-serif"},{n:"fontStyle",l:!0,inh:!0,k:["normal","italic","oblique"],d:"normal"},{n:"fontWeight",l:!0,inh:!0,k:["normal","bold","bolder","lighter"],d:"normal"},{n:"fontVariant",l:!0,inh:!0,k:["normal","small-caps"],d:"normal"},{n:"lineHeight",l:!0,syntax:ce.LENGTH,int:!0,d:"0"},{n:"letterSpacing",l:!0,syntax:ce.LENGTH,int:!0,d:"0"},{n:"miterLimit",l:!0,syntax:ce.NUMBER,d:function(t){return t===qt.PATH||t===qt.POLYGON||t===qt.POLYLINE?"4":"10"}},{n:"wordWrap",l:!0},{n:"wordWrapWidth",l:!0},{n:"maxLines",l:!0},{n:"textOverflow",l:!0,d:"clip"},{n:"leading",l:!0},{n:"textBaseline",l:!0,inh:!0,k:["top","hanging","middle","alphabetic","ideographic","bottom"],d:"alphabetic"},{n:"textAlign",l:!0,inh:!0,k:["start","center","middle","end","left","right"],d:"start"},{n:"markerStart",syntax:ce.MARKER},{n:"markerEnd",syntax:ce.MARKER},{n:"markerMid",syntax:ce.MARKER},{n:"markerStartOffset",syntax:ce.LENGTH,l:!0,int:!0,d:"0"},{n:"markerEndOffset",syntax:ce.LENGTH,l:!0,int:!0,d:"0"}],YN=IE.filter(function(t){return!!t.l}).map(function(t){return t.n}),Xf={},$h=new WeakMap,cU=function(t,e){var n=$h.get(t);return!n||n.length===0?!0:n.includes(e)},lU=function(){function t(e){var n=this;this.runtime=e,IE.forEach(function(r){n.registerMetadata(r)})}return t.prototype.registerMetadata=function(e){ut([e.n],j(e.a||[]),!1).forEach(function(n){Xf[n]=e})},t.prototype.unregisterMetadata=function(e){delete Xf[e]},t.prototype.getPropertySyntax=function(e){return this.runtime.CSSPropertySyntaxFactory[e]},t.prototype.processProperties=function(e,n,r){var i=this;if(r===void 0&&(r={skipUpdateAttribute:!1,skipParse:!1,forceUpdateGeometry:!1,usedAttributes:[],memoize:!0}),this.runtime.enableCSSParsing){var u=r.skipUpdateAttribute,f=r.skipParse,d=r.forceUpdateGeometry,h=r.usedAttributes,p=r.memoize,v=d,y=Object.keys(n);y.forEach(function(m){var b;u||(e.attributes[m]=n[m]),!v&&(!((b=Xf[m])===null||b===void 0)&&b.l)&&(v=!0)}),f||y.forEach(function(m){e.computedStyle[m]=i.parseProperty(m,e.attributes[m],e,p)}),h!=null&&h.length&&(y=Array.from(new Set(y.concat(h)))),y.forEach(function(m){m in e.computedStyle&&(e.parsedStyle[m]=i.computeProperty(m,e.computedStyle[m],e,p))}),v&&(e.geometry.dirty=!0,e.renderable.boundsDirty=!0,e.renderable.renderBoundsDirty=!0,r.forceUpdateGeometry||this.runtime.sceneGraphService.dirtifyToRoot(e)),y.forEach(function(m){m in e.parsedStyle&&i.postProcessProperty(m,e,y)}),this.runtime.enableCSSParsing&&e.children.length&&y.forEach(function(m){m in e.parsedStyle&&i.isPropertyInheritable(m)&&e.children.forEach(function(b){b.internalSetAttribute(m,null,{skipUpdateAttribute:!0,skipParse:!0})})})}else{Object.assign(e.attributes,n);var o=Object.keys(n),a=e.parsedStyle.clipPath,s=e.parsedStyle.offsetPath;e.parsedStyle=Object.assign(e.parsedStyle,n);var c=!!r.forceUpdateGeometry;if(!c){for(var l=0;l<YN.length;l++)if(YN[l]in n){c=!0;break}}n.fill&&(e.parsedStyle.fill=Uh(n.fill)),n.stroke&&(e.parsedStyle.stroke=Uh(n.stroke)),n.shadowColor&&(e.parsedStyle.shadowColor=Uh(n.shadowColor)),n.filter&&(e.parsedStyle.filter=PN(n.filter)),Lt(n.radius)||(e.parsedStyle.radius=SN(n.radius,4)),Lt(n.lineDash)||(e.parsedStyle.lineDash=SN(n.lineDash,2)),n.points&&(e.parsedStyle.points=FN(n.points)),n.d===""&&(e.parsedStyle.d=nt({},bN)),n.d&&(e.parsedStyle.d=kE(n.d)),n.textTransform&&this.runtime.CSSPropertySyntaxFactory["<text-transform>"].calculator(null,null,{value:n.textTransform},e,null),le(n.clipPath)||this.runtime.CSSPropertySyntaxFactory["<defined-path>"].calculator("clipPath",a,n.clipPath,e,this.runtime),n.offsetPath&&this.runtime.CSSPropertySyntaxFactory["<defined-path>"].calculator("offsetPath",s,n.offsetPath,e,this.runtime),n.transform&&(e.parsedStyle.transform=jN(n.transform)),n.transformOrigin&&(e.parsedStyle.transformOrigin=WN(n.transformOrigin)),n.markerStart&&(e.parsedStyle.markerStart=this.runtime.CSSPropertySyntaxFactory["<marker>"].calculator(null,n.markerStart,n.markerStart,null,null)),n.markerEnd&&(e.parsedStyle.markerEnd=this.runtime.CSSPropertySyntaxFactory["<marker>"].calculator(null,n.markerEnd,n.markerEnd,null,null)),n.markerMid&&(e.parsedStyle.markerMid=this.runtime.CSSPropertySyntaxFactory["<marker>"].calculator("",n.markerMid,n.markerMid,null,null)),Lt(n.zIndex)||this.runtime.CSSPropertySyntaxFactory["<z-index>"].postProcessor(e,o),Lt(n.offsetDistance)||this.runtime.CSSPropertySyntaxFactory["<offset-distance>"].postProcessor(e,o),n.transform&&this.runtime.CSSPropertySyntaxFactory["<transform>"].postProcessor(e,o),n.transformOrigin&&this.runtime.CSSPropertySyntaxFactory["<transform-origin>"].postProcessor(e,o),c&&(e.geometry.dirty=!0,e.renderable.boundsDirty=!0,e.renderable.renderBoundsDirty=!0,r.forceUpdateGeometry||this.runtime.sceneGraphService.dirtifyToRoot(e))}},t.prototype.parseProperty=function(e,n,r,i){var o=Xf[e],a=n;if((n===""||Lt(n))&&(n="unset"),n==="unset"||n==="initial"||n==="inherit")a=EE(n);else if(o){var s=o.k,c=o.syntax,l=c&&this.getPropertySyntax(c);s&&s.indexOf(n)>-1?a=EE(n):l&&(!i&&l.parserUnmemoize?a=l.parserUnmemoize(n,r):l.parser&&(a=l.parser(n,r)))}return a},t.prototype.computeProperty=function(e,n,r,i){var o=Xf[e],a=r.id==="g-root",s=n;if(o){var c=o.syntax,l=o.inh,u=o.d;if(n instanceof La){var f=n.value;if(f==="unset"&&(l&&!a?f="inherit":f="initial"),f==="initial")Lt(u)||(n=this.parseProperty(e,Yh(u)?u(r.nodeName):u,r,i));else if(f==="inherit"){var d=this.tryToResolveProperty(r,e,{inherited:!0});if(Lt(d)){this.addUnresolveProperty(r,e);return}else return d}}var h=c&&this.getPropertySyntax(c);if(h&&h.calculator){var p=r.parsedStyle[e];s=h.calculator(e,p,n,r,this.runtime)}else n instanceof La?s=n.value:s=n}return s},t.prototype.postProcessProperty=function(e,n,r){var i=Xf[e];if(i&&i.syntax){var o=i.syntax&&this.getPropertySyntax(i.syntax),a=o;a&&a.postProcessor&&a.postProcessor(n,r)}},t.prototype.addUnresolveProperty=function(e,n){var r=$h.get(e);r||($h.set(e,[]),r=$h.get(e)),r.indexOf(n)===-1&&r.push(n)},t.prototype.tryToResolveProperty=function(e,n,r){r===void 0&&(r={});var i=r.inherited;if(i&&e.parentElement&&cU(e.parentElement,n)){var o=e.parentElement.parsedStyle[n];return o==="unset"||o==="initial"||o==="inherit"?void 0:o}},t.prototype.recalc=function(e){var n=$h.get(e);if(n&&n.length){var r={};n.forEach(function(i){r[i]=e.attributes[i]}),this.processProperties(e,r),$h.delete(e)}},t.prototype.updateGeometry=function(e){var n=e.nodeName,r=this.runtime.geometryUpdaterFactory[n];if(r){var i=e.geometry;i.contentBounds||(i.contentBounds=new Bi),i.renderBounds||(i.renderBounds=new Bi);var o=e.parsedStyle,a=r.update(o,e),s=a.cx,c=s===void 0?0:s,l=a.cy,u=l===void 0?0:l,f=a.cz,d=f===void 0?0:f,h=a.hwidth,p=h===void 0?0:h,v=a.hheight,y=v===void 0?0:v,m=a.hdepth,b=m===void 0?0:m,O=[Math.abs(p),Math.abs(y),b],E=o,w=E.stroke,_=E.lineWidth,S=_===void 0?1:_,M=E.increasedLineWidthForHitTesting,T=M===void 0?0:M,A=E.shadowType,C=A===void 0?"outer":A,N=E.shadowColor,k=E.filter,R=k===void 0?[]:k,I=E.transformOrigin,D=[c,u,d];i.contentBounds.update(D,O);var B=n===qt.POLYLINE||n===qt.POLYGON||n===qt.PATH?Math.SQRT2:.5,F=w&&!w.isNone;if(F){var G=((S||0)+(T||0))*B;O[0]+=G,O[1]+=G}if(i.renderBounds.update(D,O),N&&C&&C!=="inner"){var X=i.renderBounds,q=X.min,J=X.max,et=o,dt=et.shadowBlur,_t=et.shadowOffsetX,Dt=et.shadowOffsetY,pt=dt||0,vt=_t||0,Qt=Dt||0,Bt=q[0]-pt+vt,Rt=J[0]+pt+vt,$t=q[1]-pt+Qt,de=J[1]+pt+Qt;q[0]=Math.min(q[0],Bt),J[0]=Math.max(J[0],Rt),q[1]=Math.min(q[1],$t),J[1]=Math.max(J[1],de),i.renderBounds.setMinMax(q,J)}R.forEach(function(De){var An=De.name,jn=De.params;if(An==="blur"){var zr=jn[0].value;i.renderBounds.update(i.renderBounds.center,G1(i.renderBounds.halfExtents,i.renderBounds.halfExtents,[zr,zr,0]))}else if(An==="drop-shadow"){var Vn=jn[0].value,Jr=jn[1].value,Gn=jn[2].value,Ti=i.renderBounds,en=Ti.min,ln=Ti.max,Ai=en[0]-Gn+Vn,Qr=ln[0]+Gn+Vn,ve=en[1]-Gn+Jr,je=ln[1]+Gn+Jr;en[0]=Math.min(en[0],Ai),ln[0]=Math.max(ln[0],Qr),en[1]=Math.min(en[1],ve),ln[1]=Math.max(ln[1],je),i.renderBounds.setMinMax(en,ln)}}),e.geometry.dirty=!1;var ye=p<0,Se=y<0,qe=(ye?-1:1)*(I?cs(I[0],0,e,!0):0),Me=(Se?-1:1)*(I?cs(I[1],1,e,!0):0);(qe||Me)&&e.setOrigin(qe,Me)}},t.prototype.updateSizeAttenuation=function(e,n){e.style.isSizeAttenuation?(e.style.rawLineWidth||(e.style.rawLineWidth=e.style.lineWidth),e.style.lineWidth=(e.style.rawLineWidth||1)/n,e.nodeName===qt.CIRCLE&&(e.style.rawR||(e.style.rawR=e.style.r),e.style.r=(e.style.rawR||1)/n)):(e.style.rawLineWidth&&(e.style.lineWidth=e.style.rawLineWidth,delete e.style.rawLineWidth),e.nodeName===qt.CIRCLE&&e.style.rawR&&(e.style.r=e.style.rawR,delete e.style.rawR))},t.prototype.isPropertyInheritable=function(e){var n=Xf[e];return n?n.inh:!1},t}(),uU=function(){function t(){this.parser=EN,this.parserUnmemoize=PE,this.parserWithCSSDisabled=null,this.mixer=TE}return t.prototype.calculator=function(e,n,r,i){return Ia(r)},t}(),fU=function(){function t(){}return t.prototype.calculator=function(e,n,r,i,o){return r instanceof La&&(r=null),o.sceneGraphService.updateDisplayObjectDependency(e,n,r,i),e==="clipPath"&&i.forEach(function(a){a.childNodes.length===0&&o.sceneGraphService.dirtifyToRoot(a)}),r},t}(),dU=function(){function t(){this.parser=Uh,this.parserWithCSSDisabled=Uh,this.mixer=NH}return t.prototype.calculator=function(e,n,r,i){return r instanceof La?r.value==="none"?Y1:xN:r},t}(),hU=function(){function t(){this.parser=PN}return t.prototype.calculator=function(e,n,r){return r instanceof La?[]:r},t}();function HN(t){var e=t.parsedStyle.fontSize;return Lt(e)?null:e}var DE=function(){function t(){this.parser=Vh,this.parserUnmemoize=T0,this.parserWithCSSDisabled=null,this.mixer=TE}return t.prototype.calculator=function(e,n,r,i,o){var a;if(Je(r))return r;if(dr.isRelativeUnit(r.unit)){var s=o.styleValueRegistry;if(r.unit===Jt.kPercentage)return 0;if(r.unit===Jt.kEms){if(i.parentNode){var c=HN(i.parentNode);if(c)return c*=r.value,c;s.addUnresolveProperty(i,e)}else s.addUnresolveProperty(i,e);return 0}else if(r.unit===Jt.kRems){if(!((a=i==null?void 0:i.ownerDocument)===null||a===void 0)&&a.documentElement){var c=HN(i.ownerDocument.documentElement);if(c)return c*=r.value,c;s.addUnresolveProperty(i,e)}else s.addUnresolveProperty(i,e);return 0}}else return r.value},t}(),pU=function(){function t(){this.mixer=AN}return t.prototype.parser=function(e){var n=MN(Je(e)?[e]:e),r;return n.length===1?r=[n[0],n[0]]:r=[n[0],n[1]],r},t.prototype.calculator=function(e,n,r){return r.map(function(i){return i.value})},t}(),vU=function(){function t(){this.mixer=AN}return t.prototype.parser=function(e){var n=MN(Je(e)?[e]:e),r;return n.length===1?r=[n[0],n[0],n[0],n[0]]:n.length===2?r=[n[0],n[1],n[0],n[1]]:n.length===3?r=[n[0],n[1],n[2],n[1]]:r=[n[0],n[1],n[2],n[3]],r},t.prototype.calculator=function(e,n,r){return r.map(function(i){return i.value})},t}(),gU=function(){function t(){}return t.prototype.calculator=function(e,n,r,i){r instanceof La&&(r=null);var o=r==null?void 0:r.cloneNode(!0);return o&&(o.style.isMarker=!0),o},t}(),yU=function(){function t(){this.mixer=TE,this.parser=Uf,this.parserUnmemoize=Xh,this.parserWithCSSDisabled=null}return t.prototype.calculator=function(e,n,r){return r.value},t}(),mU=function(){function t(){this.parser=Uf,this.parserUnmemoize=Xh,this.parserWithCSSDisabled=null,this.mixer=AE(0,1)}return t.prototype.calculator=function(e,n,r){return r.value},t.prototype.postProcessor=function(e){var n=e.parsedStyle,r=n.offsetPath,i=n.offsetDistance;if(r){var o=r.nodeName;if(o===qt.LINE||o===qt.PATH||o===qt.POLYLINE){var a=r.getPoint(i);a&&e.setLocalPosition(a.x,a.y)}}},t}(),xU=function(){function t(){this.parser=Uf,this.parserUnmemoize=Xh,this.parserWithCSSDisabled=null,this.mixer=AE(0,1)}return t.prototype.calculator=function(e,n,r){return r.value},t}(),bU=function(){function t(){this.parser=kE,this.parserWithCSSDisabled=kE,this.mixer=KH}return t.prototype.calculator=function(e,n,r){return r instanceof La&&r.value==="unset"?{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new zh(0,0,0,0)}:r},t}(),_U=function(){function t(){this.parser=FN,this.mixer=ZH}return t}(),wU=function(t){xt(e,t);function e(){var n=t.apply(this,ut([],j(arguments),!1))||this;return n.mixer=AE(0,1/0),n}return e}(DE),OU=function(){function t(){}return t.prototype.calculator=function(e,n,r,i){return r instanceof La?r.value==="unset"?"":r.value:"".concat(r)},t.prototype.postProcessor=function(e){e.nodeValue="".concat(e.parsedStyle.text)||""},t}(),EU=function(){function t(){}return t.prototype.calculator=function(e,n,r,i){var o=i.getAttribute("text");if(o){var a=o;r.value==="capitalize"?a=o.charAt(0).toUpperCase()+o.slice(1):r.value==="lowercase"?a=o.toLowerCase():r.value==="uppercase"&&(a=o.toUpperCase()),i.parsedStyle.text=a}return r.value},t}(),BE={},SU=0;function MU(t,e){if(t){var n=typeof t=="string"?t:t.id||SU++;BE[n]&&BE[n].destroy(),BE[n]=e}}var FE=typeof window!="undefined"&&typeof window.document!="undefined";function PU(t){return!!t.getAttribute}function TU(t,e){for(var n=0,r=t.length;n<r;){var i=n+r>>>1;UN(t[i],e)<0?n=i+1:r=i}return n}function UN(t,e){var n=Number(t.parsedStyle.zIndex||0),r=Number(e.parsedStyle.zIndex||0);if(n===r){var i=t.parentNode;if(i){var o=i.childNodes||[];return o.indexOf(t)-o.indexOf(e)}}return n-r}function AU(t){var e,n=t;do{var r=(e=n.parsedStyle)===null||e===void 0?void 0:e.clipPath;if(r)return n;n=n.parentElement}while(n!==null);return null}var VN="px";function N0t(t,e,n){FE&&t.style&&(t.style.width=e+VN,t.style.height=n+VN)}function XN(t,e){if(FE)return document.defaultView.getComputedStyle(t,null).getPropertyValue(e)}function CU(t){var e=XN(t,"width");return e==="auto"?t.offsetWidth:parseFloat(e)}function kU(t){var e=XN(t,"height");return e==="auto"?t.offsetHeight:parseFloat(e)}var NU=1,RU={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},jE=typeof performance=="object"&&performance.now?performance:Date;function R0t(t,e,n){t===void 0&&(t="auto");var r=!1,i=!1,o=!!e&&!e.isNone,a=!!n&&!n.isNone;return t==="visiblepainted"||t==="painted"||t==="auto"?(r=o,i=a):t==="visiblefill"||t==="fill"?r=!0:t==="visiblestroke"||t==="stroke"?i=!0:(t==="visible"||t==="all")&&(r=!0,i=!0),[r,i]}var LU=1,IU=function(){return LU++},Vc=typeof self=="object"&&self.self==self?self:typeof gt.g=="object"&&gt.g.global==gt.g?gt.g:{},DU=Date.now(),BU=function(){return Vc.performance&&typeof Vc.performance.now=="function"?Vc.performance.now():Date.now()-DU},A0={},$N=Date.now(),FU=function(t){if(typeof t!="function")throw new TypeError(t+" is not a function");var e=Date.now(),n=e-$N,r=n>16?0:16-n,i=IU();return A0[i]=t,Object.keys(A0).length>1||setTimeout(function(){$N=e;var o=A0;A0={},Object.keys(o).forEach(function(a){return o[a](BU())})},r),i},jU=function(t){delete A0[t]},GU=["","webkit","moz","ms","o"],qN=function(t){return typeof t!="string"?FU:t===""?Vc.requestAnimationFrame:Vc[t+"RequestAnimationFrame"]},zU=function(t){return typeof t!="string"?jU:t===""?Vc.cancelAnimationFrame:Vc[t+"CancelAnimationFrame"]||Vc[t+"CancelRequestAnimationFrame"]},WU=function(t,e){for(var n=0;t[n]!==void 0;){if(e(t[n]))return t[n];n=n+1}},KN=WU(GU,function(t){return!!qN(t)}),GE=qN(KN),ZN=zU(KN);Vc.requestAnimationFrame=GE,Vc.cancelAnimationFrame=ZN;var YU=function(){function t(){this.callbacks=[]}return t.prototype.getCallbacksNum=function(){return this.callbacks.length},t.prototype.tapPromise=function(e,n){this.callbacks.push(n)},t.prototype.promise=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return Promise.all(this.callbacks.map(function(r){return r.apply(void 0,ut([],j(e),!1))}))},t}(),HU=function(){function t(){this.callbacks=[]}return t.prototype.tapPromise=function(e,n){this.callbacks.push(n)},t.prototype.promise=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return ti(this,void 0,void 0,function(){var r,i,o,a;return Fi(this,function(s){switch(s.label){case 0:return this.callbacks.length?[4,(a=this.callbacks)[0].apply(a,ut([],j(e),!1))]:[3,6];case 1:r=s.sent(),i=0,s.label=2;case 2:return i<this.callbacks.length-1?(o=this.callbacks[i],[4,o(r)]):[3,5];case 3:r=s.sent(),s.label=4;case 4:return i++,[3,2];case 5:return[2,r];case 6:return[2,null]}})})},t}(),fa=function(){function t(){this.callbacks=[]}return t.prototype.tap=function(e,n){this.callbacks.push(n)},t.prototype.call=function(){var e=arguments;this.callbacks.forEach(function(n){n.apply(void 0,e)})},t}(),zE=function(){function t(){this.callbacks=[]}return t.prototype.tap=function(e,n){this.callbacks.push(n)},t.prototype.call=function(){if(this.callbacks.length){for(var e=arguments,n=this.callbacks[0].apply(void 0,e),r=0;r<this.callbacks.length-1;r++){var i=this.callbacks[r];n=i(n)}return n}return null},t}(),UU=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],VU=/([\"\'])[^\'\"]+\1/;function XU(t){for(var e=t.fontSize,n=e===void 0?16:e,r=t.fontFamily,i=r===void 0?"sans-serif":r,o=t.fontStyle,a=o===void 0?"normal":o,s=t.fontVariant,c=s===void 0?"normal":s,l=t.fontWeight,u=l===void 0?"normal":l,f=Je(n)&&"".concat(n,"px")||"16px",d=i.split(","),h=d.length-1;h>=0;h--){var p=d[h].trim();!VU.test(p)&&UU.indexOf(p)<0&&(p='"'.concat(p,'"')),d[h]=p}return"".concat(a," ").concat(c," ").concat(u," ").concat(f," ").concat(d.join(","))}function WE(t,e,n){return po(t),t[4]=Math.tan(e),t[1]=Math.tan(n),t}var C0=1e-5,$U=ue(),Si=ue();function qU(t,e){if(t.length){var n=po($U);t.forEach(function(r){var i=r.t,o=r.d;if(i==="scale"){var a=(o==null?void 0:o.map(function(m){return Math.max(m.value,C0)}))||[1,1];ji(Si,[a[0],a[1],1])}else if(i==="scalex"){var a=(o==null?void 0:o.map(function(b){return Math.max(b.value,C0)}))||[1];ji(Si,[a[0],1,1])}else if(i==="scaley"){var a=(o==null?void 0:o.map(function(b){return Math.max(b.value,C0)}))||[1];ji(Si,[1,a[0],1])}else if(i==="scalez"){var a=(o==null?void 0:o.map(function(b){return Math.max(b.value,C0)}))||[1];ji(Si,[1,1,a[0]])}else if(i==="scale3d"){var a=(o==null?void 0:o.map(function(b){return Math.max(b.value,C0)}))||[1,1,1];ji(Si,[a[0],a[1],a[2]])}else if(i==="translate"){var s=o||[vi,vi];wi(Si,[s[0].value,s[1].value,0])}else if(i==="translatex"){var s=o||[vi];wi(Si,[s[0].value,0,0])}else if(i==="translatey"){var s=o||[vi];wi(Si,[0,s[0].value,0])}else if(i==="translatez"){var s=o||[vi];wi(Si,[0,0,s[0].value])}else if(i==="translate3d"){var s=o||[vi,vi,vi];wi(Si,[s[0].value,s[1].value,s[2].value])}else if(i==="rotate"){var c=o||[Ps];bc(Si,Ar(Ia(c[0])))}else if(i==="rotatex"){var c=o||[Ps];Nd(Si,Ar(Ia(c[0])))}else if(i==="rotatey"){var c=o||[Ps];Rd(Si,Ar(Ia(c[0])))}else if(i==="rotatez"){var c=o||[Ps];bc(Si,Ar(Ia(c[0])))}else if(i==="rotate3d"){var c=o||[vi,vi,vi,Ps];kd(Si,Ar(Ia(c[3])),[c[0].value,c[1].value,c[2].value])}else if(i==="skew"){var l=(o==null?void 0:o.map(function(m){return m.value}))||[0,0];WE(Si,Ar(l[0]),Ar(l[1]))}else if(i==="skewx"){var l=(o==null?void 0:o.map(function(b){return b.value}))||[0];WE(Si,Ar(l[0]),0)}else if(i==="skewy"){var l=(o==null?void 0:o.map(function(b){return b.value}))||[0];WE(Si,0,Ar(l[0]))}else if(i==="matrix"){var u=j(o.map(function(m){return m.value}),6),f=u[0],d=u[1],h=u[2],p=u[3],v=u[4],y=u[5];gl(Si,f,d,0,0,h,p,0,0,0,0,1,0,v,y,0,1)}else i==="matrix3d"&&gl.apply(_e,ut([Si],j(o.map(function(m){return m.value})),!1));Bd(n,n,Si)}),e.setLocalTransform(n)}else e.resetLocalTransform();return e.getLocalTransform()}var KU=function(){function t(){this.parser=jN,this.parserUnmemoize=GN,this.parserWithCSSDisabled=GN,this.mixer=aU}return t.prototype.calculator=function(e,n,r,i){return r instanceof La?[]:r},t.prototype.postProcessor=function(e){var n=e.parsedStyle.transform;qU(n,e)},t}(),ZU=function(){function t(){this.parser=WN,this.parserUnmemoize=sU}return t.prototype.postProcessor=function(e){var n=e.parsedStyle.transformOrigin;n[0].unit===Jt.kPixels&&n[1].unit===Jt.kPixels?e.setOrigin(n[0].value,n[1].value):e.getGeometryBounds()},t}(),JU=function(){function t(){this.parser=Uf,this.parserUnmemoize=Xh}return t.prototype.calculator=function(e,n,r,i){return r.value},t.prototype.postProcessor=function(e){if(e.parentNode){var n=e.parentNode,r=n.renderable,i=n.sortable;r&&(r.dirty=!0),i&&(i.dirty=!0,i.dirtyReason=Hh.Z_INDEX_CHANGED)}},t}(),QU=function(){function t(){}return t.prototype.update=function(e,n){var r=e.cx,i=r===void 0?0:r,o=e.cy,a=o===void 0?0:o,s=e.r,c=s===void 0?0:s;return{cx:i,cy:a,hwidth:c,hheight:c}},t}(),tV=function(){function t(){}return t.prototype.update=function(e,n){var r=e.cx,i=r===void 0?0:r,o=e.cy,a=o===void 0?0:o,s=e.rx,c=s===void 0?0:s,l=e.ry,u=l===void 0?0:l;return{cx:i,cy:a,hwidth:c,hheight:u}},t}(),eV=function(){function t(){}return t.prototype.update=function(e){var n=e.x1,r=e.y1,i=e.x2,o=e.y2,a=Math.min(n,i),s=Math.max(n,i),c=Math.min(r,o),l=Math.max(r,o),u=s-a,f=l-c,d=u/2,h=f/2;return{cx:a+d,cy:c+h,hwidth:d,hheight:h}},t}(),nV=function(){function t(){}return t.prototype.update=function(e){var n=e.d,r=n.rect,i=r.x,o=r.y,a=r.width,s=r.height,c=a/2,l=s/2;return{cx:i+c,cy:o+l,hwidth:c,hheight:l}},t}(),rV=function(){function t(){}return t.prototype.update=function(e){if(e.points&&ri(e.points.points)){var n=e.points.points,r=Math.min.apply(Math,ut([],j(n.map(function(f){return f[0]})),!1)),i=Math.max.apply(Math,ut([],j(n.map(function(f){return f[0]})),!1)),o=Math.min.apply(Math,ut([],j(n.map(function(f){return f[1]})),!1)),a=Math.max.apply(Math,ut([],j(n.map(function(f){return f[1]})),!1)),s=i-r,c=a-o,l=s/2,u=c/2;return{cx:r+l,cy:o+u,hwidth:l,hheight:u}}return{cx:0,cy:0,hwidth:0,hheight:0}},t}(),iV=function(){function t(){}return t.prototype.update=function(e,n){var r=e.x,i=r===void 0?0:r,o=e.y,a=o===void 0?0:o,s=e.src,c=e.width,l=c===void 0?0:c,u=e.height,f=u===void 0?0:u,d=l,h=f;return s&&!Qe(s)&&(d||(d=s.width,e.width=d),h||(h=s.height,e.height=h)),{cx:i+d/2,cy:a+h/2,hwidth:d/2,hheight:h/2}},t}(),oV=function(){function t(e){this.globalRuntime=e}return t.prototype.isReadyToMeasure=function(e,n){var r=e.text,i=e.textAlign,o=e.textBaseline,a=e.fontSize,s=e.fontStyle,c=e.fontWeight,l=e.fontVariant,u=e.lineWidth;return St.enableCSSParsing?r&&a&&s&&c&&l&&i&&o&&!Lt(u):r},t.prototype.update=function(e,n){var r,i,o=e.text,a=e.textAlign,s=a===void 0?"start":a,c=e.lineWidth,l=c===void 0?1:c,u=e.textBaseline,f=u===void 0?"alphabetic":u,d=e.dx,h=d===void 0?0:d,p=e.dy,v=p===void 0?0:p,y=e.x,m=y===void 0?0:y,b=e.y,O=b===void 0?0:b;if(!this.isReadyToMeasure(e,n))return e.metrics={font:"",width:0,height:0,lines:[],lineWidths:[],lineHeight:0,maxLineWidth:0,fontProperties:{ascent:0,descent:0,fontSize:0},lineMetrics:[]},{hwidth:0,hheight:0,cx:0,cy:0};var E=(((i=(r=n==null?void 0:n.ownerDocument)===null||r===void 0?void 0:r.defaultView)===null||i===void 0?void 0:i.getConfig())||{}).offscreenCanvas,w=this.globalRuntime.textService.measureText(o,e,E);e.metrics=w;var _=w.width,S=w.height,M=w.lineHeight,T=w.fontProperties,A=_/2,C=S/2,N=m+A;s==="center"||s==="middle"?N+=l/2-A:(s==="right"||s==="end")&&(N+=l-A*2);var k=O-C;return f==="middle"?k+=C:f==="top"||f==="hanging"?k+=C*2:f==="alphabetic"?k+=this.globalRuntime.enableCSSParsing?M-T.ascent:0:(f==="bottom"||f==="ideographic")&&(k+=0),h&&(N+=h),v&&(k+=v),{cx:N,cy:k,hwidth:A,hheight:C}},t}(),aV=function(){function t(){}return t.prototype.update=function(e,n){return{cx:0,cy:0,hwidth:0,hheight:0}},t}(),sV=function(){function t(){}return t.prototype.update=function(e,n){var r=e.x,i=r===void 0?0:r,o=e.y,a=o===void 0?0:o,s=e.width,c=s===void 0?0:s,l=e.height,u=l===void 0?0:l;return{cx:i+c/2,cy:a+u/2,hwidth:c/2,hheight:u/2}},t}();function cV(t){return!!t.type}var YE=function(){function t(e){this.eventPhase=t.prototype.NONE,this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.defaultPrevented=!1,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Vo,this.page=new Vo,this.canvas=new Vo,this.viewport=new Vo,this.composed=!1,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"layerX",{get:function(){return this.layer.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"layerY",{get:function(){return this.layer.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageX",{get:function(){return this.page.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageY",{get:function(){return this.page.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this.canvas.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.canvas.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasX",{get:function(){return this.canvas.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasY",{get:function(){return this.canvas.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"viewportX",{get:function(){return this.viewport.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"viewportY",{get:function(){return this.viewport.y},enumerable:!1,configurable:!0}),t.prototype.composedPath=function(){return this.manager&&(!this.path||this.path[0]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path},Object.defineProperty(t.prototype,"propagationPath",{get:function(){return this.composedPath()},enumerable:!1,configurable:!0}),t.prototype.preventDefault=function(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0},t.prototype.stopImmediatePropagation=function(){this.propagationImmediatelyStopped=!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t.prototype.initEvent=function(){},t.prototype.initUIEvent=function(){},t.prototype.clone=function(){throw new Error($r)},t}(),JN=function(t){xt(e,t);function e(){var n=t.apply(this,ut([],j(arguments),!1))||this;return n.client=new Vo,n.movement=new Vo,n.offset=new Vo,n.global=new Vo,n.screen=new Vo,n}return Object.defineProperty(e.prototype,"clientX",{get:function(){return this.client.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clientY",{get:function(){return this.client.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"movementX",{get:function(){return this.movement.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"movementY",{get:function(){return this.movement.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offsetX",{get:function(){return this.offset.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offsetY",{get:function(){return this.offset.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"globalX",{get:function(){return this.global.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"globalY",{get:function(){return this.global.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"screenX",{get:function(){return this.screen.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"screenY",{get:function(){return this.screen.y},enumerable:!1,configurable:!0}),e.prototype.getModifierState=function(n){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(n)},e.prototype.initMouseEvent=function(){throw new Error($r)},e}(YE),HE=function(t){xt(e,t);function e(){var n=t.apply(this,ut([],j(arguments),!1))||this;return n.width=0,n.height=0,n.isPrimary=!1,n}return e.prototype.getCoalescedEvents=function(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]},e.prototype.getPredictedEvents=function(){throw new Error("getPredictedEvents is not supported!")},e.prototype.clone=function(){return this.manager.clonePointerEvent(this)},e}(JN),UE=function(t){xt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.clone=function(){return this.manager.cloneWheelEvent(this)},e}(JN),Xo=function(t){xt(e,t);function e(n,r){var i=t.call(this,null)||this;return i.type=n,i.detail=r,Object.assign(i,r),i}return e}(YE),QN=":",tR=function(){function t(){this.emitter=new Xa}return t.prototype.on=function(e,n,r){return this.addEventListener(e,n,r),this},t.prototype.addEventListener=function(e,n,r){var i=Ks(r)&&r||Yi(r)&&r.capture,o=Yi(r)&&r.once,a=Yh(n)?void 0:n,s=!1,c="";if(e.indexOf(QN)>-1){var l=j(e.split(QN),2),u=l[0],f=l[1];e=f,c=u,s=!0}if(e=i?"".concat(e,"capture"):e,n=Yh(n)?n:n.handleEvent,s){var d=n;n=function(){for(var h,p=[],v=0;v<arguments.length;v++)p[v]=arguments[v];((h=p[0].target)===null||h===void 0?void 0:h.name)===c&&d.apply(void 0,ut([],j(p),!1))}}return o?this.emitter.once(e,n,a):this.emitter.on(e,n,a),this},t.prototype.off=function(e,n,r){return e?this.removeEventListener(e,n,r):this.removeAllEventListeners(),this},t.prototype.removeAllEventListeners=function(){this.emitter.removeAllListeners()},t.prototype.removeEventListener=function(e,n,r){var i=Ks(r)&&r||Yi(r)&&r.capture,o=Yh(n)?void 0:n;return e=i?"".concat(e,"capture"):e,n=Yh(n)?n:n==null?void 0:n.handleEvent,this.emitter.off(e,n,o),this},t.prototype.emit=function(e,n){this.dispatchEvent(new Xo(e,n))},t.prototype.dispatchEvent=function(e,n){var r,i;if(n===void 0&&(n=!1),!cV(e))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");var o;if(this.document?o=this:this.defaultView?o=this.defaultView:o=(r=this.ownerDocument)===null||r===void 0?void 0:r.defaultView,o){if(e.manager=o.getEventService()||null,!e.manager)return!1;e.defaultPrevented=!1,e.path=[],n||(e.target=this),(i=e.manager)===null||i===void 0||i.dispatchEvent(e,e.type,n)}return!e.defaultPrevented},t}(),io=function(t){xt(e,t);function e(){var n=t.call(this)||this;return n.shadow=!1,n.ownerDocument=null,n.isConnected=!1,n.baseURI="",n.childNodes=[],n.nodeType=0,n.nodeName="",n.nodeValue=null,n.parentNode=null,n}return e.isNode=function(n){return!!n.childNodes},Object.defineProperty(e.prototype,"textContent",{get:function(){var n,r,i="";this.nodeName===qt.TEXT&&(i+=this.style.text);try{for(var o=On(this.childNodes),a=o.next();!a.done;a=o.next()){var s=a.value;s.nodeName===qt.TEXT?i+=s.nodeValue:i+=s.textContent}}catch(c){n={error:c}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i},set:function(n){var r=this;this.childNodes.slice().forEach(function(i){r.removeChild(i)}),this.nodeName===qt.TEXT&&(this.style.text="".concat(n))},enumerable:!1,configurable:!0}),e.prototype.getRootNode=function(n){return n===void 0&&(n={}),this.parentNode?this.parentNode.getRootNode(n):n.composed&&this.host?this.host.getRootNode(n):this},e.prototype.hasChildNodes=function(){return this.childNodes.length>0},e.prototype.isDefaultNamespace=function(n){throw new Error($r)},e.prototype.lookupNamespaceURI=function(n){throw new Error($r)},e.prototype.lookupPrefix=function(n){throw new Error($r)},e.prototype.normalize=function(){throw new Error($r)},e.prototype.isEqualNode=function(n){return this===n},e.prototype.isSameNode=function(n){return this.isEqualNode(n)},Object.defineProperty(e.prototype,"parent",{get:function(){return this.parentNode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parentElement",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"firstChild",{get:function(){return this.childNodes.length>0?this.childNodes[0]:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastChild",{get:function(){return this.childNodes.length>0?this.childNodes[this.childNodes.length-1]:null},enumerable:!1,configurable:!0}),e.prototype.compareDocumentPosition=function(n){var r;if(n===this)return 0;for(var i=n,o=this,a=[i],s=[o];(r=i.parentNode)!==null&&r!==void 0?r:o.parentNode;)i=i.parentNode?(a.push(i.parentNode),i.parentNode):i,o=o.parentNode?(s.push(o.parentNode),o.parentNode):o;if(i!==o)return e.DOCUMENT_POSITION_DISCONNECTED|e.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC|e.DOCUMENT_POSITION_PRECEDING;var c=a.length>s.length?a:s,l=c===a?s:a;if(c[c.length-l.length]===l[0])return c===a?e.DOCUMENT_POSITION_CONTAINED_BY|e.DOCUMENT_POSITION_FOLLOWING:e.DOCUMENT_POSITION_CONTAINS|e.DOCUMENT_POSITION_PRECEDING;for(var u=c.length-l.length,f=l.length-1;f>=0;f--){var d=l[f],h=c[u+f];if(h!==d){var p=d.parentNode.childNodes;return p.indexOf(d)<p.indexOf(h)?l===a?e.DOCUMENT_POSITION_PRECEDING:e.DOCUMENT_POSITION_FOLLOWING:c===a?e.DOCUMENT_POSITION_PRECEDING:e.DOCUMENT_POSITION_FOLLOWING}}return e.DOCUMENT_POSITION_FOLLOWING},e.prototype.contain=function(n){return this.contains(n)},e.prototype.contains=function(n){for(var r=n;r&&this!==r;)r=r.parentNode;return!!r},e.prototype.getAncestor=function(n){for(var r=this;n>0&&r;)r=r.parentNode,n--;return r},e.prototype.forEach=function(n,r){r===void 0&&(r=!1),n(this)||(r?this.childNodes.slice():this.childNodes).forEach(function(i){i.forEach(n)})},e.DOCUMENT_POSITION_DISCONNECTED=1,e.DOCUMENT_POSITION_PRECEDING=2,e.DOCUMENT_POSITION_FOLLOWING=4,e.DOCUMENT_POSITION_CONTAINS=8,e.DOCUMENT_POSITION_CONTAINED_BY=16,e.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC=32,e}(tR),lV=2048,uV=function(){function t(e,n){var r=this;this.globalRuntime=e,this.context=n,this.emitter=new Xa,this.nativeHTMLMap=new WeakMap,this.cursor="default",this.mappingTable={},this.mappingState={trackingData:{}},this.eventPool=new Map,this.tmpMatrix=ue(),this.tmpVec3=Gt(),this.onPointerDown=function(i){var o=r.createPointerEvent(i);if(r.dispatchEvent(o,"pointerdown"),o.pointerType==="touch")r.dispatchEvent(o,"touchstart");else if(o.pointerType==="mouse"||o.pointerType==="pen"){var a=o.button===2;r.dispatchEvent(o,a?"rightdown":"mousedown")}var s=r.trackingData(i.pointerId);s.pressTargetsByButton[i.button]=o.composedPath(),r.freeEvent(o)},this.onPointerUp=function(i){var o,a=jE.now(),s=r.createPointerEvent(i,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0);if(r.dispatchEvent(s,"pointerup"),s.pointerType==="touch")r.dispatchEvent(s,"touchend");else if(s.pointerType==="mouse"||s.pointerType==="pen"){var c=s.button===2;r.dispatchEvent(s,c?"rightup":"mouseup")}var l=r.trackingData(i.pointerId),u=r.findMountedTarget(l.pressTargetsByButton[i.button]),f=u;if(u&&!s.composedPath().includes(u)){for(var d=u;d&&!s.composedPath().includes(d);){if(s.currentTarget=d,r.notifyTarget(s,"pointerupoutside"),s.pointerType==="touch")r.notifyTarget(s,"touchendoutside");else if(s.pointerType==="mouse"||s.pointerType==="pen"){var c=s.button===2;r.notifyTarget(s,c?"rightupoutside":"mouseupoutside")}io.isNode(d)&&(d=d.parentNode)}delete l.pressTargetsByButton[i.button],f=d}if(f){var h=r.clonePointerEvent(s,"click");h.target=f,h.path=[],l.clicksByButton[i.button]||(l.clicksByButton[i.button]={clickCount:0,target:h.target,timeStamp:a});var p=r.context.renderingContext.root.ownerDocument.defaultView,v=l.clicksByButton[i.button];v.target===h.target&&a-v.timeStamp<p.dblClickSpeed?++v.clickCount:v.clickCount=1,v.target=h.target,v.timeStamp=a,h.detail=v.clickCount,!((o=s.detail)===null||o===void 0)&&o.preventClick||(!r.context.config.useNativeClickEvent&&(h.pointerType==="mouse"||h.pointerType==="touch")&&r.dispatchEvent(h,"click"),r.dispatchEvent(h,"pointertap")),r.freeEvent(h)}r.freeEvent(s)},this.onPointerMove=function(i){var o=r.createPointerEvent(i,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0),a=o.pointerType==="mouse"||o.pointerType==="pen",s=r.trackingData(i.pointerId),c=r.findMountedTarget(s.overTargets);if(s.overTargets&&c!==o.target){var l=i.type==="mousemove"?"mouseout":"pointerout",u=r.createPointerEvent(i,l,c||void 0);if(r.dispatchEvent(u,"pointerout"),a&&r.dispatchEvent(u,"mouseout"),!o.composedPath().includes(c)){var f=r.createPointerEvent(i,"pointerleave",c||void 0);for(f.eventPhase=f.AT_TARGET;f.target&&!o.composedPath().includes(f.target);)f.currentTarget=f.target,r.notifyTarget(f),a&&r.notifyTarget(f,"mouseleave"),io.isNode(f.target)&&(f.target=f.target.parentNode);r.freeEvent(f)}r.freeEvent(u)}if(c!==o.target){var d=i.type==="mousemove"?"mouseover":"pointerover",h=r.clonePointerEvent(o,d);r.dispatchEvent(h,"pointerover"),a&&r.dispatchEvent(h,"mouseover");for(var p=c&&io.isNode(c)&&c.parentNode;p&&p!==(io.isNode(r.rootTarget)&&r.rootTarget.parentNode)&&p!==o.target;)p=p.parentNode;var v=!p||p===(io.isNode(r.rootTarget)&&r.rootTarget.parentNode);if(v){var y=r.clonePointerEvent(o,"pointerenter");for(y.eventPhase=y.AT_TARGET;y.target&&y.target!==c&&y.target!==(io.isNode(r.rootTarget)&&r.rootTarget.parentNode);)y.currentTarget=y.target,r.notifyTarget(y),a&&r.notifyTarget(y,"mouseenter"),io.isNode(y.target)&&(y.target=y.target.parentNode);r.freeEvent(y)}r.freeEvent(h)}r.dispatchEvent(o,"pointermove"),o.pointerType==="touch"&&r.dispatchEvent(o,"touchmove"),a&&(r.dispatchEvent(o,"mousemove"),r.cursor=r.getCursor(o.target)),s.overTargets=o.composedPath(),r.freeEvent(o)},this.onPointerOut=function(i){var o=r.trackingData(i.pointerId);if(o.overTargets){var a=i.pointerType==="mouse"||i.pointerType==="pen",s=r.findMountedTarget(o.overTargets),c=r.createPointerEvent(i,"pointerout",s||void 0);r.dispatchEvent(c),a&&r.dispatchEvent(c,"mouseout");var l=r.createPointerEvent(i,"pointerleave",s||void 0);for(l.eventPhase=l.AT_TARGET;l.target&&l.target!==(io.isNode(r.rootTarget)&&r.rootTarget.parentNode);)l.currentTarget=l.target,r.notifyTarget(l),a&&r.notifyTarget(l,"mouseleave"),io.isNode(l.target)&&(l.target=l.target.parentNode);o.overTargets=null,r.freeEvent(c),r.freeEvent(l)}r.cursor=null},this.onPointerOver=function(i){var o=r.trackingData(i.pointerId),a=r.createPointerEvent(i),s=a.pointerType==="mouse"||a.pointerType==="pen";r.dispatchEvent(a,"pointerover"),s&&r.dispatchEvent(a,"mouseover"),a.pointerType==="mouse"&&(r.cursor=r.getCursor(a.target));var c=r.clonePointerEvent(a,"pointerenter");for(c.eventPhase=c.AT_TARGET;c.target&&c.target!==(io.isNode(r.rootTarget)&&r.rootTarget.parentNode);)c.currentTarget=c.target,r.notifyTarget(c),s&&r.notifyTarget(c,"mouseenter"),io.isNode(c.target)&&(c.target=c.target.parentNode);o.overTargets=a.composedPath(),r.freeEvent(a),r.freeEvent(c)},this.onPointerUpOutside=function(i){var o=r.trackingData(i.pointerId),a=r.findMountedTarget(o.pressTargetsByButton[i.button]),s=r.createPointerEvent(i);if(a){for(var c=a;c;)s.currentTarget=c,r.notifyTarget(s,"pointerupoutside"),s.pointerType==="touch"||(s.pointerType==="mouse"||s.pointerType==="pen")&&r.notifyTarget(s,s.button===2?"rightupoutside":"mouseupoutside"),io.isNode(c)&&(c=c.parentNode);delete o.pressTargetsByButton[i.button]}r.freeEvent(s)},this.onWheel=function(i){var o=r.createWheelEvent(i);r.dispatchEvent(o),r.freeEvent(o)},this.onClick=function(i){if(r.context.config.useNativeClickEvent){var o=r.createPointerEvent(i);r.dispatchEvent(o),r.freeEvent(o)}},this.onPointerCancel=function(i){var o=r.createPointerEvent(i,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0);r.dispatchEvent(o),r.freeEvent(o)}}return t.prototype.init=function(){this.rootTarget=this.context.renderingContext.root.parentNode,this.addEventMapping("pointerdown",this.onPointerDown),this.addEventMapping("pointerup",this.onPointerUp),this.addEventMapping("pointermove",this.onPointerMove),this.addEventMapping("pointerout",this.onPointerOut),this.addEventMapping("pointerleave",this.onPointerOut),this.addEventMapping("pointercancel",this.onPointerCancel),this.addEventMapping("pointerover",this.onPointerOver),this.addEventMapping("pointerupoutside",this.onPointerUpOutside),this.addEventMapping("wheel",this.onWheel),this.addEventMapping("click",this.onClick)},t.prototype.destroy=function(){this.emitter.removeAllListeners(),this.mappingTable={},this.mappingState={},this.eventPool.clear()},t.prototype.getScale=function(){var e=this.context.contextService.getBoundingClientRect(),n=1,r=1,i=this.context.contextService.getDomElement();if(i&&e){var o=i.offsetWidth,a=i.offsetHeight;o&&a&&(n=e.width/o,r=e.height/a)}return{scaleX:n,scaleY:r,bbox:e}},t.prototype.client2Viewport=function(e){var n=this.getScale(),r=n.scaleX,i=n.scaleY,o=n.bbox;return new Vo((e.x-((o==null?void 0:o.left)||0))/r,(e.y-((o==null?void 0:o.top)||0))/i)},t.prototype.viewport2Client=function(e){var n=this.getScale(),r=n.scaleX,i=n.scaleY,o=n.bbox;return new Vo((e.x+((o==null?void 0:o.left)||0))*r,(e.y+((o==null?void 0:o.top)||0))*i)},t.prototype.viewport2Canvas=function(e){var n=e.x,r=e.y,i=this.rootTarget.defaultView,o=i.getCamera(),a=this.context.config,s=a.width,c=a.height,l=o.getPerspectiveInverse(),u=o.getWorldTransform(),f=Pn(this.tmpMatrix,u,l),d=Dn(this.tmpVec3,n/s*2-1,(1-r/c)*2-1,0);return Ft(d,d,f),new Vo(d[0],d[1])},t.prototype.canvas2Viewport=function(e){var n=this.rootTarget.defaultView,r=n.getCamera(),i=r.getPerspective(),o=r.getViewTransform(),a=Pn(this.tmpMatrix,i,o),s=Dn(this.tmpVec3,e.x,e.y,0);Ft(this.tmpVec3,this.tmpVec3,a);var c=this.context.config,l=c.width,u=c.height;return new Vo((s[0]+1)/2*l,(1-(s[1]+1)/2)*u)},t.prototype.setPickHandler=function(e){this.pickHandler=e},t.prototype.addEventMapping=function(e,n){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:n,priority:0}),this.mappingTable[e].sort(function(r,i){return r.priority-i.priority})},t.prototype.mapEvent=function(e){if(this.rootTarget){var n=this.mappingTable[e.type];if(n)for(var r=0,i=n.length;r<i;r++)n[r].fn(e);else console.warn("[EventService]: Event mapping not defined for ".concat(e.type))}},t.prototype.dispatchEvent=function(e,n,r){if(!r)e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,n);else{e.eventPhase=e.AT_TARGET;var i=this.rootTarget.defaultView||null;e.currentTarget=i,this.notifyListeners(e,n)}this.emitter.emit(n||e.type,e)},t.prototype.propagate=function(e,n){if(e.target){var r=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(var i=r.length-1;i>=1;i--)if(e.currentTarget=r[i],this.notifyTarget(e,n),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,n),!(e.propagationStopped||e.propagationImmediatelyStopped)){var o=r.indexOf(e.currentTarget);e.eventPhase=e.BUBBLING_PHASE;for(var i=o+1;i<r.length;i++)if(e.currentTarget=r[i],this.notifyTarget(e,n),e.propagationStopped||e.propagationImmediatelyStopped)return}}},t.prototype.propagationPath=function(e){var n=[e],r=this.rootTarget.defaultView||null;if(r&&r===e)return n.unshift(r.document),n;for(var i=0;i<lV&&e!==this.rootTarget;i++)io.isNode(e)&&e.parentNode&&(n.push(e.parentNode),e=e.parentNode);return r&&n.push(r),n},t.prototype.hitTest=function(e){var n=e.viewportX,r=e.viewportY,i=this.context.config,o=i.width,a=i.height,s=i.disableHitTesting;return n<0||r<0||n>o||r>a?null:!s&&this.pickHandler(e)||this.rootTarget||null},t.prototype.isNativeEventFromCanvas=function(e,n){var r=n==null?void 0:n.target;if(r!=null&&r.shadowRoot&&(r=n.composedPath()[0]),r){if(r===e)return!0;if(e&&e.contains)return e.contains(r)}return n!=null&&n.composedPath?n.composedPath().indexOf(e)>-1:!1},t.prototype.getExistedHTML=function(e){var n,r;if(e.nativeEvent.composedPath)try{for(var i=On(e.nativeEvent.composedPath()),o=i.next();!o.done;o=i.next()){var a=o.value,s=this.nativeHTMLMap.get(a);if(s)return s}}catch(c){n={error:c}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return null},t.prototype.pickTarget=function(e){return this.hitTest({clientX:e.clientX,clientY:e.clientY,viewportX:e.viewportX,viewportY:e.viewportY,x:e.canvasX,y:e.canvasY})},t.prototype.createPointerEvent=function(e,n,r,i){var o=this.allocateEvent(HE);this.copyPointerData(e,o),this.copyMouseData(e,o),this.copyData(e,o),o.nativeEvent=e.nativeEvent,o.originalEvent=e;var a=this.getExistedHTML(o),s=this.context.contextService.getDomElement();return o.target=r!=null?r:a||this.isNativeEventFromCanvas(s,o.nativeEvent)&&this.pickTarget(o)||i,typeof n=="string"&&(o.type=n),o},t.prototype.createWheelEvent=function(e){var n=this.allocateEvent(UE);this.copyWheelData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.nativeEvent=e.nativeEvent,n.originalEvent=e;var r=this.getExistedHTML(n),i=this.context.contextService.getDomElement();return n.target=r||this.isNativeEventFromCanvas(i,n.nativeEvent)&&this.pickTarget(n),n},t.prototype.trackingData=function(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]},t.prototype.cloneWheelEvent=function(e){var n=this.allocateEvent(UE);return n.nativeEvent=e.nativeEvent,n.originalEvent=e.originalEvent,this.copyWheelData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.target=e.target,n.path=e.composedPath().slice(),n.type=e.type,n},t.prototype.clonePointerEvent=function(e,n){var r=this.allocateEvent(HE);return r.nativeEvent=e.nativeEvent,r.originalEvent=e.originalEvent,this.copyPointerData(e,r),this.copyMouseData(e,r),this.copyData(e,r),r.target=e.target,r.path=e.composedPath().slice(),r.type=n!=null?n:r.type,r},t.prototype.copyPointerData=function(e,n){n.pointerId=e.pointerId,n.width=e.width,n.height=e.height,n.isPrimary=e.isPrimary,n.pointerType=e.pointerType,n.pressure=e.pressure,n.tangentialPressure=e.tangentialPressure,n.tiltX=e.tiltX,n.tiltY=e.tiltY,n.twist=e.twist},t.prototype.copyMouseData=function(e,n){n.altKey=e.altKey,n.button=e.button,n.buttons=e.buttons,n.ctrlKey=e.ctrlKey,n.metaKey=e.metaKey,n.shiftKey=e.shiftKey,n.client.copyFrom(e.client),n.movement.copyFrom(e.movement),n.canvas.copyFrom(e.canvas),n.screen.copyFrom(e.screen),n.global.copyFrom(e.global),n.offset.copyFrom(e.offset)},t.prototype.copyWheelData=function(e,n){n.deltaMode=e.deltaMode,n.deltaX=e.deltaX,n.deltaY=e.deltaY,n.deltaZ=e.deltaZ},t.prototype.copyData=function(e,n){n.isTrusted=e.isTrusted,n.timeStamp=jE.now(),n.type=e.type,n.detail=e.detail,n.view=e.view,n.page.copyFrom(e.page),n.viewport.copyFrom(e.viewport)},t.prototype.allocateEvent=function(e){this.eventPool.has(e)||this.eventPool.set(e,[]);var n=this.eventPool.get(e).pop()||new e(this);return n.eventPhase=n.NONE,n.currentTarget=null,n.path=[],n.target=null,n},t.prototype.freeEvent=function(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");var n=e.constructor;this.eventPool.has(n)||this.eventPool.set(n,[]),this.eventPool.get(n).push(e)},t.prototype.notifyTarget=function(e,n){n=n!=null?n:e.type;var r=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?"".concat(n,"capture"):n;this.notifyListeners(e,r),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,n)},t.prototype.notifyListeners=function(e,n){var r=e.currentTarget.emitter,i=r._events[n];if(i)if("fn"in i)i.once&&r.removeListener(n,i.fn,void 0,!0),i.fn.call(e.currentTarget||i.context,e);else for(var o=0;o<i.length&&!e.propagationImmediatelyStopped;o++)i[o].once&&r.removeListener(n,i[o].fn,void 0,!0),i[o].fn.call(e.currentTarget||i[o].context,e)},t.prototype.findMountedTarget=function(e){if(!e)return null;for(var n=e[e.length-1],r=e.length-2;r>=0;r--){var i=e[r];if(i===this.rootTarget||io.isNode(i)&&i.parentNode===n)n=e[r];else break}return n},t.prototype.getCursor=function(e){for(var n=e;n;){var r=PU(n)&&n.getAttribute("cursor");if(r)return r;n=io.isNode(n)&&n.parentNode}},t}(),fV=function(){function t(){}return t.prototype.getOrCreateCanvas=function(e,n){if(this.canvas)return this.canvas;if(e||St.offscreenCanvas)this.canvas=e||St.offscreenCanvas,this.context=this.canvas.getContext("2d",nt({willReadFrequently:!0},n));else try{this.canvas=new window.OffscreenCanvas(0,0),this.context=this.canvas.getContext("2d",nt({willReadFrequently:!0},n)),(!this.context||!this.context.measureText)&&(this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"))}catch(r){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d",nt({willReadFrequently:!0},n))}return this.canvas.width=10,this.canvas.height=10,this.canvas},t.prototype.getOrCreateContext=function(e,n){return this.context?this.context:(this.getOrCreateCanvas(e,n),this.context)},t}(),qh;(function(t){t[t.CAMERA_CHANGED=0]="CAMERA_CHANGED",t[t.DISPLAY_OBJECT_CHANGED=1]="DISPLAY_OBJECT_CHANGED",t[t.NONE=2]="NONE"})(qh||(qh={}));var dV=function(){function t(e,n){this.globalRuntime=e,this.context=n,this.inited=!1,this.stats={total:0,rendered:0},this.zIndexCounter=0,this.hooks={init:new fa,initAsync:new YU,dirtycheck:new zE,cull:new zE,beginFrame:new fa,beforeRender:new fa,render:new fa,afterRender:new fa,endFrame:new fa,destroy:new fa,pick:new HU,pickSync:new zE,pointerDown:new fa,pointerUp:new fa,pointerMove:new fa,pointerOut:new fa,pointerOver:new fa,pointerWheel:new fa,pointerCancel:new fa,click:new fa}}return t.prototype.init=function(e){var n=this,r=nt(nt({},this.globalRuntime),this.context);this.context.renderingPlugins.forEach(function(i){i.apply(r,n.globalRuntime)}),this.hooks.init.call(),this.hooks.initAsync.getCallbacksNum()===0?(this.inited=!0,e()):this.hooks.initAsync.promise().then(function(){n.inited=!0,e()})},t.prototype.getStats=function(){return this.stats},t.prototype.disableDirtyRectangleRendering=function(){var e=this.context.config.renderer,n=e.getConfig().enableDirtyRectangleRendering;return!n||this.context.renderingContext.renderReasons.has(qh.CAMERA_CHANGED)},t.prototype.render=function(e,n,r){var i=this;this.stats.total=0,this.stats.rendered=0,this.zIndexCounter=0;var o=this.context.renderingContext;if(this.globalRuntime.sceneGraphService.syncHierarchy(o.root),this.globalRuntime.sceneGraphService.triggerPendingEvents(),o.renderReasons.size&&this.inited){o.dirtyRectangleRenderingDisabled=this.disableDirtyRectangleRendering();var a=o.renderReasons.size===1&&o.renderReasons.has(qh.CAMERA_CHANGED),s=!e.disableRenderHooks||!(e.disableRenderHooks&&a);s&&this.renderDisplayObject(o.root,e,o),this.hooks.beginFrame.call(n),s&&o.renderListCurrentFrame.forEach(function(c){i.hooks.beforeRender.call(c),i.hooks.render.call(c),i.hooks.afterRender.call(c)}),this.hooks.endFrame.call(n),o.renderListCurrentFrame=[],o.renderReasons.clear(),r()}},t.prototype.renderDisplayObject=function(e,n,r){var i=this,o=n.renderer.getConfig(),a=o.enableDirtyCheck,s=o.enableCulling;this.globalRuntime.enableCSSParsing&&this.globalRuntime.styleValueRegistry.recalc(e);var c=e.renderable,l=a?c.dirty||r.dirtyRectangleRenderingDisabled?e:null:e;if(l){var u=s?this.hooks.cull.call(l,this.context.camera):l;u&&(this.stats.rendered++,r.renderListCurrentFrame.push(u))}e.renderable.dirty=!1,e.sortable.renderOrder=this.zIndexCounter++,this.stats.total++;var f=e.sortable;f.dirty&&(this.sort(e,f),f.dirty=!1,f.dirtyChildren=[],f.dirtyReason=void 0),(f.sorted||e.childNodes).forEach(function(d){i.renderDisplayObject(d,n,r)})},t.prototype.sort=function(e,n){n.sorted&&n.dirtyReason!==Hh.Z_INDEX_CHANGED?n.dirtyChildren.forEach(function(r){var i=e.childNodes.indexOf(r);if(i===-1){var o=n.sorted.indexOf(r);o>=0&&n.sorted.splice(o,1)}else if(n.sorted.length===0)n.sorted.push(r);else{var a=TU(n.sorted,r);n.sorted.splice(a,0,r)}}):n.sorted=e.childNodes.slice().sort(UN)},t.prototype.destroy=function(){this.inited=!1,this.hooks.destroy.call(),this.globalRuntime.sceneGraphService.clearPendingEvents()},t.prototype.dirtify=function(){this.context.renderingContext.renderReasons.add(qh.DISPLAY_OBJECT_CHANGED)},t}(),hV=/\[\s*(.*)=(.*)\s*\]/,pV=function(){function t(){}return t.prototype.selectOne=function(e,n){var r=this;if(e.startsWith("."))return n.find(function(s){return((s==null?void 0:s.classList)||[]).indexOf(r.getIdOrClassname(e))>-1});if(e.startsWith("#"))return n.find(function(s){return s.id===r.getIdOrClassname(e)});if(e.startsWith("[")){var i=this.getAttribute(e),o=i.name,a=i.value;return o?n.find(function(s){return n!==s&&(o==="name"?s.name===a:r.attributeToString(s,o)===a)}):null}else return n.find(function(s){return n!==s&&s.nodeName===e})},t.prototype.selectAll=function(e,n){var r=this;if(e.startsWith("."))return n.findAll(function(s){return n!==s&&((s==null?void 0:s.classList)||[]).indexOf(r.getIdOrClassname(e))>-1});if(e.startsWith("#"))return n.findAll(function(s){return n!==s&&s.id===r.getIdOrClassname(e)});if(e.startsWith("[")){var i=this.getAttribute(e),o=i.name,a=i.value;return o?n.findAll(function(s){return n!==s&&(o==="name"?s.name===a:r.attributeToString(s,o)===a)}):[]}else return n.findAll(function(s){return n!==s&&s.nodeName===e})},t.prototype.is=function(e,n){if(e.startsWith("."))return n.className===this.getIdOrClassname(e);if(e.startsWith("#"))return n.id===this.getIdOrClassname(e);if(e.startsWith("[")){var r=this.getAttribute(e),i=r.name,o=r.value;return i==="name"?n.name===o:this.attributeToString(n,i)===o}else return n.nodeName===e},t.prototype.getIdOrClassname=function(e){return e.substring(1)},t.prototype.getAttribute=function(e){var n=e.match(hV),r="",i="";return n&&n.length>2&&(r=n[1].replace(/"/g,""),i=n[2].replace(/"/g,"")),{name:r,value:i}},t.prototype.attributeToString=function(e,n){if(!e.getAttribute)return"";var r=e.getAttribute(n);return Lt(r)?"":r.toString?r.toString():""},t}(),$f=function(t){xt(e,t);function e(n,r,i,o,a,s,c,l){var u=t.call(this,null)||this;return u.relatedNode=r,u.prevValue=i,u.newValue=o,u.attrName=a,u.attrChange=s,u.prevParsedValue=c,u.newParsedValue=l,u.type=n,u}return e.ADDITION=2,e.MODIFICATION=1,e.REMOVAL=3,e}(YE),Kr;(function(t){t.REPARENT="reparent",t.DESTROY="destroy",t.ATTR_MODIFIED="DOMAttrModified",t.INSERTED="DOMNodeInserted",t.REMOVED="removed",t.MOUNTED="DOMNodeInsertedIntoDocument",t.UNMOUNTED="DOMNodeRemovedFromDocument",t.BOUNDS_CHANGED="bounds-changed",t.CULLED="culled"})(Kr||(Kr={}));function eR(t){var e=t.renderable;e&&(e.renderBoundsDirty=!0,e.boundsDirty=!0)}var vV=new $f(Kr.REPARENT,null,"","","",0,"",""),gV=function(){function t(e){var n=this;this.runtime=e,this.pendingEvents=[],this.boundsChangedEvent=new Xo(Kr.BOUNDS_CHANGED),this.rotate=function(){var r=ze();return function(i,o,a,s,c){a===void 0&&(a=0),s===void 0&&(s=0),c===void 0&&(c=!0),typeof o=="number"&&(o=te(o,a,s));var l=i.transformable;if(i.parentNode===null||!i.parentNode.transformable)n.rotateLocal(i,o);else{var u=ze();ba(u,o[0],o[1],o[2]);var f=n.getRotation(i),d=n.getRotation(i.parentNode);Io(r,d),Us(r,r),ni(u,r,u),ni(l.localRotation,u,f),Oc(l.localRotation,l.localRotation),c&&n.dirtifyLocal(i,l)}}}(),this.rotateLocal=function(){var r=ze();return function(i,o,a,s,c){a===void 0&&(a=0),s===void 0&&(s=0),c===void 0&&(c=!0),typeof o=="number"&&(o=te(o,a,s));var l=i.transformable;ba(r,o[0],o[1],o[2]),Qa(l.localRotation,l.localRotation,r),c&&n.dirtifyLocal(i,l)}}(),this.setEulerAngles=function(){var r=ze();return function(i,o,a,s,c){a===void 0&&(a=0),s===void 0&&(s=0),c===void 0&&(c=!0),typeof o=="number"&&(o=te(o,a,s));var l=i.transformable;if(i.parentNode===null||!i.parentNode.transformable)n.setLocalEulerAngles(i,o);else{ba(l.localRotation,o[0],o[1],o[2]);var u=n.getRotation(i.parentNode);Io(r,Us(ze(),u)),Qa(l.localRotation,l.localRotation,r),c&&n.dirtifyLocal(i,l)}}}(),this.translateLocal=function(){return function(r,i,o,a,s){o===void 0&&(o=0),a===void 0&&(a=0),s===void 0&&(s=!0),typeof i=="number"&&(i=te(i,o,a));var c=r.transformable;fn(i,Gt())||(re(i,i,c.localRotation),No(c.localPosition,c.localPosition,i),s&&n.dirtifyLocal(r,c))}}(),this.setPosition=function(){var r=ue(),i=Gt();return function(o,a,s){s===void 0&&(s=!0);var c=o.transformable;if(i[0]=a[0],i[1]=a[1],i[2]=a[2]||0,!fn(n.getPosition(o),i)){if(lr(c.position,i),o.parentNode===null||!o.parentNode.transformable)lr(c.localPosition,i);else{var l=o.parentNode.transformable;ga(r,l.worldTransform),pr(r,r),Ft(c.localPosition,i,r)}s&&n.dirtifyLocal(o,c)}}}(),this.setLocalPosition=function(){var r=Gt();return function(i,o,a){a===void 0&&(a=!0);var s=i.transformable;r[0]=o[0],r[1]=o[1],r[2]=o[2]||0,!fn(s.localPosition,r)&&(lr(s.localPosition,r),a&&n.dirtifyLocal(i,s))}}(),this.translate=function(){var r=Gt(),i=Gt(),o=Gt();return function(a,s,c,l,u){c===void 0&&(c=0),l===void 0&&(l=0),u===void 0&&(u=!0),typeof s=="number"&&(s=Dn(i,s,c,l)),!fn(s,r)&&(No(o,n.getPosition(a),s),n.setPosition(a,o,u))}}(),this.setRotation=function(){var r=ze();return function(i,o,a,s,c,l){l===void 0&&(l=!0);var u=i.transformable;if(typeof o=="number"&&(o=Vs(o,a,s,c)),i.parentNode===null||!i.parentNode.transformable)n.setLocalRotation(i,o);else{var f=n.getRotation(i.parentNode);Io(r,f),Us(r,r),ni(u.localRotation,r,o),Oc(u.localRotation,u.localRotation),l&&n.dirtifyLocal(i,u)}}},this.displayObjectDependencyMap=new WeakMap,this.calcLocalTransform=function(){var r=ue(),i=Gt(),o=Vs(0,0,0,1);return function(a){var s=a.localSkew[0]!==0||a.localSkew[1]!==0;if(s){if(Sr(a.localTransform,a.localRotation,a.localPosition,te(1,1,1),a.origin),a.localSkew[0]!==0||a.localSkew[1]!==0){var c=po(r);c[4]=Math.tan(a.localSkew[0]),c[1]=Math.tan(a.localSkew[1]),Pn(a.localTransform,a.localTransform,c)}var l=Sr(r,o,i,a.localScale,a.origin);Pn(a.localTransform,a.localTransform,l)}else Sr(a.localTransform,a.localRotation,a.localPosition,a.localScale,a.origin)}}()}return t.prototype.matches=function(e,n){return this.runtime.sceneGraphSelector.is(e,n)},t.prototype.querySelector=function(e,n){return this.runtime.sceneGraphSelector.selectOne(e,n)},t.prototype.querySelectorAll=function(e,n){return this.runtime.sceneGraphSelector.selectAll(e,n)},t.prototype.attach=function(e,n,r){var i,o=!1;e.parentNode&&(o=e.parentNode!==n,this.detach(e)),e.parentNode=n,Lt(r)?e.parentNode.childNodes.push(e):e.parentNode.childNodes.splice(r,0,e);var a=n.sortable;(!((i=a==null?void 0:a.sorted)===null||i===void 0)&&i.length||e.parsedStyle.zIndex)&&(a.dirtyChildren.indexOf(e)===-1&&a.dirtyChildren.push(e),a.dirty=!0,a.dirtyReason=Hh.ADDED);var s=e.transformable;s&&this.dirtifyWorld(e,s),s.frozen&&this.unfreezeParentToRoot(e),o&&e.dispatchEvent(vV)},t.prototype.detach=function(e){var n,r;if(e.parentNode){var i=e.transformable,o=e.parentNode.sortable;(!((n=o==null?void 0:o.sorted)===null||n===void 0)&&n.length||!((r=e.style)===null||r===void 0)&&r.zIndex)&&(o.dirtyChildren.indexOf(e)===-1&&o.dirtyChildren.push(e),o.dirty=!0,o.dirtyReason=Hh.REMOVED);var a=e.parentNode.childNodes.indexOf(e);a>-1&&e.parentNode.childNodes.splice(a,1),i&&this.dirtifyWorld(e,i),e.parentNode=null}},t.prototype.getOrigin=function(e){return e.getGeometryBounds(),e.transformable.origin},t.prototype.setOrigin=function(e,n,r,i){r===void 0&&(r=0),i===void 0&&(i=0),typeof n=="number"&&(n=[n,r,i]);var o=e.transformable;if(!(n[0]===o.origin[0]&&n[1]===o.origin[1]&&n[2]===o.origin[2])){var a=o.origin;a[0]=n[0],a[1]=n[1],a[2]=n[2]||0,this.dirtifyLocal(e,o)}},t.prototype.setLocalEulerAngles=function(e,n,r,i,o){r===void 0&&(r=0),i===void 0&&(i=0),o===void 0&&(o=!0),typeof n=="number"&&(n=te(n,r,i));var a=e.transformable;ba(a.localRotation,n[0],n[1],n[2]),o&&this.dirtifyLocal(e,a)},t.prototype.scaleLocal=function(e,n,r){r===void 0&&(r=!0);var i=e.transformable;uf(i.localScale,i.localScale,te(n[0],n[1],n[2]||1)),r&&this.dirtifyLocal(e,i)},t.prototype.setLocalScale=function(e,n,r){r===void 0&&(r=!0);var i=e.transformable,o=te(n[0],n[1],n[2]||i.localScale[2]);fn(o,i.localScale)||(lr(i.localScale,o),r&&this.dirtifyLocal(e,i))},t.prototype.setLocalRotation=function(e,n,r,i,o,a){a===void 0&&(a=!0),typeof n=="number"&&(n=Vs(n,r,i,o));var s=e.transformable;Io(s.localRotation,n),a&&this.dirtifyLocal(e,s)},t.prototype.setLocalSkew=function(e,n,r){typeof n=="number"&&(n=Do(n,r));var i=e.transformable;xn(i.localSkew,n),this.dirtifyLocal(e,i)},t.prototype.dirtifyLocal=function(e,n){n.localDirtyFlag||(n.localDirtyFlag=!0,n.dirtyFlag||this.dirtifyWorld(e,n))},t.prototype.dirtifyWorld=function(e,n){n.dirtyFlag||this.unfreezeParentToRoot(e),this.dirtifyWorldInternal(e,n),this.dirtifyToRoot(e,!0)},t.prototype.triggerPendingEvents=function(){var e=this,n=new Set,r=function(i,o){i.isConnected&&!n.has(i.entity)&&(e.boundsChangedEvent.detail=o,e.boundsChangedEvent.target=i,i.isMutationObserved?i.dispatchEvent(e.boundsChangedEvent):i.ownerDocument.defaultView.dispatchEvent(e.boundsChangedEvent,!0),n.add(i.entity))};this.pendingEvents.forEach(function(i){var o=j(i,2),a=o[0],s=o[1];s.affectChildren?a.forEach(function(c){r(c,s)}):r(a,s)}),this.clearPendingEvents(),n.clear()},t.prototype.clearPendingEvents=function(){this.pendingEvents=[]},t.prototype.dirtifyToRoot=function(e,n){n===void 0&&(n=!1);var r=e;for(r.renderable&&(r.renderable.dirty=!0);r;)eR(r),r=r.parentNode;n&&e.forEach(function(i){eR(i)}),this.informDependentDisplayObjects(e),this.pendingEvents.push([e,{affectChildren:n}])},t.prototype.updateDisplayObjectDependency=function(e,n,r,i){if(n&&n!==r){var o=this.displayObjectDependencyMap.get(n);if(o&&o[e]){var a=o[e].indexOf(i);o[e].splice(a,1)}}if(r){var s=this.displayObjectDependencyMap.get(r);s||(this.displayObjectDependencyMap.set(r,{}),s=this.displayObjectDependencyMap.get(r)),s[e]||(s[e]=[]),s[e].push(i)}},t.prototype.informDependentDisplayObjects=function(e){var n=this,r=this.displayObjectDependencyMap.get(e);r&&Object.keys(r).forEach(function(i){r[i].forEach(function(o){n.dirtifyToRoot(o,!0),o.dispatchEvent(new $f(Kr.ATTR_MODIFIED,o,n,n,i,$f.MODIFICATION,n,n)),o.isCustomElement&&o.isConnected&&o.attributeChangedCallback&&o.attributeChangedCallback(i,n,n)})})},t.prototype.getPosition=function(e){var n=e.transformable;return Ka(n.position,this.getWorldTransform(e,n))},t.prototype.getRotation=function(e){var n=e.transformable;return Za(n.rotation,this.getWorldTransform(e,n))},t.prototype.getScale=function(e){var n=e.transformable;return Li(n.scaling,this.getWorldTransform(e,n))},t.prototype.getWorldTransform=function(e,n){return n===void 0&&(n=e.transformable),!n.localDirtyFlag&&!n.dirtyFlag||(e.parentNode&&e.parentNode.transformable&&this.getWorldTransform(e.parentNode),this.sync(e,n)),n.worldTransform},t.prototype.getLocalPosition=function(e){return e.transformable.localPosition},t.prototype.getLocalRotation=function(e){return e.transformable.localRotation},t.prototype.getLocalScale=function(e){return e.transformable.localScale},t.prototype.getLocalSkew=function(e){return e.transformable.localSkew},t.prototype.getLocalTransform=function(e){var n=e.transformable;return n.localDirtyFlag&&(this.calcLocalTransform(n),n.localDirtyFlag=!1),n.localTransform},t.prototype.setLocalTransform=function(e,n){var r=Ka(Gt(),n),i=Za(ze(),n),o=Li(Gt(),n);this.setLocalScale(e,o,!1),this.setLocalPosition(e,r,!1),this.setLocalRotation(e,i,void 0,void 0,void 0,!1),this.dirtifyLocal(e,e.transformable)},t.prototype.resetLocalTransform=function(e){this.setLocalScale(e,[1,1,1]),this.setLocalPosition(e,[0,0,0]),this.setLocalEulerAngles(e,[0,0,0]),this.setLocalSkew(e,[0,0])},t.prototype.getTransformedGeometryBounds=function(e,n,r){n===void 0&&(n=!1);var i=this.getGeometryBounds(e,n);if(Bi.isEmpty(i))return null;var o=r||new Bi;return o.setFromTransformedAABB(i,this.getWorldTransform(e)),o},t.prototype.getGeometryBounds=function(e,n){n===void 0&&(n=!1);var r=e.geometry;r.dirty&&St.styleValueRegistry.updateGeometry(e);var i=n?r.renderBounds:r.contentBounds||null;return i||new Bi},t.prototype.getBounds=function(e,n){var r=this;n===void 0&&(n=!1);var i=e.renderable;if(!i.boundsDirty&&!n&&i.bounds)return i.bounds;if(!i.renderBoundsDirty&&n&&i.renderBounds)return i.renderBounds;var o=n?i.renderBounds:i.bounds,a=this.getTransformedGeometryBounds(e,n,o),s=e.childNodes;if(s.forEach(function(u){var f=r.getBounds(u,n);f&&(a?a.add(f):(a=o||new Bi,a.update(f.center,f.halfExtents)))}),a||(a=new Bi),n){var c=AU(e);if(c){var l=c.parsedStyle.clipPath.getBounds(n);a?l&&(a=l.intersection(a)):a.update(l.center,l.halfExtents)}}return n?(i.renderBounds=a,i.renderBoundsDirty=!1):(i.bounds=a,i.boundsDirty=!1),a},t.prototype.getLocalBounds=function(e){if(e.parentNode){var n=ue();e.parentNode.transformable&&(n=pr(ue(),this.getWorldTransform(e.parentNode)));var r=this.getBounds(e);if(!Bi.isEmpty(r)){var i=new Bi;return i.setFromTransformedAABB(r,n),i}}return this.getBounds(e)},t.prototype.getBoundingClientRect=function(e){var n,r,i,o=this.getGeometryBounds(e);Bi.isEmpty(o)||(i=new Bi,i.setFromTransformedAABB(o,this.getWorldTransform(e)));var a=(r=(n=e.ownerDocument)===null||n===void 0?void 0:n.defaultView)===null||r===void 0?void 0:r.getContextService().getBoundingClientRect();if(i){var s=j(i.getMin(),2),c=s[0],l=s[1],u=j(i.getMax(),2),f=u[0],d=u[1];return new zh(c+((a==null?void 0:a.left)||0),l+((a==null?void 0:a.top)||0),f-c,d-l)}return new zh((a==null?void 0:a.left)||0,(a==null?void 0:a.top)||0,0,0)},t.prototype.dirtifyWorldInternal=function(e,n){var r=this;if(!n.dirtyFlag){n.dirtyFlag=!0,n.frozen=!1,e.childNodes.forEach(function(o){var a=o.transformable;a.dirtyFlag||r.dirtifyWorldInternal(o,a)});var i=e.renderable;i&&(i.renderBoundsDirty=!0,i.boundsDirty=!0,i.dirty=!0)}},t.prototype.syncHierarchy=function(e){var n=e.transformable;if(!n.frozen){n.frozen=!0,(n.localDirtyFlag||n.dirtyFlag)&&this.sync(e,n);for(var r=e.childNodes,i=0;i<r.length;i++)this.syncHierarchy(r[i])}},t.prototype.sync=function(e,n){if(n.localDirtyFlag&&(this.calcLocalTransform(n),n.localDirtyFlag=!1),n.dirtyFlag){var r=e.parentNode,i=r&&r.transformable;r===null||!i?ga(n.worldTransform,n.localTransform):Pn(n.worldTransform,i.worldTransform,n.localTransform),n.dirtyFlag=!1}},t.prototype.unfreezeParentToRoot=function(e){for(var n=e.parentNode;n;){var r=n.transformable;r&&(r.frozen=!1),n=n.parentNode}},t}(),qf={MetricsString:"|\xC9q\xC5",BaselineSymbol:"M",BaselineMultiplier:1.4,HeightMultiplier:2,Newlines:[10,13],BreakingSpaces:[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]},nR=/[a-zA-Z0-9\u00C0-\u00D6\u00D8-\u00f6\u00f8-\u00ff!"#$%&'()*+,-./:;]/,yV=/[!%),.:;?\]}'""]/,mV=/[$('"]/,xV=/[!),.:;?\]}'""]/,bV=/[([{'"]/,_V=/[)\]'"?!:;,.]/,wV=/[(['"...]/,OV=/[!%),.:;?\]}'"]/,EV=/[$([{'"#]/,SV=new RegExp("".concat(yV.source,"|").concat(xV.source,"|").concat(_V.source,"|").concat(OV.source)),MV=new RegExp("".concat(mV.source,"|").concat(bV.source,"|").concat(wV.source,"|").concat(EV.source)),PV=function(){function t(e){var n=this;this.runtime=e,this.fontMetricsCache={},this.shouldBreakByKinsokuShorui=function(r,i){return n.isBreakingSpace(i)?!1:!!(r&&(MV.exec(i)||SV.exec(r)))},this.trimByKinsokuShorui=function(r){var i=ut([],j(r),!1),o=i[i.length-2];if(!o)return r;var a=o[o.length-1];return i[i.length-2]=o.slice(0,-1),i[i.length-1]=a+i[i.length-1],i}}return t.prototype.measureFont=function(e,n){if(this.fontMetricsCache[e])return this.fontMetricsCache[e];var r={ascent:0,descent:0,fontSize:0},i=this.runtime.offscreenCanvasCreator.getOrCreateCanvas(n),o=this.runtime.offscreenCanvasCreator.getOrCreateContext(n,{willReadFrequently:!0});o.font=e;var a=qf.MetricsString+qf.BaselineSymbol,s=Math.ceil(o.measureText(a).width),c=Math.ceil(o.measureText(qf.BaselineSymbol).width),l=qf.HeightMultiplier*c;c=c*qf.BaselineMultiplier|0,i.width=s,i.height=l,o.fillStyle="#f00",o.fillRect(0,0,s,l),o.font=e,o.textBaseline="alphabetic",o.fillStyle="#000",o.fillText(a,0,c);var u=o.getImageData(0,0,s||1,l||1).data,f=u.length,d=s*4,h=0,p=0,v=!1;for(h=0;h<c;++h){for(var y=0;y<d;y+=4)if(u[p+y]!==255){v=!0;break}if(!v)p+=d;else break}for(r.ascent=c-h,p=f-d,v=!1,h=l;h>c;--h){for(var y=0;y<d;y+=4)if(u[p+y]!==255){v=!0;break}if(!v)p-=d;else break}return r.descent=h-c,r.fontSize=r.ascent+r.descent,this.fontMetricsCache[e]=r,r},t.prototype.measureText=function(e,n,r){var i=n.fontSize,o=i===void 0?16:i,a=n.wordWrap,s=a===void 0?!1:a,c=n.lineHeight,l=n.lineWidth,u=l===void 0?1:l,f=n.textBaseline,d=f===void 0?"alphabetic":f,h=n.textAlign,p=h===void 0?"start":h,v=n.letterSpacing,y=v===void 0?0:v,m=n.textPath;n.textPathSide,n.textPathStartOffset;var b=n.leading,O=b===void 0?0:b,E=XU(n),w=this.measureFont(E,r);w.fontSize===0&&(w.fontSize=o,w.ascent=o);var _=this.runtime.offscreenCanvasCreator.getOrCreateContext(r);_.font=E,n.isOverflowing=!1;var S=s?this.wordWrap(e,n,r):e,M=S.split(/(?:\r\n|\r|\n)/),T=new Array(M.length),A=0;if(m){m.getTotalLength();for(var C=0;C<M.length;C++)var N=_.measureText(M[C]).width+(M[C].length-1)*y}else{for(var C=0;C<M.length;C++){var k=_.measureText(M[C]).width+(M[C].length-1)*y;T[C]=k,A=Math.max(A,k)}var N=A+u,R=c||w.fontSize+u,I=Math.max(R,w.fontSize+u)+(M.length-1)*(R+O);R+=O;var D=0;return d==="middle"?D=-I/2:d==="bottom"||d==="alphabetic"||d==="ideographic"?D=-I:(d==="top"||d==="hanging")&&(D=0),{font:E,width:N,height:I,lines:M,lineWidths:T,lineHeight:R,maxLineWidth:A,fontProperties:w,lineMetrics:T.map(function(F,G){var X=0;return p==="center"||p==="middle"?X-=F/2:(p==="right"||p==="end")&&(X-=F),new zh(X-u/2,D+G*R,F+u,R)})}}},t.prototype.setGraphemeOnPath=function(){},t.prototype.wordWrap=function(e,n,r){var i=this,o=n.wordWrapWidth,a=o===void 0?0:o,s=n.letterSpacing,c=s===void 0?0:s,l=n.maxLines,u=l===void 0?1/0:l,f=n.textOverflow,d=this.runtime.offscreenCanvasCreator.getOrCreateContext(r),h=a+c,p="";f==="ellipsis"?p="...":f&&f!=="clip"&&(p=f);for(var v=[],y=0,m=0,b={},O=function(D){return i.getFromCache(D,c,b,d)},E=Array.from(p).reduce(function(D,B){return D+O(B)},0),w=Array.from(e),_=0;_<w.length;_++){var S=w[_],M=e[_-1],T=e[_+1],A=O(S);if(this.isNewline(S)){if(y++,y>=u){n.isOverflowing=!0;break}m=0,v[y]="";continue}if(m>0&&m+A>h){if(y+1>=u){if(n.isOverflowing=!0,E>0&&E<=h){for(var C=v[y].length,N=0,k=C,R=0;R<C;R++){var I=O(v[y][R]);if(N+I+E>h){k=R;break}N+=I}v[y]=(v[y]||"").slice(0,k)+p}break}if(y++,m=0,v[y]="",this.isBreakingSpace(S))continue;this.canBreakInLastChar(S)||(v=this.trimToBreakable(v),m=this.sumTextWidthByCache(v[y]||"",b)),this.shouldBreakByKinsokuShorui(S,T)&&(v=this.trimByKinsokuShorui(v),m+=O(M||""))}m+=A,v[y]=(v[y]||"")+S}return v.join(`
`)},t.prototype.isBreakingSpace=function(e){return typeof e!="string"?!1:qf.BreakingSpaces.indexOf(e.charCodeAt(0))>=0},t.prototype.isNewline=function(e){return typeof e!="string"?!1:qf.Newlines.indexOf(e.charCodeAt(0))>=0},t.prototype.trimToBreakable=function(e){var n=ut([],j(e),!1),r=n[n.length-2],i=this.findBreakableIndex(r);if(i===-1||!r)return n;var o=r.slice(i,i+1),a=this.isBreakingSpace(o),s=i+1,c=i+(a?0:1);return n[n.length-1]+=r.slice(s,r.length),n[n.length-2]=r.slice(0,c),n},t.prototype.canBreakInLastChar=function(e){return!(e&&nR.test(e))},t.prototype.sumTextWidthByCache=function(e,n){return e.split("").reduce(function(r,i){if(!n[i])throw Error("cannot count the word without cache");return r+n[i]},0)},t.prototype.findBreakableIndex=function(e){for(var n=e.length-1;n>=0;n--)if(!nR.test(e[n]))return n;return-1},t.prototype.getFromCache=function(e,n,r,i){var o=r[e];if(typeof o!="number"){var a=e.length*n;o=i.measureText(e).width+a,r[e]=o}return o},t}(),St={},TV=function(){var t,e=new iV,n=new rV;return t={},t[qt.CIRCLE]=new QU,t[qt.ELLIPSE]=new tV,t[qt.RECT]=e,t[qt.IMAGE]=e,t[qt.GROUP]=new aV,t[qt.LINE]=new eV,t[qt.TEXT]=new oV(St),t[qt.POLYLINE]=n,t[qt.POLYGON]=n,t[qt.PATH]=new nV,t[qt.HTML]=new sV,t[qt.MESH]=null,t}(),AV=function(){var t,e=new dU,n=new DE;return t={},t[ce.PERCENTAGE]=null,t[ce.NUMBER]=new yU,t[ce.ANGLE]=new uU,t[ce.DEFINED_PATH]=new fU,t[ce.PAINT]=e,t[ce.COLOR]=e,t[ce.FILTER]=new hU,t[ce.LENGTH]=n,t[ce.LENGTH_PERCENTAGE]=n,t[ce.LENGTH_PERCENTAGE_12]=new pU,t[ce.LENGTH_PERCENTAGE_14]=new vU,t[ce.COORDINATE]=new DE,t[ce.OFFSET_DISTANCE]=new mU,t[ce.OPACITY_VALUE]=new xU,t[ce.PATH]=new bU,t[ce.LIST_OF_POINTS]=new _U,t[ce.SHADOW_BLUR]=new wU,t[ce.TEXT]=new OU,t[ce.TEXT_TRANSFORM]=new EU,t[ce.TRANSFORM]=new KU,t[ce.TRANSFORM_ORIGIN]=new ZU,t[ce.Z_INDEX]=new JU,t[ce.MARKER]=new gU,t}(),CV=function(){return typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof gt.g!="undefined"?gt.g:{}};St.CameraContribution=oH,St.AnimationTimeline=null,St.EasingFunction=null,St.offscreenCanvasCreator=new fV,St.sceneGraphSelector=new pV,St.sceneGraphService=new gV(St),St.textService=new PV(St),St.geometryUpdaterFactory=TV,St.CSSPropertySyntaxFactory=AV,St.styleValueRegistry=new lU(St),St.layoutRegistry=null,St.globalThis=CV(),St.enableCSSParsing=!1,St.enableDataset=!1,St.enableStyleSyntax=!0,St.enableAttributeDashCased=!1,St.enableSizeAttenuation=!1;var rR=0;function L0t(){rR=0}var iR=new $f(Kr.INSERTED,null,"","","",0,"",""),oR=new $f(Kr.REMOVED,null,"","","",0,"",""),kV=new Xo(Kr.DESTROY),NV=function(t){xt(e,t);function e(){var n=t.call(this)||this;return n.entity=rR++,n.renderable={bounds:void 0,boundsDirty:!0,renderBounds:void 0,renderBoundsDirty:!0,dirtyRenderBounds:void 0,dirty:!1},n.cullable={strategy:SE.Standard,visibilityPlaneMask:-1,visible:!0,enable:!0},n.transformable={dirtyFlag:!1,localDirtyFlag:!1,frozen:!1,localPosition:[0,0,0],localRotation:[0,0,0,1],localScale:[1,1,1],localTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],localSkew:[0,0],position:[0,0,0],rotation:[0,0,0,1],scaling:[1,1,1],worldTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],origin:[0,0,0]},n.sortable={dirty:!1,sorted:void 0,renderOrder:0,dirtyChildren:[],dirtyReason:void 0},n.geometry={contentBounds:void 0,renderBounds:void 0,dirty:!0},n.rBushNode={aabb:void 0},n.namespaceURI="g",n.scrollLeft=0,n.scrollTop=0,n.clientTop=0,n.clientLeft=0,n.destroyed=!1,n.style={},n.computedStyle=St.enableCSSParsing?{opacity:Cr,fillOpacity:Cr,strokeOpacity:Cr,fill:Cr,stroke:Cr,transform:Cr,transformOrigin:Cr,visibility:Cr,pointerEvents:Cr,lineWidth:Cr,lineCap:Cr,lineJoin:Cr,increasedLineWidthForHitTesting:Cr,fontSize:Cr,fontFamily:Cr,fontStyle:Cr,fontWeight:Cr,fontVariant:Cr,textAlign:Cr,textBaseline:Cr,textTransform:Cr,zIndex:Cr,filter:Cr,shadowType:Cr}:null,n.parsedStyle={},n.attributes={},n}return Object.defineProperty(e.prototype,"className",{get:function(){return this.getAttribute("class")||""},set:function(n){this.setAttribute("class",n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"classList",{get:function(){return this.className.split(" ").filter(function(n){return n!==""})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tagName",{get:function(){return this.nodeName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"children",{get:function(){return this.childNodes},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"childElementCount",{get:function(){return this.childNodes.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"firstElementChild",{get:function(){return this.firstChild},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastElementChild",{get:function(){return this.lastChild},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parentElement",{get:function(){return this.parentNode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){if(this.parentNode){var n=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[n+1]||null}return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){if(this.parentNode){var n=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[n-1]||null}return null},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(n){throw new Error($r)},e.prototype.appendChild=function(n,r){var i;if(n.destroyed)throw new Error(iH);return St.sceneGraphService.attach(n,this,r),!((i=this.ownerDocument)===null||i===void 0)&&i.defaultView&&this.ownerDocument.defaultView.mountChildren(n),this.isMutationObserved&&(iR.relatedNode=this,n.dispatchEvent(iR)),n},e.prototype.insertBefore=function(n,r){if(!r)this.appendChild(n);else{n.parentElement&&n.parentElement.removeChild(n);var i=this.childNodes.indexOf(r);i===-1?this.appendChild(n):this.appendChild(n,i)}return n},e.prototype.replaceChild=function(n,r){var i=this.childNodes.indexOf(r);return this.removeChild(r),this.appendChild(n,i),r},e.prototype.removeChild=function(n){var r;return oR.relatedNode=this,n.dispatchEvent(oR),!((r=n.ownerDocument)===null||r===void 0)&&r.defaultView&&n.ownerDocument.defaultView.unmountChildren(n),St.sceneGraphService.detach(n),n},e.prototype.removeChildren=function(){for(var n=this.childNodes.length-1;n>=0;n--){var r=this.childNodes[n];this.removeChild(r)}},e.prototype.destroyChildren=function(){for(var n=this.childNodes.length-1;n>=0;n--){var r=this.childNodes[n];r.childNodes.length&&r.destroyChildren(),r.destroy()}},e.prototype.matches=function(n){return St.sceneGraphService.matches(n,this)},e.prototype.getElementById=function(n){return St.sceneGraphService.querySelector("#".concat(n),this)},e.prototype.getElementsByName=function(n){return St.sceneGraphService.querySelectorAll('[name="'.concat(n,'"]'),this)},e.prototype.getElementsByClassName=function(n){return St.sceneGraphService.querySelectorAll(".".concat(n),this)},e.prototype.getElementsByTagName=function(n){return St.sceneGraphService.querySelectorAll(n,this)},e.prototype.querySelector=function(n){return St.sceneGraphService.querySelector(n,this)},e.prototype.querySelectorAll=function(n){return St.sceneGraphService.querySelectorAll(n,this)},e.prototype.closest=function(n){var r=this;do{if(St.sceneGraphService.matches(n,r))return r;r=r.parentElement}while(r!==null);return null},e.prototype.find=function(n){var r=this,i=null;return this.forEach(function(o){return o!==r&&n(o)?(i=o,!0):!1}),i},e.prototype.findAll=function(n){var r=this,i=[];return this.forEach(function(o){o!==r&&n(o)&&i.push(o)}),i},e.prototype.after=function(){for(var n=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(this.parentNode){var o=this.parentNode.childNodes.indexOf(this);r.forEach(function(a,s){var c;return(c=n.parentNode)===null||c===void 0?void 0:c.appendChild(a,o+s+1)})}},e.prototype.before=function(){for(var n,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(this.parentNode){var o=this.parentNode.childNodes.indexOf(this),a=j(r),s=a[0],c=a.slice(1);this.parentNode.appendChild(s,o),(n=s).after.apply(n,ut([],j(c),!1))}},e.prototype.replaceWith=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];this.after.apply(this,ut([],j(n),!1)),this.remove()},e.prototype.append=function(){for(var n=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];r.forEach(function(o){return n.appendChild(o)})},e.prototype.prepend=function(){for(var n=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];r.forEach(function(o,a){return n.appendChild(o,a)})},e.prototype.replaceChildren=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];for(;this.childNodes.length&&this.firstChild;)this.removeChild(this.firstChild);this.append.apply(this,ut([],j(n),!1))},e.prototype.remove=function(){return this.parentNode?this.parentNode.removeChild(this):this},e.prototype.destroy=function(){this.dispatchEvent(kV),this.remove(),this.emitter.removeAllListeners(),this.destroyed=!0},e.prototype.getGeometryBounds=function(){return St.sceneGraphService.getGeometryBounds(this)},e.prototype.getRenderBounds=function(){return St.sceneGraphService.getBounds(this,!0)},e.prototype.getBounds=function(){return St.sceneGraphService.getBounds(this)},e.prototype.getLocalBounds=function(){return St.sceneGraphService.getLocalBounds(this)},e.prototype.getBoundingClientRect=function(){return St.sceneGraphService.getBoundingClientRect(this)},e.prototype.getClientRects=function(){return[this.getBoundingClientRect()]},e.prototype.computedStyleMap=function(){return new Map(Object.entries(this.computedStyle))},e.prototype.getAttributeNames=function(){return Object.keys(this.attributes)},e.prototype.getAttribute=function(n){if(pH(n))return St.enableCSSParsing?null:void 0;var r=this.attributes[n];if(r===void 0){if(St.enableAttributeDashCased){var i=bE(n);r=this.attributes[i]}return St.enableCSSParsing&&Lt(r)?null:r}else return r},e.prototype.hasAttribute=function(n){return this.getAttributeNames().includes(n)},e.prototype.hasAttributes=function(){return!!this.getAttributeNames().length},e.prototype.removeAttribute=function(n){this.setAttribute(n,null),delete this.attributes[n]},e.prototype.setAttribute=function(n,r,i,o){this.attributes[n]=r},e.prototype.getAttributeNS=function(n,r){throw new Error($r)},e.prototype.getAttributeNode=function(n){throw new Error($r)},e.prototype.getAttributeNodeNS=function(n,r){throw new Error($r)},e.prototype.hasAttributeNS=function(n,r){throw new Error($r)},e.prototype.removeAttributeNS=function(n,r){throw new Error($r)},e.prototype.removeAttributeNode=function(n){throw new Error($r)},e.prototype.setAttributeNS=function(n,r,i){throw new Error($r)},e.prototype.setAttributeNode=function(n){throw new Error($r)},e.prototype.setAttributeNodeNS=function(n){throw new Error($r)},e.prototype.toggleAttribute=function(n,r){throw new Error($r)},e}(io);function kr(t){return!!(t!=null&&t.nodeName)}var aR=St.globalThis.Proxy?St.globalThis.Proxy:function(){},Dl=new $f(Kr.ATTR_MODIFIED,null,null,null,null,$f.MODIFICATION,null,null),RV={opacity:"",fillOpacity:"",strokeOpacity:"",fill:"",stroke:"",transform:"",transformOrigin:"",visibility:"",pointerEvents:"",lineWidth:"",lineCap:"",lineJoin:"",increasedLineWidthForHitTesting:"",fontSize:"",fontFamily:"",fontStyle:"",fontWeight:"",fontVariant:"",textAlign:"",textBaseline:"",textTransform:"",zIndex:"",filter:"",shadowType:""},LV={fill:Y1,stroke:Y1,transform:[],zIndex:0,filter:[],shadowType:"outer",miterLimit:10},IV=["opacity","fillOpacity","strokeOpacity","transformOrigin","visibility","pointerEvents","lineWidth","lineCap","lineJoin","increasedLineWidthForHitTesting"],DV=ut(ut([],j(IV),!1),["fontSize","fontFamily","fontStyle","fontWeight","fontVariant","textAlign","textBaseline","textTransform"],!1),sR="data-",Ts=function(t){xt(e,t);function e(n){var r=t.call(this)||this;return r.isCustomElement=!1,r.isMutationObserved=!1,r.activeAnimations=[],r.config=n,r.id=r.config.id||"",r.name=r.config.name||"",(r.config.className||r.config.class)&&(r.className=r.config.className||r.config.class),r.nodeName=r.config.type||qt.GROUP,St.enableCSSParsing?(Object.assign(r.attributes,RV),Object.assign(r.parsedStyle,LV,r.config.initialParsedStyle)):r.config.initialParsedStyle&&Object.assign(r.parsedStyle,r.config.initialParsedStyle),r.initAttributes(r.config.style),St.enableDataset&&(r.dataset=new aR({},{get:function(i,o){var a="".concat(sR).concat(mN(o));return i[a]!==void 0?i[a]:r.getAttribute(a)},set:function(i,o,a){return r.setAttribute("".concat(sR).concat(mN(o)),a),!0}})),St.enableStyleSyntax&&(r.style=new aR({setProperty:function(i,o){r.setAttribute(i,o)},getPropertyValue:function(i){return r.getAttribute(i)},removeProperty:function(i){r.removeAttribute(i)},item:function(){return""}},{get:function(i,o){return i[o]!==void 0?i[o]:r.getAttribute(o)},set:function(i,o,a){return r.setAttribute(o,a),!0}})),r}return e.prototype.destroy=function(){t.prototype.destroy.call(this),this.getAnimations().forEach(function(n){n.cancel()})},e.prototype.cloneNode=function(n,r){var i=nt({},this.attributes);for(var o in i){var a=i[o];kr(a)&&o!=="clipPath"&&o!=="offsetPath"&&o!=="textPath"&&(i[o]=a.cloneNode(n)),r&&(i[o]=r(o,a))}var s=new this.constructor({id:this.id,name:this.name,className:this.name,interactive:this.interactive,style:i});return s.setLocalTransform(this.getLocalTransform()),n&&this.children.forEach(function(c){if(!c.style.isMarker){var l=c.cloneNode(n);s.appendChild(l)}}),s},e.prototype.initAttributes=function(n){n===void 0&&(n={});var r=this.renderable,i={forceUpdateGeometry:!0};St.enableCSSParsing&&(i.usedAttributes=DV);var o=n;if(St.enableAttributeDashCased){o={};for(var a in n){var s=bE(a);o[s]=n[a]}}St.styleValueRegistry.processProperties(this,o,i),r.dirty=!0},e.prototype.setAttribute=function(n,r,i,o){i===void 0&&(i=!1),o===void 0&&(o=!0),St.enableAttributeDashCased&&(n=bE(n)),!le(r)&&(i||r!==this.attributes[n])&&(this.internalSetAttribute(n,r,{memoize:o}),t.prototype.setAttribute.call(this,n,r))},e.prototype.internalSetAttribute=function(n,r,i){var o;i===void 0&&(i={});var a=this.renderable,s=this.attributes[n],c=this.parsedStyle[n];St.styleValueRegistry.processProperties(this,(o={},o[n]=r,o),i),a.dirty=!0;var l=this.parsedStyle[n];this.isConnected&&(Dl.relatedNode=this,Dl.prevValue=s,Dl.newValue=r,Dl.attrName=n,Dl.prevParsedValue=c,Dl.newParsedValue=l,this.isMutationObserved?this.dispatchEvent(Dl):(Dl.target=this,this.ownerDocument.defaultView.dispatchEvent(Dl,!0))),(this.isCustomElement&&this.isConnected||!this.isCustomElement)&&this.attributeChangedCallback&&this.attributeChangedCallback(n,s,r,c,l)},e.prototype.getBBox=function(){var n=this.getBounds(),r=j(n.getMin(),2),i=r[0],o=r[1],a=j(n.getMax(),2),s=a[0],c=a[1];return new zh(i,o,s-i,c-o)},e.prototype.setOrigin=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),St.sceneGraphService.setOrigin(this,Na(n,r,i)),this},e.prototype.getOrigin=function(){return St.sceneGraphService.getOrigin(this)},e.prototype.setPosition=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),St.sceneGraphService.setPosition(this,Na(n,r,i)),this},e.prototype.setLocalPosition=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),St.sceneGraphService.setLocalPosition(this,Na(n,r,i)),this},e.prototype.translate=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),St.sceneGraphService.translate(this,Na(n,r,i)),this},e.prototype.translateLocal=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),St.sceneGraphService.translateLocal(this,Na(n,r,i)),this},e.prototype.getPosition=function(){return St.sceneGraphService.getPosition(this)},e.prototype.getLocalPosition=function(){return St.sceneGraphService.getLocalPosition(this)},e.prototype.scale=function(n,r,i){return this.scaleLocal(n,r,i)},e.prototype.scaleLocal=function(n,r,i){return typeof n=="number"&&(r=r||n,i=i||n,n=Na(n,r,i)),St.sceneGraphService.scaleLocal(this,n),this},e.prototype.setLocalScale=function(n,r,i){return typeof n=="number"&&(r=r||n,i=i||n,n=Na(n,r,i)),St.sceneGraphService.setLocalScale(this,n),this},e.prototype.getLocalScale=function(){return St.sceneGraphService.getLocalScale(this)},e.prototype.getScale=function(){return St.sceneGraphService.getScale(this)},e.prototype.getEulerAngles=function(){var n=j(vE(Gt(),St.sceneGraphService.getWorldTransform(this)),3),r=n[2];return Ms(r)},e.prototype.getLocalEulerAngles=function(){var n=j(vE(Gt(),St.sceneGraphService.getLocalRotation(this)),3),r=n[2];return Ms(r)},e.prototype.setEulerAngles=function(n){return St.sceneGraphService.setEulerAngles(this,0,0,n),this},e.prototype.setLocalEulerAngles=function(n){return St.sceneGraphService.setLocalEulerAngles(this,0,0,n),this},e.prototype.rotateLocal=function(n,r,i){return Lt(r)&&Lt(i)?St.sceneGraphService.rotateLocal(this,0,0,n):St.sceneGraphService.rotateLocal(this,n,r,i),this},e.prototype.rotate=function(n,r,i){return Lt(r)&&Lt(i)?St.sceneGraphService.rotate(this,0,0,n):St.sceneGraphService.rotate(this,n,r,i),this},e.prototype.setRotation=function(n,r,i,o){return St.sceneGraphService.setRotation(this,n,r,i,o),this},e.prototype.setLocalRotation=function(n,r,i,o){return St.sceneGraphService.setLocalRotation(this,n,r,i,o),this},e.prototype.setLocalSkew=function(n,r){return St.sceneGraphService.setLocalSkew(this,n,r),this},e.prototype.getRotation=function(){return St.sceneGraphService.getRotation(this)},e.prototype.getLocalRotation=function(){return St.sceneGraphService.getLocalRotation(this)},e.prototype.getLocalSkew=function(){return St.sceneGraphService.getLocalSkew(this)},e.prototype.getLocalTransform=function(){return St.sceneGraphService.getLocalTransform(this)},e.prototype.getWorldTransform=function(){return St.sceneGraphService.getWorldTransform(this)},e.prototype.setLocalTransform=function(n){return St.sceneGraphService.setLocalTransform(this,n),this},e.prototype.resetLocalTransform=function(){St.sceneGraphService.resetLocalTransform(this)},e.prototype.getAnimations=function(){return this.activeAnimations},e.prototype.animate=function(n,r){var i,o=(i=this.ownerDocument)===null||i===void 0?void 0:i.timeline;return o?o.play(this,n,r):null},e.prototype.isVisible=function(){var n,r;return St.enableCSSParsing?((n=this.parsedStyle)===null||n===void 0?void 0:n.visibility)==="visible":((r=this.parsedStyle)===null||r===void 0?void 0:r.visibility)!=="hidden"},Object.defineProperty(e.prototype,"interactive",{get:function(){return this.isInteractive()},set:function(n){this.style.pointerEvents=n?"auto":"none"},enumerable:!1,configurable:!0}),e.prototype.isInteractive=function(){var n;return((n=this.parsedStyle)===null||n===void 0?void 0:n.pointerEvents)!=="none"},e.prototype.isCulled=function(){return!!(this.cullable&&this.cullable.enable&&!this.cullable.visible)},e.prototype.toFront=function(){return this.parentNode&&(this.style.zIndex=Math.max.apply(Math,ut([],j(this.parentNode.children.map(function(n){return Number(n.style.zIndex)})),!1))+1),this},e.prototype.toBack=function(){return this.parentNode&&(this.style.zIndex=Math.min.apply(Math,ut([],j(this.parentNode.children.map(function(n){return Number(n.style.zIndex)})),!1))-1),this},e.prototype.getConfig=function(){return this.config},e.prototype.attr=function(){for(var n=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=j(r,2),a=o[0],s=o[1];return a?Yi(a)?(Object.keys(a).forEach(function(c){n.setAttribute(c,a[c])}),this):r.length===2?(this.setAttribute(a,s),this):this.attributes[a]:this.attributes},e.prototype.getMatrix=function(n){var r=n||this.getWorldTransform(),i=j(Ka(Gt(),r),2),o=i[0],a=i[1],s=j(Li(Gt(),r),2),c=s[0],l=s[1],u=Za(ze(),r),f=j(vE(Gt(),u),3),d=f[0],h=f[2];return ZY(d||h,o,a,c,l)},e.prototype.getLocalMatrix=function(){return this.getMatrix(this.getLocalTransform())},e.prototype.setMatrix=function(n){var r=j(dN(n),5),i=r[0],o=r[1],a=r[2],s=r[3],c=r[4];this.setEulerAngles(c).setPosition(i,o).setLocalScale(a,s)},e.prototype.setLocalMatrix=function(n){var r=j(dN(n),5),i=r[0],o=r[1],a=r[2],s=r[3],c=r[4];this.setLocalEulerAngles(c).setLocalPosition(i,o).setLocalScale(a,s)},e.prototype.show=function(){St.enableCSSParsing?this.style.visibility="visible":this.forEach(function(n){n.style.visibility="visible"})},e.prototype.hide=function(){St.enableCSSParsing?this.style.visibility="hidden":this.forEach(function(n){n.style.visibility="hidden"})},e.prototype.getCount=function(){return this.childElementCount},e.prototype.getParent=function(){return this.parentElement},e.prototype.getChildren=function(){return this.children},e.prototype.getFirst=function(){return this.firstElementChild},e.prototype.getLast=function(){return this.lastElementChild},e.prototype.getChildByIndex=function(n){return this.children[n]||null},e.prototype.add=function(n,r){return this.appendChild(n,r)},e.prototype.set=function(n,r){this.config[n]=r},e.prototype.get=function(n){return this.config[n]},e.prototype.moveTo=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),this.setPosition(n,r,i),this},e.prototype.move=function(n,r,i){return r===void 0&&(r=0),i===void 0&&(i=0),this.setPosition(n,r,i),this},e.prototype.setZIndex=function(n){return this.style.zIndex=n,this},e}(NV),BV=function(t){xt(e,t);function e(n){return n===void 0&&(n={}),t.call(this,nt({type:qt.CIRCLE},n))||this}return e}(Ts),I0t=function(t){xt(e,t);function e(n){n===void 0&&(n={});var r=this,i=n.style,o=Ge(n,["style"]);return r=t.call(this,nt({style:St.enableCSSParsing?nt({},i):nt({},i)},o))||this,r.isCustomElement=!0,r}return e}(Ts),FV=function(t){xt(e,t);function e(n){return n===void 0&&(n={}),t.call(this,nt({type:qt.ELLIPSE},n))||this}return e}(Ts),VE=function(t){xt(e,t);function e(n){return n===void 0&&(n={}),t.call(this,nt({type:qt.GROUP},n))||this}return e}(Ts),jV=function(t){xt(e,t);function e(n){n===void 0&&(n={});var r=this,i=n.style,o=Ge(n,["style"]);return r=t.call(this,nt({type:qt.HTML,style:St.enableCSSParsing?nt({x:"",y:"",width:"auto",height:"auto",innerHTML:""},i):nt({},i)},o))||this,r.cullable.enable=!1,r}return e.prototype.getDomElement=function(){return this.parsedStyle.$el},e.prototype.getClientRects=function(){return[this.getBoundingClientRect()]},e.prototype.getLocalBounds=function(){if(this.parentNode){var n=pr(ue(),this.parentNode.getWorldTransform()),r=this.getBounds();if(!Bi.isEmpty(r)){var i=new Bi;return i.setFromTransformedAABB(r,n),i}}return this.getBounds()},e}(Ts),GV=function(t){xt(e,t);function e(n){return n===void 0&&(n={}),t.call(this,nt({type:qt.IMAGE},n))||this}return e}(Ts),zV=function(t){xt(e,t);function e(n){n===void 0&&(n={});var r=this,i=n.style,o=Ge(n,["style"]);r=t.call(this,nt({type:qt.LINE,style:nt({x1:0,y1:0,x2:0,y2:0,z1:0,z2:0},i)},o))||this,r.markerStartAngle=0,r.markerEndAngle=0;var a=r.parsedStyle,s=a.markerStart,c=a.markerEnd;return s&&kr(s)&&(r.markerStartAngle=s.getLocalEulerAngles(),r.appendChild(s)),c&&kr(c)&&(r.markerEndAngle=c.getLocalEulerAngles(),r.appendChild(c)),r.transformMarker(!0),r.transformMarker(!1),r}return e.prototype.attributeChangedCallback=function(n,r,i,o,a){n==="x1"||n==="y1"||n==="x2"||n==="y2"||n==="markerStartOffset"||n==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):n==="markerStart"?(o&&kr(o)&&(this.markerStartAngle=0,o.remove()),a&&kr(a)&&(this.markerStartAngle=a.getLocalEulerAngles(),this.appendChild(a),this.transformMarker(!0))):n==="markerEnd"&&(o&&kr(o)&&(this.markerEndAngle=0,o.remove()),a&&kr(a)&&(this.markerEndAngle=a.getLocalEulerAngles(),this.appendChild(a),this.transformMarker(!1)))},e.prototype.transformMarker=function(n){var r=this.parsedStyle,i=r.markerStart,o=r.markerEnd,a=r.markerStartOffset,s=r.markerEndOffset,c=r.x1,l=r.x2,u=r.y1,f=r.y2,d=n?i:o;if(!(!d||!kr(d))){var h=0,p,v,y,m,b,O;n?(y=c,m=u,p=l-c,v=f-u,b=a||0,O=this.markerStartAngle):(y=l,m=f,p=c-l,v=u-f,b=s||0,O=this.markerEndAngle),h=Math.atan2(v,p),d.setLocalEulerAngles(h*180/Math.PI+O),d.setLocalPosition(y+Math.cos(h)*b,m+Math.sin(h)*b)}},e.prototype.getPoint=function(n,r){r===void 0&&(r=!1);var i=this.parsedStyle,o=i.x1,a=i.y1,s=i.x2,c=i.y2,l=eo(o,a,s,c,n),u=l.x,f=l.y,d=Ft(Gt(),te(u,f,0),r?this.getWorldTransform():this.getLocalTransform());return new Vo(d[0],d[1])},e.prototype.getPointAtLength=function(n,r){return r===void 0&&(r=!1),this.getPoint(n/this.getTotalLength(),r)},e.prototype.getTotalLength=function(){var n=this.parsedStyle,r=n.x1,i=n.y1,o=n.x2,a=n.y2;return Dc(r,i,o,a)},e}(Ts),WV=function(t){xt(e,t);function e(n){n===void 0&&(n={});var r=this,i=n.style,o=Ge(n,["style"]);r=t.call(this,nt({type:qt.PATH,style:St.enableCSSParsing?nt({d:"",miterLimit:""},i):nt({},i),initialParsedStyle:St.enableCSSParsing?null:{miterLimit:4,d:nt({},bN)}},o))||this,r.markerStartAngle=0,r.markerEndAngle=0,r.markerMidList=[];var a=r.parsedStyle,s=a.markerStart,c=a.markerEnd,l=a.markerMid;return s&&kr(s)&&(r.markerStartAngle=s.getLocalEulerAngles(),r.appendChild(s)),l&&kr(l)&&r.placeMarkerMid(l),c&&kr(c)&&(r.markerEndAngle=c.getLocalEulerAngles(),r.appendChild(c)),r.transformMarker(!0),r.transformMarker(!1),r}return e.prototype.attributeChangedCallback=function(n,r,i,o,a){n==="d"?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):n==="markerStartOffset"||n==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):n==="markerStart"?(o&&kr(o)&&(this.markerStartAngle=0,o.remove()),a&&kr(a)&&(this.markerStartAngle=a.getLocalEulerAngles(),this.appendChild(a),this.transformMarker(!0))):n==="markerEnd"?(o&&kr(o)&&(this.markerEndAngle=0,o.remove()),a&&kr(a)&&(this.markerEndAngle=a.getLocalEulerAngles(),this.appendChild(a),this.transformMarker(!1))):n==="markerMid"&&this.placeMarkerMid(a)},e.prototype.transformMarker=function(n){var r=this.parsedStyle,i=r.markerStart,o=r.markerEnd,a=r.markerStartOffset,s=r.markerEndOffset,c=n?i:o;if(!(!c||!kr(c))){var l=0,u,f,d,h,p,v;if(n){var y=j(this.getStartTangent(),2),m=y[0],b=y[1];d=b[0],h=b[1],u=m[0]-b[0],f=m[1]-b[1],p=a||0,v=this.markerStartAngle}else{var O=j(this.getEndTangent(),2),m=O[0],b=O[1];d=b[0],h=b[1],u=m[0]-b[0],f=m[1]-b[1],p=s||0,v=this.markerEndAngle}l=Math.atan2(f,u),c.setLocalEulerAngles(l*180/Math.PI+v),c.setLocalPosition(d+Math.cos(l)*p,h+Math.sin(l)*p)}},e.prototype.placeMarkerMid=function(n){var r=this.parsedStyle.d.segments;if(this.markerMidList.forEach(function(l){l.remove()}),n&&kr(n))for(var i=1;i<r.length-1;i++){var o=j(r[i].currentPoint,2),a=o[0],s=o[1],c=i===1?n:n.cloneNode(!0);this.markerMidList.push(c),this.appendChild(c),c.setLocalPosition(a,s)}},e.prototype.getTotalLength=function(){return CN(this)},e.prototype.getPointAtLength=function(n,r){r===void 0&&(r=!1);var i=this.parsedStyle.d.absolutePath,o=Jd(i,n),a=o.x,s=o.y,c=Ft(Gt(),te(a,s,0),r?this.getWorldTransform():this.getLocalTransform());return new Vo(c[0],c[1])},e.prototype.getPoint=function(n,r){return r===void 0&&(r=!1),this.getPointAtLength(n*CN(this),r)},e.prototype.getStartTangent=function(){var n=this.parsedStyle.d.segments,r=[];if(n.length>1){var i=n[0].currentPoint,o=n[1].currentPoint,a=n[1].startTangent;r=[],a?(r.push([i[0]-a[0],i[1]-a[1]]),r.push([i[0],i[1]])):(r.push([o[0],o[1]]),r.push([i[0],i[1]]))}return r},e.prototype.getEndTangent=function(){var n=this.parsedStyle.d.segments,r=n.length,i=[];if(r>1){var o=n[r-2].currentPoint,a=n[r-1].currentPoint,s=n[r-1].endTangent;i=[],s?(i.push([a[0]-s[0],a[1]-s[1]]),i.push([a[0],a[1]])):(i.push([o[0],o[1]]),i.push([a[0],a[1]]))}return i},e}(Ts),cR=function(t){xt(e,t);function e(n){n===void 0&&(n={});var r=this,i=n.style,o=Ge(n,["style"]);r=t.call(this,nt({type:qt.POLYGON,style:St.enableCSSParsing?nt({points:"",miterLimit:"",isClosed:!0},i):nt({},i),initialParsedStyle:St.enableCSSParsing?null:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!0}},o))||this,r.markerStartAngle=0,r.markerEndAngle=0,r.markerMidList=[];var a=r.parsedStyle,s=a.markerStart,c=a.markerEnd,l=a.markerMid;return s&&kr(s)&&(r.markerStartAngle=s.getLocalEulerAngles(),r.appendChild(s)),l&&kr(l)&&r.placeMarkerMid(l),c&&kr(c)&&(r.markerEndAngle=c.getLocalEulerAngles(),r.appendChild(c)),r.transformMarker(!0),r.transformMarker(!1),r}return e.prototype.attributeChangedCallback=function(n,r,i,o,a){n==="points"?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):n==="markerStartOffset"||n==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):n==="markerStart"?(o&&kr(o)&&(this.markerStartAngle=0,o.remove()),a&&kr(a)&&(this.markerStartAngle=a.getLocalEulerAngles(),this.appendChild(a),this.transformMarker(!0))):n==="markerEnd"?(o&&kr(o)&&(this.markerEndAngle=0,o.remove()),a&&kr(a)&&(this.markerEndAngle=a.getLocalEulerAngles(),this.appendChild(a),this.transformMarker(!1))):n==="markerMid"&&this.placeMarkerMid(a)},e.prototype.transformMarker=function(n){var r=this.parsedStyle,i=r.markerStart,o=r.markerEnd,a=r.markerStartOffset,s=r.markerEndOffset,c=r.points,l=(c||{}).points,u=n?i:o;if(!(!u||!kr(u)||!l)){var f=0,d,h,p,v,y,m;if(p=l[0][0],v=l[0][1],n)d=l[1][0]-l[0][0],h=l[1][1]-l[0][1],y=a||0,m=this.markerStartAngle;else{var b=l.length;this.parsedStyle.isClosed?(d=l[b-1][0]-l[0][0],h=l[b-1][1]-l[0][1]):(p=l[b-1][0],v=l[b-1][1],d=l[b-2][0]-l[b-1][0],h=l[b-2][1]-l[b-1][1]),y=s||0,m=this.markerEndAngle}f=Math.atan2(h,d),u.setLocalEulerAngles(f*180/Math.PI+m),u.setLocalPosition(p+Math.cos(f)*y,v+Math.sin(f)*y)}},e.prototype.placeMarkerMid=function(n){var r=this.parsedStyle.points,i=(r||{}).points;if(this.markerMidList.forEach(function(l){l.remove()}),this.markerMidList=[],n&&kr(n)&&i)for(var o=1;o<(this.parsedStyle.isClosed?i.length:i.length-1);o++){var a=i[o][0],s=i[o][1],c=o===1?n:n.cloneNode(!0);this.markerMidList.push(c),this.appendChild(c),c.setLocalPosition(a,s)}},e}(Ts),YV=function(t){xt(e,t);function e(n){n===void 0&&(n={});var r=n.style,i=Ge(n,["style"]);return t.call(this,nt({type:qt.POLYLINE,style:St.enableCSSParsing?nt({points:"",miterLimit:"",isClosed:!1},r):nt({},r),initialParsedStyle:St.enableCSSParsing?null:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!1}},i))||this}return e.prototype.getTotalLength=function(){return FH(this)},e.prototype.getPointAtLength=function(n,r){return r===void 0&&(r=!1),this.getPoint(n/this.getTotalLength(),r)},e.prototype.getPoint=function(n,r){r===void 0&&(r=!1);var i=this.parsedStyle.points.points;if(this.parsedStyle.points.segments.length===0){var o=[],a=0,s,c,l=this.getTotalLength();i.forEach(function(y,m){i[m+1]&&(s=[0,0],s[0]=a/l,c=Dc(y[0],y[1],i[m+1][0],i[m+1][1]),a+=c,s[1]=a/l,o.push(s))}),this.parsedStyle.points.segments=o}var u=0,f=0;this.parsedStyle.points.segments.forEach(function(y,m){n>=y[0]&&n<=y[1]&&(u=(n-y[0])/(y[1]-y[0]),f=m)});var d=eo(i[f][0],i[f][1],i[f+1][0],i[f+1][1],u),h=d.x,p=d.y,v=Ft(Gt(),te(h,p,0),r?this.getWorldTransform():this.getLocalTransform());return new Vo(v[0],v[1])},e.prototype.getStartTangent=function(){var n=this.parsedStyle.points.points,r=[];return r.push([n[1][0],n[1][1]]),r.push([n[0][0],n[0][1]]),r},e.prototype.getEndTangent=function(){var n=this.parsedStyle.points.points,r=n.length-1,i=[];return i.push([n[r-1][0],n[r-1][1]]),i.push([n[r][0],n[r][1]]),i},e}(cR),HV=function(t){xt(e,t);function e(n){return n===void 0&&(n={}),t.call(this,nt({type:qt.RECT},n))||this}return e}(Ts),lR=function(t){xt(e,t);function e(n){n===void 0&&(n={});var r=n.style,i=Ge(n,["style"]);return t.call(this,nt({type:qt.TEXT,style:St.enableCSSParsing?nt({x:"",y:"",text:"",fontSize:"",fontFamily:"",fontStyle:"",fontWeight:"",fontVariant:"",textAlign:"",textBaseline:"",textTransform:"",fill:"black",letterSpacing:"",lineHeight:"",miterLimit:"",wordWrap:!1,wordWrapWidth:0,leading:0,dx:"",dy:""},r):nt({fill:"black"},r)},i))||this}return e.prototype.getComputedTextLength=function(){var n;return this.getGeometryBounds(),((n=this.parsedStyle.metrics)===null||n===void 0?void 0:n.maxLineWidth)||0},e.prototype.getLineBoundingRects=function(){var n;return this.getGeometryBounds(),((n=this.parsedStyle.metrics)===null||n===void 0?void 0:n.lineMetrics)||[]},e.prototype.isOverflowing=function(){return this.getGeometryBounds(),!!this.parsedStyle.isOverflowing},e}(Ts),UV=function(){function t(){this.registry={},this.define(qt.CIRCLE,BV),this.define(qt.ELLIPSE,FV),this.define(qt.RECT,HV),this.define(qt.IMAGE,GV),this.define(qt.LINE,zV),this.define(qt.GROUP,VE),this.define(qt.PATH,WV),this.define(qt.POLYGON,cR),this.define(qt.POLYLINE,YV),this.define(qt.TEXT,lR),this.define(qt.HTML,jV)}return t.prototype.define=function(e,n){this.registry[e]=n},t.prototype.get=function(e){return this.registry[e]},t}(),D0t={number:function(t){return new dr(t)},percent:function(t){return new dr(t,"%")},px:function(t){return new dr(t,"px")},em:function(t){return new dr(t,"em")},rem:function(t){return new dr(t,"rem")},deg:function(t){return new dr(t,"deg")},grad:function(t){return new dr(t,"grad")},rad:function(t){return new dr(t,"rad")},turn:function(t){return new dr(t,"turn")},s:function(t){return new dr(t,"s")},ms:function(t){return new dr(t,"ms")},registerProperty:function(t){var e=t.name,n=t.inherits,r=t.interpolable,i=t.initialValue,o=t.syntax;St.styleValueRegistry.registerMetadata({n:e,inh:n,int:r,d:i,syntax:o})},registerLayout:function(t,e){St.layoutRegistry.registerLayout(t,e)}},VV=function(t){xt(e,t);function e(){var n=t.call(this)||this;n.defaultView=null,n.ownerDocument=null,n.nodeName="document";try{n.timeline=new St.AnimationTimeline(n)}catch(i){}var r={};return IE.forEach(function(i){var o=i.n,a=i.inh,s=i.d;a&&s&&(r[o]=Yh(s)?s(qt.GROUP):s)}),n.documentElement=new VE({id:"g-root",style:r}),n.documentElement.ownerDocument=n,n.documentElement.parentNode=n,n.childNodes=[n.documentElement],n}return Object.defineProperty(e.prototype,"children",{get:function(){return this.childNodes},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"childElementCount",{get:function(){return this.childNodes.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"firstElementChild",{get:function(){return this.firstChild},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastElementChild",{get:function(){return this.lastChild},enumerable:!1,configurable:!0}),e.prototype.createElement=function(n,r){if(n==="svg")return this.documentElement;var i=this.defaultView.customElements.get(n);i||(console.warn("Unsupported tagName: ",n),i=n==="tspan"?lR:VE);var o=new i(r);return o.ownerDocument=this,o},e.prototype.createElementNS=function(n,r,i){return this.createElement(r,i)},e.prototype.cloneNode=function(n){throw new Error($r)},e.prototype.destroy=function(){try{this.documentElement.destroyChildren(),this.timeline.destroy()}catch(n){}},e.prototype.elementsFromBBox=function(n,r,i,o){var a=this.defaultView.context.rBushRoot,s=a.search({minX:n,minY:r,maxX:i,maxY:o}),c=[];return s.forEach(function(l){var u=l.displayObject,f=u.parsedStyle.pointerEvents,d=f===void 0?"auto":f,h=["auto","visiblepainted","visiblefill","visiblestroke","visible"].includes(d);(!h||h&&u.isVisible())&&!u.isCulled()&&u.isInteractive()&&c.push(u)}),c.sort(function(l,u){return u.sortable.renderOrder-l.sortable.renderOrder}),c},e.prototype.elementFromPointSync=function(n,r){var i=this.defaultView.canvas2Viewport({x:n,y:r}),o=i.x,a=i.y,s=this.defaultView.getConfig(),c=s.width,l=s.height;if(o<0||a<0||o>c||a>l)return null;var u=this.defaultView.viewport2Client({x:o,y:a}),f=u.x,d=u.y,h=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!0,position:{x:n,y:r,viewportX:o,viewportY:a,clientX:f,clientY:d},picked:[]}).picked;return h&&h[0]||this.documentElement},e.prototype.elementFromPoint=function(n,r){return ti(this,void 0,void 0,function(){var i,o,a,s,c,l,u,f,d,h;return Fi(this,function(p){switch(p.label){case 0:return i=this.defaultView.canvas2Viewport({x:n,y:r}),o=i.x,a=i.y,s=this.defaultView.getConfig(),c=s.width,l=s.height,o<0||a<0||o>c||a>l?[2,null]:(u=this.defaultView.viewport2Client({x:o,y:a}),f=u.x,d=u.y,[4,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!0,position:{x:n,y:r,viewportX:o,viewportY:a,clientX:f,clientY:d},picked:[]})]);case 1:return h=p.sent().picked,[2,h&&h[0]||this.documentElement]}})})},e.prototype.elementsFromPointSync=function(n,r){var i=this.defaultView.canvas2Viewport({x:n,y:r}),o=i.x,a=i.y,s=this.defaultView.getConfig(),c=s.width,l=s.height;if(o<0||a<0||o>c||a>l)return[];var u=this.defaultView.viewport2Client({x:o,y:a}),f=u.x,d=u.y,h=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!1,position:{x:n,y:r,viewportX:o,viewportY:a,clientX:f,clientY:d},picked:[]}).picked;return h[h.length-1]!==this.documentElement&&h.push(this.documentElement),h},e.prototype.elementsFromPoint=function(n,r){return ti(this,void 0,void 0,function(){var i,o,a,s,c,l,u,f,d,h;return Fi(this,function(p){switch(p.label){case 0:return i=this.defaultView.canvas2Viewport({x:n,y:r}),o=i.x,a=i.y,s=this.defaultView.getConfig(),c=s.width,l=s.height,o<0||a<0||o>c||a>l?[2,[]]:(u=this.defaultView.viewport2Client({x:o,y:a}),f=u.x,d=u.y,[4,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!1,position:{x:n,y:r,viewportX:o,viewportY:a,clientX:f,clientY:d},picked:[]})]);case 1:return h=p.sent().picked,h[h.length-1]!==this.documentElement&&h.push(this.documentElement),[2,h]}})})},e.prototype.appendChild=function(n,r){throw new Error(Wh)},e.prototype.insertBefore=function(n,r){throw new Error(Wh)},e.prototype.removeChild=function(n,r){throw new Error(Wh)},e.prototype.replaceChild=function(n,r,i){throw new Error(Wh)},e.prototype.append=function(){throw new Error(Wh)},e.prototype.prepend=function(){throw new Error(Wh)},e.prototype.getElementById=function(n){return this.documentElement.getElementById(n)},e.prototype.getElementsByName=function(n){return this.documentElement.getElementsByName(n)},e.prototype.getElementsByTagName=function(n){return this.documentElement.getElementsByTagName(n)},e.prototype.getElementsByClassName=function(n){return this.documentElement.getElementsByClassName(n)},e.prototype.querySelector=function(n){return this.documentElement.querySelector(n)},e.prototype.querySelectorAll=function(n){return this.documentElement.querySelectorAll(n)},e.prototype.find=function(n){return this.documentElement.find(n)},e.prototype.findAll=function(n){return this.documentElement.findAll(n)},e}(io),XV=function(){function t(e){this.strategies=e}return t.prototype.apply=function(e){var n=e.camera,r=e.renderingService,i=e.renderingContext,o=this.strategies;r.hooks.cull.tap(t.tag,function(a){if(a){var s=a.cullable;return o.length===0?s.visible=i.unculledEntities.indexOf(a.entity)>-1:s.visible=o.every(function(c){return c.isVisible(n,a)}),!a.isCulled()&&a.isVisible()?a:(a.dispatchEvent(new Xo(Kr.CULLED)),null)}return a}),r.hooks.afterRender.tap(t.tag,function(a){a.cullable.visibilityPlaneMask=-1})},t.tag="Culling",t}(),$V=function(){function t(){var e=this;this.autoPreventDefault=!1,this.rootPointerEvent=new HE(null),this.rootWheelEvent=new UE(null),this.onPointerMove=function(n){var r,i,o,a,s=(a=(o=e.context.renderingContext.root)===null||o===void 0?void 0:o.ownerDocument)===null||a===void 0?void 0:a.defaultView;if(!(s.supportsTouchEvents&&n.pointerType==="touch")){var c=e.normalizeToPointerEvent(n,s);try{for(var l=On(c),u=l.next();!u.done;u=l.next()){var f=u.value,d=e.bootstrapEvent(e.rootPointerEvent,f,s,n);e.context.eventService.mapEvent(d)}}catch(h){r={error:h}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}e.setCursor(e.context.eventService.cursor)}},this.onClick=function(n){var r,i,o,a,s=(a=(o=e.context.renderingContext.root)===null||o===void 0?void 0:o.ownerDocument)===null||a===void 0?void 0:a.defaultView,c=e.normalizeToPointerEvent(n,s);try{for(var l=On(c),u=l.next();!u.done;u=l.next()){var f=u.value,d=e.bootstrapEvent(e.rootPointerEvent,f,s,n);e.context.eventService.mapEvent(d)}}catch(h){r={error:h}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}e.setCursor(e.context.eventService.cursor)}}return t.prototype.apply=function(e){var n=this;this.context=e;var r=e.renderingService,i=this.context.renderingContext.root.ownerDocument.defaultView;this.context.eventService.setPickHandler(function(o){var a=n.context.renderingService.hooks.pickSync.call({position:o,picked:[],topmost:!0}).picked;return a[0]||null}),r.hooks.pointerWheel.tap(t.tag,function(o){var a=n.normalizeWheelEvent(o);n.context.eventService.mapEvent(a)}),r.hooks.pointerDown.tap(t.tag,function(o){var a,s;if(!(i.supportsTouchEvents&&o.pointerType==="touch")){var c=n.normalizeToPointerEvent(o,i);if(n.autoPreventDefault&&c[0].isNormalized){var l=o.cancelable||!("cancelable"in o);l&&o.preventDefault()}try{for(var u=On(c),f=u.next();!f.done;f=u.next()){var d=f.value,h=n.bootstrapEvent(n.rootPointerEvent,d,i,o);n.context.eventService.mapEvent(h)}}catch(p){a={error:p}}finally{try{f&&!f.done&&(s=u.return)&&s.call(u)}finally{if(a)throw a.error}}n.setCursor(n.context.eventService.cursor)}}),r.hooks.pointerUp.tap(t.tag,function(o){var a,s;if(!(i.supportsTouchEvents&&o.pointerType==="touch")){var c=n.context.contextService.getDomElement(),l=n.context.eventService.isNativeEventFromCanvas(c,o),u=l?"":"outside",f=n.normalizeToPointerEvent(o,i);try{for(var d=On(f),h=d.next();!h.done;h=d.next()){var p=h.value,v=n.bootstrapEvent(n.rootPointerEvent,p,i,o);v.type+=u,n.context.eventService.mapEvent(v)}}catch(y){a={error:y}}finally{try{h&&!h.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}n.setCursor(n.context.eventService.cursor)}}),r.hooks.pointerMove.tap(t.tag,this.onPointerMove),r.hooks.pointerOver.tap(t.tag,this.onPointerMove),r.hooks.pointerOut.tap(t.tag,this.onPointerMove),r.hooks.click.tap(t.tag,this.onClick),r.hooks.pointerCancel.tap(t.tag,function(o){var a,s,c=n.normalizeToPointerEvent(o,i);try{for(var l=On(c),u=l.next();!u.done;u=l.next()){var f=u.value,d=n.bootstrapEvent(n.rootPointerEvent,f,i,o);n.context.eventService.mapEvent(d)}}catch(h){a={error:h}}finally{try{u&&!u.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}n.setCursor(n.context.eventService.cursor)})},t.prototype.bootstrapEvent=function(e,n,r,i){e.view=r,e.originalEvent=null,e.nativeEvent=i,e.pointerId=n.pointerId,e.width=n.width,e.height=n.height,e.isPrimary=n.isPrimary,e.pointerType=n.pointerType,e.pressure=n.pressure,e.tangentialPressure=n.tangentialPressure,e.tiltX=n.tiltX,e.tiltY=n.tiltY,e.twist=n.twist,this.transferMouseData(e,n);var o=this.context.eventService.client2Viewport({x:n.clientX,y:n.clientY}),a=o.x,s=o.y;e.viewport.x=a,e.viewport.y=s;var c=this.context.eventService.viewport2Canvas(e.viewport),l=c.x,u=c.y;return e.canvas.x=l,e.canvas.y=u,e.global.copyFrom(e.canvas),e.offset.copyFrom(e.canvas),e.isTrusted=i.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=RU[e.type]||e.type),e},t.prototype.normalizeWheelEvent=function(e){var n=this.rootWheelEvent;this.transferMouseData(n,e),n.deltaMode=e.deltaMode,n.deltaX=e.deltaX,n.deltaY=e.deltaY,n.deltaZ=e.deltaZ;var r=this.context.eventService.client2Viewport({x:e.clientX,y:e.clientY}),i=r.x,o=r.y;n.viewport.x=i,n.viewport.y=o;var a=this.context.eventService.viewport2Canvas(n.viewport),s=a.x,c=a.y;return n.canvas.x=s,n.canvas.y=c,n.global.copyFrom(n.canvas),n.offset.copyFrom(n.canvas),n.nativeEvent=e,n.type=e.type,n},t.prototype.transferMouseData=function(e,n){e.isTrusted=n.isTrusted,e.srcElement=n.srcElement,e.timeStamp=jE.now(),e.type=n.type,e.altKey=n.altKey,e.metaKey=n.metaKey,e.shiftKey=n.shiftKey,e.ctrlKey=n.ctrlKey,e.button=n.button,e.buttons=n.buttons,e.client.x=n.clientX,e.client.y=n.clientY,e.movement.x=n.movementX,e.movement.y=n.movementY,e.page.x=n.pageX,e.page.y=n.pageY,e.screen.x=n.screenX,e.screen.y=n.screenY,e.relatedTarget=null},t.prototype.setCursor=function(e){this.context.contextService.applyCursorStyle(e||this.context.config.cursor||"default")},t.prototype.normalizeToPointerEvent=function(e,n){var r=[];if(n.isTouchEvent(e))for(var i=0;i<e.changedTouches.length;i++){var o=e.changedTouches[i];le(o.button)&&(o.button=0),le(o.buttons)&&(o.buttons=1),le(o.isPrimary)&&(o.isPrimary=e.touches.length===1&&e.type==="touchstart"),le(o.width)&&(o.width=o.radiusX||1),le(o.height)&&(o.height=o.radiusY||1),le(o.tiltX)&&(o.tiltX=0),le(o.tiltY)&&(o.tiltY=0),le(o.pointerType)&&(o.pointerType="touch"),le(o.pointerId)&&(o.pointerId=o.identifier||0),le(o.pressure)&&(o.pressure=o.force||.5),le(o.twist)&&(o.twist=0),le(o.tangentialPressure)&&(o.tangentialPressure=0),o.isNormalized=!0,o.type=e.type,r.push(o)}else if(n.isMouseEvent(e)){var a=e;le(a.isPrimary)&&(a.isPrimary=!0),le(a.width)&&(a.width=1),le(a.height)&&(a.height=1),le(a.tiltX)&&(a.tiltX=0),le(a.tiltY)&&(a.tiltY=0),le(a.pointerType)&&(a.pointerType="mouse"),le(a.pointerId)&&(a.pointerId=NU),le(a.pressure)&&(a.pressure=.5),le(a.twist)&&(a.twist=0),le(a.tangentialPressure)&&(a.tangentialPressure=0),a.isNormalized=!0,r.push(a)}else r.push(e);return r},t.tag="Event",t}(),qV=[qt.CIRCLE,qt.ELLIPSE,qt.IMAGE,qt.RECT,qt.LINE,qt.POLYLINE,qt.POLYGON,qt.TEXT,qt.PATH,qt.HTML],KV=function(){function t(){}return t.prototype.isVisible=function(e,n){var r,i,o=n.cullable;if(!o.enable)return!0;var a=n.getRenderBounds();if(Bi.isEmpty(a))return!1;var s=e.getFrustum(),c=(i=(r=n.parentNode)===null||r===void 0?void 0:r.cullable)===null||i===void 0?void 0:i.visibilityPlaneMask;return o.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(n,a,c||Lu.INDETERMINATE,s.planes),o.visible=o.visibilityPlaneMask!==Lu.OUTSIDE,o.visible},t.prototype.computeVisibilityWithPlaneMask=function(e,n,r,i){if(r===Lu.OUTSIDE||r===Lu.INSIDE)return r;for(var o=Lu.INSIDE,a=qV.indexOf(e.nodeName)>-1,s=0,c=i.length;s<c;++s){var l=1<<s;if(r&l&&!(a&&(s===4||s===5))){var u=i[s],f=u.normal,d=u.distance;if(Yt(f,n.getPositiveFarPoint(i[s]))+d<0)return Lu.OUTSIDE;Yt(f,n.getNegativeFarPoint(i[s]))+d<0&&(o|=l)}}return o},t}(),ZV=function(){function t(){this.toSync=new Set,this.isFirstTimeRendering=!0,this.syncing=!1,this.isFirstTimeRenderingFinished=!1}return t.prototype.apply=function(e){var n=this,r,i=e.renderingService,o=e.renderingContext,a=e.rBushRoot,s=o.root.ownerDocument.defaultView;this.rBush=a;var c=function(h){var p=h.target;p.renderable.dirty=!0,i.dirtify()},l=function(h){var p=h.detail.affectChildren,v=h.target;p&&v.forEach(function(m){n.toSync.add(m)});for(var y=v;y;)y.renderable&&n.toSync.add(y),y=y.parentElement;i.dirtify()},u=function(h){var p=h.target;St.enableSizeAttenuation&&St.styleValueRegistry.updateSizeAttenuation(p,s.getCamera().getZoom()),St.enableCSSParsing&&St.styleValueRegistry.recalc(p),St.sceneGraphService.dirtifyToRoot(p),i.dirtify()},f=function(h){var p=h.target,v=p.rBushNode;v.aabb&&n.rBush.remove(v.aabb),n.toSync.delete(p),St.sceneGraphService.dirtifyToRoot(p),i.dirtify()};i.hooks.init.tap(t.tag,function(){s.addEventListener(Kr.MOUNTED,u),s.addEventListener(Kr.UNMOUNTED,f),s.addEventListener(Kr.ATTR_MODIFIED,c),s.addEventListener(Kr.BOUNDS_CHANGED,l)}),i.hooks.destroy.tap(t.tag,function(){s.removeEventListener(Kr.MOUNTED,u),s.removeEventListener(Kr.UNMOUNTED,f),s.removeEventListener(Kr.ATTR_MODIFIED,c),s.removeEventListener(Kr.BOUNDS_CHANGED,l),n.toSync.clear()});var d=(r=St.globalThis.requestIdleCallback)!==null&&r!==void 0?r:GE.bind(St.globalThis);i.hooks.endFrame.tap(t.tag,function(){n.isFirstTimeRendering?(n.isFirstTimeRendering=!1,n.syncing=!0,d(function(){n.syncRTree(!0),n.isFirstTimeRenderingFinished=!0})):n.syncRTree()})},t.prototype.syncRTree=function(e){var n=this;if(e===void 0&&(e=!1),!(!e&&(this.syncing||this.toSync.size===0))){this.syncing=!0;var r=[];Array.from(this.toSync).filter(function(i){return i.isConnected}).forEach(function(i){var o=i.rBushNode;o&&o.aabb&&n.rBush.remove(o.aabb);var a=i.getRenderBounds();if(a){var s=i.renderable;e&&(s.dirtyRenderBounds||(s.dirtyRenderBounds=new Bi),s.dirtyRenderBounds.update(a.center,a.halfExtents));var c=j(a.getMin(),2),l=c[0],u=c[1],f=j(a.getMax(),2),d=f[0],h=f[1];o.aabb||(o.aabb={}),o.aabb.displayObject=i,o.aabb.minX=l,o.aabb.minY=u,o.aabb.maxX=d,o.aabb.maxY=h}o.aabb&&!isNaN(o.aabb.maxX)&&!isNaN(o.aabb.maxX)&&!isNaN(o.aabb.minX)&&!isNaN(o.aabb.minY)&&r.push(o.aabb)}),this.rBush.load(r),r.length=0,this.toSync.clear(),this.syncing=!1}},t.tag="Prepare",t}();function B0t(t){return!!t.document}var As;(function(t){t.READY="ready",t.BEFORE_RENDER="beforerender",t.RERENDER="rerender",t.AFTER_RENDER="afterrender",t.BEFORE_DESTROY="beforedestroy",t.AFTER_DESTROY="afterdestroy",t.RESIZE="resize",t.DIRTY_RECTANGLE="dirtyrectangle",t.RENDERER_CHANGED="rendererchanged"})(As||(As={}));var uR=500,JV=.1,QV=1e3,XE=new Xo(Kr.MOUNTED),$E=new Xo(Kr.UNMOUNTED),fR=new Xo(As.BEFORE_RENDER),tX=new Xo(As.RERENDER),dR=new Xo(As.AFTER_RENDER),F0t=function(t){xt(e,t);function e(n){var r=t.call(this)||this;r.Element=Ts,r.inited=!1,r.context={},r.document=new VV,r.document.defaultView=r,r.customElements=new UV;var i=n.container,o=n.canvas,a=n.offscreenCanvas,s=n.width,c=n.height,l=n.devicePixelRatio,u=n.renderer,f=n.background,d=n.cursor,h=n.document,p=n.requestAnimationFrame,v=n.cancelAnimationFrame,y=n.createImage,m=n.supportsPointerEvents,b=n.supportsTouchEvents,O=n.supportsCSSTransform,E=n.supportsMutipleCanvasesInOneContainer,w=n.useNativeClickEvent,_=n.alwaysTriggerPointerEventOnCanvas,S=n.isTouchEvent,M=n.isMouseEvent,T=n.dblClickSpeed;E||MU(i,r);var A=s,C=c,N=l;return o&&(N=l||FE&&window.devicePixelRatio||1,N=N>=1?Math.ceil(N):1,A=s||CU(o)||o.width/N,C=c||kU(o)||o.height/N),a&&(St.offscreenCanvas=a),r.devicePixelRatio=N,r.requestAnimationFrame=p!=null?p:GE.bind(St.globalThis),r.cancelAnimationFrame=v!=null?v:ZN.bind(St.globalThis),r.supportsTouchEvents=b!=null?b:"ontouchstart"in St.globalThis,r.supportsPointerEvents=m!=null?m:!!St.globalThis.PointerEvent,r.isTouchEvent=S!=null?S:function(k){return r.supportsTouchEvents&&k instanceof St.globalThis.TouchEvent},r.isMouseEvent=M!=null?M:function(k){return!St.globalThis.MouseEvent||k instanceof St.globalThis.MouseEvent&&(!r.supportsPointerEvents||!(k instanceof St.globalThis.PointerEvent))},r.dblClickSpeed=T!=null?T:200,r.initRenderingContext({container:i,canvas:o,width:A,height:C,renderer:u,offscreenCanvas:a,devicePixelRatio:N,cursor:d||"default",background:f||"transparent",createImage:y,document:h,supportsCSSTransform:O,useNativeClickEvent:w,alwaysTriggerPointerEventOnCanvas:_}),r.initDefaultCamera(A,C,u.clipSpaceNearZ),r.initRenderer(u,!0),r}return e.prototype.initRenderingContext=function(n){this.context.config=n,this.context.renderingContext={root:this.document.documentElement,renderListCurrentFrame:[],unculledEntities:[],renderReasons:new Set,force:!1,dirty:!1}},e.prototype.initDefaultCamera=function(n,r,i){var o=this,a=new St.CameraContribution;a.clipSpaceNearZ=i,a.setType(qr.EXPLORING,M0.DEFAULT).setPosition(n/2,r/2,uR).setFocalPoint(n/2,r/2,0).setOrthographic(n/-2,n/2,r/2,r/-2,JV,QV),a.canvas=this,a.eventEmitter.on(pN.UPDATED,function(){o.context.renderingContext.renderReasons.add(qh.CAMERA_CHANGED),St.enableSizeAttenuation&&o.getConfig().renderer.getConfig().enableSizeAttenuation&&o.updateSizeAttenuation()}),this.context.camera=a},e.prototype.updateSizeAttenuation=function(){var n=this.getCamera().getZoom();this.document.documentElement.forEach(function(r){St.styleValueRegistry.updateSizeAttenuation(r,n)})},e.prototype.getConfig=function(){return this.context.config},e.prototype.getRoot=function(){return this.document.documentElement},e.prototype.getCamera=function(){return this.context.camera},e.prototype.getContextService=function(){return this.context.contextService},e.prototype.getEventService=function(){return this.context.eventService},e.prototype.getRenderingService=function(){return this.context.renderingService},e.prototype.getRenderingContext=function(){return this.context.renderingContext},e.prototype.getStats=function(){return this.getRenderingService().getStats()},Object.defineProperty(e.prototype,"ready",{get:function(){var n=this;return this.readyPromise||(this.readyPromise=new Promise(function(r){n.resolveReadyPromise=function(){r(n)}}),this.inited&&this.resolveReadyPromise()),this.readyPromise},enumerable:!1,configurable:!0}),e.prototype.destroy=function(n,r){if(n===void 0&&(n=!0),r===void 0&&(r=!1),r||this.dispatchEvent(new Xo(As.BEFORE_DESTROY)),this.frameId){var i=this.getConfig().cancelAnimationFrame||cancelAnimationFrame;i(this.frameId)}var o=this.getRoot();this.unmountChildren(o),n&&(this.document.destroy(),this.getEventService().destroy()),this.getRenderingService().destroy(),this.getContextService().destroy(),n&&this.context.rBushRoot&&(this.context.rBushRoot.clear(),this.context.rBushRoot=null,this.context.renderingContext.root=null),r||this.dispatchEvent(new Xo(As.AFTER_DESTROY))},e.prototype.changeSize=function(n,r){this.resize(n,r)},e.prototype.resize=function(n,r){var i=this.context.config;i.width=n,i.height=r,this.getContextService().resize(n,r);var o=this.context.camera,a=o.getProjectionMode();o.setPosition(n/2,r/2,uR).setFocalPoint(n/2,r/2,0),a===Ra.ORTHOGRAPHIC?o.setOrthographic(n/-2,n/2,r/2,r/-2,o.getNear(),o.getFar()):o.setAspect(n/r),this.dispatchEvent(new Xo(As.RESIZE,{width:n,height:r}))},e.prototype.appendChild=function(n,r){return this.document.documentElement.appendChild(n,r)},e.prototype.insertBefore=function(n,r){return this.document.documentElement.insertBefore(n,r)},e.prototype.removeChild=function(n){return this.document.documentElement.removeChild(n)},e.prototype.removeChildren=function(){this.document.documentElement.removeChildren()},e.prototype.destroyChildren=function(){this.document.documentElement.destroyChildren()},e.prototype.render=function(n){var r=this;n&&(fR.detail=n,dR.detail=n),this.dispatchEvent(fR);var i=this.getRenderingService();i.render(this.getConfig(),n,function(){r.dispatchEvent(tX)}),this.dispatchEvent(dR)},e.prototype.run=function(){var n=this,r=function(i,o){n.render(o),n.frameId=n.requestAnimationFrame(r)};r()},e.prototype.initRenderer=function(n,r){var i=this;if(r===void 0&&(r=!1),!n)throw new Error("Renderer is required.");this.inited=!1,this.readyPromise=void 0,this.context.rBushRoot=new HY,this.context.renderingPlugins=[],this.context.renderingPlugins.push(new $V,new ZV,new XV([new KV])),this.loadRendererContainerModule(n),this.context.contextService=new this.context.ContextService(nt(nt({},St),this.context)),this.context.renderingService=new dV(St,this.context),this.context.eventService=new uV(St,this.context),this.context.eventService.init(),this.context.contextService.init?(this.context.contextService.init(),this.initRenderingService(n,r,!0)):this.context.contextService.initAsync().then(function(){i.initRenderingService(n,r)})},e.prototype.initRenderingService=function(n,r,i){var o=this;r===void 0&&(r=!1),i===void 0&&(i=!1),this.context.renderingService.init(function(){o.inited=!0,r?i?o.requestAnimationFrame(function(){o.dispatchEvent(new Xo(As.READY))}):o.dispatchEvent(new Xo(As.READY)):o.dispatchEvent(new Xo(As.RENDERER_CHANGED)),o.readyPromise&&o.resolveReadyPromise(),r||o.getRoot().forEach(function(a){var s=a.renderable;s&&(s.renderBoundsDirty=!0,s.boundsDirty=!0,s.dirty=!0)}),o.mountChildren(o.getRoot()),n.getConfig().enableAutoRendering&&o.run()})},e.prototype.loadRendererContainerModule=function(n){var r=this,i=n.getPlugins();i.forEach(function(o){o.context=r.context,o.init(St)})},e.prototype.setRenderer=function(n){var r=this.getConfig();if(r.renderer!==n){var i=r.renderer;r.renderer=n,this.destroy(!1,!0),ut([],j(i==null?void 0:i.getPlugins()),!1).reverse().forEach(function(o){o.destroy(St)}),this.initRenderer(n)}},e.prototype.setCursor=function(n){var r=this.getConfig();r.cursor=n,this.getContextService().applyCursorStyle(n)},e.prototype.unmountChildren=function(n){var r=this;n.childNodes.forEach(function(i){r.unmountChildren(i)}),this.inited&&(n.isMutationObserved?n.dispatchEvent($E):($E.target=n,this.dispatchEvent($E,!0)),n!==this.document.documentElement&&(n.ownerDocument=null),n.isConnected=!1),n.isCustomElement&&n.disconnectedCallback&&n.disconnectedCallback()},e.prototype.mountChildren=function(n){var r=this;this.inited?n.isConnected||(n.ownerDocument=this.document,n.isConnected=!0,n.isMutationObserved?n.dispatchEvent(XE):(XE.target=n,this.dispatchEvent(XE,!0))):console.warn("[g]: You are trying to call `canvas.appendChild` before canvas' initialization finished. You can either await `canvas.ready` or listen to `CanvasEvent.READY` manually.","appended child: ",n.nodeName),n.childNodes.forEach(function(i){r.mountChildren(i)}),n.isCustomElement&&n.connectedCallback&&n.connectedCallback()},e.prototype.client2Viewport=function(n){return this.getEventService().client2Viewport(n)},e.prototype.viewport2Client=function(n){return this.getEventService().viewport2Client(n)},e.prototype.viewport2Canvas=function(n){return this.getEventService().viewport2Canvas(n)},e.prototype.canvas2Viewport=function(n){return this.getEventService().canvas2Viewport(n)},e.prototype.getPointByClient=function(n,r){return this.client2Viewport({x:n,y:r})},e.prototype.getClientByPoint=function(n,r){return this.viewport2Client({x:n,y:r})},e}(tR),eX=function(){function t(e){this.canvasRendererPluginOptions=e,this.removedRBushNodeAABBs=[],this.renderQueue=[],this.restoreStack=[],this.clearFullScreenLastFrame=!1,this.clearFullScreen=!1,this.vpMatrix=ue(),this.dprMatrix=ue(),this.tmpMat4=ue(),this.vec3a=Gt(),this.vec3b=Gt(),this.vec3c=Gt(),this.vec3d=Gt()}return t.prototype.apply=function(e,n){var r=this;this.context=e;var i=e.config,o=e.camera,a=e.renderingService,s=e.renderingContext,c=e.rBushRoot,l=e.pathGeneratorFactory;this.rBush=c,this.pathGeneratorFactory=l;var u=e.contextService,f=s.root.ownerDocument.defaultView,d=function(v){var y=v.target,m=y.rBushNode;m.aabb&&r.removedRBushNodeAABBs.push(m.aabb)},h=function(v){var y=v.target,m=y.rBushNode;m.aabb&&r.removedRBushNodeAABBs.push(m.aabb)};a.hooks.init.tap(t.tag,function(){f.addEventListener(Kr.UNMOUNTED,d),f.addEventListener(Kr.CULLED,h);var v=u.getDPR(),y=i.width,m=i.height,b=u.getContext();r.clearRect(b,0,0,y*v,m*v,i.background)}),a.hooks.destroy.tap(t.tag,function(){f.removeEventListener(Kr.UNMOUNTED,d),f.removeEventListener(Kr.CULLED,h),r.renderQueue=[],r.removedRBushNodeAABBs=[],r.restoreStack=[]}),a.hooks.beginFrame.tap(t.tag,function(){var v,y=u.getContext(),m=u.getDPR(),b=i.width,O=i.height,E=r.canvasRendererPluginOptions,w=E.dirtyObjectNumThreshold,_=E.dirtyObjectRatioThreshold,S=a.getStats(),M=S.total,T=S.rendered,A=T/M;r.clearFullScreen=r.clearFullScreenLastFrame||!(!((v=f.context.renderingPlugins[1])===null||v===void 0)&&v.isFirstTimeRenderingFinished)||a.disableDirtyRectangleRendering()||T>w&&A>_,y&&(y.resetTransform?y.resetTransform():y.setTransform(1,0,0,1,0,0),r.clearFullScreen&&r.clearRect(y,0,0,b*m,O*m,i.background))});var p=function(v,y){v.isVisible()&&!v.isCulled()&&r.renderDisplayObject(v,y,r.context,r.restoreStack,n);var m=v.sortable.sorted||v.childNodes;m.forEach(function(b){p(b,y)})};a.hooks.endFrame.tap(t.tag,function(){if(s.root.childNodes.length===0){r.clearFullScreenLastFrame=!0;return}r.clearFullScreenLastFrame=!1;var v=u.getContext(),y=u.getDPR();if(ji(r.dprMatrix,[y,y,1]),Pn(r.vpMatrix,r.dprMatrix,o.getOrthoMatrix()),r.clearFullScreen)p(s.root,v);else{var m=r.safeMergeAABB.apply(r,ut([r.mergeDirtyAABBs(r.renderQueue)],j(r.removedRBushNodeAABBs.map(function(q){var J=q.minX,et=q.minY,dt=q.maxX,_t=q.maxY,Dt=new Bi;return Dt.setMinMax([J,et,0],[dt,_t,0]),Dt})),!1));if(r.removedRBushNodeAABBs=[],Bi.isEmpty(m)){r.renderQueue=[];return}var b=r.convertAABB2Rect(m),O=b.x,E=b.y,w=b.width,_=b.height,S=Ft(r.vec3a,[O,E,0],r.vpMatrix),M=Ft(r.vec3b,[O+w,E,0],r.vpMatrix),T=Ft(r.vec3c,[O,E+_,0],r.vpMatrix),A=Ft(r.vec3d,[O+w,E+_,0],r.vpMatrix),C=Math.min(S[0],M[0],A[0],T[0]),N=Math.min(S[1],M[1],A[1],T[1]),k=Math.max(S[0],M[0],A[0],T[0]),R=Math.max(S[1],M[1],A[1],T[1]),I=Math.floor(C),D=Math.floor(N),B=Math.ceil(k-C),F=Math.ceil(R-N);v.save(),r.clearRect(v,I,D,B,F,i.background),v.beginPath(),v.rect(I,D,B,F),v.clip(),v.setTransform(r.vpMatrix[0],r.vpMatrix[1],r.vpMatrix[4],r.vpMatrix[5],r.vpMatrix[12],r.vpMatrix[13]);var G=i.renderer.getConfig().enableDirtyRectangleRenderingDebug;G&&f.dispatchEvent(new Xo(As.DIRTY_RECTANGLE,{dirtyRect:{x:I,y:D,width:B,height:F}}));var X=r.searchDirtyObjects(m);X.sort(function(q,J){return q.sortable.renderOrder-J.sortable.renderOrder}).forEach(function(q){q&&q.isVisible()&&!q.isCulled()&&r.renderDisplayObject(q,v,r.context,r.restoreStack,n)}),v.restore(),r.renderQueue.forEach(function(q){r.saveDirtyAABB(q)}),r.renderQueue=[]}r.restoreStack.forEach(function(){v.restore()}),r.restoreStack=[]}),a.hooks.render.tap(t.tag,function(v){r.clearFullScreen||r.renderQueue.push(v)})},t.prototype.clearRect=function(e,n,r,i,o,a){e.clearRect(n,r,i,o),a&&(e.fillStyle=a,e.fillRect(n,r,i,o))},t.prototype.renderDisplayObject=function(e,n,r,i,o){var a=e.nodeName,s=i[i.length-1];s&&!(e.compareDocumentPosition(s)&io.DOCUMENT_POSITION_CONTAINS)&&(n.restore(),i.pop());var c=this.context.styleRendererFactory[a],l=this.pathGeneratorFactory[a],u=e.parsedStyle.clipPath;if(u){this.applyWorldTransform(n,u);var f=this.pathGeneratorFactory[u.nodeName];f&&(n.save(),i.push(e),n.beginPath(),f(n,u.parsedStyle),n.closePath(),n.clip())}c&&(this.applyWorldTransform(n,e),n.save(),this.applyAttributesToContext(n,e)),l&&(n.beginPath(),l(n,e.parsedStyle),e.nodeName!==qt.LINE&&e.nodeName!==qt.PATH&&e.nodeName!==qt.POLYLINE&&n.closePath()),c&&(c.render(n,e.parsedStyle,e,r,this,o),n.restore()),e.renderable.dirty=!1},t.prototype.convertAABB2Rect=function(e){var n=e.getMin(),r=e.getMax(),i=Math.floor(n[0]),o=Math.floor(n[1]),a=Math.ceil(r[0]),s=Math.ceil(r[1]),c=a-i,l=s-o;return{x:i,y:o,width:c,height:l}},t.prototype.mergeDirtyAABBs=function(e){var n=new Bi;return e.forEach(function(r){var i=r.getRenderBounds();n.add(i);var o=r.renderable.dirtyRenderBounds;o&&n.add(o)}),n},t.prototype.searchDirtyObjects=function(e){var n=j(e.getMin(),2),r=n[0],i=n[1],o=j(e.getMax(),2),a=o[0],s=o[1],c=this.rBush.search({minX:r,minY:i,maxX:a,maxY:s});return c.map(function(l){var u=l.displayObject;return u})},t.prototype.saveDirtyAABB=function(e){var n=e.renderable;n.dirtyRenderBounds||(n.dirtyRenderBounds=new Bi);var r=e.getRenderBounds();r&&n.dirtyRenderBounds.update(r.center,r.halfExtents)},t.prototype.applyAttributesToContext=function(e,n){var r=n.parsedStyle,i=r.stroke,o=r.fill,a=r.opacity,s=r.lineDash,c=r.lineDashOffset;s&&e.setLineDash(s),Lt(c)||(e.lineDashOffset=c),Lt(a)||(e.globalAlpha*=a),!Lt(i)&&!Array.isArray(i)&&!i.isNone&&(e.strokeStyle=n.attributes.stroke),!Lt(o)&&!Array.isArray(o)&&!o.isNone&&(e.fillStyle=n.attributes.fill)},t.prototype.applyWorldTransform=function(e,n,r){r?(ga(this.tmpMat4,n.getLocalTransform()),Pn(this.tmpMat4,r,this.tmpMat4),Pn(this.tmpMat4,this.vpMatrix,this.tmpMat4)):(ga(this.tmpMat4,n.getWorldTransform()),Pn(this.tmpMat4,this.vpMatrix,this.tmpMat4)),e.setTransform(this.tmpMat4[0],this.tmpMat4[1],this.tmpMat4[4],this.tmpMat4[5],this.tmpMat4[12],this.tmpMat4[13])},t.prototype.safeMergeAABB=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=new Bi;return e.forEach(function(i){r.add(i)}),r},t.tag="CanvasRenderer",t}(),Bu=function(){function t(e){this.imagePool=e}return t.prototype.render=function(e,n,r,i,o,a){var s=n.fill,c=n.fillRule,l=n.opacity,u=l===void 0?1:l,f=n.fillOpacity,d=f===void 0?1:f,h=n.stroke,p=n.strokeOpacity,v=p===void 0?1:p,y=n.lineWidth,m=y===void 0?1:y,b=n.lineCap,O=n.lineJoin,E=n.shadowType,w=n.shadowColor,_=n.shadowBlur,S=n.filter,M=n.miterLimit,T=s&&!s.isNone,A=h&&!h.isNone&&m>0,C=(s==null?void 0:s.alpha)===0,N=!!(S&&S.length),k=!Lt(w)&&_>0,R=r.nodeName,I=E==="inner",D=A&&k&&(R===qt.PATH||R===qt.LINE||R===qt.POLYLINE||C||I);T&&(e.globalAlpha=u*d,D||q1(r,e,k),vR(e,r,s,c,i,o,a,this.imagePool),D||this.clearShadowAndFilter(e,N,k)),A&&(e.globalAlpha=u*v,e.lineWidth=m,Lt(M)||(e.miterLimit=M),Lt(b)||(e.lineCap=b),Lt(O)||(e.lineJoin=O),D&&(I&&(e.globalCompositeOperation="source-atop"),q1(r,e,!0),I&&(qE(e,r,h,i,o,a,this.imagePool),e.globalCompositeOperation="source-over",this.clearShadowAndFilter(e,N,!0))),qE(e,r,h,i,o,a,this.imagePool))},t.prototype.clearShadowAndFilter=function(e,n,r){if(r&&(e.shadowColor="transparent",e.shadowBlur=0),n){var i=e.filter;!Lt(i)&&i.indexOf("drop-shadow")>-1&&(e.filter=i.replace(/drop-shadow\([^)]*\)/,"").trim()||"none")}},t}();function q1(t,e,n){var r=t.parsedStyle,i=r.filter,o=r.shadowColor,a=r.shadowBlur,s=r.shadowOffsetX,c=r.shadowOffsetY;i&&i.length&&(e.filter=t.style.filter),n&&(e.shadowColor=o.toString(),e.shadowBlur=a||0,e.shadowOffsetX=s||0,e.shadowOffsetY=c||0)}function hR(t,e,n,r,i,o,a){var s,c;if(t.image.nodeName==="rect"){var l=t.image.parsedStyle,u=l.width,f=l.height;c=r.contextService.getDPR();var d=r.config.offscreenCanvas;s=o.offscreenCanvasCreator.getOrCreateCanvas(d),s.width=u*c,s.height=f*c;var h=o.offscreenCanvasCreator.getOrCreateContext(d),p=[];t.image.forEach(function(y){i.renderDisplayObject(y,h,r,p,o)}),p.forEach(function(){h.restore()})}var v=a.getOrCreatePatternSync(t,n,s,c,e.getGeometryBounds().min,function(){e.renderable.dirty=!0,r.renderingService.dirtify()});return v}function pR(t,e,n,r){var i;if(t.type===Du.LinearGradient||t.type===Du.RadialGradient){var o=e.getGeometryBounds(),a=o&&o.halfExtents[0]*2||1,s=o&&o.halfExtents[1]*2||1,c=o&&o.min||[0,0];i=r.getOrCreateGradient(nt(nt({type:t.type},t.value),{min:c,width:a,height:s}),n)}return i}function vR(t,e,n,r,i,o,a,s,c){c===void 0&&(c=!1),Array.isArray(n)?n.forEach(function(l){t.fillStyle=pR(l,e,t,s),c||(r?t.fill(r):t.fill())}):(ME(n)&&(t.fillStyle=hR(n,e,t,i,o,a,s)),c||(r?t.fill(r):t.fill()))}function qE(t,e,n,r,i,o,a,s){s===void 0&&(s=!1),Array.isArray(n)?n.forEach(function(c){t.strokeStyle=pR(c,e,t,a),s||t.stroke()}):(ME(n)&&(t.strokeStyle=hR(n,e,t,r,i,o,a)),s||t.stroke())}var nX=function(){function t(e){this.imagePool=e}return t.prototype.render=function(e,n,r){var i=n.x,o=i===void 0?0:i,a=n.y,s=a===void 0?0:a,c=n.width,l=n.height,u=n.src,f=n.shadowColor,d=n.shadowBlur,h,p=c,v=l;if(Qe(u)?h=this.imagePool.getImageSync(u):(p||(p=u.width),v||(v=u.height),h=u),h){var y=!Lt(f)&&d>0;q1(r,e,y);try{e.drawImage(h,o,s,p,v)}catch(m){}}},t}(),rX=function(){function t(e){this.imagePool=e}return t.prototype.render=function(e,n,r,i,o,a){r.getBounds();var s=n,c=s.lineWidth,l=c===void 0?1:c,u=s.textAlign,f=u===void 0?"start":u,d=s.textBaseline,h=d===void 0?"alphabetic":d,p=s.lineJoin,v=p===void 0?"miter":p,y=s.miterLimit,m=y===void 0?10:y,b=s.letterSpacing,O=b===void 0?0:b,E=s.stroke,w=s.fill,_=s.fillRule,S=s.fillOpacity,M=S===void 0?1:S,T=s.strokeOpacity,A=T===void 0?1:T,C=s.opacity,N=C===void 0?1:C,k=s.metrics,R=s.x,I=R===void 0?0:R,D=s.y,B=D===void 0?0:D,F=s.dx,G=s.dy,X=s.shadowColor,q=s.shadowBlur,J=k.font,et=k.lines,dt=k.height,_t=k.lineHeight,Dt=k.lineMetrics;e.font=J,e.lineWidth=l,e.textAlign=f==="middle"?"center":f;var pt=h;!a.enableCSSParsing&&pt==="alphabetic"&&(pt="bottom"),e.lineJoin=v,Lt(m)||(e.miterLimit=m);var vt=B;h==="middle"?vt+=-dt/2-_t/2:h==="bottom"||h==="alphabetic"||h==="ideographic"?vt+=-dt:(h==="top"||h==="hanging")&&(vt+=-_t);var Qt=I+(F||0);vt+=G||0,et.length===1&&(pt==="bottom"?(pt="middle",vt-=.5*dt):pt==="top"&&(pt="middle",vt+=.5*dt)),e.textBaseline=pt;var Bt=!Lt(X)&&q>0;q1(r,e,Bt);for(var Rt=0;Rt<et.length;Rt++){var $t=l/2+Qt;vt+=_t,!Lt(E)&&!E.isNone&&l&&this.drawLetterSpacing(e,r,et[Rt],Dt[Rt],f,$t,vt,O,w,_,M,E,A,N,!0,i,o,a),Lt(w)||this.drawLetterSpacing(e,r,et[Rt],Dt[Rt],f,$t,vt,O,w,_,M,E,A,N,!1,i,o,a)}},t.prototype.drawLetterSpacing=function(e,n,r,i,o,a,s,c,l,u,f,d,h,p,v,y,m,b){if(c===0){v?this.strokeText(e,n,r,a,s,d,h,y,m,b):this.fillText(e,n,r,a,s,l,u,f,p,y,m,b);return}var O=e.textAlign;e.textAlign="left";var E=a;o==="center"||o==="middle"?E=a-i.width/2:(o==="right"||o==="end")&&(E=a-i.width);for(var w=Array.from(r),_=e.measureText(r).width,S=0,M=0;M<w.length;++M){var T=w[M];v?this.strokeText(e,n,T,E,s,d,h,y,m,b):this.fillText(e,n,T,E,s,l,u,f,p,y,m,b),S=e.measureText(r.substring(M+1)).width,E+=_-S+c,_=S}e.textAlign=O},t.prototype.fillText=function(e,n,r,i,o,a,s,c,l,u,f,d){vR(e,n,a,s,u,f,d,this.imagePool,!0);var h,p=!Lt(c)&&c!==1;p&&(h=e.globalAlpha,e.globalAlpha=c*l),e.fillText(r,i,o),p&&(e.globalAlpha=h)},t.prototype.strokeText=function(e,n,r,i,o,a,s,c,l,u){qE(e,n,a,c,l,u,this.imagePool,!0);var f,d=!Lt(s)&&s!==1;d&&(f=e.globalAlpha,e.globalAlpha=s),e.strokeText(r,i,o),d&&(e.globalAlpha=f)},t}(),j0t=function(t){xt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Bu),G0t=function(t){xt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Bu),z0t=function(t){xt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Bu),W0t=function(t){xt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Bu),Y0t=function(t){xt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Bu),H0t=function(t){xt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Bu),U0t=function(t){xt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Bu),iX=function(t){xt(e,t);function e(n){n===void 0&&(n={});var r=t.call(this)||this;return r.options=n,r.name="canvas-renderer",r}return e.prototype.init=function(){var n,r=nt({dirtyObjectNumThreshold:500,dirtyObjectRatioThreshold:.8},this.options),i=this.context.imagePool,o=new Bu(i),a=(n={},n[qt.CIRCLE]=o,n[qt.ELLIPSE]=o,n[qt.RECT]=o,n[qt.IMAGE]=new nX(i),n[qt.TEXT]=new rX(i),n[qt.LINE]=o,n[qt.POLYLINE]=o,n[qt.POLYGON]=o,n[qt.PATH]=o,n[qt.GROUP]=void 0,n[qt.HTML]=void 0,n[qt.MESH]=void 0,n);this.context.defaultStyleRendererFactory=a,this.context.styleRendererFactory=a,this.addRenderingPlugin(new eX(r))},e.prototype.destroy=function(){this.removeAllRenderingPlugins(),delete this.context.defaultStyleRendererFactory,delete this.context.styleRendererFactory},e}(UY),oX=function(){function t(){}return t.prototype.apply=function(e,n){var r=this,i=e.renderingService,o=e.renderingContext,a=e.config;this.context=e;var s=o.root.ownerDocument.defaultView,c=function(_){i.hooks.pointerMove.call(_)},l=function(_){i.hooks.pointerUp.call(_)},u=function(_){i.hooks.pointerDown.call(_)},f=function(_){i.hooks.pointerOver.call(_)},d=function(_){i.hooks.pointerOut.call(_)},h=function(_){i.hooks.pointerCancel.call(_)},p=function(_){i.hooks.pointerWheel.call(_)},v=function(_){i.hooks.click.call(_)},y=function(_){n.globalThis.document.addEventListener("pointermove",c,!0),_.addEventListener("pointerdown",u,!0),_.addEventListener("pointerleave",d,!0),_.addEventListener("pointerover",f,!0),n.globalThis.addEventListener("pointerup",l,!0),n.globalThis.addEventListener("pointercancel",h,!0)},m=function(_){_.addEventListener("touchstart",u,!0),_.addEventListener("touchend",l,!0),_.addEventListener("touchmove",c,!0),_.addEventListener("touchcancel",h,!0)},b=function(_){n.globalThis.document.addEventListener("mousemove",c,!0),_.addEventListener("mousedown",u,!0),_.addEventListener("mouseout",d,!0),_.addEventListener("mouseover",f,!0),n.globalThis.addEventListener("mouseup",l,!0)},O=function(_){n.globalThis.document.removeEventListener("pointermove",c,!0),_.removeEventListener("pointerdown",u,!0),_.removeEventListener("pointerleave",d,!0),_.removeEventListener("pointerover",f,!0),n.globalThis.removeEventListener("pointerup",l,!0)},E=function(_){_.removeEventListener("touchstart",u,!0),_.removeEventListener("touchend",l,!0),_.removeEventListener("touchmove",c,!0),_.removeEventListener("touchcancel",h,!0)},w=function(_){n.globalThis.document.removeEventListener("mousemove",c,!0),_.removeEventListener("mousedown",u,!0),_.removeEventListener("mouseout",d,!0),_.removeEventListener("mouseover",f,!0),n.globalThis.removeEventListener("mouseup",l,!0)};i.hooks.init.tap(t.tag,function(){var _=r.context.contextService.getDomElement();n.globalThis.navigator.msPointerEnabled?(_.style.msContentZooming="none",_.style.msTouchAction="none"):s.supportsPointerEvents&&(_.style.touchAction="none"),s.supportsPointerEvents?y(_):b(_),s.supportsTouchEvents&&m(_),a.useNativeClickEvent&&_.addEventListener("click",v,!0),_.addEventListener("wheel",p,{passive:!0,capture:!0})}),i.hooks.destroy.tap(t.tag,function(){var _=r.context.contextService.getDomElement();n.globalThis.navigator.msPointerEnabled?(_.style.msContentZooming="",_.style.msTouchAction=""):s.supportsPointerEvents&&(_.style.touchAction=""),s.supportsPointerEvents?O(_):w(_),s.supportsTouchEvents&&E(_),a.useNativeClickEvent&&_.removeEventListener("click",v,!0),_.removeEventListener("wheel",p,!0)})},t.tag="DOMInteraction",t}(),aX=function(t){xt(e,t);function e(){var n=t.apply(this,ut([],j(arguments),!1))||this;return n.name="dom-interaction",n}return e.prototype.init=function(){this.addRenderingPlugin(new oX)},e.prototype.destroy=function(){this.removeAllRenderingPlugins()},e}(Ml),sX="g-canvas-camera",cX=function(){function t(){this.displayObjectHTMLElementMap=new WeakMap}return t.prototype.joinTransformMatrix=function(e,n){return n===void 0&&(n=[0,0,0]),"matrix(".concat([e[0],e[1],e[4],e[5],e[12]+n[0],e[13]+n[1]].join(","),")")},t.prototype.apply=function(e,n){var r=this,i=e.camera,o=e.renderingContext,a=e.renderingService;this.context=e;var s=o.root.ownerDocument.defaultView,c=s.context.eventService.nativeHTMLMap,l=function(v,y){y.style.transform=r.joinTransformMatrix(v.getWorldTransform(),v.getOrigin())},u=function(v){var y=v.target;if(y.nodeName===kt.HTML){r.$camera||(r.$camera=r.createCamera(i));var m=r.getOrCreateEl(y);if(r.$camera.appendChild(m),n.enableCSSParsing){var b=y.ownerDocument.documentElement.attributes;Object.keys(b).forEach(function(O){m.style[O]=b[O]})}Object.keys(y.attributes).forEach(function(O){r.updateAttribute(O,y)}),l(y,m),c.set(m,y)}},f=function(v){var y=v.target;if(y.nodeName===kt.HTML&&r.$camera){var m=r.getOrCreateEl(y);m&&(m.remove(),c.delete(m))}},d=function(v){var y=v.target;if(y.nodeName===kt.HTML){var m=v.attrName;r.updateAttribute(m,y)}},h=function(v){var y=v.target;if(y.nodeName===kt.HTML){var m=r.getOrCreateEl(y);l(y,m)}},p=function(){if(r.$camera){var v=r.context.config,y=v.width,m=v.height;r.$camera.parentElement.style.width="".concat(y||0,"px"),r.$camera.parentElement.style.height="".concat(m||0,"px")}};a.hooks.init.tap(t.tag,function(){s.addEventListener(is.RESIZE,p),s.addEventListener(He.MOUNTED,u),s.addEventListener(He.UNMOUNTED,f),s.addEventListener(He.ATTR_MODIFIED,d),s.addEventListener(He.BOUNDS_CHANGED,h)}),a.hooks.endFrame.tap(t.tag,function(){r.$camera&&o.renderReasons.has(Nl.CAMERA_CHANGED)&&(r.$camera.style.transform=r.joinTransformMatrix(i.getOrthoMatrix()))}),a.hooks.destroy.tap(t.tag,function(){r.$camera&&r.$camera.remove(),s.removeEventListener(is.RESIZE,p),s.removeEventListener(He.MOUNTED,u),s.removeEventListener(He.UNMOUNTED,f),s.removeEventListener(He.ATTR_MODIFIED,d),s.removeEventListener(He.BOUNDS_CHANGED,h)})},t.prototype.createCamera=function(e){var n=this.context.config,r=n.document,i=n.width,o=n.height,a=this.context.contextService.getDomElement(),s=a.parentNode;if(s){var c=sX,l=s.querySelector("#"+c);if(!l){var u=(r||document).createElement("div");u.style.overflow="hidden",u.style.pointerEvents="none",u.style.position="absolute",u.style.left="0px",u.style.top="0px",u.style.width="".concat(i||0,"px"),u.style.height="".concat(o||0,"px");var f=(r||document).createElement("div");l=f,f.id=c,f.style.position="absolute",f.style.left="".concat(a.offsetLeft||0,"px"),f.style.top="".concat(a.offsetTop||0,"px"),f.style.transformOrigin="left top",f.style.transform=this.joinTransformMatrix(e.getOrthoMatrix()),f.style.pointerEvents="none",f.style.width="100%",f.style.height="100%",u.appendChild(f),s.appendChild(u)}return l}return null},t.prototype.getOrCreateEl=function(e){var n=this.context.config.document,r=this.displayObjectHTMLElementMap.get(e);return r||(r=(n||document).createElement("div"),e.parsedStyle.$el=r,this.displayObjectHTMLElementMap.set(e,r),e.id&&(r.id=e.id),e.name&&r.setAttribute("name",e.name),e.className&&(r.className=e.className),r.style.position="absolute",r.style["will-change"]="transform",r.style.transform=this.joinTransformMatrix(e.getWorldTransform(),e.getOrigin())),r},t.prototype.updateAttribute=function(e,n){var r=this.getOrCreateEl(n);switch(e){case"innerHTML":var i=n.parsedStyle.innerHTML;Qe(i)?r.innerHTML=i:(r.innerHTML="",r.appendChild(i));break;case"x":r.style.left="".concat(n.parsedStyle.x,"px");break;case"y":r.style.top="".concat(n.parsedStyle.y,"px");break;case"transformOrigin":var o=n.parsedStyle.transformOrigin;r.style["transform-origin"]="".concat(o[0].buildCSSText(null,null,"")," ").concat(o[1].buildCSSText(null,null,""));break;case"width":if(this.context.enableCSSParsing){var a=n.computedStyleMap().get("width");r.style.width=a.toString()}else{var a=n.parsedStyle.width;r.style.width=Je(a)?"".concat(a,"px"):a.toString()}break;case"height":if(this.context.enableCSSParsing){var s=n.computedStyleMap().get("height");r.style.height=s.toString()}else{var s=n.parsedStyle.height;r.style.height=Je(s)?"".concat(s,"px"):s.toString()}break;case"zIndex":var c=n.parsedStyle.zIndex;r.style["z-index"]="".concat(c);break;case"visibility":var l=n.parsedStyle.visibility;r.style.visibility=l;break;case"pointerEvents":var u=n.parsedStyle.pointerEvents,f=u===void 0?"auto":u;r.style.pointerEvents=f;break;case"opacity":var d=n.parsedStyle.opacity;r.style.opacity="".concat(d);break;case"fill":var h=n.parsedStyle.fill,p="";kf(h)?h.isNone?p="transparent":p=n.getAttribute("fill"):Array.isArray(h)?p=n.getAttribute("fill"):Vv(h),r.style.background=p;break;case"stroke":var v=n.parsedStyle.stroke,y="";kf(v)?v.isNone?y="transparent":y=n.getAttribute("stroke"):Array.isArray(v)?y=n.getAttribute("stroke"):Vv(v),r.style["border-color"]=y,r.style["border-style"]="solid";break;case"lineWidth":var m=n.parsedStyle.lineWidth;r.style["border-width"]="".concat(m||0,"px");break;case"lineDash":r.style["border-style"]="dashed";break;case"filter":var b=n.style.filter;r.style.filter=b;break;default:!Lt(n.style[e])&&n.style[e]!==""&&(r.style[e]=n.style[e])}},t.tag="HTMLRendering",t}(),lX=function(t){xt(e,t);function e(){var n=t.apply(this,ut([],j(arguments),!1))||this;return n.name="html-renderer",n}return e.prototype.init=function(){this.addRenderingPlugin(new cX)},e.prototype.destroy=function(){this.removeAllRenderingPlugins()},e}(Ml),uX=function(){function t(e){this.canvasConfig=e,this.imageCache={},this.gradientCache={},this.patternCache={}}return t.prototype.getImageSync=function(e,n){return this.imageCache[e]?n&&n(this.imageCache[e]):this.getOrCreateImage(e).then(function(r){n&&n(r)}),this.imageCache[e]},t.prototype.getOrCreateImage=function(e){var n=this;if(this.imageCache[e])return Promise.resolve(this.imageCache[e]);var r=this.canvasConfig.createImage;return new Promise(function(i,o){var a;r?a=r(e):Oh&&(a=new window.Image),a&&(a.onload=function(){n.imageCache[e]=a,i(a)},a.onerror=function(s){o(s)},a.crossOrigin="Anonymous",a.src=e)})},t.prototype.getOrCreatePatternSync=function(e,n,r,i,o,a){var s=this.generatePatternKey(e);if(s&&this.patternCache[s])return this.patternCache[s];var c=e.image,l=e.repetition,u=e.transform,f,d=!1;Qe(c)?f=this.getImageSync(c,a):r?(f=r,d=!0):f=c;var h=f&&n.createPattern(f,l);if(h){var p=void 0;u?p=n1(If(u),new rt({})):p=po(ue()),d&&dy(p,p,[1/i,1/i,1]),h.setTransform({a:p[0],b:p[1],c:p[4],d:p[5],e:p[12]+o[0],f:p[13]+o[1]})}return s&&h&&(this.patternCache[s]=h),h},t.prototype.getOrCreateGradient=function(e,n){var r=this.generateGradientKey(e),i=e.type,o=e.steps,a=e.min,s=e.width,c=e.height,l=e.angle,u=e.cx,f=e.cy,d=e.size;if(this.gradientCache[r])return this.gradientCache[r];var h=null;if(i===jc.LinearGradient){var p=L2(a,s,c,l),v=p.x1,y=p.y1,m=p.x2,b=p.y2;h=n.createLinearGradient(v,y,m,b)}else if(i===jc.RadialGradient){var O=vh(a,s,c,u,f,d),E=O.x,w=O.y,_=O.r;h=n.createRadialGradient(E,w,0,E,w,_)}return h&&(o.forEach(function(S){var M=S.offset,T=S.color;M.unit===Vt.kPercentage&&(h==null||h.addColorStop(M.value/100,T.toString()))}),this.gradientCache[r]=h),this.gradientCache[r]},t.prototype.generateGradientKey=function(e){var n=e.type,r=e.min,i=e.width,o=e.height,a=e.steps,s=e.angle,c=e.cx,l=e.cy,u=e.size;return"gradient-".concat(n,"-").concat((s==null?void 0:s.toString())||0,"-").concat((c==null?void 0:c.toString())||0,"-").concat((l==null?void 0:l.toString())||0,"-").concat((u==null?void 0:u.toString())||0,"-").concat(r[0],"-").concat(r[1],"-").concat(i,"-").concat(o,"-").concat(a.map(function(f){var d=f.offset,h=f.color;return"".concat(d).concat(h)}).join("-"))},t.prototype.generatePatternKey=function(e){var n=e.image,r=e.repetition;if(Qe(n))return"pattern-".concat(n,"-").concat(r);if(n.nodeName==="rect")return"pattern-".concat(n.entity,"-").concat(r)},t}(),fX=function(){function t(){}return t.prototype.apply=function(e){var n=e.renderingService,r=e.renderingContext,i=e.imagePool,o=r.root.ownerDocument.defaultView,a=function(l,u,f){var d=l.parsedStyle,h=d.width,p=d.height;h&&!p?l.setAttribute("height",f/u*h):!h&&p&&l.setAttribute("width",u/f*p)},s=function(l){var u=l.target,f=u.nodeName,d=u.attributes;if(f===kt.IMAGE){var h=d.src,p=d.keepAspectRatio;Qe(h)&&i.getImageSync(h,function(v){var y=v.width,m=v.height;p&&a(u,y,m),u.renderable.dirty=!0,n.dirtify()})}},c=function(l){var u=l.target,f=l.attrName,d=l.newValue;u.nodeName===kt.IMAGE&&f==="src"&&Qe(d)&&i.getOrCreateImage(d).then(function(h){var p=h.width,v=h.height;u.attributes.keepAspectRatio&&a(u,p,v),u.renderable.dirty=!0,n.dirtify()})};n.hooks.init.tap(t.tag,function(){o.addEventListener(He.MOUNTED,s),o.addEventListener(He.ATTR_MODIFIED,c)}),n.hooks.destroy.tap(t.tag,function(){o.removeEventListener(He.MOUNTED,s),o.removeEventListener(He.ATTR_MODIFIED,c)})},t.tag="LoadImage",t}(),dX=function(t){xt(e,t);function e(){var n=t.apply(this,ut([],j(arguments),!1))||this;return n.name="image-loader",n}return e.prototype.init=function(){this.context.imagePool=new uX(this.context.config),this.addRenderingPlugin(new fX)},e.prototype.destroy=function(){this.removeAllRenderingPlugins()},e}(Ml),hX=function(){function t(e){this.renderingContext=e.renderingContext,this.canvasConfig=e.config}return t.prototype.init=function(){var e=this.canvasConfig,n=e.container,r=e.canvas;if(r)this.$canvas=r,n&&r.parentElement!==n&&n.appendChild(r),this.$container=r.parentElement,this.canvasConfig.container=this.$container;else if(n&&(this.$container=Qe(n)?document.getElementById(n):n,this.$container)){var i=document.createElement("canvas");this.$container.appendChild(i),this.$container.style.position||(this.$container.style.position="relative"),this.$canvas=i}this.context=this.$canvas.getContext("2d"),this.resize(this.canvasConfig.width,this.canvasConfig.height)},t.prototype.getContext=function(){return this.context},t.prototype.getDomElement=function(){return this.$canvas},t.prototype.getDPR=function(){return this.dpr},t.prototype.getBoundingClientRect=function(){if(this.$canvas.getBoundingClientRect)return this.$canvas.getBoundingClientRect()},t.prototype.destroy=function(){this.$container&&this.$canvas&&this.$canvas.parentNode&&this.$container.removeChild(this.$canvas)},t.prototype.resize=function(e,n){var r=this.canvasConfig.devicePixelRatio,i=r||B1&&window.devicePixelRatio||1;i=i>=1?Math.ceil(i):1,this.dpr=i,this.$canvas&&(this.$canvas.width=this.dpr*e,this.$canvas.height=this.dpr*n,Yz(this.$canvas,e,n)),this.renderingContext.renderReasons.add(zf.CAMERA_CHANGED)},t.prototype.applyCursorStyle=function(e){this.$container&&this.$container.style&&(this.$container.style.cursor=e)},t.prototype.toDataURL=function(){return ti(this,arguments,void 0,function(e){var n,r;return e===void 0&&(e={}),Fi(this,function(i){return n=e.type,r=e.encoderOptions,[2,this.context.canvas.toDataURL(n,r)]})})},t}(),pX=function(t){xt(e,t);function e(){var n=t.apply(this,ut([],j(arguments),!1))||this;return n.name="canvas-context-register",n}return e.prototype.init=function(){this.context.ContextService=hX},e.prototype.destroy=function(){delete this.context.ContextService},e}(nG),gR=function(t){xt(e,t);function e(n){var r=t.call(this,n)||this;return r.registerPlugin(new pX),r.registerPlugin(new dX),r.registerPlugin(new wY),r.registerPlugin(new iX),r.registerPlugin(new aX),r.registerPlugin(new WY),r.registerPlugin(new lX),r}return e}(rG),vX=function(){function t(e){this.dragndropPluginOptions=e}return t.prototype.apply=function(e){var n=this,r=e.renderingService,i=e.renderingContext,o=i.root.ownerDocument,a=o.defaultView,s=function(c){var l=c.target,u=l===o,f=u&&n.dragndropPluginOptions.isDocumentDraggable?o:l.closest&&l.closest("[draggable=true]");if(f){var d=!1,h=c.timeStamp,p=[c.clientX,c.clientY],v=null,y=[c.clientX,c.clientY],m=function(O){return ti(n,void 0,void 0,function(){var E,w,_,S,M,T;return Fi(this,function(A){switch(A.label){case 0:if(!d){if(E=O.timeStamp-h,w=di([O.clientX,O.clientY],p),E<=this.dragndropPluginOptions.dragstartTimeThreshold||w<=this.dragndropPluginOptions.dragstartDistanceThreshold)return[2];O.type="dragstart",f.dispatchEvent(O),d=!0}return O.type="drag",O.dx=O.clientX-y[0],O.dy=O.clientY-y[1],f.dispatchEvent(O),y=[O.clientX,O.clientY],u?[3,2]:(_=this.dragndropPluginOptions.overlap==="pointer"?[O.canvasX,O.canvasY]:l.getBounds().center,[4,o.elementsFromPoint(_[0],_[1])]);case 1:S=A.sent(),M=S[S.indexOf(l)+1],T=(M==null?void 0:M.closest("[droppable=true]"))||(this.dragndropPluginOptions.isDocumentDroppable?o:null),v!==T&&(v&&(O.type="dragleave",O.target=v,v.dispatchEvent(O)),T&&(O.type="dragenter",O.target=T,T.dispatchEvent(O)),v=T,v&&(O.type="dragover",O.target=v,v.dispatchEvent(O))),A.label=2;case 2:return[2]}})})};a.addEventListener("pointermove",m);var b=function(O){if(d){O.detail={preventClick:!0};var E=O.clone();v&&(E.type="drop",E.target=v,v.dispatchEvent(E)),E.type="dragend",f.dispatchEvent(E),d=!1}a.removeEventListener("pointermove",m)};l.addEventListener("pointerup",b,{once:!0}),l.addEventListener("pointerupoutside",b,{once:!0})}};r.hooks.init.tap(t.tag,function(){a.addEventListener("pointerdown",s)}),r.hooks.destroy.tap(t.tag,function(){a.removeEventListener("pointerdown",s)})},t.tag="Dragndrop",t}(),yR=function(t){xt(e,t);function e(n){n===void 0&&(n={});var r=t.call(this)||this;return r.options=n,r.name="dragndrop",r}return e.prototype.init=function(){this.addRenderingPlugin(new vX(nt({overlap:"pointer",isDocumentDraggable:!1,isDocumentDroppable:!1,dragstartDistanceThreshold:0,dragstartTimeThreshold:0},this.options)))},e.prototype.destroy=function(){this.removeAllRenderingPlugins()},e.prototype.setOptions=function(n){Object.assign(this.plugins[0].dragndropPluginOptions,n)},e}(Ml);function gX(t,e,n){var r;return function(){var i=this,o=arguments,a=function(){r=null,n||t.apply(i,o)},s=n&&!r;clearTimeout(r),r=setTimeout(a,e),s&&t.apply(i,o)}}var mR=gX,yX=function(t){return typeof t=="object"&&t!==null},KE=yX,mX=function(t){if(!KE(t)||!ra(t,"Object"))return!1;if(Object.getPrototypeOf(t)===null)return!0;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},Bl=mX,xX=5;function bX(t,e){if(Object.hasOwn)return Object.hasOwn(t,e);if(t==null)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(t),e)}function xR(t,e,n,r){n=n||0,r=r||xX;for(var i in e)if(bX(e,i)){var o=e[i];o!==null&&Bl(o)?(Bl(t[i])||(t[i]={}),n<r?xR(t[i],o,n+1,r):t[i]=e[i]):ri(o)?(t[i]=[],t[i]=t[i].concat(o)):o!==void 0&&(t[i]=o)}}var _X=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r+=1)xR(t,e[r]);return t},bt=_X;class wX extends Map{constructor(e,n=wR){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(ZE(this,e))}has(e){return super.has(ZE(this,e))}set(e,n){return super.set(bR(this,e),n)}delete(e){return super.delete(_R(this,e))}}class V0t extends null{constructor(e,n=wR){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const r of e)this.add(r)}has(e){return super.has(ZE(this,e))}add(e){return super.add(bR(this,e))}delete(e){return super.delete(_R(this,e))}}function ZE({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function bR({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function _R({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function wR(t){return t!==null&&typeof t=="object"?t.valueOf():t}function k0(t){return t}function Nr(t,...e){return Kh(t,k0,k0,e)}function K1(t,...e){return Kh(t,Array.from,k0,e)}function OR(t,e){for(let n=1,r=e.length;n<r;++n)t=t.flatMap(i=>i.pop().map(([o,a])=>[...i,o,a]));return t}function X0t(t,...e){return OR(K1(t,...e),e)}function $0t(t,e,...n){return OR(Z1(t,e,...n),n)}function JE(t,e,...n){return Kh(t,k0,e,n)}function Z1(t,e,...n){return Kh(t,Array.from,e,n)}function q0t(t,...e){return Kh(t,identity,ER,e)}function K0t(t,...e){return Kh(t,Array.from,ER,e)}function ER(t){if(t.length!==1)throw new Error("duplicate key");return t[0]}function Kh(t,e,n,r){return function i(o,a){if(a>=r.length)return n(o);const s=new wX,c=r[a++];let l=-1;for(const u of o){const f=c(u,++l,o),d=s.get(f);d?d.push(u):s.set(f,[u])}for(const[u,f]of s)s.set(u,i(f,a));return e(s)}(t,0)}var SR=function(t){return Lt(t)?"":t.toString()},OX=function(t){var e=SR(t);return e.charAt(0).toLowerCase()+e.substring(1)},MR=OX,EX=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(u){try{l(r.next(u))}catch(f){a(f)}}function c(u){try{l(r.throw(u))}catch(f){a(f)}}function l(u){u.done?o(u.value):i(u.value).then(s,c)}l((r=r.apply(t,e||[])).next())})};function Kf(t){return t}function QE(t){return t.reduce((e,n)=>(r,...i)=>n(e(r,...i),...i),Kf)}function SX(t){return t.reduce((e,n)=>r=>EX(this,void 0,void 0,function*(){const i=yield e(r);return n(i)}),Kf)}function tS(t){return t.replace(/( |^)[a-z]/g,e=>e.toUpperCase())}function Zh(t=""){throw new Error(t)}function eS(t,e){const{attributes:n}=e,r=new Set(["id","className"]);for(const[i,o]of Object.entries(n))r.has(i)||t.attr(i,o)}function mr(t){return t!=null&&!Number.isNaN(t)}function Z0t(t,e){return t+(e-t)*Math.random()}function MX(t){const e=new Map;return n=>{if(e.has(n))return e.get(n);const r=t(n);return e.set(n,r),r}}function PX(t,e){const{transform:n}=t.style,i=(o=>o==="none"||o===void 0)(n)?"":n;t.style.transform=`${i} ${e}`.trimStart()}function Xt(t,e){return PR(t,e)||{}}function PR(t,e){const n=Object.entries(t||{}).filter(([r])=>r.startsWith(e)).map(([r,i])=>[MR(r.replace(e,"").trim()),i]).filter(([r])=>!!r);return n.length===0?null:Object.fromEntries(n)}function J0t(t,e){return Object.fromEntries(Object.entries(t).map(([n,r])=>[`${e}${upperFirst(n)}`,r]))}function TX(t,e){return Object.fromEntries(Object.entries(t).filter(([n])=>e.find(r=>n.startsWith(r))))}function nS(t,...e){return Object.fromEntries(Object.entries(t).filter(([n])=>e.every(r=>!n.startsWith(r))))}function TR(t,e){if(t===void 0)return null;if(typeof t=="number")return t;const n=+t.replace("%","");return Number.isNaN(n)?null:n/100*e}function Jh(t){return typeof t=="object"&&!(t instanceof Date)&&t!==null&&!Array.isArray(t)}function Fl(t){return t===null||t===!1}function AR(t,e,n=5,r=0){if(!(r>=n)){for(const i of Object.keys(e)){const o=e[i];!Bl(o)||!Bl(t[i])?t[i]=o:AR(t[i],o,n,r+1)}return t}}function Ie(t){return new Mi([t],null,t,t.ownerDocument)}class Mi{constructor(e=null,n=null,r=null,i=null,o=[null,null,null,null,null],a=[],s=[]){this._elements=Array.from(e),this._data=n,this._parent=r,this._document=i,this._enter=o[0],this._update=o[1],this._exit=o[2],this._merge=o[3],this._split=o[4],this._transitions=a,this._facetElements=s}selectAll(e){const n=typeof e=="string"?this._parent.querySelectorAll(e):e;return new Mi(n,null,this._elements[0],this._document)}selectFacetAll(e){const n=typeof e=="string"?this._parent.querySelectorAll(e):e;return new Mi(this._elements,null,this._parent,this._document,void 0,void 0,n)}select(e){const n=typeof e=="string"?this._parent.querySelectorAll(e)[0]||null:e;return new Mi([n],null,n,this._document)}append(e){const n=typeof e=="function"?e:()=>this.createElement(e),r=[];if(this._data!==null){for(let i=0;i<this._data.length;i++){const o=this._data[i],[a,s]=Array.isArray(o)?o:[o,null],c=n(a,i);c.__data__=a,s!==null&&(c.__fromElements__=s),this._parent.appendChild(c),r.push(c)}return new Mi(r,null,this._parent,this._document)}else{for(let i=0;i<this._elements.length;i++){const o=this._elements[i],a=o.__data__,s=n(a,i);o.appendChild(s),r.push(s)}return new Mi(r,null,r[0],this._document)}}maybeAppend(e,n,r){const i=this._elements[0],o=i.getElementById(e);if(o)return new Mi([o],null,this._parent,this._document);const a=typeof n=="string"?this.createElement(n):n();return a.id=e,r&&(a.className=r),i.appendChild(a),new Mi([a],null,this._parent,this._document)}data(e,n=i=>i,r=()=>null){const i=[],o=[],a=new Set(this._elements),s=[],c=new Set,l=new Map(this._elements.map((h,p)=>[n(h.__data__,p),h])),u=new Map(this._facetElements.map((h,p)=>[n(h.__data__,p),h])),f=Nr(this._elements,h=>r(h.__data__));for(let h=0;h<e.length;h++){const p=e[h],v=n(p,h),y=r(p,h);if(l.has(v)){const m=l.get(v);m.__data__=p,m.__facet__=!1,o.push(m),a.delete(m),l.delete(v)}else if(u.has(v)){const m=u.get(v);m.__data__=p,m.__facet__=!0,o.push(m),u.delete(v)}else if(f.has(v)){const m=f.get(v);s.push([p,m]);for(const b of m)a.delete(b);f.delete(v)}else if(l.has(y)){const m=l.get(y);m.__toData__?m.__toData__.push(p):m.__toData__=[p],c.add(m),a.delete(m)}else i.push(p)}const d=[new Mi([],i,this._parent,this._document),new Mi(o,null,this._parent,this._document),new Mi(a,null,this._parent,this._document),new Mi([],s,this._parent,this._document),new Mi(c,null,this._parent,this._document)];return new Mi(this._elements,null,this._parent,this._document,d)}merge(e){const n=[...this._elements,...e._elements],r=[...this._transitions,...e._transitions];return new Mi(n,null,this._parent,this._document,void 0,r)}createElement(e){if(this._document)return this._document.createElement(e,{});const n=Mi.registry[e];return n?new n:Zh(`Unknown node type: ${e}`)}join(e=a=>a,n=a=>a,r=a=>a.remove(),i=a=>a,o=a=>a.remove()){const a=e(this._enter),s=n(this._update),c=r(this._exit),l=i(this._merge),u=o(this._split);return s.merge(a).merge(c).merge(l).merge(u)}remove(){for(let e=0;e<this._elements.length;e++){const n=this._transitions[e];if(n){const r=Array.isArray(n)?n:[n];Promise.all(r.map(i=>i.finished)).then(()=>{this._elements[e].remove()})}else this._elements[e].remove()}return new Mi([],null,this._parent,this._document,void 0,this._transitions)}each(e){for(let n=0;n<this._elements.length;n++){const r=this._elements[n],i=r.__data__;e(i,n,r)}return this}attr(e,n){const r=typeof n!="function"?()=>n:n;return this.each(function(i,o,a){n!==void 0&&(a[e]=r(i,o,a))})}style(e,n){const r=typeof n!="function"?()=>n:n;return this.each(function(i,o,a){n!==void 0&&(a.style[e]=r(i,o,a))})}transition(e){const n=typeof e!="function"?()=>e:e,{_transitions:r}=this;return this.each(function(i,o,a){r[o]=n(i,o,a)})}on(e,n){return this.each(function(r,i,o){o.addEventListener(e,n)}),this}call(e,...n){return e(this,...n),this}node(){return this._elements[0]}nodes(){return this._elements}transitions(){return this._transitions}parent(){return this._parent}}Mi.registry={g:Mt,rect:cn,circle:st,path:ke,text:Gr,ellipse:At,image:Oe,line:Ce,polygon:Ne,polyline:vn,html:ae};const Jn={BEFORE_RENDER:"beforerender",AFTER_RENDER:"afterrender",BEFORE_PAINT:"beforepaint",AFTER_PAINT:"afterpaint",BEFORE_CHANGE_DATA:"beforechangedata",AFTER_CHANGE_DATA:"afterchangedata",BEFORE_CLEAR:"beforeclear",AFTER_CLEAR:"afterclear",BEFORE_DESTROY:"beforedestroy",AFTER_DESTROY:"afterdestroy",BEFORE_CHANGE_SIZE:"beforechangesize",AFTER_CHANGE_SIZE:"afterchangesize",POINTER_TAP:"pointertap",POINTER_DOWN:"pointerdown",POINTER_UP:"pointerup",POINTER_OVER:"pointerover",POINTER_OUT:"pointerout",POINTER_MOVE:"pointermove",POINTER_ENTER:"pointerenter",POINTER_LEAVE:"pointerleave",POINTER_UPOUTSIDE:"pointerupoutside",DRAG_START:"dragstart",DRAG:"drag",DRAG_END:"dragend",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"DROP",CLICK:"click",DBLCLICK:"dblclick"};var AX=function(t){var e=SR(t);return e.charAt(0).toUpperCase()+e.substring(1)},Fu=AX;function CX(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function J1(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function kX(t){return t=J1(Math.abs(t)),t?t[1]:NaN}function NX(t,e){return function(n,r){for(var i=n.length,o=[],a=0,s=t[0],c=0;i>0&&s>0&&(c+s+1>r&&(s=Math.max(1,r-c)),o.push(n.substring(i-=s,i+s)),!((c+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(e)}}function RX(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var LX=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function rS(t){if(!(e=LX.exec(t)))throw new Error("invalid format: "+t);var e;return new iS({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}rS.prototype=iS.prototype;function iS(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}iS.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function IX(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var CR;function DX(t,e){var n=J1(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(CR=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+J1(t,Math.max(0,e+o-1))[0]}function kR(t,e){var n=J1(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}var NR={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:CX,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>kR(t*100,e),r:kR,s:DX,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function RR(t){return t}var LR=Array.prototype.map,IR=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function BX(t){var e=t.grouping===void 0||t.thousands===void 0?RR:NX(LR.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?RR:RX(LR.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"\u2212":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function l(f){f=rS(f);var d=f.fill,h=f.align,p=f.sign,v=f.symbol,y=f.zero,m=f.width,b=f.comma,O=f.precision,E=f.trim,w=f.type;w==="n"?(b=!0,w="g"):NR[w]||(O===void 0&&(O=12),E=!0,w="g"),(y||d==="0"&&h==="=")&&(y=!0,d="0",h="=");var _=v==="$"?n:v==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",S=v==="$"?r:/[%p]/.test(w)?a:"",M=NR[w],T=/[defgprs%]/.test(w);O=O===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,O)):Math.max(0,Math.min(20,O));function A(C){var N=_,k=S,R,I,D;if(w==="c")k=M(C)+k,C="";else{C=+C;var B=C<0||1/C<0;if(C=isNaN(C)?c:M(Math.abs(C),O),E&&(C=IX(C)),B&&+C==0&&p!=="+"&&(B=!1),N=(B?p==="("?p:s:p==="-"||p==="("?"":p)+N,k=(w==="s"?IR[8+CR/3]:"")+k+(B&&p==="("?")":""),T){for(R=-1,I=C.length;++R<I;)if(D=C.charCodeAt(R),48>D||D>57){k=(D===46?i+C.slice(R+1):C.slice(R))+k,C=C.slice(0,R);break}}}b&&!y&&(C=e(C,1/0));var F=N.length+C.length+k.length,G=F<m?new Array(m-F+1).join(d):"";switch(b&&y&&(C=e(G+C,G.length?m-k.length:1/0),G=""),h){case"<":C=N+C+k+G;break;case"=":C=N+G+C+k;break;case"^":C=G.slice(0,F=G.length>>1)+N+C+k+G.slice(F);break;default:C=G+N+C+k;break}return o(C)}return A.toString=function(){return f+""},A}function u(f,d){var h=l((f=rS(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(kX(d)/3)))*3,v=Math.pow(10,-p),y=IR[8+p/3];return function(m){return h(v*m)+y}}return{format:l,formatPrefix:u}}var Q1,ju,FX;jX({thousands:",",grouping:[3],currency:["$",""]});function jX(t){return Q1=BX(t),ju=Q1.format,FX=Q1.formatPrefix,Q1}function Xc(t,e){return Object.entries(t).reduce((n,[r,i])=>(n[r]=e(i,r,t),n),{})}function Zf(t){return t.map((e,n)=>n)}function Q0t(t){const e=t.length,n=t[0].length,r=new Array(n).fill(0).map(()=>new Array(e));for(let i=0;i<n;i++)for(let o=0;o<e;o++)r[i][o]=t[o][i];return r}function GX(t){return t[0]}function DR(t){return t[t.length-1]}function tgt(t){return!t.some(Array.isArray)}function zX(t){return Array.from(new Set(t))}function BR(t,e){const n=[[],[]];return t.forEach(r=>{n[e(r)?0:1].push(r)}),n}function FR(t,e=t.length){if(e===1)return t.map(r=>[r]);const n=[];for(let r=0;r<t.length;r++){const i=t.slice(r+1);FR(i,e-1).forEach(a=>{n.push([t[r],...a])})}return n}function WX(t){if(t.length===1)return[t];const e=[];for(let n=1;n<=t.length;n++)e.push(...FR(t,n));return e}var YX=function(t){return t!==null&&typeof t!="function"&&isFinite(t.length)},Qh=YX,oS=function(t,e){if(t===e)return!0;if(!t||!e||Qe(t)||Qe(e))return!1;if(Qh(t)||Qh(e)){if(t.length!==e.length)return!1;for(var n=!0,r=0;r<t.length&&(n=oS(t[r],e[r]),!!n);r++);return n}if(KE(t)||KE(e)){var i=Object.keys(t),o=Object.keys(e);if(i.length!==o.length)return!1;for(var n=!0,r=0;r<i.length&&(n=oS(t[i[r]],e[i[r]]),!!n);r++);return n}return!1},jR=oS;function Cs(t,e){let n=0;if(e===void 0)for(let r of t)(r=+r)&&(n+=r);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n}function Qn(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function egt(t){return t*Math.PI/180}function ngt(t){return t*180/Math.PI}function HX(t,e){return t=t%(2*Math.PI),e=e%(2*Math.PI),t<0&&(t=2*Math.PI+t),e<0&&(e=2*Math.PI+e),t>=e&&(e=e+2*Math.PI),{startAngle:t,endAngle:e}}const GR=(t={})=>{const e={startAngle:-Math.PI/2,endAngle:Math.PI*3/2,innerRadius:0,outerRadius:1},n=Object.assign(Object.assign({},e),t);return Object.assign(Object.assign({},n),HX(n.startAngle,n.endAngle))},N0=t=>{const{startAngle:e,endAngle:n,innerRadius:r,outerRadius:i}=GR(t);return[["translate",0,.5],["reflect.y"],["translate",0,-.5],["polar",e,n,r,i]]};N0.props={};const zR=(t={})=>{const e={startAngle:-Math.PI/2,endAngle:Math.PI*3/2,innerRadius:0,outerRadius:1};return Object.assign(Object.assign({},e),t)},aS=t=>{const{startAngle:e,endAngle:n,innerRadius:r,outerRadius:i}=zR(t);return[["transpose"],["translate",.5,.5],["reflect"],["translate",-.5,-.5],...N0({startAngle:e,endAngle:n,innerRadius:r,outerRadius:i})]};aS.props={};function tx(t,e,n){return Math.max(e,Math.min(t,n))}function ex(t,e=10){return typeof t!="number"||Math.abs(t)<1e-15?t:parseFloat(t.toFixed(e))}const UX=[["legendCategory",[[["color","discrete"],["opacity","discrete"],["shape","discrete"],["size","constant"]],[["color","discrete"],["opacity","constant"],["shape","discrete"],["size","constant"]],[["color","discrete"],["opacity","discrete"],["shape","constant"],["size","constant"]],[["color","discrete"],["opacity","constant"],["shape","constant"],["size","constant"]],[["color","constant"],["opacity","discrete"],["shape","discrete"],["size","constant"]],[["color","constant"],["opacity","constant"],["shape","discrete"],["size","constant"]],[["color","constant"],["opacity","discrete"],["shape","constant"],["size","constant"]],[["color","discrete"],["shape","discrete"],["size","constant"]],[["color","discrete"],["opacity","discrete"],["shape","discrete"]],[["color","discrete"],["opacity","discrete"],["size","constant"]],[["color","discrete"],["opacity","constant"],["shape","discrete"]],[["color","discrete"],["opacity","constant"],["size","constant"]],[["color","discrete"],["shape","constant"],["size","constant"]],[["color","discrete"],["opacity","discrete"],["shape","constant"]],[["color","discrete"],["opacity","constant"],["shape","constant"]],[["color","constant"],["shape","discrete"],["size","constant"]],[["color","constant"],["opacity","discrete"],["shape","discrete"]],[["color","constant"],["opacity","discrete"],["size","constant"]],[["color","constant"],["opacity","constant"],["shape","discrete"]],[["color","constant"],["opacity","discrete"],["shape","constant"]],[["color","discrete"],["shape","discrete"]],[["color","discrete"],["size","constant"]],[["color","discrete"],["opacity","discrete"]],[["color","discrete"],["opacity","constant"]],[["color","discrete"],["shape","constant"]],[["color","constant"],["shape","discrete"]],[["color","constant"],["size","constant"]],[["color","constant"],["opacity","discrete"]],[["color","discrete"]]]],["legendContinuousSize",[[["color","continuous"],["opacity","continuous"],["size","continuous"]],[["color","constant"],["opacity","continuous"],["size","continuous"]],[["color","continuous"],["size","continuous"]],[["color","constant"],["size","continuous"]],[["size","continuous"],["opacity","continuous"]],[["size","continuous"]]]],["legendContinuousBlockSize",[[["color","distribution"],["opacity","distribution"],["size","distribution"]],[["color","distribution"],["size","distribution"]]]],["legendContinuousBlock",[[["color","distribution"],["opacity","continuous"]],[["color","distribution"]]]],["legendContinuous",[[["color","continuous"],["opacity","continuous"]],[["color","continuous"]],[["opacity","continuous"]]]]];var WR=gt(17816);function Rr(t){const{transformations:e}=t.getOptions();return e.map(([r])=>r).filter(r=>r==="transpose").length%2!==0}function ar(t){const{transformations:e}=t.getOptions();return e.some(([n])=>n==="polar")}function R0(t){const{transformations:e}=t.getOptions();return e.some(([n])=>n==="reflect")&&e.some(([n])=>n.startsWith("transpose"))}function YR(t){const{transformations:e}=t.getOptions();return e.some(([n])=>n==="helix")}function L0(t){const{transformations:e}=t.getOptions();return e.some(([n])=>n==="parallel")}function HR(t){const{transformations:e}=t.getOptions();return e.some(([n])=>n==="fisheye")}function VX(t){return L0(t)&&ar(t)}function tp(t){return YR(t)||ar(t)}function UR(t){return ar(t)&&Rr(t)}function rgt(t){return ar(t)||L0(t)||R0(t)||UR(t)}function XX(t){if(tp(t)){const[e,n]=t.getSize(),r=t.getOptions().transformations.find(i=>i[0]==="polar");if(r)return Math.max(e,n)/2*r[4]}return 0}function nx(t){const{transformations:e}=t.getOptions(),[,,,n,r]=e.find(i=>i[0]==="polar");return[+n,+r]}function sS(t,e=!0){const{transformations:n}=t.getOptions(),[,r,i]=n.find(o=>o[0]==="polar");return e?[+r*180/Math.PI,+i*180/Math.PI]:[r,i]}function $X(t,e){const{transformations:n}=t.getOptions(),[,...r]=n.find(i=>i[0]===e);return r}function VR(t,e){e(t),t.children&&t.children.forEach(function(n){n&&VR(n,e)})}function I0(t){rx(t,!0)}function Gu(t){rx(t,!1)}function rx(t,e){var n=e?"visible":"hidden";VR(t,function(r){r.attr("visibility",n)})}function qX(t){return typeof t=="boolean"?!1:"enter"in t&&"update"in t&&"exit"in t}function XR(t){if(!t)return{enter:!1,update:!1,exit:!1};var e=["enter","update","exit"],n=Object.fromEntries(Object.entries(t).filter(function(r){var i=j(r,1),o=i[0];return!e.includes(o)}));return Object.fromEntries(e.map(function(r){return qX(t)?t[r]===!1?[r,!1]:[r,nt(nt({},t[r]),n)]:[r,n]}))}function ep(t,e){t?t.finished.then(e):e()}function KX(t,e){t.length===0?e():Promise.all(t.map(function(n){return n==null?void 0:n.finished})).then(e)}function $R(t,e){"update"in t?t.update(e):t.attr(e)}function qR(t,e,n){if(e.length===0)return null;if(!n){var r=e.slice(-1)[0];return $R(t,{style:r}),null}return t.animate(e,n)}function ZX(t,e){return!(t.nodeName!=="text"||e.nodeName!=="text"||t.attributes.text!==e.attributes.text)}function JX(t,e,n,r){if(r===void 0&&(r="destroy"),ZX(t,e))return t.remove(),[null];var i=function(){r==="destroy"?t.destroy():r==="hide"&&Gu(t),e.isVisible()&&I0(e)};if(!n)return i(),[null];var o=n.duration,a=o===void 0?0:o,s=n.delay,c=s===void 0?0:s,l=Math.ceil(+a/2),u=+a/4,f=j(t.getGeometryBounds().center,2),d=f[0],h=f[1],p=j(e.getGeometryBounds().center,2),v=p[0],y=p[1],m=j([(d+v)/2-d,(h+y)/2-h],2),b=m[0],O=m[1],E=t.style.opacity,w=E===void 0?1:E,_=e.style.opacity,S=_===void 0?1:_,M=t.style.transform||"",T=e.style.transform||"",A=t.animate([{opacity:w,transform:"translate(0, 0) ".concat(M)},{opacity:0,transform:"translate(".concat(b,", ").concat(O,") ").concat(M)}],nt(nt({fill:"both"},n),{duration:c+l+u})),C=e.animate([{opacity:0,transform:"translate(".concat(-b,", ").concat(-O,") ").concat(T),offset:.01},{opacity:S,transform:"translate(0, 0) ".concat(T)}],nt(nt({fill:"both"},n),{duration:l+u,delay:c+l-u}));return ep(C,i),[A,C]}function uc(t,e,n){var r={},i={};return Object.entries(e).forEach(function(o){var a=j(o,2),s=a[0],c=a[1];if(!Lt(c)){var l=t.style[s]||t.parsedStyle[s]||0;l!==c&&(r[s]=l,i[s]=c)}}),n?qR(t,[r,i],nt({fill:"both"},n)):($R(t,i),null)}var QX=5,KR=function(t,e,n,r){n===void 0&&(n=0),r===void 0&&(r=QX),Object.entries(e).forEach(function(i){var o=j(i,2),a=o[0],s=o[1],c=t;Object.prototype.hasOwnProperty.call(e,a)&&(s?Bl(s)?(Bl(t[a])||(c[a]={}),n<r?KR(t[a],s,n+1,r):c[a]=e[a]):ri(s)?(c[a]=[],c[a]=c[a].concat(s)):c[a]=s:c[a]=s)})},jl=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r+=1)KR(t,e[r]);return t},t$=function(t){xt(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=t.apply(this,ut([],j(n),!1))||this;return i.isMutationObserved=!0,i.addEventListener(He.INSERTED,function(){Gu(i)}),i}return e}(Mt);function ZR(t){var e=t.appendChild(new t$({class:"offscreen"}));return Gu(e),e}function e$(t){for(var e=t;e;){if(e.className==="offscreen")return!0;e=e.parent}return!1}function n$(){rx(this,this.attributes.visibility!=="hidden")}var oo=function(t){xt(e,t);function e(n,r){r===void 0&&(r={});var i=t.call(this,jl({},{style:r},n))||this;return i.initialized=!1,i._defaultOptions=r,i}return Object.defineProperty(e.prototype,"offscreenGroup",{get:function(){return this._offscreen||(this._offscreen=ZR(this)),this._offscreen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultOptions",{get:function(){return this._defaultOptions},enumerable:!1,configurable:!0}),e.prototype.connectedCallback=function(){this.render(this.attributes,this),this.bindEvents(this.attributes,this),this.initialized=!0},e.prototype.disconnectedCallback=function(){var n;(n=this._offscreen)===null||n===void 0||n.destroy()},e.prototype.attributeChangedCallback=function(n){n==="visibility"&&n$.call(this)},e.prototype.update=function(n,r){var i;return this.attr(jl({},this.attributes,n||{})),(i=this.render)===null||i===void 0?void 0:i.call(this,this.attributes,this,r)},e.prototype.clear=function(){this.removeChildren()},e.prototype.bindEvents=function(n,r){},e.prototype.getSubShapeStyle=function(n){var r=n.x,i=n.y,o=n.transform,a=n.transformOrigin,s=n.class,c=n.className,l=n.zIndex,u=Ge(n,["x","y","transform","transformOrigin","class","className","zIndex"]);return u},e}(Tt);function Ba(t,e,n,r,i){return r===void 0&&(r=!0),i===void 0&&(i=function(o){o.node().removeChildren()}),t?n(e):(r&&i(e),null)}function r$(t,e){if(t.length<=e)return t;for(var n=Math.floor(t.length/e),r=[],i=0;i<t.length;i+=n)r.push(t[i]);return r}var cS=function(t){xt(e,t);function e(n){n===void 0&&(n={});var r=n.style,i=Ge(n,["style"]);return t.call(this,nt({style:nt({text:"",fill:"black",fontFamily:"sans-serif",fontSize:16,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",lineWidth:1,textAlign:"start",textBaseline:"middle"},r)},i))||this}return Object.defineProperty(e.prototype,"offscreenGroup",{get:function(){return this._offscreen||(this._offscreen=ZR(this)),this._offscreen},enumerable:!1,configurable:!0}),e.prototype.disconnectedCallback=function(){var n;(n=this._offscreen)===null||n===void 0||n.destroy()},e}(Gr);function i$(t,e){var n=new Map;return t.forEach(function(r){var i=e(r);n.has(i)||n.set(i,[]),n.get(i).push(r)}),n}function o$(t){throw new Error(t)}var a$=function(){function t(i,o,a,s,c,l,u){i===void 0&&(i=null),o===void 0&&(o=null),a===void 0&&(a=null),s===void 0&&(s=null),c===void 0&&(c=[null,null,null,null,null]),l===void 0&&(l=[]),u===void 0&&(u=[]),e.add(this),this._elements=Array.from(i),this._data=o,this._parent=a,this._document=s,this._enter=c[0],this._update=c[1],this._exit=c[2],this._merge=c[3],this._split=c[4],this._transitions=l,this._facetElements=u}t.prototype.selectAll=function(i){var o=typeof i=="string"?this._parent.querySelectorAll(i):i;return new n(o,null,this._elements[0],this._document)},t.prototype.selectFacetAll=function(i){var o=typeof i=="string"?this._parent.querySelectorAll(i):i;return new n(this._elements,null,this._parent,this._document,void 0,void 0,o)},t.prototype.select=function(i){var o=typeof i=="string"?this._parent.querySelectorAll(i)[0]||null:i;return new n([o],null,o,this._document)},t.prototype.append=function(i){var o=this,a=typeof i=="function"?i:function(){return o.createElement(i)},s=[];if(this._data!==null){for(var c=0;c<this._data.length;c++){var l=this._data[c],u=j(Array.isArray(l)?l:[l,null],2),f=u[0],d=u[1],h=a(f,c);h.__data__=f,d!==null&&(h.__fromElements__=d),this._parent.appendChild(h),s.push(h)}return new n(s,null,this._parent,this._document)}for(var c=0;c<this._elements.length;c++){var p=this._elements[c],f=p.__data__,h=a(f,c);p.appendChild(h),s.push(h)}return new n(s,null,s[0],this._document)},t.prototype.maybeAppend=function(i,o){var a=hl(this,e,"m",r).call(this,i[0]==="#"?i:"#".concat(i),o);return a.attr("id",i),a},t.prototype.maybeAppendByClassName=function(i,o){var a=i.toString(),s=hl(this,e,"m",r).call(this,a[0]==="."?a:".".concat(a),o);return s.attr("className",a),s},t.prototype.maybeAppendByName=function(i,o){var a=hl(this,e,"m",r).call(this,'[name="'.concat(i,'"]'),o);return a.attr("name",i),a},t.prototype.data=function(i,o,a){var s,c;o===void 0&&(o=function(A){return A}),a===void 0&&(a=function(){return null});for(var l=[],u=[],f=new Set(this._elements),d=[],h=new Set,p=new Map(this._elements.map(function(A,C){return[o(A.__data__,C),A]})),v=new Map(this._facetElements.map(function(A,C){return[o(A.__data__,C),A]})),y=i$(this._elements,function(A){return a(A.__data__)}),m=0;m<i.length;m++){var b=i[m],O=o(b,m),E=a(b,m);if(p.has(O)){var w=p.get(O);w.__data__=b,w.__facet__=!1,u.push(w),f.delete(w),p.delete(O)}else if(v.has(O)){var w=v.get(O);w.__data__=b,w.__facet__=!0,u.push(w),v.delete(O)}else if(y.has(O)){var _=y.get(O);d.push([b,_]);try{for(var S=(s=void 0,On(_)),M=S.next();!M.done;M=S.next()){var w=M.value;f.delete(w)}}catch(A){s={error:A}}finally{try{M&&!M.done&&(c=S.return)&&c.call(S)}finally{if(s)throw s.error}}y.delete(O)}else if(p.has(E)){var w=p.get(E);w.__toData__?w.__toData__.push(b):w.__toData__=[b],h.add(w),f.delete(w)}else l.push(b)}var T=[new n([],l,this._parent,this._document),new n(u,null,this._parent,this._document),new n(f,null,this._parent,this._document),new n([],d,this._parent,this._document),new n(h,null,this._parent,this._document)];return new n(this._elements,null,this._parent,this._document,T)},t.prototype.merge=function(i){var o=ut(ut([],j(this._elements),!1),j(i._elements),!1),a=ut(ut([],j(this._transitions),!1),j(i._transitions),!1);return new n(o,null,this._parent,this._document,void 0,a)},t.prototype.createElement=function(i){if(this._document)return this._document.createElement(i,{});var o=n.registry[i];return o?new o:o$("Unknown node type: ".concat(i))},t.prototype.join=function(i,o,a,s,c){i===void 0&&(i=function(p){return p}),o===void 0&&(o=function(p){return p}),a===void 0&&(a=function(p){return p.remove()}),s===void 0&&(s=function(p){return p}),c===void 0&&(c=function(p){return p.remove()});var l=i(this._enter),u=o(this._update),f=a(this._exit),d=s(this._merge),h=c(this._split);return u.merge(l).merge(f).merge(d).merge(h)},t.prototype.remove=function(){for(var i=function(s){var c=o._elements[s],l=o._transitions[s];l?l.then(function(){return c.remove()}):c.remove()},o=this,a=0;a<this._elements.length;a++)i(a);return new n([],null,this._parent,this._document,void 0,this._transitions)},t.prototype.each=function(i){for(var o=0;o<this._elements.length;o++){var a=this._elements[o],s=a.__data__;i.call(a,s,o)}return this},t.prototype.attr=function(i,o){var a=typeof o!="function"?function(){return o}:o;return this.each(function(s,c){o!==void 0&&(this[i]=a.call(this,s,c))})},t.prototype.style=function(i,o,a){a===void 0&&(a=!0);var s=typeof o!="function"||!a?function(){return o}:o;return this.each(function(c,l){o!==void 0&&(this.style[i]=s.call(this,c,l))})},t.prototype.styles=function(i,o){return i===void 0&&(i={}),o===void 0&&(o=!0),this.each(function(a,s){var c=this;Object.entries(i).forEach(function(l){var u=j(l,2),f=u[0],d=u[1],h=typeof d!="function"||!o?function(){return d}:d;d!==void 0&&c.attr(f,h.call(c,a,s))})})},t.prototype.update=function(i,o){o===void 0&&(o=!0);var a=typeof i!="function"||!o?function(){return i}:i;return this.each(function(s,c){i&&this.update&&this.update(a.call(this,s,c))})},t.prototype.maybeUpdate=function(i,o){o===void 0&&(o=!0);var a=typeof i!="function"||!o?function(){return i}:i;return this.each(function(s,c){i&&this.update&&this.update(a.call(this,s,c))})},t.prototype.transition=function(i){var o=this._transitions;return this.each(function(a,s){o[s]=i.call(this,a,s)})},t.prototype.on=function(i,o){return this.each(function(){this.addEventListener(i,o)}),this},t.prototype.call=function(i){for(var o=[],a=1;a<arguments.length;a++)o[a-1]=arguments[a];return i.call.apply(i,ut([this._parent,this],j(o),!1)),this},t.prototype.node=function(){return this._elements[0]},t.prototype.nodes=function(){return this._elements},t.prototype.transitions=function(){return this._transitions.filter(function(i){return!!i})},t.prototype.parent=function(){return this._parent};var e,n,r;return n=t,e=new WeakSet,r=function(o,a){var s=this._elements[0],c=s.querySelector(o);if(c)return new n([c],null,this._parent,this._document);var l=typeof a=="string"?this.createElement(a):a();return s.appendChild(l),new n([l],null,this._parent,this._document)},t.registry={g:Mt,rect:cn,circle:st,path:ke,text:cS,ellipse:At,image:Oe,line:Ce,polygon:Ne,polyline:vn,html:ae},t}();function Ke(t){return new a$([t],null,t,t.ownerDocument)}function s$(t,e,n){return t.querySelector(e)?Ke(t).select(e):Ke(t).append(n)}var ks=function(t,e){var n=function(i){return"".concat(e,"-").concat(i)},r=Object.fromEntries(Object.entries(t).map(function(i){var o=j(i,2),a=o[0],s=o[1],c=n(s);return[a,{name:c,class:".".concat(c),id:"#".concat(c),toString:function(){return c}}]}));return Object.assign(r,{prefix:n}),r},lS={data:[],animate:{enter:!1,update:{duration:100,easing:"ease-in-out-sine",fill:"both"},exit:{duration:100,fill:"both"}},showArrow:!0,showGrid:!0,showLabel:!0,showLine:!0,showTick:!0,showTitle:!0,showTrunc:!1,dataThreshold:100,lineLineWidth:1,lineStroke:"black",crossPadding:10,titleFill:"black",titleFontSize:12,titlePosition:"lb",titleSpacing:0,titleTextAlign:"center",titleTextBaseline:"middle",lineArrow:function(){return new ke({style:{d:[["M",10,10],["L",-10,0],["L",10,-10],["L",0,0],["L",10,10],["Z"]],fill:"black",transformOrigin:"center"}})},labelAlign:"parallel",labelDirection:"positive",labelFontSize:12,labelSpacing:0,gridConnect:"line",gridControlAngles:[],gridDirection:"positive",gridLength:0,gridType:"segment",lineArrowOffset:15,lineArrowSize:10,tickDirection:"positive",tickLength:5,tickLineWidth:1,tickStroke:"black",labelOverlap:[]},igt=bt({},lS,{style:{type:"arc"}}),ogt=bt({},lS,{style:{}}),sr=ks({mainGroup:"main-group",gridGroup:"grid-group",grid:"grid",lineGroup:"line-group",line:"line",tickGroup:"tick-group",tick:"tick",tickItem:"tick-item",labelGroup:"label-group",label:"label",labelItem:"label-item",titleGroup:"title-group",title:"title",lineFirst:"line-first",lineSecond:"line-second"},"axis");function Fa(t){return typeof t=="function"}function Gl(t,e){return[t[0]*e,t[1]*e]}function D0(t,e){return[t[0]+e[0],t[1]+e[1]]}function uS(t,e){return[t[0]-e[0],t[1]-e[1]]}function Jf(t,e){return[Math.min(t[0],e[0]),Math.min(t[1],e[1])]}function Qf(t,e){return[Math.max(t[0],e[0]),Math.max(t[1],e[1])]}function B0(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}function JR(t){if(t[0]===0&&t[1]===0)return[0,0];var e=Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2));return[t[0]/e,t[1]/e]}function agt(t,e,n){var r=__read(t,2),i=r[0],o=r[1],a=__read(e,2),s=a[0],c=a[1],l=i-s,u=o-c,f=Math.sin(n),d=Math.cos(n);return[l*d-u*f+s,l*f+u*d+c]}function c$(t,e){return e?[t[1],-t[0]]:[-t[1],t[0]]}function np(t){return t*Math.PI/180}function QR(t){return Number((t*180/Math.PI).toPrecision(5))}function fS(t){return t.toString().charAt(0).toUpperCase()+t.toString().slice(1)}function l$(t){return t.toString().charAt(0).toLowerCase()+t.toString().slice(1)}function u$(t,e){return"".concat(e).concat(fS(t))}function tL(t,e,n){var r;n===void 0&&(n=!0);var i=e||((r=t.match(/^([a-z][a-z0-9]+)/))===null||r===void 0?void 0:r[0])||"",o=t.replace(new RegExp("^(".concat(i,")")),"");return n?l$(o):o}function f$(t,e){Object.entries(e).forEach(function(n){var r=j(n,2),i=r[0],o=r[1];ut([t],j(t.querySelectorAll(i)),!1).filter(function(a){return a.matches(i)}).forEach(function(a){if(a){var s=a;s.style.cssText+=Object.entries(o).reduce(function(c,l){return"".concat(c).concat(l.join(":"),";")},"")}})})}var ix=function(t,e){if(!(t!=null&&t.startsWith(e)))return!1;var n=t[e.length];return n>="A"&&n<="Z"};function gn(t,e,n){n===void 0&&(n=!1);var r={};return Object.entries(t).forEach(function(i){var o=j(i,2),a=o[0],s=o[1];if(!(a==="className"||a==="class")){if(ix(a,"show")&&ix(tL(a,"show"),e)!==n)a===u$(e,"show")?r[a]=s:r[a.replace(new RegExp(fS(e)),"")]=s;else if(!ix(a,"show")&&ix(a,e)!==n){var c=tL(a,e);c==="filter"&&typeof s=="function"||(r[c]=s)}}}),r}function $c(t,e){return Object.entries(t).reduce(function(n,r){var i=j(r,2),o=i[0],a=i[1];return o.startsWith("show")?n["show".concat(e).concat(o.slice(4))]=a:n["".concat(e).concat(fS(o))]=a,n},{})}function zl(t,e){e===void 0&&(e=["x","y","class","className"]);var n=["transform","transformOrigin","anchor","visibility","pointerEvents","zIndex","cursor","clipPath","clipPathTargets","offsetPath","offsetPathTargets","offsetDistance","draggable","droppable"],r={},i={};return Object.entries(t).forEach(function(o){var a=j(o,2),s=a[0],c=a[1];e.includes(s)||(n.indexOf(s)!==-1?i[s]=c:r[s]=c)}),[r,i]}function Ns(t,e){return Fa(t)?t.apply(void 0,ut([],j(e),!1)):t}function ox(t,e){return t.style.opacity||(t.style.opacity=1),uc(t,{opacity:0},e)}var d$=["$el","cx","cy","d","dx","dy","fill","fillOpacity","filter","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","height","img","increasedLineWidthForHitTesting","innerHTML","isBillboard","billboardRotation","isSizeAttenuation","isClosed","isOverflowing","leading","letterSpacing","lineDash","lineHeight","lineWidth","markerEnd","markerEndOffset","markerMid","markerStart","markerStartOffset","maxLines","metrics","miterLimit","offsetX","offsetY","opacity","path","points","r","radius","rx","ry","shadowColor","src","stroke","strokeOpacity","text","textAlign","textBaseline","textDecorationColor","textDecorationLine","textDecorationStyle","textOverflow","textPath","textPathSide","textPathStartOffset","transform","transformOrigin","visibility","width","wordWrap","wordWrapWidth","x","x1","x2","y","y1","y2","z1","z2","zIndex"];function h$(t){return d$.includes(t)}function eL(t){var e={};for(var n in t)h$(n)&&(e[n]=t[n]);return e}var rp=ks({lineGroup:"line-group",line:"line",regionGroup:"region-group",region:"region"},"grid");function nL(t){return t.reduce(function(e,n,r){return e.push(ut([r===0?"M":"L"],j(n),!1)),e},[])}function p$(t,e,n){var r=e.connect,i=r===void 0?"line":r,o=e.center;if(i==="line")return nL(t);if(!o)return[];var a=B0(t[0],o),s=n?0:1;return t.reduce(function(c,l,u){return u===0?c.push(ut(["M"],j(l),!1)):c.push(ut(["A",a,a,0,0,s],j(l),!1)),c},[])}function dS(t,e,n){return e.type==="surround"?p$(t,e,n):nL(t)}function v$(t,e,n){var r=n.type,i=n.connect,o=n.center,a=n.closed,s=a?[["Z"]]:[],c=j([dS(t,n),dS(e.slice().reverse(),n,!0)],2),l=c[0],u=c[1],f=j([t[0],e.slice(-1)[0]],2),d=f[0],h=f[1],p=function(b,O){return[l,b,u,O,s].flat()};if(i==="line"||r==="surround")return p([ut(["L"],j(h),!1)],[ut(["L"],j(d),!1)]);if(!o)throw new Error("Arc grid need to specified center");var v=j([B0(h,o),B0(d,o)],2),y=v[0],m=v[1];return p([ut(["A",y,y,0,0,1],j(h),!1),ut(["L"],j(h),!1)],[ut(["A",m,m,0,0,0],j(d),!1),ut(["L"],j(d),!1)])}function g$(t,e,n,r){var i=n.animate,o=n.isBillboard,a=e.map(function(s,c){return{id:s.id||"grid-line-".concat(c),d:dS(s.points,n)}});return t.selectAll(rp.line.class).data(a,function(s){return s.id}).join(function(s){return s.append("path").each(function(c,l){var u=Ns(eL(nt({d:c.d},r)),[c,l,a]);this.attr(nt({class:rp.line.name,stroke:"#D9D9D9",lineWidth:1,lineDash:[4,4],isBillboard:o},u))})},function(s){return s.transition(function(c,l){var u=Ns(eL(nt({d:c.d},r)),[c,l,a]);return uc(this,u,i.update)})},function(s){return s.transition(function(){var c=this,l=ox(this,i.exit);return ep(l,function(){return c.remove()}),l})}).transitions()}function y$(t,e,n){var r=n.animate,i=n.connect,o=n.areaFill;if(e.length<2||!o||!i)return[];for(var a=Array.isArray(o)?o:[o,"transparent"],s=function(p){return a[p%a.length]},c=[],l=0;l<e.length-1;l++){var u=j([e[l].points,e[l+1].points],2),f=u[0],d=u[1],h=v$(f,d,n);c.push({d:h,fill:s(l)})}return t.selectAll(rp.region.class).data(c,function(p,v){return v}).join(function(p){return p.append("path").each(function(v,y){var m=Ns(v,[v,y,c]);this.attr(m)}).attr("className",rp.region.name)},function(p){return p.transition(function(v,y){var m=Ns(v,[v,y,c]);return uc(this,m,r.update)})},function(p){return p.transition(function(){var v=this,y=ox(this,r.exit);return ep(y,function(){return v.remove()}),y})}).transitions()}function m$(t){var e=t.data,n=e===void 0?[]:e,r=t.closed;return r?n.map(function(i){var o=i.points,a=j(o,1),s=a[0];return nt(nt({},i),{points:ut(ut([],j(o),!1),[s],!1)})}):n}var x$=function(t){xt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(n,r){var i=n.type,o=n.center,a=n.areaFill,s=n.closed,c=Ge(n,["type","center","areaFill","closed"]),l=m$(n),u=Ke(r).maybeAppendByClassName(rp.lineGroup,"g"),f=Ke(r).maybeAppendByClassName(rp.regionGroup,"g"),d=g$(u,l,n,c),h=y$(f,l,n);return ut(ut([],j(d),!1),j(h),!1)},e}(oo),Ln=function(t,e,n){for(var r=0,i=Qe(e)?e.split("."):e;t&&r<i.length;)t=t[i[r++]];return t===void 0||r<i.length?n:t},b$=function(t,e){return function(n){return t*(1-n)+e*n}};function _$(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0;return function(i){var o=new Array(r),a=new Array(n),s=0;for(s=0;s<r;++s)o[s]=hS(t[s],e[s]);for(;s<n;++s)a[s]=e[s];for(s=0;s<r;++s)a[s]=o[s](i);return a}}function w$(t,e){t===void 0&&(t={}),e===void 0&&(e={});var n={},r={};return Object.entries(e).forEach(function(i){var o=j(i,2),a=o[0],s=o[1];a in t?n[a]=hS(t[a],s):r[a]=s}),function(i){return Object.entries(n).forEach(function(o){var a=j(o,2),s=a[0],c=a[1];return r[s]=c(i)}),r}}function hS(t,e){return typeof t=="number"&&typeof e=="number"?b$(t,e):Array.isArray(t)&&Array.isArray(e)?_$(t,e):typeof t=="object"&&typeof e=="object"?w$(t,e):function(n){return t}}function O$(t,e,n,r){if(!r)return t.attr("__keyframe_data__",n),null;var i=r.duration,o=i===void 0?0:i,a=hS(e,n),s=Math.ceil(+o/16),c=new Array(s).fill(0).map(function(l,u,f){return{__keyframe_data__:a(u/(f.length-1))}});return t.animate(c,nt({fill:"both"},r))}function td(t){return typeof t=="function"?t():Qe(t)||Je(t)?new cS({style:{text:String(t)}}):t}function pS(t,e,n){n===void 0&&(n=!1);var r=t.getBBox(),i=r.width,o=r.height,a=e/Math.max(i,o);return n&&(t.style.transform="scale(".concat(a,")")),a}function rL(t,e){var n={},r=Array.isArray(e)?e:[e];for(var i in t)r.includes(i)||(n[i]=t[i]);return n}function iL(t,e){return Object.fromEntries(Object.entries(t).map(function(n){var r=j(n,2),i=r[0],o=r[1];return[i,Ns(o,e)]}))}function sgt(t){if(t.type==="linear"){var e=t.startPos,n=t.endPos;return __spreadArray(__spreadArray([],__read(e),!1),__read(n),!1)}var r=t.startAngle,i=t.endAngle,o=t.center,a=t.radius;return __spreadArray(__spreadArray([r,i],__read(o),!1),[a],!1)}function vS(t,e){return e&&Fa(e)?t.filter(e):t}function oL(t,e){var n=e.startAngle,r=e.endAngle;return(r-n)*t+n}function ax(t,e){if(e.type==="linear"){var n=j(e.startPos,2),r=n[0],i=n[1],o=j(e.endPos,2),a=o[0],s=o[1],c=j([a-r,s-i],2),l=c[0],u=c[1];return JR([l,u])}var f=np(oL(t,e));return[-Math.sin(f),Math.cos(f)]}function gS(t,e,n){var r=ax(t,n);return c$(r,e!=="positive")}function F0(t,e){return gS(t,e.labelDirection,e)}function E$(t,e){var n=j(e.startPos,2),r=n[0],i=n[1],o=j(e.endPos,2),a=o[0],s=o[1],c=j([a-r,s-i],2),l=c[0],u=c[1];return[r+l*t,i+u*t]}function S$(t,e){var n=e.radius,r=j(e.center,2),i=r[0],o=r[1],a=np(oL(t,e));return[i+n*Math.cos(a),o+n*Math.sin(a)]}function sx(t,e){return e.type==="linear"?E$(t,e):S$(t,e)}function aL(t){return ax(0,t)[1]===0}function sL(t){return ax(0,t)[0]===0}function cL(t,e){return e-t===360}function lL(t,e,n,r,i){var o=e-t,a=j([i,i],2),s=a[0],c=a[1],l=j([np(t),np(e)],2),u=l[0],f=l[1],d=function(A){return[n+i*Math.cos(A),r+i*Math.sin(A)]},h=j(d(u),2),p=h[0],v=h[1],y=j(d(f),2),m=y[0],b=y[1];if(cL(t,e)){var O=(f+u)/2,E=j(d(O),2),w=E[0],_=E[1];return[["M",p,v],["A",s,c,0,1,0,w,_],["A",s,c,0,1,0,m,b]]}var S=o>180?1:0,M=t>e?0:1,T=!1;return T?"M".concat(n,",").concat(r,",L").concat(p,",").concat(v,",A").concat(s,",").concat(c,",0,").concat(S,",").concat(M,",").concat(m,",").concat(b,",L").concat(n,",").concat(r):"M".concat(p,",").concat(v,",A").concat(s,",").concat(c,",0,").concat(S,",").concat(M,",").concat(m,",").concat(b)}function M$(t){var e=t.attributes,n=e.startAngle,r=e.endAngle,i=e.center,o=e.radius;return ut(ut([n,r],j(i),!1),[o],!1)}function P$(t,e,n,r){var i=e.startAngle,o=e.endAngle,a=e.center,s=e.radius;return t.selectAll(sr.line.class).data([{d:lL.apply(void 0,ut(ut([i,o],j(a),!1),[s],!1))}],function(c,l){return l}).join(function(c){return c.append("path").attr("className",sr.line.name).styles(e).styles({d:function(l){return l.d}})},function(c){return c.transition(function(){var l=this,u=O$(this,M$(this),ut(ut([i,o],j(a),!1),[s],!1),r.update);if(u){var f=function(){var d=Ln(l.attributes,"__keyframe_data__");l.style.d=lL.apply(void 0,ut([],j(d),!1))};u.onframe=f,u.onfinish=f}return u}).styles(e)},function(c){return c.remove()}).styles(n).transitions()}function T$(t,e){var n=e.truncRange,r=e.truncShape,i=e.lineExtension}function A$(t,e,n){n===void 0&&(n=[0,0]);var r=j([t,e,n],3),i=j(r[0],2),o=i[0],a=i[1],s=j(r[1],2),c=s[0],l=s[1],u=j(r[2],2),f=u[0],d=u[1],h=j([c-o,l-a],2),p=h[0],v=h[1],y=Math.sqrt(Math.pow(p,2)+Math.pow(v,2)),m=j([-f/y,d/y],2),b=m[0],O=m[1];return[b*p,b*v,O*p,O*v]}function uL(t){var e=j(t,2),n=j(e[0],2),r=n[0],i=n[1],o=j(e[1],2),a=o[0],s=o[1];return{x1:r,y1:i,x2:a,y2:s}}function C$(t,e,n,r){var i=e.showTrunc,o=e.startPos,a=e.endPos,s=e.truncRange,c=e.lineExtension,l=j([o,a],2),u=j(l[0],2),f=u[0],d=u[1],h=j(l[1],2),p=h[0],v=h[1],y=j(c?A$(o,a,c):new Array(4).fill(0),4),m=y[0],b=y[1],O=y[2],E=y[3],w=function(F){return t.selectAll(sr.line.class).data(F,function(G,X){return X}).join(function(G){return G.append("line").attr("className",function(X){return"".concat(sr.line.name," ").concat(X.className)}).styles(n).transition(function(X){return uc(this,uL(X.line),!1)})},function(G){return G.styles(n).transition(function(X){var q=X.line;return uc(this,uL(q),r.update)})},function(G){return G.remove()}).transitions()};if(!i||!s)return w([{line:[[f+m,d+b],[p+O,v+E]],className:sr.line.name}]);var _=j(s,2),S=_[0],M=_[1],T=p-f,A=v-d,C=j([f+T*S,d+A*S],2),N=C[0],k=C[1],R=j([f+T*M,d+A*M],2),I=R[0],D=R[1],B=w([{line:[[f+m,d+b],[N,k]],className:sr.lineFirst.name},{line:[[I,D],[p+O,v+E]],className:sr.lineSecond.name}]);return T$(t,e),B}function k$(t,e,n,r){var i=n.showArrow,o=n.showTrunc,a=n.lineArrow,s=n.lineArrowOffset,c=n.lineArrowSize,l;if(e==="arc"?l=t.select(sr.line.class):o?l=t.select(sr.lineSecond.class):l=t.select(sr.line.class),!i||!a||n.type==="arc"&&cL(n.startAngle,n.endAngle)){var u=l.node();u&&(u.style.markerEnd=void 0);return}var f=td(a);f.attr(r),pS(f,c,!0),l.style("markerEnd",f).style("markerEndOffset",-s)}function N$(t,e,n){var r=e.type,i,o=gn(e,"line");return r==="linear"?i=C$(t,e,rL(o,"arrow"),n):i=P$(t,e,rL(o,"arrow"),n),k$(t,r,e,o),i}function R$(t,e){return gS(t,e.gridDirection,e)}function fL(t){var e=t.type,n=t.gridCenter;return e==="linear"?n:n||t.center}function L$(t,e){var n=e.gridLength;return t.map(function(r,i){var o=r.value,a=j(sx(o,e),2),s=a[0],c=a[1],l=j(Gl(R$(o,e),n),2),u=l[0],f=l[1];return{id:i,points:[[s,c],[s+u,c+f]]}})}function I$(t,e){var n=e.gridControlAngles,r=fL(e);if(!r)throw new Error("grid center is not provide");if(t.length<2)throw new Error("Invalid grid data");if(!n||n.length===0)throw new Error("Invalid gridControlAngles");var i=j(r,2),o=i[0],a=i[1];return t.map(function(s,c){var l=s.value,u=j(sx(l,e),2),f=u[0],d=u[1],h=j([f-o,d-a],2),p=h[0],v=h[1],y=[];return n.forEach(function(m){var b=np(m),O=j([Math.cos(b),Math.sin(b)],2),E=O[0],w=O[1],_=p*E-v*w+o,S=p*w+v*E+a;y.push([_,S])}),{points:y,id:c}})}function D$(t,e,n,r){var i=gn(n,"grid"),o=i.type,a=i.areaFill,s=fL(n),c=vS(e,n.gridFilter),l=o==="segment"?L$(c,n):I$(c,n),u=nt(nt({},i),{center:s,areaFill:Fa(a)?c.map(function(f,d){return Ns(a,[f,d,c])}):a,animate:r,data:l});return t.selectAll(sr.grid.class).data([1]).join(function(f){return f.append(function(){return new x$({style:u})}).attr("className",sr.grid.name)},function(f){return f.transition(function(){return this.update(u)})},function(f){return f.remove()}).transitions()}function Mo(t,e,n,r,i){return r===void 0&&(r=!0),i===void 0&&(i=!1),r&&t===e||i&&t===n?!0:t>e&&t<n}function B$(t){var e,n,r,i=t||1;function o(s,c){++e>i&&(r=n,a(1),++e),n[s]=c}function a(s){e=0,n=Object.create(null),s||(r=Object.create(null))}return a(),{clear:a,has:function(s){return n[s]!==void 0||r[s]!==void 0},get:function(s){var c=n[s];if(c!==void 0)return c;if((c=r[s])!==void 0)return o(s,c),c},set:function(s,c){n[s]!==void 0?n[s]=c:o(s,c)}}}var yS=new Map;function F$(t,e,n){n===void 0&&(n=128);var r=function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var a=e?e.apply(this,i):i[0];yS.has(t)||yS.set(t,B$(n));var s=yS.get(t);if(s.has(a))return s.get(a);var c=t.apply(this,i);return s.set(a,c),c};return r}var cx,mS;function cgt(t){mS=t}var j$=F$(function(t,e){var n=e.fontSize,r=e.fontFamily,i=e.fontWeight,o=e.fontStyle,a=e.fontVariant;return mS?mS(t,n):(cx||(cx=mt.offscreenCanvasCreator.getOrCreateContext(void 0)),cx.font=[o,a,i,"".concat(n,"px"),r].join(" "),cx.measureText(t).width)},function(t,e){return[t,Object.values(e||dL(t)).join()].join("")},4096),dL=function(t){var e=t.style.fontFamily||"sans-serif",n=t.style.fontWeight||"normal",r=t.style.fontStyle||"normal",i=t.style.fontVariant,o=t.style.fontSize;return o=typeof o=="object"?o.value:o,{fontSize:o,fontFamily:e,fontWeight:n,fontStyle:r,fontVariant:i}};function hL(t){return t.nodeName==="text"?t:t.nodeName==="g"&&t.children.length===1&&t.children[0].nodeName==="text"?t.children[0]:null}function pL(t,e){var n=hL(t);n&&n.attr(e)}function xS(t,e,n){n===void 0&&(n="..."),pL(t,{wordWrap:!0,wordWrapWidth:e,maxLines:1,textOverflow:n})}function G$(t,e,n,r){n===void 0&&(n=2),r===void 0&&(r="top"),pL(t,{wordWrap:!0,wordWrapWidth:e,maxLines:n,textBaseline:r})}function z$(t,e,n){var r=t.getBBox(),i=r.width,o=r.height,a=j([e,n].map(function(l,u){var f;return l.includes("%")?parseFloat(((f=l.match(/[+-]?([0-9]*[.])?[0-9]+/))===null||f===void 0?void 0:f[0])||"0")/100*(u===0?i:o):l}),2),s=a[0],c=a[1];return[s,c]}function vL(t,e){if(e)try{var n=/translate\(([+-]*[\d]+[%]*),[ ]*([+-]*[\d]+[%]*)\)/g,r=e.replace(n,function(i,o,a){return"translate(".concat(z$(t,o,a),")")});t.attr("transform",r)}catch(i){}}var gL=function(t){return t!==void 0&&t!=null&&!Number.isNaN(t)};function Po(t){if(Je(t))return[t,t,t,t];if(ri(t)){var e=t.length;if(e===1)return[t[0],t[0],t[0],t[0]];if(e===2)return[t[0],t[1],t[0],t[1]];if(e===3)return[t[0],t[1],t[2],t[1]];if(e===4)return t}return[0,0,0,0]}var bS=function(){function t(e,n,r,i){this.set(e,n,r,i)}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.defined("x2")&&this.defined("x1")?this.x2-this.x1:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.defined("y2")&&this.defined("y1")?this.y2-this.y1:void 0},enumerable:!1,configurable:!0}),t.prototype.rotatedPoints=function(e,n,r){var i=this,o=i.x1,a=i.y1,s=i.x2,c=i.y2,l=Math.cos(e),u=Math.sin(e),f=n-n*l+r*u,d=r-n*u-r*l,h=[[l*o-u*c+f,u*o+l*c+d],[l*s-u*c+f,u*s+l*c+d],[l*o-u*a+f,u*o+l*a+d],[l*s-u*a+f,u*s+l*a+d]];return h},t.prototype.set=function(e,n,r,i){return r<e?(this.x2=e,this.x1=r):(this.x1=e,this.x2=r),i<n?(this.y2=n,this.y1=i):(this.y1=n,this.y2=i),this},t.prototype.defined=function(e){return this[e]!==Number.MAX_VALUE&&this[e]!==-Number.MAX_VALUE},t}();function lx(t,e){var n=t.getEulerAngles()||0;t.setEulerAngles(0);var r=t.getBounds(),i=j(r.min,2),o=i[0],a=i[1],s=j(r.max,2),c=s[0],l=s[1],u=t.getBBox(),f=u.width,d=u.height,h=d,p=0,v=0,y=o,m=a,b=hL(t);if(b){h-=1.5;var O=b.style.textAlign,E=b.style.textBaseline;O==="center"?y=(o+c)/2:(O==="right"||O==="end")&&(y=c),E==="middle"?m=(a+l)/2:E==="bottom"&&(m=l)}var w=j(Po(e),4),_=w[0],S=_===void 0?0:_,M=w[1],T=M===void 0?0:M,A=w[2],C=A===void 0?S:A,N=w[3],k=N===void 0?T:N,R=new bS((p+=o)-k,(v+=a)-S,p+f+T,v+h+C);return t.setEulerAngles(n),R.rotatedPoints(np(n),y,m)}function j0(t,e){return e[0]<=Math.max(t[0][0],t[1][0])&&e[0]<=Math.min(t[0][0],t[1][0])&&e[1]<=Math.max(t[0][1],t[1][1])&&e[1]<=Math.min(t[0][1],t[1][1])}function G0(t,e,n){var r=(e[1]-t[1])*(n[0]-e[0])-(e[0]-t[0])*(n[1]-e[1]);return r===0?0:r<0?2:1}function W$(t,e){var n=G0(t[0],t[1],e[0]),r=G0(t[0],t[1],e[1]),i=G0(e[0],e[1],t[0]),o=G0(e[0],e[1],t[1]);return!!(n!==r&&i!==o||n===0&&j0(t,e[0])||r===0&&j0(t,e[1])||i===0&&j0(e,t[0])||o===0&&j0(e,t[1]))}function Y$(t,e){var n=t.length;if(n<3)return!1;var r=[e,[9999,e[1]]],i=0,o=0;do{var a=[t[o],t[(o+1)%n]];if(W$(a,r)){if(G0(a[0],e,a[1])===0)return j0(a,e);i++}o=(o+1)%n}while(o!==0);return!!(i&1)}function H$(t,e){return e.every(function(n){return Y$(t,n)})}function U$(t,e,n){var r=t.x1,i=t.x2,o=t.y1,a=t.y2,s=[[r,o],[i,o],[i,a],[r,a]],c=lx(e,n);return H$(s,c)}function yL(t,e){var n=j(t,4),r=n[0],i=n[1],o=n[2],a=n[3],s=j(e,4),c=s[0],l=s[1],u=s[2],f=s[3],d=o-r,h=a-i,p=u-c,v=f-l,y=d*v-p*h;if(y===0)return!1;var m=y>0,b=r-c,O=i-l,E=d*O-h*b;if(E<0===m)return!1;var w=p*O-v*b;return!(w<0===m||E>y===m||w>y===m)}function mL(t,e){var n=[[t[0],t[1],t[2],t[3]],[t[2],t[3],t[4],t[5]],[t[4],t[5],t[6],t[7]],[t[6],t[7],t[0],t[1]]];return n.some(function(r){return yL(e,r)})}var lgt={lineToLine:yL,intersectBoxLine:mL,getBounds:lx};function V$(t,e,n){var r,i,o=lx(t,n).flat(1),a=lx(e,n).flat(1),s=[[o[0],o[1],o[2],o[3]],[o[0],o[1],o[4],o[5]],[o[4],o[5],o[6],o[7]],[o[2],o[3],o[6],o[7]]];try{for(var c=On(s),l=c.next();!l.done;l=c.next()){var u=l.value;if(mL(a,u))return!0}}catch(f){r={error:f}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}return!1}function X$(t,e){var n=t.type,r=t.labelDirection,i=t.crossSize;if(!i)return!1;if(n==="arc"){var o=t.center,a=t.radius,s=j(o,2),c=s[0],l=s[1],u=r==="negative"?0:i,f=-a-u,d=a+u,h=j(Po(e),4),p=h[0],v=h[1],y=h[2],m=h[3];return new bS(c+f-m,l+f-p,c+d+v,l+d+y)}var b=j(t.startPos,2),O=b[0],E=b[1],w=j(t.endPos,2),_=w[0],S=w[1],M=j(sL(t)?[-e,0,e,0]:[0,e,0,-e],4),T=M[0],A=M[1],C=M[2],N=M[3],k=F0(0,t),R=Gl(k,i),I=new bS(O,E,_,S);return I.x1+=N,I.y1+=T,I.x2+=A+R[0],I.y2+=C+R[1],I}function ux(t,e,n){var r,i,o=e.crossPadding,a=new Set,s=null,c=X$(e,o),l=function(p){return c?U$(c,p):!0},u=function(p,v){return!p||!p.firstChild?!0:!V$(p.firstChild,v.firstChild,Po(n))};try{for(var f=On(t),d=f.next();!d.done;d=f.next()){var h=d.value;l(h)?!s||u(s,h)?s=h:(a.add(s),a.add(h)):a.add(h)}}catch(p){r={error:p}}finally{try{d&&!d.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}return Array.from(a)}function _S(t,e){return e===void 0&&(e={}),Lt(t)?0:typeof t=="number"?t:Math.floor(j$(t,e))}function $$(t,e,n,r){if(!(t.length<=1)){var i=e.suffix,o=i===void 0?"...":i,a=e.minLength,s=e.maxLength,c=s===void 0?1/0:s,l=e.step,u=l===void 0?" ":l,f=e.margin,d=f===void 0?[0,0,0,0]:f,h=dL(r.getTextShape(t[0])),p=_S(u,h),v=a?_S(a,h):p,y=_S(c,h);(Lt(y)||y===1/0)&&(y=Math.max.apply(null,t.map(function(R){return R.getBBox().width})));for(var m=t.slice(),b=j(d,4),O=b[0],E=O===void 0?0:O,w=b[1],_=w===void 0?0:w,S=b[2],M=S===void 0?E:S,T=b[3],A=T===void 0?_:T,C=function(R){if(m.forEach(function(I){r.ellipsis(r.getTextShape(I),R,o)}),m=ux(t,n,d),m.length<1)return{value:void 0}},N=y;N>v+p;N-=p){var k=C(N);if(typeof k=="object")return k.value}}}function ugt(t){var e=t&&t.getRenderBounds();if(!e)return{width:0,height:0};var n=e.getMax(),r=e.getMin();return{width:n[0]-r[0],height:n[1]-r[1]}}function xL(t){var e=t.getLocalBounds(),n=e.min,r=e.max,i=j([n,r],2),o=j(i[0],2),a=o[0],s=o[1],c=j(i[1],2),l=c[0],u=c[1];return{x:a,y:s,width:l-a,height:u-s,left:a,bottom:u,top:s,right:l}}function fgt(t,e){var n=select(t).append("text").node();return n.attr(__assign(__assign({},e),{visibility:"hidden"})),n}function q$(t,e){var n=j(t,2),r=n[0],i=n[1],o=j(e,2),a=o[0],s=o[1];return r!==a&&i===s}function dgt(t,e){var n=__read(t,2),r=n[0],i=n[1],o=__read(e,2),a=o[0],s=o[1];return r===a&&i!==s}function K$(t,e){var n,r,i=e.attributes;try{for(var o=On(Object.entries(i)),a=o.next();!a.done;a=o.next()){var s=j(a.value,2),c=s[0],l=s[1];c!=="id"&&c!=="className"&&t.attr(c,l)}}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var Z$={parity:function(t,e){var n=e.seq,r=n===void 0?2:n;return t.filter(function(i,o){return o%r?(Gu(i),!1):!0})}},J$=function(t){return t.filter(gL)};function Q$(t,e,n,r){var i=t.length,o=e.keepHeader,a=e.keepTail;if(!(i<=1||i===2&&o&&a)){var s=Z$.parity,c=function(O){return O.forEach(r.show),O},l=2,u=t.slice(),f=t.slice(),d=Math.min.apply(Math,ut([1],j(t.map(function(O){return O.getBBox().width})),!1));if(n.type==="linear"&&(aL(n)||sL(n))){var h=xL(t[0]).left,p=xL(t[i-1]).right,v=Math.abs(p-h)||1;l=Math.max(Math.floor(i*d/v),l)}var y,m;for(o&&(y=u.splice(0,1)[0]),a&&(m=u.splice(-1,1)[0],u.reverse()),c(u);l<t.length&&ux(J$(m?ut(ut([m],j(f),!1),[y],!1):ut([y],j(f),!1)),n,e==null?void 0:e.margin).length;){if(m&&!y&&l%2===0){var b=u.splice(0,1);b.forEach(r.hide)}else if(m&&y){var b=u.splice(0,1);b.forEach(r.hide)}f=s(c(u),{seq:l}),l++}}}function tq(t,e,n,r){var i,o,a=e.optionalAngles,s=a===void 0?[0,45,90]:a,c=e.margin,l=e.recoverWhenFailed,u=l===void 0?!0:l,f=t.map(function(m){return m.getLocalEulerAngles()}),d=function(){return ux(t,n,c).length<1},h=function(m){return t.forEach(function(b,O){var E=Array.isArray(m)?m[O]:m;r.rotate(b,+E)})};try{for(var p=On(s),v=p.next();!v.done;v=p.next()){var y=v.value;if(h(y),d())return}}catch(m){i={error:m}}finally{try{v&&!v.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}u&&h(f)}function eq(t){var e=t.type,n=t.labelDirection;return e==="linear"&&aL(t)?n==="negative"?"bottom":"top":"middle"}function nq(t,e,n,r){var i=e.wordWrapWidth,o=i===void 0?50:i,a=e.maxLines,s=a===void 0?3:a,c=e.recoverWhenFailed,l=c===void 0?!0:c,u=e.margin,f=u===void 0?[0,0,0,0]:u,d=t.map(function(b){return b.attr("maxLines")||1}),h=Math.min.apply(Math,ut([],j(d),!1)),p=function(){return ux(t,n,f).length<1},v=eq(n),y=function(b){return t.forEach(function(O,E){var w=Array.isArray(b)?b[E]:b;r.wrap(O,o,w,v)})};if(!(h>s)){for(var m=h;m<=s;m++)if(y(m),p())return;l&&y(d)}}var rq=new Map([["hide",Q$],["rotate",tq],["ellipsis",$$],["wrap",nq]]);function iq(t,e,n){return e.labelOverlap.length<1?!1:n==="hide"?!e$(t[0]):n==="rotate"?!t.some(function(r){var i;return!!(!((i=r.attr("transform"))===null||i===void 0)&&i.includes("rotate"))}):n==="ellipsis"||n==="wrap"?t.filter(function(r){return r.querySelector("text")}).length>1:!0}function oq(t,e,n){var r=e.labelOverlap,i=r===void 0?[]:r;i.length&&i.forEach(function(o){var a=o.type,s=rq.get(a);iq(t,e,a)&&(s==null||s(t,o,e,n))})}function aq(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=function(r){return r==="positive"?-1:1};return t.reduce(function(r,i){return r*n(i)},1)}function bL(t){for(var e=t;e<0;)e+=360;return Math.round(e%360)}function wS(t,e){var n=j(t,2),r=n[0],i=n[1],o=j(e,2),a=o[0],s=o[1],c=j([r*a+i*s,r*s-i*a],2),l=c[0],u=c[1];return Math.atan2(u,l)}function sq(t){var e=(t+360)%180;return Mo(e,-90,90)||(e+=180),e}function cq(t,e,n){var r,i=n.labelAlign,o=(r=e.style.transform)===null||r===void 0?void 0:r.includes("rotate");if(o)return e.getLocalEulerAngles();var a=0,s=F0(t.value,n),c=ax(t.value,n);return i==="horizontal"?0:(i==="perpendicular"?a=wS([1,0],s):a=wS([c[0]<0?-1:1,0],c),sq(QR(a)))}function _L(t,e,n){var r=n.type,i=n.labelAlign,o=F0(t,n),a=bL(e),s=bL(QR(wS([1,0],o))),c="center",l="middle";return r==="linear"?[90,270].includes(s)&&a===0?(c="center",l=o[1]===1?"top":"bottom"):!(s%180)&&[90,270].includes(a)?c="center":s===0?(Mo(a,0,90,!1,!0)||Mo(a,0,90)||Mo(a,270,360))&&(c="start"):s===90?Mo(a,0,90,!1,!0)?c="start":(Mo(a,90,180)||Mo(a,270,360))&&(c="end"):s===270?Mo(a,0,90,!1,!0)?c="end":(Mo(a,90,180)||Mo(a,270,360))&&(c="start"):s===180&&(a===90?c="start":(Mo(a,0,90)||Mo(a,270,360))&&(c="end")):i==="parallel"?Mo(s,0,180,!0)?l="top":l="bottom":i==="horizontal"?Mo(s,90,270,!1)?c="end":(Mo(s,270,360,!1)||Mo(s,0,90))&&(c="start"):i==="perpendicular"&&(Mo(s,90,270)?c="end":c="start"),{textAlign:c,textBaseline:l}}function lq(t,e,n){e.setLocalEulerAngles(t);var r=e.__data__.value,i=_L(r,t,n),o=e.querySelector(sr.labelItem.class);o&&OL(o,i)}function wL(t,e,n){var r=n.showTick,i=n.tickLength,o=n.tickDirection,a=n.labelDirection,s=n.labelSpacing,c=e.indexOf(t),l=Ns(s,[t,c,e]),u=j([F0(t.value,n),aq(a,o)],2),f=u[0],d=u[1],h=d===1?Ns(r?i:0,[t,c,e]):0,p=j(D0(Gl(f,l+h),sx(t.value,n)),2),v=p[0],y=p[1];return{x:v,y}}function uq(t,e,n,r){var i=r.labelFormatter,o=Fa(i)?function(){return td(Ns(i,[t,e,n,F0(t.value,r)]))}:function(){return td(t.label||"")};return o}function OL(t,e){t.nodeName==="text"&&t.attr(e)}function EL(t){oq(this.node().childNodes,t,{hide:Gu,show:I0,rotate:function(e,n){lq(+n,e,t)},ellipsis:function(e,n,r){e&&xS(e,n||1/0,r)},wrap:function(e,n,r){e&&G$(e,n,r)},getTextShape:function(e){return e.querySelector("text")}})}function SL(t,e,n,r,i){var o=n.indexOf(e),a=Ke(t).append(uq(e,o,n,i)).attr("className",sr.labelItem.name).node(),s=j(zl(iL(r,[e,o,n])),2),c=s[0],l=s[1],u=l.transform,f=Ge(l,["transform"]);vL(a,u);var d=cq(e,a,i);return a.getLocalEulerAngles()||a.setLocalEulerAngles(d),OL(a,nt(nt({},_L(e.value,d,i)),c)),t.attr(f),a}function fq(t,e,n,r){var i=vS(e,n.labelFilter),o=gn(n,"label");return t.selectAll(sr.label.class).data(i,function(a,s){return s}).join(function(a){return a.append("g").attr("className",sr.label.name).transition(function(s){SL(this,s,e,o,n);var c=wL(s,e,n),l=c.x,u=c.y;return this.style.transform="translate(".concat(l,", ").concat(u,")"),null}).call(function(){EL.call(t,n)})},function(a){return a.transition(function(s){var c=this.querySelector(sr.labelItem.class),l=SL(this,s,e,o,n),u=JX(c,l,r.update),f=wL(s,e,n),d=f.x,h=f.y,p=uc(this,{transform:"translate(".concat(d,", ").concat(h,")")},r.update);return ut(ut([],j(u),!1),[p],!1)}).call(function(s){var c=Ln(s,"_transitions").flat().filter(gL);KX(c,function(){EL.call(t,n)})})},function(a){return a.transition(function(){var s=this,c=ox(this.childNodes[0],r.exit);return ep(c,function(){return Ke(s).remove()}),c})}).transitions()}function ML(t,e){return gS(t,e.tickDirection,e)}function dq(t,e){var n=j(t,2),r=n[0],i=n[1];return[[0,0],[r*e,i*e]]}function hq(t,e,n,r,i){var o=i.tickLength,a=j(dq(r,Ns(o,[t,e,n])),2),s=j(a[0],2),c=s[0],l=s[1],u=j(a[1],2),f=u[0],d=u[1];return{x1:c,x2:f,y1:l,y2:d}}function pq(t,e,n,r,i){var o=i.tickFormatter,a=ML(e.value,i),s="line";return Fa(o)&&(s=function(){return Ns(o,[e,n,r,a])}),t.append(s).attr("className",sr.tickItem.name)}function vq(t,e,n,r,i,o,a){var s=ML(t.value,o),c=hq(t,e,n,s,o),l=c.x1,u=c.x2,f=c.y1,d=c.y2,h=j(zl(iL(a,[t,e,n,s])),2),p=h[0],v=h[1];r.node().nodeName==="line"&&r.styles(nt({x1:l,x2:u,y1:f,y2:d},p)),i.attr(v),r.styles(p)}function PL(t,e,n,r,i,o){var a=pq(Ke(this),t,e,n,r);vq(t,e,n,a,this,r,i);var s=j(sx(t.value,r),2),c=s[0],l=s[1];return uc(this,{transform:"translate(".concat(c,", ").concat(l,")")},o)}function gq(t,e,n,r){var i=vS(e,n.tickFilter),o=gn(n,"tick");return t.selectAll(sr.tick.class).data(i,function(a){return a.id||a.label}).join(function(a){return a.append("g").attr("className",sr.tick.name).transition(function(s,c){return PL.call(this,s,c,i,n,o,!1)})},function(a){return a.transition(function(s,c){return this.removeChildren(),PL.call(this,s,c,i,n,o,r.update)})},function(a){return a.transition(function(){var s=this,c=ox(this.childNodes[0],r.exit);return ep(c,function(){return s.remove()}),c})}).transitions()}var Lr=function(){function t(e,n,r,i){e===void 0&&(e=0),n===void 0&&(n=0),r===void 0&&(r=0),i===void 0&&(i=0),this.x=0,this.y=0,this.width=0,this.height=0,this.x=e,this.y=n,this.width=r,this.height=i}return Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t.prototype.toJSON=function(){return{x:this.x,y:this.y,width:this.width,height:this.height,top:this.top,right:this.right,bottom:this.bottom,left:this.left}},t.prototype.isPointIn=function(e,n){return e>=this.left&&e<=this.right&&n>=this.top&&n<=this.bottom},t}();function hgt(t){var e=t.getRenderBounds(),n=__read(e.min,2),r=n[0],i=n[1],o=__read(e.max,2),a=o[0],s=o[1],c=a-r,l=s-i;return new Lr(r,i,c,l)}var TL=ks({text:"text"},"title");function fx(t){return/\S+-\S+/g.test(t)?t.split("-").map(function(e){return e[0]}):t.length>2?[t[0]]:t.split("")}function yq(t,e){var n=t.attributes,r=n.position,i=n.spacing,o=n.inset,a=n.text,s=t.getBBox(),c=e.getBBox(),l=fx(r),u=j(Po(a?i:0),4),f=u[0],d=u[1],h=u[2],p=u[3],v=j(Po(o),4),y=v[0],m=v[1],b=v[2],O=v[3],E=j([p+d,f+h],2),w=E[0],_=E[1],S=j([O+m,y+b],2),M=S[0],T=S[1];if(l[0]==="l")return new Lr(s.x,s.y,c.width+s.width+w+M,Math.max(c.height+T,s.height));if(l[0]==="t")return new Lr(s.x,s.y,Math.max(c.width+M,s.width),c.height+s.height+_+T);var A=j([e.attributes.width||c.width,e.attributes.height||c.height],2),C=A[0],N=A[1];return new Lr(c.x,c.y,C+s.width+w+M,N+s.height+_+T)}function mq(t,e){var n=Object.entries(e).reduce(function(r,i){var o=j(i,2),a=o[0],s=o[1],c=t.node().attr(a);return c||(r[a]=s),r},{});t.styles(n)}function xq(t){var e,n,r,i,o=t,a=o.width,s=o.height,c=o.position,l=j([+a/2,+s/2],2),u=l[0],f=l[1],d=j([+u,+f,"center","middle"],4),h=d[0],p=d[1],v=d[2],y=d[3],m=fx(c);return m.includes("l")&&(e=j([0,"start"],2),h=e[0],v=e[1]),m.includes("r")&&(n=j([+a,"end"],2),h=n[0],v=n[1]),m.includes("t")&&(r=j([0,"top"],2),p=r[0],y=r[1]),m.includes("b")&&(i=j([+s,"bottom"],2),p=i[0],y=i[1]),{x:h,y:p,textAlign:v,textBaseline:y}}var AL=function(t){xt(e,t);function e(n){return t.call(this,n,{text:"",width:0,height:0,fill:"#4a505a",fontWeight:"bold",fontSize:12,fontFamily:"sans-serif",inset:0,spacing:0,position:"top-left"})||this}return e.prototype.getAvailableSpace=function(){var n=this,r=this.attributes,i=r.width,o=r.height,a=r.position,s=r.spacing,c=r.inset,l=n.querySelector(TL.text.class);if(!l)return new Lr(0,0,+i,+o);var u=l.getBBox(),f=u.width,d=u.height,h=j(Po(s),4),p=h[0],v=h[1],y=h[2],m=h[3],b=j([0,0,+i,+o],4),O=b[0],E=b[1],w=b[2],_=b[3],S=fx(a);if(S.includes("i"))return new Lr(O,E,w,_);S.forEach(function(D,B){var F,G,X,q;D==="t"&&(F=j(B===0?[d+y,+o-d-y]:[0,+o],2),E=F[0],_=F[1]),D==="r"&&(G=j([+i-f-m],1),w=G[0]),D==="b"&&(X=j([+o-d-p],1),_=X[0]),D==="l"&&(q=j(B===0?[f+v,+i-f-v]:[0,+i],2),O=q[0],w=q[1])});var M=j(Po(c),4),T=M[0],A=M[1],C=M[2],N=M[3],k=j([N+A,T+C],2),R=k[0],I=k[1];return new Lr(O+N,E+T,w-R,_-I)},e.prototype.getBBox=function(){return this.title?this.title.getBBox():new Lr(0,0,0,0)},e.prototype.render=function(n,r){var i=this,o=n.width,a=n.height,s=n.position,c=n.spacing,l=Ge(n,["width","height","position","spacing"]),u=j(zl(l),1),f=u[0],d=xq(n),h=d.x,p=d.y,v=d.textAlign,y=d.textBaseline;Ba(!!l.text,Ke(r),function(m){i.title=m.maybeAppendByClassName(TL.text,"text").styles(f).call(mq,{x:h,y:p,textAlign:v,textBaseline:y}).node()})},e}(oo);function bq(t,e,n){var r=n.titlePosition,i=r===void 0?"lb":r,o=n.titleSpacing,a=fx(i),s=t.node().getLocalBounds(),c=j(s.min,2),l=c[0],u=c[1],f=j(s.halfExtents,2),d=f[0],h=f[1],p=j(e.node().getLocalBounds().halfExtents,2),v=p[0],y=p[1],m=j([l+d,u+h],2),b=m[0],O=m[1],E=j(Po(o),4),w=E[0],_=E[1],S=E[2],M=E[3];if(["start","end"].includes(i)&&n.type==="linear"){var T=n.startPos,A=n.endPos,C=j(i==="start"?[T,A]:[A,T],2),N=C[0],k=C[1],R=JR([-k[0]+N[0],-k[1]+N[1]]),I=j(Gl(R,w),2),D=I[0],B=I[1];return{x:N[0]+D,y:N[1]+B}}return a.includes("t")&&(O-=h+y+w),a.includes("r")&&(b+=d+v+_),a.includes("l")&&(b-=d+v+M),a.includes("b")&&(O+=h+y+S),{x:b,y:O}}function _q(t,e,n){var r=t.getGeometryBounds().halfExtents,i=r[1]*2;if(e==="vertical"){if(n==="left")return"rotate(-90) translate(0, ".concat(i/2,")");if(n==="right")return"rotate(-90) translate(0, -".concat(i/2,")")}return""}function CL(t,e,n,r,i){var o=gn(r,"title"),a=j(zl(o),2),s=a[0],c=a[1],l=c.transform,u=c.transformOrigin,f=Ge(c,["transform","transformOrigin"]);e.styles(f);var d=l||_q(t.node(),s.direction,s.position);t.styles(nt(nt({},s),{transformOrigin:u})),vL(t.node(),d);var h=bq(Ke(n._offscreen||n.querySelector(sr.mainGroup.class)),e,r),p=h.x,v=h.y,y=uc(e.node(),{transform:"translate(".concat(p,", ").concat(v,")")},i);return y}function wq(t,e,n,r){var i=n.titleText;return t.selectAll(sr.title.class).data([{title:i}].filter(function(o){return!!o.title}),function(o,a){return o.title}).join(function(o){return o.append(function(){return td(i)}).attr("className",sr.title.name).transition(function(){return CL(Ke(this),t,e,n,r.enter)})},function(o){return o.transition(function(){return CL(Ke(this),t,e,n,r.update)})},function(o){return o.remove()}).transitions()}function kL(t,e,n,r){var i=t.showLine,o=t.showTick,a=t.showLabel,s=e.maybeAppendByClassName(sr.lineGroup,"g"),c=Ba(i,s,function(h){return N$(h,t,r)})||[],l=e.maybeAppendByClassName(sr.tickGroup,"g"),u=Ba(o,l,function(h){return gq(h,n,t,r)})||[],f=e.maybeAppendByClassName(sr.labelGroup,"g"),d=Ba(a,f,function(h){return fq(h,n,t,r)})||[];return ut(ut(ut([],j(c),!1),j(u),!1),j(d),!1).filter(function(h){return!!h})}var OS=function(t){xt(e,t);function e(n){return t.call(this,n,lS)||this}return e.prototype.render=function(n,r,i){var o=this,a=n.titleText,s=n.data,c=n.animate,l=n.showTitle,u=n.showGrid,f=n.dataThreshold,d=n.truncRange,h=r$(s,f).filter(function(w){var _=w.value;return!(d&&_>d[0]&&_<d[1])}),p=XR(i===void 0?c:i),v=Ke(r).maybeAppendByClassName(sr.gridGroup,"g"),y=Ba(u,v,function(w){return D$(w,h,n,p)})||[],m=Ke(r).maybeAppendByClassName(sr.mainGroup,"g");a&&(!this.initialized&&p.enter||this.initialized&&p.update)&&kL(n,Ke(this.offscreenGroup),h,XR(!1));var b=kL(n,Ke(m.node()),h,p),O=Ke(r).maybeAppendByClassName(sr.titleGroup,"g"),E=Ba(l,O,function(w){return wq(w,o,n,p)})||[];return ut(ut(ut([],j(y),!1),j(b),!1),j(E),!1).flat().filter(function(w){return!!w})},e}(oo),ed=function(t){return t};class z0{constructor(e){this.options=bt({},this.getDefaultOptions()),this.update(e)}getOptions(){return this.options}update(e={}){this.options=bt({},this.options,e),this.rescale(e)}rescale(e){}}function dx(t,e){return e-t?n=>(n-t)/(e-t):n=>.5}function ip(t,...e){return e.reduce((n,r)=>i=>n(r(i)),t)}function ES(t,e,n,r,i){let o=n||0,a=r||t.length;const s=i||(c=>c);for(;o<a;){const c=Math.floor((o+a)/2);s(t[c])>e?a=c:o=c+1}return o}var Oq=gt(19818),Eq=gt.n(Oq);function SS(t,e,n){let r=n;return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function Sq(t){const e=t[0]/360,n=t[1]/100,r=t[2]/100,i=t[3];if(n===0)return[r*255,r*255,r*255,i];const o=r<.5?r*(1+n):r+n-r*n,a=2*r-o,s=SS(a,o,e+1/3),c=SS(a,o,e),l=SS(a,o,e-1/3);return[s*255,c*255,l*255,i]}function NL(t){const e=Eq().get(t);if(!e)return null;const{model:n,value:r}=e;return n==="rgb"?r:n==="hsl"?Sq(r):null}const op=(t,e)=>n=>t*(1-n)+e*n,Mq=(t,e)=>{const n=NL(t),r=NL(e);return n===null||r===null?n?()=>t:()=>e:i=>{const o=new Array(4);for(let u=0;u<4;u+=1){const f=n[u],d=r[u];o[u]=f*(1-i)+d*i}const[a,s,c,l]=o;return`rgba(${Math.round(a)}, ${Math.round(s)}, ${Math.round(c)}, ${l})`}},W0=(t,e)=>typeof t=="number"&&typeof e=="number"?op(t,e):typeof t=="string"&&typeof e=="string"?Mq(t,e):()=>t,Pq=(t,e)=>{const n=op(t,e);return r=>Math.round(n(r))};function Tq(t){return t===null}function hx(t){return!le(t)&&!Tq(t)&&!Number.isNaN(t)}const MS=Math.sqrt(50),PS=Math.sqrt(10),TS=Math.sqrt(2);function px(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/ki(10,i);return i>=0?(o>=MS?10:o>=PS?5:o>=TS?2:1)*ki(10,i):-ki(10,-i)/(o>=MS?10:o>=PS?5:o>=TS?2:1)}function RL(t,e,n){const r=Math.abs(e-t)/Math.max(0,n);let i=ki(10,Math.floor(Math.log(r)/Math.LN10));const o=r/i;return o>=MS?i*=10:o>=PS?i*=5:o>=TS&&(i*=2),e<t?-i:i}const LL=(t,e,n=5)=>{const r=[t,e];let i=0,o=r.length-1,a=r[i],s=r[o],c;return s<a&&([a,s]=[s,a],[i,o]=[o,i]),c=px(a,s,n),c>0?(a=Math.floor(a/c)*c,s=Math.ceil(s/c)*c,c=px(a,s,n)):c<0&&(a=Math.ceil(a*c)/c,s=Math.floor(s*c)/c,c=px(a,s,n)),c>0?(r[i]=Math.floor(a/c)*c,r[o]=Math.ceil(s/c)*c):c<0&&(r[i]=Math.ceil(a*c)/c,r[o]=Math.floor(s*c)/c),r};function Aq(t,e){const n=e<t?e:t,r=t>e?t:e;return i=>Math.min(Math.max(n,i),r)}const Cq=(t,e,n)=>{const[r,i]=t,[o,a]=e;let s,c;return r<i?(s=dx(r,i),c=n(o,a)):(s=dx(i,r),c=n(a,o)),ip(c,s)},kq=(t,e,n)=>{const r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=t[0]>t[r],s=a?[...t].reverse():t,c=a?[...e].reverse():e;for(let l=0;l<r;l+=1)i[l]=dx(s[l],s[l+1]),o[l]=n(c[l],c[l+1]);return l=>{const u=ES(t,l,1,r)-1,f=i[u],d=o[u];return ip(d,f)(l)}},IL=(t,e,n,r)=>(Math.min(t.length,e.length)>2?kq:Cq)(t,e,r?Pq:n);class vx extends z0{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:op,tickCount:5}}map(e){return hx(e)?this.output(e):this.options.unknown}invert(e){return hx(e)?this.input(e):this.options.unknown}nice(){if(!this.options.nice)return;const[e,n,r,...i]=this.getTickMethodOptions();this.options.domain=this.chooseNice()(e,n,r,...i)}getTicks(){const{tickMethod:e}=this.options,[n,r,i,...o]=this.getTickMethodOptions();return e(n,r,i,...o)}getTickMethodOptions(){const{domain:e,tickCount:n}=this.options,r=e[0],i=e[e.length-1];return[r,i,n]}chooseNice(){return LL}rescale(){this.nice();const[e,n]=this.chooseTransforms();this.composeOutput(e,this.chooseClamp(e)),this.composeInput(e,n,this.chooseClamp(n))}chooseClamp(e){const{clamp:n,range:r}=this.options,i=this.options.domain.map(e),o=Math.min(i.length,r.length);return n?Aq(i[0],i[o-1]):ed}composeOutput(e,n){const{domain:r,range:i,round:o,interpolate:a}=this.options,s=IL(r.map(e),i,a,o);this.output=ip(s,n,e)}composeInput(e,n,r){const{domain:i,range:o}=this.options,a=IL(o,i.map(e),op);this.input=ip(n,r,a)}}const nd=(t,e,n)=>{let r,i,o=t,a=e;if(o===a&&n>0)return[o];let s=px(o,a,n);if(s===0||!Number.isFinite(s))return[];if(s>0){o=Math.ceil(o/s),a=Math.floor(a/s),i=new Array(r=Math.ceil(a-o+1));for(let c=0;c<r;c+=1)i[c]=(o+c)*s}else{s=-s,o=Math.ceil(o*s),a=Math.floor(a*s),i=new Array(r=Math.ceil(a-o+1));for(let c=0;c<r;c+=1)i[c]=(o+c)/s}return i};class $o extends vx{getDefaultOptions(){return{domain:[0,1],range:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolate:W0,tickMethod:nd,tickCount:5}}chooseTransforms(){return[ed,ed]}clone(){return new $o(this.options)}}function Nq(t,e){if(t){var n;if(ri(t))for(var r=0,i=t.length;r<i&&(n=e(t[r],r),n!==!1);r++);else if(Yi(t)){for(var o in t)if(t.hasOwnProperty(o)&&(n=e(t[o],o),n===!1))break}}}var AS=Nq,Rq=function(t,e,n){if(!ri(t)&&!Bl(t))return t;var r=n;return AS(t,function(i,o){r=e(r,i,o)}),r},DL=Rq,CS=function(t,e){return DL(t,function(n,r,i){return e.includes(i)||(n[i]=r),n},{})};function Wl(t,e){let n,r;if(e===void 0)for(const i of t)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let o of t)(o=e(o,++i,t))!=null&&(n===void 0?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}return[n,r]}function BL(t){for(var e=1/0,n=1/0,r=-1/0,i=-1/0,o=0;o<t.length;o++){var a=t[o],s=a.x,c=a.y,l=a.width,u=a.height,f=j([s+l,c+u],2),d=f[0],h=f[1];s<e&&(e=s),c<n&&(n=c),d>r&&(r=d),h>i&&(i=h)}return new Lr(e,n,r-e,i-n)}var Lq=function(t,e,n){var r=t.width,i=t.height,o=n.flexDirection,a=o===void 0?"row":o,s=n.flexWrap,c=s===void 0?"nowrap":s,l=n.justifyContent,u=l===void 0?"flex-start":l,f=n.alignContent,d=f===void 0?"flex-start":f,h=n.alignItems,p=h===void 0?"flex-start":h,v=a==="row",y=a==="row"||a==="column",m=v?y?[1,0]:[-1,0]:y?[0,1]:[0,-1],b=j([0,0],2),O=b[0],E=b[1],w=e.map(function(k){var R,I=k.width,D=k.height,B=j([O,E],2),F=B[0],G=B[1];return R=j([O+I*m[0],E+D*m[1]],2),O=R[0],E=R[1],new Lr(F,G,I,D)}),_=BL(w),S={"flex-start":0,"flex-end":v?r-_.width:i-_.height,center:v?(r-_.width)/2:(i-_.height)/2},M=w.map(function(k){var R=k.x,I=k.y,D=Lr.fromRect(k);return D.x=v?R+S[u]:R,D.y=v?I:I+S[u],D}),T=BL(M),A=function(k){var R=j(v?["height",i]:["width",r],2),I=R[0],D=R[1];switch(p){case"flex-start":return 0;case"flex-end":return D-k[I];case"center":return D/2-k[I]/2;default:return 0}},C=M.map(function(k){var R=k.x,I=k.y,D=Lr.fromRect(k);return D.x=v?R:R+A(D),D.y=v?I+A(D):I,D}),N=C.map(function(k){var R,I,D=Lr.fromRect(k);return D.x+=(R=t.x)!==null&&R!==void 0?R:0,D.y+=(I=t.y)!==null&&I!==void 0?I:0,D});return N},Iq=function(t,e,n){return[]},Dq=function(t,e,n){if(e.length===0)return[];var r={flex:Lq,grid:Iq},i=n.display in r?r[n.display]:null;return(i==null?void 0:i.call(null,t,e,n))||[]},Bq=function(t){xt(e,t);function e(n){var r=t.call(this,n)||this;r.layoutEvents=[He.BOUNDS_CHANGED,He.INSERTED,He.REMOVED],r.$margin=Po(0),r.$padding=Po(0);var i=n.style||{},o=i.margin,a=o===void 0?0:o,s=i.padding,c=s===void 0?0:s;return r.margin=a,r.padding=c,r.isMutationObserved=!0,r.bindEvents(),r}return Object.defineProperty(e.prototype,"margin",{get:function(){return this.$margin},set:function(n){this.$margin=Po(n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"padding",{get:function(){return this.$padding},set:function(n){this.$padding=Po(n)},enumerable:!1,configurable:!0}),e.prototype.getBBox=function(){var n=this.attributes,r=n.x,i=r===void 0?0:r,o=n.y,a=o===void 0?0:o,s=n.width,c=n.height,l=j(this.$margin,4),u=l[0],f=l[1],d=l[2],h=l[3];return new Lr(i-h,a-u,s+h+f,c+u+d)},e.prototype.appendChild=function(n,r){return n.isMutationObserved=!0,t.prototype.appendChild.call(this,n,r),n},e.prototype.getAvailableSpace=function(){var n=this.attributes,r=n.width,i=n.height,o=j(this.$padding,4),a=o[0],s=o[1],c=o[2],l=o[3],u=j(this.$margin,4),f=u[0],d=u[3];return new Lr(l+d,a+f,r-l-s,i-a-c)},e.prototype.layout=function(){if(!(!this.attributes.display||!this.isConnected)&&!this.children.some(function(a){return!a.isConnected}))try{var n=this.attributes,r=n.x,i=n.y;this.style.transform="translate(".concat(r,", ").concat(i,")");var o=Dq(this.getAvailableSpace(),this.children.map(function(a){return a.getBBox()}),this.attributes);this.children.forEach(function(a,s){var c=o[s],l=c.x,u=c.y;a.style.transform="translate(".concat(l,", ").concat(u,")")})}catch(a){}},e.prototype.bindEvents=function(){var n=this;this.layoutEvents.forEach(function(r){n.addEventListener(r,function(i){i.target.isMutationObserved=!0,n.layout()})})},e.prototype.attributeChangedCallback=function(n,r,i){n==="margin"?this.margin=i:n==="padding"&&(this.padding=i),this.layout()},e}(Mt),Fq=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function jq(t){return class extends Tt{constructor(e){super(e),this.descriptor=t}connectedCallback(){var e,n;(n=(e=this.descriptor).render)===null||n===void 0||n.call(e,this.attributes,this)}update(e={}){var n,r;this.attr(bt({},this.attributes,e)),(r=(n=this.descriptor).render)===null||r===void 0||r.call(n,this.attributes,this)}}}function FL(t,e,n){return t.querySelector(e)?Ie(t).select(e):Ie(t).append(n)}function gx(t){return Array.isArray(t)?t.join(", "):`${t||""}`}function jL(t,e){const n={display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center"};let{flexDirection:r,justifyContent:i,alignItems:o}=n;const a={top:["row","flex-start","center"],bottom:["row","flex-start","center"],left:["column","flex-start","center"],right:["column","flex-start","center"],center:["column","center","center"]};return t in a&&([r,i,o]=a[t]),Object.assign({display:"flex",flexDirection:r,justifyContent:i,alignItems:o},e)}class GL extends Bq{get child(){var e;return(e=this.children)===null||e===void 0?void 0:e[0]}update(e){var n;this.attr(e);const{subOptions:r}=e;(n=this.child)===null||n===void 0||n.update(r)}}class Gq extends GL{update(e){var n;const{subOptions:r}=e;this.attr(e),(n=this.child)===null||n===void 0||n.update(r)}}function qc(t,e){var n;return(n=t.filter(r=>r.getOptions().name===e))===null||n===void 0?void 0:n[0]}function zq(t){return t==="horizontal"||t===0}function Wq(t){return t==="vertical"||t===-Math.PI/2}function zL(t,e,n){const{bbox:r}=t,{position:i="top",size:o,length:a}=e,s=["top","bottom","center"].includes(i),[c,l]=s?[r.height,r.width]:[r.width,r.height],{defaultSize:u,defaultLength:f}=n.props,d=o||u||c,h=a||f||l,p=s?"horizontal":"vertical",[v,y]=s?[h,d]:[d,h];return{orientation:p,width:v,height:y,size:d,length:h}}function Yq(t){return t.find(e=>e.getOptions().domain.length>0).getOptions().domain}function yx(t){const e=["arrow","crosshairs","grid","handle","handleLabel","indicator","label","line","tick","tip","title","trunc"],{style:n}=t,r=Fq(t,["style"]),i={};return Object.entries(r).forEach(([o,a])=>{e.includes(o)?i[`show${Fu(o)}`]=a:i[o]=a}),Object.assign(Object.assign({},i),n)}var WL=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function YL(t,e){const{eulerAngles:n,origin:r}=e;r&&t.setOrigin(r),n&&t.rotate(n[0],n[1],n[2])}function HL(t){const{innerWidth:e,innerHeight:n,depth:r}=t.getOptions();return[e,n,r]}function Hq(t,e){const{width:n,height:r}=e.getOptions();return i=>{if(!HR(e))return i;const o=t==="bottom"?[i,1]:[0,i],a=e.map(o);if(t==="bottom"){const s=a[0];return new $o({domain:[0,n],range:[0,1]}).map(s)}else if(t==="left"){const s=a[1];return new $o({domain:[0,r],range:[0,1]}).map(s)}return i}}function Uq(t,e,n){if(t.getTicks)return t.getTicks();if(!n)return e;const[r,i]=Wl(e,a=>+a),{tickCount:o}=t.getOptions();return n(r,i,o)}function Vq(t,e){if(ar(e))return h=>h;const n=e.getOptions(),{innerWidth:r,innerHeight:i,insetTop:o,insetBottom:a,insetLeft:s,insetRight:c}=n,[l,u,f]=t==="left"||t==="right"?[o,a,i]:[s,c,r],d=new $o({domain:[0,1],range:[l/f,1-u/f]});return h=>d.map(h)}function UL(t,e,n,r,i,o,a,s){var c;(n!==void 0||o!==void 0)&&t.update(Object.assign(Object.assign({},n&&{tickCount:n}),o&&{tickMethod:o}));const l=Uq(t,e,o),u=i?l.filter(i):l,f=m=>m instanceof Date?String(m):typeof m=="object"&&m?m:String(m),d=r||((c=t.getFormatter)===null||c===void 0?void 0:c.call(t))||f,h=Vq(a,s),p=Hq(a,s),v=m=>["top","bottom","center","outer"].includes(m),y=m=>["left","right"].includes(m);return ar(s)||Rr(s)?u.map((m,b,O)=>{var E,w;const _=((E=t.getBandWidth)===null||E===void 0?void 0:E.call(t,m))/2||0,S=h(t.map(m)+_);return{value:R0(s)&&a==="center"||Rr(s)&&((w=t.getTicks)===null||w===void 0?void 0:w.call(t))&&v(a)||Rr(s)&&y(a)?1-S:S,label:f(d(ex(m),b,O)),id:String(b)}}):u.map((m,b,O)=>{var E;const w=((E=t.getBandWidth)===null||E===void 0?void 0:E.call(t,m))/2||0,_=p(h(t.map(m)+w));return{value:y(a)?1-_:_,label:f(d(ex(m),b,O)),id:String(b)}})}function Xq(t,e,n="xy"){const[r,i,o]=HL(e);return n==="xy"?t.includes("bottom")||t.includes("top")?i:r:n==="xz"?t.includes("bottom")||t.includes("top")?o:r:t.includes("bottom")||t.includes("top")?i:o}function $q(t=[],e){if(t.length>0)return t;const{labelAutoRotate:n,labelAutoHide:r,labelAutoEllipsis:i,labelAutoWrap:o}=e,a=[],s=(c,l)=>{l&&a.push(Object.assign(Object.assign({},c),l))};return s({type:"rotate",optionalAngles:[0,15,30,45,60,90]},n),s({type:"ellipsis",minLength:20},i),s({type:"hide"},r),s({type:"wrap",wordWrapWidth:100,maxLines:3,recoveryWhenFail:!0},o),a}function qq(t,e,n,r,i){const{x:o,y:a,width:s,height:c}=e,l=[o+s/2,a+c/2],u=Math.min(s,c)/2,[f,d]=sS(i),[h,p]=HL(i),v=Math.min(h,p)/2,y={center:l,radius:u,startAngle:f,endAngle:d,gridLength:(r-n)*v};if(t==="inner"){const{insetLeft:m,insetTop:b}=i.getOptions();return Object.assign(Object.assign({},y),{center:[l[0]-m,l[1]-b],labelAlign:"perpendicular",labelDirection:"positive",tickDirection:"positive",gridDirection:"negative"})}return Object.assign(Object.assign({},y),{labelAlign:"parallel",labelDirection:"negative",tickDirection:"negative",gridDirection:"positive"})}function Kq(t,e,n){return UR(e)||L0(e)?!1:t===void 0?!!n.getTicks:t}function Zq(t){const{depth:e}=t.getOptions();return e?{tickIsBillboard:!0,lineIsBillboard:!0,labelIsBillboard:!0,titleIsBillboard:!0,gridIsBillboard:!0}:{}}function Jq(t,e,n,r,i){const{x:o,y:a,width:s,height:c}=n;if(t==="bottom")return{startPos:[o,a],endPos:[o+s,a]};if(t==="left")return{startPos:[o+s,a+c],endPos:[o+s,a]};if(t==="right")return{startPos:[o,a+c],endPos:[o,a]};if(t==="top")return{startPos:[o,a+c],endPos:[o+s,a+c]};if(t==="center"){if(e==="vertical")return{startPos:[o,a],endPos:[o,a+c]};if(e==="horizontal")return{startPos:[o,a],endPos:[o+s,a]};if(typeof e=="number"){const[l,u]=r.getCenter(),[f,d]=nx(r),[h,p]=sS(r),v=Math.min(s,c)/2,{insetLeft:y,insetTop:m}=r.getOptions(),b=f*v,O=d*v,[E,w]=[l+o-y,u+a-m],[_,S]=[Math.cos(e),Math.sin(e)],M=[E+O*_,w+O*S],T=[E+b*_,w+b*S],A=()=>{const{domain:N}=i.getOptions();return N.length},C=ar(r)&&i?A():3;return{startPos:M,endPos:T,gridClosed:Math.abs(p-h-360)<1e-6,gridCenter:[E,w],gridControlAngles:new Array(C).fill(0).map((N,k,R)=>(p-h)/C*k)}}}return{}}const Qq=t=>{const{order:e,size:n,position:r,orientation:i,labelFormatter:o,tickFilter:a,tickCount:s,tickMethod:c,important:l={},style:u={},indexBBox:f,title:d,grid:h=!1}=t,p=WL(t,["order","size","position","orientation","labelFormatter","tickFilter","tickCount","tickMethod","important","style","indexBBox","title","grid"]);return({scales:[v],value:y,coordinate:m,theme:b})=>{const{bbox:O}=y,{domain:E}=v.getOptions(),w=UL(v,E,s,o,a,c,r,m),_=f?w.map((k,R)=>{const I=f.get(R);return!I||I[0]!==k.label?k:Object.assign(Object.assign({},k),{bbox:I[1]})}):w,[S,M]=nx(m),T=qq(r,O,S,M,m),{axis:A,axisArc:C={}}=b,N=yx(bt({},A,C,T,Object.assign(Object.assign({type:"arc",data:_,titleText:gx(d),grid:h},p),l)));return new OS({style:CS(N,["transform"])})}};function tK(t,e,n,r,i,o){const a=n.axis,s=["top","right","bottom","left"].includes(i)?n[`axis${tS(i)}`]:n.axisLinear,c=t.getOptions().name,l=n[`axis${Fu(c)}`]||{};return Object.assign({},a,s,l)}function eK(t,e,n,r,i,o){const a=tK(t,e,n,r,i,o);return i==="center"?Object.assign(Object.assign(Object.assign(Object.assign({},a),{labelDirection:r==="right"?"negative":"positive"}),r==="center"?{labelTransform:"translate(50%,0)"}:null),{tickDirection:r==="right"?"negative":"positive",labelSpacing:r==="center"?0:4,titleSpacing:Wq(o)?10:0,tick:r==="center"?!1:void 0}):a}const nK=t=>{const{direction:e="left",important:n={},labelFormatter:r,order:i,orientation:o,actualPosition:a,position:s,size:c,style:l={},title:u,tickCount:f,tickFilter:d,tickMethod:h,transform:p,indexBBox:v}=t,y=WL(t,["direction","important","labelFormatter","order","orientation","actualPosition","position","size","style","title","tickCount","tickFilter","tickMethod","transform","indexBBox"]);return({scales:m,value:b,coordinate:O,theme:E})=>{const{bbox:w}=b,[_]=m,{domain:S,xScale:M}=_.getOptions(),T=eK(_,O,E,e,s,o),A=Object.assign(Object.assign(Object.assign({},T),l),y),C=Xq(a||s,O,t.plane),N=Jq(s,o,w,O,M),k=Zq(O),R=UL(_,S,f,r,d,h,s,O),I=v?R.map((F,G)=>{const X=v.get(G);return!X||X[0]!==F.label?F:Object.assign(Object.assign({},F),{bbox:X[1]})}):R,D=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},A),{type:"linear",data:I,crossSize:c,titleText:gx(u),labelOverlap:$q(p,A),grid:Kq(A.grid,O,_),gridLength:C,line:!0,indexBBox:v}),A.line?null:{lineOpacity:0}),N),k),n);return D.labelOverlap.find(F=>F.type==="hide")&&(D.crossSize=!1),new OS({className:"axis",style:yx(D)})}},VL=t=>e=>{const{labelFormatter:n,labelFilter:r=()=>!0}=e;return i=>{var o;const{scales:[a]}=i,s=((o=a.getTicks)===null||o===void 0?void 0:o.call(a))||a.getOptions().domain,c=typeof n=="string"?ju(n):n,l=(f,d,h)=>r(s[d],d,s),u=Object.assign(Object.assign({},e),{labelFormatter:c,labelFilter:l,scale:a});return t(u)(i)}},zu=VL(nK),XL=VL(Qq);zu.props={defaultPosition:"center",defaultSize:45,defaultOrder:0,defaultCrossPadding:[12,12],defaultPadding:[12,12]},XL.props={defaultPosition:"outer",defaultOrientation:"vertical",defaultSize:45,defaultOrder:0,defaultCrossPadding:[12,12],defaultPadding:[12,12]};var rK=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function iK(t){const e=t%(Math.PI*2);return e===Math.PI/2?{titleTransform:"translate(0, 50%)"}:e>-Math.PI/2&&e<Math.PI/2?{titleTransform:"translate(50%, 0)"}:e>Math.PI/2&&e<Math.PI*3/2?{titleTransform:"translate(-50%, 0)"}:{}}function oK(t,e,n,r){const{radar:i}=t,[o]=r,a=o.getOptions().name,[s,c]=sS(n),{axisRadar:l={}}=e;return Object.assign(Object.assign({},l),{grid:a==="position",gridConnect:"line",gridControlAngles:new Array(i.count).fill(0).map((u,f)=>(c-s)/i.count*f)})}const $L=t=>{const{important:e={}}=t,n=rK(t,["important"]);return r=>{const{theme:i,coordinate:o,scales:a}=r;return zu(Object.assign(Object.assign(Object.assign({},n),iK(t.orientation)),{important:Object.assign(Object.assign({},oK(t,i,o,a)),e)}))(r)}};$L.props=Object.assign(Object.assign({},zu.props),{defaultPosition:"center"});function mx(t,e){return+t.toPrecision(e)}function pgt(t){return t.toLocaleString()}function vgt(t){return t.toExponential()}function ggt(t,e){return e===void 0&&(e=0),Math.abs(t)<1e3?String(t):"".concat(mx(t/1e3,e).toLocaleString(),"K")}var ygt=function(t,e,n){return t<0&&Number.isFinite(t)?e:n},mgt=function(t,e,n){return t>0&&Number.isFinite(t)?e:n},xgt=function(t,e){return t*e},bgt=function(t,e){return t/2+(e||0)/2};function xx(t){var e=t.canvas,n=t.touches,r=t.offsetX,i=t.offsetY;if(e){var o=e.x,a=e.y;return[o,a]}if(n){var s=n[0],c=s.clientX,l=s.clientY;return[c,l]}return r&&i?[r,i]:[0,0]}var aK={backgroundFill:"#262626",backgroundLineCap:"round",backgroundLineWidth:1,backgroundStroke:"#333",backgroundZIndex:-1,formatter:function(t){return t.toString()},labelFill:"#fff",labelFontSize:12,labelTextBaseline:"middle",padding:[2,4],position:"right",radius:0,zIndex:999},kS=ks({background:"background",labelGroup:"label-group",label:"label"},"indicator"),sK=function(t){xt(e,t);function e(n){var r=t.call(this,n,aK)||this;return r.point=[0,0],r.group=r.appendChild(new Mt({})),r.isMutationObserved=!0,r}return e.prototype.renderBackground=function(){if(this.label){var n=this.attributes,r=n.position,i=n.padding,o=j(Po(i),4),a=o[0],s=o[1],c=o[2],l=o[3],u=this.label.node().getLocalBounds(),f=u.min,d=u.max,h=new Lr(f[0]-l,f[1]-a,d[0]+s-f[0]+l,d[1]+c-f[1]+a),p=this.getPath(r,h),v=gn(this.attributes,"background");this.background=Ke(this.group).maybeAppendByClassName(kS.background,"path").styles(nt(nt({},v),{d:p})),this.group.appendChild(this.label.node())}},e.prototype.renderLabel=function(){var n=this.attributes,r=n.formatter,i=n.labelText,o=gn(this.attributes,"label"),a=j(zl(o),2),s=a[0],c=a[1],l=s.text,u=Ge(s,["text"]);if(this.label=Ke(this.group).maybeAppendByClassName(kS.labelGroup,"g").styles(c),!!i){var f=this.label.maybeAppendByClassName(kS.label,function(){return td(r(i))}).style("text",r(i).toString());f.selectAll("text").styles(u)}},e.prototype.adjustLayout=function(){var n=j(this.point,2),r=n[0],i=n[1],o=this.attributes,a=o.x,s=o.y;this.group.attr("transform","translate(".concat(a-r,", ").concat(s-i,")"))},e.prototype.getPath=function(n,r){var i=this.attributes.radius,o=r.x,a=r.y,s=r.width,c=r.height,l=[["M",o+i,a],["L",o+s-i,a],["A",i,i,0,0,1,o+s,a+i],["L",o+s,a+c-i],["A",i,i,0,0,1,o+s-i,a+c],["L",o+i,a+c],["A",i,i,0,0,1,o,a+c-i],["L",o,a+i],["A",i,i,0,0,1,o+i,a],["Z"]],u={top:4,right:6,bottom:0,left:2},f=u[n],d=this.createCorner([l[f].slice(-2),l[f+1].slice(-2)]);return l.splice.apply(l,ut([f+1,1],j(d),!1)),l[0][0]="M",l},e.prototype.createCorner=function(n,r){r===void 0&&(r=10);var i=.8,o=q$.apply(void 0,ut([],j(n),!1)),a=j(n,2),s=j(a[0],2),c=s[0],l=s[1],u=j(a[1],2),f=u[0],d=u[1],h=j(o?[f-c,[c,f]]:[d-l,[l,d]],2),p=h[0],v=j(h[1],2),y=v[0],m=v[1],b=p/2,O=p/Math.abs(p),E=r*O,w=E/2,_=E*Math.sqrt(3)/2*i,S=j([y,y+b-w,y+b,y+b+w,m],5),M=S[0],T=S[1],A=S[2],C=S[3],N=S[4];return o?(this.point=[A,l-_],[["L",M,l],["L",T,l],["L",A,l-_],["L",C,l],["L",N,l]]):(this.point=[c+_,A],[["L",c,M],["L",c,T],["L",c+_,A],["L",c,C],["L",c,N]])},e.prototype.applyVisibility=function(){var n=this.attributes.visibility;n==="hidden"?Gu(this):I0(this)},e.prototype.bindEvents=function(){this.label.on(He.BOUNDS_CHANGED,this.renderBackground)},e.prototype.render=function(){this.renderLabel(),this.renderBackground(),this.adjustLayout(),this.applyVisibility()},e}(oo),qL={fill:"#fff",lineWidth:1,radius:2,size:10,stroke:"#bfbfbf",strokeOpacity:1,zIndex:0},KL={fill:"#000",fillOpacity:.45,fontSize:12,textAlign:"center",textBaseline:"middle",zIndex:1},ZL={x:0,y:0,orientation:"horizontal",showLabel:!0,type:"start"},Kc=ks({foreground:"foreground",handle:"handle",selection:"selection",sparkline:"sparkline",sparklineGroup:"sparkline-group",track:"track",brushArea:"brush-area"},"slider"),Wu=ks({labelGroup:"label-group",label:"label",iconGroup:"icon-group",icon:"icon",iconRect:"icon-rect",iconLine:"icon-line"},"handle"),cK=function(t){xt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(n,r){var i=n.x,o=n.y,a=n.size,s=a===void 0?10:a,c=n.radius,l=c===void 0?s/4:c,u=n.orientation,f=Ge(n,["x","y","size","radius","orientation"]),d=s,h=d*2.4,p=Ke(r).maybeAppendByClassName(Wu.iconRect,"rect").styles(nt(nt({},f),{width:d,height:h,radius:l,x:i-d/2,y:o-h/2,transformOrigin:"center"})),v=i+1/3*d-d/2,y=i+2/3*d-d/2,m=o+1/4*h-h/2,b=o+3/4*h-h/2;p.maybeAppendByClassName("".concat(Wu.iconLine,"-1"),"line").styles(nt({x1:v,x2:v,y1:m,y2:b},f)),p.maybeAppendByClassName("".concat(Wu.iconLine,"-2"),"line").styles(nt({x1:y,x2:y,y1:m,y2:b},f)),u==="vertical"&&(p.node().style.transform="rotate(90)")},e}(oo),JL=function(t){xt(e,t);function e(n){return t.call(this,n,ZL)||this}return e.prototype.renderLabel=function(n){var r=this,i=this.attributes,o=i.x,a=i.y,s=i.showLabel,c=gn(this.attributes,"label"),l=c.x,u=l===void 0?0:l,f=c.y,d=f===void 0?0:f,h=c.transform,p=c.transformOrigin,v=Ge(c,["x","y","transform","transformOrigin"]),y=j(zl(v,[]),2),m=y[0],b=y[1],O=Ke(n).maybeAppendByClassName(Wu.labelGroup,"g").styles(b),E=nt(nt({},KL),m),w=E.text,_=Ge(E,["text"]);Ba(!!s,O,function(S){r.label=S.maybeAppendByClassName(Wu.label,"text").styles(nt(nt({},_),{x:o+u,y:a+d,transform:h,transformOrigin:p,text:"".concat(w)})),r.label.on("mousedown",function(M){M.stopPropagation()}),r.label.on("touchstart",function(M){M.stopPropagation()})})},e.prototype.renderIcon=function(n){var r=this.attributes,i=r.x,o=r.y,a=r.orientation,s=r.type,c=nt(nt({x:i,y:o,orientation:a},qL),gn(this.attributes,"icon")),l=this.attributes.iconShape,u=l===void 0?function(){return new cK({style:c})}:l,f=Ke(n).maybeAppendByClassName(Wu.iconGroup,"g");f.selectAll(Wu.icon.class).data([u]).join(function(d){return d.append(typeof u=="string"?u:function(){return u(s)}).attr("className",Wu.icon.name)},function(d){return d.update(c)},function(d){return d.remove()})},e.prototype.render=function(n,r){this.renderIcon(r),this.renderLabel(r)},e}(oo),QL=function(t,e,n){return[["M",t-n,e],["A",n,n,0,1,0,t+n,e],["A",n,n,0,1,0,t-n,e],["Z"]]},lK=QL,uK=function(t,e,n){return[["M",t-n,e-n],["L",t+n,e-n],["L",t+n,e+n],["L",t-n,e+n],["Z"]]},fK=function(t,e,n){return[["M",t-n,e],["L",t,e-n],["L",t+n,e],["L",t,e+n],["Z"]]},dK=function(t,e,n){var r=n*Math.sin(.3333333333333333*Math.PI);return[["M",t-n,e+r],["L",t,e-r],["L",t+n,e+r],["Z"]]},hK=function(t,e,n){var r=n*Math.sin(.3333333333333333*Math.PI);return[["M",t-n,e-r],["L",t+n,e-r],["L",t,e+r],["Z"]]},pK=function(t,e,n){var r=n/2*Math.sqrt(3);return[["M",t,e-n],["L",t+r,e-n/2],["L",t+r,e+n/2],["L",t,e+n],["L",t-r,e+n/2],["L",t-r,e-n/2],["Z"]]},vK=function(t,e,n){var r=n-1.5;return[["M",t-n,e-r],["L",t+n,e+r],["L",t+n,e-r],["L",t-n,e+r],["Z"]]},tI=function(t,e,n){return[["M",t,e+n],["L",t,e-n]]},gK=function(t,e,n){return[["M",t-n,e-n],["L",t+n,e+n],["M",t+n,e-n],["L",t-n,e+n]]},yK=function(t,e,n){return[["M",t-n/2,e-n],["L",t+n/2,e-n],["M",t,e-n],["L",t,e+n],["M",t-n/2,e+n],["L",t+n/2,e+n]]},mK=function(t,e,n){return[["M",t-n,e],["L",t+n,e],["M",t,e-n],["L",t,e+n]]},xK=function(t,e,n){return[["M",t-n,e],["L",t+n,e]]},eI=function(t,e,n){return[["M",t-n,e],["L",t+n,e]]},bK=eI,_K=function(t,e,n){return[["M",t-n,e],["A",n/2,n/2,0,1,1,t,e],["A",n/2,n/2,0,1,0,t+n,e]]},wK=function(t,e,n){return[["M",t-n-1,e-2.5],["L",t,e-2.5],["L",t,e+2.5],["L",t+n+1,e+2.5]]},OK=function(t,e,n){return[["M",t-n-1,e+2.5],["L",t,e+2.5],["L",t,e-2.5],["L",t+n+1,e-2.5]]},EK=function(t,e,n){return[["M",t-(n+1),e+2.5],["L",t-n/2,e+2.5],["L",t-n/2,e-2.5],["L",t+n/2,e-2.5],["L",t+n/2,e+2.5],["L",t+n+1,e+2.5]]};function SK(t,e){return[["M",t-5,e+2.5],["L",t-5,e],["L",t,e],["L",t,e-3],["L",t,e+3],["L",t+6.5,e+3]]}var MK=function(t,e,n){return[["M",t-n,e-n],["L",t+n,e],["L",t-n,e+n],["Z"]]};function PK(t){var e="default";if(Yi(t)&&t instanceof Image)e="image";else if(Fa(t))e="symbol";else if(Qe(t)){var n=new RegExp("data:(image|text)");t.match(n)?e="base64":/^(https?:\/\/(([a-zA-Z0-9]+-?)+[a-zA-Z0-9]+\.)+[a-zA-Z]+)(:\d+)?(\/.*)?(\?.*)?(#.*)?$/.test(t)?e="url":e="symbol"}return e}function TK(t){var e=PK(t);return["base64","url","image"].includes(e)?"image":t&&e==="symbol"?"path":null}var Hn=function(t){xt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(n,r){var i=n.x,o=i===void 0?0:i,a=n.y,s=a===void 0?0:a,c=this.getSubShapeStyle(n),l=c.symbol,u=c.size,f=u===void 0?16:u,d=Ge(c,["symbol","size"]),h=TK(l);Ba(!!h,Ke(r),function(p){p.maybeAppendByClassName("marker",h).attr("className","marker ".concat(h,"-marker")).call(function(v){if(h==="image"){var y=f*2;v.styles({img:l,width:y,height:y,x:o-f,y:s-f})}else{var y=f/2,m=Fa(l)?l:e.getSymbol(l);v.styles(nt({d:m==null?void 0:m(o,s,y)},d))}})})},e.MARKER_SYMBOL_MAP=new Map,e.registerSymbol=function(n,r){e.MARKER_SYMBOL_MAP.set(n,r)},e.getSymbol=function(n){return e.MARKER_SYMBOL_MAP.get(n)},e.getSymbols=function(){return Array.from(e.MARKER_SYMBOL_MAP.keys())},e}(oo);Hn.registerSymbol("cross",gK),Hn.registerSymbol("hyphen",xK),Hn.registerSymbol("line",tI),Hn.registerSymbol("plus",mK),Hn.registerSymbol("tick",yK),Hn.registerSymbol("circle",QL),Hn.registerSymbol("point",lK),Hn.registerSymbol("bowtie",vK),Hn.registerSymbol("hexagon",pK),Hn.registerSymbol("square",uK),Hn.registerSymbol("diamond",fK),Hn.registerSymbol("triangle",dK),Hn.registerSymbol("triangle-down",hK),Hn.registerSymbol("line",tI),Hn.registerSymbol("dot",eI),Hn.registerSymbol("dash",bK),Hn.registerSymbol("smooth",_K),Hn.registerSymbol("hv",wK),Hn.registerSymbol("vh",OK),Hn.registerSymbol("hvh",EK),Hn.registerSymbol("vhv",SK);function AK(t,e,n){var r=Math.round((t-n)/e);return n+r*e}function CK(t,e,n){var r=1.4,i=r*n;return[["M",t-n,e-i],["L",t+n,e-i],["L",t+n,e+i],["L",t-n,e+i],["Z"]]}var nI=1.4,rI=.4;function kK(t,e,n){var r=n,i=r*nI,o=r/2,a=r/6,s=t+i*rI;return[["M",t,e],["L",s,e+o],["L",t+i,e+o],["L",t+i,e-o],["L",s,e-o],["Z"],["M",s,e+a],["L",t+i-2,e+a],["M",s,e-a],["L",t+i-2,e-a]]}function NK(t,e,n){var r=n,i=r*nI,o=r/2,a=r/6,s=e+i*rI;return[["M",t,e],["L",t-o,s],["L",t-o,e+i],["L",t+o,e+i],["L",t+o,s],["Z"],["M",t-a,s],["L",t-a,e+i-2],["M",t+a,s],["L",t+a,e+i-2]]}Hn.registerSymbol("hiddenHandle",CK),Hn.registerSymbol("verticalHandle",kK),Hn.registerSymbol("horizontalHandle",NK);var _gt=function(t,e,n){return t===void 0&&(t="horizontal"),t==="horizontal"?e:n};function RK(t,e,n,r){var i;r===void 0&&(r=4);var o=j(t,2),a=o[0],s=o[1],c=j(e,2),l=c[0],u=c[1],f=j(n,2),d=f[0],h=f[1],p=j([l,u],2),v=p[0],y=p[1],m=y-v;return v>y&&(i=j([y,v],2),v=i[0],y=i[1]),m>s-a?[a,s]:v<a?d===a&&h===y?[a,y]:[a,m+a]:y>s?h===s&&d===v?[v,s]:[s-m,s]:[v,y]}function Zc(t,e,n){return t===void 0&&(t="horizontal"),t==="horizontal"?e:n}var Y0=ks({markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label"},"handle"),iI={showLabel:!0,formatter:function(t){return t.toString()},markerSize:25,markerStroke:"#c5c5c5",markerFill:"#fff",markerLineWidth:1,labelFontSize:12,labelFill:"#c5c5c5",labelText:"",orientation:"vertical",spacing:0},LK=function(t){xt(e,t);function e(n){return t.call(this,n,iI)||this}return e.prototype.render=function(n,r){var i=Ke(r).maybeAppendByClassName(Y0.markerGroup,"g");this.renderMarker(i);var o=Ke(r).maybeAppendByClassName(Y0.labelGroup,"g");this.renderLabel(o)},e.prototype.renderMarker=function(n){var r=this,i=this.attributes,o=i.orientation,a=i.markerSymbol,s=a===void 0?Zc(o,"horizontalHandle","verticalHandle"):a;Ba(!!s,n,function(c){var l=gn(r.attributes,"marker"),u=nt({symbol:s},l);r.marker=c.maybeAppendByClassName(Y0.marker,function(){return new Hn({style:u})}).update(u)})},e.prototype.renderLabel=function(n){var r=this,i=this.attributes,o=i.showLabel,a=i.orientation,s=i.spacing,c=s===void 0?0:s,l=i.formatter;Ba(o,n,function(u){var f,d=gn(r.attributes,"label"),h=d.text,p=Ge(d,["text"]),v=((f=u.select(Y0.marker.class))===null||f===void 0?void 0:f.node().getBBox())||{},y=v.width,m=y===void 0?0:y,b=v.height,O=b===void 0?0:b,E=j(Zc(a,[0,O+c,"center","top"],[m+c,0,"start","middle"]),4),w=E[0],_=E[1],S=E[2],M=E[3];u.maybeAppendByClassName(Y0.label,"text").styles(nt(nt({},p),{x:w,y:_,text:l(h).toString(),textAlign:S,textBaseline:M}))})},e}(oo),oI={showTitle:!0,padding:0,orientation:"horizontal",backgroundFill:"transparent",titleText:"",titleSpacing:4,titlePosition:"top-left",titleFill:"#2C3542",titleFontWeight:"bold",titleFontFamily:"sans-serif",titleFontSize:12},IK=jl({},oI,{}),DK=jl({},oI,$c(iI,"handle"),{color:["#d0e3fa","#acc7f6","#8daaf2","#6d8eea","#4d73cd","#325bb1","#5a3e75","#8c3c79","#e23455","#e7655b"],indicatorBackgroundFill:"#262626",indicatorLabelFill:"white",indicatorLabelFontSize:12,indicatorVisibility:"hidden",labelAlign:"value",labelDirection:"positive",labelSpacing:5,showHandle:!0,showIndicator:!0,showLabel:!0,slidable:!0,titleText:"",type:"continuous"}),BK=.01,wgt=.5,To=ks({title:"title",titleGroup:"title-group",items:"items",itemsGroup:"items-group",contentGroup:"content-group",ribbonGroup:"ribbon-group",ribbon:"ribbon",handlesGroup:"handles-group",handle:"handle",startHandle:"start-handle",endHandle:"end-handle",labelGroup:"label-group",label:"label",indicator:"indicator"},"legend");function FK(t,e){for(var n=1;n<t.length;n+=1){var r=t[n-1],i=t[n];if(e>=r&&e<=i)return[r,i]}return[e,e]}function jK(t,e,n){var r=Array.from(e),i=t.length;return new Array(i).fill(0).reduce(function(o,a,s){var c=r[s%r.length];return o+=" ".concat(t[s],":").concat(c).concat(s<i-1?" ".concat(t[s+1],":").concat(c):"")},"l(".concat(n==="horizontal"?"0":"270",")"))}function aI(t,e){var n=j(FK(t,e),2),r=n[0],i=n[1];return{tick:e>(r+i)/2?i:r,range:[r,i]}}var H0=ks({trackGroup:"background-group",track:"background",selectionGroup:"ribbon-group",selection:"ribbon",clipPath:"clip-path"},"ribbon");function sI(t){var e=t.orientation,n=t.size,r=t.length;return Zc(e,[r,n],[n,r])}function cI(t){var e=t.type,n=j(sI(t),2),r=n[0],i=n[1];return e==="size"?[["M",0,i],["L",0+r,0],["L",0+r,i],["Z"]]:[["M",0,i],["L",0,0],["L",0+r,0],["L",0+r,i],["Z"]]}function GK(t){return cI(t)}function zK(t){var e=t.orientation,n=t.color,r=t.block,i=t.partition,o;if(Fa(n)){var a=20;o=new Array(a).fill(0).map(function(l,u,f){return n(u/(f.length-1))})}else o=n;var s=o.length,c=o.map(function(l){return xs(l).toString()});return s?s===1?c[0]:r?jK(i,c,e):c.reduce(function(l,u,f){return l+=" ".concat(f/(s-1),":").concat(u)},"l(".concat(Zc(e,"0","270"),")")):""}function WK(t){var e=t.orientation,n=t.range;if(!n)return[];var r=j(sI(t),2),i=r[0],o=r[1],a=j(n,2),s=a[0],c=a[1],l=Zc(e,s*i,0),u=Zc(e,0,s*o),f=Zc(e,c*i,i),d=Zc(e,o,c*o);return[["M",l,u],["L",l,d],["L",f,d],["L",f,u],["Z"]]}function YK(t,e){var n=gn(e,"track");t.maybeAppendByClassName(H0.track,"path").styles(nt({d:cI(e)},n))}function HK(t,e){var n=gn(e,"selection"),r=zK(e),i=t.maybeAppendByClassName(H0.selection,"path").styles(nt({d:GK(e),fill:r},n)),o=i.maybeAppendByClassName(H0.clipPath,"path").styles({d:WK(e)}).node();i.style("clipPath",o)}var UK=function(t){xt(e,t);function e(n){return t.call(this,n,{type:"color",orientation:"horizontal",size:30,range:[0,1],length:200,block:!1,partition:[],color:["#fff","#000"],trackFill:"#e5e5e5"})||this}return e.prototype.render=function(n,r){var i=Ke(r).maybeAppendByClassName(H0.trackGroup,"g");YK(i,n);var o=Ke(r).maybeAppendByClassName(H0.selectionGroup,"g");HK(o,n)},e}(oo);function VK(t){return{min:Math.min.apply(Math,ut([],j(t.map(function(e){return e.value})),!1)),max:Math.max.apply(Math,ut([],j(t.map(function(e){return e.value})),!1))}}var XK=function(t){xt(e,t);function e(n){var r=t.call(this,n,DK)||this;return r.eventToOffsetScale=new $o({}),r.innerRibbonScale=new $o({}),r.cacheLabelBBox=null,r.cacheHandleBBox=null,r.onHovering=function(i){var o=r.attributes,a=o.data,s=o.block;i.stopPropagation();var c=r.getValueByCanvasPoint(i);if(s){var l=aI(a.map(function(d){var h=d.value;return h}),c).range,u=r.getRealSelection(l);r.showIndicator((l[0]+l[1])/2,"".concat(u[0],"-").concat(u[1])),r.dispatchIndicated(c,l)}else{var f=r.getTickValue(c);r.showIndicator(f,"".concat(r.getRealValue(f))),r.dispatchIndicated(f)}},r.onDragStart=function(i){return function(o){o.stopPropagation(),r.attributes.slidable&&(r.target=i,r.prevValue=r.getTickValue(r.getValueByCanvasPoint(o)),document.addEventListener("mousemove",r.onDragging),document.addEventListener("touchmove",r.onDragging),document.addEventListener("mouseleave",r.onDragEnd),document.addEventListener("mouseup",r.onDragEnd),document.addEventListener("mouseup",r.onDragEnd),document.addEventListener("touchend",r.onDragEnd))}},r.onDragging=function(i){var o=r.target;r.updateMouse();var a=j(r.selection,2),s=a[0],c=a[1],l=r.getTickValue(r.getValueByCanvasPoint(i)),u=l-r.prevValue;o==="start"?s!==l&&r.updateSelection(l,c):o==="end"?c!==l&&r.updateSelection(s,l):o==="ribbon"&&u!==0&&(r.prevValue=l,r.updateSelection(u,u,!0))},r.onDragEnd=function(){r.style.cursor="pointer",document.removeEventListener("mousemove",r.onDragging),document.removeEventListener("touchmove",r.onDragging),document.removeEventListener("mouseup",r.onDragEnd),document.removeEventListener("touchend",r.onDragEnd)},r}return Object.defineProperty(e.prototype,"handleOffsetRatio",{get:function(){return this.ifHorizontal(.5,.5)},enumerable:!1,configurable:!0}),e.prototype.getBBox=function(){var n=this.attributes,r=n.width,i=n.height;return new Lr(0,0,r,i)},e.prototype.render=function(n,r){var i=this,o=n.showLabel;this.renderTitle(Ke(r));var a=this.availableSpace,s=a.x,c=a.y,l=Ke(r).maybeAppendByClassName(To.contentGroup,"g").styles({transform:"translate(".concat(s,", ").concat(c,")")}),u=l.maybeAppendByClassName(To.labelGroup,"g").styles({zIndex:1});Ba(!!o,u,function(d){i.renderLabel(d)});var f=l.maybeAppendByClassName(To.ribbonGroup,"g").styles({zIndex:0});this.handlesGroup=l.maybeAppendByClassName(To.handlesGroup,"g").styles({zIndex:2}),this.renderHandles(),this.renderRibbon(f),this.renderIndicator(l),this.adjustLabel(),this.adjustHandles()},Object.defineProperty(e.prototype,"range",{get:function(){var n=this.attributes,r=n.data,i=n.domain;return i?{min:i[0],max:i[1]}:VK(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ribbonScale",{get:function(){var n=this.range,r=n.min,i=n.max;return this.innerRibbonScale.update({domain:[r,i],range:[0,1]}),this.innerRibbonScale},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ribbonRange",{get:function(){var n=j(this.selection,2),r=n[0],i=n[1],o=this.ribbonScale;return[o.map(r),o.map(i)]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selection",{get:function(){var n=this.range,r=n.min,i=n.max,o=this.attributes.defaultValue,a=o===void 0?[r,i]:o,s=j(a,2),c=s[0],l=s[1];return[c,l]},enumerable:!1,configurable:!0}),e.prototype.ifHorizontal=function(n,r){return Zc(this.attributes.orientation,typeof n=="function"?n():n,typeof r=="function"?r():r)},e.prototype.renderTitle=function(n){var r=this.attributes,i=r.showTitle,o=r.titleText,a=r.width,s=r.height,c=gn(this.attributes,"title"),l=nt(nt({},c),{width:a,height:s,text:o}),u=this;n.selectAll(To.title.class).data(i?[o]:[]).join(function(f){return f.append(function(){return new AL({style:l})}).attr("className",To.title.name).each(function(){u.title=this})},function(f){return f.update(l)},function(f){return f.each(function(){u.title=void 0}).remove()})},Object.defineProperty(e.prototype,"availableSpace",{get:function(){if(this.title)return this.title.getAvailableSpace();var n=this.attributes,r=n.width,i=n.height;return new Lr(0,0,r,i)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labelFixedSpacing",{get:function(){var n=this.attributes.showTick;return n?5:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labelPosition",{get:function(){var n=this.attributes,r=n.orientation,i=n.labelDirection,o={vertical:{positive:"right",negative:"left"},horizontal:{positive:"bottom",negative:"top"}};return o[r][i]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labelBBox",{get:function(){var n,r=this.attributes.showLabel;if(!r)return new Lr(0,0,0,0);if(this.cacheLabelBBox)return this.cacheLabelBBox;var i=((n=this.label.querySelector(sr.labelGroup.class))===null||n===void 0?void 0:n.children.slice(-1)[0]).getBBox(),o=i.width,a=i.height;return this.cacheLabelBBox=new Lr(0,0,o,a),this.cacheLabelBBox},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labelShape",{get:function(){var n=this.attributes,r=n.showLabel,i=n.labelSpacing,o=i===void 0?0:i;if(!r)return{width:0,height:0,size:0,length:0};var a=this.labelBBox,s=a.width,c=a.height,l=this.ifHorizontal(c,s)+o+this.labelFixedSpacing,u=this.ifHorizontal(s,c);return{width:s,height:c,size:l,length:u}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ribbonBBox",{get:function(){var n=this.attributes,r=n.showHandle,i=n.ribbonSize,o=this.availableSpace,a=o.width,s=o.height,c=this.labelShape,l=c.size,u=c.length,f=j(this.ifHorizontal([s,a],[a,s]),2),d=f[0],h=f[1],p=r?this.handleShape:{size:0,length:0},v=p.size,y=p.length,m=this.handleOffsetRatio,b=0,O=this.labelPosition;i?b=i:["bottom","right"].includes(O)?b=Math.min(d-l,(d-v)/m):d*(1-m)>v?b=Math.max(d-l,0):b=Math.max((d-l-v)/m,0);var E=Math.max(y,u),w=h-E,_=j(this.ifHorizontal([w,b],[b,w]),2),S=_[0],M=_[1],T=["top","left"].includes(O)?l:0,A=j(this.ifHorizontal([E/2,T],[T,E/2]),2),C=A[0],N=A[1];return new Lr(C,N,S,M)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ribbonShape",{get:function(){var n=this.ribbonBBox,r=n.width,i=n.height;return this.ifHorizontal({size:i,length:r},{size:r,length:i})},enumerable:!1,configurable:!0}),e.prototype.renderRibbon=function(n){var r=this.attributes,i=r.data,o=r.type,a=r.orientation,s=r.color,c=r.block,l=gn(this.attributes,"ribbon"),u=this.range,f=u.min,d=u.max,h=this.ribbonBBox,p=h.x,v=h.y,y=this.ribbonShape,m=y.length,b=y.size,O=jl({transform:"translate(".concat(p,", ").concat(v,")"),length:m,size:b,type:o,orientation:a,color:s,block:c,partition:i.map(function(E){return(E.value-f)/(d-f)}),range:this.ribbonRange},l);this.ribbon=n.maybeAppendByClassName(To.ribbon,function(){return new UK({style:O})}).update(O)},e.prototype.getHandleClassName=function(n){return"".concat(To.prefix("".concat(n,"-handle")))},e.prototype.renderHandles=function(){var n=this.attributes,r=n.showHandle,i=n.orientation,o=gn(this.attributes,"handle"),a=j(this.selection,2),s=a[0],c=a[1],l=nt(nt({},o),{orientation:i}),u=o.shape,f=u===void 0?"slider":u,d=f==="basic"?LK:JL,h=this;this.handlesGroup.selectAll(To.handle.class).data(r?[{value:s,type:"start"},{value:c,type:"end"}]:[],function(p){return p.type}).join(function(p){return p.append(function(){return new d({style:l})}).attr("className",function(v){var y=v.type;return"".concat(To.handle," ").concat(h.getHandleClassName(y))}).each(function(v){var y=v.type,m=v.value;this.update({labelText:m});var b="".concat(y,"Handle");h[b]=this,this.addEventListener("pointerdown",h.onDragStart(y))})},function(p){return p.update(l).each(function(v){var y=v.value;this.update({labelText:y})})},function(p){return p.each(function(v){var y=v.type,m="".concat(y,"Handle");h[m]=void 0}).remove()})},e.prototype.adjustHandles=function(){var n=j(this.selection,2),r=n[0],i=n[1];this.setHandlePosition("start",r),this.setHandlePosition("end",i)},Object.defineProperty(e.prototype,"handleBBox",{get:function(){if(this.cacheHandleBBox)return this.cacheHandleBBox;if(!this.attributes.showHandle)return new Lr(0,0,0,0);var n=this.startHandle.getBBox(),r=n.width,i=n.height,o=this.endHandle.getBBox(),a=o.width,s=o.height,c=j([Math.max(r,a),Math.max(i,s)],2),l=c[0],u=c[1];return this.cacheHandleBBox=new Lr(0,0,l,u),this.cacheHandleBBox},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"handleShape",{get:function(){var n=this.handleBBox,r=n.width,i=n.height,o=j(this.ifHorizontal([i,r],[r,i]),2),a=o[0],s=o[1];return{width:r,height:i,size:a,length:s}},enumerable:!1,configurable:!0}),e.prototype.setHandlePosition=function(n,r){var i=this.attributes.handleFormatter,o=this.ribbonBBox,a=o.x,s=o.y,c=this.ribbonShape.size,l=this.getOffset(r),u=j(this.ifHorizontal([a+l,s+c*this.handleOffsetRatio],[a+c*this.handleOffsetRatio,s+l]),2),f=u[0],d=u[1],h=this.handlesGroup.select(".".concat(this.getHandleClassName(n))).node();h==null||h.update({transform:"translate(".concat(f,", ").concat(d,")"),formatter:i})},e.prototype.renderIndicator=function(n){var r=gn(this.attributes,"indicator");this.indicator=n.maybeAppendByClassName(To.indicator,function(){return new sK({})}).update(r)},Object.defineProperty(e.prototype,"labelData",{get:function(){var n=this,r=this.attributes.data;return r.reduce(function(i,o,a,s){var c,l,u=(c=o==null?void 0:o.id)!==null&&c!==void 0?c:a.toString();if(i.push(nt(nt({},o),{id:u,index:a,type:"value",label:(l=o==null?void 0:o.label)!==null&&l!==void 0?l:o.value.toString(),value:n.ribbonScale.map(o.value)})),a<s.length-1){var f=s[a+1],d=j([o.value,f.value],2),h=d[0],p=d[1],v=(h+p)/2;i.push(nt(nt({},o),{id:u,index:a,type:"range",range:[h,p],label:[h,p].join("~"),value:n.ribbonScale.map(v)}))}return i},[])},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labelStyle",{get:function(){var n=j(["center","middle"],2),r=n[0],i=n[1],o=this.labelPosition;return o==="top"?i="bottom":o==="bottom"?i="top":o==="left"?r="end":o==="right"&&(r="start"),{labelTextAlign:r,labelTextBaseline:i}},enumerable:!1,configurable:!0}),e.prototype.renderLabel=function(n){var r=this.attributes,i=r.showTick,o=i===void 0?!1:i,a=r.labelFilter,s=r.labelFormatter,c=gn(this.attributes,"tick"),l=gn(this.attributes,"label"),u=l.align,f=jl(nt({showLine:!1,showGrid:!1,showTick:o,type:"linear",startPos:[0,0],endPos:[0,0],tickDirection:"negative",labelTransform:"rotate(0)"},this.labelStyle),$c(c,"tick"),$c(l,"label"),{data:this.labelData}),d={tickFilter:function(p,v,y){return(p==null?void 0:p.type)!=="value"?!1:a?a(p,p.index,y.filter(function(m){return m.type!=="value"})):!0},labelFilter:function(p,v,y){return(p==null?void 0:p.type)!==u?!1:a?a(p,p.index,y.filter(function(m){return m.type===u})):!0},labelFormatter:s},h=nt(nt(nt({},f),d),{labelOverlap:[{type:"hide"}]});this.label=n.maybeAppendByClassName(To.label,function(){return new OS({style:h})}).node(),this.label.update(h,!1)},Object.defineProperty(e.prototype,"labelAxisStyle",{get:function(){var n=this.attributes,r=n.showTick,i=n.labelDirection,o=n.labelSpacing,a=n.tickLength,s=this.ribbonShape.size,c=this.labelPosition,l=this.labelFixedSpacing,u=j([0,0,0],3),f=u[0],d=u[1],h=u[2],p=a!=null?a:s;return r?(h=p,d=l,i==="positive"?c==="right"?(f=p,h=p):c==="bottom"&&(f=h):i==="negative"&&(c==="top"||c==="left")&&(f=s)):i==="positive"?c==="right"?d=p:c==="bottom"&&(f=s+l,d=o):i==="negative"&&(c==="left"||c==="top")&&(d=o),{offset:f,spacing:d,tickLength:h}},enumerable:!1,configurable:!0}),e.prototype.adjustLabel=function(){var n=this.attributes.showLabel;if(n){var r=this.ribbonBBox,i=r.x,o=r.y,a=r.width,s=r.height,c=this.labelAxisStyle,l=c.offset,u=c.spacing,f=c.tickLength,d=j(this.ifHorizontal([[i,o+l],[i+a,o+l]],[[i+l,o+s],[i+l,o]]),2),h=d[0],p=d[1];this.label.update({startPos:h,endPos:p,tickLength:f,labelSpacing:u},!1)}},e.prototype.bindEvents=function(){this.style.cursor="pointer",this.ribbon.on("pointerdown",this.onDragStart("ribbon")),this.ribbon.on("pointermove",this.onHovering),this.addEventListener("pointerout",this.hideIndicator)},e.prototype.showIndicator=function(n,r){r===void 0&&(r="".concat(n));var i=this.attributes.showIndicator;if(!i||typeof n!="number"){this.hideIndicator();return}var o=this.range,a=o.min,s=o.max,c=this.ribbonBBox,l=c.x,u=c.y,f=Nn(n,a,s),d=this.getOffset(f),h=this.ifHorizontal([d+l,u],[l,d+u]);this.indicator.update({x:h[0],y:h[1],position:this.ifHorizontal("top","left"),labelText:r}),I0(this.indicator.node())},e.prototype.hideIndicator=function(){Gu(this.indicator.node())},e.prototype.updateMouse=function(){this.attributes.slidable&&(this.style.cursor="grabbing")},e.prototype.setSelection=function(n,r){this.updateSelection(n,r)},e.prototype.updateSelection=function(n,r,i){var o;i===void 0&&(i=!1);var a=j(this.selection,2),s=a[0],c=a[1],l=j([n,r],2),u=l[0],f=l[1];i&&(u+=s,f+=c);var d=this.range,h=d.min,p=d.max;o=j(RK([h,p],[u,f],this.selection),2),u=o[0],f=o[1],this.update({defaultValue:[u,f]}),this.dispatchSelection()},Object.defineProperty(e.prototype,"step",{get:function(){var n=this.attributes.step,r=n===void 0?1:n,i=this.range,o=i.min,a=i.max;return le(r)?mx((a-o)*BK,0):r},enumerable:!1,configurable:!0}),e.prototype.getTickValue=function(n){var r=this.attributes,i=r.data,o=r.block,a=this.range.min;return o?aI(i.map(function(s){var c=s.value;return c}),n).tick:AK(n,this.step,a)},e.prototype.getValueByCanvasPoint=function(n){var r=this.range,i=r.min,o=r.max,a=j(this.ribbon.node().getPosition(),2),s=a[0],c=a[1],l=this.ifHorizontal(s,c),u=this.ifHorizontal.apply(this,ut([],j(xx(n)),!1)),f=u-l,d=Nn(this.getOffset(f,!0),i,o);return d},e.prototype.getOffset=function(n,r){r===void 0&&(r=!1);var i=this.range,o=i.min,a=i.max,s=this.ribbonShape.length,c=this.eventToOffsetScale;return c.update({domain:[o,a],range:[0,s]}),r?c.invert(n):c.map(n)},e.prototype.getRealSelection=function(n){var r=this.range.max,i=j(n,2),o=i[0],a=i[1];return this.ifHorizontal([o,a],[r-a,r-o])},e.prototype.getRealValue=function(n){var r=this.range.max;return this.ifHorizontal(n,r-n)},e.prototype.dispatchSelection=function(){var n=this.getRealSelection(this.selection),r=new sn("valuechange",{detail:{value:n}});this.dispatchEvent(r)},e.prototype.dispatchIndicated=function(n,r){var i=this,o=this.range.max,a=this.ifHorizontal(function(){return{value:n,range:r}},function(){return{value:o-n,range:r?i.getRealSelection(r):void 0}}),s=new sn("indicate",{detail:a});this.dispatchEvent(s)},e}(oo);class U0 extends z0{getDefaultOptions(){return{range:[0],domain:[0,1],unknown:void 0,tickCount:5,tickMethod:nd}}map(e){const[n]=this.options.range;return n!==void 0?n:this.options.unknown}invert(e){const[n]=this.options.range;return e===n&&n!==void 0?this.options.domain:[]}getTicks(){const{tickMethod:e,domain:n,tickCount:r}=this.options,[i,o]=n;return!Je(i)||!Je(o)?[]:e(i,o,r)}clone(){return new U0(this.options)}}class ap extends z0{getDefaultOptions(){return{domain:[.5],range:[0,1]}}constructor(e){super(e)}map(e){if(!hx(e))return this.options.unknown;const n=ES(this.thresholds,e,0,this.n);return this.options.range[n]}invert(e){const{range:n}=this.options,r=n.indexOf(e),i=this.thresholds;return[i[r-1],i[r]]}clone(){return new ap(this.options)}rescale(){const{domain:e,range:n}=this.options;this.n=Math.min(e.length,n.length-1),this.thresholds=e}}function V0(t){return Lt(t)?0:Qh(t)?t.length:Object.keys(t).length}var $K=function(t,e){if(!Qh(t))return-1;var n=Array.prototype.indexOf;if(n)return n.call(t,e);for(var r=-1,i=0;i<t.length;i++)if(t[i]===e){r=i;break}return r},lI=$K;function X0(t){return Math.abs(t)<1e-14?t:parseFloat(t.toFixed(14))}const qK=[1,5,2,2.5,4,3],Ogt=null,uI=Number.EPSILON*100;function KK(t,e){return(t%e+e)%e}function ZK(t){return Math.round(t*1e12)/1e12}function JK(t,e,n,r,i,o){const a=V0(e),s=lI(e,t);let c=0;const l=KK(r,o);return(l<uI||o-l<uI)&&r<=0&&i>=0&&(c=1),1-s/(a-1)-n+c}function QK(t,e,n){const r=V0(e);return 1-lI(e,t)/(r-1)-n+1}function tZ(t,e,n,r,i,o){const a=(t-1)/(o-i),s=(e-1)/(Math.max(o,r)-Math.min(n,i));return 2-Math.max(a/s,s/a)}function eZ(t,e){return t>=e?2-(t-1)/(e-1):1}function nZ(t,e,n,r){const i=e-t;return 1-.5*(ki(e-r,2)+ki(t-n,2))/ki(.1*i,2)}function rZ(t,e,n){const r=e-t;if(n>r){const i=(n-r)/2;return 1-ki(i,2)/ki(.1*r,2)}return 1}function iZ(){return 1}const NS=(t,e,n=5,r=!0,i=qK,o=[.25,.2,.5,.05])=>{const a=n<0?0:Math.round(n);if(Number.isNaN(t)||Number.isNaN(e)||typeof t!="number"||typeof e!="number"||!a)return[];if(e-t<1e-15||a===1)return[t];const s={score:-2,lmin:0,lmax:0,lstep:0};let c=1;for(;c<1/0;){for(let p=0;p<i.length;p+=1){const v=i[p],y=QK(v,i,c);if(o[0]*y+o[1]+o[2]+o[3]<s.score){c=1/0;break}let m=2;for(;m<1/0;){const b=eZ(m,a);if(o[0]*y+o[1]+o[2]*b+o[3]<s.score)break;const O=(e-t)/(m+1)/c/v;let E=Math.ceil(Math.log10(O));for(;E<1/0;){const w=c*v*ki(10,E),_=rZ(t,e,w*(m-1));if(o[0]*y+o[1]*_+o[2]*b+o[3]<s.score)break;const S=Math.floor(e/w)*c-(m-1)*c,M=Math.ceil(t/w)*c;if(S<=M){const T=M-S;for(let A=0;A<=T;A+=1){const N=(S+A)*(w/c),k=N+w*(m-1),R=w,I=JK(v,i,c,N,k,R),D=nZ(t,e,N,k),B=tZ(m,a,t,e,N,k),F=iZ(),G=o[0]*I+o[1]*D+o[2]*B+o[3]*F;G>s.score&&(!r||N<=t&&k>=e)&&(s.lmin=N,s.lmax=k,s.lstep=R,s.score=G)}}E+=1}m+=1}}c+=1}const l=X0(s.lmax),u=X0(s.lmin),f=X0(s.lstep),d=Math.floor(ZK((l-u)/f))+1,h=new Array(d);h[0]=X0(u);for(let p=1;p<d;p+=1)h[p]=X0(h[p-1]+f);return h};class bx extends ap{getDefaultOptions(){return{domain:[0,1],range:[.5],nice:!1,tickCount:5,tickMethod:NS}}constructor(e){super(e)}nice(){const{nice:e}=this.options;if(e){const[n,r,i]=this.getTickMethodOptions();this.options.domain=LL(n,r,i)}}getTicks(){const{tickMethod:e}=this.options,[n,r,i]=this.getTickMethodOptions();return e(n,r,i)}getTickMethodOptions(){const{domain:e,tickCount:n}=this.options,r=e[0],i=e[e.length-1];return[r,i,n]}rescale(){this.nice();const{range:e,domain:n}=this.options,[r,i]=n;this.n=e.length-1,this.thresholds=new Array(this.n);for(let o=0;o<this.n;o+=1)this.thresholds[o]=((o+1)*i-(o-this.n)*r)/(this.n+1)}invert(e){const[n,r]=super.invert(e),[i,o]=this.options.domain;return n===void 0&&r===void 0?[n,r]:[n||i,r||o]}getThresholds(){return this.thresholds}clone(){return new bx(this.options)}}function oZ(t,e){const n=t.length;if(!n)return;if(n<2)return t[n-1];const r=(n-1)*e,i=Math.floor(r),o=t[i],a=t[i+1];return o+(a-o)*(r-i)}function aZ(t,e,n=!1){const r=t;n||r.sort((o,a)=>o-a);const i=[];for(let o=1;o<e;o+=1)i.push(oZ(r,o/e));return i}class _x extends ap{getDefaultOptions(){return{domain:[],range:[],tickCount:5,unknown:void 0,tickMethod:NS}}constructor(e){super(e)}rescale(){const{domain:e,range:n}=this.options;this.n=n.length-1,this.thresholds=aZ(e,this.n+1,!1)}invert(e){const[n,r]=super.invert(e),{domain:i}=this.options,o=i[0],a=i[i.length-1];return n===void 0&&r===void 0?[n,r]:[n||o,r||a]}getThresholds(){return this.thresholds}clone(){return new _x(this.options)}getTicks(){const{tickCount:e,domain:n,tickMethod:r}=this.options,i=n.length-1,o=n[0],a=n[i];return r(o,a,e)}}var sZ=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function cZ(t,e,n){return t.size=e,zq(n)?t.height=e:t.width=e,t}function lZ(t,e,n){const{size:r}=e,i=zL(t,e,n);return cZ(i,r,i.orientation)}function uZ(t){return e=>({value:e/t,label:String(e)})}function fZ(t,e,n,r,i){const o=e.thresholds,a=uZ(r);return Object.assign(Object.assign({},t),{color:i,data:[n,...o,r].map(a)})}function dZ(t,e,n){const i=[-1/0,...e.thresholds,1/0].map((o,a)=>({value:a,label:o}));return Object.assign(Object.assign({},t),{data:i,color:n,labelFilter:(o,a)=>a>0&&a<i.length-1})}function RS(t){const{domain:e}=t.getOptions(),[n,r]=[e[0],DR(e)];return[n,r]}function hZ(t,e){const n=t.getOptions(),r=t.clone();return r.update(Object.assign(Object.assign({},n),{range:[xs(e).toString()]})),r}function pZ(t,e,n,r,i,o){const{length:a}=t,s=n||r,c=i.color?o.legendContinuous.ribbonFill||"black":o.color,l=e||hZ(s,c),[u,f]=RS(l),[d,h]=RS([e,n,r].filter(p=>p!==void 0).find(p=>!(p instanceof U0)));return Object.assign(Object.assign({},t),{domain:[d,h],data:l.getTicks().map(p=>({value:p})),color:new Array(Math.floor(a)).fill(0).map((p,v)=>{const y=(f-u)/(a-1)*v+u,m=l.map(y)||c,b=r?r.map(y):1;return m.replace(/rgb[a]*\(([\d]{1,3}) *, *([\d]{1,3}) *, *([\d]{1,3})[\S\s]*\)/,(O,E,w,_)=>`rgba(${E}, ${w}, ${_}, ${b})`)})})}function vZ(t,e,n,r,i,o){const a=qc(t,"color"),s=lZ(n,r,i);if(a instanceof ap){const{range:u}=a.getOptions(),[f,d]=RS(a);return a instanceof bx||a instanceof _x?fZ(s,a,f,d,u):dZ(s,a,u)}const c=qc(t,"size"),l=qc(t,"opacity");return pZ(s,a,c,l,e,o)}const Yu=t=>{const{labelFormatter:e,layout:n,order:r,orientation:i,position:o,size:a,title:s,style:c,crossPadding:l,padding:u}=t,f=sZ(t,["labelFormatter","layout","order","orientation","position","size","title","style","crossPadding","padding"]);return({scales:d,value:h,theme:p,scale:v})=>{const{bbox:y}=h,{x:m,y:b,width:O,height:E}=y,w=jL(o,n),{legendContinuous:_={}}=p,S=yx(Object.assign({},_,Object.assign(Object.assign({titleText:gx(s),labelAlign:"value",labelFormatter:typeof e=="string"?T=>ju(e)(T.label):e},vZ(d,v,h,t,Yu,p)),c),f)),M=new GL({style:Object.assign(Object.assign({x:m,y:b,width:O,height:E},w),{subOptions:S})});return M.appendChild(new XK({className:"legend-continuous",style:S})),M}};Yu.props={defaultPosition:"top",defaultOrientation:"vertical",defaultOrder:1,defaultSize:60,defaultLength:200,defaultLegendSize:60,defaultPadding:[20,10],defaultCrossPadding:[12,12]};const fI=t=>(...e)=>Yu(Object.assign({},{block:!0},t))(...e);fI.props=Object.assign(Object.assign({},Yu.props),{defaultPosition:"top",defaultOrientation:"horizontal"});const LS=t=>e=>{const{scales:n}=e,r=qc(n,"size");return Yu(Object.assign({},{type:"size",data:r.getTicks().map((i,o)=>({value:i,label:String(i)}))},t))(e)};LS.props=Object.assign(Object.assign({},Yu.props),{defaultPosition:"top",defaultOrientation:"horizontal"});const dI=t=>LS(Object.assign({},{block:!0},t));dI.props=Object.assign(Object.assign({},Yu.props),{defaultPosition:"top",defaultOrientation:"horizontal"});var gZ=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const hI=({static:t=!1}={})=>e=>{const{width:n,height:r,depth:i,paddingLeft:o,paddingRight:a,paddingTop:s,paddingBottom:c,padding:l,inset:u,insetLeft:f,insetTop:d,insetRight:h,insetBottom:p,margin:v,marginLeft:y,marginBottom:m,marginTop:b,marginRight:O,data:E,coordinate:w,theme:_,component:S,interaction:M,x:T,y:A,z:C,key:N,frame:k,labelTransform:R,parentKey:I,clip:D,viewStyle:B,title:F}=e,G=gZ(e,["width","height","depth","paddingLeft","paddingRight","paddingTop","paddingBottom","padding","inset","insetLeft","insetTop","insetRight","insetBottom","margin","marginLeft","marginBottom","marginTop","marginRight","data","coordinate","theme","component","interaction","x","y","z","key","frame","labelTransform","parentKey","clip","viewStyle","title"]);return[Object.assign(Object.assign({type:"standardView",x:T,y:A,z:C,key:N,width:n,height:r,depth:i,padding:l,paddingLeft:o,paddingRight:a,paddingTop:s,inset:u,insetLeft:f,insetTop:d,insetRight:h,insetBottom:p,paddingBottom:c,theme:_,coordinate:w,component:S,interaction:M,frame:k,labelTransform:R,margin:v,marginLeft:y,marginBottom:m,marginTop:b,marginRight:O,parentKey:I,clip:D,style:B},!t&&{title:F}),{marks:[Object.assign(Object.assign(Object.assign({},G),{key:`${N}-0`,data:E}),t&&{title:F})]})]};hI.props={};var yZ=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function $0(t){return(e,...n)=>bt({},t(e,...n),e)}function rd(t){return(e,...n)=>bt({},e,t(e,...n))}function mZ(t){return t instanceof Date?!1:typeof t=="object"}function IS(t,e){if(!t)return e;if(Array.isArray(t))return t;if(mZ(t)){const{value:n=e}=t,r=yZ(t,["value"]);return Object.assign(Object.assign({},r),{value:n})}return t}var DS=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const pI=()=>t=>{const{children:e}=t,n=DS(t,["children"]);if(!Array.isArray(e))return[];const{data:r,scale:i={},axis:o={},legend:a={},encode:s={},transform:c=[]}=n,l=DS(n,["data","scale","axis","legend","encode","transform"]),u=e.map(f=>{var{data:d,scale:h={},axis:p={},legend:v={},encode:y={},transform:m=[]}=f,b=DS(f,["data","scale","axis","legend","encode","transform"]);return Object.assign({data:IS(d,r),scale:bt({},i,h),encode:bt({},s,y),transform:[...c,...m],axis:p&&o?bt({},o,p):!1,legend:v&&a?bt({},a,v):!1},b)});return[Object.assign(Object.assign({},l),{marks:u,type:"standardView"})]};pI.props={};function ci([t,e],[n,r]){return[t-n,e-r]}function wx([t,e],[n,r]){return[t+n,e+r]}function Zr([t,e],[n,r]){return Math.sqrt(Math.pow(t-n,2)+Math.pow(e-r,2))}function Rs([t,e]){return Math.atan2(e,t)}function sp([t,e]){return Rs([t,e])+Math.PI/2}function vI(t,e){const n=Rs(t),r=Rs(e);return n<r?r-n:Math.PI*2-(n-r)}function BS(t){let e=1/0,n=-1/0,r=1/0,i=-1/0;for(const[s,c]of t)e=Math.min(s,e),n=Math.max(s,n),r=Math.min(c,r),i=Math.max(c,i);const o=n-e,a=i-r;return[e,r,o,a]}function gI([t,e],[n,r]){return[(t+n)/2,(e+r)/2]}function be(t,e){for(const[n,r]of Object.entries(e))t.style(n,r)}function xZ(t,e){return e.forEach((n,r)=>r===0?t.moveTo(n[0],n[1]):t.lineTo(n[0],n[1])),t.closePath(),t}function bZ(t,e,n){const{arrowSize:r}=n,i=typeof r=="string"?+parseFloat(r)/100*Zr(t,e):r,o=Math.PI/6,a=Math.atan2(e[1]-t[1],e[0]-t[0]),s=Math.PI/2-a-o,c=[e[0]-i*Math.sin(s),e[1]-i*Math.cos(s)],l=a-o,u=[e[0]-i*Math.cos(l),e[1]-i*Math.sin(l)];return[c,u]}function q0(t,e,n,r,i){const o=Rs(ci(r,e))+Math.PI,a=Rs(ci(r,n))+Math.PI;return t.arc(r[0],r[1],i,o,a,a-o<0),t}function yI(t,e,n,r="y",i="between",o=!1){const a=(y,m)=>y==="y"||y===!0?m?180:90:m?90:0,s=r==="y"||r===!0?n:e,c=a(r,o),l=Zf(s),[u,f]=Wl(l,y=>s[y]),d=new $o({domain:[u,f],range:[0,100]}),h=y=>Je(s[y])&&!Number.isNaN(s[y])?d.map(s[y]):0,p={between:y=>`${t[y]} ${h(y)}%`,start:y=>y===0?`${t[y]} ${h(y)}%`:`${t[y-1]} ${h(y)}%, ${t[y]} ${h(y)}%`,end:y=>y===t.length-1?`${t[y]} ${h(y)}%`:`${t[y]} ${h(y)}%, ${t[y+1]} ${h(y)}%`},v=l.sort((y,m)=>h(y)-h(m)).map(p[i]||p.between).join(",");return`linear-gradient(${c}deg, ${v})`}function Ox(t){const[e,n,r,i]=t;return[i,e,n,r]}function id(t,e,n){const[r,i,,o]=Rr(t)?Ox(e):e,[a,s]=n,c=t.getCenter(),l=sp(ci(r,c)),u=sp(ci(i,c)),f=u===l&&a!==s?u+Math.PI*2:u;return{startAngle:l,endAngle:f-l>=0?f:Math.PI*2+f,innerRadius:Zr(o,c),outerRadius:Zr(r,c)}}function Egt(t){const e="connect";return Object.fromEntries(Object.entries(t).filter(([n])=>n.startsWith(e)).map(([n,r])=>[lowerFirst(n.replace(e,"").trim()),r]).filter(([n])=>n!==void 0))}function FS(t){const{colorAttribute:e,opacityAttribute:n=e}=t;return`${n}Opacity`}function mI(t,e){if(!ar(t))return"";const n=t.getCenter(),{transform:r}=e;return`translate(${n[0]}, ${n[1]}) ${r||""}`}function jS(t){if(t.length===1)return t[0];const[[e,n,r=0],[i,o,a=0]]=t;return[(e+i)/2,(n+o)/2,(r+a)/2]}function xI(t){return t.replace(/-(\w)/g,function(e,n){return n.toUpperCase()})}function _Z(t){return t.replace(/([A-Z])/g,"-$1").toLowerCase()}var Sgt=Array.prototype.slice;function bI(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Ir(t){return function(){return t}}function _I(t){this._context=t}_I.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function K0(t){return new _I(t)}const GS=Math.PI,zS=2*GS,od=1e-6,wZ=zS-od;function wI(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function OZ(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return wI;const n=ki(10,e);return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Ex{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?wI:OZ(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,o,a){this._append`C${+e},${+n},${+r},${+i},${this._x1=+o},${this._y1=+a}`}arcTo(e,n,r,i,o){if(e=+e,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,s=this._y1,c=r-e,l=i-n,u=a-e,f=s-n,d=u*u+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(d>od)if(!(Math.abs(f*c-l*u)>od)||!o)this._append`L${this._x1=e},${this._y1=n}`;else{let h=r-a,p=i-s,v=c*c+l*l,y=h*h+p*p,m=Math.sqrt(v),b=Math.sqrt(d),O=o*Math.tan((GS-Math.acos((v+d-y)/(2*m*b)))/2),E=O/b,w=O/m;Math.abs(E-1)>od&&this._append`L${e+E*u},${n+E*f}`,this._append`A${o},${o},0,0,${+(f*h>u*p)},${this._x1=e+w*c},${this._y1=n+w*l}`}}arc(e,n,r,i,o,a){if(e=+e,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),c=r*Math.sin(i),l=e+s,u=n+c,f=1^a,d=a?i-o:o-i;this._x1===null?this._append`M${l},${u}`:(Math.abs(this._x1-l)>od||Math.abs(this._y1-u)>od)&&this._append`L${l},${u}`,r&&(d<0&&(d=d%zS+zS),d>wZ?this._append`A${r},${r},0,1,${f},${e-s},${n-c}A${r},${r},0,1,${f},${this._x1=l},${this._y1=u}`:d>od&&this._append`A${r},${r},0,${+(d>=GS)},${f},${this._x1=e+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Ls(){return new Ex}Ls.prototype=Ex.prototype;function Mgt(t=3){return new Ex(+t)}function WS(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new Ex(e)}function OI(t){return t[0]}function EI(t){return t[1]}function ad(t,e){var n=Ir(!0),r=null,i=K0,o=null,a=WS(s);t=typeof t=="function"?t:t===void 0?OI:Ir(t),e=typeof e=="function"?e:e===void 0?EI:Ir(e);function s(c){var l,u=(c=bI(c)).length,f,d=!1,h;for(r==null&&(o=i(h=a())),l=0;l<=u;++l)!(l<u&&n(f=c[l],l,c))===d&&((d=!d)?o.lineStart():o.lineEnd()),d&&o.point(+t(f,l,c),+e(f,l,c));if(h)return o=null,h+""||null}return s.x=function(c){return arguments.length?(t=typeof c=="function"?c:Ir(+c),s):t},s.y=function(c){return arguments.length?(e=typeof c=="function"?c:Ir(+c),s):e},s.defined=function(c){return arguments.length?(n=typeof c=="function"?c:Ir(!!c),s):n},s.curve=function(c){return arguments.length?(i=c,r!=null&&(o=i(r)),s):i},s.context=function(c){return arguments.length?(c==null?r=o=null:o=i(r=c),s):r},s}function cp(t){const e=typeof t=="function"?t:t.render;return class extends Tt{connectedCallback(){this.draw()}attributeChangedCallback(){this.draw()}draw(){e(this)}}}var YS=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function EZ(t){const{min:[e,n],max:[r,i]}=t.getLocalBounds();let o=0,a=0;return e>0&&(o=e),r<0&&(o=r),n>0&&(a=n),i<0&&(a=i),[o,a]}function SZ(t,e=[]){const[n=0,r=0,i=n,o=r]=e,a=t.parentNode,s=a.getEulerAngles();a.setEulerAngles(0);const{min:c,halfExtents:l}=t.getLocalBounds(),[u,f]=c,[d,h]=l;return a.setEulerAngles(s),{x:u-o,y:f-n,width:d*2+o+r,height:h*2+n+i}}const Pgt=(t,e,n)=>{const r=dist(t,e),i=dist(e,n),o=dist(n,t);return(Math.pow(r,2)+Math.pow(i,2)-Math.pow(o,2))/(2*r*i)};function MZ(t,e,n,r,i=!0,o=!0){const a=f=>ad()(f);if(!e[0]&&!e[1])return a([EZ(t),e]);if(!n.length)return a([[0,0],e]);const[s,c]=n,l=[...c],u=[...s];if(c[0]!==s[0]){const f=i?-4:4;l[1]=c[1],o&&!i&&(l[0]=Math.max(s[0],c[0]-f),c[1]<s[1]?u[1]=l[1]:(u[1]=s[1],u[0]=Math.max(u[0],l[0]-f))),!o&&!i&&(l[0]=Math.max(s[0],c[0]-f),c[1]>s[1]?u[1]=l[1]:(u[1]=s[1],u[0]=Math.max(u[0],l[0]-f))),!o&&i&&(l[0]=Math.min(s[0],c[0]-f),c[1]>s[1]?u[1]=l[1]:(u[1]=s[1],u[0]=Math.min(u[0],l[0]-f))),o&&i&&(l[0]=Math.min(s[0],c[0]-f),c[1]<s[1]?u[1]=l[1]:(u[1]=s[1],u[0]=Math.min(u[0],l[0]-f)))}return a([c,l,u,s,e])}const SI=cp(t=>{const e=t.attributes,{className:n,class:r,transform:i,rotate:o,labelTransform:a,labelTransformOrigin:s,x:c,y:l,x0:u=c,y0:f=l,text:d,background:h,connector:p,startMarker:v,endMarker:y,coordCenter:m,innerHTML:b}=e,O=YS(e,["className","class","transform","rotate","labelTransform","labelTransformOrigin","x","y","x0","y0","text","background","connector","startMarker","endMarker","coordCenter","innerHTML"]);if(t.style.transform=`translate(${c}, ${l})`,[c,l,u,f].some(F=>!Je(F))){t.children.forEach(F=>F.remove());return}const E=Xt(O,"background"),{padding:w}=E,_=YS(E,["padding"]),S=Xt(O,"connector"),{points:M=[]}=S,T=YS(S,["points"]);let A;b?A=Ie(t).maybeAppend("html","html",n).style("zIndex",0).style("innerHTML",b).call(be,Object.assign({transform:a,transformOrigin:s},O)).node():A=Ie(t).maybeAppend("text","text").style("zIndex",0).style("text",d).call(be,Object.assign({textBaseline:"middle",transform:a,transformOrigin:s},O)).node();const C=Ie(t).maybeAppend("background","rect").style("zIndex",-1).call(be,SZ(A,w)).call(be,h?_:{}).node(),N=+u<m[0],k=+f<m[1],R=[+u-+c,+f-+l],I=MZ(C,R,M,m,N,k),D=v&&new Hn({id:"startMarker",style:Object.assign({x:0,y:0},Xt(O,"startMarker"))}),B=y&&new Hn({id:"endMarker",style:Object.assign({x:0,y:0},Xt(O,"endMarker"))});Ie(t).maybeAppend("connector","path").style("zIndex",0).style("d",I).style("markerStart",D).style("markerEnd",B).call(be,p?T:{})});function lp(t,e){let n,r=-1,i=-1;if(e===void 0)for(const o of t)++i,o!=null&&(n<o||n===void 0&&o>=o)&&(n=o,r=i);else for(let o of t)(o=e(o,++i,t))!=null&&(n<o||n===void 0&&o>=o)&&(n=o,r=i);return r}function PZ(t,e,n,r){const i=e.length/2,o=e.slice(0,i),a=e.slice(i);let s=lp(o,(h,p)=>Math.abs(h[1]-a[p][1]));s=Math.max(Math.min(s,i-2),1);const c=h=>[o[h][0],(o[h][1]+a[h][1])/2],l=c(s),u=c(s-1),f=c(s+1),d=Rs(ci(f,u))/Math.PI*180;return{x:l[0],y:l[1],transform:`rotate(${d})`,textAlign:"center",textBaseline:"middle"}}function MI(t,e,n,r){const{bounds:i}=n,[[o,a],[s,c]]=i,l=s-o,u=c-a,f=d=>{const{x:h,y:p}=d,v=TR(n.x,l),y=TR(n.y,u);return Object.assign(Object.assign({},d),{x:(v||h)+o,y:(y||p)+a})};return f(t==="left"?{x:0,y:u/2,textAlign:"start",textBaseline:"middle"}:t==="right"?{x:l,y:u/2,textAlign:"end",textBaseline:"middle"}:t==="top"?{x:l/2,y:0,textAlign:"center",textBaseline:"top"}:t==="bottom"?{x:l/2,y:u,textAlign:"center",textBaseline:"bottom"}:t==="top-left"?{x:0,y:0,textAlign:"start",textBaseline:"top"}:t==="top-right"?{x:l,y:0,textAlign:"end",textBaseline:"top"}:t==="bottom-left"?{x:0,y:u,textAlign:"start",textBaseline:"bottom"}:t==="bottom-right"?{x:l,y:u,textAlign:"end",textBaseline:"bottom"}:{x:l/2,y:u/2,textAlign:"center",textBaseline:"middle"})}function PI(t,e,n,r){const{y:i,y1:o,autoRotate:a,rotateToAlignArc:s}=n,c=r.getCenter(),l=id(r,e,[i,o]),{innerRadius:u,outerRadius:f,startAngle:d,endAngle:h}=l,p=t==="inside"?(d+h)/2:h,v=HS(p,a,s),y=(()=>{const[m,b]=e,O=u+(f-u)*.5,[E,w]=t==="inside"?Z0(c,p,O):gI(m,b);return{x:E,y:w}})();return Object.assign(Object.assign({},y),{textAlign:t==="inside"?"center":"start",textBaseline:"middle",rotate:v})}function Z0(t,e,n){return[t[0]+Math.sin(e)*n,t[1]-Math.cos(e)*n]}function HS(t,e,n){if(!e)return 0;const r=n?0:Math.sin(t)<0?90:-90;return t/Math.PI*180+r}function TZ(t,e,n,r){const{y:i,y1:o,autoRotate:a,rotateToAlignArc:s,radius:c=.5,offset:l=0}=n,u=id(r,e,[i,o]),{startAngle:f,endAngle:d}=u,h=r.getCenter(),p=(f+d)/2,y={textAlign:"center",textBaseline:"middle",rotate:HS(p,a,s)},{innerRadius:m,outerRadius:b}=u,E=m+(b-m)*c+l,[w,_]=Z0(h,p,E);return Object.assign({x:w,y:_},y)}function TI(t){return t===void 0?null:t}function AI(t,e,n,r){const{bounds:i}=n,[o]=i;return{x:TI(o[0]),y:TI(o[1])}}function Yl(t,e,n,r){const{bounds:i}=n;return i.length===1?AI(t,e,n,r):(R0(r)?PI:tp(r)?TZ:MI)(t,e,n,r)}function AZ(t,e,n,r,i){const[o,a]=Z0(t,e,n),[s,c]=Z0(t,e,r),l=Math.sin(e)>0?1:-1;return[[o,a],[s,c],[s+l*i,c]]}function CI(t,e,n){const r=id(n,t,[e.y,e.y1]),{innerRadius:i,outerRadius:o}=r;return i+(o-i)}function kI(t,e,n){const r=id(n,t,[e.y,e.y1]),{startAngle:i,endAngle:o}=r;return(i+o)/2}function US(t,e,n,r){const{autoRotate:i,rotateToAlignArc:o,offset:a=0,connector:s=!0,connectorLength:c=a,connectorLength2:l=0,connectorDistance:u=0}=n,f=r.getCenter(),d=kI(e,n,r),h=Math.sin(d)>0?1:-1,p=HS(d,i,o),v={textAlign:h>0||R0(r)?"start":"end",textBaseline:"middle",rotate:p},y=CI(e,n,r),m=y+(s?c:a),[[b,O],[E,w],[_,S]]=AZ(f,d,y,m,s?l:0),M=s?+u*h:0,T=_+M,A=S,C={connector:s,connectorPoints:[[E-T,w-A],[_-T,S-A]]};return Object.assign(Object.assign({x0:b,y0:O,x:_+M,y:S},v),C)}function CZ(t,e,n,r){const{bounds:i}=n;return i.length===1?AI(t,e,n,r):(R0(r)?PI:tp(r)?US:MI)(t,e,n,r)}function li(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function kZ(t,e){return Array.from(e,n=>t[n])}function fc(t,...e){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");t=Array.from(t);let[n]=e;if(n&&n.length!==2||e.length>1){const r=Uint32Array.from(t,(i,o)=>o);return e.length>1?(e=e.map(i=>t.map(i)),r.sort((i,o)=>{for(const a of e){const s=J0(a[i],a[o]);if(s)return s}})):(n=t.map(n),r.sort((i,o)=>J0(n[i],n[o]))),kZ(t,r)}return t.sort(NI(n))}function NI(t=li){if(t===li)return J0;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function J0(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}function RI(t,e={}){const{labelHeight:n=14,height:r}=e,i=fc(t,l=>l.y),o=i.length,a=new Array(o);for(let l=0;l<o;l++){const u=i[l],{y:f}=u;a[l]={y:f,y1:f+n,labels:[f]}}let s=!0;for(;s;){s=!1;for(let l=a.length-1;l>0;l--){const u=a[l],f=a[l-1];if(f.y1>u.y){s=!0,f.labels.push(...u.labels),a.splice(l,1),f.y1+=u.y1-u.y;const d=f.y1-f.y;f.y1=Math.max(Math.min(f.y1,r),d),f.y=f.y1-d}}}let c=0;for(const l of a){const{y:u,labels:f}=l;let d=u-n;for(const h of f){const p=i[c++],y=d+n-h;p.connectorPoints[0][1]-=y,p.y=d+n,d+=n}}}function LI(t,e){const n=fc(t,s=>s.y),{height:r,labelHeight:i=14}=e,o=Math.ceil(r/i);if(n.length<=o)return RI(n,e);const a=[];for(let s=0;s<n.length;s++)s<n.length-o?(n[s].opacity=0,n[s].connector=!1):a.push(n[s]);RI(a,e)}var NZ=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const Sx=new WeakMap;function RZ(t,e,n){const{connectorLength:r,connectorLength2:i,connectorDistance:o}=e,a=NZ(US("outside",t,e,n),[]),s=n.getCenter(),c=CI(t,e,n),l=kI(t,e,n),u=c+r+i,f=Math.sin(l)>0?1:-1,d=s[0]+(u+ +o)*f,{x:h}=a,p=d-h;return a.x+=p,a.connectorPoints[0][0]-=p,a}function LZ(t,e,n,r,i,o){if(!tp(r))return{};if(Sx.has(e))return Sx.get(e);const a=o.map(d=>RZ(d,n,r)),{width:s,height:c}=r.getOptions(),l=a.filter(d=>d.x<s/2),u=a.filter(d=>d.x>=s/2),f=Object.assign(Object.assign({},i),{height:c});return LI(l,f),LI(u,f),a.forEach((d,h)=>Sx.set(o[h],d)),Sx.get(e)}var IZ=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function DZ(t,e,n,r){if(!tp(r))return{};const{connectorLength:i,connectorLength2:o,connectorDistance:a}=n,s=IZ(US("outside",e,n,r),[]),{x0:c,y0:l}=s,u=r.getCenter(),d=XX(r)+i,h=sp([c-u[0],l-u[1]]),p=Math.sin(h)>0?1:-1,[v,y]=Z0(u,h,d);return s.x=v+(o+a)*p,s.y=y,s}var II=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function BZ(t,e){return t!==void 0?t:tp(e)?"inside":Rr(e)?"right":"top"}function FZ(t,e,n,r,i,o){const{position:a}=e,{render:s}=i,c=BZ(a,n),u=r[s?"htmlLabel":c==="inside"?"innerLabel":"label"],f=Object.assign({},u,e),d=H[xI(c)];if(!d)throw new Error(`Unknown position: ${c}`);return Object.assign(Object.assign({},u),d(c,t,f,n,i,o))}const DI=(t,e)=>{const{coordinate:n,theme:r}=e,{render:i}=t;return(o,a,s,c)=>{const{text:l,x:u,y:f,transform:d="",transformOrigin:h,className:p=""}=a,v=II(a,["text","x","y","transform","transformOrigin","className"]),y=FZ(o,a,n,r,t,c),{rotate:m=0,transform:b=""}=y,O=II(y,["rotate","transform"]);return Ie(new SI).call(be,O).style("text",`${l}`).style("className",`${p} g2-label`).style("innerHTML",i?i(l,a.datum,a.index):void 0).style("labelTransform",`${b} rotate(${+m}) ${d}`.trim()).style("labelTransformOrigin",h).style("coordCenter",n.getCenter()).call(be,v).node()}};DI.props={defaultMarker:"point"};var jZ=function(t,e){if(!Qh(t))return t;for(var n=[],r=0;r<t.length;r++){var i=t[r];e(i,r)&&n.push(i)}return n},BI=jZ;function GZ(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Hu(t){let e,n,r;t.length!==2?(e=li,n=(s,c)=>li(t(s),c),r=(s,c)=>t(s)-c):(e=t===li||t===GZ?t:zZ,n=t,r=t);function i(s,c,l=0,u=s.length){if(l<u){if(e(c,c)!==0)return u;do{const f=l+u>>>1;n(s[f],c)<0?l=f+1:u=f}while(l<u)}return l}function o(s,c,l=0,u=s.length){if(l<u){if(e(c,c)!==0)return u;do{const f=l+u>>>1;n(s[f],c)<=0?l=f+1:u=f}while(l<u)}return l}function a(s,c,l=0,u=s.length){const f=i(s,c,l,u-1);return f>l&&r(s[f-1],c)>-r(s[f],c)?f-1:f}return{left:i,center:a,right:o}}function zZ(){return 0}function VS(t){return t===null?NaN:+t}function*WZ(t,e){if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of t)(r=e(r,++n,t))!=null&&(r=+r)>=r&&(yield r)}}const FI=Hu(li),YZ=FI.right,HZ=FI.left,UZ=Hu(VS).center;var VZ=YZ;function XZ(t,e,n){return Math.min(n,Math.max(e,t))}function Q0(t){return!!t.getBandWidth}function up(t,e,n){if(!Q0(t))return t.invert(e);const{adjustedRange:r}=t,{domain:i}=t.getOptions(),o=n?-1:0,a=t.getStep(),s=n?r:r.map(u=>u+a),c=HZ(s,e),l=XZ(c+o,0,i.length-1);return i[l]}function Uu(t,e,n){if(!e)return t.getOptions().domain;if(!Q0(t)){const c=fc(e);if(!n)return c;const[l]=c,{range:u}=t.getOptions(),[f,d]=u,h=f>d?-1:1,p=t.invert(t.map(l)+h*n);return[l,p]}const{domain:r}=t.getOptions(),i=e[0],o=r.indexOf(i);if(n){const c=o+Math.round(r.length*n);return r.slice(o,c)}const a=e[e.length-1],s=r.indexOf(a);return r.slice(o,s+1)}function Mx(t,e,n,r,i,o){const{x:a,y:s}=i,c=(h,p)=>{const[v,y]=o.invert(h);return[up(a,v,p),up(s,y,p)]},l=c([t,e],!0),u=c([n,r],!1),f=Uu(a,[l[0],u[0]]),d=Uu(s,[l[1],u[1]]);return[f,d]}function Px(t,e){const[n,r]=t,i=o=>o.getStep?o.getStep():0;return[e.map(n),e.map(r)+i(e)]}function $Z(t,e,n){const{x:r,y:i}=e,[o,a]=t,s=Px(o,r),c=Px(a,i),l=[s[0],c[0]],u=[s[1],c[1]],[f,d]=n.map(l),[h,p]=n.map(u);return[f,d,h,p]}const jI=Math.abs,qo=Math.atan2,sd=Math.cos,qZ=Math.max,XS=Math.min,Jc=Math.sin,fp=Math.sqrt,Ko=1e-12,tg=Math.PI,Tx=tg/2,KZ=2*tg;function ZZ(t){return t>1?0:t<-1?tg:Math.acos(t)}function GI(t){return t>=1?Tx:t<=-1?-Tx:Math.asin(t)}function JZ(t){return t.innerRadius}function QZ(t){return t.outerRadius}function tJ(t){return t.startAngle}function eJ(t){return t.endAngle}function nJ(t){return t&&t.padAngle}function rJ(t,e,n,r,i,o,a,s){var c=n-t,l=r-e,u=a-i,f=s-o,d=f*c-u*l;if(!(d*d<Ko))return d=(u*(e-o)-f*(t-i))/d,[t+d*c,e+d*l]}function Ax(t,e,n,r,i,o,a){var s=t-n,c=e-r,l=(a?o:-o)/fp(s*s+c*c),u=l*c,f=-l*s,d=t+u,h=e+f,p=n+u,v=r+f,y=(d+p)/2,m=(h+v)/2,b=p-d,O=v-h,E=b*b+O*O,w=i-o,_=d*v-p*h,S=(O<0?-1:1)*fp(qZ(0,w*w*E-_*_)),M=(_*O-b*S)/E,T=(-_*b-O*S)/E,A=(_*O+b*S)/E,C=(-_*b+O*S)/E,N=M-y,k=T-m,R=A-y,I=C-m;return N*N+k*k>R*R+I*I&&(M=A,T=C),{cx:M,cy:T,x01:-u,y01:-f,x11:M*(i/w-1),y11:T*(i/w-1)}}function Cx(){var t=JZ,e=QZ,n=Ir(0),r=null,i=tJ,o=eJ,a=nJ,s=null,c=WS(l);function l(){var u,f,d=+t.apply(this,arguments),h=+e.apply(this,arguments),p=i.apply(this,arguments)-Tx,v=o.apply(this,arguments)-Tx,y=jI(v-p),m=v>p;if(s||(s=u=c()),h<d&&(f=h,h=d,d=f),!(h>Ko))s.moveTo(0,0);else if(y>KZ-Ko)s.moveTo(h*sd(p),h*Jc(p)),s.arc(0,0,h,p,v,!m),d>Ko&&(s.moveTo(d*sd(v),d*Jc(v)),s.arc(0,0,d,v,p,m));else{var b=p,O=v,E=p,w=v,_=y,S=y,M=a.apply(this,arguments)/2,T=M>Ko&&(r?+r.apply(this,arguments):fp(d*d+h*h)),A=XS(jI(h-d)/2,+n.apply(this,arguments)),C=A,N=A,k,R;if(T>Ko){var I=GI(T/d*Jc(M)),D=GI(T/h*Jc(M));(_-=I*2)>Ko?(I*=m?1:-1,E+=I,w-=I):(_=0,E=w=(p+v)/2),(S-=D*2)>Ko?(D*=m?1:-1,b+=D,O-=D):(S=0,b=O=(p+v)/2)}var B=h*sd(b),F=h*Jc(b),G=d*sd(w),X=d*Jc(w);if(A>Ko){var q=h*sd(O),J=h*Jc(O),et=d*sd(E),dt=d*Jc(E),_t;if(y<tg)if(_t=rJ(B,F,et,dt,q,J,G,X)){var Dt=B-_t[0],pt=F-_t[1],vt=q-_t[0],Qt=J-_t[1],Bt=1/Jc(ZZ((Dt*vt+pt*Qt)/(fp(Dt*Dt+pt*pt)*fp(vt*vt+Qt*Qt)))/2),Rt=fp(_t[0]*_t[0]+_t[1]*_t[1]);C=XS(A,(d-Rt)/(Bt-1)),N=XS(A,(h-Rt)/(Bt+1))}else C=N=0}S>Ko?N>Ko?(k=Ax(et,dt,B,F,h,N,m),R=Ax(q,J,G,X,h,N,m),s.moveTo(k.cx+k.x01,k.cy+k.y01),N<A?s.arc(k.cx,k.cy,N,qo(k.y01,k.x01),qo(R.y01,R.x01),!m):(s.arc(k.cx,k.cy,N,qo(k.y01,k.x01),qo(k.y11,k.x11),!m),s.arc(0,0,h,qo(k.cy+k.y11,k.cx+k.x11),qo(R.cy+R.y11,R.cx+R.x11),!m),s.arc(R.cx,R.cy,N,qo(R.y11,R.x11),qo(R.y01,R.x01),!m))):(s.moveTo(B,F),s.arc(0,0,h,b,O,!m)):s.moveTo(B,F),!(d>Ko)||!(_>Ko)?s.lineTo(G,X):C>Ko?(k=Ax(G,X,q,J,d,-C,m),R=Ax(B,F,et,dt,d,-C,m),s.lineTo(k.cx+k.x01,k.cy+k.y01),C<A?s.arc(k.cx,k.cy,C,qo(k.y01,k.x01),qo(R.y01,R.x01),!m):(s.arc(k.cx,k.cy,C,qo(k.y01,k.x01),qo(k.y11,k.x11),!m),s.arc(0,0,d,qo(k.cy+k.y11,k.cx+k.x11),qo(R.cy+R.y11,R.cx+R.x11),m),s.arc(R.cx,R.cy,C,qo(R.y11,R.x11),qo(R.y01,R.x01),!m))):s.arc(0,0,d,w,E,m)}if(s.closePath(),u)return s=null,u+""||null}return l.centroid=function(){var u=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-tg/2;return[sd(f)*u,Jc(f)*u]},l.innerRadius=function(u){return arguments.length?(t=typeof u=="function"?u:Ir(+u),l):t},l.outerRadius=function(u){return arguments.length?(e=typeof u=="function"?u:Ir(+u),l):e},l.cornerRadius=function(u){return arguments.length?(n=typeof u=="function"?u:Ir(+u),l):n},l.padRadius=function(u){return arguments.length?(r=u==null?null:typeof u=="function"?u:Ir(+u),l):r},l.startAngle=function(u){return arguments.length?(i=typeof u=="function"?u:Ir(+u),l):i},l.endAngle=function(u){return arguments.length?(o=typeof u=="function"?u:Ir(+u),l):o},l.padAngle=function(u){return arguments.length?(a=typeof u=="function"?u:Ir(+u),l):a},l.context=function(u){return arguments.length?(s=u==null?null:u,l):s},l}var kx=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function zI(t,e,n,r,i={}){const{inset:o=0,radius:a=0,insetLeft:s=o,insetTop:c=o,insetRight:l=o,insetBottom:u=o,radiusBottomLeft:f=a,radiusBottomRight:d=a,radiusTopLeft:h=a,radiusTopRight:p=a,minWidth:v=-1/0,maxWidth:y=1/0,minHeight:m=-1/0}=i,b=kx(i,["inset","radius","insetLeft","insetTop","insetRight","insetBottom","radiusBottomLeft","radiusBottomRight","radiusTopLeft","radiusTopRight","minWidth","maxWidth","minHeight"]);if(!ar(r)&&!YR(r)){const M=!!Rr(r),[T,,A]=M?Ox(e):e,[C,N]=T,[k,R]=ci(A,T),I=k>0?C:C+k,D=R>0?N:N+R,B=Math.abs(k),F=Math.abs(R),G=I+s,X=D+c,q=B-(s+l),J=F-(c+u),et=M?tx(q,m,1/0):tx(q,v,y),dt=M?tx(J,v,y):tx(J,m,1/0),_t=M?G:G-(et-q)/2,Dt=M?X-(dt-J)/2:X-(dt-J);return Ie(t.createElement("rect",{})).style("x",_t).style("y",Dt).style("width",et).style("height",dt).style("radius",[h,p,d,f]).call(be,b).node()}const{y:O,y1:E}=n,w=r.getCenter(),_=id(r,e,[O,E]),S=Cx().cornerRadius(a).padAngle(o*Math.PI/180);return Ie(t.createElement("path",{})).style("d",S(_)).style("transform",`translate(${w[0]}, ${w[1]})`).style("radius",a).style("inset",o).call(be,b).node()}const eg=(t,e)=>{const{colorAttribute:n,opacityAttribute:r="fill",first:i=!0,last:o=!0}=t,a=kx(t,["colorAttribute","opacityAttribute","first","last"]),{coordinate:s,document:c}=e;return(l,u,f)=>{const{color:d,radius:h=0}=f,p=kx(f,["color","radius"]),v=p.lineWidth||1,{stroke:y,radius:m=h,radiusTopLeft:b=m,radiusTopRight:O=m,radiusBottomRight:E=m,radiusBottomLeft:w=m,innerRadius:_=0,innerRadiusTopLeft:S=_,innerRadiusTopRight:M=_,innerRadiusBottomRight:T=_,innerRadiusBottomLeft:A=_,lineWidth:C=n==="stroke"||y?v:0,inset:N=0,insetLeft:k=N,insetRight:R=N,insetBottom:I=N,insetTop:D=N,minWidth:B,maxWidth:F,minHeight:G}=a,X=kx(a,["stroke","radius","radiusTopLeft","radiusTopRight","radiusBottomRight","radiusBottomLeft","innerRadius","innerRadiusTopLeft","innerRadiusTopRight","innerRadiusBottomRight","innerRadiusBottomLeft","lineWidth","inset","insetLeft","insetRight","insetBottom","insetTop","minWidth","maxWidth","minHeight"]),{color:q=d,opacity:J}=u,et=[i?b:S,i?O:M,o?E:T,o?w:A],dt=["radiusTopLeft","radiusTopRight","radiusBottomRight","radiusBottomLeft"];Rr(s)&&dt.push(dt.shift());const _t=Object.assign(Object.assign({radius:m},Object.fromEntries(dt.map((Dt,pt)=>[Dt,et[pt]]))),{inset:N,insetLeft:k,insetRight:R,insetBottom:I,insetTop:D,minWidth:B,maxWidth:F,minHeight:G});return Ie(zI(c,l,u,s,_t)).call(be,p).style("fill","transparent").style(n,q).style(FS(t),J).style("lineWidth",C).style("stroke",y===void 0?q:y).call(be,X).node()}};eg.props={defaultEnterAnimation:"scaleInY",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const iJ={visibility:"visible",opacity:1,fillOpacity:1,strokeOpacity:1};function oJ(t,e){var n;return(n=t.style[e])!==null&&n!==void 0?n:iJ[e]}function $S(t,e,n,r){t.style[e]=n,r&&t.children.forEach(i=>$S(i,e,n,r))}function qS(t){$S(t,"visibility","hidden",!0)}function Nx(t){$S(t,"visibility","visible",!0)}var ng=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Vu(t){return Ie(t).selectAll(`.${Ni}`).nodes().filter(e=>!e.__removed__)}function WI(t,e){return KS(t,e).flatMap(({container:n})=>Vu(n))}function KS(t,e){return e.filter(n=>n!==t&&n.options.parentKey===t.options.key)}function Qc(t){return Ie(t).select(`.${Ha}`).node()}function YI(t){if(t.tagName==="g")return t.getRenderBounds();const e=t.getGeometryBounds(),n=new ro;return n.setFromTransformedAABB(e,t.getWorldTransform()),n}function rg(t,e){const{offsetX:n,offsetY:r}=e,i=YI(t),{min:[o,a],max:[s,c]}=i,l=n<o||n>s,u=r<a||r>c;return l||u?null:[n-o,r-a]}function ZS(t,e){const{offsetX:n,offsetY:r}=e,[i,o,a,s]=aJ(t);return[Math.min(a,Math.max(i,n))-i,Math.min(s,Math.max(o,r))-o]}function aJ(t){const e=t.getRenderBounds(),{min:[n,r],max:[i,o]}=e;return[n,r,i,o]}function HI(t){return e=>e.__data__.color}function JS(t){return e=>e.__data__.x}function cd(t){const e=Array.isArray(t)?t:[t],n=new Map(e.flatMap(r=>Array.from(r.markState.keys()).map(o=>[Rx(r.key,o.key),o.data])));return r=>{const{index:i,markKey:o,viewKey:a}=r.__data__;return n.get(Rx(a,o))[i]}}function Hl(t,e=(r,i)=>r,n=(r,i,o)=>r.setAttribute(i,o)){const r="__states__",i="__ordinal__",o=u=>{const{[r]:f=[],[i]:d={}}=u,h=f.reduce((p,v)=>Object.assign(Object.assign({},p),t[v]),d);if(Object.keys(h).length!==0){for(const[p,v]of Object.entries(h)){const y=oJ(u,p),m=e(v,u);n(u,p,m),p in d||(d[p]=y)}u[i]=d}},a=u=>{u[r]||(u[r]=[])};return{setState:(u,...f)=>{a(u),u[r]=[...f],o(u)},removeState:(u,...f)=>{a(u);for(const d of f){const h=u[r].indexOf(d);h!==-1&&u[r].splice(h,1)}o(u)},hasState:(u,f)=>(a(u),u[r].indexOf(f)!==-1)}}function sJ(t){return t===void 0?!0:typeof t!="object"?!1:Object.keys(t).length===0}function Rx(t,e){return`${t},${e}`}function dp(t,e){const r=(Array.isArray(t)?t:[t]).flatMap(o=>o.marks.map(a=>[Rx(o.key,a.key),a.state])),i={};for(const o of e){const[a,s]=Array.isArray(o)?o:[o,{}];i[a]=r.reduce((c,l)=>{const[u,f={}]=l,d=sJ(f[a])?s:f[a];for(const[h,p]of Object.entries(d)){const v=c[h],y=(m,b,O,E)=>{const w=Rx(E.__data__.viewKey,E.__data__.markKey);return u!==w?v==null?void 0:v(m,b,O,E):typeof p!="function"?p:p(m,b,O,E)};c[h]=y}return c},{})}return i}function ig(t,e){const n=new Map(t.map((i,o)=>[i,o])),r=e?t.map(e):t;return(i,o)=>{if(typeof i!="function")return i;const a=n.get(o),s=e?e(o):o;return i(s,a,r,o)}}function UI(t){var{link:e=!1,valueof:n=(u,f)=>u,coordinate:r}=t,i=ng(t,["link","valueof","coordinate"]);const o="element-link";if(!e)return[()=>{},()=>{}];const a=u=>u.__data__.points,s=(u,f)=>{const[,d,h]=u,[p,,,v]=f;return[d,p,v,h]};return[u=>{var f;if(u.length<=1)return;const d=fc(u,(h,p)=>{const{x:v}=h.__data__,{x:y}=p.__data__;return v-y});for(let h=1;h<d.length;h++){const p=Ls(),v=d[h-1],y=d[h],[m,b,O,E]=s(a(v),a(y));p.moveTo(...m),p.lineTo(...b),p.lineTo(...O),p.lineTo(...E),p.closePath();const w=Xc(i,T=>n(T,v)),{fill:_=v.getAttribute("fill")}=w,S=ng(w,["fill"]),M=new ke({className:o,style:Object.assign({d:p.toString(),fill:_,zIndex:-2},S)});(f=v.link)===null||f===void 0||f.remove(),v.parentNode.appendChild(M),v.link=M}},u=>{var f;(f=u.link)===null||f===void 0||f.remove(),u.link=null}]}function VI(t,e,n){const r=i=>{const{transform:o}=t.style;return o?`${o} ${i}`:i};if(ar(n)){const{points:i}=t.__data__,[o,a]=Rr(n)?Ox(i):i,s=n.getCenter(),c=ci(o,s),l=ci(a,s),u=Rs(c),f=vI(c,l),d=u+f/2,h=e*Math.cos(d),p=e*Math.sin(d);return r(`translate(${h}, ${p})`)}return Rr(n)?r(`translate(${e}, 0)`):r(`translate(0, ${-e})`)}function XI(t){var{document:e,background:n,scale:r,coordinate:i,valueof:o}=t,a=ng(t,["document","background","scale","coordinate","valueof"]);const s="element-background";if(!n)return[()=>{},()=>{}];const c=(m,b,O)=>{const E=m.invert(b),w=b+m.getBandWidth(E)/2,_=m.getStep(E)/2,S=_*O;return[w-_+S,w+_-S]},l=(m,b)=>{const{x:O}=r;if(!Q0(O))return[0,1];const{__data__:E}=m,{x:w}=E,[_,S]=c(O,w,b);return[_,S]},u=(m,b)=>{const{y:O}=r;if(!Q0(O))return[0,1];const{__data__:E}=m,{y:w}=E,[_,S]=c(O,w,b);return[_,S]},f=(m,b)=>{const{padding:O}=b,[E,w]=l(m,O),[_,S]=u(m,O),M=[[E,_],[w,_],[w,S],[E,S]].map(N=>i.map(N)),{__data__:T}=m,{y:A,y1:C}=T;return zI(e,M,{y:A,y1:C},i,b)},d=(m,b)=>{const{transform:O="scale(1.2, 1.2)",transformOrigin:E="center center",stroke:w=""}=b,_=ng(b,["transform","transformOrigin","stroke"]),S=Object.assign({transform:O,transformOrigin:E,stroke:w},_),M=m.cloneNode(!0);for(const[T,A]of Object.entries(S))M.style[T]=A;return M},h=()=>{const{x:m,y:b}=r;return[m,b].some(Q0)};return[m=>{m.background&&m.background.remove();const b=Xc(a,N=>o(N,m)),{fill:O="#CCD6EC",fillOpacity:E=.3,zIndex:w=-2,padding:_=.001,lineWidth:S=0}=b,M=ng(b,["fill","fillOpacity","zIndex","padding","lineWidth"]),T=Object.assign(Object.assign({},M),{fill:O,fillOpacity:E,zIndex:w,padding:_,lineWidth:S}),C=(h()?f:d)(m,T);C.className=s,m.parentNode.parentNode.appendChild(C),m.background=C},m=>{var b;(b=m.background)===null||b===void 0||b.remove(),m.background=null},m=>m.className===s]}function Xu(t,e){const r=t.getRootNode().defaultView.getContextService().getDomElement();r!=null&&r.style&&(t.cursor=r.style.cursor,r.style.cursor=e)}function cJ(t){Xu(t,t.cursor)}function QS(t,e,n){return t.find(r=>Object.entries(e).every(([i,o])=>n(r)[i]===o))}function Lx(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}function og(t,e=!1){const n=BI(t,r=>!!r).map((r,i)=>[i===0?"M":"L",...r]);return e&&n.push(["Z"]),n}function $I(t){return t.querySelectorAll(".element")}function lJ(t,e,n=0){const r=[["M",...e[1]]],i=Lx(t,e[1]),o=Lx(t,e[0]);return i===0?r.push(["L",...e[3]],["A",o,o,0,n,1,...e[0]],["Z"]):r.push(["A",i,i,0,n,0,...e[2]],["L",...e[3]],["A",o,o,0,n,1,...e[0]],["Z"]),r}function Ix(t,e){if(e(t))return t;let n=t.parent;for(;n&&!e(n);)n=n.parent;return n}function qI(t,e){const{__data__:n}=t,{markKey:r,index:i,seriesIndex:o}=n,{markState:a}=e,s=Array.from(a.keys()).find(c=>c.key===r);if(s)return o?o.map(c=>s.data[c]):s.data[i]}function uJ(t){return Ix(t,e=>e.className==="component")}function fJ(t){return Ix(t,e=>e.className==="element")}function dJ(t){return Ix(t,e=>e.className==="label")}function ao(t,e,n,r=i=>!0){return i=>{if(!r(i))return;n.emit(`plot:${t}`,i);const{target:o}=i;if(!o)return;const{className:a}=o;if(a==="plot")return;const s=fJ(o),c=uJ(o),l=dJ(o),u=s||c||l;if(!u)return;const{className:f,markType:d}=u,h=Object.assign(Object.assign({},i),{nativeEvent:!0});f==="element"?(h.data={data:qI(u,e)},n.emit(`element:${t}`,h),n.emit(`${d}:${t}`,h)):f==="label"?(h.data={data:u.attributes.datum},n.emit(`label:${t}`,h),n.emit(`${a}:${t}`,h)):(n.emit(`component:${t}`,h),n.emit(`${a}:${t}`,h))}}function KI(){return(t,e,n)=>{const{container:r,view:i}=t,o=ao(Jn.CLICK,i,n,S=>S.detail===1),a=ao(Jn.DBLCLICK,i,n,S=>S.detail===2),s=ao(Jn.POINTER_TAP,i,n),c=ao(Jn.POINTER_DOWN,i,n),l=ao(Jn.POINTER_UP,i,n),u=ao(Jn.POINTER_OVER,i,n),f=ao(Jn.POINTER_OUT,i,n),d=ao(Jn.POINTER_MOVE,i,n),h=ao(Jn.POINTER_ENTER,i,n),p=ao(Jn.POINTER_LEAVE,i,n),v=ao(Jn.POINTER_UPOUTSIDE,i,n),y=ao(Jn.DRAG_START,i,n),m=ao(Jn.DRAG,i,n),b=ao(Jn.DRAG_END,i,n),O=ao(Jn.DRAG_ENTER,i,n),E=ao(Jn.DRAG_LEAVE,i,n),w=ao(Jn.DRAG_OVER,i,n),_=ao(Jn.DROP,i,n);return r.addEventListener("click",o),r.addEventListener("click",a),r.addEventListener("pointertap",s),r.addEventListener("pointerdown",c),r.addEventListener("pointerup",l),r.addEventListener("pointerover",u),r.addEventListener("pointerout",f),r.addEventListener("pointermove",d),r.addEventListener("pointerenter",h),r.addEventListener("pointerleave",p),r.addEventListener("pointerupoutside",v),r.addEventListener("dragstart",y),r.addEventListener("drag",m),r.addEventListener("dragend",b),r.addEventListener("dragenter",O),r.addEventListener("dragleave",E),r.addEventListener("dragover",w),r.addEventListener("drop",_),()=>{r.removeEventListener("click",o),r.removeEventListener("click",a),r.removeEventListener("pointertap",s),r.removeEventListener("pointerdown",c),r.removeEventListener("pointerup",l),r.removeEventListener("pointerover",u),r.removeEventListener("pointerout",f),r.removeEventListener("pointermove",d),r.removeEventListener("pointerenter",h),r.removeEventListener("pointerleave",p),r.removeEventListener("pointerupoutside",v),r.removeEventListener("dragstart",y),r.removeEventListener("drag",m),r.removeEventListener("dragend",b),r.removeEventListener("dragenter",O),r.removeEventListener("dragleave",E),r.removeEventListener("dragover",w),r.removeEventListener("drop",_)}}}KI.props={reapplyWhenUpdate:!0};function hJ(){return{"component.axisRadar":$L,"component.axisLinear":zu,"component.axisArc":XL,"component.legendContinuousBlock":fI,"component.legendContinuousBlockSize":dI,"component.legendContinuousSize":LS,"interaction.event":KI,"composition.mark":hI,"composition.view":pI,"shape.label.label":DI}}var pJ=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Dr(t,e){const n=Object.assign(Object.assign({},hJ()),e),r=o=>{if(typeof o!="string")return o;const a=`${t}.${o}`;return n[a]||Zh(`Unknown Component: ${a}`)};return[(o,a)=>{const{type:s}=o,c=pJ(o,["type"]);s||Zh("Plot type is required!");const l=r(s);return l==null?void 0:l(c,a)},r]}function ZI(t){const{canvas:e,group:n}=t;return(e==null?void 0:e.document)||(n==null?void 0:n.ownerDocument)||Zh("Cannot find library document")}var JI=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function vJ(t,e,n){const[r]=Dr("coordinate",n),{innerHeight:i,innerWidth:o,insetLeft:a,insetTop:s,insetRight:c,insetBottom:l}=t,{coordinates:u=[]}=e,f=_J(u),d=f[0].type==="cartesian3D",h=Object.assign(Object.assign({},t),{x:a,y:s,width:o-a-c,height:i-l-s,transformations:f.flatMap(r)});return d?new WR.Coordinate3D(h):new WR.Coordinate(h)}function QI(t,e){const{coordinate:n={},coordinates:r}=t,i=JI(t,["coordinate","coordinates"]);if(r)return t;const{type:o,transform:a=[]}=n,s=JI(n,["type","transform"]);if(!o)return Object.assign(Object.assign({},i),{coordinates:a});const[,c]=Dr("coordinate",e),{transform:l=!1}=c(o).props||{};if(l)throw new Error(`Unknown coordinate: ${o}.`);return Object.assign(Object.assign({},i),{coordinates:[Object.assign({type:o},s),...a]})}function dc(t,e){return t.filter(n=>n.type===e)}function ld(t){return dc(t,"polar").length>0}function gJ(t){return dc(t,"helix").length>0}function hp(t){return dc(t,"transpose").length%2===1}function yJ(t){return dc(t,"parallel").length>0}function t3(t){return dc(t,"theta").length>0}function mJ(t){return dc(t,"reflect").length>0}function ag(t){return dc(t,"radial").length>0}function xJ(t){return dc(t,"radar").length>0}function bJ(t){return dc(t,"reflectY").length>0}function _J(t){return t.find(e=>e.type==="cartesian"||e.type==="cartesian3D")?t:[...t,{type:"cartesian"}]}function dn(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}var wJ=dn("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),OJ=dn("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),EJ=dn("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),SJ=dn("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),MJ=dn("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),PJ=dn("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),TJ=dn("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),AJ=dn("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),CJ=dn("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),kJ=dn("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),NJ=dn("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function e3(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}function RJ(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,s=r<e-1?t[r+2]:2*o-i;return e3((n-r/e)*e,a,i,o,s)}}function LJ(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],o=t[r%e],a=t[(r+1)%e],s=t[(r+2)%e];return e3((n-r/e)*e,i,o,a,s)}}var tM=function(t){return function(){return t}};function n3(t,e){return function(n){return t+n*e}}function IJ(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function DJ(t,e){var n=e-t;return n?n3(t,n>180||n<-180?n-360*Math.round(n/360):n):tM(isNaN(t)?e:t)}function BJ(t){return(t=+t)==1?pp:function(e,n){return n-e?IJ(e,n,t):tM(isNaN(e)?n:e)}}function pp(t,e){var n=e-t;return n?n3(t,n):tM(isNaN(t)?e:t)}var Tgt=function t(e){var n=BJ(e);function r(i,o){var a=n((i=xu(i)).r,(o=xu(o)).r),s=n(i.g,o.g),c=n(i.b,o.b),l=pp(i.opacity,o.opacity);return function(u){return i.r=a(u),i.g=s(u),i.b=c(u),i.opacity=l(u),i+""}}return r.gamma=t,r}(1);function r3(t){return function(e){var n=e.length,r=new Array(n),i=new Array(n),o=new Array(n),a,s;for(a=0;a<n;++a)s=xu(e[a]),r[a]=s.r||0,i[a]=s.g||0,o[a]=s.b||0;return r=t(r),i=t(i),o=t(o),s.opacity=1,function(c){return s.r=r(c),s.g=i(c),s.b=o(c),s+""}}}var FJ=r3(RJ),Agt=r3(LJ),Er=t=>FJ(t[t.length-1]),i3=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(dn),jJ=Er(i3),o3=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(dn),GJ=Er(o3),a3=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(dn),zJ=Er(a3),s3=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(dn),WJ=Er(s3),c3=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(dn),YJ=Er(c3),l3=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(dn),HJ=Er(l3),u3=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(dn),UJ=Er(u3),f3=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(dn),VJ=Er(f3),d3=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(dn),XJ=Er(d3),h3=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(dn),$J=Er(h3),p3=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(dn),qJ=Er(p3),v3=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(dn),KJ=Er(v3),g3=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(dn),ZJ=Er(g3),y3=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(dn),JJ=Er(y3),m3=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(dn),QJ=Er(m3),x3=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(dn),tQ=Er(x3),b3=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(dn),eQ=Er(b3),_3=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(dn),nQ=Er(_3),w3=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(dn),rQ=Er(w3),O3=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(dn),iQ=Er(O3),E3=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(dn),oQ=Er(E3),S3=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(dn),aQ=Er(S3),M3=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(dn),sQ=Er(M3),P3=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(dn),cQ=Er(P3),T3=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(dn),lQ=Er(T3),A3=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(dn),uQ=Er(A3),C3=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(dn),fQ=Er(C3);function dQ(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-t*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-t*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-t*2475.67)))))))+")"}var hQ=Math.PI/180,pQ=180/Math.PI,k3=-.14861,eM=1.78277,nM=-.29227,Dx=-.90649,sg=1.97294,N3=sg*Dx,R3=sg*eM,L3=eM*nM-Dx*k3;function vQ(t){if(t instanceof ud)return new ud(t.h,t.s,t.l,t.opacity);t instanceof $n||(t=Ev(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(L3*r+N3*e-R3*n)/(L3+N3-R3),o=r-i,a=(sg*(n-i)-nM*o)/Dx,s=Math.sqrt(a*a+o*o)/(sg*i*(1-i)),c=s?Math.atan2(a,o)*pQ-120:NaN;return new ud(c<0?c+360:c,s,i,t.opacity)}function tl(t,e,n,r){return arguments.length===1?vQ(t):new ud(t,e,n,r==null?1:r)}function ud(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}bf(ud,tl,yo(ia,{brighter:function(e){return e=e==null?_l:Math.pow(_l,e),new ud(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?Zs:Math.pow(Zs,e),new ud(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*hQ,n=+this.l,r=isNaN(this.s)?0:this.s*n*(1-n),i=Math.cos(e),o=Math.sin(e);return new $n(255*(n+r*(k3*i+eM*o)),255*(n+r*(nM*i+Dx*o)),255*(n+r*(sg*i)),this.opacity)}}));function I3(t){return function e(n){n=+n;function r(i,o){var a=t((i=tl(i)).h,(o=tl(o)).h),s=pp(i.s,o.s),c=pp(i.l,o.l),l=pp(i.opacity,o.opacity);return function(u){return i.h=a(u),i.s=s(u),i.l=c(Math.pow(u,n)),i.opacity=l(u),i+""}}return r.gamma=e,r}(1)}var Cgt=I3(DJ),rM=I3(pp),gQ=rM(tl(300,.5,0),tl(-240,.5,1)),yQ=rM(tl(-100,.75,.35),tl(80,1.5,.8)),mQ=rM(tl(260,.75,.35),tl(80,1.5,.8)),Bx=tl();function xQ(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return Bx.h=360*t-100,Bx.s=1.5-1.5*e,Bx.l=.8-.9*e,Bx+""}var Fx=xu(),bQ=Math.PI/3,_Q=Math.PI*2/3;function wQ(t){var e;return t=(.5-t)*Math.PI,Fx.r=255*(e=Math.sin(t))*e,Fx.g=255*(e=Math.sin(t+bQ))*e,Fx.b=255*(e=Math.sin(t+_Q))*e,Fx+""}function OQ(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-t*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+t*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-t*6838.66)))))))+")"}function jx(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}var EQ=jx(dn("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),SQ=jx(dn("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),MQ=jx(dn("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),PQ=jx(dn("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function TQ(t,e,n,r,i,o){const{guide:a={}}=n,s=FQ(t,e,n);if(typeof s!="string")return n;const c=jQ(s,t,e,n),l=IQ(s,c,n);return Object.assign(Object.assign(Object.assign({},n),zQ(s,t,e,n,r)),{domain:l,range:GQ(s,t,e,n,l,i,o),expectedDomain:c,guide:a,name:t,type:s})}function AQ(t,e){const n={};for(const r of t){const{values:i,name:o}=r,a=e[o];for(const s of i){const{name:c,value:l}=s;n[c]=l.map(u=>a.map(u))}}return n}function CQ(t,e){const n=Array.from(t.values()).flatMap(i=>i.channels);Z1(n,i=>i.map(o=>e.get(o.scale.uid)),i=>i.name).filter(([,i])=>i.some(o=>typeof o.getOptions().groupTransform=="function")&&i.every(o=>o.getTicks)).map(i=>i[1]).forEach(i=>{const o=i.map(a=>a.getOptions().groupTransform)[0];o(i)})}function kQ(t,e){var n;const{components:r=[]}=e,i=["scale","encode","axis","legend","data","transform"],o=Array.from(new Set(t.flatMap(s=>s.channels.map(c=>c.scale)))),a=new Map(o.map(s=>[s.name,s]));for(const s of r){const c=LQ(s);for(const l of c){const u=a.get(l),f=((n=s.scale)===null||n===void 0?void 0:n[l])||{},{independent:d=!1}=f;if(u&&!d){const{guide:h}=u,p=typeof h=="boolean"?{}:h;u.guide=bt({},p,s),Object.assign(u,f)}else{const h=Object.assign(Object.assign({},f),{expectedDomain:f.domain,name:l,guide:CS(s,i)});o.push(h)}}}return o}function NQ(t){if(!t||!Array.isArray(t))return[Kf,Kf];let e,n;return[o=>{var a;e=o.map.bind(o),n=(a=o.invert)===null||a===void 0?void 0:a.bind(o);const s=t.filter(([d])=>typeof d=="function"),c=t.filter(([d])=>typeof d!="function"),l=new Map(c);if(o.map=d=>{for(const[h,p]of s)if(h(d))return p;return l.has(d)?l.get(d):e(d)},!n)return o;const u=new Map(c.map(([d,h])=>[h,d])),f=new Map(s.map(([d,h])=>[h,d]));return o.invert=d=>f.has(d)?d:u.has(d)?u.get(d):n(d),o},o=>(e!==null&&(o.map=e),n!==null&&(o.invert=n),o)]}function D3(t,e){const n=Object.keys(t);for(const r of Object.values(e)){const{name:i}=r.getOptions();if(!(i in t))t[i]=r;else{const o=n.filter(c=>c.startsWith(i)).map(c=>+(c.replace(i,"")||0)),a=Qn(o)+1,s=`${i}${a}`;t[s]=r,r.getOptions().key=s}}return t}function B3(t,e){const[n]=Dr("scale",e),{relations:r}=t,[i]=NQ(r),o=n(t);return i(o)}function RQ(t){const e=t.flatMap(n=>Array.from(n.values())).flatMap(n=>n.channels.map(r=>r.scale));F3(e,"x"),F3(e,"y")}function LQ(t){const{channels:e=[],type:n,scale:r={}}=t,i=["shape","color","opacity","size"];return e.length!==0?e:n==="axisX"?["x"]:n==="axisY"?["y"]:n==="legends"?Object.keys(r).filter(o=>i.includes(o)):[]}function F3(t,e){const n=t.filter(({name:o,facet:a=!0})=>a&&o===e),r=n.flatMap(o=>o.domain),i=n.every(j3)?Wl(r):n.every(G3)?Array.from(new Set(r)):null;if(i!==null)for(const o of n)o.domain=i}function IQ(t,e,n){const{ratio:r}=n;return r==null?e:j3({type:t})?DQ(e,r,t):G3({type:t})?BQ(e,r):e}function DQ(t,e,n){const r=t.map(Number),i=new $o({domain:r,range:[r[0],r[0]+(r[r.length-1]-r[0])*e]});return n==="time"?t.map(o=>new Date(i.map(o))):t.map(o=>i.map(o))}function BQ(t,e){const n=Math.round(t.length*e);return t.slice(0,n)}function j3(t){const{type:e}=t;return typeof e!="string"?!1:["linear","log","pow","time"].includes(e)}function G3(t){const{type:e}=t;return typeof e!="string"?!1:["band","point","ordinal"].includes(e)}function FQ(t,e,n){const{type:r,domain:i,range:o,quantitative:a,ordinal:s}=n;return r!==void 0?r:QQ(e)?"identity":typeof o=="string"?"linear":(i||o||[]).length>2?iM(t,s):i!==void 0?H3([i])?iM(t,s):U3(e)?"time":W3(t,o,a):H3(e)?iM(t,s):U3(e)?"time":W3(t,o,a)}function jQ(t,e,n,r){const{domain:i}=r;if(i!==void 0)return i;switch(t){case"linear":case"time":case"log":case"pow":case"sqrt":case"quantize":case"threshold":return Y3($Q(n,r),r);case"band":case"ordinal":case"point":return qQ(n);case"quantile":return KQ(n);case"sequential":return Y3(ZQ(n),r);default:return[]}}function GQ(t,e,n,r,i,o,a){const{range:s}=r;if(typeof s=="string")return WQ(s);if(s!==void 0)return s;const{rangeMin:c,rangeMax:l}=r;switch(t){case"linear":case"time":case"log":case"pow":case"sqrt":{const u=z3(n,r,i,o,a),[f,d]=JQ(e,u);return[c!=null?c:f,l!=null?l:d]}case"band":case"point":{const u=e==="size"?5:0,f=e==="size"?10:1;return[c!=null?c:u,l!=null?l:f]}case"ordinal":return z3(n,r,i,o,a);case"sequential":return;case"constant":return[n[0][0]];default:return[]}}function zQ(t,e,n,r,i){switch(t){case"linear":case"time":case"log":case"pow":case"sqrt":return UQ(i,r);case"band":case"point":return VQ(t,e,i,r);case"sequential":return HQ(r);default:return r}}function z3(t,e,n,r,i){const[o]=Dr("palette",i),{category10:a,category20:s}=r,c=zX(n).length<=a.length?a:s,{palette:l=c,offset:u}=e;if(Array.isArray(l))return l;try{return o({type:l})}catch(f){const d=YQ(l,n,u);if(d)return d;throw new Error(`Unknown Component: ${l} `)}}function WQ(t){return t.split("-")}function YQ(t,e,n=r=>r){if(!t)return null;const r=Fu(t),i=Ee[`scheme${r}`],o=Ee[`interpolate${r}`];if(!i&&!o)return null;if(i){if(!i.some(Array.isArray))return i;const a=i[e.length];if(a)return a}return e.map((a,s)=>o(n(s/e.length)))}function HQ(t){const{palette:e="ylGnBu",offset:n}=t,r=Fu(e),i=Ee[`interpolate${r}`];if(!i)throw new Error(`Unknown palette: ${r}`);return{interpolator:n?o=>i(n(o)):i}}function UQ(t,e){const{interpolate:n=W0,nice:r=!1,tickCount:i=5}=e;return Object.assign(Object.assign({},e),{interpolate:n,nice:r,tickCount:i})}function VQ(t,e,n,r){if(r.padding!==void 0||r.paddingInner!==void 0||r.paddingOuter!==void 0)return Object.assign(Object.assign({},r),{unknown:NaN});const i=XQ(t,e,n),{paddingInner:o=i,paddingOuter:a=i}=r;return Object.assign(Object.assign({},r),{paddingInner:o,paddingOuter:a,padding:i,unknown:NaN})}function XQ(t,e,n){return e==="enterDelay"||e==="enterDuration"||e==="size"?0:t==="band"?t3(n)?0:.1:t==="point"?.5:0}function iM(t,e){return e||(ttt(t)?"point":"ordinal")}function W3(t,e,n){return n||(t!=="color"||e?"linear":"sequential")}function Y3(t,e){if(t.length===0)return t;const{domainMin:n,domainMax:r}=e,[i,o]=t;return[n!=null?n:i,r!=null?r:o]}function $Q(t,e){const{zero:n=!1}=e;let r=1/0,i=-1/0;for(const o of t)for(const a of o)mr(a)&&(r=Math.min(r,+a),i=Math.max(i,+a));return r===1/0?[]:n?[Math.min(0,r),i]:[r,i]}function qQ(t){return Array.from(new Set(t.flat()))}function KQ(t){return t.flat().sort()}function ZQ(t){let e=1/0,n=-1/0;for(const r of t)for(const i of r)mr(i)&&(e=Math.min(e,+i),n=Math.max(n,+i));return e===1/0?[]:[e<0?-n:e,n]}function JQ(t,e){return t==="enterDelay"?[0,1e3]:t=="enterDuration"?[300,1e3]:t.startsWith("y")||t.startsWith("position")?[1,0]:t==="color"?[GX(e),DR(e)]:t==="opacity"?[0,1]:t==="size"?[1,10]:[0,1]}function H3(t){return oM(t,e=>{const n=typeof e;return n==="string"||n==="boolean"})}function U3(t){return oM(t,e=>e instanceof Date)}function QQ(t){return oM(t,Jh)}function oM(t,e){for(const n of t)if(n.some(e))return!0;return!1}function ttt(t){return t.startsWith("x")||t.startsWith("y")||t.startsWith("position")||t.startsWith("size")}function ett(t){return t.startsWith("x")||t.startsWith("y")||t.startsWith("position")||t==="enterDelay"||t==="enterDuration"||t==="updateDelay"||t==="updateDuration"||t==="exitDelay"||t==="exitDuration"}function ntt(t){if(!t||!t.type)return!1;if(typeof t.type=="function")return!0;const{type:e,domain:n,range:r,interpolator:i}=t,o=n&&n.length>0,a=r&&r.length>0;return!!(["linear","sqrt","log","time","pow","threshold","quantize","quantile","ordinal","band","point"].includes(e)&&o&&a||["sequential"].includes(e)&&o&&(a||i)||["constant","identity"].includes(e)&&a)}const rtt={linear:"linear",identity:"identity",log:"log",pow:"pow",sqrt:"sqrt",sequential:"sequential"},itt={threshold:"threshold",quantize:"quantize",quantile:"quantile"},ott={ordinal:"ordinal",band:"band",point:"point"},att={constant:"constant"};var $u=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function stt(t,e,n){const{coordinates:r=[],title:i}=e,[,o]=Dr("component",n),a=t.filter(({guide:u})=>u!==null),s=[],c=ytt(e,t,n);if(s.push(...c),i){const{props:u}=o("title"),{defaultPosition:f,defaultOrientation:d,defaultOrder:h,defaultSize:p,defaultCrossPadding:v}=u,y=typeof i=="string"?{title:i}:i;s.push(Object.assign({type:"title",position:f,orientation:d,order:h,crossPadding:v[0],defaultSize:p},y))}return dtt(a,r).forEach(([u,f])=>{const{props:d}=o(u),{defaultPosition:h,defaultPlane:p="xy",defaultOrientation:v,defaultSize:y,defaultOrder:m,defaultLength:b,defaultPadding:O=[0,0],defaultCrossPadding:E=[0,0]}=d,w=bt({},...f),{guide:_,field:S}=w,M=Array.isArray(_)?_:[_];for(const T of M){const[A,C]=vtt(u,h,v,T,f,a,r);if(!A&&!C)continue;const N=A==="left"||A==="right",k=N?O[1]:O[0],R=N?E[1]:E[0],{size:I,order:D=m,length:B=b,padding:F=k,crossPadding:G=R}=T;s.push(Object.assign(Object.assign({title:S},T),{defaultSize:y,length:B,position:A,plane:p,orientation:C,padding:F,order:D,crossPadding:G,size:I,type:u,scales:f}))}}),s}function V3(t,e,n,r,i){const[o]=Dr("component",r),{scaleInstances:a,scale:s,bbox:c}=t,l=$u(t,["scaleInstances","scale","bbox"]),u={bbox:c,library:r};return o(l)({coordinate:e,library:r,markState:i,scales:a,theme:n,value:u,scale:s})}function ctt(t){return t.map(e=>{const n=bt(e,e.style);return delete n.style,n})}function kgt(t){return t.flatMap(e=>e.type=="group"?e.children:e)}function X3(t,e){const n=["left","right","bottom","top"];return K1(t,({type:o,position:a,group:s})=>n.includes(a)?s===void 0?o.startsWith("legend")?`legend-${a}`:Symbol("independent"):s==="independent"?Symbol("independent"):s:Symbol("independent")).flatMap(([,o])=>{if(o.length===1)return o[0];if(e!==void 0){const u=o.filter(v=>v.length!==void 0).map(v=>v.length),f=Cs(u);if(f>e)return o.forEach(v=>v.group=Symbol("independent")),o;const d=e-f,h=o.length-u.length,p=d/h;o.forEach(v=>{v.length===void 0&&(v.length=p)})}const a=Qn(o,u=>u.size),s=Qn(o,u=>u.order),c=Qn(o,u=>u.crossPadding),l=o[0].position;return{type:"group",size:a,order:s,position:l,children:o,crossPadding:c}})}function ltt(t,e){const n=["shape","size","color","opacity"],r=(d,h)=>d==="constant"&&h==="size",i=t.filter(({type:d,name:h})=>typeof d=="string"&&n.includes(h)&&!r(d,h)),o=i.filter(({type:d})=>d==="constant"),a=i.filter(({type:d})=>d!=="constant"),c=K1(a,d=>d.field?d.field:Symbol("independent")).map(([d,h])=>[d,[...h,...o]]).filter(([,d])=>d.some(h=>h.type!=="constant")),l=new Map(c);if(l.size===0)return[];const u=d=>d.sort(([h],[p])=>h.localeCompare(p));return Array.from(l).map(([,d])=>{const p=WX(d).sort((v,y)=>y.length-v.length).map(v=>({combination:v,option:v.map(y=>[y.name,utt(y)])}));for(const{option:v,combination:y}of p)if(!v.every(m=>m[1]==="constant")&&v.every(m=>m[1]==="discrete"||m[1]==="constant"))return["legendCategory",y];for(const[v,y]of UX)for(const{option:m,combination:b}of p)if(y.some(O=>jR(u(O),u(m))))return[v,b];return null}).filter(mr)}function utt(t){const{type:e}=t;return typeof e!="string"?null:e in rtt?"continuous":e in ott?"discrete":e in itt?"distribution":e in att?"constant":null}function ftt(t,e){return t.map(n=>{const{name:r}=n;if(gJ(e)||t3(e)||hp(e)&&(ld(e)||ag(e)))return null;if(r.startsWith("x"))return ld(e)?["axisArc",[n]]:ag(e)?["axisLinear",[n]]:[hp(e)?"axisY":"axisX",[n]];if(r.startsWith("y"))return ld(e)?["axisLinear",[n]]:ag(e)?["axisArc",[n]]:[hp(e)?"axisX":"axisY",[n]];if(r.startsWith("z"))return["axisZ",[n]];if(r.startsWith("position")){if(xJ(e))return["axisRadar",[n]];if(!ld(e))return["axisY",[n]]}return null}).filter(mr)}function dtt(t,e){const n=t.filter(r=>ntt(r));return[...ltt(n,e),...ftt(n,e)]}function aM(t){const e=dc(t,"polar");if(e.length){const r=e[e.length-1],{startAngle:i,endAngle:o}=GR(r);return[i,o]}const n=dc(t,"radial");if(n.length){const r=n[n.length-1],{startAngle:i,endAngle:o}=zR(r);return[i,o]}return[-Math.PI/2,Math.PI/2*3]}function htt(t){const e=/position(\d*)/g.exec(t);return e?+e[1]:null}function ptt(t,e,n,r,i){const{name:o}=n[0];if(t==="axisRadar"){const a=r.filter(f=>f.name.startsWith("position")),s=htt(o);if(o===a.slice(-1)[0].name||s===null)return[null,null];const[c,l]=aM(i);return["center",(l-c)/(a.length-1)*s+c]}if(t==="axisY"&&yJ(i))return hp(i)?["center","horizontal"]:["center","vertical"];if(t==="axisLinear"){const[a]=aM(i);return["center",a]}return t==="axisArc"?e[0]==="inner"?["inner",null]:["outer",null]:ld(i)?["center",null]:ag(i)?["center",null]:t==="axisX"&&mJ(i)||t==="axisX"&&bJ(i)?["top",null]:e}function vtt(t,e,n,r,i,o,a){const[s]=aM(a),c=[r.position||e,s!=null?s:n];return typeof t=="string"&&t.startsWith("axis")?ptt(t,c,i,o,a):typeof t=="string"&&t.startsWith("legend")&&ld(a)&&r.position==="center"?["center","vertical"]:c}function gtt(t,e,n=[]){return t==="x"?hp(n)?`${e}Y`:`${e}X`:t==="y"?hp(n)?`${e}X`:`${e}Y`:null}function ytt(t,e,n){const[,r]=Dr("component",n),{coordinates:i}=t;function o(a,s,c,l){const u=gtt(s,a,i);if(!l||!u)return;const{props:f}=r(u),{defaultPosition:d,defaultSize:h,defaultOrder:p,defaultCrossPadding:[v]}=f;return Object.assign(Object.assign({position:d,defaultSize:h,order:p,type:u,crossPadding:v},l),{scales:[c]})}return e.filter(a=>a.slider||a.scrollbar).flatMap(a=>{const{slider:s,scrollbar:c,name:l}=a;return[o("slider",l,a,s),o("scrollbar",l,a,c)]}).filter(a=>!!a)}function $3(t,e,n,r,i,o){const{type:a}=t;if(!["left","right","bottom","top"].includes(r)||typeof a!="string")return;const c=a;return(c.startsWith("axis")?wtt:c.startsWith("group")?mtt:c.startsWith("legendContinuous")?Ott:c==="legendCategory"?Ett:c.startsWith("slider")?_tt:c==="title"?btt:c.startsWith("scrollbar")?xtt:()=>{})(t,e,n,r,i,o)}function mtt(t,e,n,r,i,o){const{children:a}=t,s=Qn(a,l=>l.crossPadding);a.forEach(l=>l.crossPadding=s),a.forEach(l=>$3(l,e,n,r,i,o));const c=Qn(a,l=>l.size);t.size=c,a.forEach(l=>l.size=c)}function xtt(t,e,n,r,i,o){const{trackSize:a=6}=bt({},i.scrollbar,t);t.size=a}function btt(t,e,n,r,i,o){const a=bt({},i.title,t),{title:s,subtitle:c,spacing:l=0}=a,u=$u(a,["title","subtitle","spacing"]);if(s){const f=Xt(u,"title"),d=Yx(s,f);t.size=d.height}if(c){const f=Xt(u,"subtitle"),d=Yx(c,f);t.size+=l+d.height}}function _tt(t,e,n,r,i,o){const a=()=>{const{slider:u}=i;return bt({},u,t)},{trackSize:s,handleIconSize:c}=a(),l=Math.max(s,c*2.4);t.size=l}function wtt(t,e,n,r,i,o){var a;t.transform=t.transform||[{type:"hide"}];const s=r==="left"||r==="right",c=q3(t,r,i),{tickLength:l=0,labelSpacing:u=0,titleSpacing:f=0,labelAutoRotate:d}=c,h=$u(c,["tickLength","labelSpacing","titleSpacing","labelAutoRotate"]),p=Gx(t,o),v=zx(h,p),y=l+u;if(v&&v.length){const b=Qn(v,E=>E.width),O=Qn(v,E=>E.height);if(s)t.size=b+y;else{const{tickFilter:E,labelTransform:w}=t;Ptt(p,v,e,n,E)&&!w&&d!==!1&&d!==null?(t.labelTransform="rotate(90)",t.size=b+y):(t.labelTransform=(a=t.labelTransform)!==null&&a!==void 0?a:"rotate(0)",t.size=O+y)}}else t.size=l;const m=Wx(h);m&&(s?t.size+=f+m.width:t.size+=f+m.height)}function Ott(t,e,n,r,i,o){const s=(()=>{const{legendContinuous:E}=i;return bt({},E,t)})(),{labelSpacing:c=0,titleSpacing:l=0}=s,u=$u(s,["labelSpacing","titleSpacing"]),f=r==="left"||r==="right",d=Xt(u,"ribbon"),{size:h}=d,p=Xt(u,"handleIcon"),{size:v}=p,y=Math.max(h,v*2.4);t.size=y;const m=Gx(t,o),b=zx(u,m);if(b){const E=f?"width":"height",w=Qn(b,_=>_[E]);t.size+=w+c}const O=Wx(u);O&&(f?t.size=Math.max(t.size,O.width):t.size+=l+O.height)}function Ett(t,e,n,r,i,o){const s=(()=>{const{legendCategory:R}=i,{title:I}=t,[D,B]=Array.isArray(I)?[I,void 0]:[void 0,I];return bt({title:D},R,Object.assign(Object.assign({},t),{title:B}))})(),{itemSpacing:c,itemMarkerSize:l,titleSpacing:u,rowPadding:f,colPadding:d,maxCols:h=1/0,maxRows:p=1/0}=s,v=$u(s,["itemSpacing","itemMarkerSize","titleSpacing","rowPadding","colPadding","maxCols","maxRows"]),{cols:y,length:m}=t,b=R=>Math.min(R,p),O=R=>Math.min(R,h),E=r==="left"||r==="right",w=m===void 0?e+(E?0:n[0]+n[1]):m,_=Wx(v),S=Gx(t,o),M=zx(v,S,"itemLabel"),T=Math.max(M[0].height,l)+f,A=(R,I=0)=>l+R+c[0]+I;E?(()=>{let R=-1/0,I=0,D=1,B=0,F=-1/0,G=-1/0;const X=_?_.height:0,q=w-X;for(const{width:J}of M){const et=A(J,d);R=Math.max(R,et),I+T>q?(D++,F=Math.max(F,B),G=Math.max(G,I),B=1,I=T):(I+=T,B++)}D<=1&&(F=B,G=I),t.size=R*O(D),t.length=G+X,bt(t,{cols:O(D),gridRow:F})})():typeof y=="number"?(()=>{const R=Math.ceil(M.length/y),I=Qn(M,D=>A(D.width))*y;t.size=T*b(R)-f,t.length=Math.min(I,w)})():(()=>{let R=1,I=0,D=-1/0;for(const{width:B}of M){const F=A(B,d);I+F>w?(D=Math.max(D,I),I=F,R++):I+=F}R===1&&(D=I),t.size=T*b(R)-f,t.length=D})(),_&&(E?t.size=Math.max(t.size,_.width):t.size+=u+_.height)}function Gx(t,e){const[n]=Dr("scale",e),{scales:r,tickCount:i,tickMethod:o}=t,a=r.find(s=>s.type!=="constant"&&s.type!=="identity");return i!==void 0&&(a.tickCount=i),o!==void 0&&(a.tickMethod=o),n(a)}function zx(t,e,n="label"){const{labelFormatter:r,tickFilter:i,label:o=!0}=t,a=$u(t,["labelFormatter","tickFilter","label"]);if(!o)return null;const s=Stt(e,r,i),c=Xt(a,n),l=s.map((d,h)=>Object.fromEntries(Object.entries(c).map(([p,v])=>[p,typeof v=="function"?v(d,h):v]))),u=s.map((d,h)=>{const p=l[h];return Yx(d,p)});if(!l.some(d=>d.transform)){const d=s.map((h,p)=>p);t.indexBBox=new Map(d.map(h=>[h,[s[h],u[h]]]))}return u}function Wx(t){const e=l=>l===!1||l===null,{title:n}=t,r=$u(t,["title"]);if(e(n)||n===void 0)return null;const i=Xt(r,"title"),{direction:o,transform:a}=i,s=Array.isArray(n)?n.join(","):n;return typeof s!="string"?null:Yx(s,Object.assign(Object.assign({},i),{transform:a||(o==="vertical"?"rotate(-90)":"")}))}function q3(t,e,n){const{title:r}=t,[i,o]=Array.isArray(r)?[r,void 0]:[void 0,r],{axis:a,[`axis${tS(e)}`]:s}=n;return bt({title:i},a,s,Object.assign(Object.assign({},t),{title:o}))}function K3(t,e){const n=t.getTicks?t.getTicks():t.getOptions().domain;return e?n.filter(e):n}function Stt(t,e,n){const i=K3(t,n).map(a=>typeof a=="number"?ex(a):a),o=e?typeof e=="string"?ju(e):e:t.getFormatter?t.getFormatter():a=>`${a}`;return i.map(o)}function Mtt(t,e){return t.getBandWidth?t.getBandWidth(e)/2:0}function Ptt(t,e,n,r,i){if(Cs(e,h=>h.width)>n)return!0;const a=t.clone();a.update({range:[0,n]});const s=K3(t,i),c=s.map(h=>a.map(h)+Mtt(a,h)),l=s.map((h,p)=>p),u=-r[0],f=n+r[1],d=(h,p)=>{const{width:v}=p;return[h-v/2,h+v/2]};for(let h=0;h<l.length;h++){const p=c[h],[v,y]=d(p,e[h]);if(v<u||y>f)return!0;const m=c[h+1];if(m){const[b]=d(m,e[h+1]);if(y>b)return!0}}return!1}function Yx(t,e){const n=Ttt(t),{filter:r}=e,i=$u(e,["filter"]);return n.attr(Object.assign(Object.assign({},i),{visibility:"none"})),n.getBBox()}function Ttt(t){return t instanceof rt?t:new Gr({style:{text:`${t}`}})}function ls(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function Att(t){const e=t.find(({type:i})=>i==="axisX"),n=t.find(({type:i})=>i==="axisY"),r=t.find(({type:i})=>i==="axisZ");e&&n&&r&&(e.plane="xy",n.plane="xy",r.plane="yz",r.origin=[e.bbox.x,e.bbox.y,0],r.eulerAngles=[0,-90,0],r.bbox.x=e.bbox.x,r.bbox.y=e.bbox.y,t.push(Object.assign(Object.assign({},e),{plane:"xz",showLabel:!1,showTitle:!1,origin:[e.bbox.x,e.bbox.y,0],eulerAngles:[-90,0,0]})),t.push(Object.assign(Object.assign({},n),{plane:"yz",showLabel:!1,showTitle:!1,origin:[n.bbox.x+n.bbox.width,n.bbox.y,0],eulerAngles:[0,-90,0]})),t.push(Object.assign(Object.assign({},r),{plane:"xz",actualPosition:"left",showLabel:!1,showTitle:!1,eulerAngles:[90,-90,0]})))}function Ctt(t,e,n,r){var i,o;const{width:a,height:s,depth:c,x:l=0,y:u=0,z:f=0,inset:d=(i=n.inset)!==null&&i!==void 0?i:0,insetLeft:h=d,insetTop:p=d,insetBottom:v=d,insetRight:y=d,margin:m=(o=n.margin)!==null&&o!==void 0?o:0,marginLeft:b=m,marginBottom:O=m,marginTop:E=m,marginRight:w=m,padding:_=n.padding,paddingBottom:S=_,paddingLeft:M=_,paddingRight:T=_,paddingTop:A=_}=Ntt(t,e,n,r),C=1/4,N=(Bt,Rt,$t,de,ye)=>{const{marks:Se}=e;if(Se.length===0)return[de,ye];if(Bt-de-ye-Bt*C>0)return[de,ye];const De=Bt*(1-C);return[Rt==="auto"?De*de/(de+ye):de,$t==="auto"?De*ye/(de+ye):ye]},k=Bt=>Bt==="auto"?20:Bt!=null?Bt:20,R=k(A),I=k(S),D=Z3(t,s-R-I,[R+E,I+O],["left","right"],e,n,r),{paddingLeft:B,paddingRight:F}=D,G=a-b-w,[X,q]=N(G,M,T,B,F),J=G-X-q,et=Z3(t,J,[X+b,q+w],["bottom","top"],e,n,r),{paddingTop:dt,paddingBottom:_t}=et,Dt=s-O-E,[pt,vt]=N(Dt,S,A,_t,dt),Qt=Dt-pt-vt;return{width:a,height:s,depth:c,insetLeft:h,insetTop:p,insetBottom:v,insetRight:y,innerWidth:J,innerHeight:Qt,paddingLeft:X,paddingRight:q,paddingTop:vt,paddingBottom:pt,marginLeft:b,marginBottom:O,marginTop:E,marginRight:w,x:l,y:u,z:f}}function ktt(t){const{height:e,width:n,padding:r=0,paddingLeft:i=r,paddingRight:o=r,paddingTop:a=r,paddingBottom:s=r,margin:c=16,marginLeft:l=c,marginRight:u=c,marginTop:f=c,marginBottom:d=c,inset:h=0,insetLeft:p=h,insetRight:v=h,insetTop:y=h,insetBottom:m=h}=t,b=w=>w==="auto"?20:w,O=n-b(i)-b(o)-l-u-p-v,E=e-b(a)-b(s)-f-d-y-m;return{width:O,height:E}}function Ntt(t,e,n,r){const{coordinates:i}=e;if(!ld(i)&&!ag(i))return e;const o=t.filter(m=>typeof m.type=="string"&&m.type.startsWith("axis"));if(o.length===0)return e;const a=o.map(m=>{const b=m.type==="axisArc"?"arc":"linear";return q3(m,b,n)}),s=Qn(a,m=>{var b;return(b=m.labelSpacing)!==null&&b!==void 0?b:0}),c=o.flatMap((m,b)=>{const O=a[b],E=Gx(m,r);return zx(O,E)}).filter(mr),l=Qn(c,m=>m.height)+s,u=o.flatMap((m,b)=>{const O=a[b];return Wx(O)}).filter(m=>m!==null),f=u.length===0?0:Qn(u,m=>m.height),{inset:d=l,insetLeft:h=d,insetBottom:p=d,insetTop:v=d+f,insetRight:y=d}=e;return Object.assign(Object.assign({},e),{insetLeft:h,insetBottom:p,insetTop:v,insetRight:y})}function Z3(t,e,n,r,i,o,a){const s=Nr(t,p=>p.position),{padding:c=o.padding,paddingLeft:l=c,paddingRight:u=c,paddingBottom:f=c,paddingTop:d=c}=i,h={paddingBottom:f,paddingLeft:l,paddingTop:d,paddingRight:u};for(const p of r){const v=`padding${tS(xI(p))}`,y=s.get(p)||[],m=h[v],b=T=>{T.size===void 0&&(T.size=T.defaultSize)},O=T=>{T.type==="group"?(T.children.forEach(b),T.size=Qn(T.children,A=>A.size)):T.size=T.defaultSize},E=T=>{T.size||(m!=="auto"?O(T):($3(T,e,n,p,o,a),b(T)))},w=T=>{T.type.startsWith("axis")&&T.labelAutoHide===void 0&&(T.labelAutoHide=!0)},_=p==="bottom"||p==="top",S=ls(y,T=>T.order),M=y.filter(T=>T.type.startsWith("axis")&&T.order==S);if(M.length&&(M[0].crossPadding=0),typeof m=="number")y.forEach(b),y.forEach(w);else if(y.length===0)h[v]=0;else{const T=_?e+n[0]+n[1]:e,A=X3(y,T);A.forEach(E);const C=A.reduce((N,{size:k,crossPadding:R=12})=>N+k+R,0);h[v]=C}}return h}function Rtt(t,e,n){const r=Nr(t,_=>`${_.plane||"xy"}-${_.position}`),{paddingLeft:i,paddingRight:o,paddingTop:a,paddingBottom:s,marginLeft:c,marginTop:l,marginBottom:u,marginRight:f,innerHeight:d,innerWidth:h,insetBottom:p,insetLeft:v,insetRight:y,insetTop:m,height:b,width:O,depth:E}=n,w={xy:sM({width:O,height:b,paddingLeft:i,paddingRight:o,paddingTop:a,paddingBottom:s,marginLeft:c,marginTop:l,marginBottom:u,marginRight:f,innerHeight:d,innerWidth:h,insetBottom:p,insetLeft:v,insetRight:y,insetTop:m}),yz:sM({width:E,height:b,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,marginLeft:0,marginTop:0,marginBottom:0,marginRight:0,innerWidth:E,innerHeight:b,insetBottom:0,insetLeft:0,insetRight:0,insetTop:0}),xz:sM({width:O,height:E,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,marginLeft:0,marginTop:0,marginBottom:0,marginRight:0,innerWidth:O,innerHeight:E,insetBottom:0,insetLeft:0,insetRight:0,insetTop:0})};for(const[_,S]of r.entries()){const[M,T]=_.split("-"),A=w[M][T],[C,N]=BR(S,k=>typeof k.type!="string"?!1:!!(T==="center"||k.type.startsWith("axis")&&["inner","outer"].includes(T)));C.length&&Ltt(C,e,A,T),N.length&&Ytt(S,e,A)}}function sM({width:t,height:e,paddingLeft:n,paddingRight:r,paddingTop:i,paddingBottom:o,marginLeft:a,marginTop:s,marginBottom:c,marginRight:l,innerHeight:u,innerWidth:f,insetBottom:d,insetLeft:h,insetRight:p,insetTop:v}){const y=n+a,m=i+s,b=r+l,O=o+c,E=t-a-l,w=[y+h,m+v,f-h-p,u-v-d,"center",null,null];return{top:[y,0,f,m,"vertical",!0,li,a,E],right:[t-b,m,b,u,"horizontal",!1,li],bottom:[y,e-O,f,O,"vertical",!1,li,a,E],left:[0,m,y,u,"horizontal",!0,li],"top-left":[y,0,f,m,"vertical",!0,li],"top-right":[y,0,f,m,"vertical",!0,li],"bottom-left":[y,e-O,f,O,"vertical",!1,li],"bottom-right":[y,e-O,f,O,"vertical",!1,li],center:w,inner:w,outer:w}}function Ltt(t,e,n,r){const[i,o]=BR(t,a=>!!(typeof a.type=="string"&&a.type.startsWith("axis")));Itt(i,e,n,r),Htt(o,e,n)}function Itt(t,e,n,r){r==="center"?VX(e)?Wtt(t,e,n,r):ar(e)?Ftt(t,e,n):L0(e)&&jtt(t,e,n,t[0].orientation):r==="inner"?Dtt(t,e,n):r==="outer"&&Btt(t,e,n)}function Dtt(t,e,n){const[r,i,,o]=n,[a,s]=e.getCenter(),[c]=nx(e),l=o/2,u=c*l,f=a-u,d=s-u;for(let h=0;h<t.length;h++){const p=t[h];p.bbox={x:r+f,y:i+d,width:u*2,height:u*2}}}function Btt(t,e,n){const[r,i,o,a]=n;for(const s of t)s.bbox={x:r,y:i,width:o,height:a}}function Ftt(t,e,n){const[r,i,o,a]=n;for(const s of t)s.bbox={x:r,y:i,width:o,height:a}}function jtt(t,e,n,r){r==="horizontal"?ztt(t,e,n):r==="vertical"&&Gtt(t,e,n)}function Gtt(t,e,n){const[r,i,,o]=n,a=new Array(t.length).fill(0),c=e.map(a).filter((l,u)=>u%2===0).map(l=>l+r);for(let l=0;l<t.length;l++){const u=t[l],f=c[l],d=c[l+1]-f;u.bbox={x:f,y:i,width:d,height:o}}}function ztt(t,e,n){const[r,i,o]=n,a=new Array(t.length).fill(0),c=e.map(a).filter((l,u)=>u%2===1).map(l=>l+i);for(let l=0;l<t.length;l++){const u=t[l],f=c[l],d=c[l+1]-f;u.bbox={x:r,y:f,width:o,height:d}}}function Wtt(t,e,n,r){const[i,o,a,s]=n;for(const c of t)c.bbox={x:i,y:o,width:a,height:s},c.radar={index:t.indexOf(c),count:t.length}}function Ytt(t,e,n){const[r,i,o,a,s,c,l,u,f]=n,[d,h,p,v,y,m,b,O]=s==="vertical"?["y",i,"x",r,"height",a,"width",o]:["x",r,"y",i,"width",o,"height",a];t.sort((T,A)=>l==null?void 0:l(T.order,A.order));const E=T=>T==="title"||T==="group"||T.startsWith("legend"),w=(T,A,C)=>C===void 0?A:E(T)?C:A,_=(T,A,C)=>C===void 0?A:E(T)?C:A,S=c?h+m:h;for(let T=0,A=S;T<t.length;T++){const C=t[T],{crossPadding:N=0,type:k}=C,{size:R}=C;C.bbox={[d]:c?A-R-N:A+N,[p]:_(k,v,u),[y]:R,[b]:w(k,O,f)},A+=(R+N)*(c?-1:1)}const M=t.filter(T=>T.type==="group");for(const T of M){const{bbox:A,children:C}=T,N=A[b],k=N/C.length,R=C.reduce((G,X)=>{var q;const J=(q=X.layout)===null||q===void 0?void 0:q.justifyContent;return J||G},"flex-start"),I=C.map((G,X)=>{const{length:q=k,padding:J=0}=G;return q+(X===C.length-1?0:J)}),D=Cs(I),B=N-D,F=R==="flex-start"?0:R==="center"?B/2:B;for(let G=0,X=A[p]+F;G<C.length;G++){const q=C[G],{padding:J=0}=q,et=G===C.length-1?0:J;q.bbox={[y]:A[y],[d]:A[d],[p]:X,[b]:I[G]-et},bt(q,{layout:{justifyContent:R}}),X+=I[G]}}}function Htt(t,e,n){if(t.length===0)return;const[r,i,o,a]=n,[s]=nx(e),c=a/2*s/Math.sqrt(2),l=r+o/2,u=i+a/2;for(let f=0;f<t.length;f++){const d=t[f];d.bbox={x:l-c,y:u-c,width:c*2,height:c*2}}}function el(t,e,n={},r=!1){if(Fl(t)||Array.isArray(t)&&r)return t;const i=Xt(t,e);return bt(n,i)}function Hx(t,e={}){return Fl(t)||Array.isArray(t)||!J3(t)?t:bt(e,t)}function J3(t){if(Object.keys(t).length===0)return!0;const{title:e,items:n}=t;return e!==void 0||n!==void 0}function nl(t,e){return typeof t=="object"?Xt(t,e):t}var Utt=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(u){try{l(r.next(u))}catch(f){a(f)}}function c(u){try{l(r.throw(u))}catch(f){a(f)}}function l(u){u.done?o(u.value):i(u.value).then(s,c)}l((r=r.apply(t,e||[])).next())})},vp=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Vtt(t,e,n){const{encode:r={},scale:i={},transform:o=[]}=e,a=vp(e,["encode","scale","transform"]);return[t,Object.assign(Object.assign({},a),{encode:r,scale:i,transform:o})]}function Q3(t,e,n){return Utt(this,void 0,void 0,function*(){const{library:r}=n,{data:i}=e,[o]=Dr("data",r),a=oet(i),{transform:s=[]}=a,u=[vp(a,["transform"]),...s].map(h=>o(h,n)),f=yield SX(u)(i),d=i&&!Array.isArray(i)&&!Array.isArray(f)?{value:f}:f;return[Array.isArray(f)?Zf(f):[],Object.assign(Object.assign({},e),{data:d})]})}function Xtt(t,e,n){const{encode:r}=e;if(!r)return[t,e];const i={};for(const[o,a]of Object.entries(r))if(Array.isArray(a))for(let s=0;s<a.length;s++){const c=`${o}${s===0?"":s}`;i[c]=a[s]}else i[o]=a;return[t,Object.assign(Object.assign({},e),{encode:i})]}function $tt(t,e,n){const{encode:r,data:i}=e;if(!r)return[t,e];const o=Xc(r,a=>net(a)?a:{type:ret(i,a),value:a});return[t,Object.assign(Object.assign({},e),{encode:o})]}function qtt(t,e,n){const{encode:r}=e;if(!r)return[t,e];const i=Xc(r,(o,a)=>{const{type:s}=o;return s!=="constant"||ett(a)?o:Object.assign(Object.assign({},o),{constant:!0})});return[t,Object.assign(Object.assign({},e),{encode:i})]}function Ktt(t,e,n){const{encode:r,data:i}=e;if(!r)return[t,e];const{library:o}=n,a=cet(o),s=Xc(r,c=>a(i,c));return[t,Object.assign(Object.assign({},e),{encode:s})]}function Ztt(t,e,n){const{tooltip:r={}}=e;return Fl(r)?[t,e]:Array.isArray(r)?[t,Object.assign(Object.assign({},e),{tooltip:{items:r}})]:Jh(r)&&J3(r)?[t,Object.assign(Object.assign({},e),{tooltip:r})]:[t,Object.assign(Object.assign({},e),{tooltip:{items:[r]}})]}function Jtt(t,e,n){const{data:r,encode:i,tooltip:o={}}=e;if(Fl(o))return[t,e];const a=f=>{if(!f)return f;if(typeof f=="string")return t.map(d=>({name:f,value:r[d][f]}));if(Jh(f)){const{field:d,channel:h,color:p,name:v=d,valueFormatter:y=_=>_}=f,m=typeof y=="string"?ju(y):y,b=h&&i[h],O=b&&i[h].field,E=v||O||h,w=[];for(const _ of t){const S=d?r[_][d]:b?i[h].value[_]:null;w[_]={name:E,color:p,value:m(S)}}return w}if(typeof f=="function"){const d=[];for(const h of t){const p=f(r[h],h,r,i);Jh(p)?d[h]=p:d[h]={value:p}}return d}return f},{title:s,items:c=[]}=o,l=vp(o,["title","items"]),u=Object.assign({title:a(s),items:Array.isArray(c)?c.map(a):[]},l);return[t,Object.assign(Object.assign({},e),{tooltip:u})]}function Qtt(t,e,n){const{encode:r}=e,i=vp(e,["encode"]);if(!r)return[t,e];const o=Object.entries(r),a=o.filter(([,c])=>{const{value:l}=c;return Array.isArray(l[0])}).flatMap(([c,l])=>{const u=[[c,new Array(t.length).fill(void 0)]],{value:f}=l,d=vp(l,["value"]);for(let h=0;h<f.length;h++){const p=f[h];if(Array.isArray(p))for(let v=0;v<p.length;v++){const y=u[v]||[`${c}${v}`,new Array(t).fill(void 0)];y[1][h]=p[v],u[v]=y}}return u.map(([h,p])=>[h,Object.assign({type:"column",value:p},d)])}),s=Object.fromEntries([...o,...a]);return[t,Object.assign(Object.assign({},i),{encode:s})]}function tet(t,e,n){const{axis:r={},legend:i={},slider:o={},scrollbar:a={}}=e,s=(l,u)=>{if(typeof l=="boolean")return l?{}:null;const f=l[u];return f===void 0||f?f:null},c=typeof r=="object"?Array.from(new Set(["x","y","z",...Object.keys(r)])):["x","y","z"];return bt(e,{scale:Object.assign(Object.assign({},Object.fromEntries(c.map(l=>{const u=s(a,l);return[l,Object.assign({guide:s(r,l),slider:s(o,l),scrollbar:u},u&&{ratio:u.ratio===void 0?.5:u.ratio})]}))),{color:{guide:s(i,"color")},size:{guide:s(i,"size")},shape:{guide:s(i,"shape")},opacity:{guide:s(i,"opacity")}})}),[t,e]}function eet(t,e,n){const{animate:r}=e;return r||r===void 0?[t,e]:(bt(e,{animate:{enter:{type:null},exit:{type:null},update:{type:null}}}),[t,e])}function net(t){if(typeof t!="object"||t instanceof Date||t===null)return!1;const{type:e}=t;return mr(e)}function ret(t,e){return typeof e=="function"?"transform":typeof e=="string"&&iet(t,e)?"field":"constant"}function iet(t,e){return Array.isArray(t)?t.some(n=>n[e]!==void 0):!1}function oet(t){if(Je(t))return{type:"inline",value:t};if(!t)return{type:"inline",value:null};if(Array.isArray(t))return{type:"inline",value:t};const{type:e="inline"}=t,n=vp(t,["type"]);return Object.assign(Object.assign({},n),{type:e})}var t5=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(u){try{l(r.next(u))}catch(f){a(f)}}function c(u){try{l(r.throw(u))}catch(f){a(f)}}function l(u){u.done?o(u.value):i(u.value).then(s,c)}l((r=r.apply(t,e||[])).next())})},aet=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function set(t,e,n){return t5(this,void 0,void 0,function*(){const[r,i]=yield uet(t,e,n),{encode:o,scale:a,data:s,tooltip:c}=i;if(Array.isArray(s)===!1)return null;const{channels:l}=e,u=Z1(Object.entries(o).filter(([,d])=>mr(d)),d=>d.map(([h,p])=>Object.assign({name:h},p)),([d])=>{var h;const p=(h=/([^\d]+)\d*$/.exec(d))===null||h===void 0?void 0:h[1],v=l.find(y=>y.name===p);return v!=null&&v.independent?d:p}),f=l.filter(d=>{const{name:h,required:p}=d;if(u.find(([v])=>v===h))return!0;if(p)throw new Error(`Missing encoding for channel: ${h}.`);return!1}).flatMap(d=>{const{name:h,scale:p,scaleKey:v,range:y,quantitative:m,ordinal:b}=d;return u.filter(([E])=>E.startsWith(h)).map(([E,w],_)=>{const S=w.some(D=>D.visual),M=w.some(D=>D.constant),T=a[E]||{},{independent:A=!1,key:C=v||E,type:N=M?"constant":S?"identity":p}=T,k=aet(T,["independent","key","type"]),R=N==="constant",I=R?void 0:y;return{name:E,values:w,scaleKey:A||R?Symbol("independent"):C,scale:Object.assign(Object.assign({type:N,range:I},k),{quantitative:m,ordinal:b})}})});return[i,Object.assign(Object.assign({},e),{index:r,channels:f,tooltip:c})]})}function cet(t){const[e]=Dr("encode",t);return(n,r)=>r===void 0||n===void 0?null:Object.assign(Object.assign({},r),{type:"column",value:e(r)(n),field:fet(r)})}function uet(t,e,n){return t5(this,void 0,void 0,function*(){const{library:r}=n,[i]=Dr("transform",r),{preInference:o=[],postInference:a=[]}=e,{transform:s=[]}=t,c=[Vtt,Q3,Xtt,$tt,qtt,Ktt,Qtt,eet,tet,Ztt,...o.map(i),...s.map(i),...a.map(i),Jtt];let l=[],u=t;for(const f of c)[l,u]=yield f(l,u,n);return[l,u]})}function fet(t){const{type:e,value:n}=t;return e==="field"&&typeof n=="string"?n:null}var Ul=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(u){try{l(r.next(u))}catch(f){a(f)}}function c(u){try{l(r.throw(u))}catch(f){a(f)}}function l(u){u.done?o(u.value):i(u.value).then(s,c)}l((r=r.apply(t,e||[])).next())})},qu=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function cM(t,e,n){var r;return Ul(this,void 0,void 0,function*(){const{library:i}=n,[o]=Dr("composition",i),[a]=Dr("interaction",i),s=new Set(Object.keys(i).map(k=>{var R;return(R=/mark\.(.*)/.exec(k))===null||R===void 0?void 0:R[1]}).filter(mr)),c=new Set(Object.keys(i).map(k=>{var R;return(R=/component\.(.*)/.exec(k))===null||R===void 0?void 0:R[1]}).filter(mr)),l=k=>{const{type:R}=k;if(typeof R=="function"){const{props:I={}}=R,{composite:D=!0}=I;if(D)return"mark"}return typeof R!="string"?R:s.has(R)||c.has(R)?"mark":R},u=k=>l(k)==="mark",f=k=>l(k)==="standardView",d=k=>{const{type:R}=k;return typeof R!="string"?!1:!!c.has(R)},h=k=>{if(f(k))return[k];const R=l(k);return o({type:R,static:d(k)})(k)},p=[],v=new Map,y=new Map,m=[t],b=[];for(;m.length;){const k=m.shift();if(f(k)){const R=y.get(k),[I,D]=R?i5(R,k,i):yield n5(k,n);v.set(I,k),p.push(I);const B=D.flatMap(h).map(F=>QI(F,i));if(m.push(...B),B.every(f)){const F=yield Promise.all(B.map(G=>r5(G,n)));RQ(F);for(let G=0;G<B.length;G++){const X=B[G],q=F[G];y.set(X,q)}}}else{const R=u(k)?k:yield c5(k,n),I=h(R);Array.isArray(I)?m.push(...I):typeof I=="function"&&b.push(I())}}n.emitter.emit(Jn.BEFORE_PAINT);const O=new Map,E=new Map,w=[];e.selectAll(rl(va)).data(p,k=>k.key).join(k=>k.append("g").attr("className",va).attr("id",R=>R.key).call(e5).each(function(R,I,D){uM(R,Ie(D),w,n),O.set(R,D)}),k=>k.call(e5).each(function(R,I,D){uM(R,Ie(D),w,n),E.set(R,D)}),k=>k.each(function(R,I,D){const B=D.nameInteraction.values();for(const F of B)F.destroy()}).remove());const _=(k,R,I)=>Array.from(k.entries()).map(([D,B])=>{const F=I||new Map,G=(J,et=dt=>dt)=>F.set(J,et),X=v.get(D),q=het(Ie(B),X,n);return{view:D,container:B,options:X,setState:G,update:(J,et)=>Ul(this,void 0,void 0,function*(){const _t=QE(Array.from(F.values()))(X);return yield q(_t,J,()=>{ri(et)&&R(k,et,F)})})}}),S=(k=E,R,I)=>{var D;const B=_(k,S,I);for(const F of B){const{options:G,container:X}=F,q=X.nameInteraction;let J=Ux(G);R&&(J=J.filter(et=>R.includes(et[0])));for(const et of J){const[dt,_t]=et,Dt=q.get(dt);if(Dt&&((D=Dt.destroy)===null||D===void 0||D.call(Dt)),_t){const vt=lM(F.view,dt,_t,a)(F,B,n.emitter);q.set(dt,{destroy:vt})}}}},M=_(O,S);for(const k of M){const{options:R}=k,I=new Map;k.container.nameInteraction=I;for(const D of Ux(R)){const[B,F]=D;if(F){const X=lM(k.view,B,F,a)(k,M,n.emitter);I.set(B,{destroy:X})}}}S();const{width:T,height:A}=t,C=[];for(const k of b){const R=new Promise(I=>Ul(this,void 0,void 0,function*(){for(const D of k){const B=Object.assign({width:T,height:A},D);yield cM(B,e,n)}I()}));C.push(R)}n.views=p,(r=n.animations)===null||r===void 0||r.forEach(k=>k==null?void 0:k.cancel()),n.animations=w,n.emitter.emit(Jn.AFTER_PAINT);const N=w.filter(mr).map(Aet).map(k=>k.finished);return Promise.all([...N,...C])})}function e5(t){t.style("transform",e=>`translate(${e.layout.x}, ${e.layout.y})`)}function det(t){const[,e]=Dr("interaction",t);return n=>{const[r,i]=n;try{return[r,e(r)]}catch(o){return[r,i.type]}}}function het(t,e,n){const{library:r}=n,i=det(r),o=c=>c[1]&&c[1].props&&c[1].props.reapplyWhenUpdate,s=Ux(e).map(i).filter(o).map(c=>c[0]);return(c,l,u)=>Ul(this,void 0,void 0,function*(){const f=[],[d,h]=yield n5(c,n);uM(d,t,f,n);for(const p of s.filter(v=>v!==l))pet(p,t,c,d,n);for(const p of h)cM(p,t,n);return u(),{options:c,view:d}})}function pet(t,e,n,r,i){var o;const{library:a}=i,[s]=Dr("interaction",a),l=e.node().nameInteraction,u=Ux(n).find(([v])=>v===t),f=l.get(t);if(!f||((o=f.destroy)===null||o===void 0||o.call(f),!u[1]))return;const d=lM(r,t,u[1],s),h={options:n,view:r,container:e.node(),update:v=>Promise.resolve(v)},p=d(h,[],i.emitter);l.set(t,{destroy:p})}function n5(t,e){return Ul(this,void 0,void 0,function*(){const{library:n}=e,r=yield get(t,e),i=vet(r);t.interaction=i.interaction,t.coordinate=i.coordinate,t.marks=[...i.marks,...i.components];const o=QI(i,n),a=yield r5(o,e);return i5(a,o,n)})}function vet(t){const{coordinate:e={},interaction:n={},style:r={},marks:i}=t,o=qu(t,["coordinate","interaction","style","marks"]),a=i.map(d=>d.coordinate||{}),s=i.map(d=>d.interaction||{}),c=i.map(d=>d.viewStyle||{}),l=[...a,e].reduceRight((d,h)=>bt(d,h),{}),u=[n,...s].reduce((d,h)=>bt(d,h),{}),f=[...c,r].reduce((d,h)=>bt(d,h),{});return Object.assign(Object.assign({},o),{marks:i,coordinate:l,interaction:u,style:f})}function get(t,e){return Ul(this,void 0,void 0,function*(){const{library:n}=e,[r,i]=Dr("mark",n),o=new Set(Object.keys(n).map(h=>{var p;return(p=/component\.(.*)/.exec(h))===null||p===void 0?void 0:p[1]}).filter(mr)),{marks:a}=t,s=[],c=[],l=[...a],{width:u,height:f}=ktt(t),d={options:t,width:u,height:f};for(;l.length;){const[h]=l.splice(0,1),p=yield c5(h,e),{type:v=Zh("G2Mark type is required."),key:y}=p;if(o.has(v))c.push(p);else{const{props:m={}}=i(v),{composite:b=!0}=m;if(!b)s.push(p);else{const{data:O}=p,E=Object.assign(Object.assign({},p),{data:O&&(Array.isArray(O)?O:O.value)}),w=yield r(E,d),_=Array.isArray(w)?w:[w];l.unshift(..._.map((S,M)=>Object.assign(Object.assign({},S),{key:`${y}-${M}`})))}}}return Object.assign(Object.assign({},t),{marks:s,components:c})})}function r5(t,e){return Ul(this,void 0,void 0,function*(){const{library:n}=e,[r]=Dr("theme",n),[,i]=Dr("mark",n),{theme:o,marks:a,coordinates:s=[]}=t,c=r(s5(o)),l=new Map;for(const f of a){const{type:d}=f,{props:h={}}=i(d),p=yield set(f,h,e);if(p){const[v,y]=p;l.set(v,y)}}const u=Nr(Array.from(l.values()).flatMap(f=>f.channels),({scaleKey:f})=>f);for(const f of u.values()){const d=f.reduce((E,{scale:w})=>bt(E,w),{}),{scaleKey:h}=f[0],{values:p}=f[0],v=Array.from(new Set(p.map(E=>E.field).filter(mr))),y=bt({guide:{title:v.length===0?void 0:v},field:v[0]},d),{name:m}=f[0],b=f.flatMap(({values:E})=>E.map(w=>w.value)),O=Object.assign(Object.assign({},TQ(m,b,y,s,c,n)),{uid:Symbol("scale"),key:h});f.forEach(E=>E.scale=O)}return l})}function lM(t,e,n,r){const i=t.theme,o=typeof e=="string"?i[e]||{}:{};return r(bt(o,Object.assign({type:e},n)))}function i5(t,e,n){var r;const[i]=Dr("mark",n),[o]=Dr("theme",n),[a]=Dr("labelTransform",n),{key:s,frame:c=!1,theme:l,clip:u,style:f={},labelTransform:d=[]}=e,h=o(s5(l)),p=Array.from(t.values()),v=kQ(p,e),y=ctt(stt(Ret(Array.from(v),p,t),e,n)),m=Ctt(y,e,h,n),b=vJ(m,e,n),O=c?bt({mainLineWidth:1,mainStroke:"#000"},f):f;Rtt(X3(y),b,m),Att(y);const E=new Map(Array.from(t.values()).flatMap(M=>{const{channels:T}=M;return T.map(({scale:A})=>[A.uid,B3(A,n)])}));CQ(t,E);const w={};for(const M of y){const{scales:T=[]}=M,A=[];for(const C of T){const{name:N,uid:k}=C,R=(r=E.get(k))!==null&&r!==void 0?r:B3(C,n);A.push(R),N==="y"&&R.update(Object.assign(Object.assign({},R.getOptions()),{xScale:w.x})),D3(w,{[N]:R})}M.scaleInstances=A}const _=[];for(const[M,T]of t.entries()){const{children:A,dataDomain:C,modifier:N,key:k}=M,{index:R,channels:I,tooltip:D}=T,B=Object.fromEntries(I.map(({name:Bt,scale:Rt})=>[Bt,Rt])),F=Xc(B,({uid:Bt})=>E.get(Bt));D3(w,F);const G=AQ(I,F),X=i(M),[q,J,et]=xet(X(R,F,G,b)),dt=C||q.length,_t=N?N(J,dt,m):[],Dt=Bt=>{var Rt,$t;return($t=(Rt=D.title)===null||Rt===void 0?void 0:Rt[Bt])===null||$t===void 0?void 0:$t.value},pt=Bt=>D.items.map(Rt=>Rt[Bt]),vt=q.map((Bt,Rt)=>{const $t=Object.assign({points:J[Rt],transform:_t[Rt],index:Bt,markKey:k,viewKey:s},D&&{title:Dt(Bt),items:pt(Bt)});for(const[de,ye]of Object.entries(G))$t[de]=ye[Bt],et&&($t[`series${Fu(de)}`]=et[Rt].map(Se=>ye[Se]));return et&&($t.seriesIndex=et[Rt]),et&&D&&($t.seriesItems=et[Rt].map(de=>pt(de)),$t.seriesTitle=et[Rt].map(de=>Dt(de))),$t});T.data=vt,T.index=q;const Qt=A==null?void 0:A(vt,F,m);_.push(...Qt||[])}return[{layout:m,theme:h,coordinate:b,markState:t,key:s,clip:u,scale:w,style:O,components:y,labelTransform:QE(d.map(a))},_]}function uM(t,e,n,r){return Ul(this,void 0,void 0,function*(){const{library:i}=r,{components:o,theme:a,layout:s,markState:c,coordinate:l,key:u,style:f,clip:d,scale:h}=t,{x:p,y:v,width:y,height:m}=s,b=qu(s,["x","y","width","height"]),O=["view","plot","main","content"],E=O.map((F,G)=>G),w=["a","margin","padding","inset"],_=O.map(F=>PR(Object.assign({},a.view,f),F)),S=w.map(F=>Xt(b,F)),M=F=>F.style("x",G=>k[G].x).style("y",G=>k[G].y).style("width",G=>k[G].width).style("height",G=>k[G].height).each(function(G,X,q){Let(Ie(q),_[G])});let T=0,A=0,C=y,N=m;const k=E.map(F=>{const G=S[F],{left:X=0,top:q=0,bottom:J=0,right:et=0}=G;return T+=X,A+=q,C-=X+et,N-=q+J,{x:T,y:A,width:C,height:N}});e.selectAll(rl(Qo)).data(E.filter(F=>mr(_[F])),F=>O[F]).join(F=>F.append("rect").attr("className",Qo).style("zIndex",-2).call(M),F=>F.call(M),F=>F.remove());const R=Oet(c),I=R?{duration:R[1]}:!1;for(const[,F]of K1(o,G=>`${G.type}-${G.position}`))F.forEach((G,X)=>G.index=X);const D=e.selectAll(rl(tu)).data(o,F=>`${F.type}-${F.position}-${F.index}`).join(F=>F.append("g").style("zIndex",({zIndex:G})=>G||-1).attr("className",tu).append(G=>V3(bt({animate:I,scale:h},G),l,a,i,c)),F=>F.transition(function(G,X,q){const{preserve:J=!1}=G;if(J)return;const et=V3(bt({animate:I,scale:h},G),l,a,i,c),{attributes:dt}=et,[_t]=q.childNodes;return _t.update(dt,!1)})).transitions();n.push(...D.flat().filter(mr));const B=e.selectAll(rl(Ha)).data([s],()=>u).join(F=>F.append("rect").style("zIndex",0).style("fill","transparent").attr("className",Ha).call(l5).call(f5,Array.from(c.keys())).call(d5,d),F=>F.call(f5,Array.from(c.keys())).call(G=>R?Net(G,R):l5(G)).call(d5,d)).transitions();n.push(...B.flat());for(const[F,G]of c.entries()){const{data:X}=G,{key:q,class:J,type:et}=F,dt=e.select(`#${q}`),_t=Pet(F,G,t,r),Dt=Tet(F,G,t,i),pt=Cet(F,G,t,i),vt=ket(F,G,t,i),Qt=Eet(e,dt,J,"element"),Bt=dt.selectAll(rl(Ni)).selectFacetAll(Qt).data(X,Rt=>Rt.key,Rt=>Rt.groupKey).join(Rt=>Rt.append(_t).attr("className",Ni).attr("markType",et).transition(function($t,de,ye){return Dt($t,[ye])}),Rt=>Rt.call($t=>{const de=$t.parent(),ye=MX(Se=>{const[qe,Me]=Se.getBounds().min;return[qe,Me]});$t.transition(function(Se,qe,Me){Met(Me,de,ye);const De=_t(Se,qe),An=pt(Se,[Me],[De]);return An!==null||(Me.nodeName===De.nodeName&&De.nodeName!=="g"?eS(Me,De):(Me.parentNode.replaceChild(De,Me),De.className=Ni,De.markType=et,De.__data__=Me.__data__)),An}).attr("markType",et).attr("className",Ni)}),Rt=>Rt.each(function($t,de,ye){ye.__removed__=!0}).transition(function($t,de,ye){return vt($t,[ye])}).remove(),Rt=>Rt.append(_t).attr("className",Ni).attr("markType",et).transition(function($t,de,ye){const{__fromElements__:Se}=ye,qe=pt($t,Se,[ye]);return new Mi(Se,null,ye.parentNode).transition(qe).remove(),qe}),Rt=>Rt.transition(function($t,de,ye){const qe=new Mi([],ye.__toData__,ye.parentNode).append(_t).attr("className",Ni).attr("markType",et).nodes();return pt($t,[ye],qe)}).remove()).transitions();n.push(...Bt.flat())}yet(t,e,n,i,r)})}function yet(t,e,n,r,i){const[o]=Dr("labelTransform",r),{markState:a,labelTransform:s}=t,c=e.select(rl(kn)).node(),l=new Map,u=new Map,f=Array.from(a.entries()).flatMap(([y,m])=>{const{labels:b=[],key:O}=y,E=wet(y,m,t,r,i),w=e.select(`#${O}`).selectAll(rl(Ni)).nodes().filter(_=>!_.__removed__);return b.flatMap((_,S)=>{const{transform:M=[]}=_,T=qu(_,["transform"]);return w.flatMap(A=>{const C=met(T,S,A);return C.forEach(N=>{l.set(N,E),u.set(N,_)}),C})})}),d=Ie(c).selectAll(rl(Ys)).data(f,y=>y.key).join(y=>y.append(m=>l.get(m)(m)).attr("className",Ys),y=>y.each(function(m,b,O){const w=l.get(m)(m);eS(O,w)}),y=>y.remove()).nodes(),h=Nr(d,y=>u.get(y.__data__)),{coordinate:p}=t,v={canvas:i.canvas,coordinate:p};for(const[y,m]of h){const{transform:b=[]}=y;QE(b.map(o))(m,v)}s&&s(d,v)}function met(t,e,n){const{seriesIndex:r,seriesKey:i,points:o,key:a,index:s}=n.__data__,c=_et(n);if(!r)return[Object.assign(Object.assign({},t),{key:`${a}-${e}`,bounds:c,index:s,points:o,dependentElement:n})];const l=bet(t),u=r.map((f,d)=>Object.assign(Object.assign({},t),{key:`${i[d]}-${e}`,bounds:[o[d]],index:f,points:o,dependentElement:n}));return l?l(u):u}function xet([t,e,n]){if(n)return[t,e,n];const r=[],i=[];for(let o=0;o<t.length;o++){const a=t[o],s=e[o];s.every(([c,l])=>mr(c)&&mr(l))&&(r.push(a),i.push(s))}return[r,i]}function bet(t){const{selector:e}=t;if(!e)return null;if(typeof e=="function")return e;if(e==="first")return n=>[n[0]];if(e==="last")return n=>[n[n.length-1]];throw new Error(`Unknown selector: ${e}`)}function _et(t){const e=t.cloneNode(),n=t.getAnimations();e.style.visibility="hidden",n.forEach(a=>{const s=a.effect.getKeyframes();e.attr(s[s.length-1])}),t.parentNode.appendChild(e);const r=e.getLocalBounds();e.destroy();const{min:i,max:o}=r;return[i,o]}function wet(t,e,n,r,i){const[o]=Dr("shape",r),{data:a,encode:s}=t,{data:c,defaultLabelShape:l}=e,u=c.map(v=>v.points),f=Xc(s,v=>v.value),{theme:d,coordinate:h}=n,p=Object.assign(Object.assign({},i),{document:ZI(i),theme:d,coordinate:h});return v=>{const{index:y,points:m}=v,b=a[y],{formatter:O=B=>`${B}`,transform:E,style:w,render:_}=v,S=qu(v,["formatter","transform","style","render"]),M=Xc(Object.assign(Object.assign({},S),w),B=>o5(B,b,y,a,{channel:f})),{shape:T=l,text:A}=M,C=qu(M,["shape","text"]),N=typeof O=="string"?ju(O):O,k=Object.assign(Object.assign({},C),{text:N(A,b,y,a),datum:b}),R=Object.assign({type:`label.${T}`,render:_},C),I=o(R,p),D=a5(d,"label",T,"label");return I(m,k,D,u)}}function o5(t,e,n,r,i){return typeof t=="function"?t(e,n,r,i):typeof t!="string"?t:Jh(e)&&e[t]!==void 0?e[t]:t}function Oet(t){let e=-1/0,n=1/0;for(const[r,i]of t){const{animate:o={}}=r,{data:a}=i,{enter:s={},update:c={},exit:l={}}=o,{type:u,duration:f=300,delay:d=0}=c,{type:h,duration:p=300,delay:v=0}=s,{type:y,duration:m=300,delay:b=0}=l;for(const O of a){const{updateType:E=u,updateDuration:w=f,updateDelay:_=d,enterType:S=h,enterDuration:M=p,enterDelay:T=v,exitDuration:A=m,exitDelay:C=b,exitType:N=y}=O;(E===void 0||E)&&(e=Math.max(e,w+_),n=Math.min(n,_)),(N===void 0||N)&&(e=Math.max(e,A+C),n=Math.min(n,C)),(S===void 0||S)&&(e=Math.max(e,M+T),n=Math.min(n,T))}}return e===-1/0?null:[n,e-n]}function Eet(t,e,n,r){return t.node().parentElement.findAll(o=>o.style.facet!==void 0&&o.style.facet===n&&o!==e.node()).flatMap(o=>o.getElementsByClassName(r))}function Met(t,e,n){if(!t.__facet__)return;const r=t.parentNode.parentNode,i=e.parentNode,[o,a]=n(r),[s,c]=n(i),l=`translate(${o-s}, ${a-c})`;PX(t,l),e.append(t)}function Pet(t,e,n,r){const{library:i}=r,[o]=Dr("shape",i),{data:a,encode:s}=t,{defaultShape:c,data:l,shape:u}=e,f=Xc(s,b=>b.value),d=l.map(b=>b.points),{theme:h,coordinate:p}=n,{type:v,style:y={}}=t,m=Object.assign(Object.assign({},r),{document:ZI(r),coordinate:p,theme:h});return b=>{const{shape:O=c}=y,{shape:E=O,points:w,seriesIndex:_,index:S}=b,M=qu(b,["shape","points","seriesIndex","index"]),T=Object.assign(Object.assign({},M),{index:S}),A=_?_.map(I=>a[I]):a[S],C=_||S,N=Xc(y,I=>o5(I,A,C,a,{channel:f})),k=u[E]?u[E](N,m):o(Object.assign(Object.assign({},N),{type:u5(t,E)}),m),R=a5(h,v,E,c);return k(w,T,R,d)}}function a5(t,e,n,r){if(typeof e!="string")return;const{color:i}=t,o=t[e]||{},a=o[n]||o[r];return Object.assign({color:i},a)}function fM(t,e,n,r,i){var o,a;const[,s]=Dr("shape",i),[c]=Dr("animation",i),{defaultShape:l,shape:u}=n,{theme:f,coordinate:d}=r,p=`default${Fu(t)}Animation`,{[p]:v}=((o=u[l])===null||o===void 0?void 0:o.props)||s(u5(e,l)).props,{[t]:y={}}=f,m=((a=e.animate)===null||a===void 0?void 0:a[t])||{},b={coordinate:d};return(O,E,w)=>{const{[`${t}Type`]:_,[`${t}Delay`]:S,[`${t}Duration`]:M,[`${t}Easing`]:T}=O,A=Object.assign({type:_||v},m);if(!A.type)return null;const k=c(A,b)(E,w,bt(y,{delay:S,duration:M,easing:T}));return Array.isArray(k)?k:[k]}}function Tet(t,e,n,r){return fM("enter",t,e,n,r)}function Aet(t){return t.finished.then(()=>{t.cancel()}),t}function Cet(t,e,n,r){return fM("update",t,e,n,r)}function ket(t,e,n,r){return fM("exit",t,e,n,r)}function s5(t={}){if(typeof t=="string")return{type:t};const{type:e="light"}=t,n=qu(t,["type"]);return Object.assign(Object.assign({},n),{type:e})}function Ux(t){const e={event:!0,tooltip:!0,sliderFilter:!0,legendFilter:!0,scrollbarFilter:!0},{interaction:n={}}=t;return Object.entries(bt(e,n)).reverse()}function c5(t,e){return Ul(this,void 0,void 0,function*(){const{data:n}=t,r=qu(t,["data"]);if(n==null)return t;const[,{data:i}]=yield Q3([],{data:n},e);return Object.assign({data:i},r)})}function l5(t){t.style("transform",e=>`translate(${e.paddingLeft+e.marginLeft}, ${e.paddingTop+e.marginTop})`).style("width",e=>e.innerWidth).style("height",e=>e.innerHeight)}function Net(t,e){const[n,r]=e;t.transition(function(i,o,a){const{transform:s,width:c,height:l}=a.style,{paddingLeft:u,paddingTop:f,innerWidth:d,innerHeight:h,marginLeft:p,marginTop:v}=i,y=[{transform:s,width:c,height:l},{transform:`translate(${u+p}, ${f+v})`,width:d,height:h}];return a.animate(y,{delay:n,duration:r,fill:"both"})})}function u5(t,e){const{type:n}=t;return typeof e=="string"?`${n}.${e}`:e}function f5(t,e){const n=o=>o.class!==void 0?`${o.class}`:"";t.nodes().length===0||(t.selectAll(rl(Wr)).data(e,o=>o.key).join(o=>o.append("g").attr("className",Wr).attr("id",a=>a.key).style("facet",n).style("fill","transparent").style("zIndex",a=>{var s;return(s=a.zIndex)!==null&&s!==void 0?s:0}),o=>o.style("facet",n).style("fill","transparent").style("zIndex",a=>{var s;return(s=a.zIndex)!==null&&s!==void 0?s:0}),o=>o.remove()),t.select(rl(kn)).node())||t.append("g").attr("className",kn).style("zIndex",0)}function rl(...t){return t.map(e=>`.${e}`).join("")}function d5(t,e){t.node()&&t.style("clipPath",n=>{if(!e)return null;const{paddingTop:r,paddingLeft:i,marginLeft:o,marginTop:a,innerWidth:s,innerHeight:c}=n;return new cn({style:{x:i+o,y:r+a,width:s,height:c}})})}function Ret(t,e,n){var r;for(const[l]of n.entries())if(l.type==="cell")return t.filter(u=>u.name!=="shape");if(e.length!==1||t.some(l=>l.name==="shape"))return t;const{defaultShape:i}=e[0];if(!["point","line","rect","hollow"].includes(i))return t;const a={point:"point",line:"hyphen",rect:"square",hollow:"hollow"},c={field:((r=t.find(l=>l.name==="color"))===null||r===void 0?void 0:r.field)||null,name:"shape",type:"constant",domain:[],range:[a[i]]};return[...t,c]}function Let(t,e){for(const[n,r]of Object.entries(e))t.style(n,r)}function h5(t){const e=bt({},t),n=new Map([[e,null]]),r=new Map([[null,-1]]),i=[e];for(;i.length;){const o=i.shift();if(o.key===void 0){const s=n.get(o),c=r.get(o),l=s===null?"0":`${s.key}-${c}`;o.key=l}const{children:a=[]}=o;if(Array.isArray(a))for(let s=0;s<a.length;s++){const c=bt({},a[s]);a[s]=c,n.set(c,o),r.set(c,s),i.push(c)}}return e}function Iet(t,e){const n=new gR;return n.registerPlugin(new yR),new mC({width:t,height:e,container:document.createElement("div"),renderer:n})}function Det(t,e={},n=()=>{},r=i=>{throw i}){const{width:i=640,height:o=480,depth:a=0}=t,s=h5(t),{canvas:c=Iet(i,o),emitter:l=new hs,library:u}=e;e.canvas=c,e.emitter=l;const{width:f,height:d}=c.getConfig();(f!==i||d!==o)&&c.resize(i,o),l.emit(Jn.BEFORE_RENDER);const h=Ie(c.document.documentElement);return c.ready.then(()=>cM(Object.assign(Object.assign({},s),{width:i,height:o,depth:a}),h,e)).then(()=>{if(a){const[p,v]=c.document.documentElement.getPosition();c.document.documentElement.setPosition(p,v,-a/2)}c.requestAnimationFrame(()=>{l.emit(Jn.AFTER_RENDER),n==null||n()})}).catch(p=>{r==null||r(p)}),Fet(c.getConfig().container)}function Ngt(t,e={},n=()=>{},r=i=>{throw i}){var i;const{width:o=640,height:a=480}=t,s=h5(t),{group:c=new Group,emitter:l=new EventEmitter,library:u}=e;c!=null&&c.parentElement||error("renderToMountedElement can't render chart to unmounted group.");const f=select(c);return e.group=c,e.emitter=l,e.canvas=e.canvas||((i=c==null?void 0:c.ownerDocument)===null||i===void 0?void 0:i.defaultView),l.emit(ChartEvent.BEFORE_RENDER),plot(Object.assign(Object.assign({},s),{width:o,height:a}),f,e).then(()=>{var d;(d=e.canvas)===null||d===void 0||d.requestAnimationFrame(()=>{l.emit(ChartEvent.AFTER_RENDER),n==null||n()})}).catch(d=>{r==null||r(d)}),c}function p5(t,e={},n=!1){const{canvas:r,emitter:i}=e;r&&(Bet(r),n?r.destroy():r.destroyChildren()),i.off()}function Bet(t){const e=t.getRoot().querySelectorAll(`.${va}`);e==null||e.forEach(n=>{const{nameInteraction:r=new Map}=n;(r==null?void 0:r.size)>0&&Array.from(r==null?void 0:r.values()).forEach(i=>{i==null||i.destroy()})})}function Fet(t){return typeof t=="string"?document.getElementById(t):t}const gp=t=>t?parseInt(t):0;function jet(t){const e=getComputedStyle(t),n=t.clientWidth||gp(e.width),r=t.clientHeight||gp(e.height),i=gp(e.paddingLeft)+gp(e.paddingRight),o=gp(e.paddingTop)+gp(e.paddingBottom);return{width:n-i,height:r-o}}function Rgt(t){const{height:e,width:n,padding:r=0,paddingLeft:i=r,paddingRight:o=r,paddingTop:a=r,paddingBottom:s=r,margin:c=0,marginLeft:l=c,marginRight:u=c,marginTop:f=c,marginBottom:d=c,inset:h=0,insetLeft:p=h,insetRight:v=h,insetTop:y=h,insetBottom:m=h}=t,b=w=>w==="auto"?20:w,O=n-b(i)-b(o)-l-u-p-v,E=e-b(a)-b(s)-f-d-y-m;return{width:O,height:E}}function dM(t,e){const n=[t];for(;n.length;){const r=n.shift();e&&e(r);const i=r.children||[];for(const o of i)n.push(o)}}class hM{constructor(e={},n){this.parentNode=null,this.children=[],this.index=0,this.type=n,this.value=e}map(e=n=>n){const n=e(this.value);return this.value=n,this}attr(e,n){return arguments.length===1?this.value[e]:this.map(r=>(r[e]=n,r))}append(e){const n=new e({});return n.children=[],this.push(n),n}push(e){return e.parentNode=this,e.index=this.children.length,this.children.push(e),this}remove(){const e=this.parentNode;if(e){const{children:n}=e,r=n.findIndex(i=>i===this);n.splice(r,1)}return this}getNodeByKey(e){let n=null;return dM(this,i=>{e===i.attr("key")&&(n=i)}),n}getNodesByType(e){const n=[];return dM(this,i=>{e===i.type&&n.push(i)}),n}getNodeByType(e){let n=null;return dM(this,r=>{n||e===r.type&&(n=r)}),n}call(e,...n){return e(this.map(),...n),this}getRoot(){let e=this;for(;e&&e.parentNode;)e=e.parentNode;return e}}var v5=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const pM=["width","height","depth","padding","paddingLeft","paddingRight","paddingBottom","paddingTop","inset","insetLeft","insetRight","insetTop","insetBottom","margin","marginLeft","marginRight","marginTop","marginBottom","autoFit","theme","title","interaction"],g5="__remove__",y5="__callback__",m5=1,x5=1;function Get(t){if(t===void 0){const e=document.createElement("div");return e[g5]=!0,e}return typeof t=="string"?document.getElementById(t):t}function zet(t){const e=t.parentNode;e&&e.removeChild(t)}function Wet(t){if(t.type!==null)return t;const e=t.children[t.children.length-1];for(const n of pM)e.attr(n,t.attr(n));return e}function b5(t){return Object.assign(Object.assign({},t.value),{type:t.type})}function vM(t,e){const{width:n,height:r,autoFit:i,depth:o=0}=t;let a=640,s=480;if(i){const{width:c,height:l}=jet(e);a=c||a,s=l||s}return a=n||a,s=r||s,{width:Math.max(Je(a)?a:m5,m5),height:Math.max(Je(s)?s:x5,x5),depth:o}}function Yet(t){const e=Wet(t),n=[e],r=new Map;for(r.set(e,b5(e));n.length;){const i=n.pop(),o=r.get(i),{children:a=[]}=i;for(const s of a)if(s.type===y5)o.children=s.value;else{const c=b5(s),{children:l=[]}=o;l.push(c),n.push(s),r.set(s,c),o.children=l}}return r.get(e)}function Het(t,e){return typeof t=="function"?!0:new Set(Object.keys(e)).has(t)}function Uet(t,e){return typeof t!="function"&&new Set(Object.keys(e)).has(t)}function Vet(t,e,n,r,i){const{type:o}=t,{type:a=n||o}=e;if(Uet(a,i)){for(const s of pM)t.attr(s)!==void 0&&e[s]===void 0&&(e[s]=t.attr(s));return e}if(Het(a,r)){const s={type:"view"},c=Object.assign({},e);for(const l of pM)c[l]!==void 0&&(s[l]=c[l],delete c[l]);return Object.assign(Object.assign({},s),{children:[c]})}return e}function Xet(t,e,n){if(typeof t=="function")return e.mark;const i=Object.assign(Object.assign({},e),n)[t];if(!i)throw new Error(`Unknown mark: ${t}.`);return i}function $et(t,e,n){if(typeof t=="function"){const c=new hM;return c.value=t,c.type=y5,c}const{type:r,children:i}=t,o=v5(t,["type","children"]),a=Xet(r,e,n),s=new a;return s.value=o,s.type=r,s}function qet(t,e){const{type:n,children:r}=e,i=v5(e,["type","children"]);t.type===n||n===void 0?AR(t.value,i):typeof n=="string"&&(t.type=n,t.value=i)}function Ket(t,e,n,r){if(!t)return;const i=[[t,e]];for(;i.length;){const[o,a]=i.shift(),s=$et(a,n,r);Array.isArray(o.children)&&o.push(s);const{children:c}=a;if(Array.isArray(c))for(const l of c)i.push([s,l]);else typeof c=="function"&&i.push([s,c])}}function Zet(t,e,n,r,i){const o=Vet(t,e,n,r,i),a=[[null,t,o]];for(;a.length;){const[s,c,l]=a.shift();if(!c)Ket(s,l,r,i);else if(!l)c.remove();else{qet(c,l);const{children:u}=l,{children:f}=c;if(Array.isArray(u)&&Array.isArray(f)){const d=Math.max(u.length,f.length);for(let h=0;h<d;h++){const p=u[h],v=f[h];a.push([c,v,p])}}else typeof u=="function"&&a.push([c,null,u])}}}function Jet(){let t,e;return[new Promise((r,i)=>{e=r,t=i}),e,t]}function Qet(t,e,{key:n=e}){t.prototype[e]=function(r){return arguments.length===0?this.attr(n):this.attr(n,r)}}function tnt(t,e,{key:n=e}){t.prototype[e]=function(r){if(arguments.length===0)return this.attr(n);if(Array.isArray(r))return this.attr(n,r);const i=[...this.attr(n)||[],r];return this.attr(n,i)}}function ent(t,e,{key:n=e}){t.prototype[e]=function(r,i){if(arguments.length===0)return this.attr(n);if(arguments.length===1&&typeof r!="string")return this.attr(n,r);const o=this.attr(n)||{};return o[r]=arguments.length===1?!0:i,this.attr(n,o)}}function nnt(t,e,n){t.prototype[e]=function(r){if(arguments.length===0)return this.attr(e);if(Array.isArray(r))return this.attr(e,{items:r});if(Jh(r)&&(r.title!==void 0||r.items!==void 0))return this.attr(e,r);if(r===null||r===!1)return this.attr(e,r);const i=this.attr(e)||{},{items:o=[]}=i;return o.push(r),i.items=o,this.attr(e,i)}}function rnt(t,e,{ctor:n}){t.prototype[e]=function(r){const i=this.append(n);return e==="mark"&&(i.type=r),i}}function int(t,e,{ctor:n}){t.prototype[e]=function(){return this.type=null,this.append(n)}}function Vx(t){return e=>{for(const[n,r]of Object.entries(t)){const{type:i}=r;i==="value"?Qet(e,n,r):i==="array"?tnt(e,n,r):i==="object"?ent(e,n,r):i==="node"?rnt(e,n,r):i==="container"?int(e,n,r):i==="mix"&&nnt(e,n,r)}return e}}function _5(t){return Object.fromEntries(Object.entries(t).map(([e,n])=>[e,{type:"node",ctor:n}]))}const w5={encode:{type:"object"},scale:{type:"object"},data:{type:"value"},transform:{type:"array"},style:{type:"object"},animate:{type:"object"},coordinate:{type:"object"},interaction:{type:"object"},label:{type:"array",key:"labels"},axis:{type:"object"},legend:{type:"object"},slider:{type:"object"},scrollbar:{type:"object"},state:{type:"object"},layout:{type:"object"},theme:{type:"object"},title:{type:"value"}},ont=Object.assign(Object.assign({},w5),{tooltip:{type:"mix"},viewStyle:{type:"object"}}),ant=Object.assign(Object.assign({},w5),{labelTransform:{type:"array"}});var snt=function(t,e,n,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(o=(i<3?a(o):i>3?a(e,n,o):a(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o};let Xx=class extends hM{changeData(e){var n;const r=this.getRoot();if(r)return this.attr("data",e),!((n=this.children)===null||n===void 0)&&n.length&&this.children.forEach(i=>{i.attr("data",e)}),r==null?void 0:r.render()}getView(){const e=this.getRoot(),{views:n}=e.getContext();if(n!=null&&n.length)return n.find(r=>r.key===this._key)}getScale(){var e;return(e=this.getView())===null||e===void 0?void 0:e.scale}getScaleByChannel(e){const n=this.getScale();if(n)return n[e]}getCoordinate(){var e;return(e=this.getView())===null||e===void 0?void 0:e.coordinate}getTheme(){var e;return(e=this.getView())===null||e===void 0?void 0:e.theme}getGroup(){const e=this._key;return e?this.getRoot().getContext().canvas.getRoot().getElementById(e):void 0}show(){const e=this.getGroup();e&&!e.isVisible()&&Nx(e)}hide(){const e=this.getGroup();e&&e.isVisible()&&qS(e)}};Xx=snt([Vx(ant)],Xx);var cnt=function(t,e,n,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(o=(i<3?a(o):i>3?a(e,n,o):a(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o};let gM=class extends hM{changeData(e){const n=this.getRoot();if(n)return this.attr("data",e),n==null?void 0:n.render()}getMark(){var e;const n=(e=this.getRoot())===null||e===void 0?void 0:e.getView();if(!n)return;const{markState:r}=n,i=Array.from(r.keys()).find(o=>o.key===this.attr("key"));return r.get(i)}getScale(){var e;const n=(e=this.getRoot())===null||e===void 0?void 0:e.getView();if(n)return n==null?void 0:n.scale}getScaleByChannel(e){var n,r;const i=(n=this.getRoot())===null||n===void 0?void 0:n.getView();if(i)return(r=i==null?void 0:i.scale)===null||r===void 0?void 0:r[e]}getGroup(){const e=this.attr("key");return e?this.getRoot().getContext().canvas.getRoot().getElementById(e):void 0}};gM=cnt([Vx(ont)],gM);var lnt=function(t,e,n,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(o=(i<3?a(o):i>3?a(e,n,o):a(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o},unt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const fnt="G2_CHART_KEY";class dnt extends Xx{constructor(e){const{container:n,canvas:r,renderer:i,plugins:o,lib:a,createCanvas:s}=e,c=unt(e,["container","canvas","renderer","plugins","lib","createCanvas"]);super(c,"view"),this._hasBindAutoFit=!1,this._rendering=!1,this._trailing=!1,this._trailingResolve=null,this._trailingReject=null,this._previousDefinedType=null,this._onResize=mR(()=>{this.forceFit()},300),this._renderer=i||new gR,this._plugins=o||[],this._container=Get(n),this._emitter=new hs,this._context={library:Object.assign(Object.assign({},a),nk),emitter:this._emitter,canvas:r,createCanvas:s},this._create()}render(){if(this._rendering)return this._addToTrailing();this._context.canvas||this._createCanvas(),this._context.canvas.getConfig().supportsCSSTransform=!0,this._bindAutoFit(),this._rendering=!0;const e=new Promise((o,a)=>Det(this._computedOptions(),this._context,this._createResolve(o),this._createReject(a))),[n,r,i]=Jet();return e.then(r).catch(i).then(()=>this._renderTrailing()),n}options(e){if(arguments.length===0)return Yet(this);const{type:n}=e;return n&&(this._previousDefinedType=n),Zet(this,e,this._previousDefinedType,this._marks,this._compositions),this}getContainer(){return this._container}getContext(){return this._context}on(e,n,r){return this._emitter.on(e,n,r),this}once(e,n){return this._emitter.once(e,n),this}emit(e,...n){return this._emitter.emit(e,...n),this}off(e,n){return this._emitter.off(e,n),this}clear(){const e=this.options();this.emit(Jn.BEFORE_CLEAR),this._reset(),p5(e,this._context,!1),this.emit(Jn.AFTER_CLEAR)}destroy(){const e=this.options();this.emit(Jn.BEFORE_DESTROY),this._unbindAutoFit(),this._reset(),p5(e,this._context,!0),this._container[g5]&&zet(this._container),this.emit(Jn.AFTER_DESTROY)}forceFit(){this.options.autoFit=!0;const{width:e,height:n}=vM(this.options(),this._container);if(e===this._width&&n===this._height)return Promise.resolve(this);this.emit(Jn.BEFORE_CHANGE_SIZE);const r=this.render();return r.then(()=>{this.emit(Jn.AFTER_CHANGE_SIZE)}),r}changeSize(e,n){if(e===this._width&&n===this._height)return Promise.resolve(this);this.emit(Jn.BEFORE_CHANGE_SIZE),this.attr("width",e),this.attr("height",n);const r=this.render();return r.then(()=>{this.emit(Jn.AFTER_CHANGE_SIZE)}),r}_create(){const{library:e}=this._context,n=o=>o.startsWith("mark.")||o==="component.axisX"||o==="component.axisY"||o==="component.legends",r=["mark.mark",...Object.keys(e).filter(n)];this._marks={};for(const o of r){const a=o.split(".").pop();class s extends gM{constructor(){super({},a)}}this._marks[a]=s,this[a]=function(c){const l=this.append(s);return a==="mark"&&(l.type=c),l}}const i=["composition.view",...Object.keys(e).filter(o=>o.startsWith("composition.")&&o!=="composition.mark")];this._compositions=Object.fromEntries(i.map(o=>{const a=o.split(".").pop();let s=class extends Xx{constructor(){super({},a)}};return s=lnt([Vx(_5(this._marks))],s),[a,s]}));for(const o of Object.values(this._compositions))Vx(_5(this._compositions))(o);for(const o of i){const a=o.split(".").pop();this[a]=function(){const s=this._compositions[a];return this.type=null,this.append(s)}}}_reset(){const e=["theme","type","width","height","autoFit"];this.type="view",this.value=Object.fromEntries(Object.entries(this.value).filter(([n])=>n.startsWith("margin")||n.startsWith("padding")||n.startsWith("inset")||e.includes(n))),this.children=[]}_renderTrailing(){this._trailing&&(this._trailing=!1,this.render().then(()=>{const e=this._trailingResolve.bind(this);this._trailingResolve=null,e(this)}).catch(e=>{const n=this._trailingReject.bind(this);this._trailingReject=null,n(e)}))}_createResolve(e){return()=>{this._rendering=!1,e(this)}}_createReject(e){return n=>{this._rendering=!1,e(n)}}_computedOptions(){const e=this.options(),{key:n=fnt}=e,{width:r,height:i,depth:o}=vM(e,this._container);return this._width=r,this._height=i,this._key=n,Object.assign(Object.assign({key:this._key},e),{width:r,height:i,depth:o})}_createCanvas(){const{width:e,height:n}=vM(this.options(),this._container);this._plugins.push(new yR),this._plugins.forEach(r=>this._renderer.registerPlugin(r)),this._context.canvas=new mC({container:this._container,width:e,height:n,renderer:this._renderer})}_addToTrailing(){var e;return(e=this._trailingResolve)===null||e===void 0||e.call(this,this),this._trailing=!0,new Promise((r,i)=>{this._trailingResolve=r,this._trailingReject=i})}_bindAutoFit(){const e=this.options(),{autoFit:n}=e;if(this._hasBindAutoFit){n||this._unbindAutoFit();return}n&&(this._hasBindAutoFit=!0,window.addEventListener("resize",this._onResize))}_unbindAutoFit(){this._hasBindAutoFit&&(this._hasBindAutoFit=!1,window.removeEventListener("resize",this._onResize))}}function hnt(t,e){class n extends t{constructor(i){super(Object.assign(Object.assign({},i),{lib:e}))}}return n}var pnt=Object.prototype.hasOwnProperty,yM=function(t,e){if(t===null||!Bl(t))return{};var n={};return AS(e,function(r){pnt.call(t,r)&&(n[r]=t[r])}),n};function O5(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function cg(t,e,n,r,i){for(var o=t.children,a,s=-1,c=o.length,l=t.value&&(r-e)/t.value;++s<c;)a=o[s],a.y0=n,a.y1=i,a.x0=e,a.x1=e+=a.value*l}function vnt(){var t=1,e=1,n=0,r=!1;function i(a){var s=a.height+1;return a.x0=a.y0=n,a.x1=t,a.y1=e/s,a.eachBefore(o(e,s)),r&&a.eachBefore(O5),a}function o(a,s){return function(c){c.children&&cg(c,c.x0,a*(c.depth+1)/s,c.x1,a*(c.depth+2)/s);var l=c.x0,u=c.y0,f=c.x1-n,d=c.y1-n;f<l&&(l=f=(l+f)/2),d<u&&(u=d=(u+d)/2),c.x0=l,c.y0=u,c.x1=f,c.y1=d}}return i.round=function(a){return arguments.length?(r=!!a,i):r},i.size=function(a){return arguments.length?(t=+a[0],e=+a[1],i):[t,e]},i.padding=function(a){return arguments.length?(n=+a,i):n},i}var gnt=gt(9783);function ynt(t){var e=0,n=t.children,r=n&&n.length;if(!r)e=1;else for(;--r>=0;)e+=n[r].value;t.value=e}function mnt(){return this.eachAfter(ynt)}var mM=gt(64599);function xnt(t,e){var n=-1,r=mM(this),i;try{for(r.s();!(i=r.n()).done;){var o=i.value;t.call(e,o,++n,this)}}catch(a){r.e(a)}finally{r.f()}return this}function bnt(t,e){for(var n=this,r=[n],i,o,a=-1;n=r.pop();)if(t.call(e,n,++a,this),i=n.children)for(o=i.length-1;o>=0;--o)r.push(i[o]);return this}function _nt(t,e){for(var n=this,r=[n],i=[],o,a,s,c=-1;n=r.pop();)if(i.push(n),o=n.children)for(a=0,s=o.length;a<s;++a)r.push(o[a]);for(;n=i.pop();)t.call(e,n,++c,this);return this}function wnt(t,e){var n=-1,r=mM(this),i;try{for(r.s();!(i=r.n()).done;){var o=i.value;if(t.call(e,o,++n,this))return o}}catch(a){r.e(a)}finally{r.f()}}function Ont(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})}function Ent(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function Snt(t){for(var e=this,n=Mnt(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r}function Mnt(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}function Pnt(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function Tnt(){return Array.from(this)}function Ant(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function Cnt(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}var E5=gt(15009),knt=E5().mark(S5);function S5(){var t,e,n,r,i,o;return E5().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:t=this,n=[t];case 1:e=n.reverse(),n=[];case 2:if(!(t=e.pop())){s.next=8;break}return s.next=5,t;case 5:if(r=t.children)for(i=0,o=r.length;i<o;++i)n.push(r[i]);s.next=2;break;case 8:if(n.length){s.next=1;break}case 9:case"end":return s.stop()}},knt,this)}function yp(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=Lnt)):e===void 0&&(e=Rnt);for(var n=new mp(t),r,i=[n],o,a,s,c;r=i.pop();)if((a=e(r.data))&&(c=(a=Array.from(a)).length))for(r.children=a,s=c-1;s>=0;--s)i.push(o=a[s]=new mp(a[s])),o.parent=r,o.depth=r.depth+1;return n.eachBefore(M5)}function Nnt(){return yp(this).eachBefore(Int)}function Rnt(t){return t.children}function Lnt(t){return Array.isArray(t)?t[1]:null}function Int(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function M5(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function mp(t){this.data=t,this.depth=this.height=0,this.parent=null}mp.prototype=yp.prototype=gnt({constructor:mp,count:mnt,each:xnt,eachAfter:_nt,eachBefore:bnt,find:wnt,sum:Ont,sort:Ent,path:Snt,ancestors:Pnt,descendants:Tnt,leaves:Ant,links:Cnt,copy:Nnt},Symbol.iterator,S5);function xM(t,e){for(var n in e)e.hasOwnProperty(n)&&n!=="constructor"&&e[n]!==void 0&&(t[n]=e[n])}function Dnt(t,e,n,r){return e&&xM(t,e),n&&xM(t,n),r&&xM(t,r),t}const Bnt={field:"value",size:[1,1],round:!1,padding:0,sort:(t,e)=>e.value-t.value,as:["x","y"],ignoreParentValue:!0},Fnt="nodeIndex",lg="childNodeCount",jnt="nodeAncestor",bM="Invalid field: it must be a string!";function Gnt(t,e){const{field:n,fields:r}=t;if(Qe(n))return n;if(ri(n))return console.warn(bM),n[0];if(console.warn(`${bM} will try to get fields instead.`),Qe(r))return r;if(ri(r)&&r.length)return r[0];if(e)return e;throw new TypeError(bM)}function znt(t){const e=[];if(t&&t.each){let n,r;t.each(i=>{var o,a;i.parent!==n?(n=i.parent,r=0):r+=1;const s=BI((((o=i.ancestors)===null||o===void 0?void 0:o.call(i))||[]).map(c=>e.find(l=>l.name===c.name)||c),({depth:c})=>c>0&&c<i.depth);i[jnt]=s,i[lg]=((a=i.children)===null||a===void 0?void 0:a.length)||0,i[Fnt]=r,e.push(i)})}else t&&t.eachNode&&t.eachNode(n=>{e.push(n)});return e}function Wnt(t,e){e=Dnt({},Bnt,e);const n=e.as;if(!ri(n)||n.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');let r;try{r=Gnt(e)}catch(c){console.warn(c)}const o=(c=>vnt().size(e.size).round(e.round).padding(e.padding)(yp(c).sum(l=>V0(l.children)?e.ignoreParentValue?0:l[r]-DL(l.children,(u,f)=>u+f[r],0):l[r]).sort(e.sort)))(t),a=n[0],s=n[1];return o.each(c=>{var l,u;c[a]=[c.x0,c.x1,c.x1,c.x0],c[s]=[c.y1,c.y1,c.y0,c.y0],c.name=c.name||((l=c.data)===null||l===void 0?void 0:l.name)||((u=c.data)===null||u===void 0?void 0:u.label),c.data.name=c.name,["x0","x1","y0","y1"].forEach(f=>{n.indexOf(f)===-1&&delete c[f]})}),znt(o)}var Ynt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const xp="sunburst",_M="markType",Lgt="value",P5="path",$x="ancestor-node";function Hnt(t){const{data:e,encode:n}=t,{color:r,value:i}=n,a=Wnt(e,{field:i,type:"hierarchy.partition",as:["x","y"]}),s=[];return a.forEach(c=>{var l,u,f,d;if(c.depth===0)return null;let h=c.data.name;const p=[h];let v=Object.assign({},c);for(;v.depth>1;)h=`${(l=v.parent.data)===null||l===void 0?void 0:l.name} / ${h}`,p.unshift((u=v.parent.data)===null||u===void 0?void 0:u.name),v=v.parent;const y=Object.assign(Object.assign(Object.assign({},yM(c.data,[i])),{[P5]:h,[$x]:v.data.name}),c);r&&r!==$x&&(y[r]=c.data[r]||((d=(f=c.parent)===null||f===void 0?void 0:f.data)===null||d===void 0?void 0:d[r])),s.push(y)}),s.map(c=>{const l=c.x.slice(0,2),u=[c.y[2],c.y[0]];return l[0]===l[1]&&(u[0]=u[1]=(c.y[2]+c.y[0])/2),Object.assign(Object.assign({},c),{x:l,y:u,fillOpacity:Math.pow(.85,c.depth)})})}const T5={id:xp,encode:{x:"x",y:"y",key:P5,color:$x,value:"value"},axis:{x:!1,y:!1},style:{[_M]:xp,stroke:"#fff",lineWidth:.5,fillOpacity:"fillOpacity",[lg]:lg,depth:"depth"},state:{active:{zIndex:2,stroke:"#000"},inactive:{zIndex:1,stroke:"#fff"}},legend:!1,interaction:{drillDown:!0},coordinate:{type:"polar",innerRadius:.2}},A5=t=>{const{encode:e,data:n=[],legend:r}=t,i=Ynt(t,["encode","data","legend"]),o=Object.assign(Object.assign({},i.coordinate),{innerRadius:Math.max(Ln(i,["coordinate","innerRadius"],.2),1e-5)}),a=Object.assign(Object.assign({},T5.encode),e),{value:s}=a,c=Hnt({encode:a,data:n});return console.log(c,"rectData"),[bt({},T5,Object.assign(Object.assign({type:"rect",data:c,encode:a,tooltip:{title:"path",items:[l=>({name:s,value:l[s]})]}},i),{coordinate:o}))]};A5.props={};var Unt=Object.keys?function(t){return Object.keys(t)}:function(t){var e=[];return AS(t,function(n,r){Fa(t)&&r==="prototype"||e.push(r)}),e},wM=Unt,Vnt=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(u){try{l(r.next(u))}catch(f){a(f)}}function c(u){try{l(r.throw(u))}catch(f){a(f)}}function l(u){u.done?o(u.value):i(u.value).then(s,c)}l((r=r.apply(t,e||[])).next())})};const Xnt=t=>t.querySelectorAll(".element").filter(e=>Ln(e,["style",_M])===xp);function $nt(t){return Ie(t).select(`.${Ha}`).node()}const qnt={rootText:"root",style:{fill:"rgba(0, 0, 0, 0.85)",fontSize:12,y:1},active:{fill:"rgba(0, 0, 0, 0.5)"}};function Knt(t={}){const{breadCrumb:e={},isFixedColor:n=!1}=t,r=bt({},qnt,e);return i=>{const{update:o,setState:a,container:s,view:c,options:l}=i,u=s.ownerDocument,f=$nt(s),d=l.marks.find(({id:O})=>O===xp),{state:h}=d,p=u.createElement("g");f.appendChild(p);const v=(O,E)=>Vnt(this,void 0,void 0,function*(){if(p.removeChildren(),O){const w=u.createElement("text",{style:Object.assign({x:0,text:r.rootText,depth:0},r.style)});p.appendChild(w);let _="";const S=O==null?void 0:O.split(" / ");let M=r.style.y,T=p.getBBox().width;const A=f.getBBox().width,C=S.map((N,k)=>{const R=u.createElement("text",{style:Object.assign(Object.assign({x:T,text:" / "},r.style),{y:M})});p.appendChild(R),T+=R.getBBox().width,_=`${_}${N} / `;const I=u.createElement("text",{name:_.replace(/\s\/\s$/,""),style:Object.assign(Object.assign({text:N,x:T,depth:k+1},r.style),{y:M})});return p.appendChild(I),T+=I.getBBox().width,T>A&&(M=p.getBBox().height,T=0,R.attr({x:T,y:M}),T+=R.getBBox().width,I.attr({x:T,y:M}),T+=I.getBBox().width),I});[w,...C].forEach((N,k)=>{if(k===C.length)return;const R=Object.assign({},N.attributes);N.attr("cursor","pointer"),N.addEventListener("mouseenter",()=>{N.attr(r.active)}),N.addEventListener("mouseleave",()=>{N.attr(R)}),N.addEventListener("click",()=>{v(N.name,Ln(N,["style","depth"]))})})}a("drillDown",w=>{const{marks:_}=w,S=_.map(M=>{if(M.id!==xp&&M.type!=="rect")return M;const{data:T}=M,A=Object.fromEntries(["color"].map(N=>[N,{domain:c.scale[N].getOptions().domain}])),C=T.filter(N=>{const k=N.path;return n||(N[$x]=k.split(" / ")[E]),O?new RegExp(`^${O}.+`).test(k):!0});return bt({},M,n?{data:C,scale:A}:{data:C})});return Object.assign(Object.assign({},w),{marks:S})}),yield o()}),y=O=>{const E=O.target;if(Ln(E,["style",_M])!==xp||Ln(E,["markType"])!=="rect"||!Ln(E,["style",lg]))return;const w=Ln(E,["__data__","key"]),_=Ln(E,["style","depth"]);E.style.cursor="pointer",v(w,_)};f.addEventListener("click",y);const m=wM(Object.assign(Object.assign({},h.active),h.inactive)),b=()=>{Xnt(f).forEach(E=>{const w=Ln(E,["style",lg]);if(Ln(E,["style","cursor"])!=="pointer"&&w){E.style.cursor="pointer";const S=yM(E.attributes,m);E.addEventListener("mouseenter",()=>{E.attr(h.active)}),E.addEventListener("mouseleave",()=>{E.attr(bt(S,h.inactive))})}})};return f.addEventListener("mousemove",b),()=>{p.remove(),f.removeEventListener("click",y),f.removeEventListener("mousemove",b)}}}function Znt(){return{"interaction.drillDown":Knt,"mark.sunburst":A5}}const C5=()=>[["cartesian"]];C5.props={};const OM=()=>[["transpose"],["translate",.5,.5],["reflect.x"],["translate",-.5,-.5]];OM.props={transform:!0};const Jnt=(t={})=>{const e={startAngle:-Math.PI/2,endAngle:Math.PI*3/2,innerRadius:0,outerRadius:1};return Object.assign(Object.assign({},e),t)},k5=t=>{const{startAngle:e,endAngle:n,innerRadius:r,outerRadius:i}=Jnt(t);return[...OM(),...N0({startAngle:e,endAngle:n,innerRadius:r,outerRadius:i})]};k5.props={};const EM=()=>[["parallel",0,1,0,1]];EM.props={};const N5=({focusX:t=0,focusY:e=0,distortionX:n=2,distortionY:r=2,visual:i=!1})=>[["fisheye",t,e,n,r,i]];N5.props={transform:!0};const R5=t=>{const{startAngle:e=-Math.PI/2,endAngle:n=Math.PI*3/2,innerRadius:r=0,outerRadius:i=1}=t;return[...EM(),...N0({startAngle:e,endAngle:n,innerRadius:r,outerRadius:i})]};R5.props={};const L5=({value:t})=>e=>e.map(()=>t);L5.props={};const I5=({value:t})=>e=>e.map(n=>n[t]);I5.props={};const D5=({value:t})=>e=>e.map(t);D5.props={};const B5=({value:t})=>()=>t;B5.props={};function xr(t,e){if(t!==null)return{type:"column",value:t,field:e}}function qx(t,e){const n=xr(t,e);return Object.assign(Object.assign({},n),{inferred:!0})}function Kx(t,e){if(t!==null)return{type:"column",value:t,field:e,visual:!0}}function Qnt(t,e){const n=xr(t,e);return Object.assign(Object.assign({},n),{constant:!1})}function Ku(t,e){const n=[];for(const r of t)n[r]=e;return n}function En(t,e){const n=t[e];if(!n)return[null,null];const{value:r,field:i=null}=n;return[r,i]}function ug(t,...e){for(const n of e)if(typeof n=="string"){const[r,i]=En(t,n);if(r!==null)return[r,i]}else return[n,null];return[null,null]}function fg(t){return t instanceof Date?!1:typeof t=="object"}const dg=()=>(t,e)=>{const{encode:n}=e,{y1:r}=n;return r!==void 0?[t,e]:[t,bt({},e,{encode:{y1:qx(Ku(t,0))}})]};dg.props={};const fd=()=>(t,e)=>{const{encode:n}=e,{x:r}=n;return r!==void 0?[t,e]:[t,bt({},e,{encode:{x:qx(Ku(t,0))},scale:{x:{guide:null}}})]};fd.props={};const dd=(t,e)=>eg(Object.assign({colorAttribute:"fill"},t),e);dd.props=Object.assign(Object.assign({},eg.props),{defaultMarker:"square"});const Zx=(t,e)=>eg(Object.assign({colorAttribute:"stroke"},t),e);Zx.props=Object.assign(Object.assign({},eg.props),{defaultMarker:"hollowSquare"});function bp(){}function F5(t){this._context=t}F5.prototype={areaStart:bp,areaEnd:bp,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function SM(t){return new F5(t)}var j5=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function trt(t,e,n){const[r,i,o,a]=t;if(Rr(n)){const l=[e?e[0][0]:i[0],i[1]],u=[e?e[3][0]:o[0],o[1]];return[r,l,u,a]}const s=[i[0],e?e[0][1]:i[1]],c=[o[0],e?e[3][1]:o[1]];return[r,s,c,a]}const MM=(t,e)=>{const{adjustPoints:n=trt}=t,r=j5(t,["adjustPoints"]),{coordinate:i,document:o}=e;return(a,s,c,l)=>{const{index:u}=s,{color:f}=c,d=j5(c,["color"]),h=l[u+1],p=n(a,h,i),v=!!Rr(i),[y,m,b,O]=v?Ox(p):p,{color:E=f,opacity:w}=s,_=ad().curve(SM)([y,m,b,O]);return Ie(o.createElement("path",{})).call(be,d).style("d",_).style("fill",E).style("fillOpacity",w).call(be,r).node()}};MM.props={defaultMarker:"square"};function ert(t,e,n){const[r,i,o,a]=t;if(Rr(n)){const l=[e?e[0][0]:(i[0]+o[0])/2,i[1]],u=[e?e[3][0]:(i[0]+o[0])/2,o[1]];return[r,l,u,a]}const s=[i[0],e?e[0][1]:(i[1]+o[1])/2],c=[o[0],e?e[3][1]:(i[1]+o[1])/2];return[r,s,c,a]}const G5=(t,e)=>MM(Object.assign({adjustPoints:ert},t),e);G5.props={defaultMarker:"square"};function hg(t){return Math.abs(t)>10?String(t):t.toString().padStart(2,"0")}function nrt(t){const e=t.getFullYear(),n=hg(t.getMonth()+1),r=hg(t.getDate()),i=`${e}-${n}-${r}`,o=t.getHours(),a=t.getMinutes(),s=t.getSeconds();return o||a||s?`${i} ${hg(o)}:${hg(a)}:${hg(s)}`:i}const Jx=(t={})=>{const{channel:e="x"}=t;return(n,r)=>{const{encode:i}=r,{tooltip:o}=r;if(Fl(o))return[n,r];const{title:a}=o;if(a!==void 0)return[n,r];const s=Object.keys(i).filter(l=>l.startsWith(e)).filter(l=>!i[l].inferred).map(l=>En(i,l)).filter(([l])=>l).map(l=>l[0]);if(s.length===0)return[n,r];const c=[];for(const l of n)c[l]={value:s.map(u=>u[l]instanceof Date?nrt(u[l]):u[l]).join(", ")};return[n,bt({},r,{tooltip:{title:c}})]}};Jx.props={};const Qx=t=>{const{channel:e}=t;return(n,r)=>{const{encode:i,tooltip:o}=r;if(Fl(o))return[n,r];const{items:a=[]}=o;if(!a||a.length>0)return[n,r];const c=(Array.isArray(e)?e:[e]).flatMap(l=>Object.keys(i).filter(u=>u.startsWith(l)).map(u=>{const{field:f,value:d,inferred:h=!1,aggregate:p}=i[u];return h?null:p&&d?{channel:u}:f?{field:f}:d?{channel:u}:null}).filter(u=>u!==null));return[n,bt({},r,{tooltip:{items:c}})]}};Qx.props={};var rrt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const z5=()=>(t,e)=>{const{encode:n}=e,{key:r}=n,i=rrt(n,["key"]);if(r!==void 0)return[t,e];const o=Object.values(i).map(({value:s})=>s),a=t.map(s=>o.filter(Array.isArray).map(c=>c[s]).join("-"));return[t,bt({},e,{encode:{key:xr(a)}})]};z5.props={};function W5(t={}){const{shapes:e}=t;return[{name:"color"},{name:"opacity"},{name:"shape",range:e},{name:"enterType"},{name:"enterDelay",scaleKey:"enter"},{name:"enterDuration",scaleKey:"enter"},{name:"enterEasing"},{name:"key",scale:"identity"},{name:"groupKey",scale:"identity"},{name:"label",scale:"identity"}]}function da(t={}){return[...W5(t),{name:"title",scale:"identity"}]}function Igt(){return[{type:MaybeTitle,channel:"color"},{type:MaybeTooltip,channel:["x","y","z"]}]}function Zu(){return[{type:Jx,channel:"color"},{type:Qx,channel:["x","y"]}]}function _p(){return[{type:Jx,channel:"x"},{type:Qx,channel:["y"]}]}function irt(){return[{type:Jx,channel:"color"},{type:Qx,channel:["position"]}]}function wp(t={}){return W5(t)}function gi(){return[{type:z5}]}function Pi(){return[]}function PM(t,e){return t.getBandWidth(t.invert(e))}function hd(t,e,n={}){const{x:r,y:i,series:o}=e,{x:a,y:s,series:c}=t,{style:{bandOffset:l=c?0:.5,bandOffsetX:u=l,bandOffsetY:f=l}={}}=n,d=!!(a!=null&&a.getBandWidth),h=!!(s!=null&&s.getBandWidth),p=!!(c!=null&&c.getBandWidth);return!d&&!h?v=>v:(v,y)=>{const m=d?PM(a,r[y]):0,b=h?PM(s,i[y]):0,E=p&&o?(PM(c,o[y])/2+ +o[y])*m:0,[w,_]=v;return[w+u*m+E,_+f*b]}}function tb(t){return parseFloat(t)/100}function TM(t,e,n,r){const{x:i,y:o}=n,{innerWidth:a,innerHeight:s}=r.getOptions(),c=Array.from(t,l=>{const u=i[l],f=o[l],d=typeof u=="string"?tb(u)*a:+u,h=typeof f=="string"?tb(f)*s:+f;return[[d,h]]});return[t,c]}function il(t){return typeof t=="function"?t:e=>e[t]}function AM(t,e){return Array.from(t,il(e))}function CM(t,e){const{source:n=u=>u.source,target:r=u=>u.target,value:i=u=>u.value}=e,{links:o,nodes:a}=t,s=AM(o,n),c=AM(o,r),l=AM(o,i);return{links:o.map((u,f)=>({target:c[f],source:s[f],value:l[f]})),nodes:a||Array.from(new Set([...s,...c]),u=>({key:u}))}}function Y5(t,e){return t.getBandWidth(t.invert(e))}const H5={rect:dd,hollow:Zx,funnel:MM,pyramid:G5},U5=()=>(t,e,n,r)=>{const{x:i,y:o,y1:a,series:s,size:c}=n,l=e.x,u=e.series,[f]=r.getSize(),d=c?c.map(v=>+v/f):null,h=c?(v,y,m)=>{const b=v+y/2,O=d[m];return[b-O/2,b+O/2]}:(v,y,m)=>[v,v+y],p=Array.from(t,v=>{const y=Y5(l,i[v]),m=u?Y5(u,s==null?void 0:s[v]):1,b=y*m,O=(+(s==null?void 0:s[v])||0)*y,E=+i[v]+O,[w,_]=h(E,b,v),S=+o[v],M=+a[v];return[[w,S],[_,S],[_,M],[w,M]].map(k=>r.map(k))});return[t,p]};U5.props={defaultShape:"rect",defaultLabelShape:"label",composite:!1,shape:H5,channels:[...da({shapes:Object.keys(H5)}),{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"series",scale:"band"},{name:"size"}],preInference:[...gi(),{type:dg},{type:fd}],postInference:[...Pi(),..._p()],interaction:{shareTooltip:!0}};const V5={rect:dd,hollow:Zx},X5=()=>(t,e,n,r)=>{const{x:i,x1:o,y:a,y1:s}=n,c=Array.from(t,l=>{const u=[+i[l],+a[l]],f=[+o[l],+a[l]],d=[+o[l],+s[l]],h=[+i[l],+s[l]];return[u,f,d,h].map(p=>r.map(p))});return[t,c]};X5.props={defaultShape:"rect",defaultLabelShape:"label",composite:!1,shape:V5,channels:[...da({shapes:Object.keys(V5)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...gi(),{type:dg}],postInference:[...Pi(),..._p()],interaction:{shareTooltip:!0}};var $5=kM(K0);function q5(t){this._curve=t}q5.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};function kM(t){function e(n){return new q5(t(n))}return e._curve=t,e}function pg(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(n){return arguments.length?e(kM(n)):e()._curve},t}function ort(){return pg(ad().curve($5))}var K5=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const art=cp(t=>{const{d1:e,d2:n,style1:r,style2:i}=t.attributes,o=t.ownerDocument;Ie(t).maybeAppend("line",()=>o.createElement("path",{})).style("d",e).call(be,r),Ie(t).maybeAppend("line1",()=>o.createElement("path",{})).style("d",n).call(be,i)});function srt(t,e){const n=[],r=[];let i=!1,o=null;for(const a of t)!e(a[0])||!e(a[1])?i=!0:(n.push(a),i&&(i=!1,r.push([o,a])),o=a);return[n,r]}const Is=(t,e)=>{const{curve:n,gradient:r=!1,gradientColor:i="between",defined:o=u=>!Number.isNaN(u)&&u!==void 0&&u!==null,connect:a=!1}=t,s=K5(t,["curve","gradient","gradientColor","defined","connect"]),{coordinate:c,document:l}=e;return(u,f,d)=>{const{color:h,lineWidth:p}=d,v=K5(d,["color","lineWidth"]),{color:y=h,size:m=p,seriesColor:b,seriesX:O,seriesY:E}=f,w=mI(c,f),_=Rr(c),S=r&&b?yI(b,O,E,r,i,_):y,M=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},v),S&&{stroke:S}),m&&{lineWidth:m}),w&&{transform:w}),s);let T;if(ar(c)){const I=c.getCenter();T=D=>ort().angle((B,F)=>sp(ci(D[F],I))).radius((B,F)=>Zr(D[F],I)).defined(([B,F])=>o(B)&&o(F)).curve(n)(D)}else T=ad().x(I=>I[0]).y(I=>I[1]).defined(([I,D])=>o(I)&&o(D)).curve(n);const[A,C]=srt(u,o),N=Xt(M,"connect"),k=!!C.length;if(!k||a&&!Object.keys(N).length)return Ie(l.createElement("path",{})).style("d",T(A)||[]).call(be,M).node();if(k&&!a)return Ie(l.createElement("path",{})).style("d",T(u)).call(be,M).node();const R=I=>I.map(T).join(",");return Ie(new art).style("style1",Object.assign(Object.assign({},M),N)).style("style2",M).style("d1",R(C)).style("d2",T(u)).node()}};Is.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const Z5=(t,e)=>{const{coordinate:n}=e;return(...r)=>{const i=ar(n)?SM:K0;return Is(Object.assign({curve:i},t),e)(...r)}};Z5.props=Object.assign(Object.assign({},Is.props),{defaultMarker:"line"});function NM(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function RM(t,e){this._context=t,this._k=(1-e)/6}RM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:NM(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:NM(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Dgt=function t(e){function n(r){return new RM(r,e)}return n.tension=function(r){return t(+r)},n}(0);function LM(t,e){this._context=t,this._k=(1-e)/6}LM.prototype={areaStart:bp,areaEnd:bp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:NM(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Bgt=function t(e){function n(r){return new LM(r,e)}return n.tension=function(r){return t(+r)},n}(0);function J5(t,e,n){var r=t._x1,i=t._y1,o=t._x2,a=t._y2;if(t._l01_a>Ko){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,c=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/c,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/c}if(t._l23_a>Ko){var l=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*l+t._x1*t._l23_2a-e*t._l12_2a)/u,a=(a*l+t._y1*t._l23_2a-n*t._l12_2a)/u}t._context.bezierCurveTo(r,i,o,a,t._x2,t._y2)}function Q5(t,e){this._context=t,this._alpha=e}Q5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:J5(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Fgt=function t(e){function n(r){return e?new Q5(r,e):new RM(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function tD(t,e){this._context=t,this._alpha=e}tD.prototype={areaStart:bp,areaEnd:bp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:J5(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var eD=function t(e){function n(r){return e?new tD(r,e):new LM(r,0)}return n.alpha=function(r){return t(+r)},n}(.5);function nD(t){return t<0?-1:1}function rD(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(nD(o)+nD(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function iD(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function IM(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,s=(o-r)/3;t._context.bezierCurveTo(r+s,i+s*e,o-s,a-s*n,o,a)}function eb(t){this._context=t}eb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:IM(this,this._t0,iD(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,IM(this,iD(this,n=rD(this,t,e)),n);break;default:IM(this,this._t0,n=rD(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function oD(t){this._context=new aD(t)}(oD.prototype=Object.create(eb.prototype)).point=function(t,e){eb.prototype.point.call(this,e,t)};function aD(t){this._context=t}aD.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}};function sD(t){return new eb(t)}function cD(t){return new oD(t)}var crt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const lD=(t,e)=>{const n=crt(t,[]),{coordinate:r}=e;return(...i)=>{const o=ar(r)?eD:Rr(r)?cD:sD;return Is(Object.assign({curve:o},n),e)(...i)}};lD.props=Object.assign(Object.assign({},Is.props),{defaultMarker:"smooth"});function nb(t,e){this._context=t,this._t=e}nb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function uD(t){return new nb(t,.5)}function fD(t){return new nb(t,0)}function dD(t){return new nb(t,1)}const hD=(t,e)=>Is(Object.assign({curve:dD},t),e);hD.props=Object.assign(Object.assign({},Is.props),{defaultMarker:"hv"});const pD=(t,e)=>Is(Object.assign({curve:fD},t),e);pD.props=Object.assign(Object.assign({},Is.props),{defaultMarker:"vh"});const vD=(t,e)=>Is(Object.assign({curve:uD},t),e);vD.props=Object.assign(Object.assign({},Is.props),{defaultMarker:"hvh"});var lrt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function urt(t,e,n,r,i){const o=ci(n,e),a=Rs(o),s=a+Math.PI/2,c=[r/2*Math.cos(s),r/2*Math.sin(s)],l=[i/2*Math.cos(s),i/2*Math.sin(s)],u=[i/2*Math.cos(a),i/2*Math.sin(a)],f=[r/2*Math.cos(a),r/2*Math.sin(a)],d=wx(e,c),h=wx(n,l),p=wx(h,u),v=wx(n,u),y=ci(v,l),m=ci(n,l),b=ci(e,c),O=ci(b,f),E=ci(e,f),w=ci(d,f);t.moveTo(...d),t.lineTo(...h),t.arcTo(...p,...v,i/2),t.arcTo(...y,...m,i/2),t.lineTo(...b),t.arcTo(...O,...E,r/2),t.arcTo(...w,...d,r/2),t.closePath()}const gD=(t,e)=>{const{document:n}=e;return(r,i,o)=>{const{seriesSize:a,color:s}=i,{color:c}=o,l=lrt(o,["color"]),u=Ls();for(let f=0;f<r.length-1;f++){const d=r[f],h=r[f+1],p=a[f],v=a[f+1];[...d,...h].every(mr)&&urt(u,d,h,p,v)}return Ie(n.createElement("path",{})).call(be,l).style("fill",s||c).style("d",u.toString()).call(be,t).node()}};gD.props=Object.assign(Object.assign({},Is.props),{defaultMarker:"line"});const yD=()=>(t,e)=>{const{style:n={},encode:r}=e,{series:i}=r,{gradient:o}=n;return!o||i?[t,e]:[t,bt({},e,{encode:{series:Kx(Ku(t,void 0))}})]};yD.props={};const DM=()=>(t,e)=>{const{encode:n}=e,{series:r,color:i}=n;if(r!==void 0||i===void 0)return[t,e];const[o,a]=En(n,"color");return[t,bt({},e,{encode:{series:xr(o,a)}})]};DM.props={};const mD={line:Z5,smooth:lD,hv:hD,vh:pD,hvh:vD,trail:gD},frt=(t,e,n,r)=>{var i,o;const{series:a,x:s,y:c}=n,{x:l,y:u}=e;if(s===void 0||c===void 0)throw new Error("Missing encode for x or y channel.");const f=a?Array.from(Nr(t,y=>a[y]).values()):[t],d=f.map(y=>y[0]).filter(y=>y!==void 0),h=(((i=l==null?void 0:l.getBandWidth)===null||i===void 0?void 0:i.call(l))||0)/2,p=(((o=u==null?void 0:u.getBandWidth)===null||o===void 0?void 0:o.call(u))||0)/2,v=Array.from(f,y=>y.map(m=>r.map([+s[m]+h,+c[m]+p])));return[d,v,f]},drt=(t,e,n,r)=>{const i=Object.entries(n).filter(([a])=>a.startsWith("position")).map(([,a])=>a);if(i.length===0)throw new Error("Missing encode for position channel.");const o=Array.from(t,a=>{const s=i.map(u=>+u[a]),c=r.map(s),l=[];for(let u=0;u<c.length;u+=2)l.push([c[u],c[u+1]]);return l});return[t,o]},xD=()=>(t,e,n,r)=>(L0(r)?drt:frt)(t,e,n,r);xD.props={defaultShape:"line",defaultLabelShape:"label",composite:!1,shape:mD,channels:[...da({shapes:Object.keys(mD)}),{name:"x"},{name:"y"},{name:"position",independent:!0},{name:"size"},{name:"series",scale:"band"}],preInference:[...gi(),{type:yD},{type:DM}],postInference:[...Pi(),..._p(),...irt()],interaction:{shareTooltip:!0,seriesTooltip:!0,crosshairs:!0}};var hrt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function bD(t,e,n,r){if(e.length===1)return;const{size:i}=n;if(t==="fixed")return i;if(t==="normal"||HR(r)){const[[o,a],[s,c]]=e,l=Math.abs((s-o)/2),u=Math.abs((c-a)/2);return Math.max(0,(l+u)/2)}return i}const _n=(t,e)=>{const{colorAttribute:n,symbol:r,mode:i="auto"}=t,o=hrt(t,["colorAttribute","symbol","mode"]),a=Ph.get(r)||Ph.get("point"),{coordinate:s,document:c}=e;return(l,u,f)=>{const{lineWidth:d,color:h}=f,p=o.stroke?d||1:d,{color:v=h,transform:y,opacity:m}=u,[b,O]=jS(l),w=bD(i,l,u,s)||o.r||f.r;return Ie(c.createElement("path",{})).call(be,f).style("fill","transparent").style("d",a(b,O,w)).style("lineWidth",p).style("transform",y).style("transformOrigin",`${b-w} ${O-w}`).style("stroke",v).style(FS(t),m).style(n,v).call(be,o).node()}};_n.props={defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const _D=(t,e)=>_n(Object.assign({colorAttribute:"stroke",symbol:"point"},t),e);_D.props=Object.assign({defaultMarker:"hollowPoint"},_n.props);const wD=(t,e)=>_n(Object.assign({colorAttribute:"stroke",symbol:"diamond"},t),e);wD.props=Object.assign({defaultMarker:"hollowDiamond"},_n.props);const OD=(t,e)=>_n(Object.assign({colorAttribute:"stroke",symbol:"hexagon"},t),e);OD.props=Object.assign({defaultMarker:"hollowHexagon"},_n.props);const ED=(t,e)=>_n(Object.assign({colorAttribute:"stroke",symbol:"square"},t),e);ED.props=Object.assign({defaultMarker:"hollowSquare"},_n.props);const SD=(t,e)=>_n(Object.assign({colorAttribute:"stroke",symbol:"triangle-down"},t),e);SD.props=Object.assign({defaultMarker:"hollowTriangleDown"},_n.props);const MD=(t,e)=>_n(Object.assign({colorAttribute:"stroke",symbol:"triangle"},t),e);MD.props=Object.assign({defaultMarker:"hollowTriangle"},_n.props);const PD=(t,e)=>_n(Object.assign({colorAttribute:"stroke",symbol:"bowtie"},t),e);PD.props=Object.assign({defaultMarker:"hollowBowtie"},_n.props);var prt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const TD=(t,e)=>{const{colorAttribute:n,mode:r="auto"}=t,i=prt(t,["colorAttribute","mode"]),{coordinate:o,document:a}=e;return(s,c,l)=>{const{lineWidth:u,color:f}=l,d=i.stroke?u||1:u,{color:h=f,transform:p,opacity:v}=c,[y,m]=jS(s),O=bD(r,s,c,o)||i.r||l.r;return Ie(a.createElement("circle",{})).call(be,l).style("fill","transparent").style("cx",y).style("cy",m).style("r",O).style("lineWidth",d).style("transform",p).style("transformOrigin",`${y} ${m}`).style("stroke",h).style(FS(t),v).style(n,h).call(be,i).node()}},BM=(t,e)=>TD(Object.assign({colorAttribute:"fill"},t),e);BM.props={defaultMarker:"circle",defaultEnterAnimation:"fadeIn",defaultExitAnimation:"fadeOut"};const AD=(t,e)=>TD(Object.assign({colorAttribute:"stroke"},t),e);AD.props=Object.assign({defaultMarker:"hollowPoint"},BM.props);const CD=(t,e)=>_n(Object.assign({colorAttribute:"fill",symbol:"point"},t),e);CD.props=Object.assign({defaultMarker:"point"},_n.props);const kD=(t,e)=>_n(Object.assign({colorAttribute:"stroke",symbol:"plus"},t),e);kD.props=Object.assign({defaultMarker:"plus"},_n.props);const ND=(t,e)=>_n(Object.assign({colorAttribute:"fill",symbol:"diamond"},t),e);ND.props=Object.assign({defaultMarker:"diamond"},_n.props);const RD=(t,e)=>_n(Object.assign({colorAttribute:"fill",symbol:"square"},t),e);RD.props=Object.assign({defaultMarker:"square"},_n.props);const LD=(t,e)=>_n(Object.assign({colorAttribute:"fill",symbol:"triangle"},t),e);LD.props=Object.assign({defaultMarker:"triangle"},_n.props);const ID=(t,e)=>_n(Object.assign({colorAttribute:"fill",symbol:"hexagon"},t),e);ID.props=Object.assign({defaultMarker:"hexagon"},_n.props);const DD=(t,e)=>_n(Object.assign({colorAttribute:"stroke",symbol:"cross"},t),e);DD.props=Object.assign({defaultMarker:"cross"},_n.props);const BD=(t,e)=>_n(Object.assign({colorAttribute:"fill",symbol:"bowtie"},t),e);BD.props=Object.assign({defaultMarker:"bowtie"},_n.props);const FD=(t,e)=>_n(Object.assign({colorAttribute:"stroke",symbol:"hyphen"},t),e);FD.props=Object.assign({defaultMarker:"hyphen"},_n.props);const jD=(t,e)=>_n(Object.assign({colorAttribute:"stroke",symbol:"line"},t),e);jD.props=Object.assign({defaultMarker:"line"},_n.props);const GD=(t,e)=>_n(Object.assign({colorAttribute:"stroke",symbol:"tick"},t),e);GD.props=Object.assign({defaultMarker:"tick"},_n.props);const zD=(t,e)=>_n(Object.assign({colorAttribute:"fill",symbol:"triangle-down"},t),e);zD.props=Object.assign({defaultMarker:"triangleDown"},_n.props);const rb=()=>(t,e)=>{const{encode:n}=e,{y:r}=n;return r!==void 0?[t,e]:[t,bt({},e,{encode:{y:qx(Ku(t,0))},scale:{y:{guide:null}}})]};rb.props={};const WD=()=>(t,e)=>{const{encode:n}=e,{size:r}=n;return r!==void 0?[t,e]:[t,bt({},e,{encode:{size:Kx(Ku(t,3))}})]};WD.props={};const YD={hollow:_D,hollowDiamond:wD,hollowHexagon:OD,hollowSquare:ED,hollowTriangleDown:SD,hollowTriangle:MD,hollowBowtie:PD,hollowCircle:AD,point:CD,plus:kD,diamond:ND,square:RD,triangle:LD,hexagon:ID,cross:DD,bowtie:BD,hyphen:FD,line:jD,tick:GD,triangleDown:zD,circle:BM},HD=t=>(e,n,r,i)=>{const{x:o,y:a,x1:s,y1:c,size:l,dx:u,dy:f}=r,[d,h]=i.getSize(),p=hd(n,r,t),v=m=>{const b=+((u==null?void 0:u[m])||0),O=+((f==null?void 0:f[m])||0),E=s?(+o[m]+ +s[m])/2:+o[m],w=c?(+a[m]+ +c[m])/2:+a[m],_=E+b,S=w+O;return[_,S]},y=l?Array.from(e,m=>{const[b,O]=v(m),E=+l[m],w=E/d,_=E/h,S=[b-w,O-_],M=[b+w,O+_];return[i.map(p(S,m)),i.map(p(M,m))]}):Array.from(e,m=>[i.map(p(v(m),m))]);return[e,y]};HD.props={defaultShape:"hollow",defaultLabelShape:"label",composite:!1,shape:YD,channels:[...da({shapes:Object.keys(YD)}),{name:"x",required:!0},{name:"y",required:!0},{name:"series",scale:"band"},{name:"size",quantitative:"sqrt"},{name:"dx",scale:"identity"},{name:"dy",scale:"identity"}],preInference:[...gi(),{type:fd},{type:rb}],postInference:[...Pi(),{type:WD},...Zu()]};const UD=(t,e)=>{const{coordinate:n}=e;return(r,i,o)=>{const{color:a,text:s="",fontSize:c,rotate:l=0,transform:u=""}=i,f={text:String(s),stroke:a,fill:a,fontSize:c},[[d,h]]=r;return Ie(new SI).style("x",d).style("y",h).call(be,o).style("transform",`${u}rotate(${+l})`).style("coordCenter",n.getCenter()).call(be,f).call(be,t).node()}};UD.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var FM=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function vrt(t){const e=t/Math.sqrt(2),n=t*Math.sqrt(2),[r,i]=[-e,e-n],[o,a]=[0,0],[s,c]=[e,e-n];return[["M",r,i],["A",t,t,0,1,1,s,c],["L",o,a],["Z"]]}function grt(t){const{min:e,max:n}=t.getLocalBounds();return[(e[0]+n[0])*.5,(e[1]+n[1])*.5]}const yrt=cp(t=>{const e=t.attributes,{class:n,x:r,y:i,transform:o}=e,a=FM(e,["class","x","y","transform"]),s=Xt(a,"marker"),{size:c=24}=s,l=()=>vrt(c/2),u=Ie(t).maybeAppend("marker",()=>new Hn({})).call(h=>h.node().update(Object.assign({symbol:l},s))).node(),[f,d]=grt(u);Ie(t).maybeAppend("text","text").style("x",f).style("y",d).call(be,a)}),VD=(t,e)=>{const n=FM(t,[]);return(r,i,o)=>{const{color:a}=o,s=FM(o,["color"]),{color:c=a,text:l=""}=i,u={text:String(l),stroke:c,fill:c},[[f,d]]=r;return Ie(new yrt).call(be,s).style("transform",`translate(${f},${d})`).call(be,u).call(be,n).node()}};VD.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const XD=(t,e)=>{const{coordinate:n}=e;return(r,i,o)=>{const{color:a,text:s="",fontSize:c,rotate:l=0,transform:u=""}=i,f={text:String(s),stroke:a,fill:a,fontSize:c,textAlign:"center",textBaseline:"middle"},[[d,h]]=r;return Ie(new Gr).style("x",d).style("y",h).call(be,o).style("transformOrigin","center center").style("transform",`${u}rotate(${l}deg)`).style("coordCenter",n.getCenter()).call(be,f).call(be,t).node()}};XD.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const ib=()=>(t,e)=>{const{data:n}=e;if(!Array.isArray(n)||n.some(fg))return[t,e];const r=Array.isArray(n[0])?n:[n],i=r.map(a=>a[0]),o=r.map(a=>a[1]);return[t,bt({},e,{encode:{x:xr(i),y:xr(o)}})]};ib.props={};var $D=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const ob=()=>(t,e)=>{const{data:n,style:r={}}=e,i=$D(e,["data","style"]),{x:o,y:a}=r,s=$D(r,["x","y"]);if(o==null||a==null)return[t,e];const c=o||0,l=a||0;return[[0],bt({},i,{data:[0],cartesian:!0,encode:{x:xr([c]),y:xr([l])},scale:{x:{type:"identity",independent:!0,guide:null},y:{type:"identity",independent:!0,guide:null}},style:s})]};ob.props={};const qD={text:UD,badge:VD,tag:XD},KD=t=>{const{cartesian:e=!1}=t;return e?TM:(n,r,i,o)=>{const{x:a,y:s}=i,c=hd(r,i,t),l=Array.from(n,u=>{const f=[+a[u],+s[u]];return[o.map(c(f,u))]});return[n,l]}};KD.props={defaultShape:"text",defaultLabelShape:"label",composite:!1,shape:qD,channels:[...da({shapes:Object.keys(qD)}),{name:"x",required:!0},{name:"y",required:!0},{name:"text",scale:"identity"},{name:"fontSize",scale:"identity"},{name:"rotate",scale:"identity"}],preInference:[...gi(),{type:ib},{type:ob}],postInference:[...Pi(),...Zu()]};const jM=()=>(t,e)=>[t,bt({scale:{x:{padding:0},y:{padding:0}}},e)];jM.props={};const ZD={cell:dd,hollow:Zx},JD=()=>(t,e,n,r)=>{const{x:i,y:o}=n,a=e.x,s=e.y,c=Array.from(t,l=>{const u=a.getBandWidth(a.invert(+i[l])),f=s.getBandWidth(s.invert(+o[l])),d=+i[l],h=+o[l],p=[d,h],v=[d+u,h],y=[d+u,h+f],m=[d,h+f];return[p,v,y,m].map(b=>r.map(b))});return[t,c]};JD.props={defaultShape:"cell",defaultLabelShape:"label",shape:ZD,composite:!1,channels:[...da({shapes:Object.keys(ZD)}),{name:"x",required:!0,scale:"band"},{name:"y",required:!0,scale:"band"}],preInference:[...gi(),{type:fd},{type:rb},{type:jM}],postInference:[...Pi(),...Zu()]};function GM(t,e,n){var r=null,i=Ir(!0),o=null,a=K0,s=null,c=WS(l);t=typeof t=="function"?t:t===void 0?OI:Ir(+t),e=typeof e=="function"?e:Ir(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?EI:Ir(+n);function l(f){var d,h,p,v=(f=bI(f)).length,y,m=!1,b,O=new Array(v),E=new Array(v);for(o==null&&(s=a(b=c())),d=0;d<=v;++d){if(!(d<v&&i(y=f[d],d,f))===m)if(m=!m)h=d,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),p=d-1;p>=h;--p)s.point(O[p],E[p]);s.lineEnd(),s.areaEnd()}m&&(O[d]=+t(y,d,f),E[d]=+e(y,d,f),s.point(r?+r(y,d,f):O[d],n?+n(y,d,f):E[d]))}if(b)return s=null,b+""||null}function u(){return ad().defined(i).curve(a).context(o)}return l.x=function(f){return arguments.length?(t=typeof f=="function"?f:Ir(+f),r=null,l):t},l.x0=function(f){return arguments.length?(t=typeof f=="function"?f:Ir(+f),l):t},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Ir(+f),l):r},l.y=function(f){return arguments.length?(e=typeof f=="function"?f:Ir(+f),n=null,l):e},l.y0=function(f){return arguments.length?(e=typeof f=="function"?f:Ir(+f),l):e},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Ir(+f),l):n},l.lineX0=l.lineY0=function(){return u().x(t).y(e)},l.lineY1=function(){return u().x(t).y(n)},l.lineX1=function(){return u().x(r).y(e)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Ir(!!f),l):i},l.curve=function(f){return arguments.length?(a=f,o!=null&&(s=a(o)),l):a},l.context=function(f){return arguments.length?(f==null?o=s=null:s=a(o=f),l):o},l}function mrt(){var t=GM().curve($5),e=t.curve,n=t.lineX0,r=t.lineX1,i=t.lineY0,o=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return pg(n())},delete t.lineX0,t.lineEndAngle=function(){return pg(r())},delete t.lineX1,t.lineInnerRadius=function(){return pg(i())},delete t.lineY0,t.lineOuterRadius=function(){return pg(o())},delete t.lineY1,t.curve=function(a){return arguments.length?e(kM(a)):e()._curve},t}var xrt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function brt(t,e){const n=[],r=[],i=[];let o=!1,a=null;const s=t.length/2;for(let c=0;c<s;c++){const l=t[c],u=t[c+s];if([...l,...u].some(f=>!e(f)))o=!0;else{if(n.push(l),r.push(u),o&&a){o=!1;const[f,d]=a;i.push([f,l,d,u])}a=[l,u]}}return[n.concat(r),i]}const QD=cp(t=>{const{areaPath:e,connectPath:n,areaStyle:r,connectStyle:i}=t.attributes,o=t.ownerDocument;Ie(t).maybeAppend("connect-path",()=>o.createElement("path",{})).style("d",n).call(be,i),Ie(t).maybeAppend("area-path",()=>o.createElement("path",{})).style("d",e).call(be,r)}),hc=(t,e)=>{const{curve:n,gradient:r=!1,defined:i=l=>!Number.isNaN(l)&&l!==void 0&&l!==null,connect:o=!1}=t,a=xrt(t,["curve","gradient","defined","connect"]),{coordinate:s,document:c}=e;return(l,u,f)=>{const{color:d}=f,{color:h=d,seriesColor:p,seriesX:v,seriesY:y}=u,m=Rr(s),b=mI(s,u),O=r&&p?yI(p,v,y,r,void 0,m):h,E=Object.assign(Object.assign(Object.assign(Object.assign({},f),{stroke:O,fill:O}),b&&{transform:b}),a),[w,_]=brt(l,i),S=Xt(E,"connect"),M=!!_.length,T=A=>Ie(c.createElement("path",{})).style("d",A||"").call(be,E).node();if(ar(s)){const A=C=>{const N=s.getCenter(),k=C.slice(0,C.length/2),R=C.slice(C.length/2);return mrt().angle((I,D)=>sp(ci(k[D],N))).outerRadius((I,D)=>Zr(k[D],N)).innerRadius((I,D)=>Zr(R[D],N)).defined((I,D)=>[...k[D],...R[D]].every(i)).curve(n)(R)};return!M||o&&!Object.keys(S).length?T(A(w)):M&&!o?T(A(l)):Ie(new QD).style("areaStyle",E).style("connectStyle",Object.assign(Object.assign({},S),a)).style("areaPath",A(l)).style("connectPath",_.map(A).join("")).node()}else{const A=C=>{const N=C.slice(0,C.length/2),k=C.slice(C.length/2);return m?GM().y((R,I)=>N[I][1]).x1((R,I)=>N[I][0]).x0((R,I)=>k[I][0]).defined((R,I)=>[...N[I],...k[I]].every(i)).curve(n)(N):GM().x((R,I)=>N[I][0]).y1((R,I)=>N[I][1]).y0((R,I)=>k[I][1]).defined((R,I)=>[...N[I],...k[I]].every(i)).curve(n)(N)};return!M||o&&!Object.keys(S).length?T(A(w)):M&&!o?T(A(l)):Ie(new QD).style("areaStyle",E).style("connectStyle",Object.assign(Object.assign({},S),a)).style("areaPath",A(l)).style("connectPath",_.map(A).join("")).node()}}};hc.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const t4=(t,e)=>{const{coordinate:n}=e;return(...r)=>{const i=ar(n)?SM:K0;return hc(Object.assign({curve:i},t),e)(...r)}};t4.props=Object.assign(Object.assign({},hc.props),{defaultMarker:"square"});var _rt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const e4=(t,e)=>{const n=_rt(t,[]),{coordinate:r}=e;return(...i)=>{const o=ar(r)?eD:Rr(r)?cD:sD;return hc(Object.assign({curve:o},n),e)(...i)}};e4.props=Object.assign(Object.assign({},hc.props),{defaultMarker:"smooth"});const n4=(t,e)=>(...n)=>hc(Object.assign({curve:uD},t),e)(...n);n4.props=Object.assign(Object.assign({},hc.props),{defaultMarker:"hvh"});const r4=(t,e)=>(...n)=>hc(Object.assign({curve:fD},t),e)(...n);r4.props=Object.assign(Object.assign({},hc.props),{defaultMarker:"vh"});const i4=(t,e)=>(...n)=>hc(Object.assign({curve:dD},t),e)(...n);i4.props=Object.assign(Object.assign({},hc.props),{defaultMarker:"hv"});const o4={area:t4,smooth:e4,hvh:n4,vh:r4,hv:i4},a4=()=>(t,e,n,r)=>{var i,o;const{x:a,y:s,y1:c,series:l}=n,{x:u,y:f}=e,d=l?Array.from(Nr(t,m=>l[m]).values()):[t],h=d.map(m=>m[0]).filter(m=>m!==void 0),p=(((i=u==null?void 0:u.getBandWidth)===null||i===void 0?void 0:i.call(u))||0)/2,v=(((o=f==null?void 0:f.getBandWidth)===null||o===void 0?void 0:o.call(f))||0)/2,y=Array.from(d,m=>{const b=m.length,O=new Array(b*2);for(let E=0;E<m.length;E++){const w=m[E];O[E]=r.map([+a[w]+p,+s[w]+v]),O[b+E]=r.map([+a[w]+p,+c[w]+v])}return O});return[h,y,d]};a4.props={defaultShape:"area",defaultLabelShape:"label",composite:!1,shape:o4,channels:[...da({shapes:Object.keys(o4)}),{name:"x",required:!0},{name:"y",required:!0},{name:"size"},{name:"series",scale:"band"}],preInference:[...gi(),{type:DM},{type:dg},{type:jM}],postInference:[...Pi(),..._p()],interaction:{shareTooltip:!0,seriesTooltip:!0,crosshairs:!0}};const s4=()=>(t,e)=>{const{encode:n}=e,{y1:r}=n;if(r)return[t,e];const[i]=En(n,"y");return[t,bt({},e,{encode:{y1:xr([...i])}})]};s4.props={};const c4=()=>(t,e)=>{const{encode:n}=e,{x1:r}=n;if(r)return[t,e];const[i]=En(n,"x");return[t,bt({},e,{encode:{x1:xr([...i])}})]};c4.props={};var l4=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const zM=(t,e)=>{const{arrow:n=!0,arrowSize:r="40%"}=t,i=l4(t,["arrow","arrowSize"]),{document:o}=e;return(a,s,c)=>{const{defaultColor:l}=c,u=l4(c,["defaultColor"]),{color:f=l,transform:d}=s,[h,p]=a,v=Ls();if(v.moveTo(...h),v.lineTo(...p),n){const[y,m]=bZ(h,p,{arrowSize:r});v.moveTo(...y),v.lineTo(...p),v.lineTo(...m)}return Ie(o.createElement("path",{})).call(be,u).style("d",v.toString()).style("stroke",f).style("transform",d).call(be,i).node()}};zM.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const u4=(t,e)=>{const{arrow:n=!1}=t;return(...r)=>zM(Object.assign(Object.assign({},t),{arrow:n}),e)(...r)};u4.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var f4=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const d4=(t,e)=>{const n=f4(t,[]),{coordinate:r,document:i}=e;return(o,a,s)=>{const{color:c}=s,l=f4(s,["color"]),{color:u=c,transform:f}=a,[d,h]=o,p=Ls();if(p.moveTo(d[0],d[1]),ar(r)){const v=r.getCenter();p.quadraticCurveTo(v[0],v[1],h[0],h[1])}else{const v=gI(d,h),y=Zr(d,h)/2;q0(p,d,h,v,y)}return Ie(i.createElement("path",{})).call(be,l).style("d",p.toString()).style("stroke",u).style("transform",f).call(be,n).node()}};d4.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var h4=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const p4=(t,e)=>{const n=h4(t,[]),{document:r}=e;return(i,o,a)=>{const{color:s}=a,c=h4(a,["color"]),{color:l=s,transform:u}=o,[f,d]=i,h=Ls();return h.moveTo(f[0],f[1]),h.bezierCurveTo(f[0]/2+d[0]/2,f[1],f[0]/2+d[0]/2,d[1],d[0],d[1]),Ie(r.createElement("path",{})).call(be,c).style("d",h.toString()).style("stroke",l).style("transform",u).call(be,n).node()}};p4.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var v4=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function wrt(t,e,n,r){const i=Ls();if(ar(n)){const o=n.getCenter(),a=Zr(t,o),c=(Zr(e,o)-a)*r+a;return i.moveTo(t[0],t[1]),q0(i,t,e,o,c),i.lineTo(e[0],e[1]),i}return Rr(n)?(i.moveTo(t[0],t[1]),i.lineTo(t[0]+(e[0]-t[0])*r,t[1]),i.lineTo(t[0]+(e[0]-t[0])*r,e[1]),i.lineTo(e[0],e[1]),i):(i.moveTo(t[0],t[1]),i.lineTo(t[0],t[1]+(e[1]-t[1])*r),i.lineTo(e[0],t[1]+(e[1]-t[1])*r),i.lineTo(e[0],e[1]),i)}const g4=(t,e)=>{const{cornerRatio:n=1/3}=t,r=v4(t,["cornerRatio"]),{coordinate:i,document:o}=e;return(a,s,c)=>{const{defaultColor:l}=c,u=v4(c,["defaultColor"]),{color:f=l,transform:d}=s,[h,p]=a,v=wrt(h,p,i,n);return Ie(o.createElement("path",{})).call(be,u).style("d",v.toString()).style("stroke",f).style("transform",d).call(be,r).node()}};g4.props={defaultMarker:"vhv",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const y4={link:u4,arc:d4,smooth:p4,vhv:g4},WM=t=>(e,n,r,i)=>{const{x:o,y:a,x1:s=o,y1:c=a}=r,l=hd(n,r,t),u=e.map(f=>[i.map(l([+o[f],+a[f]],f)),i.map(l([+s[f],+c[f]],f))]);return[e,u]};WM.props={defaultShape:"link",defaultLabelShape:"label",composite:!1,shape:y4,channels:[...da({shapes:Object.keys(y4)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...gi(),{type:s4},{type:c4}],postInference:[...Pi(),...Zu()]};var Ort=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const m4=(t,e)=>{const{coordinate:n,document:r}=e;return(i,o,a)=>{const{color:s}=a,c=Ort(a,["color"]),{color:l=s,src:u="",size:f=32,transform:d=""}=o;let{width:h=f,height:p=f}=t;const[[v,y]]=i,[m,b]=n.getSize();h=typeof h=="string"?tb(h)*m:h,p=typeof p=="string"?tb(p)*b:p;const O=v-Number(h)/2,E=y-Number(p)/2;return Ie(r.createElement("image",{})).call(be,c).style("x",O).style("y",E).style("src",u).style("stroke",l).style("transform",d).call(be,t).style("width",h).style("height",p).node()}};m4.props={defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const x4={image:m4},b4=t=>{const{cartesian:e}=t;return e?TM:(n,r,i,o)=>{const{x:a,y:s}=i,c=hd(r,i,t),l=Array.from(n,u=>{const f=[+a[u],+s[u]];return[o.map(c(f,u))]});return[n,l]}};b4.props={defaultShape:"image",defaultLabelShape:"label",composite:!1,shape:x4,channels:[...da({shapes:Object.keys(x4)}),{name:"x",required:!0},{name:"y",required:!0},{name:"src",scale:"identity"},{name:"size"}],preInference:[...gi(),{type:ib},{type:ob}],postInference:[...Pi(),...Zu()]};var Ert=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Srt(t,e){const n=Ls();if(ar(e)){const r=e.getCenter(),i=[...t,t[0]],o=i.map(a=>Zr(a,r));return i.forEach((a,s)=>{if(s===0){n.moveTo(a[0],a[1]);return}const c=o[s],l=t[s-1],u=o[s-1];u!==void 0&&Math.abs(c-u)<1e-10?q0(n,l,a,r,c):n.lineTo(a[0],a[1])}),n.closePath(),n}return xZ(n,t)}const _4=(t,e)=>{const{coordinate:n,document:r}=e;return(i,o,a)=>{const{color:s}=a,c=Ert(a,["color"]),{color:l=s,transform:u}=o,f=Srt(i,n);return Ie(r.createElement("path",{})).call(be,c).style("d",f.toString()).style("stroke",l).style("fill",l).style("transform",u).call(be,t).node()}};_4.props={defaultMarker:"square",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var w4=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Mrt(t,e){const[n,r,i,o]=t,a=Ls();if(ar(e)){const s=e.getCenter(),c=Zr(s,n);return a.moveTo(n[0],n[1]),a.quadraticCurveTo(s[0],s[1],i[0],i[1]),q0(a,i,o,s,c),a.quadraticCurveTo(s[0],s[1],r[0],r[1]),q0(a,r,n,s,c),a.closePath(),a}return a.moveTo(n[0],n[1]),a.bezierCurveTo(n[0]/2+i[0]/2,n[1],n[0]/2+i[0]/2,i[1],i[0],i[1]),a.lineTo(o[0],o[1]),a.bezierCurveTo(o[0]/2+r[0]/2,o[1],o[0]/2+r[0]/2,r[1],r[0],r[1]),a.lineTo(n[0],n[1]),a.closePath(),a}const O4=(t,e)=>{const n=w4(t,[]),{coordinate:r,document:i}=e;return(o,a,s)=>{const{color:c}=s,l=w4(s,["color"]),{color:u=c,transform:f}=a,d=Mrt(o,r);return Ie(i.createElement("path",{})).call(be,l).style("d",d.toString()).style("fill",u||c).style("stroke",u||c).style("transform",f).call(be,n).node()}};O4.props={defaultMarker:"square",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const E4={polygon:_4,ribbon:O4},S4=()=>(t,e,n,r)=>{const i=Object.entries(n).filter(([s])=>s.startsWith("x")).map(([,s])=>s),o=Object.entries(n).filter(([s])=>s.startsWith("y")).map(([,s])=>s),a=t.map(s=>{const c=[];for(let l=0;l<i.length;l++){const u=i[l][s];if(u===void 0)break;const f=o[l][s];c.push(r.map([+u,+f]))}return c});return[t,a]};S4.props={defaultShape:"polygon",defaultLabelShape:"label",composite:!1,shape:E4,channels:[...da({shapes:Object.keys(E4)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...gi()],postInference:[...Pi(),...Zu()]};var Prt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Trt(t,e){const n=Ls();if(!ar(e))n.moveTo(...t[0]),n.lineTo(...t[1]),n.moveTo(...t[2]),n.lineTo(...t[3]),n.moveTo(...t[4]),n.lineTo(...t[5]),n.lineTo(...t[6]),n.lineTo(...t[7]),n.closePath(),n.moveTo(...t[8]),n.lineTo(...t[9]),n.moveTo(...t[10]),n.lineTo(...t[11]),n.moveTo(...t[12]),n.lineTo(...t[13]);else{const r=e.getCenter(),[i,o]=r,a=Rs(ci(t[0],r)),s=Rs(ci(t[1],r)),c=Zr(r,t[2]),l=Zr(r,t[3]),u=Zr(r,t[8]),f=Zr(r,t[10]),d=Zr(r,t[11]);n.moveTo(...t[0]),n.arc(i,o,c,a,s),n.arc(i,o,c,s,a,!0),n.moveTo(...t[2]),n.lineTo(...t[3]),n.moveTo(...t[4]),n.arc(i,o,l,a,s),n.lineTo(...t[6]),n.arc(i,o,f,s,a,!0),n.closePath(),n.moveTo(...t[8]),n.arc(i,o,u,a,s),n.arc(i,o,u,s,a,!0),n.moveTo(...t[10]),n.lineTo(...t[11]),n.moveTo(...t[12]),n.arc(i,o,d,a,s),n.arc(i,o,d,s,a,!0)}return n}const M4=(t,e)=>{const{coordinate:n,document:r}=e;return(i,o,a)=>{const{color:s,transform:c}=o,{color:l,fill:u=l,stroke:f=l}=a,d=Prt(a,["color","fill","stroke"]),h=Trt(i,n);return Ie(r.createElement("path",{})).call(be,d).style("d",h.toString()).style("stroke",f).style("fill",s||u).style("transform",c).call(be,t).node()}};M4.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var Art=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Crt(t,e,n=4){const r=Ls();if(!ar(e))return r.moveTo(...t[2]),r.lineTo(...t[3]),r.lineTo(t[3][0]-n,t[3][1]),r.lineTo(t[10][0]-n,t[10][1]),r.lineTo(t[10][0]+n,t[10][1]),r.lineTo(t[3][0]+n,t[3][1]),r.lineTo(...t[3]),r.closePath(),r.moveTo(...t[10]),r.lineTo(...t[11]),r.moveTo(t[3][0]+n/2,t[8][1]),r.arc(t[3][0],t[8][1],n/2,0,Math.PI*2),r.closePath(),r;const i=e.getCenter(),[o,a]=i,s=Zr(i,t[3]),c=Zr(i,t[8]),l=Zr(i,t[10]),u=Rs(ci(t[2],i)),f=Math.asin(n/c),d=u-f,h=u+f;r.moveTo(...t[2]),r.lineTo(...t[3]),r.moveTo(Math.cos(d)*s+o,Math.sin(d)*s+a),r.arc(o,a,s,d,h),r.lineTo(Math.cos(h)*l+o,Math.sin(h)*l+a),r.arc(o,a,l,h,d,!0),r.lineTo(Math.cos(d)*s+o,Math.sin(d)*s+a),r.closePath(),r.moveTo(...t[10]),r.lineTo(...t[11]);const p=(d+h)/2;return r.moveTo(Math.cos(p)*(c+n/2)+o,Math.sin(p)*(c+n/2)+a),r.arc(Math.cos(p)*c+o,Math.sin(p)*c+a,n/2,p,Math.PI*2+p),r.closePath(),r}const P4=(t,e)=>{const{coordinate:n,document:r}=e;return(i,o,a)=>{const{color:s,transform:c}=o,l=4,{color:u,fill:f=u,stroke:d=u}=a,h=Art(a,["color","fill","stroke"]),p=Crt(i,n,l);return Ie(r.createElement("path",{})).call(be,h).style("d",p.toString()).style("stroke",d).style("fill",s||f).style("transform",c).call(be,t).node()}};P4.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const T4={box:M4,violin:P4},A4=()=>(t,e,n,r)=>{const{x:i,y:o,y1:a,y2:s,y3:c,y4:l,series:u}=n,f=e.x,d=e.series,h=Array.from(t,p=>{const v=f.getBandWidth(f.invert(+i[p])),y=d?d.getBandWidth(d.invert(+(u==null?void 0:u[p]))):1,m=v*y,b=(+(u==null?void 0:u[p])||0)*v,O=+i[p]+b+m/2,[E,w,_,S,M]=[+o[p],+a[p],+s[p],+c[p],+l[p]];return[[O-m/2,M],[O+m/2,M],[O,M],[O,S],[O-m/2,S],[O+m/2,S],[O+m/2,w],[O-m/2,w],[O-m/2,_],[O+m/2,_],[O,w],[O,E],[O-m/2,E],[O+m/2,E]].map(A=>r.map(A))});return[t,h]};A4.props={defaultShape:"box",defaultLabelShape:"label",composite:!1,shape:T4,channels:[...da({shapes:Object.keys(T4)}),{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"series",scale:"band"}],preInference:[...gi(),{type:fd}],postInference:[...Pi(),..._p()],interaction:{shareTooltip:!0}};const C4={vector:zM},k4=()=>(t,e,n,r)=>{const{x:i,y:o,size:a,rotate:s}=n,[c,l]=r.getSize(),u=t.map(f=>{const d=+s[f]/180*Math.PI,h=+a[f],p=h/c,v=h/l,y=p*Math.cos(d),m=-v*Math.sin(d);return[r.map([+i[f]-y/2,+o[f]-m/2]),r.map([+i[f]+y/2,+o[f]+m/2])]});return[t,u]};k4.props={defaultShape:"vector",defaultLabelShape:"label",composite:!1,shape:C4,channels:[...da({shapes:Object.keys(C4)}),{name:"x",required:!0},{name:"y",required:!0},{name:"rotate",required:!0,scale:"identity"},{name:"size",required:!0}],preInference:[...gi()],postInference:[...Pi(),...Zu()]};var N4=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function krt(t,e,n){return t.createElement("path",{style:Object.assign({d:`M ${e},${e} L -${e},0 L ${e},-${e} L 0,0 Z`,transformOrigin:"center"},n)})}function Nrt(t,e){if(!ar(e))return ad().x(r=>r[0]).y(r=>r[1])(t);const n=e.getCenter();return Cx()({startAngle:0,endAngle:Math.PI*2,outerRadius:Zr(t[0],n),innerRadius:Zr(t[1],n)})}function Rrt(t,e){if(!ar(t))return e;const[n,r]=t.getCenter();return`translate(${n}, ${r}) ${e||""}`}const YM=(t,e)=>{const{arrow:n,arrowSize:r=4}=t,i=N4(t,["arrow","arrowSize"]),{coordinate:o,document:a}=e;return(s,c,l)=>{const{color:u,lineWidth:f}=l,d=N4(l,["color","lineWidth"]),{color:h=u,size:p=f}=c,v=n?krt(a,r,Object.assign({fill:i.stroke||h,stroke:i.stroke||h},Xt(i,"arrow"))):null,y=Nrt(s,o),m=Rrt(o,c.transform);return Ie(a.createElement("path",{})).call(be,d).style("d",y).style("stroke",h).style("lineWidth",p).style("transform",m).style("markerEnd",v).call(be,i).node()}};YM.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const R4=()=>(t,e)=>{const{data:n}=e;return!Array.isArray(n)||n.some(fg)?[t,e]:[t,bt({},e,{encode:{x:xr(n)}})]};R4.props={};const L4={line:YM},I4=t=>(e,n,r,i)=>{const{x:o}=r,a=hd(n,r,bt({style:{bandOffset:0}},t)),s=Array.from(e,c=>{const l=[o[c],1],u=[o[c],0];return[l,u].map(f=>i.map(a(f,c)))});return[e,s]};I4.props={defaultShape:"line",defaultLabelShape:"label",composite:!1,shape:L4,channels:[...wp({shapes:Object.keys(L4)}),{name:"x",required:!0}],preInference:[...gi(),{type:R4}],postInference:[...Pi()]};const D4=()=>(t,e)=>{const{data:n}=e;return!Array.isArray(n)||n.some(fg)?[t,e]:[t,bt({},e,{encode:{y:xr(n)}})]};D4.props={};const B4={line:YM},F4=t=>(e,n,r,i)=>{const{y:o}=r,a=hd(n,r,bt({style:{bandOffset:0}},t)),s=Array.from(e,c=>{const l=[0,o[c]],u=[1,o[c]];return[l,u].map(f=>i.map(a(f,c)))});return[e,s]};F4.props={defaultShape:"line",defaultLabelShape:"label",composite:!1,shape:B4,channels:[...wp({shapes:Object.keys(B4)}),{name:"y",required:!0}],preInference:[...gi(),{type:D4}],postInference:[...Pi()]};var j4=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Lrt(t,e,n){return[["M",t,e],["L",t+2*n,e-n],["L",t+2*n,e+n],["Z"]]}function Irt(t){return ad().x(e=>e[0]).y(e=>e[1])(t)}function Drt(t,e,n,r,i=0){const[[o,a],[s,c]]=e;if(Rr(t)){const d=o+n,h=s+r,p=d+i;return[[d,a],[p,a],[p,c],[h,c]]}const l=a-n,u=c-r,f=l-i;return[[o,l],[o,f],[s,f],[s,u]]}const G4=(t,e)=>{const{offset:n=0,offset1:r=n,offset2:i=n,connectLength1:o,endMarker:a=!0}=t,s=j4(t,["offset","offset1","offset2","connectLength1","endMarker"]),{coordinate:c}=e;return(l,u,f)=>{const{color:d,connectLength1:h}=f,p=j4(f,["color","connectLength1"]),{color:v,transform:y}=u,m=Drt(c,l,r,i,o!=null?o:h),b=Xt(Object.assign(Object.assign({},s),f),"endMarker");return Ie(new ke).call(be,p).style("d",Irt(m)).style("stroke",v||d).style("transform",y).style("markerEnd",a?new Hn({className:"marker",style:Object.assign(Object.assign({},b),{symbol:Lrt})}):null).call(be,s).node()}};G4.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const z4={connector:G4},W4=(...t)=>WM(...t);W4.props={defaultShape:"connector",defaultLabelShape:"label",composite:!1,shape:z4,channels:[...wp({shapes:Object.keys(z4)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...gi()],postInference:[...Pi()]};function Y4(t,e,n,r){if(e)return()=>[0,1];const{[t]:i,[`${t}1`]:o}=n;return a=>{var s;const c=((s=r.getBandWidth)===null||s===void 0?void 0:s.call(r,r.invert(+o[a])))||0;return[i[a],o[a]+c]}}function HM(t={}){const{extendX:e=!1,extendY:n=!1}=t;return(r,i,o,a)=>{const s=Y4("x",e,o,i.x),c=Y4("y",n,o,i.y),l=Array.from(r,u=>{const[f,d]=s(u),[h,p]=c(u);return[[f,h],[d,h],[d,p],[f,p]].map(O=>a.map(O))});return[r,l]}}const H4={range:dd},U4=()=>HM();U4.props={defaultShape:"range",defaultLabelShape:"label",composite:!1,shape:H4,channels:[...wp({shapes:Object.keys(H4)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...gi()],postInference:[...Pi()]};const V4=()=>(t,e)=>{const{data:n}=e;if(Array.isArray(n)&&(n.every(Array.isArray)||!n.some(fg))){const r=(i,o)=>Array.isArray(i[0])?i.map(a=>a[o]):[i[o]];return[t,bt({},e,{encode:{x:xr(r(n,0)),x1:xr(r(n,1))}})]}return[t,e]};V4.props={};const X4={range:dd},$4=()=>HM({extendY:!0});$4.props={defaultShape:"range",defaultLabelShape:"label",composite:!1,shape:X4,channels:[...wp({shapes:Object.keys(X4)}),{name:"x",required:!0}],preInference:[...gi(),{type:V4}],postInference:[...Pi()]};const q4=()=>(t,e)=>{const{data:n}=e;if(Array.isArray(n)&&(n.every(Array.isArray)||!n.some(fg))){const r=(i,o)=>Array.isArray(i[0])?i.map(a=>a[o]):[i[o]];return[t,bt({},e,{encode:{y:xr(r(n,0)),y1:xr(r(n,1))}})]}return[t,e]};q4.props={};const K4={range:dd},Z4=()=>HM({extendX:!0});Z4.props={defaultShape:"range",defaultLabelShape:"label",composite:!1,shape:K4,channels:[...wp({shapes:Object.keys(K4)}),{name:"y",required:!0}],preInference:[...gi(),{type:q4}],postInference:[...Pi()]};var J4=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const UM=(t,e)=>{const{arrow:n,colorAttribute:r}=t,i=J4(t,["arrow","colorAttribute"]),{coordinate:o,document:a}=e;return(s,c,l)=>{const{color:u,stroke:f}=l,d=J4(l,["color","stroke"]),{d:h,color:p=u}=c,[v,y]=o.getSize();return Ie(a.createElement("path",{})).call(be,d).style("d",typeof h=="function"?h({width:v,height:y}):h).style(r,p).call(be,i).node()}};UM.props={defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const Q4=(t,e)=>UM(Object.assign({colorAttribute:"fill"},t),e);Q4.props={defaultMarker:"hvh",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const tB=(t,e)=>UM(Object.assign({fill:"none",colorAttribute:"stroke"},t),e);tB.props={defaultMarker:"hvh",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const eB={path:Q4,hollow:tB},nB=t=>(e,n,r,i)=>[e,e.map(()=>[[0,0]])];nB.props={defaultShape:"path",defaultLabelShape:"label",shape:eB,composite:!1,channels:[...da({shapes:Object.keys(eB)}),{name:"d",scale:"identity"}],preInference:[...gi()],postInference:[...Pi()]};var Brt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const rB=(t,e)=>{const{render:n}=t,r=Brt(t,["render"]);return i=>{const[[o,a]]=i;return n(Object.assign(Object.assign({},r),{x:o,y:a}),e)}};rB.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const iB=()=>(t,e)=>{const{style:n={}}=e;return[t,bt({},e,{style:Object.assign(Object.assign({},n),Object.fromEntries(Object.entries(n).filter(([,r])=>typeof r=="function").map(([r,i])=>[r,()=>i])))})]};iB.props={};const Frt={shape:rB},oB=t=>{const{cartesian:e}=t;return e?TM:(n,r,i,o)=>{const{x:a,y:s}=i,c=hd(r,i,t),l=Array.from(n,u=>{const f=[+a[u],+s[u]];return[o.map(c(f,u))]});return[n,l]}};oB.props={defaultShape:"shape",defaultLabelShape:"label",composite:!1,shape:Frt,channels:[{name:"x",required:!0},{name:"y",required:!0}],preInference:[...gi(),{type:ib},{type:ob},{type:iB}]};var jrt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const aB=(t,e)=>{const{document:n}=e;return(r,i,o)=>{const{transform:a}=i,{color:s}=o,c=jrt(o,["color"]),{color:l=s}=i,[u,...f]=r,d=Ls();return d.moveTo(...u),f.forEach(([h,p])=>{d.lineTo(h,p)}),d.closePath(),Ie(n.createElement("path",{})).call(be,c).style("d",d.toString()).style("stroke",l||s).style("fill",l||s).style("fillOpacity",.4).style("transform",a).call(be,t).node()}};aB.props={defaultMarker:"square",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const sB={density:aB},cB=()=>(t,e,n,r)=>{const{x:i,series:o}=n,a=Object.entries(n).filter(([f])=>f.startsWith("y")).map(([,f])=>f),s=Object.entries(n).filter(([f])=>f.startsWith("size")).map(([,f])=>f);if(i===void 0||a===void 0||s===void 0)throw new Error("Missing encode for x or y or size channel.");const c=e.x,l=e.series,u=Array.from(t,f=>{const d=c.getBandWidth(c.invert(+i[f])),h=l?l.getBandWidth(l.invert(+(o==null?void 0:o[f]))):1,p=d*h,v=(+(o==null?void 0:o[f])||0)*d,y=+i[f]+v+p/2;return[...a.map((b,O)=>[y+ +s[O][f]/t.length,+a[O][f]]),...a.map((b,O)=>[y-+s[O][f]/t.length,+a[O][f]]).reverse()].map(b=>r.map(b))});return[t,u]};cB.props={defaultShape:"density",defaultLabelShape:"label",composite:!1,shape:sB,channels:[...da({shapes:Object.keys(sB)}),{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"size",required:!0},{name:"series",scale:"band"},{name:"size",required:!0,scale:"identity"}],preInference:[...gi(),{type:dg},{type:fd}],postInference:[...Pi(),..._p()],interaction:{shareTooltip:!0}};function lB(t){var e,n,r,i=t||1;function o(s,c){++e>i&&(r=n,a(1),++e),n[s]=c}function a(s){e=0,n=Object.create(null),s||(r=Object.create(null))}return a(),{clear:a,has:function(s){return n[s]!==void 0||r[s]!==void 0},get:function(s){var c=n[s];if(c!==void 0)return c;if((c=r[s])!==void 0)return o(s,c),c},set:function(s,c){n[s]!==void 0?n[s]=c:o(s,c)}}}const jgt=lB(3);function Grt(t,e=(...r)=>`${r[0]}`,n=16){const r=lB(n);return(...i)=>{const o=e(...i);let a=r.get(o);return r.has(o)?r.get(o):(a=t(...i),r.set(o,a),a)}}function zrt(t){return typeof t=="string"?t.split(" ").map(e=>{const[n,r]=e.split(":");return[+n,r]}):t}function ab(t,e,n){const r=t?t():document.createElement("canvas");return r.width=e,r.height=n,r}const Wrt=Grt((t,e,n)=>{const r=ab(n,t*2,t*2),i=r.getContext("2d"),o=t,a=t;if(e===1)i.beginPath(),i.arc(o,a,t,0,2*Math.PI,!1),i.fillStyle="rgba(0,0,0,1)",i.fill();else{const s=i.createRadialGradient(o,a,t*e,o,a,t);s.addColorStop(0,"rgba(0,0,0,1)"),s.addColorStop(1,"rgba(0,0,0,0)"),i.fillStyle=s,i.fillRect(0,0,2*t,2*t)}return r},t=>`${t}`);function Yrt(t,e){const r=ab(e,256,1).getContext("2d"),i=r.createLinearGradient(0,0,256,1);return zrt(t).forEach(([o,a])=>{i.addColorStop(o,a)}),r.fillStyle=i,r.fillRect(0,0,256,1),r.getImageData(0,0,256,1).data}function Hrt(t,e,n,r,i,o){const{blur:a}=i;let s=r.length;for(;s--;){const{x:c,y:l,value:u,radius:f}=r[s],d=Math.min(u,n),h=c-f,p=l-f,v=Wrt(f,1-a,o),y=(d-e)/(n-e);t.globalAlpha=Math.max(y,.001),t.drawImage(v,h,p)}return t}function Urt(t,e,n,r,i){const{minOpacity:o,opacity:a,maxOpacity:s,useGradientOpacity:c}=i,l=0,u=0,f=e,d=n,h=t.getImageData(l,u,f,d),p=h.data,v=p.length;for(let y=3;y<v;y+=4){const m=p[y],b=m*4;if(!b)continue;const O=a||Math.max(0,Math.min(s,Math.max(o,m)));p[y-3]=r[b],p[y-2]=r[b+1],p[y-1]=r[b+2],p[y]=c?r[b+3]:O}return h}function Vrt(t,e,n,r,i,o,a){const s=Object.assign({blur:.85,minOpacity:0,opacity:.6,maxOpacity:1,gradient:[[.25,"rgb(0,0,255)"],[.55,"rgb(0,255,0)"],[.85,"yellow"],[1,"rgb(255,0,0)"]]},o);s.minOpacity*=255,s.opacity*=255,s.maxOpacity*=255;const l=ab(a,t,e).getContext("2d"),u=Yrt(s.gradient,a);l.clearRect(0,0,t,e),Hrt(l,n,r,i,s,a);const f=Urt(l,t,e,u,s),h=ab(a,t,e).getContext("2d");return h.putImageData(f,0,0),h}var Xrt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function $rt(t,e){return Object.keys(t).reduce((n,r)=>{const i=t[r];return e(i,r)||(n[r]=i),n},{})}const uB=(t,e)=>{const{gradient:n,opacity:r,maxOpacity:i,minOpacity:o,blur:a,useGradientOpacity:s}=t,c=Xrt(t,["gradient","opacity","maxOpacity","minOpacity","blur","useGradientOpacity"]),{coordinate:l,createCanvas:u,document:f}=e;return(d,h,p)=>{const{transform:v}=h,[y,m]=l.getSize(),b=d.map(S=>({x:S[0],y:S[1],value:S[2],radius:S[3]})),O=ls(d,S=>S[2]),E=Qn(d,S=>S[2]),_=y&&m?Vrt(y,m,O,E,b,$rt({gradient:n,opacity:r,minOpacity:o,maxOpacity:i,blur:a,useGradientOpacity:s},S=>S===void 0),u):{canvas:null};return Ie(f.createElement("image",{})).call(be,p).style("x",0).style("y",0).style("width",y).style("height",m).style("src",_.canvas).style("transform",v).call(be,c).node()}};uB.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const fB={heatmap:uB},dB=t=>(e,n,r,i)=>{const{x:o,y:a,size:s,color:c}=r,l=Array.from(e,u=>{const f=s?+s[u]:40;return[...i.map([+o[u],+a[u]]),c[u],f]});return[[0],[l]]};dB.props={defaultShape:"heatmap",defaultLabelShape:"label",composite:!1,shape:fB,channels:[...da({shapes:Object.keys(fB)}),{name:"x",required:!0},{name:"y",required:!0},{name:"color",scale:"identity",required:!0},{name:"size"}],preInference:[...gi(),{type:fd},{type:rb}],postInference:[...Pi(),...Zu()]};var qrt=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(u){try{l(r.next(u))}catch(f){a(f)}}function c(u){try{l(r.throw(u))}catch(f){a(f)}}function l(u){u.done?o(u.value):i(u.value).then(s,c)}l((r=r.apply(t,e||[])).next())})},Krt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Zrt(t,e){const{text:n="text",value:r="value"}=e;return t.map(i=>Object.assign(Object.assign({},i),{text:i[n],value:i[r]}))}const Jrt=()=>({axis:!1,type:"text",encode:{x:"x",y:"y",text:"text",rotate:"rotate",fontSize:"size",shape:"tag"},scale:{x:{range:[0,1]},y:{range:[0,1]}},style:{fontFamily:t=>t.fontFamily}}),VM=(t,e)=>qrt(void 0,void 0,void 0,function*(){const{width:n,height:r}=e,{data:i,encode:o={},scale:a,style:s={},layout:c={}}=t,l=Krt(t,["data","encode","scale","style","layout"]),u=Zrt(i,o);return bt({},Jrt(),Object.assign(Object.assign({data:{value:u,transform:[Object.assign({type:"wordCloud",size:[n,r]},c)]},encode:o,scale:a,style:s},l),{axis:!1}))});VM.props={};const hB=()=>["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#6F5EF9","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"];hB.props={};const pB=()=>["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#6F5EF9","#D3CEFD","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"];pB.props={};const vB=t=>new $o(t);vB.props={};const sb=Symbol("defaultUnknown");function gB(t,e,n){for(let r=0;r<e.length;r+=1)t.has(e[r])||t.set(n(e[r]),r)}function yB(t){const{value:e,from:n,to:r,mapper:i,notFoundReturn:o}=t;let a=i.get(e);if(a===void 0){if(o!==sb)return o;a=n.push(e)-1,i.set(e,a)}return r[a%r.length]}function mB(t){return t instanceof Date?e=>`${e}`:typeof t=="object"?e=>JSON.stringify(e):e=>e}class cb extends z0{getDefaultOptions(){return{domain:[],range:[],unknown:sb}}constructor(e){super(e)}map(e){return this.domainIndexMap.size===0&&gB(this.domainIndexMap,this.getDomain(),this.domainKey),yB({value:this.domainKey(e),mapper:this.domainIndexMap,from:this.getDomain(),to:this.getRange(),notFoundReturn:this.options.unknown})}invert(e){return this.rangeIndexMap.size===0&&gB(this.rangeIndexMap,this.getRange(),this.rangeKey),yB({value:this.rangeKey(e),mapper:this.rangeIndexMap,from:this.getRange(),to:this.getDomain(),notFoundReturn:this.options.unknown})}rescale(e){const[n]=this.options.domain,[r]=this.options.range;if(this.domainKey=mB(n),this.rangeKey=mB(r),!this.rangeIndexMap){this.rangeIndexMap=new Map,this.domainIndexMap=new Map;return}(!e||e.range)&&this.rangeIndexMap.clear(),(!e||e.domain||e.compare)&&(this.domainIndexMap.clear(),this.sortedDomain=void 0)}clone(){return new cb(this.options)}getRange(){return this.options.range}getDomain(){if(this.sortedDomain)return this.sortedDomain;const{domain:e,compare:n}=this.options;return this.sortedDomain=n?[...e].sort(n):e,this.sortedDomain}}const xB=t=>new cb(t);xB.props={};function bB({map:t,initKey:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Qrt({map:t,initKey:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function tit({map:t,initKey:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function eit(t){return typeof t=="object"?t.valueOf():t}class _B extends Map{constructor(e){if(super(),this.map=new Map,this.initKey=eit,e!==null)for(const[n,r]of e)this.set(n,r)}get(e){return super.get(bB({map:this.map,initKey:this.initKey},e))}has(e){return super.has(bB({map:this.map,initKey:this.initKey},e))}set(e,n){return super.set(Qrt({map:this.map,initKey:this.initKey},e),n)}delete(e){return super.delete(tit({map:this.map,initKey:this.initKey},e))}}function nit(t){const e=Math.min(...t);return t.map(n=>n/e)}function rit(t,e){const n=t.length,r=e-n;return r>0?[...t,...new Array(r).fill(1)]:r<0?t.slice(0,e):t}function iit(t){return Math.round(t*1e12)/1e12}function oit(t){const{domain:e,range:n,paddingOuter:r,paddingInner:i,flex:o,round:a,align:s}=t,c=e.length,l=rit(o,c),[u,f]=n,d=f-u,h=2/c*r+1-1/c*i,p=d/h,v=p*i/c,y=p-c*v,m=nit(l),b=m.reduce((N,k)=>N+k),O=y/b,E=new _B(e.map((N,k)=>{const R=m[k]*O;return[N,a?Math.floor(R):R]})),w=new _B(e.map((N,k)=>{const I=m[k]*O+v;return[N,a?Math.floor(I):I]})),_=Array.from(w.values()).reduce((N,k)=>N+k),M=(d-(_-_/c*i))*s,T=u+M;let A=a?Math.round(T):T;const C=new Array(c);for(let N=0;N<c;N+=1){C[N]=iit(A);const k=e[N];A+=w.get(k)}return{valueBandWidth:E,valueStep:w,adjustedRange:C}}function ait(t){var e;const{domain:n}=t,r=n.length;if(r===0)return{valueBandWidth:void 0,valueStep:void 0,adjustedRange:[]};if(!!(!((e=t.flex)===null||e===void 0)&&e.length))return oit(t);const{range:o,paddingOuter:a,paddingInner:s,round:c,align:l}=t;let u,f,d=o[0];const p=o[1]-d,v=a*2,y=r-s;u=p/Math.max(1,v+y),c&&(u=Math.floor(u)),d+=(p-u*(r-s))*l,f=u*(1-s),c&&(d=Math.round(d),f=Math.round(f));const m=new Array(r).fill(0).map((b,O)=>d+O*u);return{valueStep:u,valueBandWidth:f,adjustedRange:m}}class Ju extends cb{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,paddingInner:0,paddingOuter:0,padding:0,unknown:sb,flex:[]}}constructor(e){super(e)}clone(){return new Ju(this.options)}getStep(e){return this.valueStep===void 0?1:typeof this.valueStep=="number"?this.valueStep:e===void 0?Array.from(this.valueStep.values())[0]:this.valueStep.get(e)}getBandWidth(e){return this.valueBandWidth===void 0?1:typeof this.valueBandWidth=="number"?this.valueBandWidth:e===void 0?Array.from(this.valueBandWidth.values())[0]:this.valueBandWidth.get(e)}getRange(){return this.adjustedRange}getPaddingInner(){const{padding:e,paddingInner:n}=this.options;return e>0?e:n}getPaddingOuter(){const{padding:e,paddingOuter:n}=this.options;return e>0?e:n}rescale(){super.rescale();const{align:e,domain:n,range:r,round:i,flex:o}=this.options,{adjustedRange:a,valueBandWidth:s,valueStep:c}=ait({align:e,range:r,round:i,flex:o,paddingInner:this.getPaddingInner(),paddingOuter:this.getPaddingOuter(),domain:n});this.valueStep=c,this.valueBandWidth=s,this.adjustedRange=a}}const wB=t=>new Ju(t);wB.props={};class lb extends z0{getDefaultOptions(){return{domain:[0,1],range:[0,1],tickCount:5,unknown:void 0,tickMethod:NS}}map(e){return hx(e)?e:this.options.unknown}invert(e){return this.map(e)}clone(){return new lb(this.options)}getTicks(){const{domain:e,tickCount:n,tickMethod:r}=this.options,[i,o]=e;return!Je(i)||!Je(o)?[]:r(i,o,n)}}const OB=t=>new lb(t);OB.props={};class XM extends Ju{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,padding:0,unknown:sb,paddingInner:1,paddingOuter:0}}constructor(e){super(e)}getPaddingInner(){return 1}clone(){return new XM(this.options)}update(e){super.update(e)}getPaddingOuter(){return this.options.padding}}const EB=t=>new XM(t);EB.props={};var SB=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,Qu="\\d\\d?",tf="\\d\\d",sit="\\d{3}",cit="\\d{4}",vg="[^\\s]+",MB=/\[([^]*?)\]/gm;function PB(t,e){for(var n=[],r=0,i=t.length;r<i;r++)n.push(t[r].substr(0,e));return n}var TB=function(t){return function(e,n){var r=n[t].map(function(o){return o.toLowerCase()}),i=r.indexOf(e.toLowerCase());return i>-1?i:null}};function pd(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];for(var a in o)t[a]=o[a]}return t}var AB=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],CB=["January","February","March","April","May","June","July","August","September","October","November","December"],lit=PB(CB,3),uit=PB(AB,3),kB={dayNamesShort:uit,dayNames:AB,monthNamesShort:lit,monthNames:CB,amPm:["am","pm"],DoFn:function(t){return t+["th","st","nd","rd"][t%10>3?0:(t-t%10!==10?1:0)*t%10]}},ub=pd({},kB),fit=function(t){return ub=pd(ub,t)},NB=function(t){return t.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},ja=function(t,e){for(e===void 0&&(e=2),t=String(t);t.length<e;)t="0"+t;return t},dit={D:function(t){return String(t.getDate())},DD:function(t){return ja(t.getDate())},Do:function(t,e){return e.DoFn(t.getDate())},d:function(t){return String(t.getDay())},dd:function(t){return ja(t.getDay())},ddd:function(t,e){return e.dayNamesShort[t.getDay()]},dddd:function(t,e){return e.dayNames[t.getDay()]},M:function(t){return String(t.getMonth()+1)},MM:function(t){return ja(t.getMonth()+1)},MMM:function(t,e){return e.monthNamesShort[t.getMonth()]},MMMM:function(t,e){return e.monthNames[t.getMonth()]},YY:function(t){return ja(String(t.getFullYear()),4).substr(2)},YYYY:function(t){return ja(t.getFullYear(),4)},h:function(t){return String(t.getHours()%12||12)},hh:function(t){return ja(t.getHours()%12||12)},H:function(t){return String(t.getHours())},HH:function(t){return ja(t.getHours())},m:function(t){return String(t.getMinutes())},mm:function(t){return ja(t.getMinutes())},s:function(t){return String(t.getSeconds())},ss:function(t){return ja(t.getSeconds())},S:function(t){return String(Math.round(t.getMilliseconds()/100))},SS:function(t){return ja(Math.round(t.getMilliseconds()/10),2)},SSS:function(t){return ja(t.getMilliseconds(),3)},a:function(t,e){return t.getHours()<12?e.amPm[0]:e.amPm[1]},A:function(t,e){return t.getHours()<12?e.amPm[0].toUpperCase():e.amPm[1].toUpperCase()},ZZ:function(t){var e=t.getTimezoneOffset();return(e>0?"-":"+")+ja(Math.floor(Math.abs(e)/60)*100+Math.abs(e)%60,4)},Z:function(t){var e=t.getTimezoneOffset();return(e>0?"-":"+")+ja(Math.floor(Math.abs(e)/60),2)+":"+ja(Math.abs(e)%60,2)}},RB=function(t){return+t-1},LB=[null,Qu],IB=[null,vg],DB=["isPm",vg,function(t,e){var n=t.toLowerCase();return n===e.amPm[0]?0:n===e.amPm[1]?1:null}],BB=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(t){var e=(t+"").match(/([+-]|\d\d)/gi);if(e){var n=+e[1]*60+parseInt(e[2],10);return e[0]==="+"?n:-n}return 0}],hit={D:["day",Qu],DD:["day",tf],Do:["day",Qu+vg,function(t){return parseInt(t,10)}],M:["month",Qu,RB],MM:["month",tf,RB],YY:["year",tf,function(t){var e=new Date,n=+(""+e.getFullYear()).substr(0,2);return+(""+(+t>68?n-1:n)+t)}],h:["hour",Qu,void 0,"isPm"],hh:["hour",tf,void 0,"isPm"],H:["hour",Qu],HH:["hour",tf],m:["minute",Qu],mm:["minute",tf],s:["second",Qu],ss:["second",tf],YYYY:["year",cit],S:["millisecond","\\d",function(t){return+t*100}],SS:["millisecond",tf,function(t){return+t*10}],SSS:["millisecond",sit],d:LB,dd:LB,ddd:IB,dddd:IB,MMM:["month",vg,TB("monthNamesShort")],MMMM:["month",vg,TB("monthNames")],a:DB,A:DB,ZZ:BB,Z:BB},fb={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},pit=function(t){return pd(fb,t)},FB=function(t,e,n){if(e===void 0&&(e=fb.default),n===void 0&&(n={}),typeof t=="number"&&(t=new Date(t)),Object.prototype.toString.call(t)!=="[object Date]"||isNaN(t.getTime()))throw new Error("Invalid Date pass to format");e=fb[e]||e;var r=[];e=e.replace(MB,function(o,a){return r.push(a),"@@@"});var i=pd(pd({},ub),n);return e=e.replace(SB,function(o){return dit[o](t,i)}),e.replace(/@@@/g,function(){return r.shift()})};function vit(t,e,n){if(n===void 0&&(n={}),typeof e!="string")throw new Error("Invalid format in fecha parse");if(e=fb[e]||e,t.length>1e3)return null;var r=new Date,i={year:r.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},o=[],a=[],s=e.replace(MB,function(E,w){return a.push(NB(w)),"@@@"}),c={},l={};s=NB(s).replace(SB,function(E){var w=hit[E],_=w[0],S=w[1],M=w[3];if(c[_])throw new Error("Invalid format. "+_+" specified twice in format");return c[_]=!0,M&&(l[M]=!0),o.push(w),"("+S+")"}),Object.keys(l).forEach(function(E){if(!c[E])throw new Error("Invalid format. "+E+" is required in specified format")}),s=s.replace(/@@@/g,function(){return a.shift()});var u=t.match(new RegExp(s,"i"));if(!u)return null;for(var f=pd(pd({},ub),n),d=1;d<u.length;d++){var h=o[d-1],p=h[0],v=h[2],y=v?v(u[d],f):+u[d];if(y==null)return null;i[p]=y}i.isPm===1&&i.hour!=null&&+i.hour!=12?i.hour=+i.hour+12:i.isPm===0&&+i.hour==12&&(i.hour=0);var m;if(i.timezoneOffset==null){m=new Date(i.year,i.month,i.day,i.hour,i.minute,i.second,i.millisecond);for(var b=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],d=0,O=b.length;d<O;d++)if(c[b[d][0]]&&i[b[d][0]]!==m[b[d][1]]())return null}else if(m=new Date(Date.UTC(i.year,i.month,i.day,i.hour,i.minute-i.timezoneOffset,i.second,i.millisecond)),i.month>11||i.month<0||i.day>31||i.day<1||i.hour>23||i.hour<0||i.minute>59||i.minute<0||i.second>59||i.second<0)return null;return m}var Ggt={format:FB,parse:vit,defaultI18n:kB,setGlobalDateI18n:fit,setGlobalDateMasks:pit},zgt=null;const gg=1e3,yg=gg*60,mg=yg*60,vd=mg*24,xg=vd*7,jB=vd*30,GB=vd*365;function Zo(t,e,n,r){const i=(l,u)=>{const f=h=>r(h)%u===0;let d=u;for(;d&&!f(l);)n(l,-1),d-=1;return l},o=(l,u)=>{u&&i(l,u),e(l)},a=(l,u)=>{const f=new Date(+l);return o(f,u),f},s=(l,u)=>{const f=new Date(+l-1);return o(f,u),n(f,u),o(f),f};return{ceil:s,floor:a,range:(l,u,f,d)=>{const h=[],p=Math.floor(f),v=d?s(l,f):s(l);for(let y=v;y<u;n(y,p),o(y))h.push(new Date(+y));return h},duration:t}}const git=Zo(1,t=>t,(t,e=1)=>{t.setTime(+t+e)},t=>t.getTime()),yit=Zo(gg,t=>{t.setMilliseconds(0)},(t,e=1)=>{t.setTime(+t+gg*e)},t=>t.getSeconds()),mit=Zo(yg,t=>{t.setSeconds(0,0)},(t,e=1)=>{t.setTime(+t+yg*e)},t=>t.getMinutes()),xit=Zo(mg,t=>{t.setMinutes(0,0,0)},(t,e=1)=>{t.setTime(+t+mg*e)},t=>t.getHours()),bit=Zo(vd,t=>{t.setHours(0,0,0,0)},(t,e=1)=>{t.setTime(+t+vd*e)},t=>t.getDate()-1),zB=Zo(jB,t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e=1)=>{const n=t.getMonth();t.setMonth(n+e)},t=>t.getMonth()),_it=Zo(xg,t=>{t.setDate(t.getDate()-t.getDay()%7),t.setHours(0,0,0,0)},(t,e=1)=>{t.setDate(t.getDate()+7*e)},t=>{const e=zB.floor(t),n=new Date(+t);return Math.floor((+n-+e)/xg)}),wit=Zo(GB,t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e=1)=>{const n=t.getFullYear();t.setFullYear(n+e)},t=>t.getFullYear()),WB={millisecond:git,second:yit,minute:mit,hour:xit,day:bit,week:_it,month:zB,year:wit},Oit=Zo(1,t=>t,(t,e=1)=>{t.setTime(+t+e)},t=>t.getTime()),Eit=Zo(gg,t=>{t.setUTCMilliseconds(0)},(t,e=1)=>{t.setTime(+t+gg*e)},t=>t.getUTCSeconds()),Sit=Zo(yg,t=>{t.setUTCSeconds(0,0)},(t,e=1)=>{t.setTime(+t+yg*e)},t=>t.getUTCMinutes()),Mit=Zo(mg,t=>{t.setUTCMinutes(0,0,0)},(t,e=1)=>{t.setTime(+t+mg*e)},t=>t.getUTCHours()),Pit=Zo(vd,t=>{t.setUTCHours(0,0,0,0)},(t,e=1)=>{t.setTime(+t+vd*e)},t=>t.getUTCDate()-1),YB=Zo(jB,t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e=1)=>{const n=t.getUTCMonth();t.setUTCMonth(n+e)},t=>t.getUTCMonth()),Tit=Zo(xg,t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7)%7),t.setUTCHours(0,0,0,0)},(t,e=1)=>{t.setTime(+t+xg*e)},t=>{const e=YB.floor(t),n=new Date(+t);return Math.floor((+n-+e)/xg)}),Ait=Zo(GB,t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e=1)=>{const n=t.getUTCFullYear();t.setUTCFullYear(n+e)},t=>t.getUTCFullYear()),HB={millisecond:Oit,second:Eit,minute:Sit,hour:Mit,day:Pit,week:Tit,month:YB,year:Ait};function Cit(t){const e=t?HB:WB,{year:n,month:r,week:i,day:o,hour:a,minute:s,second:c,millisecond:l}=e;return{tickIntervals:[[c,1],[c,5],[c,15],[c,30],[s,1],[s,5],[s,15],[s,30],[a,1],[a,3],[a,6],[a,12],[o,1],[o,2],[i,1],[r,1],[r,3],[n,1]],year:n,millisecond:l}}function UB(t,e,n,r,i){const o=+t,a=+e,{tickIntervals:s,year:c,millisecond:l}=Cit(i),u=([y,m])=>y.duration*m,f=r?(a-o)/r:n||5,d=r||(a-o)/f,h=s.length,p=ES(s,d,0,h,u);let v;if(p===h){const y=RL(o/c.duration,a/c.duration,f);v=[c,y]}else if(p){const y=d/u(s[p-1])<u(s[p])/d,[m,b]=y?s[p-1]:s[p],O=r?Math.ceil(r/m.duration):b;v=[m,O]}else{const y=Math.max(RL(o,a,f),1);v=[l,y]}return v}const kit=(t,e,n,r,i)=>{const o=t>e,a=o?e:t,s=o?t:e,[c,l]=UB(a,s,n,r,i),u=c.range(a,new Date(+s+1),l,!0);return o?u.reverse():u},Nit=(t,e,n,r,i)=>{const o=t>e,a=o?e:t,s=o?t:e,[c,l]=UB(a,s,n,r,i),u=[c.floor(a,l),c.ceil(s,l)];return o?u.reverse():u};function Rit(t,e){const{second:n,minute:r,hour:i,day:o,week:a,month:s,year:c}=e;return n.floor(t)<t?".SSS":r.floor(t)<t?":ss":i.floor(t)<t?"hh:mm":o.floor(t)<t?"hh A":s.floor(t)<t?a.floor(t)<t?"MMM DD":"ddd DD":c.floor(t)<t?"MMMM":"YYYY"}function Lit(t){const e=t.getTimezoneOffset(),n=new Date(t);return n.setMinutes(n.getMinutes()+e,n.getSeconds(),n.getMilliseconds()),n}class $M extends vx{getDefaultOptions(){return{domain:[new Date(2e3,0,1),new Date(2e3,0,2)],range:[0,1],nice:!1,tickCount:5,tickInterval:void 0,unknown:void 0,clamp:!1,tickMethod:kit,interpolate:op,mask:void 0,utc:!1}}chooseTransforms(){return[r=>+r,r=>new Date(r)]}chooseNice(){return Nit}getTickMethodOptions(){const{domain:e,tickCount:n,tickInterval:r,utc:i}=this.options,o=e[0],a=e[e.length-1];return[o,a,n,r,i]}getFormatter(){const{mask:e,utc:n}=this.options,r=n?HB:WB,i=n?Lit:ed;return o=>FB(i(o),e||Rit(o,r))}clone(){return new $M(this.options)}}const VB=t=>new $M(t);VB.props={};const XB=t=>e=>-t(-e),qM=(t,e)=>{const n=Math.log(t),r=t===Math.E?Math.log:t===10?Math.log10:t===2?Math.log2:i=>Math.log(i)/n;return e?XB(r):r},KM=(t,e)=>{const n=t===Math.E?Math.exp:r=>ki(t,r);return e?XB(n):n},Iit=(t,e,n,r=10)=>{const i=t<0,o=KM(r,i),a=qM(r,i),s=e<t,c=s?e:t,l=s?t:e;let u=a(c),f=a(l),d=[];if(!(r%1)&&f-u<n){if(u=Math.floor(u),f=Math.ceil(f),i)for(;u<=f;u+=1){const h=o(u);for(let p=r-1;p>=1;p-=1){const v=h*p;if(v>l)break;v>=c&&d.push(v)}}else for(;u<=f;u+=1){const h=o(u);for(let p=1;p<r;p+=1){const v=h*p;if(v>l)break;v>=c&&d.push(v)}}d.length*2<n&&(d=nd(c,l,n))}else{const h=n===-1?f-u:Math.min(f-u,n);d=nd(u,f,h).map(o)}return s?d.reverse():d},Dit=(t,e,n,r)=>{const i=t<0,o=qM(r,i),a=KM(r,i),s=t>e,c=s?e:t,l=s?t:e,u=[a(Math.floor(o(c))),a(Math.ceil(o(l)))];return s?u.reverse():u};class ZM extends vx{getDefaultOptions(){return{domain:[1,10],range:[0,1],base:10,interpolate:W0,tickMethod:Iit,tickCount:5}}chooseNice(){return Dit}getTickMethodOptions(){const{domain:e,tickCount:n,base:r}=this.options,i=e[0],o=e[e.length-1];return[i,o,n,r]}chooseTransforms(){const{base:e,domain:n}=this.options,r=n[0]<0;return[qM(e,r),KM(e,r)]}clone(){return new ZM(this.options)}}const $B=t=>new ZM(t);$B.props={};const Bit=t=>e=>e<0?-ki(-e,t):ki(e,t),Fit=t=>e=>e<0?-ki(-e,1/t):ki(e,1/t),jit=t=>t<0?-Math.sqrt(-t):Math.sqrt(t);class db extends vx{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,exponent:2,interpolate:W0,tickMethod:nd,tickCount:5}}constructor(e){super(e)}chooseTransforms(){const{exponent:e}=this.options;if(e===1)return[ed,ed];const n=e===.5?jit:Bit(e),r=Fit(e);return[n,r]}clone(){return new db(this.options)}}const qB=t=>new db(t);qB.props={};class JM extends db{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:W0,tickMethod:nd,tickCount:5,exponent:.5}}constructor(e){super(e)}update(e){super.update(e)}clone(){return new JM(this.options)}}const KB=t=>new JM(t);KB.props={};const ZB=t=>new ap(t);ZB.props={};const JB=t=>new _x(t);JB.props={};const QB=t=>new bx(t);QB.props={};const Git=t=>e=>{const n=t(e);return Je(n)?Math.round(n):n};function zit(t,e){return n=>{n.prototype.rescale=function(){this.initRange(),this.nice();const[r]=this.chooseTransforms();this.composeOutput(r,this.chooseClamp(r))},n.prototype.initRange=function(){const{interpolator:r}=this.options;this.options.range=t(r)},n.prototype.composeOutput=function(r,i){const{domain:o,interpolator:a,round:s}=this.getOptions(),c=e(o.map(r)),l=s?Git(a):a;this.output=ip(l,c,i,r)},n.prototype.invert=void 0}}var Wit=function(t,e,n,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(o=(i<3?a(o):i>3?a(e,n,o):a(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o},QM;function Yit(t){return[t(0),t(1)]}const Hit=t=>{const[e,n]=t;return ip(op(0,1),dx(e,n))};let tP=QM=class extends $o{getDefaultOptions(){return{domain:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolator:ed,tickMethod:nd,tickCount:5}}constructor(e){super(e)}clone(){return new QM(this.options)}};tP=QM=Wit([zit(Yit,Hit)],tP);const tF=t=>new tP(t);tF.props={};const eF=t=>new U0(t);eF.props={};function eP({colorDefault:t,colorBlack:e,colorWhite:n,colorStroke:r,colorBackground:i,padding1:o,padding2:a,padding3:s,alpha90:c,alpha65:l,alpha45:u,alpha25:f,alpha10:d,category10:h,category20:p,sizeDefault:v=1,padding:y="auto",margin:m=16}){return{padding:y,margin:m,size:v,color:t,category10:h,category20:p,enter:{duration:300,fill:"both",delay:0},update:{duration:300,fill:"both",delay:0},exit:{duration:300,fill:"both",delay:0},view:{viewFill:i,plotFill:"transparent",mainFill:"transparent",contentFill:"transparent"},line:{line:{fill:"",strokeOpacity:1,lineWidth:1,lineCap:"round"}},point:{point:{r:3,fillOpacity:.95,lineWidth:0},hollow:{r:3,strokeOpacity:.95,lineWidth:1},plus:{r:3,strokeOpacity:.95,lineWidth:3},diamond:{r:3,strokeOpacity:.95,lineWidth:1}},interval:{rect:{fillOpacity:.95},hollow:{fill:"",strokeOpacity:1,lineWidth:2}},area:{area:{fillOpacity:.85,lineWidth:0}},polygon:{polygon:{fillOpacity:.95}},cell:{cell:{fillOpacity:.95},hollow:{fill:"",strokeOpacity:1,lineWidth:2}},rect:{rect:{fillOpacity:.95},hollow:{fill:"",strokeOpacity:1,lineWidth:2}},link:{link:{fill:"",strokeOpacity:1}},vector:{vector:{fillOpacity:1}},box:{box:{fillOpacity:.95,stroke:e,lineWidth:1}},text:{text:{fill:"#1D2129",fontSize:12,lineWidth:0,connectorStroke:r,connectorStrokeOpacity:.45,connectorLineWidth:1,backgroundFill:r,backgroundFillOpacity:.15,backgroundPadding:[2,4],startMarkerSymbol:"circle",startMarkerSize:4,endMarkerSymbol:"circle",endMarkerSize:4},badge:{fill:"#1D2129",fillOpacity:.65,lineWidth:0,fontSize:10,textAlign:"center",textBaseline:"middle",markerFill:r,markerFillOpacity:.25,markerStrokeOpacity:0}},lineX:{line:{stroke:r,strokeOpacity:.45,lineWidth:1}},lineY:{line:{stroke:r,strokeOpacity:.45,lineWidth:1}},rangeX:{range:{fill:r,fillOpacity:.15,lineWidth:0}},rangeY:{range:{fill:r,fillOpacity:.15,lineWidth:0}},connector:{connector:{stroke:r,strokeOpacity:.45,lineWidth:1,connectLength1:12,endMarker:!0,endMarkerSize:6,endMarkerFill:r,endMarkerFillOpacity:.95}},axis:{arrow:!1,gridLineDash:[3,4],gridLineWidth:.5,gridStroke:e,gridStrokeOpacity:d,labelAlign:"horizontal",labelFill:e,labelOpacity:u,labelFontSize:12,labelFontWeight:"normal",labelSpacing:o,line:!1,lineLineWidth:.5,lineStroke:e,lineStrokeOpacity:u,tickLength:4,tickLineWidth:1,tickStroke:e,tickOpacity:u,titleFill:e,titleOpacity:c,titleFontSize:12,titleFontWeight:"normal",titleSpacing:12,titleTransformOrigin:"center",lineArrowOffset:6,lineArrowSize:6},axisTop:{gridDirection:"positive",labelDirection:"negative",tickDirection:"negative",titlePosition:"top",titleSpacing:12,labelSpacing:4,titleTextBaseline:"middle"},axisBottom:{gridDirection:"negative",labelDirection:"positive",tickDirection:"positive",titlePosition:"bottom",titleSpacing:12,labelSpacing:4,titleTextBaseline:"bottom",titleTransform:"translate(0, 8)"},axisLeft:{gridDirection:"positive",labelDirection:"negative",labelSpacing:4,tickDirection:"negative",titlePosition:"left",titleSpacing:12,titleTextBaseline:"middle",titleDirection:"vertical",titleTransform:"rotate(-90) translate(0, -8)",titleTransformOrigin:"center"},axisRight:{gridDirection:"negative",labelDirection:"positive",labelSpacing:4,tickDirection:"positive",titlePosition:"right",titleSpacing:12,titleTextBaseline:"top",titleDirection:"vertical",titleTransformOrigin:"center"},axisLinear:{girdClosed:!0,gridConnect:"arc",gridDirection:"negative",gridType:"surround",titlePosition:"top",titleSpacing:0},axisArc:{title:!1,titlePosition:"inner",line:!1,tick:!0,labelSpacing:4},axisRadar:{girdClosed:!0,gridStrokeOpacity:.3,gridType:"surround",label:!1,tick:!1,titlePosition:"start"},legendCategory:{backgroundFill:"transparent",itemBackgroundFill:"transparent",itemLabelFill:e,itemLabelFillOpacity:c,itemLabelFontSize:12,itemLabelFontWeight:"normal",itemMarkerFillOpacity:1,itemMarkerSize:8,itemSpacing:[o,o],itemValueFill:e,itemValueFillOpacity:.65,itemValueFontSize:12,itemValueFontWeight:"normal",navButtonFill:e,navButtonFillOpacity:.65,navPageNumFill:e,navPageNumFillOpacity:.45,navPageNumFontSize:12,padding:8,title:!1,titleFill:e,titleFillOpacity:.65,titleFontSize:12,titleFontWeight:"normal",titleSpacing:4,tickStroke:e,tickStrokeOpacity:.25,rowPadding:o,colPadding:a,maxRows:3,maxCols:3},legendContinuous:{handleHeight:12,handleLabelFill:e,handleLabelFillOpacity:u,handleLabelFontSize:12,handleLabelFontWeight:"normal",handleMarkerFill:e,handleMarkerFillOpacity:.6,handleMarkerLineWidth:1,handleMarkerStroke:e,handleMarkerStrokeOpacity:.25,handleWidth:10,labelFill:e,labelFillOpacity:u,labelFontSize:12,labelFontWeight:"normal",labelSpacing:3,tick:!0,tickLength:12,ribbonSize:12,ribbonFill:"#aaa",handle:!0,handleLabel:!1,handleShape:"slider",handleIconSize:12/1.8,indicator:!1,titleFontSize:12,titleSpacing:4,titleFontWeight:"normal",titleFillOpacity:c,tickStroke:e,tickStrokeOpacity:u},label:{fill:e,fillOpacity:.65,fontSize:12,fontWeight:"normal",stroke:void 0,offset:12,connectorStroke:e,connectorStrokeOpacity:.45,connectorLineWidth:1,connectorLength:12,connectorLength2:8,connectorDistance:4},innerLabel:{fill:n,fontSize:12,fillOpacity:.85,fontWeight:"normal",stroke:void 0,offset:0},htmlLabel:{fontSize:12,opacity:.65,color:e,fontWeight:"normal"},slider:{trackSize:16,trackFill:r,trackFillOpacity:1,selectionFill:t,selectionFillOpacity:.15,handleIconSize:10,handleIconFill:"#f7f7f7",handleIconFillOpacity:1,handleIconStroke:e,handleIconStrokeOpacity:.25,handleIconLineWidth:1,handleIconRadius:2,handleLabelFill:e,handleLabelFillOpacity:.45,handleLabelFontSize:12,handleLabelFontWeight:"normal"},scrollbar:{padding:[0,0,0,0],trackSize:6,isRound:!0,slidable:!0,scrollable:!0,trackFill:"#e5e5e5",trackFillOpacity:0,thumbFill:"#000",thumbFillOpacity:.15,thumbHighlightedFillOpacity:.2},title:{spacing:8,titleFill:e,titleFillOpacity:c,titleFontSize:16,titleFontWeight:"bold",titleTextBaseline:"top",subtitleFill:e,subtitleFillOpacity:l,subtitleFontSize:12,subtitleFontWeight:"normal",subtitleTextBaseline:"top"},tooltip:{css:{".g2-tooltip":{"font-family":"sans-serif"}}}}}const Uit=eP({colorBlack:"#1D2129",colorWhite:"#ffffff",colorStroke:"#416180",colorDefault:"#1783FF",colorBackground:"transparent",category10:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F"],category20:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F","#AABA01","#BC7CFC","#237CBC","#2DE379","#CE8032","#FF7AF4","#545FD3","#AFE410","#D8C608","#FFA1E0"],padding1:8,padding2:12,padding3:20,alpha90:.9,alpha65:.65,alpha45:.45,alpha25:.25,alpha10:.1}),nP=t=>bt({},Uit,t);nP.props={};const nF=t=>bt({},nP(),{category10:"category10",category20:"category20"},t);nF.props={};const Vit=eP({colorBlack:"#fff",colorWhite:"#000",colorStroke:"#416180",colorDefault:"#1783FF",colorBackground:"transparent",category10:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F"],category20:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F","#AABA01","#BC7CFC","#237CBC","#2DE379","#CE8032","#FF7AF4","#545FD3","#AFE410","#D8C608","#FFA1E0"],padding1:8,padding2:12,padding3:20,alpha90:.9,alpha65:.65,alpha45:.45,alpha25:.25,alpha10:.25}),rF=t=>bt({},Vit,{tooltip:{crosshairsStroke:"#fff",crosshairsLineWidth:1,crosshairsStrokeOpacity:.25,css:{".g2-tooltip":{background:"#1f1f1f",opacity:.95},".g2-tooltip-title":{color:"#A6A6A6"},".g2-tooltip-list-item-name-label":{color:"#A6A6A6"},".g2-tooltip-list-item-value":{color:"#A6A6A6"}}}},t),iF=t=>Object.assign({},rF(),{category10:"category10",category20:"category20"},t);iF.props={};const Xit=eP({colorBlack:"#000",colorWhite:"#fff",colorStroke:"#888",colorDefault:"#4e79a7",colorBackground:"transparent",category10:["#4e79a7","#f28e2c","#e15759","#76b7b2","#59a14f","#edc949","#af7aa1","#ff9da7","#9c755f","#bab0ab"],category20:["#4e79a7","#f28e2c","#e15759","#76b7b2","#59a14f","#edc949","#af7aa1","#ff9da7","#9c755f","#bab0ab"],padding1:8,padding2:12,padding3:20,alpha90:.9,alpha65:.65,alpha45:.45,alpha25:.25,alpha10:.1}),oF=t=>bt({},Xit,{text:{text:{fontSize:10}},axis:{gridLineDash:[0,0],gridLineWidth:1,gridStroke:"#ddd",gridStrokeOpacity:1,labelOpacity:1,labelStrokeOpacity:1,labelFontSize:10,line:!0,lineLineWidth:1,lineStroke:"#888",lineStrokeOpacity:1,tickLength:5,tickStrokeOpacity:1,titleOpacity:1,titleStrokeOpacity:1,titleFillOpacity:1,titleFontSize:11,titleFontWeight:"bold"},axisLeft:{gridFilter:(e,n)=>n!==0},axisRight:{gridFilter:(e,n)=>n!==0},legendCategory:{itemLabelFillOpacity:1,itemLabelFontSize:10,itemValueFillOpacity:1,itemValueFontSize:10,titleFillOpacity:1,titleFontSize:11,titleFontWeight:"bold"},legendContinuous:{handleLabelFontSize:10,labelFillOpacity:.45,labelFontSize:10},label:{fontSize:10},innerLabel:{fontSize:10},htmlLabel:{fontSize:10},slider:{handleLabelFontSize:10,trackFillOpacity:.05}},t);oF.props={};const aF=t=>(...e)=>{const n=zu(Object.assign({},{crossPadding:50},t))(...e);return YL(n,t),n};aF.props=Object.assign(Object.assign({},zu.props),{defaultPosition:"bottom"});function Ugt(){}const sF=t=>(...e)=>{const n=zu(Object.assign({},{crossPadding:10},t))(...e);return YL(n,t),n};sF.props=Object.assign(Object.assign({},zu.props),{defaultPosition:"left"});var rP=function(){},$it=function(t,e,n){var r=t,i=Qe(e)?e.split("."):e;return i.forEach(function(o,a){a<i.length-1?(Yi(r[o])||(r[o]=Je(i[a+1])?[]:{}),r=r[o]):r[o]=n}),t};function qit(t,e){return t.reduce(function(n,r){return(n[r[e]]=n[r[e]]||[]).push(r),n},{})}function Kit(t){var e;return((e=t[0])===null||e===void 0?void 0:e.map(function(n,r){return t.map(function(i){return i[r]})}))||[]}var Ds=ks({prevBtnGroup:"prev-btn-group",prevBtn:"prev-btn",nextBtnGroup:"next-btn-group",nextBtn:"next-btn",pageInfoGroup:"page-info-group",pageInfo:"page-info",playWindow:"play-window",contentGroup:"content-group",controller:"controller",clipPath:"clip-path"},"navigator"),Zit=function(t){xt(e,t);function e(n){var r=t.call(this,n,{x:0,y:0,animate:{easing:"linear",duration:200,fill:"both"},buttonCursor:"pointer",buttonFill:"black",buttonD:MK(0,0,6),buttonSize:12,controllerPadding:5,controllerSpacing:5,formatter:function(i,o){return"".concat(i,"/").concat(o)},defaultPage:0,loop:!1,orientation:"horizontal",pageNumFill:"black",pageNumFontSize:12,pageNumTextAlign:"start",pageNumTextBaseline:"middle"})||this;return r.playState="idle",r.contentGroup=r.appendChild(new Mt({class:Ds.contentGroup.name})),r.playWindow=r.contentGroup.appendChild(new Mt({class:Ds.playWindow.name})),r.innerCurrPage=r.defaultPage,r}return Object.defineProperty(e.prototype,"defaultPage",{get:function(){var n=this.attributes.defaultPage;return Nn(n,0,Math.max(this.pageViews.length-1,0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageViews",{get:function(){return this.playWindow.children},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"controllerShape",{get:function(){return this.totalPages>1?{width:55,height:0}:{width:0,height:0}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageShape",{get:function(){var n=this.pageViews,r=j(Kit(n.map(function(f){var d=f.getBBox(),h=d.width,p=d.height;return[h,p]})).map(function(f){return Math.max.apply(Math,ut([],j(f),!1))}),2),i=r[0],o=r[1],a=this.attributes,s=a.pageWidth,c=s===void 0?i:s,l=a.pageHeight,u=l===void 0?o:l;return{pageWidth:c,pageHeight:u}},enumerable:!1,configurable:!0}),e.prototype.getContainer=function(){return this.playWindow},Object.defineProperty(e.prototype,"totalPages",{get:function(){return this.pageViews.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currPage",{get:function(){return this.innerCurrPage},enumerable:!1,configurable:!0}),e.prototype.getBBox=function(){var n=t.prototype.getBBox.call(this),r=n.x,i=n.y,o=this.controllerShape,a=this.pageShape,s=a.pageWidth,c=a.pageHeight;return new Lr(r,i,s+o.width,c)},e.prototype.goTo=function(n){var r=this,i=this.attributes.animate,o=this,a=o.currPage,s=o.playState,c=o.playWindow,l=o.pageViews;if(s!=="idle"||n<0||l.length<=0||n>=l.length)return null;l[a].setLocalPosition(0,0),this.prepareFollowingPage(n);var u=j(this.getFollowingPageDiff(n),2),f=u[0],d=u[1];this.playState="running";var h=qR(c,[{transform:"translate(0, 0)"},{transform:"translate(".concat(-f,", ").concat(-d,")")}],i);return ep(h,function(){r.innerCurrPage=n,r.playState="idle",r.setVisiblePages([n]),r.updatePageInfo()}),h},e.prototype.prev=function(){var n=this.attributes.loop,r=this.pageViews.length,i=this.currPage;if(!n&&i<=0)return null;var o=n?(i-1+r)%r:Nn(i-1,0,r);return this.goTo(o)},e.prototype.next=function(){var n=this.attributes.loop,r=this.pageViews.length,i=this.currPage;if(!n&&i>=r-1)return null;var o=n?(i+1)%r:Nn(i+1,0,r);return this.goTo(o)},e.prototype.renderClipPath=function(n){var r=this.pageShape,i=r.pageWidth,o=r.pageHeight;if(!i||!o){this.contentGroup.style.clipPath=void 0;return}this.clipPath=n.maybeAppendByClassName(Ds.clipPath,"rect").styles({width:i,height:o}),this.contentGroup.attr("clipPath",this.clipPath.node())},e.prototype.setVisiblePages=function(n){this.playWindow.children.forEach(function(r,i){n.includes(i)?I0(r):Gu(r)})},e.prototype.adjustControllerLayout=function(){var n=this,r=n.prevBtnGroup,i=n.nextBtnGroup,o=n.pageInfoGroup,a=this.attributes,s=a.orientation,c=a.controllerPadding,l=o.getBBox(),u=l.width,f=l.height,d=j(s==="horizontal"?[-180,0]:[-90,90],2),h=d[0],p=d[1];r.setLocalEulerAngles(h),i.setLocalEulerAngles(p);var v=r.getBBox(),y=v.width,m=v.height,b=i.getBBox(),O=b.width,E=b.height,w=Math.max(y,u,O),_=s==="horizontal"?{offset:[[0,0],[y/2+c,0],[y+u+c*2,0]],textAlign:"start"}:{offset:[[w/2,-m-c],[w/2,0],[w/2,E+c]],textAlign:"center"},S=j(_.offset,3),M=j(S[0],2),T=M[0],A=M[1],C=j(S[1],2),N=C[0],k=C[1],R=j(S[2],2),I=R[0],D=R[1],B=_.textAlign,F=o.querySelector("text");F&&(F.style.textAlign=B),r.setLocalPosition(T,A),o.setLocalPosition(N,k),i.setLocalPosition(I,D)},e.prototype.updatePageInfo=function(){var n,r=this,i=r.currPage,o=r.pageViews,a=r.attributes.formatter;o.length<2||((n=this.pageInfoGroup.querySelector(Ds.pageInfo.class))===null||n===void 0||n.attr("text",a(i+1,o.length)),this.adjustControllerLayout())},e.prototype.getFollowingPageDiff=function(n){var r=this.currPage;if(r===n)return[0,0];var i=this.attributes.orientation,o=this.pageShape,a=o.pageWidth,s=o.pageHeight,c=n<r?-1:1;return i==="horizontal"?[c*a,0]:[0,c*s]},e.prototype.prepareFollowingPage=function(n){var r=this,i=r.currPage,o=r.pageViews;if(this.setVisiblePages([n,i]),n!==i){var a=j(this.getFollowingPageDiff(n),2),s=a[0],c=a[1];o[n].setLocalPosition(s,c)}},e.prototype.renderController=function(n){var r=this,i=this.attributes.controllerSpacing,o=this.pageShape,a=o.pageWidth,s=o.pageHeight,c=this.pageViews.length>=2,l=n.maybeAppendByClassName(Ds.controller,"g");if(rx(l.node(),c),!!c){var u=gn(this.attributes,"button"),f=gn(this.attributes,"pageNum"),d=j(zl(u),2),h=d[0],p=d[1],v=h.size,y=Ge(h,["size"]),m=!l.select(Ds.prevBtnGroup.class).node(),b=l.maybeAppendByClassName(Ds.prevBtnGroup,"g").styles(p);this.prevBtnGroup=b.node();var O=b.maybeAppendByClassName(Ds.prevBtn,"path"),E=l.maybeAppendByClassName(Ds.nextBtnGroup,"g").styles(p);this.nextBtnGroup=E.node();var w=E.maybeAppendByClassName(Ds.nextBtn,"path");[O,w].forEach(function(S){S.styles(nt(nt({},y),{transformOrigin:"center"})),pS(S.node(),v,!0)});var _=l.maybeAppendByClassName(Ds.pageInfoGroup,"g");this.pageInfoGroup=_.node(),_.maybeAppendByClassName(Ds.pageInfo,"text").styles(f),this.updatePageInfo(),l.node().setLocalPosition(a+i,s/2),m&&(this.prevBtnGroup.addEventListener("click",function(){r.prev()}),this.nextBtnGroup.addEventListener("click",function(){r.next()}))}},e.prototype.render=function(n,r){var i=n.x,o=i===void 0?0:i,a=n.y,s=a===void 0?0:a;this.attr("transform","translate(".concat(o,", ").concat(s,")"));var c=Ke(r);this.renderClipPath(c),this.renderController(c),this.setVisiblePages([this.defaultPage]),this.goTo(this.defaultPage)},e.prototype.bindEvents=function(){var n=this,r=mR(function(){return n.render(n.attributes,n)},50);this.playWindow.addEventListener(He.INSERTED,r),this.playWindow.addEventListener(He.REMOVED,r)},e}(oo),us=ks({layout:"flex",markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label",valueGroup:"value-group",value:"value",backgroundGroup:"background-group",background:"background"},"legend-category-item");function Jit(t){var e=t.querySelector(us.marker.class);return e?e.style:{}}var Qit=function(t){xt(e,t);function e(n){return t.call(this,n,{span:[1,1],marker:function(){return new st({style:{r:6}})},markerSize:10,labelFill:"#646464",valueFill:"#646464",labelFontSize:12,valueFontSize:12,labelTextBaseline:"middle",valueTextBaseline:"middle"})||this}return Object.defineProperty(e.prototype,"showValue",{get:function(){var n=this.attributes.valueText;return n?typeof n=="string"||typeof n=="number"?n!=="":typeof n=="function"?!0:n.attr("text")!=="":!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"actualSpace",{get:function(){var n=this.labelGroup,r=this.valueGroup,i=this.attributes.markerSize,o=n.node().getBBox(),a=o.width,s=o.height,c=r.node().getBBox(),l=c.width,u=c.height;return{markerWidth:i,labelWidth:a,valueWidth:l,height:Math.max(i,s,u)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"span",{get:function(){var n=this.attributes.span;if(!n)return[1,1];var r=j(Po(n),2),i=r[0],o=r[1],a=this.showValue?o:0,s=i+a;return[i/s,a/s]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shape",{get:function(){var n,r=this.attributes,i=r.markerSize,o=r.width,a=this.actualSpace,s=a.markerWidth,c=a.height,l=this.actualSpace,u=l.labelWidth,f=l.valueWidth,d=j(this.spacing,2),h=d[0],p=d[1];if(o){var v=o-i-h-p,y=j(this.span,2),m=y[0],b=y[1];n=j([m*v,b*v],2),u=n[0],f=n[1]}var O=s+u+f+h+p;return{width:O,height:c,markerWidth:s,labelWidth:u,valueWidth:f}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"spacing",{get:function(){var n=this.attributes.spacing;if(!n)return[0,0];var r=j(Po(n),2),i=r[0],o=r[1];return this.showValue?[i,o]:[i,0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"layout",{get:function(){var n=this.shape,r=n.markerWidth,i=n.labelWidth,o=n.valueWidth,a=n.width,s=n.height,c=j(this.spacing,2),l=c[0],u=c[1];return{height:s,width:a,markerWidth:r,labelWidth:i,valueWidth:o,position:[r/2,r+l,r+i+l+u]}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleSize",{get:function(){var n=Jit(this.markerGroup.node()),r=this.attributes,i=r.markerSize,o=r.markerStrokeWidth,a=o===void 0?n.strokeWidth:o,s=r.markerLineWidth,c=s===void 0?n.lineWidth:s,l=r.markerStroke,u=l===void 0?n.stroke:l,f=+(a||c||(u?1:0))*Math.sqrt(2),d=this.markerGroup.node().getBBox(),h=d.width,p=d.height;return(1-f/Math.max(h,p))*i},enumerable:!1,configurable:!0}),e.prototype.renderMarker=function(n){var r=this,i=this.attributes.marker,o=gn(this.attributes,"marker");this.markerGroup=n.maybeAppendByClassName(us.markerGroup,"g").style("zIndex",0),Ba(!!i,this.markerGroup,function(){var a,s=r.markerGroup.node(),c=(a=s.childNodes)===null||a===void 0?void 0:a[0],l=typeof i=="string"?new Hn({style:{symbol:i},className:us.marker.name}):i();c?l.nodeName===c.nodeName?c instanceof Hn?c.update(nt(nt({},o),{symbol:i})):(K$(c,l),Ke(c).styles(o)):(c.remove(),Ke(l).attr("className",us.marker.name).styles(o),s.appendChild(l)):(l instanceof Hn||Ke(l).attr("className",us.marker.name).styles(o),s.appendChild(l)),r.markerGroup.node().scale(1/r.markerGroup.node().getScale()[0]);var u=pS(r.markerGroup.node(),r.scaleSize,!0);r.markerGroup.node().style._transform="scale(".concat(u,")")})},e.prototype.renderLabel=function(n){var r=gn(this.attributes,"label"),i=r.text,o=Ge(r,["text"]);this.labelGroup=n.maybeAppendByClassName(us.labelGroup,"g").style("zIndex",0),this.labelGroup.maybeAppendByClassName(us.label,function(){return td(i)}).styles(o)},e.prototype.renderValue=function(n){var r=this,i=gn(this.attributes,"value"),o=i.text,a=Ge(i,["text"]);this.valueGroup=n.maybeAppendByClassName(us.valueGroup,"g").style("zIndex",0),Ba(this.showValue,this.valueGroup,function(){r.valueGroup.maybeAppendByClassName(us.value,function(){return td(o)}).styles(a)})},e.prototype.renderBackground=function(n){var r=this.shape,i=r.width,o=r.height,a=gn(this.attributes,"background");this.background=n.maybeAppendByClassName(us.backgroundGroup,"g").style("zIndex",-1),this.background.maybeAppendByClassName(us.background,"rect").styles(nt({width:i,height:o},a))},e.prototype.adjustLayout=function(){var n=this.layout,r=n.labelWidth,i=n.valueWidth,o=n.height,a=j(n.position,3),s=a[0],c=a[1],l=a[2],u=o/2;this.markerGroup.styles({transform:"translate(".concat(s,", ").concat(u,")").concat(this.markerGroup.node().style._transform)}),this.labelGroup.styles({transform:"translate(".concat(c,", ").concat(u,")")}),xS(this.labelGroup.select(us.label.class).node(),Math.ceil(r)),this.showValue&&(this.valueGroup.styles({transform:"translate(".concat(l,", ").concat(u,")")}),xS(this.valueGroup.select(us.value.class).node(),Math.ceil(i)))},e.prototype.render=function(n,r){var i=Ke(r),o=n.x,a=o===void 0?0:o,s=n.y,c=s===void 0?0:s;i.styles({transform:"translate(".concat(a,", ").concat(c,")")}),this.renderMarker(i),this.renderLabel(i),this.renderValue(i),this.renderBackground(i),this.adjustLayout()},e}(oo),gd=ks({page:"item-page",navigator:"navigator",item:"item"},"items"),cF=function(t,e,n){return n===void 0&&(n=!0),t?e(t):n},tot=function(t){xt(e,t);function e(n){var r=t.call(this,n,{data:[],gridRow:1/0,gridCol:void 0,padding:0,width:1e3,height:100,rowPadding:0,colPadding:0,layout:"flex",orientation:"horizontal",click:rP,mouseenter:rP,mouseleave:rP})||this;return r.navigatorShape=[0,0],r}return Object.defineProperty(e.prototype,"pageViews",{get:function(){return this.navigator.getContainer()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"grid",{get:function(){var n=this.attributes,r=n.gridRow,i=n.gridCol,o=n.data;if(!r&&!i)throw new Error("gridRow and gridCol can not be set null at the same time");return r&&i?[r,i]:r?[r,o.length]:[o.length,i]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"renderData",{get:function(){var n=this.attributes,r=n.data,i=n.layout,o=gn(this.attributes,"item"),a=r.map(function(s,c){var l=s.id,u=l===void 0?c:l,f=s.label,d=s.value;return{id:"".concat(u),index:c,style:nt({layout:i,labelText:f,valueText:d},Object.fromEntries(Object.entries(o).map(function(h){var p=j(h,2),v=p[0],y=p[1];return[v,Ns(y,[s,c,r])]})))}});return a},enumerable:!1,configurable:!0}),e.prototype.getGridLayout=function(){var n=this,r=this.attributes,i=r.orientation,o=r.width,a=r.rowPadding,s=r.colPadding,c=j(this.navigatorShape,1),l=c[0],u=j(this.grid,2),f=u[0],d=u[1],h=d*f,p=0;return this.pageViews.children.map(function(v,y){var m,b,O=Math.floor(y/h),E=y%h,w=n.ifHorizontal(d,f),_=[Math.floor(E/w),E%w];i==="vertical"&&_.reverse();var S=j(_,2),M=S[0],T=S[1],A=(o-l-(d-1)*s)/d,C=v.getBBox().height,N=j([0,0],2),k=N[0],R=N[1];return i==="horizontal"?(m=j([p,M*(C+a)],2),k=m[0],R=m[1],p=T===d-1?0:p+A+s):(b=j([T*(A+s),p],2),k=b[0],R=b[1],p=M===f-1?0:p+C+a),{page:O,index:y,row:M,col:T,pageIndex:E,width:A,height:C,x:k,y:R}})},e.prototype.getFlexLayout=function(){var n=this.attributes,r=n.width,i=n.height,o=n.rowPadding,a=n.colPadding,s=j(this.navigatorShape,1),c=s[0],l=j(this.grid,2),u=l[0],f=l[1],d=j([r-c,i],2),h=d[0],p=d[1],v=j([0,0,0,0,0,0,0,0],8),y=v[0],m=v[1],b=v[2],O=v[3],E=v[4],w=v[5],_=v[6],S=v[7];return this.pageViews.children.map(function(M,T){var A,C,N,k,R=M.getBBox(),I=R.width,D=R.height,B=_===0?0:a,F=_+B+I;if(F<=h&&cF(E,function(X){return X<f}))return A=j([_+B,S,F],3),y=A[0],m=A[1],_=A[2],{width:I,height:D,x:y,y:m,page:b,index:T,pageIndex:O++,row:w,col:E++};C=j([w+1,0,0,S+D+o],4),w=C[0],E=C[1],_=C[2],S=C[3];var G=S+D;return G<=p&&cF(w,function(X){return X<u})?(N=j([_,S,I],3),y=N[0],m=N[1],_=N[2],{width:I,height:D,x:y,y:m,page:b,index:T,pageIndex:O++,row:w,col:E++}):(k=j([0,0,I,0,b+1,0,0,0],8),y=k[0],m=k[1],_=k[2],S=k[3],b=k[4],O=k[5],w=k[6],E=k[7],{width:I,height:D,x:y,y:m,page:b,index:T,pageIndex:O++,row:w,col:E++})})},Object.defineProperty(e.prototype,"itemsLayout",{get:function(){this.navigatorShape=[0,0];var n=this.attributes.layout==="grid"?this.getGridLayout:this.getFlexLayout,r=n.call(this);return r.slice(-1)[0].page>0?(this.navigatorShape=[55,0],n.call(this)):r},enumerable:!1,configurable:!0}),e.prototype.ifHorizontal=function(n,r){var i=this.attributes.orientation;return Zc(i,n,r)},e.prototype.flattenPage=function(n){n.querySelectorAll(gd.item.class).forEach(function(r){n.appendChild(r)}),n.querySelectorAll(gd.page.class).forEach(function(r){var i=n.removeChild(r);i.destroy()})},e.prototype.renderItems=function(n){var r=this.attributes,i=r.click,o=r.mouseenter,a=r.mouseleave;this.flattenPage(n);var s=this.dispatchCustomEvent.bind(this);Ke(n).selectAll(gd.item.class).data(this.renderData,function(c){return c.id}).join(function(c){return c.append(function(l){var u=l.style;return new Qit({style:u})}).attr("className",gd.item.name).on("click",function(){i==null||i(this),s("itemClick",{item:this})}).on("pointerenter",function(){o==null||o(this),s("itemMouseenter",{item:this})}).on("pointerleave",function(){a==null||a(this),s("itemMouseleave",{item:this})})},function(c){return c.each(function(l){var u=l.style;this.update(u)})},function(c){return c.remove()})},e.prototype.relayoutNavigator=function(){var n,r=this.attributes,i=r.layout,o=r.width,a=((n=this.pageViews.children[0])===null||n===void 0?void 0:n.getBBox().height)||0,s=j(this.navigatorShape,2),c=s[0],l=s[1];this.navigator.update(i==="grid"?{pageWidth:o-c,pageHeight:a-l}:{})},e.prototype.adjustLayout=function(){var n=this,r=Object.entries(qit(this.itemsLayout,"page")).map(function(o){var a=j(o,2),s=a[0],c=a[1];return{page:s,layouts:c}}),i=ut([],j(this.navigator.getContainer().children),!1);r.forEach(function(o){var a=o.layouts,s=n.pageViews.appendChild(new Mt({className:gd.page.name}));a.forEach(function(c){var l=c.x,u=c.y,f=c.index,d=c.width,h=c.height,p=i[f];s.appendChild(p),$it(p,"__layout__",c),p.update({x:l,y:u,width:d,height:h})})}),this.relayoutNavigator()},e.prototype.renderNavigator=function(n){var r=this.attributes.orientation,i=gn(this.attributes,"nav"),o=jl({orientation:r},i),a=this;return n.selectAll(gd.navigator.class).data(["nav"]).join(function(s){return s.append(function(){return new Zit({style:o})}).attr("className",gd.navigator.name).each(function(){a.navigator=this})},function(s){return s.each(function(){this.update(o)})},function(s){return s.remove()}),this.navigator},e.prototype.getBBox=function(){return this.navigator.getBBox()},e.prototype.render=function(n,r){var i=this.attributes.data;if(!(!i||i.length===0)){var o=this.renderNavigator(Ke(r));this.renderItems(o.getContainer()),this.adjustLayout()}},e.prototype.dispatchCustomEvent=function(n,r){var i=new sn(n,{detail:r});this.dispatchEvent(i)},e}(oo),eot=function(t){xt(e,t);function e(n){return t.call(this,n,IK)||this}return e.prototype.renderTitle=function(n,r,i){var o=this.attributes,a=o.showTitle,s=o.titleText,c=gn(this.attributes,"title"),l=j(zl(c),2),u=l[0],f=l[1];this.titleGroup=n.maybeAppendByClassName(To.titleGroup,"g").styles(f);var d=nt(nt({width:r,height:i},u),{text:a?s:""});this.title=this.titleGroup.maybeAppendByClassName(To.title,function(){return new AL({style:d})}).update(d)},e.prototype.renderItems=function(n,r){var i=r.x,o=r.y,a=r.width,s=r.height,c=gn(this.attributes,"title",!0),l=j(zl(c),2),u=l[0],f=l[1],d=nt(nt({},u),{width:a,height:s,x:0,y:0});this.itemsGroup=n.maybeAppendByClassName(To.itemsGroup,"g").styles(nt(nt({},f),{transform:"translate(".concat(i,", ").concat(o,")")}));var h=this;this.itemsGroup.selectAll(To.items.class).data(["items"]).join(function(p){return p.append(function(){return new tot({style:d})}).attr("className",To.items.name).each(function(){h.items=Ke(this)})},function(p){return p.update(d)},function(p){return p.remove()})},e.prototype.adjustLayout=function(){var n=this.attributes.showTitle;if(n){var r=this.title.node().getAvailableSpace(),i=r.x,o=r.y;this.itemsGroup.node().style.transform="translate(".concat(i,", ").concat(o,")")}},Object.defineProperty(e.prototype,"availableSpace",{get:function(){var n=this.attributes,r=n.showTitle,i=n.width,o=n.height;return r?this.title.node().getAvailableSpace():new Lr(0,0,i,o)},enumerable:!1,configurable:!0}),e.prototype.getBBox=function(){var n,r,i=(n=this.title)===null||n===void 0?void 0:n.node(),o=(r=this.items)===null||r===void 0?void 0:r.node();return!i||!o?t.prototype.getBBox.call(this):yq(i,o)},e.prototype.render=function(n,r){var i=this.attributes,o=i.width,a=i.height,s=i.x,c=s===void 0?0:s,l=i.y,u=l===void 0?0:l,f=Ke(r);r.style.transform="translate(".concat(c,", ").concat(u,")"),this.renderTitle(f,o,a),this.renderItems(f,this.availableSpace),this.adjustLayout()},e}(oo);function bg(t){if(Qh(t)){var e=t;return e[e.length-1]}}var not=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function rot(t,e){const n=qc(t,"shape"),r=qc(t,"color"),i=n?n.clone():null,o=[];for(const[s,c]of e){const l=s.type,f=((r==null?void 0:r.getOptions().domain.length)>0?r==null?void 0:r.getOptions().domain:c.data).map((d,h)=>{var p;return i?i.map(d||"point"):((p=s==null?void 0:s.style)===null||p===void 0?void 0:p.shape)||c.defaultShape||"point"});typeof l=="string"&&o.push([l,f])}if(o.length===0)return["point",["point"]];if(o.length===1||!n)return o[0];const{range:a}=n.getOptions();return o.map(([s,c])=>{let l=0;for(let u=0;u<o.length;u++){const f=a[u%a.length];c[u]===f&&l++}return[l/c.length,[s,c]]}).sort((s,c)=>c[0]-s[0])[0][1]}function iot(t,e){const{scales:n,library:r,markState:i}=e,[o,a]=rot(n,i),{itemMarker:s,itemMarkerSize:c}=t,l=(d,h)=>{var p,v,y;const m=((y=(v=(p=r[`mark.${o}`])===null||p===void 0?void 0:p.props)===null||v===void 0?void 0:v.shape[d])===null||y===void 0?void 0:y.props.defaultMarker)||bg(d.split(".")),b=typeof c=="function"?c(h):c;return()=>J7(m,{color:h.color})(0,0,b)},u=d=>`${a[d]}`;return qc(n,"shape")&&!s?(d,h)=>l(u(h),d):typeof s=="function"?(d,h)=>{const p=s(d.id,h);return typeof p=="string"?l(p,d):p}:(d,h)=>l(s||u(h),d)}function oot(t){const e=qc(t,"opacity");if(e){const{range:n}=e.getOptions();return(r,i)=>n[i]}}function aot(t,e){const n=qc(t,"size");return n instanceof lb?n.map(NaN)*2:e}function sot(t,e){const{labelFormatter:n=d=>`${d}`}=t,{scales:r,theme:i}=e,o=i.legendCategory.itemMarkerSize,a=aot(r,o),s={itemMarker:iot(Object.assign(Object.assign({},t),{itemMarkerSize:a}),e),itemMarkerSize:a,itemMarkerOpacity:oot(r)},c=typeof n=="string"?ju(n):n,l=qc(r,"color"),u=Yq(r),f=l?d=>l.map(d):()=>e.theme.color;return Object.assign(Object.assign({},s),{data:u.map(d=>({id:d,label:c(d),color:f(d)}))})}function cot(t,e,n){const{position:r}=e;if(r==="center"){const{bbox:a}=t,{width:s,height:c}=a;return{width:s,height:c}}const{width:i,height:o}=zL(t,e,n);return{width:i,height:o}}const iP=t=>{const{labelFormatter:e,layout:n,order:r,orientation:i,position:o,size:a,title:s,cols:c,itemMarker:l}=t,u=not(t,["labelFormatter","layout","order","orientation","position","size","title","cols","itemMarker"]),{gridRow:f}=u;return d=>{const{value:h,theme:p}=d,{bbox:v}=h,{width:y,height:m}=cot(h,t,iP),b=jL(o,n),O=Object.assign(Object.assign(Object.assign(Object.assign({orientation:["right","left","center"].includes(o)?"vertical":"horizontal",width:y,height:m,layout:c!==void 0?"grid":"flex"},c!==void 0&&{gridCol:c}),f!==void 0&&{gridRow:f}),{titleText:gx(s)}),sot(t,d)),{legendCategory:E={}}=p,w=yx(Object.assign({},E,O,u)),_=new Gq({style:Object.assign(Object.assign({x:v.x,y:v.y,width:v.width,height:v.height},b),{subOptions:w})});return _.appendChild(new eot({className:"legend-category",style:w})),_}};iP.props={defaultPosition:"top",defaultOrder:1,defaultSize:40,defaultCrossPadding:[12,12],defaultPadding:[12,12]};const lF=t=>()=>new Mt;lF.props={};var lot=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function uF(t,e,n,r){switch(r){case"center":return{x:t+n/2,y:e,textAlign:"middle"};case"right":return{x:t+n,y:e,textAlign:"right"};default:return{x:t,y:e,textAlign:"left"}}}const uot=jq({render(t,e){const{width:n,title:r,subtitle:i,spacing:o=2,align:a="left",x:s,y:c}=t,l=lot(t,["width","title","subtitle","spacing","align","x","y"]);e.style.transform=`translate(${s}, ${c})`;const u=Xt(l,"title"),f=Xt(l,"subtitle"),h=FL(e,".title","text").attr("className","title").call(be,Object.assign(Object.assign(Object.assign({},uF(0,0,n,a)),{fontSize:14,textBaseline:"top",text:r}),u)).node().getLocalBounds();FL(e,".sub-title","text").attr("className","sub-title").call(p=>{if(!i)return p.node().remove();p.node().attr(Object.assign(Object.assign(Object.assign({},uF(0,h.max[1]+o,n,a)),{fontSize:12,textBaseline:"top",text:i}),f))})}}),fF=t=>({value:e,theme:n})=>{const{x:r,y:i,width:o,height:a}=e.bbox;return new uot({style:bt({},n.title,Object.assign({x:r,y:i,width:o,height:a},t))})};fF.props={defaultPosition:"top",defaultOrder:2,defaultSize:36,defaultCrossPadding:[20,20],defaultPadding:[12,12]};var oP=function(t){if(typeof t!="object"||t===null)return t;var e;if(ri(t)){e=[];for(var n=0,r=t.length;n<r;n++)typeof t[n]=="object"&&t[n]!=null?e[n]=oP(t[n]):e[n]=t[n]}else{e={};for(var i in t)typeof t[i]=="object"&&t[i]!=null?e[i]=oP(t[i]):e[i]=t[i]}return e},aP=oP,fot=function(t){xt(e,t);function e(n){var r=this,i=n.style,o=Ge(n,["style"]);return r=t.call(this,bt({},{type:"column"},nt({style:i},o)))||this,r.columnsGroup=new Mt({name:"columns"}),r.appendChild(r.columnsGroup),r.render(),r}return e.prototype.render=function(){var n=this.attributes,r=n.columns,i=n.x,o=n.y;this.columnsGroup.style.transform="translate(".concat(i,", ").concat(o,")"),Ke(this.columnsGroup).selectAll(".column").data(r.flat()).join(function(a){return a.append("rect").attr("className","column").each(function(s){this.attr(s)})},function(a){return a.each(function(s){this.attr(s)})},function(a){return a.remove()})},e.prototype.update=function(n){this.attr(jl({},this.attributes,n)),this.render()},e.prototype.clear=function(){this.removeChildren()},e}(rt),dot=function(t){xt(e,t);function e(n){var r=this,i=n.style,o=Ge(n,["style"]);return r=t.call(this,bt({},{type:"lines"},nt({style:i},o)))||this,r.linesGroup=r.appendChild(new Mt),r.areasGroup=r.appendChild(new Mt),r.render(),r}return e.prototype.render=function(){var n=this.attributes,r=n.lines,i=n.areas,o=n.x,a=n.y;this.style.transform="translate(".concat(o,", ").concat(a,")"),r&&this.renderLines(r),i&&this.renderAreas(i)},e.prototype.clear=function(){this.linesGroup.removeChildren(),this.areasGroup.removeChildren()},e.prototype.update=function(n){this.attr(jl({},this.attributes,n)),this.render()},e.prototype.renderLines=function(n){Ke(this.linesGroup).selectAll(".line").data(n).join(function(r){return r.append("path").attr("className","line").each(function(i){this.attr(i)})},function(r){return r.each(function(i){this.attr(i)})},function(r){return r.remove()})},e.prototype.renderAreas=function(n){Ke(this.linesGroup).selectAll(".area").data(n).join(function(r){return r.append("path").attr("className","area").each(function(i){this.attr(i)})},function(r){return r.each(function(i){this.style(i)})},function(r){return r.remove()})},e}(rt);function hot(t,e,n,r){var i,o=[],a=!!r,s,c,l=[1/0,1/0],u=[-1/0,-1/0],f,d,h;if(a){i=j(r,2),l=i[0],u=i[1];for(var p=0,v=t.length;p<v;p+=1){var y=t[p];l=Jf(l,y),u=Qf(u,y)}}for(var p=0,m=t.length;p<m;p+=1){var y=t[p];if(p===0&&!n)h=y;else if(p===m-1&&!n)d=y,o.push(h),o.push(d);else{var b=[p?p-1:m-1,p-1][n?0:1];s=t[b],c=t[n?(p+1)%m:p+1];var O=[0,0];O=uS(c,s),O=Gl(O,e);var E=B0(y,s),w=B0(y,c),_=E+w;_!==0&&(E/=_,w/=_);var S=Gl(O,-E),M=Gl(O,w);d=D0(y,S),f=D0(y,M),f=Jf(f,Qf(c,y)),f=Qf(f,Jf(c,y)),S=uS(f,y),S=Gl(S,-E/w),d=D0(y,S),d=Jf(d,Qf(s,y)),d=Qf(d,Jf(s,y)),M=uS(y,d),M=Gl(M,w/E),f=D0(y,M),a&&(d=Qf(d,l),d=Jf(d,u),f=Qf(f,l),f=Jf(f,u)),o.push(h),o.push(d),h=f}}return n&&o.push(o.shift()),o}function pot(t,e,n){var r;e===void 0&&(e=!1),n===void 0&&(n=[[0,0],[1,1]]);for(var i=!!e,o=[],a=0,s=t.length;a<s;a+=2)o.push([t[a],t[a+1]]);for(var c=hot(o,.4,i,n),l=o.length,u=[],f,d,h,a=0;a<l-1;a+=1)f=c[a*2],d=c[a*2+1],h=o[a+1],u.push(["C",f[0],f[1],d[0],d[1],h[0],h[1]]);return i&&(f=c[l],d=c[l+1],r=j(o,1),h=r[0],u.push(["C",f[0],f[1],d[0],d[1],h[0],h[1]])),u}function vot(t,e){var n,r=e.x,i=e.y,o=j(i.getOptions().range||[0,0],2),a=o[0],s=o[1];return s>a&&(n=j([a,s],2),s=n[0],a=n[1]),t.map(function(c){var l=c.map(function(u,f){return[r.map(f),Nn(i.map(u),s,a)]});return l})}function _g(t,e){e===void 0&&(e=!1);var n=e?t.length-1:0,r=t.map(function(i,o){return ut([o===n?"M":"L"],j(i),!1)});return e?r.reverse():r}function hb(t,e){if(e===void 0&&(e=!1),t.length<=2)return _g(t);for(var n=[],r=t.length,i=0;i<r;i+=1){var o=e?t[r-i-1]:t[i];jR(o,n.slice(-2))||n.push.apply(n,ut([],j(o),!1))}var a=pot(n,!1);return e?a.unshift(ut(["M"],j(t[r-1]),!1)):a.unshift(ut(["M"],j(t[0]),!1)),a}function sP(t,e,n){var r=aP(t);return r.push(["L",e,n],["L",0,n],["Z"]),r}function got(t,e,n,r){return t.map(function(i){return sP(e?hb(i):_g(i),n,r)})}function yot(t,e,n){for(var r=[],i=t.length-1;i>=0;i-=1){var o=t[i],a=_g(o),s=void 0;if(i===0)s=sP(a,e,n);else{var c=t[i-1],l=_g(c,!0);l[0][0]="L",s=ut(ut(ut([],j(a),!1),j(l),!1),[["Z"]],!1)}r.push(s)}return r}function mot(t,e,n){for(var r=[],i=t.length-1;i>=0;i-=1){var o=t[i],a=hb(o),s=void 0;if(i===0)s=sP(a,e,n);else{var c=t[i-1],l=hb(c,!0),u=o[0];l[0][0]="L",s=ut(ut(ut([],j(a),!1),j(l),!1),[ut(["M"],j(u),!1),["Z"]],!1)}r.push(s)}return r}var xot=function(t,e){if(ri(t)){for(var n,r=1/0,i=0;i<t.length;i++){var o=t[i],a=Fa(e)?e(o):o[e];a<r&&(n=o,r=a)}return n}},bot=function(t,e){if(ri(t)){for(var n,r=-1/0,i=0;i<t.length;i++){var o=t[i],a=Fa(e)?e(o):o[e];a>r&&(n=o,r=a)}return n}};function dF(t){return t.length===0?[0,0]:[Ac(xot(t,function(e){return Ac(e)||0})),Cc(bot(t,function(e){return Cc(e)||0}))]}function hF(t){for(var e=aP(t),n=e[0].length,r=j([Array(n).fill(0),Array(n).fill(0)],2),i=r[0],o=r[1],a=0;a<e.length;a+=1)for(var s=e[a],c=0;c<n;c+=1)s[c]>=0?(s[c]+=i[c],i[c]=s[c]):(s[c]+=o[c],o[c]=s[c]);return e}var _ot=function(t){xt(e,t);function e(n){return t.call(this,n,{type:"line",x:0,y:0,width:200,height:20,isStack:!1,color:["#83daad","#edbf45","#d2cef9","#e290b3","#6f63f4"],smooth:!0,lineLineWidth:1,areaOpacity:0,isGroup:!1,columnLineWidth:1,columnStroke:"#fff",scale:1,spacing:0})||this}return Object.defineProperty(e.prototype,"rawData",{get:function(){var n=this.attributes.data;if(!n||(n==null?void 0:n.length)===0)return[[]];var r=aP(n);return Je(r[0])?[r]:r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this.attributes.isStack?hF(this.rawData):this.rawData},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scales",{get:function(){return this.createScales(this.data)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"baseline",{get:function(){var n=this.scales.y,r=j(n.getOptions().domain||[0,0],2),i=r[0],o=r[1];return o<0?n.map(o):n.map(i<0?0:i)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"containerShape",{get:function(){var n=this.attributes,r=n.width,i=n.height;return{width:r,height:i}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"linesStyle",{get:function(){var n=this,r=this.attributes,i=r.type,o=r.isStack,a=r.smooth;if(i!=="line")throw new Error("linesStyle can only be used in line type");var s=gn(this.attributes,"area"),c=gn(this.attributes,"line"),l=this.containerShape.width,u=this.data;if(u[0].length===0)return{lines:[],areas:[]};var f=this.scales,d=f.x,h=f.y,p=vot(u,{type:"line",x:d,y:h}),v=[];if(s){var y=this.baseline;o?v=a?mot(p,l,y):yot(p,l,y):v=got(p,a,l,y)}return{lines:p.map(function(m,b){return nt({stroke:n.getColor(b),d:a?hb(m):_g(m)},c)}),areas:v.map(function(m,b){return nt({d:m,fill:n.getColor(b)},s)})}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"columnsStyle",{get:function(){var n=this,r=gn(this.attributes,"column"),i=this.attributes,o=i.isStack,a=i.type,s=i.scale;if(a!=="column")throw new Error("columnsStyle can only be used in column type");var c=this.containerShape.height,l=this.rawData;if(!l)return{columns:[]};o&&(l=hF(l));var u=this.createScales(l),f=u.x,d=u.y,h=j(dF(l),2),p=h[0],v=h[1],y=new $o({domain:[0,v-(p>0?0:p)],range:[0,c*s]}),m=f.getBandWidth(),b=this.rawData;return{columns:l.map(function(O,E){return O.map(function(w,_){var S=m/l.length,M=function(){return{x:f.map(_)+S*E,y:w>=0?d.map(w):d.map(0),width:S,height:y.map(Math.abs(w))}},T=function(){return{x:f.map(_),y:d.map(w),width:m,height:y.map(b[E][_])}};return nt(nt({fill:n.getColor(E)},r),o?T():M())})})}},enumerable:!1,configurable:!0}),e.prototype.render=function(n,r){s$(r,".container","rect").attr("className","container").node();var i=n.type,o=n.x,a=n.y,s="spark".concat(i),c=nt({x:o,y:a},i==="line"?this.linesStyle:this.columnsStyle);Ke(r).selectAll(".spark").data([i]).join(function(l){return l.append(function(u){return u==="line"?new dot({className:s,style:c}):new fot({className:s,style:c})}).attr("className","spark ".concat(s))},function(l){return l.update(c)},function(l){return l.remove()})},e.prototype.getColor=function(n){var r=this.attributes.color;return ri(r)?r[n%r.length]:Fa(r)?r.call(null,n):r},e.prototype.createScales=function(n){var r,i,o=this.attributes,a=o.type,s=o.scale,c=o.range,l=c===void 0?[]:c,u=o.spacing,f=this.containerShape,d=f.width,h=f.height,p=j(dF(n),2),v=p[0],y=p[1],m=new $o({domain:[(r=l[0])!==null&&r!==void 0?r:v,(i=l[1])!==null&&i!==void 0?i:y],range:[h,h*(1-s)]});return a==="line"?{type:a,x:new $o({domain:[0,n[0].length-1],range:[0,d]}),y:m}:{type:a,x:new Ju({domain:n[0].map(function(b,O){return O}),range:[0,d],paddingInner:u,paddingOuter:u/2,align:.5}),y:m}},e.tag="sparkline",e}(oo),pF=function(t){xt(e,t);function e(n){var r=t.call(this,n,nt(nt(nt({x:0,y:0,animate:{duration:100,fill:"both"},brushable:!0,formatter:function(i){return i.toString()},handleSpacing:2,orientation:"horizontal",padding:0,autoFitLabel:!0,scrollable:!0,selectionFill:"#5B8FF9",selectionFillOpacity:.45,selectionZIndex:2,showHandle:!0,showLabel:!0,slidable:!0,trackFill:"#416180",trackLength:200,trackOpacity:.05,trackSize:20,trackZIndex:-1,values:[0,1],type:"range",selectionType:"select",handleIconOffset:0},$c(ZL,"handle")),$c(qL,"handleIcon")),$c(KL,"handleLabel")))||this;return r.range=[0,1],r.onDragStart=function(i){return function(o){o.stopPropagation(),r.target=i,r.prevPos=r.getOrientVal(xx(o));var a=r.availableSpace,s=a.x,c=a.y,l=r.getBBox(),u=l.x,f=l.y;r.selectionStartPos=r.getRatio(r.prevPos-r.getOrientVal([s,c])-r.getOrientVal([+u,+f])),r.selectionWidth=0,document.addEventListener("pointermove",r.onDragging),document.addEventListener("pointerup",r.onDragEnd)}},r.onDragging=function(i){var o=r.attributes,a=o.slidable,s=o.brushable,c=o.type;i.stopPropagation();var l=r.getOrientVal(xx(i)),u=l-r.prevPos;if(u){var f=r.getRatio(u);switch(r.target){case"start":a&&r.setValuesOffset(f);break;case"end":a&&r.setValuesOffset(0,f);break;case"selection":a&&r.setValuesOffset(f,f);break;case"track":if(!s)return;r.selectionWidth+=f,c==="range"?r.innerSetValues([r.selectionStartPos,r.selectionStartPos+r.selectionWidth].sort(),!0):r.innerSetValues([0,r.selectionStartPos+r.selectionWidth],!0);break;default:break}r.prevPos=l}},r.onDragEnd=function(){document.removeEventListener("pointermove",r.onDragging),document.removeEventListener("pointermove",r.onDragging),document.removeEventListener("pointerup",r.onDragEnd),r.target="",r.updateHandlesPosition(!1)},r.onValueChange=function(i){var o=r.attributes,a=o.onChange,s=o.type,c=s==="range"?i:i[1],l=s==="range"?r.getValues():r.getValues()[1],u=new sn("valuechange",{detail:{oldValue:c,value:l}});r.dispatchEvent(u),a==null||a(l)},r.selectionStartPos=0,r.selectionWidth=0,r.prevPos=0,r.target="",r}return Object.defineProperty(e.prototype,"values",{get:function(){return this.attributes.values},set:function(n){this.attributes.values=this.clampValues(n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sparklineStyle",{get:function(){var n=this.attributes.orientation;if(n!=="horizontal")return null;var r=gn(this.attributes,"sparkline");return nt(nt({zIndex:0},this.availableSpace),r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shape",{get:function(){var n=this.attributes,r=n.trackLength,i=n.trackSize,o=j(this.getOrientVal([[r,i],[i,r]]),2),a=o[0],s=o[1];return{width:a,height:s}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"availableSpace",{get:function(){var n=this.attributes,r=n.x,i=n.y,o=n.padding,a=j(Po(o),4),s=a[0],c=a[1],l=a[2],u=a[3],f=this.shape,d=f.width,h=f.height;return{x:u,y:s,width:d-(u+c),height:h-(s+l)}},enumerable:!1,configurable:!0}),e.prototype.getValues=function(){return this.values},e.prototype.setValues=function(n,r){n===void 0&&(n=[0,0]),r===void 0&&(r=!1),this.attributes.values=n;var i=r===!1?!1:this.attributes.animate;this.updateSelectionArea(i),this.updateHandlesPosition(i)},e.prototype.updateSelectionArea=function(n){var r=this.calcSelectionArea();this.foregroundGroup.selectAll(Kc.selection.class).each(function(i,o){uc(this,r[o],n)})},e.prototype.updateHandlesPosition=function(n){this.attributes.showHandle&&(this.startHandle&&uc(this.startHandle,this.getHandleStyle("start"),n),this.endHandle&&uc(this.endHandle,this.getHandleStyle("end"),n))},e.prototype.innerSetValues=function(n,r){n===void 0&&(n=[0,0]),r===void 0&&(r=!1);var i=this.values,o=this.clampValues(n);this.attributes.values=o,this.setValues(o),r&&this.onValueChange(i)},e.prototype.renderTrack=function(n){var r=this.attributes,i=r.x,o=r.y,a=gn(this.attributes,"track");this.trackShape=Ke(n).maybeAppendByClassName(Kc.track,"rect").styles(nt(nt({x:i,y:o},this.shape),a))},e.prototype.renderBrushArea=function(n){var r=this.attributes,i=r.x,o=r.y,a=r.brushable;this.brushArea=Ke(n).maybeAppendByClassName(Kc.brushArea,"rect").styles(nt({x:i,y:o,fill:"transparent",cursor:a?"crosshair":"default"},this.shape))},e.prototype.renderSparkline=function(n){var r=this,i=this.attributes,o=i.x,a=i.y,s=i.orientation,c=Ke(n).maybeAppendByClassName(Kc.sparklineGroup,"g");Ba(s==="horizontal",c,function(l){var u=nt(nt({},r.sparklineStyle),{x:o,y:a});l.maybeAppendByClassName(Kc.sparkline,function(){return new _ot({style:u})}).update(u)})},e.prototype.renderHandles=function(){var n=this,r,i=this.attributes,o=i.showHandle,a=i.type,s=a==="range"?["start","end"]:["end"],c=o?s:[],l=this;(r=this.foregroundGroup)===null||r===void 0||r.selectAll(Kc.handle.class).data(c.map(function(u){return{type:u}}),function(u){return u.type}).join(function(u){return u.append(function(f){var d=f.type;return new JL({style:n.getHandleStyle(d)})}).each(function(f){var d=f.type;this.attr("class","".concat(Kc.handle.name," ").concat(d,"-handle"));var h="".concat(d,"Handle");l[h]=this,this.addEventListener("pointerdown",l.onDragStart(d))})},function(u){return u.each(function(f){var d=f.type;this.update(l.getHandleStyle(d))})},function(u){return u.each(function(f){var d=f.type,h="".concat(d,"Handle");l[h]=void 0}).remove()})},e.prototype.renderSelection=function(n){var r=this.attributes,i=r.x,o=r.y,a=r.type,s=r.selectionType;this.foregroundGroup=Ke(n).maybeAppendByClassName(Kc.foreground,"g");var c=gn(this.attributes,"selection"),l=function(f){return f.style("visibility",function(d){return d.show?"visible":"hidden"}).style("cursor",function(d){return s==="select"?"grab":s==="invert"?"crosshair":"default"}).styles(nt(nt({},c),{transform:"translate(".concat(i,", ").concat(o,")")}))},u=this;this.foregroundGroup.selectAll(Kc.selection.class).data(a==="value"?[]:this.calcSelectionArea().map(function(f,d){return{style:nt({},f),index:d,show:s==="select"?d===1:d!==1}}),function(f){return f.index}).join(function(f){return f.append("rect").attr("className",Kc.selection.name).call(l).each(function(d,h){var p=this;h===1?(u.selectionShape=Ke(this),this.on("pointerdown",function(v){p.attr("cursor","grabbing"),u.onDragStart("selection")(v)}),u.dispatchCustomEvent(this,"pointerenter","selectionMouseenter"),u.dispatchCustomEvent(this,"pointerleave","selectionMouseleave"),u.dispatchCustomEvent(this,"click","selectionClick"),this.addEventListener("pointerdown",function(){p.attr("cursor","grabbing")}),this.addEventListener("pointerup",function(){p.attr("cursor","pointer")}),this.addEventListener("pointerover",function(){p.attr("cursor","pointer")})):this.on("pointerdown",u.onDragStart("track"))})},function(f){return f.call(l)},function(f){return f.remove()}),this.updateSelectionArea(!1),this.renderHandles()},e.prototype.render=function(n,r){this.renderTrack(r),this.renderSparkline(r),this.renderBrushArea(r),this.renderSelection(r)},e.prototype.clampValues=function(n,r){var i;r===void 0&&(r=4);var o=j(this.range,2),a=o[0],s=o[1],c=j(this.getValues().map(function(y){return mx(y,r)}),2),l=c[0],u=c[1],f=Array.isArray(n)?n:[l,n!=null?n:u],d=j((f||[l,u]).map(function(y){return mx(y,r)}),2),h=d[0],p=d[1];if(this.attributes.type==="value")return[0,Nn(p,a,s)];h>p&&(i=j([p,h],2),h=i[0],p=i[1]);var v=p-h;return v>s-a?[a,s]:h<a?l===a&&u===p?[a,p]:[a,v+a]:p>s?u===s&&l===h?[h,s]:[s-v,s]:[h,p]},e.prototype.calcSelectionArea=function(n){var r=j(this.clampValues(n),2),i=r[0],o=r[1],a=this.availableSpace,s=a.x,c=a.y,l=a.width,u=a.height;return this.getOrientVal([[{y:c,height:u,x:s,width:i*l},{y:c,height:u,x:i*l+s,width:(o-i)*l},{y:c,height:u,x:o*l,width:(1-o)*l}],[{x:s,width:l,y:c,height:i*u},{x:s,width:l,y:i*u+c,height:(o-i)*u},{x:s,width:l,y:o*u,height:(1-o)*u}]])},e.prototype.calcHandlePosition=function(n){var r=this.attributes.handleIconOffset,i=this.availableSpace,o=i.x,a=i.y,s=i.width,c=i.height,l=j(this.clampValues(),2),u=l[0],f=l[1],d=n==="start"?-r:r,h=(n==="start"?u:f)*this.getOrientVal([s,c])+d;return{x:o+this.getOrientVal([h,s/2]),y:a+this.getOrientVal([c/2,h])}},e.prototype.inferTextStyle=function(n){var r=this.attributes.orientation;return r==="horizontal"?{}:n==="start"?{transformOrigin:"left center",transform:"rotate(90)",textAlign:"start"}:n==="end"?{transformOrigin:"right center",transform:"rotate(90)",textAlign:"end"}:{}},e.prototype.calcHandleText=function(n){var r,i=this.attributes,o=i.type,a=i.orientation,s=i.formatter,c=i.autoFitLabel,l=gn(this.attributes,"handle"),u=gn(l,"label"),f=l.spacing,d=this.getHandleSize(),h=this.clampValues(),p=n==="start"?h[0]:h[1],v=s(p),y=new cS({style:nt(nt(nt({},u),this.inferTextStyle(n)),{text:v})}),m=y.getBBox(),b=m.width,O=m.height;if(y.destroy(),!c){if(o==="value")return{text:v,x:0,y:-O-f};var E=f+d+(a==="horizontal"?b/2:0);return r={text:v},r[a==="horizontal"?"x":"y"]=n==="start"?-E:E,r}var w=0,_=0,S=this.availableSpace,M=S.width,T=S.height,A=this.calcSelectionArea()[1],C=A.x,N=A.y,k=A.width,R=A.height,I=f+d;if(a==="horizontal"){var D=I+b/2;if(n==="start"){var B=C-I-b;w=B>0?-D:D}else{var F=M-C-k-I>b;w=F?D:-D}}else{var G=I,X=O+I;n==="start"?_=N-d>O?-X:G:_=T-(N+R)-d>O?X:-G}return{x:w,y:_,text:v}},e.prototype.getHandleLabelStyle=function(n){var r=gn(this.attributes,"handleLabel");return nt(nt(nt({},r),this.calcHandleText(n)),this.inferTextStyle(n))},e.prototype.getHandleIconStyle=function(){var n=this.attributes.handleIconShape,r=gn(this.attributes,"handleIcon"),i=this.getOrientVal(["ew-resize","ns-resize"]),o=this.getHandleSize();return nt({cursor:i,shape:n,size:o},r)},e.prototype.getHandleStyle=function(n){var r=this.attributes,i=r.x,o=r.y,a=r.showLabel,s=r.showLabelOnInteraction,c=r.orientation,l=this.calcHandlePosition(n),u=l.x,f=l.y,d=this.calcHandleText(n),h=a;return!a&&s&&(this.target?h=!0:h=!1),nt(nt(nt({},$c(this.getHandleIconStyle(),"icon")),$c(nt(nt({},this.getHandleLabelStyle(n)),d),"label")),{transform:"translate(".concat(u+i,", ").concat(f+o,")"),orientation:c,showLabel:h,type:n,zIndex:3})},e.prototype.getHandleSize=function(){var n=this.attributes,r=n.handleIconSize,i=n.width,o=n.height;return r||Math.floor((this.getOrientVal([+o,+i])+4)/2.4)},e.prototype.getOrientVal=function(n){var r=j(n,2),i=r[0],o=r[1],a=this.attributes.orientation;return a==="horizontal"?i:o},e.prototype.setValuesOffset=function(n,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var o=this.attributes.type,a=j(this.getValues(),2),s=a[0],c=a[1],l=o==="range"?n:0,u=[s+l,c+r].sort();i?this.setValues(u):this.innerSetValues(u,!0)},e.prototype.getRatio=function(n){var r=this.availableSpace,i=r.width,o=r.height;return n/this.getOrientVal([i,o])},e.prototype.dispatchCustomEvent=function(n,r,i){var o=this;n.on(r,function(a){a.stopPropagation(),o.dispatchEvent(new sn(i,{detail:a}))})},e.prototype.bindEvents=function(){this.addEventListener("wheel",this.onScroll);var n=this.brushArea;this.dispatchCustomEvent(n,"click","trackClick"),this.dispatchCustomEvent(n,"pointerenter","trackMouseenter"),this.dispatchCustomEvent(n,"pointerleave","trackMouseleave"),n.on("pointerdown",this.onDragStart("track"))},e.prototype.onScroll=function(n){var r=this.attributes.scrollable;if(r){var i=n.deltaX,o=n.deltaY,a=o||i,s=this.getRatio(a);this.setValuesOffset(s,s,!0)}},e.tag="slider",e}(oo),wot=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Oot(t,e,n){const{x:r,y:i,width:o,height:a}=t;if(e==="left")return[r+o-n,i];if(e==="right")return[r,i];if(e==="bottom")return[r,i];if(e==="top")return[r,i+a-n]}const wg=t=>{const{orientation:e,labelFormatter:n,size:r,style:i={},position:o}=t,a=wot(t,["orientation","labelFormatter","size","style","position"]);return s=>{var c;const{scales:[l],value:u,theme:f,coordinate:d}=s,{bbox:h}=u,{width:p,height:v}=h,{slider:y={}}=f,m=((c=l.getFormatter)===null||c===void 0?void 0:c.call(l))||(M=>M+""),b=typeof n=="string"?ju(n):n,O=e==="horizontal",E=Rr(d)&&O,{trackSize:w=y.trackSize}=i,[_,S]=Oot(h,o,w);return new pF({className:"slider",style:Object.assign({},y,Object.assign(Object.assign({x:_,y:S,trackLength:O?p:v,orientation:e,formatter:M=>{const T=b||m,A=E?1-M:M,C=up(l,A,!0);return T(C)},sparklineData:Sot(t,s)},i),a))})}};function Eot(t,e){const[n]=Array.from(t.entries()).filter(([i])=>i.type==="line"||i.type==="area").filter(([i])=>i.slider).map(([i])=>{const{encode:o,slider:a}=i;if(a!=null&&a.x){const s=c=>{const l=o[c];return[c,l?l.value:void 0]};return Object.fromEntries(e.map(s))}});if(!(n!=null&&n.series))return n==null?void 0:n.y;const r=n.series.reduce((i,o,a)=>(i[o]=i[o]||[],i[o].push(n.y[a]),i),{});return Object.values(r)}function Sot(t,e){const{markState:n}=e;return ri(t.sparklineData)?t.sparklineData:Eot(n,["y","series"])}wg.props={defaultPosition:"bottom",defaultSize:24,defaultOrder:1,defaultCrossPadding:[12,12],defaultPadding:[12,12]};const vF=t=>wg(Object.assign(Object.assign({},t),{orientation:"horizontal"}));vF.props=Object.assign(Object.assign({},wg.props),{defaultPosition:"bottom"});const gF=t=>wg(Object.assign(Object.assign({},t),{orientation:"vertical"}));gF.props=Object.assign(Object.assign({},wg.props),{defaultPosition:"left"});var Mot=function(t){xt(e,t);function e(n){var r=t.call(this,n,{x:0,y:0,isRound:!0,orientation:"vertical",padding:[2,2,2,2],scrollable:!0,slidable:!0,thumbCursor:"default",trackSize:10,value:0})||this;return r.range=[0,1],r.onValueChange=function(i){var o=r.attributes.value;if(i!==o){var a={detail:{oldValue:i,value:o}};r.dispatchEvent(new sn("scroll",a)),r.dispatchEvent(new sn("valuechange",a))}},r.onTrackClick=function(i){var o=r.attributes.slidable;if(o){var a=j(r.getLocalPosition(),2),s=a[0],c=a[1],l=j(r.padding,4),u=l[0],f=l[3],d=r.getOrientVal([s+f,c+u]),h=r.getOrientVal(xx(i)),p=(h-d)/r.trackLength;r.setValue(p,!0)}},r.onThumbMouseenter=function(i){r.dispatchEvent(new sn("thumbMouseenter",{detail:i.detail}))},r.onTrackMouseenter=function(i){r.dispatchEvent(new sn("trackMouseenter",{detail:i.detail}))},r.onThumbMouseleave=function(i){r.dispatchEvent(new sn("thumbMouseleave",{detail:i.detail}))},r.onTrackMouseleave=function(i){r.dispatchEvent(new sn("trackMouseleave",{detail:i.detail}))},r}return Object.defineProperty(e.prototype,"padding",{get:function(){var n=this.attributes.padding;return Po(n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){var n=this.attributes.value,r=j(this.range,2),i=r[0],o=r[1];return Nn(n,i,o)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trackLength",{get:function(){var n=this.attributes,r=n.viewportLength,i=n.trackLength,o=i===void 0?r:i;return o},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"availableSpace",{get:function(){var n=this.attributes.trackSize,r=this.trackLength,i=j(this.padding,4),o=i[0],a=i[1],s=i[2],c=i[3],l=j(this.getOrientVal([[r,n],[n,r]]),2),u=l[0],f=l[1];return{x:c,y:o,width:+u-(c+a),height:+f-(o+s)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trackRadius",{get:function(){var n=this.attributes,r=n.isRound,i=n.trackSize;return r?i/2:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"thumbRadius",{get:function(){var n=this.attributes,r=n.isRound,i=n.thumbRadius;if(!r)return 0;var o=this.availableSpace,a=o.width,s=o.height;return i||this.getOrientVal([s,a])/2},enumerable:!1,configurable:!0}),e.prototype.getValues=function(n){n===void 0&&(n=this.value);var r=this.attributes,i=r.viewportLength,o=r.contentLength,a=i/o,s=j(this.range,2),c=s[0],l=s[1],u=n*(l-c-a);return[u,u+a]},e.prototype.getValue=function(){return this.value},e.prototype.renderSlider=function(n){var r=this.attributes,i=r.x,o=r.y,a=r.orientation,s=r.trackSize,c=r.padding,l=r.slidable,u=gn(this.attributes,"track"),f=gn(this.attributes,"thumb"),d=nt(nt({x:i,y:o,brushable:!1,orientation:a,padding:c,selectionRadius:this.thumbRadius,showHandle:!1,slidable:l,trackLength:this.trackLength,trackRadius:this.trackRadius,trackSize:s,values:this.getValues()},$c(u,"track")),$c(f,"selection"));this.slider=Ke(n).maybeAppendByClassName("scrollbar",function(){return new pF({style:d})}).update(d).node()},e.prototype.render=function(n,r){this.renderSlider(r)},e.prototype.setValue=function(n,r){r===void 0&&(r=!1);var i=this.attributes.value,o=j(this.range,2),a=o[0],s=o[1];this.slider.setValues(this.getValues(Nn(n,a,s)),r),this.onValueChange(i)},e.prototype.bindEvents=function(){var n=this;this.slider.addEventListener("trackClick",function(r){r.stopPropagation(),n.onTrackClick(r.detail)}),this.onHover()},e.prototype.getOrientVal=function(n){var r=this.attributes.orientation;return r==="horizontal"?n[0]:n[1]},e.prototype.onHover=function(){this.slider.addEventListener("selectionMouseenter",this.onThumbMouseenter),this.slider.addEventListener("trackMouseenter",this.onTrackMouseenter),this.slider.addEventListener("selectionMouseleave",this.onThumbMouseleave),this.slider.addEventListener("trackMouseleave",this.onTrackMouseleave)},e.tag="scrollbar",e}(oo),Pot=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const Og=t=>{const{orientation:e,labelFormatter:n,style:r}=t,i=Pot(t,["orientation","labelFormatter","style"]);return({scales:[o],value:a,theme:s})=>{const{bbox:c}=a,{x:l,y:u,width:f,height:d}=c,{scrollbar:h={}}=s,{ratio:p,range:v}=o.getOptions(),y=e==="horizontal"?f:d,m=y/p,[b,O]=v,E=O>b?0:1;return new Mot({className:"g2-scrollbar",style:Object.assign({},h,Object.assign(Object.assign(Object.assign(Object.assign({},r),{x:l,y:u,trackLength:y,value:E}),i),{orientation:e,contentLength:m,viewportLength:y}))})}};Og.props={defaultPosition:"bottom",defaultSize:24,defaultOrder:1,defaultCrossPadding:[12,12],defaultPadding:[12,12]};const yF=t=>Og(Object.assign(Object.assign({},t),{orientation:"horizontal"}));yF.props=Object.assign(Object.assign({},Og.props),{defaultPosition:"bottom"});const mF=t=>Og(Object.assign(Object.assign({},t),{orientation:"vertical"}));mF.props=Object.assign(Object.assign({},Og.props),{defaultPosition:"left"});const cP=(t,e)=>{const{coordinate:r}=e;return(i,o,a)=>{const[s]=i,{transform:c="",fillOpacity:l=1,strokeOpacity:u=1,opacity:f=1}=s.style,[d,h]=Rr(r)?["left bottom",`scale(1, ${1e-4})`]:["left top",`scale(${1e-4}, 1)`],p=[{transform:`${c} ${h}`.trimStart(),transformOrigin:d,fillOpacity:0,strokeOpacity:0,opacity:0},{transform:`${c} ${h}`.trimStart(),transformOrigin:d,fillOpacity:l,strokeOpacity:u,opacity:f,offset:.01},{transform:`${c} scale(1, 1)`.trimStart(),transformOrigin:d,fillOpacity:l,strokeOpacity:u,opacity:f}];return s.animate(p,Object.assign(Object.assign({},a),t))}},Tot=(t,e)=>{const{coordinate:r}=e;return(i,o,a)=>{const[s]=i,{transform:c="",fillOpacity:l=1,strokeOpacity:u=1,opacity:f=1}=s.style,[d,h]=Rr(r)?["left bottom",`scale(1, ${1e-4})`]:["left top",`scale(${1e-4}, 1)`],p=[{transform:`${c} scale(1, 1)`.trimStart(),transformOrigin:d},{transform:`${c} ${h}`.trimStart(),transformOrigin:d,fillOpacity:l,strokeOpacity:u,opacity:f,offset:.99},{transform:`${c} ${h}`.trimStart(),transformOrigin:d,fillOpacity:0,strokeOpacity:0,opacity:0}];return s.animate(p,Object.assign(Object.assign({},a),t))}},xF=(t,e)=>{const{coordinate:r}=e;return Ho.registerProperty({name:"scaleInYRadius",inherits:!1,initialValue:"",interpolable:!0,syntax:ee.NUMBER}),(i,o,a)=>{const[s]=i,c=u=>{const{__data__:f,style:d}=u,{radius:h=0,inset:p=0,fillOpacity:v=1,strokeOpacity:y=1,opacity:m=1}=d,{points:b,y:O,y1:E}=f,w=id(r,b,[O,E]),{innerRadius:_,outerRadius:S}=w,M=Cx().cornerRadius(h).padAngle(p*Math.PI/180),T=new ke({}),A=k=>(T.attr({d:M(k)}),Lf(T)),C=[{scaleInYRadius:_+1e-4,fillOpacity:0,strokeOpacity:0,opacity:0},{scaleInYRadius:_+1e-4,fillOpacity:v,strokeOpacity:y,opacity:m,offset:.01},{scaleInYRadius:S,fillOpacity:v,strokeOpacity:y,opacity:m}],N=u.animate(C,Object.assign(Object.assign({},a),t));return N.onframe=function(){u.style.d=A(Object.assign(Object.assign({},w),{outerRadius:Number(u.style.scaleInYRadius)}))},N.onfinish=function(){u.style.d=A(Object.assign(Object.assign({},w),{outerRadius:S}))},N},l=u=>{const{style:f}=u,{transform:d="",fillOpacity:h=1,strokeOpacity:p=1,opacity:v=1}=f,[y,m]=Rr(r)?["left top",`scale(${1e-4}, 1)`]:["left bottom",`scale(1, ${1e-4})`],b=[{transform:`${d} ${m}`.trimStart(),transformOrigin:y,fillOpacity:0,strokeOpacity:0,opacity:0},{transform:`${d} ${m}`.trimStart(),transformOrigin:y,fillOpacity:h,strokeOpacity:p,opacity:v,offset:.01},{transform:`${d} scale(1, 1)`.trimStart(),transformOrigin:y,fillOpacity:h,strokeOpacity:p,opacity:v}];return u.animate(b,Object.assign(Object.assign({},a),t))};return ar(r)?c(s):l(s)}},Aot=(t,e)=>{const{coordinate:r}=e;return(i,o,a)=>{const[s]=i,{transform:c="",fillOpacity:l=1,strokeOpacity:u=1,opacity:f=1}=s.style,[d,h]=Rr(r)?["left top",`scale(${1e-4}, 1)`]:["left bottom",`scale(1, ${1e-4})`],p=[{transform:`${c} scale(1, 1)`.trimStart(),transformOrigin:d},{transform:`${c} ${h}`.trimStart(),transformOrigin:d,fillOpacity:l,strokeOpacity:u,opacity:f,offset:.99},{transform:`${c} ${h}`.trimStart(),transformOrigin:d,fillOpacity:0,strokeOpacity:0,opacity:0}];return s.animate(p,Object.assign(Object.assign({},a),t))}},bF=(t,e)=>{Ho.registerProperty({name:"waveInArcAngle",inherits:!1,initialValue:"",interpolable:!0,syntax:ee.NUMBER});const{coordinate:r}=e;return(i,o,a)=>{const[s]=i;if(!ar(r))return cP(t,e)(i,o,a);const{__data__:c,style:l}=s,{radius:u=0,inset:f=0,fillOpacity:d=1,strokeOpacity:h=1,opacity:p=1}=l,{points:v,y,y1:m}=c,b=Cx().cornerRadius(u).padAngle(f*Math.PI/180),O=id(r,v,[y,m]),{startAngle:E,endAngle:w}=O,_=[{waveInArcAngle:E+1e-4,fillOpacity:0,strokeOpacity:0,opacity:0},{waveInArcAngle:E+1e-4,fillOpacity:d,strokeOpacity:h,opacity:p,offset:.01},{waveInArcAngle:w,fillOpacity:d,strokeOpacity:h,opacity:p}],S=s.animate(_,Object.assign(Object.assign({},a),t));return S.onframe=function(){s.style.d=b(Object.assign(Object.assign({},O),{endAngle:Number(s.style.waveInArcAngle)}))},S.onfinish=function(){s.style.d=b(Object.assign(Object.assign({},O),{endAngle:w}))},S}};bF.props={};const _F=t=>(e,n,r)=>{const[i]=e,{fillOpacity:o=1,strokeOpacity:a=1,opacity:s=1}=i.style,c=[{fillOpacity:0,strokeOpacity:0,opacity:0},{fillOpacity:o,strokeOpacity:a,opacity:s}];return i.animate(c,Object.assign(Object.assign({},r),t))};_F.props={};const wF=t=>(e,n,r)=>{const[i]=e,{fillOpacity:o=1,strokeOpacity:a=1,opacity:s=1}=i.style,c=[{fillOpacity:o,strokeOpacity:a,opacity:s},{fillOpacity:0,strokeOpacity:0,opacity:0}];return i.animate(c,Object.assign(Object.assign({},r),t))};wF.props={};const Cot=t=>(n,r,i)=>{const[o]=n,{transform:a="",fillOpacity:s=1,strokeOpacity:c=1,opacity:l=1}=o.style,u="center center",f=[{transform:`${a} scale(${1e-4})`.trimStart(),transformOrigin:u,fillOpacity:0,strokeOpacity:0,opacity:0},{transform:`${a} scale(${1e-4})`.trimStart(),transformOrigin:u,fillOpacity:s,strokeOpacity:c,opacity:l,offset:.01},{transform:`${a} scale(1)`.trimStart(),transformOrigin:u,fillOpacity:s,strokeOpacity:c,opacity:l}];return o.animate(f,Object.assign(Object.assign({},i),t))},kot=t=>(n,r,i)=>{const[o]=n,{transform:a="",fillOpacity:s=1,strokeOpacity:c=1,opacity:l=1}=o.style,u="center center",f=[{transform:`${a} scale(1)`.trimStart(),transformOrigin:u},{transform:`${a} scale(${1e-4})`.trimStart(),transformOrigin:u,fillOpacity:s,strokeOpacity:c,opacity:l,offset:.99},{transform:`${a} scale(${1e-4})`.trimStart(),transformOrigin:u,fillOpacity:0,strokeOpacity:0,opacity:0}];return o.animate(f,Object.assign(Object.assign({},i),t))},OF=t=>(e,n,r)=>{var i,o;const[a]=e,s=((o=(i=a).getTotalLength)===null||o===void 0?void 0:o.call(i))||0,c=[{lineDash:[0,s]},{lineDash:[s,0]}];return a.animate(c,Object.assign(Object.assign({},r),t))};OF.props={};const Not={opacity:1,strokeOpacity:1,fillOpacity:1,lineWidth:0,x:0,y:0,cx:0,cy:0,r:0,rx:0,ry:0,width:0,height:0},Rot={[kt.CIRCLE]:["cx","cy","r"],[kt.ELLIPSE]:["cx","cy","rx","ry"],[kt.RECT]:["x","y","width","height"],[kt.IMAGE]:["x","y","width","height"],[kt.LINE]:["x1","y1","x2","y2"],[kt.POLYLINE]:["points"],[kt.POLYGON]:["points"]};function Op(t,e,n=!1){const r={};for(const i of e){const o=t.style[i];o?r[i]=o:n&&(r[i]=Not[i])}return r}const Eg=["fill","stroke","fillOpacity","strokeOpacity","opacity","lineWidth"];function lP(t){const{min:e,max:n}=t.getLocalBounds(),[r,i]=e,[o,a]=n,s=a-i,c=o-r;return[r,i,c,s]}function Lot(t){const[e,n,r,i]=t;return`
    M ${e} ${n}
    L ${e+r} ${n}
    L ${e+r} ${n+i}
    L ${e} ${n+i}
    Z
  `}function Iot(t,e){const[n,r,i,o]=lP(t),a=o/i,s=Math.ceil(Math.sqrt(e/a)),c=Math.ceil(e/s),l=[],u=o/c;let f=0,d=e;for(;d>0;){const h=Math.min(d,s),p=i/h;for(let v=0;v<h;v++){const y=n+v*p,m=r+f*u;l.push(Lot([y,m,p,u]))}d-=h,f+=1}return l}function Dot(t="pack"){return typeof t=="function"?t:Iot}function Bot(t,e,n){let{transform:r}=t.style;const{transform:i}=e.style;EF(e,t);let o=Eg;if(t.nodeName===kt.GROUP){const[c,l,u,f]=lP(t),[d,h,p,v]=lP(e),y=c-d,m=l-h,b=u/p,O=f/v;r=`translate(${y}, ${m}) scale(${b}, ${O})`}else o=o.concat(Rot[t.nodeName]||[]);const a=[Object.assign({transform:r!=null?r:"none"},Op(t,o,!0)),Object.assign({transform:i!=null?i:"none"},Op(e,o,!0))];return e.animate(a,n)}function EF(t,e){t.__data__=e.__data__,t.className=e.className,t.markType=e.markType,e.parentNode.replaceChild(t,e)}function Fot(t,e){const{nodeName:n}=t;if(n==="path")return t;const r=new ke({style:Object.assign(Object.assign({},Op(t,Eg)),{d:e})});return EF(r,t),r}function SF(t,e){const n=t.indexOf(e),r=t.lastIndexOf(e);return n===r}function jot(t){return!SF(t,"m")||!SF(t,"M")}function MF(t){const e=Lf(t);if(e&&!jot(e))return e}function uP(t,e,n,r){const{nodeName:i}=e,{nodeName:o}=n,a=MF(e),s=MF(n);if(i===o&&i!=="path"||(a===void 0||s===void 0))return Bot(e,n,r);const u=Fot(t,a),f=[Object.assign({},Op(e,Eg)),Object.assign({},Op(n,Eg))];if(a!==s){f[0].d=a,f[1].d=s;const d=u.animate(f,r);return d.onfinish=()=>{const h=u.style.d;eS(u,n),u.style.d=h,u.style.transform="none"},u.style.transform="none",d}return null}function Got(t,e,n,r){t.style.visibility="hidden";const i=r(t,e.length);return e.map((o,a)=>{const s=new ke({style:Object.assign({d:i[a]},Op(t,Eg))});return uP(o,s,o,n)})}function zot(t,e,n,r){const i=r(e,t.length),{fillOpacity:o=1,strokeOpacity:a=1,opacity:s=1}=e.style,c=[{fillOpacity:0,strokeOpacity:0,opacity:0},{fillOpacity:0,strokeOpacity:0,opacity:0,offset:.99},{fillOpacity:o,strokeOpacity:a,opacity:s}],l=e.animate(c,n);return[...t.map((f,d)=>{const h=new ke({style:{d:i[d],fill:e.style.fill}});return uP(f,f,h,n)}),l]}const PF=t=>(e,n,r)=>{const i=Dot(t.split),o=Object.assign(Object.assign({},r),t),{length:a}=e,{length:s}=n;if(a===1&&s===1||a>1&&s>1){const[c]=e,[l]=n;return uP(c,c,l,o)}if(a===1&&s>1){const[c]=e;return Got(c,n,o,i)}if(a>1&&s===1){const[c]=n;return zot(e,c,o,i)}return null};PF.props={};const TF=(t,e)=>(n,r,i)=>{const[o]=n,{min:[a,s],halfExtents:c}=o.getLocalBounds(),l=c[0]*2,u=c[1]*2,f=new ke({style:{d:`M${a},${s}L${a+l},${s}L${a+l},${s+u}L${a},${s+u}Z`}});return o.appendChild(f),o.style.clipPath=f,cP(t,e)([f],r,i)};TF.props={};const AF=(t,e)=>(n,r,i)=>{const[o]=n,{min:[a,s],halfExtents:c}=o.getLocalBounds(),l=c[0]*2,u=c[1]*2,f=new ke({style:{d:`M${a},${s}L${a+l},${s}L${a+l},${s+u}L${a},${s+u}Z`}});return o.appendChild(f),o.style.clipPath=f,xF(t,e)([f],r,i)};AF.props={};var Wot=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Yot(t,{elements:e,datum:n,groupKey:r=f=>f,link:i=!1,background:o=!1,delay:a=60,scale:s,coordinate:c,emitter:l,state:u={}}){var f;const d=e(t),h=new Set(d),p=Nr(d,r),v=ig(d,n),[y,m]=UI(Object.assign({elements:d,valueof:v,link:i,coordinate:c},Xt(u.active,"link"))),[b,O,E]=XI(Object.assign({document:t.ownerDocument,scale:s,coordinate:c,background:o,valueof:v},Xt(u.active,"background"))),w=bt(u,{active:Object.assign({},((f=u.active)===null||f===void 0?void 0:f.offset)&&{transform:(...B)=>{const F=u.active.offset(...B),[,G]=B;return VI(d[G],F,c)}})}),{setState:_,removeState:S,hasState:M}=Hl(w,v);let T;const A=B=>{const{target:F,nativeEvent:G=!0}=B;if(!h.has(F))return;T&&clearTimeout(T);const X=r(F),q=p.get(X),J=new Set(q);for(const et of d)J.has(et)?M(et,"active")||_(et,"active"):(_(et,"inactive"),m(et)),et!==F&&O(et);b(F),y(q),G&&l.emit("element:highlight",{nativeEvent:G,data:{data:n(F),group:q.map(n)}})},C=()=>{T&&clearTimeout(T),T=setTimeout(()=>{N(),T=null},a)},N=(B=!0)=>{for(const F of d)S(F,"active","inactive"),O(F),m(F);B&&l.emit("element:unhighlight",{nativeEvent:B})},k=B=>{const{target:F}=B;o&&!E(F)||!o&&!h.has(F)||(a>0?C():N())},R=()=>{N()};t.addEventListener("pointerover",A),t.addEventListener("pointerout",k),t.addEventListener("pointerleave",R);const I=B=>{const{nativeEvent:F}=B;F||N(!1)},D=B=>{const{nativeEvent:F}=B;if(F)return;const{data:G}=B.data,X=QS(d,G,n);X&&A({target:X,nativeEvent:!1})};return l.on("element:highlight",D),l.on("element:unhighlight",I),()=>{t.removeEventListener("pointerover",A),t.removeEventListener("pointerout",k),t.removeEventListener("pointerleave",R),l.off("element:highlight",D),l.off("element:unhighlight",I);for(const B of d)O(B),m(B)}}function pb(t){var{delay:e,createGroup:n,background:r=!1,link:i=!1}=t,o=Wot(t,["delay","createGroup","background","link"]);return(a,s,c)=>{const{container:l,view:u,options:f}=a,{scale:d,coordinate:h}=u,p=Qc(l);return Yot(p,Object.assign({elements:Vu,datum:cd(u),groupKey:n?n(u):void 0,coordinate:h,scale:d,state:dp(f,[["active",r?{}:{lineWidth:"1",stroke:"#000"}],"inactive"]),background:r,link:i,delay:e,emitter:c},o))}}pb.props={reapplyWhenUpdate:!0};function CF(t){return pb(Object.assign(Object.assign({},t),{createGroup:JS}))}CF.props={reapplyWhenUpdate:!0};function kF(t){return pb(Object.assign(Object.assign({},t),{createGroup:HI}))}kF.props={reapplyWhenUpdate:!0};var Hot=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Uot(t,{elements:e,datum:n,groupKey:r=f=>f,link:i=!1,single:o=!1,coordinate:a,background:s=!1,scale:c,emitter:l,state:u={}}){var f;const d=e(t),h=new Set(d),p=Nr(d,r),v=ig(d,n),[y,m]=UI(Object.assign({link:i,elements:d,valueof:v,coordinate:a},Xt(u.selected,"link"))),[b,O]=XI(Object.assign({document:t.ownerDocument,background:s,coordinate:a,scale:c,valueof:v},Xt(u.selected,"background"))),E=bt(u,{selected:Object.assign({},((f=u.selected)===null||f===void 0?void 0:f.offset)&&{transform:(...R)=>{const I=u.selected.offset(...R),[,D]=R;return VI(d[D],I,a)}})}),{setState:w,removeState:_,hasState:S}=Hl(E,v),M=(R=!0)=>{for(const I of d)_(I,"selected","unselected"),m(I),O(I);R&&l.emit("element:unselect",{nativeEvent:!0})},T=(R,I,D=!0)=>{if(S(I,"selected"))M();else{const B=r(I),F=p.get(B),G=new Set(F);for(const X of d)G.has(X)?w(X,"selected"):(w(X,"unselected"),m(X)),X!==I&&O(X);if(y(F),b(I),!D)return;l.emit("element:select",Object.assign(Object.assign({},R),{nativeEvent:D,data:{data:[n(I),...F.map(n)]}}))}},A=(R,I,D=!0)=>{const B=r(I),F=p.get(B),G=new Set(F);if(S(I,"selected")){if(!d.some(q=>!G.has(q)&&S(q,"selected")))return M();for(const q of F)w(q,"unselected"),m(q),O(q)}else{const X=F.some(q=>S(q,"selected"));for(const q of d)G.has(q)?w(q,"selected"):S(q,"selected")||w(q,"unselected");!X&&i&&y(F),b(I)}D&&l.emit("element:select",Object.assign(Object.assign({},R),{nativeEvent:D,data:{data:d.filter(X=>S(X,"selected")).map(n)}}))},C=R=>{const{target:I,nativeEvent:D=!0}=R;return h.has(I)?o?T(R,I,D):A(R,I,D):M()};t.addEventListener("click",C);const N=R=>{const{nativeEvent:I,data:D}=R;if(I)return;const B=o?D.data.slice(0,1):D.data;for(const F of B){const G=QS(d,F,n);C({target:G,nativeEvent:!1})}},k=()=>{M(!1)};return l.on("element:select",N),l.on("element:unselect",k),()=>{for(const R of d)m(R);t.removeEventListener("click",C),l.off("element:select",N),l.off("element:unselect",k)}}function vb(t){var{createGroup:e,background:n=!1,link:r=!1}=t,i=Hot(t,["createGroup","background","link"]);return(o,a,s)=>{const{container:c,view:l,options:u}=o,{coordinate:f,scale:d}=l,h=Qc(c);return Uot(h,Object.assign({elements:Vu,datum:cd(l),groupKey:e?e(l):void 0,coordinate:f,scale:d,state:dp(u,[["selected",n?{}:{lineWidth:"1",stroke:"#000"}],"unselected"]),background:n,link:r,emitter:s},i))}}vb.props={reapplyWhenUpdate:!0};function NF(t){return vb(Object.assign(Object.assign({},t),{createGroup:JS}))}NF.props={reapplyWhenUpdate:!0};function RF(t){return vb(Object.assign(Object.assign({},t),{createGroup:HI}))}RF.props={reapplyWhenUpdate:!0};var yd=function(t,e,n){var r,i,o,a,s=0;n||(n={});var c=function(){s=n.leading===!1?0:Date.now(),r=null,a=t.apply(i,o),r||(i=o=null)},l=function(){var u=Date.now();!s&&n.leading===!1&&(s=u);var f=e-(u-s);return i=this,o=arguments,f<=0||f>e?(r&&(clearTimeout(r),r=null),s=u,a=t.apply(i,o),r||(i=o=null)):!r&&n.trailing!==!1&&(r=setTimeout(c,f)),a};return l.cancel=function(){clearTimeout(r),s=0,r=i=o=null},l};function Vot(t){const{coordinate:e={}}=t,{transform:n=[]}=e,r=n.find(o=>o.type==="fisheye");if(r)return r;const i={type:"fisheye"};return n.push(i),e.transform=n,t.coordinate=e,i}function Xot({wait:t=30,leading:e,trailing:n=!1}){return r=>{const{options:i,update:o,setState:a,container:s}=r,c=Qc(s),l=yd(u=>{const f=rg(c,u);if(!f){a("fisheye"),o();return}a("fisheye",d=>{const h=bt({},d,{interaction:{tooltip:{preserve:!0}}});for(const m of h.marks)m.animate=!1;const[p,v]=f,y=Vot(h);return y.focusX=p,y.focusY=v,y.visual=!0,h}),o()},t,{leading:e,trailing:n});return c.addEventListener("pointerenter",l),c.addEventListener("pointermove",l),c.addEventListener("pointerleave",l),()=>{c.removeEventListener("pointerenter",l),c.removeEventListener("pointermove",l),c.removeEventListener("pointerleave",l)}}}var $ot=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(u){try{l(r.next(u))}catch(f){a(f)}}function c(u){try{l(r.throw(u))}catch(f){a(f)}}function l(u){u.done?o(u.value):i(u.value).then(s,c)}l((r=r.apply(t,e||[])).next())})},qot=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Kot(t){const{transform:e=[]}=t,n=e.find(i=>i.type==="normalizeY");if(n)return n;const r={type:"normalizeY"};return e.push(r),t.transform=e,r}function Zot(t,e,n){const[r]=Array.from(t.entries()).filter(([i])=>i.type===e).map(([i])=>{const{encode:o}=i,a=s=>{const c=o[s];return[s,c?c.value:void 0]};return Object.fromEntries(n.map(a))});return r}function LF(t){var{wait:e=20,leading:n,trailing:r=!1,labelFormatter:i=a=>`${a}`}=t,o=qot(t,["wait","leading","trailing","labelFormatter"]);return a=>{const{view:s,container:c,update:l,setState:u}=a,{markState:f,scale:d,coordinate:h}=s,p=Zot(f,"line",["x","y","series"]);if(!p)return;const{y:v,x:y,series:m=[]}=p,b=v.map((B,F)=>F),O=fc(b.map(B=>y[B])),E=Qc(c),w=c.getElementsByClassName(Ni),_=c.getElementsByClassName(Ys),M=Nr(_,B=>B.__data__.key.split("-")[0]),T=new Ce({style:Object.assign({x1:0,y1:0,x2:0,y2:E.getAttribute("height"),stroke:"black",lineWidth:1},Xt(o,"rule"))}),A=new Gr({style:Object.assign({x:0,y:E.getAttribute("height"),text:"",fontSize:10},Xt(o,"label"))});T.append(A),E.appendChild(T);const C=(B,F,G)=>{const[X]=B.invert(G),q=F.invert(X);return O[UZ(O,q)]},N=(B,F)=>{T.setAttribute("x1",B[0]),T.setAttribute("x2",B[0]),A.setAttribute("text",i(F))};let k;const R=B=>$ot(this,void 0,void 0,function*(){const{x:F}=d,G=C(h,F,B);N(B,G),u("chartIndex",q=>{const J=bt({},q),et=J.marks.find(vt=>vt.type==="line"),_t=Qn(JE(b,vt=>Qn(vt,Qt=>+v[Qt])/ls(vt,Qt=>+v[Qt]),vt=>m[vt]).values()),Dt=[1/_t,_t];bt(et,{scale:{y:{domain:Dt}}});const pt=Kot(et);pt.groupBy="color",pt.basis=(vt,Qt)=>{const Bt=vt[Hu(Rt=>y[+Rt]).center(vt,G)];return Qt[Bt]};for(const vt of J.marks)vt.animate=!1;return J}),k=(yield l("chartIndex")).view}),I=B=>{const{scale:F,coordinate:G}=k,{x:X,y:q}=F,J=C(G,X,B);N(B,J);for(const et of w){const{seriesIndex:dt,key:_t}=et.__data__,Dt=dt[Hu(de=>y[+de]).center(dt,J)],pt=[0,q.map(1)],vt=[0,q.map(v[Dt]/v[dt[0]])],[,Qt]=G.map(pt),[,Bt]=G.map(vt),Rt=Qt-Bt;et.setAttribute("transform",`translate(0, ${Rt})`);const $t=M.get(_t)||[];for(const de of $t)de.setAttribute("dy",Rt)}},D=yd(B=>{const F=rg(E,B);F&&I(F)},e,{leading:n,trailing:r});return R([0,0]),E.addEventListener("pointerenter",D),E.addEventListener("pointermove",D),E.addEventListener("pointerleave",D),()=>{T.remove(),E.removeEventListener("pointerenter",D),E.removeEventListener("pointermove",D),E.removeEventListener("pointerleave",D)}}}LF.props={reapplyWhenUpdate:!0};function Sg(t,e){let n,r=-1,i=-1;if(e===void 0)for(const o of t)++i,o!=null&&(n>o||n===void 0&&o>=o)&&(n=o,r=i);else for(let o of t)(o=e(o,++i,t))!=null&&(n>o||n===void 0&&o>=o)&&(n=o,r=i);return r}function Mg(t,e){let n=0,r=0;if(e===void 0)for(let i of t)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let o of t)(o=e(o,++i,t))!=null&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n}function IF(t){var e=document.createElement("div");e.innerHTML=t;var n=e.childNodes[0];return n&&e.contains(n)&&e.removeChild(n),n}function Jot(t,e){return!t||!e?t:t.replace(/\\?\{([^{}]+)\}/g,function(n,r){return n.charAt(0)==="\\"?n.slice(1):e[r]===void 0?"":e[r]})}var Qot=Jot,DF=function(t,e){if(e==null){t.innerHTML="";return}t.replaceChildren?Array.isArray(e)?t.replaceChildren.apply(t,ut([],j(e),!1)):t.replaceChildren(e):(t.innerHTML="",Array.isArray(e)?e.forEach(function(n){return t.appendChild(n)}):t.appendChild(e))};function fP(t){return t===void 0&&(t=""),{CONTAINER:"".concat(t,"tooltip"),TITLE:"".concat(t,"tooltip-title"),LIST:"".concat(t,"tooltip-list"),LIST_ITEM:"".concat(t,"tooltip-list-item"),NAME:"".concat(t,"tooltip-list-item-name"),MARKER:"".concat(t,"tooltip-list-item-marker"),NAME_LABEL:"".concat(t,"tooltip-list-item-name-label"),VALUE:"".concat(t,"tooltip-list-item-value"),CROSSHAIR_X:"".concat(t,"tooltip-crosshair-x"),CROSSHAIR_Y:"".concat(t,"tooltip-crosshair-y")}}var BF={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"};function tat(t){var e;t===void 0&&(t="");var n=fP(t);return e={},e[".".concat(n.CONTAINER)]={position:"absolute",visibility:"visible","z-index":8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)","background-color":"rgba(255, 255, 255, 0.96)","box-shadow":"0 6px 12px 0 rgba(0, 0, 0, 0.12)","border-radius":"4px",color:"rgba(0, 0, 0, 0.65)","font-size":"12px","line-height":"20px",padding:"12px","min-width":"120px","max-width":"360px","font-family":"Roboto-Regular"},e[".".concat(n.TITLE)]={color:"rgba(0, 0, 0, 0.45)"},e[".".concat(n.LIST)]={margin:"0px","list-style-type":"none",padding:"0px"},e[".".concat(n.LIST_ITEM)]={"list-style-type":"none",display:"flex","line-height":"2em","align-items":"center","justify-content":"space-between","white-space":"nowrap"},e[".".concat(n.MARKER)]={width:"8px",height:"8px","border-radius":"50%",display:"inline-block","margin-right":"4px"},e[".".concat(n.NAME)]={display:"flex","align-items":"center","max-width":"216px"},e[".".concat(n.NAME_LABEL)]=nt({flex:1},BF),e[".".concat(n.VALUE)]=nt({display:"inline-block",float:"right",flex:1,"text-align":"right","min-width":"28px","margin-left":"30px",color:"rgba(0, 0, 0, 0.85)"},BF),e[".".concat(n.CROSSHAIR_X)]={position:"absolute",width:"1px","background-color":"rgba(0, 0, 0, 0.25)"},e[".".concat(n.CROSSHAIR_Y)]={position:"absolute",height:"1px","background-color":"rgba(0, 0, 0, 0.25)"},e}var eat=function(t){xt(e,t);function e(n){var r=this,i,o,a=(o=(i=n.style)===null||i===void 0?void 0:i.template)===null||o===void 0?void 0:o.prefixCls,s=fP(a);return r=t.call(this,n,{data:[],x:0,y:0,visibility:"visible",title:"",position:"bottom-right",offset:[5,5],enterable:!1,container:{x:0,y:0},bounding:null,template:{prefixCls:"",container:'<div class="'.concat(s.CONTAINER,'"></div>'),title:'<div class="'.concat(s.TITLE,'"></div>'),item:'<li class="'.concat(s.LIST_ITEM,`" data-index={index}>
        <span class="`).concat(s.NAME,`">
          <span class="`).concat(s.MARKER,`" style="background:{color}"></span>
          <span class="`).concat(s.NAME_LABEL,`" title="{name}">{name}</span>
        </span>
        <span class="`).concat(s.VALUE,`" title="{value}">{value}</span>
      </li>`)},style:tat(a)})||this,r.timestamp=-1,r.prevCustomContentKey=r.attributes.contentKey,r.initShape(),r.render(r.attributes,r),r}return Object.defineProperty(e.prototype,"HTMLTooltipElement",{get:function(){return this.element},enumerable:!1,configurable:!0}),e.prototype.getContainer=function(){return this.element},Object.defineProperty(e.prototype,"elementSize",{get:function(){var n=this.element.offsetWidth,r=this.element.offsetHeight;return{width:n,height:r}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"HTMLTooltipItemsElements",{get:function(){var n=this.attributes,r=n.data,i=n.template;return r.map(function(o,a){var s=o.name,c=s===void 0?"":s,l=o.color,u=l===void 0?"black":l,f=o.index,d=Ge(o,["name","color","index"]),h=nt({name:c,color:u,index:f!=null?f:a},d);return IF(Qot(i.item,h))})},enumerable:!1,configurable:!0}),e.prototype.render=function(n,r){this.renderHTMLTooltipElement(),this.updatePosition()},e.prototype.destroy=function(){var n;(n=this.element)===null||n===void 0||n.remove(),t.prototype.destroy.call(this)},e.prototype.show=function(n,r){var i=this;if(n!==void 0&&r!==void 0){var o=this.element.style.visibility==="hidden",a=function(){i.attributes.x=n!=null?n:i.attributes.x,i.attributes.y=r!=null?r:i.attributes.y,i.updatePosition()};o?this.closeTransition(a):a()}this.element.style.visibility="visible"},e.prototype.hide=function(n,r){n===void 0&&(n=0),r===void 0&&(r=0);var i=this.attributes.enterable;i&&this.isCursorEntered(n,r)||(this.element.style.visibility="hidden")},e.prototype.initShape=function(){var n=this.attributes.template;this.element=IF(n.container),this.id&&this.element.setAttribute("id",this.id)},e.prototype.renderCustomContent=function(){if(!(this.prevCustomContentKey!==void 0&&this.prevCustomContentKey===this.attributes.contentKey)){this.prevCustomContentKey=this.attributes.contentKey;var n=this.attributes.content;n&&(typeof n=="string"?this.element.innerHTML=n:DF(this.element,n))}},e.prototype.renderHTMLTooltipElement=function(){var n,r,i=this.attributes,o=i.template,a=i.title,s=i.enterable,c=i.style,l=i.content,u=fP(o.prefixCls),f=this.element;if(this.element.style.pointerEvents=s?"auto":"none",l)this.renderCustomContent();else{a?(f.innerHTML=o.title,f.getElementsByClassName(u.TITLE)[0].innerHTML=a):(r=(n=f.getElementsByClassName(u.TITLE))===null||n===void 0?void 0:n[0])===null||r===void 0||r.remove();var d=this.HTMLTooltipItemsElements,h=document.createElement("ul");h.className=u.LIST,DF(h,d);var p=this.element.querySelector(".".concat(u.LIST));p?p.replaceWith(h):f.appendChild(h)}f$(f,c)},e.prototype.getRelativeOffsetFromCursor=function(n){var r=this.attributes,i=r.position,o=r.offset,a=n||i,s=a.split("-"),c={left:[-1,0],right:[1,0],top:[0,-1],bottom:[0,1]},l=this.elementSize,u=l.width,f=l.height,d=[-u/2,-f/2];return s.forEach(function(h){var p=j(d,2),v=p[0],y=p[1],m=j(c[h],2),b=m[0],O=m[1];d=[v+(u/2+o[0])*b,y+(f/2+o[1])*O]}),d},e.prototype.setOffsetPosition=function(n){var r=j(n,2),i=r[0],o=r[1],a=this.attributes,s=a.x,c=s===void 0?0:s,l=a.y,u=l===void 0?0:l,f=a.container,d=f.x,h=f.y;this.element.style.left="".concat(+c+d+i,"px"),this.element.style.top="".concat(+u+h+o,"px")},e.prototype.updatePosition=function(){var n=this.attributes.showDelay,r=n===void 0?60:n,i=Date.now();this.timestamp>0&&i-this.timestamp<r||(this.timestamp=i,this.setOffsetPosition(this.autoPosition(this.getRelativeOffsetFromCursor())))},e.prototype.autoPosition=function(n){var r=j(n,2),i=r[0],o=r[1],a=this.attributes,s=a.x,c=a.y,l=a.bounding,u=a.position;if(!l)return[i,o];var f=this.element,d=f.offsetWidth,h=f.offsetHeight,p=j([+s+i,+c+o],2),v=p[0],y=p[1],m={left:"right",right:"left",top:"bottom",bottom:"top"},b=l.x,O=l.y,E=l.width,w=l.height,_={left:v<b,right:v+d>b+E,top:y<O,bottom:y+h>O+w},S=[];u.split("-").forEach(function(T){_[T]?S.push(m[T]):S.push(T)});var M=S.join("-");return this.getRelativeOffsetFromCursor(M)},e.prototype.isCursorEntered=function(n,r){if(this.element){var i=this.element.getBoundingClientRect(),o=i.x,a=i.y,s=i.width,c=i.height;return new Lr(o,a,s,c).isPointIn(n,r)}return!1},e.prototype.closeTransition=function(n){var r=this,i=this.element.style.transition;this.element.style.transition="none",n(),setTimeout(function(){r.element.style.transition=i},10)},e.tag="tooltip",e}(oo),md=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function gb(t,e){return e?typeof e=="string"?document.querySelector(e):e:t.ownerDocument.defaultView.getContextService().getDomElement().parentElement}function nat(t){const e=t.getRenderBounds(),{min:[n,r],max:[i,o]}=e;return{x:n,y:r,width:i-n,height:o-r}}function rat(t,e){const n=t.getBoundingClientRect(),r=e.getBoundingClientRect();return{x:n.x-r.x,y:n.y-r.y}}function iat(t,e,n,r,i,o,a,s={},c=[10,10]){const l={".g2-tooltip":{},".g2-tooltip-title":{overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},u=new eat({className:"tooltip",style:{x:e,y:n,container:a,data:[],bounding:o,position:r,enterable:i,title:"",offset:c,template:{prefixCls:"g2-"},style:bt(l,s)}});return t.appendChild(u.HTMLTooltipElement),u}function FF({root:t,data:e,x:n,y:r,render:i,event:o,single:a,position:s="right-bottom",enterable:c=!1,css:l,mount:u,bounding:f,offset:d}){const h=gb(t,u),p=gb(t),v=a?p:t,y=f||nat(t),m=rat(p,h),{tooltipElement:b=iat(h,n,r,s,c,y,m,l,d)}=v,{items:O,title:E=""}=e;b.update(Object.assign({x:n,y:r,data:O,title:E,position:s,enterable:c},i!==void 0&&{content:i(o,{items:O,title:E})})),v.tooltipElement=b}function ef({root:t,single:e,emitter:n,nativeEvent:r=!0,event:i=null}){r&&n.emit("tooltip:hide",{nativeEvent:r});const o=gb(t),a=e?o:t,{tooltipElement:s}=a;s&&s.hide(i==null?void 0:i.clientX,i==null?void 0:i.clientY),YF(t),HF(t),UF(t)}function dP({root:t,single:e}){const n=gb(t),r=e?n:t;if(!r)return;const{tooltipElement:i}=r;i&&(i.destroy(),r.tooltipElement=void 0),YF(t),HF(t),UF(t)}function jF(t){const{value:e}=t;return Object.assign(Object.assign({},t),{value:e===void 0?"undefined":e})}function oat(t){const{__data__:e}=t,{title:n,items:r=[]}=e,i=r.filter(mr).map(o=>{var{color:a=GF(t)}=o,s=md(o,["color"]);return Object.assign(Object.assign({},s),{color:a})}).map(jF);return Object.assign(Object.assign({},n&&{title:n}),{items:i})}function aat(t,e){const{color:n,series:r,facet:i=!1}=t,{color:o,series:a}=e,s=c=>c&&c.invert&&!(c instanceof Ju)&&!(c instanceof U0);if(s(r))return r.clone().invert(a);if(a&&r instanceof Ju&&r.invert(a)!==o&&!i)return r.invert(a);if(s(n)){const c=n.invert(o);return Array.isArray(c)?null:c}return null}function GF(t){const e=t.getAttribute("fill"),n=t.getAttribute("stroke"),{__data__:r}=t,{color:i=e&&e!=="transparent"?e:n}=r;return i}function zF(t,e=n=>n){const n=new Map(t.map(r=>[e(r),r]));return Array.from(n.values())}function WF(t,e,n,r=t.map(o=>o.__data__),i={}){const o=c=>c instanceof Date?+c:c,a=zF(r.map(c=>c.title),o).filter(mr),s=r.flatMap((c,l)=>{const u=t[l],{items:f=[],title:d}=c,h=f.filter(mr),p=n!==void 0?n:f.length<=1;return h.map(v=>{var{color:y=GF(u)||i.color,name:m}=v,b=md(v,["color","name"]);const O=aat(e,c),E=p?O||m:m||O;return Object.assign(Object.assign({},b),{color:y,name:E||d})})}).map(jF);return Object.assign(Object.assign({},a.length>0&&{title:a.join(",")}),{items:zF(s,c=>`(${o(c.name)}, ${o(c.value)}, ${o(c.color)})`)})}function sat(t,e,n,r){var{plotWidth:i,plotHeight:o,mainWidth:a,mainHeight:s,startX:c,startY:l,transposed:u,polar:f,insetLeft:d,insetTop:h}=r,p=md(r,["plotWidth","plotHeight","mainWidth","mainHeight","startX","startY","transposed","polar","insetLeft","insetTop"]);const v=Object.assign({lineWidth:1,stroke:"#1b1e23",strokeOpacity:.5},p),y=(_,S,M)=>{const T=new st({style:Object.assign({cx:_,cy:S,r:M},v)});return t.appendChild(T),T},m=(_,S,M,T)=>{const A=new Ce({style:Object.assign({x1:_,x2:S,y1:M,y2:T},v)});return t.appendChild(A),A},O=((_,S)=>{if(S.length===1)return S[0];const M=S.map(A=>Zr(A,_)),T=Sg(M,A=>A);return S[T]})(n,e),E=()=>u?[c+O[0],c+O[0],l,l+o]:[c,c+i,O[1]+l,O[1]+l],w=()=>{const _=c+d+a/2,S=l+h+s/2,M=Zr([_,S],O);return[_,S,M]};if(f){const[_,S,M]=w(),T=t.ruleX||y(_,S,M);T.style.cx=_,T.style.cy=S,T.style.r=M,t.ruleX=T}else{const[_,S,M,T]=E(),A=t.ruleX||m(_,S,M,T);A.style.x1=_,A.style.x2=S,A.style.y1=M,A.style.y2=T,t.ruleX=A}}function cat(t,e,n){var{plotWidth:r,plotHeight:i,mainWidth:o,mainHeight:a,startX:s,startY:c,transposed:l,polar:u,insetLeft:f,insetTop:d}=n,h=md(n,["plotWidth","plotHeight","mainWidth","mainHeight","startX","startY","transposed","polar","insetLeft","insetTop"]);const p=Object.assign({lineWidth:1,stroke:"#1b1e23",strokeOpacity:.5},h),v=e.map(T=>T[1]),y=e.map(T=>T[0]),m=Mg(v),b=Mg(y),O=()=>{if(u){const T=Math.min(o,a)/2,A=s+f+o/2,C=c+d+a/2,N=Rs(ci([b,m],[A,C])),k=A+T*Math.cos(N),R=C+T*Math.sin(N);return[A,k,C,R]}return l?[s,s+r,m+c,m+c]:[b+s,b+s,c,c+i]},[E,w,_,S]=O(),M=()=>{const T=new Ce({style:Object.assign({x1:E,x2:w,y1:_,y2:S},p)});return t.appendChild(T),T};if(y.length>0){const T=t.ruleY||M();T.style.x1=E,T.style.x2=w,T.style.y1=_,T.style.y2=S,t.ruleY=T}}function YF(t){t.ruleY&&(t.ruleY.remove(),t.ruleY=void 0)}function HF(t){t.ruleX&&(t.ruleX.remove(),t.ruleX=void 0)}function lat(t,{data:e,style:n,theme:r}){t.markers&&t.markers.forEach(a=>a.remove());const{type:i=""}=n,o=e.filter(a=>{const[{x:s,y:c}]=a;return mr(s)&&mr(c)}).map(a=>{const[{color:s,element:c},l]=a,u=s||c.style.fill||c.style.stroke||r.color,f=i==="hollow"?"transparent":u,d=i==="hollow"?u:"#fff";return new st({className:"g2-tooltip-marker",style:Object.assign({cx:l[0],cy:l[1],fill:f,r:4,stroke:d,lineWidth:2},n)})});for(const a of o)t.appendChild(a);t.markers=o}function UF(t){t.markers&&(t.markers.forEach(e=>e.remove()),t.markers=[])}function VF(t,e){return Array.from(t.values()).some(n=>{var r;return(r=n.interaction)===null||r===void 0?void 0:r[e]})}function Vl(t,e){return t===void 0?e:t}function XF(t){const{title:e,items:n}=t;return n.length===0&&e===void 0}function uat(t){return Array.from(t.values()).some(e=>{var n;return((n=e.interaction)===null||n===void 0?void 0:n.seriesTooltip)&&e.tooltip})}function $F(t,e){var{elements:n,sort:r,filter:i,scale:o,coordinate:a,crosshairs:s,crosshairsX:c,crosshairsY:l,render:u,groupName:f,emitter:d,wait:h=50,leading:p=!0,trailing:v=!1,startX:y=0,startY:m=0,body:b=!0,single:O=!0,position:E,enterable:w,mount:_,bounding:S,theme:M,offset:T,disableNative:A=!1,marker:C=!0,preserve:N=!1,style:k={},css:R={}}=e,I=md(e,["elements","sort","filter","scale","coordinate","crosshairs","crosshairsX","crosshairsY","render","groupName","emitter","wait","leading","trailing","startX","startY","body","single","position","enterable","mount","bounding","theme","offset","disableNative","marker","preserve","style","css"]);const D=n(t),B=Rr(a),F=ar(a),G=bt(k,I),{innerWidth:X,innerHeight:q,width:J,height:et,insetLeft:dt,insetTop:_t}=a.getOptions(),Dt=[],pt=[];for(const ve of D){const{__data__:je}=ve,{seriesX:hn,title:yn,items:br}=je;hn?Dt.push(ve):(yn||br)&&pt.push(ve)}const vt=ve=>ve.markType==="interval",Qt=pt.length&&pt.every(vt)&&!ar(a),Bt=ve=>ve.__data__.x,$t=!!o.x.getBandWidth&&pt.length>0;Dt.sort((ve,je)=>{const hn=B?0:1,yn=br=>br.getBounds().min[hn];return B?yn(je)-yn(ve):yn(ve)-yn(je)});const de=ve=>{const je=B?1:0,{min:hn,max:yn}=ve.getLocalBounds();return fc([hn[je],yn[je]])};Qt?D.sort((ve,je)=>Bt(ve)-Bt(je)):pt.sort((ve,je)=>{const[hn,yn]=de(ve),[br,mi]=de(je),xi=(hn+yn)/2,Ao=(br+mi)/2;return B?Ao-xi:xi-Ao});const ye=new Map(Dt.map(ve=>{const{__data__:je}=ve,{seriesX:hn}=je,yn=hn.map((mi,xi)=>xi),br=fc(yn,mi=>hn[+mi]);return[ve,[br,hn]]})),{x:Se}=o,qe=Se!=null&&Se.getBandWidth?Se.getBandWidth()/2:0,Me=ve=>{const[je]=a.invert(ve);return je-qe},De=(ve,je,hn,yn)=>{const{_x:br}=ve,mi=br!==void 0?Se.map(br):Me(je),xi=yn.filter(mr),[Ao,Ws]=fc([xi[0],xi[xi.length-1]]),gc=Ao===Ws;if(!$t&&(mi<Ao||mi>Ws)&&!gc)return null;const Bp=Hu(Ql=>yn[+Ql]).center,oy=Bp(hn,mi);return hn[oy]},An=Qt?(ve,je)=>{const hn=Hu(Bt).center,yn=hn(je,Me(ve)),br=je[yn];return Nr(je,Bt).get(Bt(br))}:(ve,je)=>{const yn=ve[B?1:0],br=je.filter(Ao=>{const[Ws,gc]=de(Ao);return yn>=Ws&&yn<=gc});if(!$t||br.length>0)return br;const mi=Hu(Ao=>{const[Ws,gc]=de(Ao);return(Ws+gc)/2}).center,xi=mi(je,yn);return[je[xi]].filter(mr)},jn=(ve,je)=>{const{__data__:hn}=ve;return Object.fromEntries(Object.entries(hn).filter(([yn])=>yn.startsWith("series")&&yn!=="series").map(([yn,br])=>{const mi=br[je];return[MR(yn.replace("series","")),mi]}))},zr=yd(ve=>{var je;const hn=rg(t,ve);if(!hn)return;const yn=YI(t),br=yn.min[0],mi=yn.min[1],xi=[hn[0]-y,hn[1]-m];if(!xi)return;const Ao=An(xi,pt),Ws=[],gc=[];for(const Ci of Dt){const[sy,nA]=ye.get(Ci),cy=De(ve,xi,sy,nA);if(cy!==null){Ws.push(Ci);const v_=jn(Ci,cy),{x:e0t,y:n0t}=v_,r0t=a.map([(e0t||0)+qe,n0t||0]);gc.push([Object.assign(Object.assign({},v_),{element:Ci}),r0t])}}const Bp=Array.from(new Set(gc.map(Ci=>Ci[0].x))),oy=Bp[Sg(Bp,Ci=>Math.abs(Ci-Me(xi)))],Ql=gc.filter(Ci=>Ci[0].x===oy),tA=[...Ql.map(Ci=>Ci[0]),...Ao.map(Ci=>Ci.__data__)],p_=[...Ws,...Ao],ay=WF(p_,o,f,tA,M);if(r&&ay.items.sort((Ci,sy)=>r(Ci)-r(sy)),i&&(ay.items=ay.items.filter(i)),p_.length===0||XF(ay)){Vn(ve);return}if(b&&FF({root:t,data:ay,x:hn[0]+br,y:hn[1]+mi,render:u,event:ve,single:O,position:E,enterable:w,mount:_,bounding:S,css:R,offset:T}),s||c||l){const Ci=Xt(G,"crosshairs"),sy=Object.assign(Object.assign({},Ci),Xt(G,"crosshairsX")),nA=Object.assign(Object.assign({},Ci),Xt(G,"crosshairsY")),cy=Ql.map(v_=>v_[1]);c&&sat(t,cy,hn,Object.assign(Object.assign({},sy),{plotWidth:X,plotHeight:q,mainWidth:J,mainHeight:et,insetLeft:dt,insetTop:_t,startX:y,startY:m,transposed:B,polar:F})),l&&cat(t,cy,Object.assign(Object.assign({},nA),{plotWidth:X,plotHeight:q,mainWidth:J,mainHeight:et,insetLeft:dt,insetTop:_t,startX:y,startY:m,transposed:B,polar:F}))}if(C){const Ci=Xt(G,"marker");lat(t,{data:Ql,style:Ci,theme:M})}const eA=(je=Ql[0])===null||je===void 0?void 0:je[0].x,t0t=eA!=null?eA:Me(xi);d.emit("tooltip:show",Object.assign(Object.assign({},ve),{nativeEvent:!0,data:{data:{x:up(o.x,t0t,!0)}}}))},h,{leading:p,trailing:v}),Vn=ve=>{ef({root:t,single:O,emitter:d,event:ve})},Jr=()=>{dP({root:t,single:O})},Gn=ve=>{var je,{nativeEvent:hn,data:yn,offsetX:br,offsetY:mi}=ve,xi=md(ve,["nativeEvent","data","offsetX","offsetY"]);if(hn)return;const Ao=(je=yn==null?void 0:yn.data)===null||je===void 0?void 0:je.x,gc=o.x.map(Ao),[Bp,oy]=a.map([gc,.5]),Ql=t.getRenderBounds(),tA=Ql.min[0],p_=Ql.min[1];zr(Object.assign(Object.assign({},xi),{offsetX:br!==void 0?br:tA+Bp,offsetY:mi!==void 0?mi:p_+oy,_x:Ao}))},Ti=()=>{ef({root:t,single:O,emitter:d,nativeEvent:!1})},en=()=>{Qr(),Jr()},ln=()=>{Ai()},Ai=()=>{A||(t.addEventListener("pointerenter",zr),t.addEventListener("pointermove",zr),t.addEventListener("pointerleave",ve=>{rg(t,ve)||Vn(ve)}))},Qr=()=>{A||(t.removeEventListener("pointerenter",zr),t.removeEventListener("pointermove",zr),t.removeEventListener("pointerleave",Vn))};return Ai(),d.on("tooltip:show",Gn),d.on("tooltip:hide",Ti),d.on("tooltip:disable",en),d.on("tooltip:enable",ln),()=>{Qr(),d.off("tooltip:show",Gn),d.off("tooltip:hide",Ti),d.off("tooltip:disable",en),d.off("tooltip:enable",ln),N?ef({root:t,single:O,emitter:d,nativeEvent:!1}):Jr()}}function fat(t,{elements:e,coordinate:n,scale:r,render:i,groupName:o,sort:a,filter:s,emitter:c,wait:l=50,leading:u=!0,trailing:f=!1,groupKey:d=C=>C,single:h=!0,position:p,enterable:v,datum:y,view:m,mount:b,bounding:O,theme:E,offset:w,shared:_=!1,body:S=!0,disableNative:M=!1,preserve:T=!1,css:A={}}){var C,N;const k=e(t),R=Nr(k,d),I=Rt=>Rt.markType==="interval",D=k.every(I)&&!ar(n),B=r.x,F=r.series,G=(N=(C=B==null?void 0:B.getBandWidth)===null||C===void 0?void 0:C.call(B))!==null&&N!==void 0?N:0,X=F?Rt=>Rt.__data__.x:Rt=>Rt.__data__.x+G/2;D&&k.sort((Rt,$t)=>X(Rt)-X($t));const q=Rt=>{const{target:$t}=Rt;return Ix($t,de=>de.classList?de.classList.includes("element"):!1)},J=D?Rt=>{const $t=rg(t,Rt);if(!$t)return;const[de]=n.invert($t),ye=Hu(X).center,Se=ye(k,de),qe=k[Se];return!_&&k.find(De=>De!==qe&&X(De)===X(qe))?q(Rt):qe}:q,et=yd(Rt=>{const $t=J(Rt);if(!$t){ef({root:t,single:h,emitter:c,event:Rt});return}const de=d($t),ye=R.get(de);if(!ye)return;const Se=ye.length===1&&!_?oat(ye[0]):WF(ye,r,o,void 0,E);if(a&&Se.items.sort((De,An)=>a(De)-a(An)),s&&(Se.items=Se.items.filter(s)),XF(Se)){ef({root:t,single:h,emitter:c,event:Rt});return}const{offsetX:qe,offsetY:Me}=Rt;S&&FF({root:t,data:Se,x:qe,y:Me,render:i,event:Rt,single:h,position:p,enterable:v,mount:b,bounding:O,css:A,offset:w}),c.emit("tooltip:show",Object.assign(Object.assign({},Rt),{nativeEvent:!0,data:{data:qI($t,m)}}))},l,{leading:u,trailing:f}),dt=Rt=>{ef({root:t,single:h,emitter:c,event:Rt})},_t=()=>{M||(t.addEventListener("pointermove",et),t.addEventListener("pointerleave",dt))},Dt=()=>{M||(t.removeEventListener("pointermove",et),t.removeEventListener("pointerleave",dt))},pt=({nativeEvent:Rt,offsetX:$t,offsetY:de,data:ye})=>{if(Rt)return;const{data:Se}=ye,qe=QS(k,Se,y);if(!qe)return;const Me=qe.getBBox(),{x:De,y:An,width:jn,height:zr}=Me,Vn=t.getBBox();et({target:qe,offsetX:$t!==void 0?$t+Vn.x:De+jn/2,offsetY:de!==void 0?de+Vn.y:An+zr/2})},vt=({nativeEvent:Rt}={})=>{Rt||ef({root:t,single:h,emitter:c,nativeEvent:!1})},Qt=()=>{Dt(),dP({root:t,single:h})},Bt=()=>{_t()};return c.on("tooltip:show",pt),c.on("tooltip:hide",vt),c.on("tooltip:enable",Bt),c.on("tooltip:disable",Qt),_t(),()=>{Dt(),c.off("tooltip:show",pt),c.off("tooltip:hide",vt),T?ef({root:t,single:h,emitter:c,nativeEvent:!1}):dP({root:t,single:h})}}function qF(t){const{shared:e,crosshairs:n,crosshairsX:r,crosshairsY:i,series:o,name:a,item:s=()=>({}),facet:c=!1}=t,l=md(t,["shared","crosshairs","crosshairsX","crosshairsY","series","name","item","facet"]);return(u,f,d)=>{const{container:h,view:p}=u,{scale:v,markState:y,coordinate:m,theme:b}=p,O=VF(y,"seriesTooltip"),E=VF(y,"crosshairs"),w=Qc(h),_=Vl(o,O),S=Vl(n,E);if(_&&uat(y)&&!c)return $F(w,Object.assign(Object.assign({},l),{theme:b,elements:Vu,scale:v,coordinate:m,crosshairs:S,crosshairsX:Vl(Vl(r,n),!1),crosshairsY:Vl(i,S),item:s,emitter:d}));if(_&&c){const M=f.filter(R=>R!==u&&R.options.parentKey===u.options.key),T=WI(u,f),A=M[0].view.scale,C=w.getBounds(),N=C.min[0],k=C.min[1];return Object.assign(A,{facet:!0}),$F(w.parentNode.parentNode,Object.assign(Object.assign({},l),{theme:b,elements:()=>T,scale:A,coordinate:m,crosshairs:Vl(n,E),crosshairsX:Vl(Vl(r,n),!1),crosshairsY:Vl(i,S),item:s,startX:N,startY:k,emitter:d}))}return fat(w,Object.assign(Object.assign({},l),{datum:cd(p),elements:Vu,scale:v,coordinate:m,groupKey:e?JS(p):void 0,item:s,emitter:d,view:p,theme:b,shared:e}))}}qF.props={reapplyWhenUpdate:!0};var yb=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(u){try{l(r.next(u))}catch(f){a(f)}}function c(u){try{l(r.throw(u))}catch(f){a(f)}}function l(u){u.done?o(u.value):i(u.value).then(s,c)}l((r=r.apply(t,e||[])).next())})};const KF="legend-category",dat="legend-continuous",hat="items-item",pat="legend-category-item-marker",vat="legend-category-item-label";function ZF(t){return t.getElementsByClassName(pat)[0]}function JF(t){return t.getElementsByClassName(vat)[0]}function QF(t){return t.getElementsByClassName(hat)}function hP(t){return t.getElementsByClassName(KF)}function t6(t){return t.getElementsByClassName(dat)}function gat(t,e){[...hP(t),...t6(t)].forEach(r=>{e(r,i=>i)})}function pP(t){let e=t.parentNode;for(;e&&!e.__data__;)e=e.parentNode;return e.__data__}function Vgt(t){let e=t;for(;e&&!e.attr("class").startsWith("legend");)e=e.children[0];return e.attributes}function yat(t,{legends:e,marker:n,label:r,datum:i,filter:o,emitter:a,channel:s,state:c={}}){const l=new Map,u=new Map,f=new Map,{unselected:d={markerStroke:"#aaa",markerFill:"#aaa",labelFill:"#aaa"}}=c,h={unselected:Xt(d,"marker")},p={unselected:Xt(d,"label")},{setState:v,removeState:y}=Hl(h,void 0),{setState:m,removeState:b}=Hl(p,void 0),O=Array.from(e(t));let E=O.map(i);const w=()=>{for(const M of O){const T=i(M),A=n(M),C=r(M);E.includes(T)?(y(A,"unselected"),b(C,"unselected")):(v(A,"unselected"),m(C,"unselected"))}};for(const M of O){const T=()=>{Xu(t,"pointer")},A=()=>{cJ(t)},C=N=>yb(this,void 0,void 0,function*(){const k=i(M),R=E.indexOf(k);R===-1?E.push(k):E.splice(R,1),yield o(E),w();const{nativeEvent:I=!0}=N;I&&(E.length===O.length?a.emit("legend:reset",{nativeEvent:I}):a.emit("legend:filter",Object.assign(Object.assign({},N),{nativeEvent:I,data:{channel:s,values:E}})))});M.addEventListener("click",C),M.addEventListener("pointerenter",T),M.addEventListener("pointerout",A),l.set(M,C),u.set(M,T),f.set(M,A)}const _=M=>yb(this,void 0,void 0,function*(){const{nativeEvent:T}=M;if(T)return;const{data:A}=M,{channel:C,values:N}=A;C===s&&(E=N,yield o(E),w())}),S=M=>yb(this,void 0,void 0,function*(){const{nativeEvent:T}=M;T||(E=O.map(i),yield o(E),w())});return a.on("legend:filter",_),a.on("legend:reset",S),()=>{for(const M of O)M.removeEventListener("click",l.get(M)),M.removeEventListener("pointerenter",u.get(M)),M.removeEventListener("pointerout",f.get(M)),a.off("legend:filter",_),a.off("legend:reset",S)}}function mat(t,{legend:e,filter:n,emitter:r,channel:i}){const o=({detail:{value:a}})=>{n(a),r.emit({nativeEvent:!0,data:{channel:i,values:a}})};return e.addEventListener("valuechange",o),()=>{e.removeEventListener("valuechange",o)}}function e6(t,{legend:e,channel:n,value:r,ordinal:i,channels:o,allChannels:a,facet:s=!1}){return yb(this,void 0,void 0,function*(){const{view:c,update:l,setState:u}=t;u(e,f=>{const{marks:d}=f,h=d.map(p=>{if(p.type==="legends")return p;const{transform:v=[],data:y=[]}=p,m=v.findIndex(({type:E})=>E.startsWith("group")||E.startsWith("bin")),b=[...v];y.length&&b.splice(m+1,0,{type:"filter",[n]:{value:r,ordinal:i}});const O=Object.fromEntries(o.map(E=>[E,{domain:c.scale[E].getOptions().domain}]));return bt({},p,Object.assign(Object.assign({transform:b,scale:O},!i&&{animate:!1}),{legend:s?!1:Object.fromEntries(a.map(E=>[E,{preserve:!0}]))}))});return Object.assign(Object.assign({},f),{marks:h})}),yield l()})}function xat(t,e){for(const n of t)e6(n,Object.assign(Object.assign({},e),{facet:!0}))}function bat(){return(t,e,n)=>{const{container:r}=t,i=e.filter(f=>f!==t),o=i.length>0,a=f=>pP(f).scales.map(d=>d.name),s=[...hP(r),...t6(r)],c=s.flatMap(a),l=o?yd(xat,50,{trailing:!0}):yd(e6,50,{trailing:!0}),u=s.map(f=>{const{name:d,domain:h}=pP(f).scales[0],p=a(f),v={legend:f,channel:d,channels:p,allChannels:c};return f.className===KF?yat(r,{legends:QF,marker:ZF,label:JF,datum:y=>{const{__data__:m}=y,{index:b}=m;return h[b]},filter:y=>{const m=Object.assign(Object.assign({},v),{value:y,ordinal:!0});l(o?i:t,m)},state:f.attributes.state,channel:d,emitter:n}):mat(r,{legend:f,filter:y=>{const m=Object.assign(Object.assign({},v),{value:y,ordinal:!1});l(o?i:t,m)},emitter:n,channel:d})});return()=>{u.forEach(f=>f())}}}function _at(){return(t,e,n)=>{const{container:r,view:i,options:o}=t,a=hP(r),s=Vu(r),c=h=>pP(h).scales[0].name,l=h=>{const{scale:{[h]:p}}=i;return p},u=dp(o,["active","inactive"]),f=ig(s,cd(i)),d=[];for(const h of a){const p=X=>{const{data:q}=h.attributes,{__data__:J}=X,{index:et}=J;return q[et].label},v=c(h),y=QF(h),m=l(v),b=Nr(s,X=>m.invert(X.__data__[v])),{state:O={}}=h.attributes,{inactive:E={}}=O,{setState:w,removeState:_}=Hl(u,f),S={inactive:Xt(E,"marker")},M={inactive:Xt(E,"label")},{setState:T,removeState:A}=Hl(S),{setState:C,removeState:N}=Hl(M),k=X=>{for(const q of y){const J=ZF(q),et=JF(q);q===X||X===null?(A(J,"inactive"),N(et,"inactive")):(T(J,"inactive"),C(et,"inactive"))}},R=(X,q)=>{const J=p(q),et=new Set(b.get(J));for(const _t of s)et.has(_t)?w(_t,"active"):w(_t,"inactive");k(q);const{nativeEvent:dt=!0}=X;dt&&n.emit("legend:highlight",Object.assign(Object.assign({},X),{nativeEvent:dt,data:{channel:v,value:J}}))},I=new Map;for(const X of y){const q=J=>{R(J,X)};X.addEventListener("pointerover",q),I.set(X,q)}const D=X=>{for(const J of s)_(J,"inactive","active");k(null);const{nativeEvent:q=!0}=X;q&&n.emit("legend:unhighlight",{nativeEvent:q})},B=X=>{const{nativeEvent:q,data:J}=X;if(q)return;const{channel:et,value:dt}=J;if(et!==v)return;const _t=y.find(Dt=>p(Dt)===dt);_t&&R({nativeEvent:!1},_t)},F=X=>{const{nativeEvent:q}=X;q||D({nativeEvent:!1})};h.addEventListener("pointerleave",D),n.on("legend:highlight",B),n.on("legend:unhighlight",F);const G=()=>{h.removeEventListener(D),n.off("legend:highlight",B),n.off("legend:unhighlight",F);for(const[X,q]of I)X.removeEventListener(q)};d.push(G)}return()=>d.forEach(h=>h())}}var Bs=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function wat(t,e){const[n,r,i,o]=t,[a,s,c,l]=e;return!(a>i||c<n||s>o||l<r)}function Oat(t,e,n,r,i){const[o,a,s,c]=i;return[Math.max(o,Math.min(t,n)),Math.max(a,Math.min(e,r)),Math.min(s,Math.max(t,n)),Math.min(c,Math.max(e,r))]}function Eat(t){const{width:e,height:n}=t.getBBox();return[0,0,e,n]}function Xl(t,e){for(const[n,r]of Object.entries(e))t.style(n,r)}const n6=cp(t=>{const e=t.attributes,{x:n,y:r,width:i,height:o,class:a,renders:s={},handleSize:c=10,document:l}=e,u=Bs(e,["x","y","width","height","class","renders","handleSize","document"]);if(!l||i===void 0||o===void 0||n===void 0||r===void 0)return;const f=c/2,d=(dt,_t,Dt)=>{dt.handle||(dt.handle=Dt.createElement("rect"),dt.append(dt.handle));const{handle:pt}=dt;return pt.attr(_t),pt},h=Xt(nS(u,"handleNW","handleNE"),"handleN"),{render:p=d}=h,v=Bs(h,["render"]),y=Xt(u,"handleE"),{render:m=d}=y,b=Bs(y,["render"]),O=Xt(nS(u,"handleSE","handleSW"),"handleS"),{render:E=d}=O,w=Bs(O,["render"]),_=Xt(u,"handleW"),{render:S=d}=_,M=Bs(_,["render"]),T=Xt(u,"handleNW"),{render:A=d}=T,C=Bs(T,["render"]),N=Xt(u,"handleNE"),{render:k=d}=N,R=Bs(N,["render"]),I=Xt(u,"handleSE"),{render:D=d}=I,B=Bs(I,["render"]),F=Xt(u,"handleSW"),{render:G=d}=F,X=Bs(F,["render"]),q=(dt,_t)=>{const{id:Dt}=dt,pt=_t(dt,dt.attributes,l);pt.id=Dt,pt.style.draggable=!0},J=dt=>()=>{const _t=cp(Dt=>q(Dt,dt));return new _t({})},et=Ie(t).attr("className",a).style("transform",`translate(${n}, ${r})`).style("draggable",!0);et.maybeAppend("selection","rect").style("draggable",!0).style("fill","transparent").call(Xl,Object.assign(Object.assign({width:i,height:o},nS(u,"handle")),{transform:void 0})),et.maybeAppend("handle-n",J(p)).style("x",f).style("y",-f).style("width",i-c).style("height",c).style("fill","transparent").call(Xl,v),et.maybeAppend("handle-e",J(m)).style("x",i-f).style("y",f).style("width",c).style("height",o-c).style("fill","transparent").call(Xl,b),et.maybeAppend("handle-s",J(E)).style("x",f).style("y",o-f).style("width",i-c).style("height",c).style("fill","transparent").call(Xl,w),et.maybeAppend("handle-w",J(S)).style("x",-f).style("y",f).style("width",c).style("height",o-c).style("fill","transparent").call(Xl,M),et.maybeAppend("handle-nw",J(A)).style("x",-f).style("y",-f).style("width",c).style("height",c).style("fill","transparent").call(Xl,C),et.maybeAppend("handle-ne",J(k)).style("x",i-f).style("y",-f).style("width",c).style("height",c).style("fill","transparent").call(Xl,R),et.maybeAppend("handle-se",J(D)).style("x",i-f).style("y",o-f).style("width",c).style("height",c).style("fill","transparent").call(Xl,B),et.maybeAppend("handle-sw",J(G)).style("x",-f).style("y",o-f).style("width",c).style("height",c).style("fill","transparent").call(Xl,X)});function vP(t,e){var{brushed:n=()=>{},brushended:r=()=>{},brushcreated:i=()=>{},brushstarted:o=()=>{},brushupdated:a=()=>{},extent:s=Eat(t),brushRegion:c=(pt,vt,Qt,Bt,Rt)=>[pt,vt,Qt,Bt],reverse:l=!1,fill:u="#777",fillOpacity:f="0.3",stroke:d="#fff",selectedHandles:h=["handle-n","handle-e","handle-s","handle-w","handle-nw","handle-ne","handle-se","handle-sw"]}=e,p=Bs(e,["brushed","brushended","brushcreated","brushstarted","brushupdated","extent","brushRegion","reverse","fill","fillOpacity","stroke","selectedHandles"]);let v=null,y=null,m=null,b=null,O=null,E=!1;const[w,_,S,M]=s;Xu(t,"crosshair"),t.style.draggable=!0;const T=(pt,vt,Qt)=>{if(o(Qt),b&&b.remove(),O&&O.remove(),v=[pt,vt],l)return A();C()},A=()=>{O=new ke({style:Object.assign(Object.assign({},p),{fill:u,fillOpacity:f,stroke:d,pointerEvents:"none"})}),b=new n6({style:{x:0,y:0,width:0,height:0,draggable:!0,document:t.ownerDocument},className:"mask"}),t.appendChild(O),t.appendChild(b)},C=()=>{b=new n6({style:Object.assign(Object.assign({document:t.ownerDocument,x:0,y:0},p),{fill:u,fillOpacity:f,stroke:d,draggable:!0}),className:"mask"}),t.appendChild(b)},N=(pt=!0)=>{b&&b.remove(),O&&O.remove(),v=null,y=null,m=null,E=!1,b=null,O=null,r(pt)},k=(pt,vt,Qt=!0)=>{const[Bt,Rt,$t,de]=Oat(pt[0],pt[1],vt[0],vt[1],s),[ye,Se,qe,Me]=c(Bt,Rt,$t,de,s);return l?I(ye,Se,qe,Me):R(ye,Se,qe,Me),n(ye,Se,qe,Me,Qt),[ye,Se,qe,Me]},R=(pt,vt,Qt,Bt)=>{b.style.x=pt,b.style.y=vt,b.style.width=Qt-pt,b.style.height=Bt-vt},I=(pt,vt,Qt,Bt)=>{O.style.d=`
      M${w},${_}L${S},${_}L${S},${M}L${w},${M}Z
      M${pt},${vt}L${pt},${Bt}L${Qt},${Bt}L${Qt},${vt}Z
    `,b.style.x=pt,b.style.y=vt,b.style.width=Qt-pt,b.style.height=Bt-vt},D=pt=>{const vt=(Se,qe,Me,De,An)=>Se+qe<De?De-qe:Se+Me>An?An-Me:Se,Qt=pt[0]-m[0],Bt=pt[1]-m[1],Rt=vt(Qt,v[0],y[0],w,S),$t=vt(Bt,v[1],y[1],_,M),de=[v[0]+Rt,v[1]+$t],ye=[y[0]+Rt,y[1]+$t];k(de,ye)},B={"handle-n":{vector:[0,1,0,0],cursor:"ns-resize"},"handle-e":{vector:[0,0,1,0],cursor:"ew-resize"},"handle-s":{vector:[0,0,0,1],cursor:"ns-resize"},"handle-w":{vector:[1,0,0,0],cursor:"ew-resize"},"handle-nw":{vector:[1,1,0,0],cursor:"nwse-resize"},"handle-ne":{vector:[0,1,1,0],cursor:"nesw-resize"},"handle-se":{vector:[0,0,1,1],cursor:"nwse-resize"},"handle-sw":{vector:[1,0,0,1],cursor:"nesw-resize"}},F=pt=>X(pt)||G(pt),G=pt=>{const{id:vt}=pt;return h.indexOf(vt)===-1?!1:new Set(Object.keys(B)).has(vt)},X=pt=>pt===b.getElementById("selection"),q=pt=>{const{target:vt}=pt,[Qt,Bt]=ZS(t,pt);if(!b||!F(vt)){T(Qt,Bt,pt),E=!0;return}F(vt)&&(m=[Qt,Bt])},J=pt=>{const{target:vt}=pt,Qt=ZS(t,pt);if(!v)return;if(!m)return k(v,Qt);if(X(vt))return D(Qt);const[Bt,Rt]=[Qt[0]-m[0],Qt[1]-m[1]],{id:$t}=vt;if(B[$t]){const[de,ye,Se,qe]=B[$t].vector;return k([v[0]+Bt*de,v[1]+Rt*ye],[y[0]+Bt*Se,y[1]+Rt*qe])}},et=pt=>{if(m){m=null;const{x:$t,y:de,width:ye,height:Se}=b.style;v=[$t,de],y=[$t+ye,de+Se],a($t,de,$t+ye,de+Se,pt);return}y=ZS(t,pt);const[vt,Qt,Bt,Rt]=k(v,y);E=!1,i(vt,Qt,Bt,Rt,pt)},dt=pt=>{const{target:vt}=pt;b&&!F(vt)&&N()},_t=pt=>{const{target:vt}=pt;!b||!F(vt)||E?Xu(t,"crosshair"):X(vt)?Xu(t,"move"):G(vt)&&Xu(t,B[vt.id].cursor)},Dt=()=>{Xu(t,"default")};return t.addEventListener("dragstart",q),t.addEventListener("drag",J),t.addEventListener("dragend",et),t.addEventListener("click",dt),t.addEventListener("pointermove",_t),t.addEventListener("pointerleave",Dt),{mask:b,move(pt,vt,Qt,Bt,Rt=!0){b||T(pt,vt,{}),v=[pt,vt],y=[Qt,Bt],k([pt,vt],[Qt,Bt],Rt)},remove(pt=!0){b&&N(pt)},destroy(){b&&N(!1),Xu(t,"default"),t.removeEventListener("dragstart",q),t.removeEventListener("drag",J),t.removeEventListener("dragend",et),t.removeEventListener("click",dt),t.removeEventListener("pointermove",_t),t.removeEventListener("pointerleave",Dt)}}}function gP(t,e,n){return e.filter(r=>{if(r===t)return!1;const{interaction:i={}}=r.options;return Object.values(i).find(o=>o.brushKey===n)})}function Sat(t,e,n){return gP(t,e,n).map(r=>Qc(r.container))}function Mat(t,e,n){return gP(t,e,n).map(r=>r.options)}function r6(t,e){var{elements:n,selectedHandles:r,siblings:i=J=>[],datum:o,brushRegion:a,extent:s,reverse:c,scale:l,coordinate:u,series:f=!1,key:d=J=>J,bboxOf:h=J=>{const{x:et,y:dt,width:_t,height:Dt}=J.style;return{x:et,y:dt,width:_t,height:Dt}},state:p={},emitter:v}=e,y=Bs(e,["elements","selectedHandles","siblings","datum","brushRegion","extent","reverse","scale","coordinate","series","key","bboxOf","state","emitter"]);const m=n(t),b=i(t),O=b.flatMap(n),E=ig(m,o),w=Xt(y,"mask"),{setState:_,removeState:S}=Hl(p,E),M=new Map,{width:T,height:A,x:C=0,y:N=0}=h(t),k=s||[0,0,T,A],R=()=>{for(const J of[...m,...O])S(J,"active","inactive")},I=(J,et,dt,_t)=>{var Dt;for(const vt of b)(Dt=vt.brush)===null||Dt===void 0||Dt.remove();const pt=new Set;for(const vt of m){const{min:Qt,max:Bt}=vt.getLocalBounds(),[Rt,$t]=Qt,[de,ye]=Bt;wat([Rt,$t,de,ye],[J,et,dt,_t])?(_(vt,"active"),pt.add(d(vt))):_(vt,"inactive")}for(const vt of O)pt.has(d(vt))?_(vt,"active"):_(vt,"inactive")},D=()=>{for(const J of m)S(J,"inactive");for(const J of M.values())J.remove();M.clear()},B=(J,et,dt,_t)=>{const Dt=vt=>{const Qt=vt.cloneNode();return Qt.__data__=vt.__data__,vt.parentNode.appendChild(Qt),M.set(vt,Qt),Qt},pt=new cn({style:{x:J+C,y:et+N,width:dt-J,height:_t-et}});t.appendChild(pt);for(const vt of m){const Qt=M.get(vt)||Dt(vt);Qt.style.clipPath=pt,_(vt,"inactive"),_(Qt,"active")}},F=vP(t,Object.assign(Object.assign({},w),{extent:k,brushRegion:a,reverse:c,selectedHandles:r,brushended:J=>{const et=f?D:R;J&&v.emit("brush:remove",{nativeEvent:!0}),et()},brushed:(J,et,dt,_t,Dt)=>{const pt=Mx(J,et,dt,_t,l,u);Dt&&v.emit("brush:highlight",{nativeEvent:!0,data:{selection:pt}}),(f?B:I)(J,et,dt,_t)},brushcreated:(J,et,dt,_t,Dt)=>{const pt=Mx(J,et,dt,_t,l,u);v.emit("brush:end",Object.assign(Object.assign({},Dt),{nativeEvent:!0,data:{selection:pt}}))},brushupdated:(J,et,dt,_t,Dt)=>{const pt=Mx(J,et,dt,_t,l,u);v.emit("brush:end",Object.assign(Object.assign({},Dt),{nativeEvent:!0,data:{selection:pt}}))},brushstarted:J=>{v.emit("brush:start",J)}})),G=({nativeEvent:J,data:et})=>{if(J)return;const{selection:dt}=et,[_t,Dt,pt,vt]=$Z(dt,l,u);F.move(_t,Dt,pt,vt,!1)};v.on("brush:highlight",G);const X=({nativeEvent:J}={})=>{J||F.remove(!1)};v.on("brush:remove",X);const q=F.destroy.bind(F);return F.destroy=()=>{v.off("brush:highlight",G),v.off("brush:remove",X),q()},F}function yP(t){var{facet:e,brushKey:n}=t,r=Bs(t,["facet","brushKey"]);return(i,o,a)=>{const{container:s,view:c,options:l}=i,u=Qc(s),f={maskFill:"#777",maskFillOpacity:"0.3",maskStroke:"#fff",reverse:!1},d=["active",["inactive",{opacity:.5}]],{scale:h,coordinate:p}=c;if(e){const y=u.getBounds(),m=y.min[0],b=y.min[1],O=y.max[0],E=y.max[1];return r6(u.parentNode.parentNode,Object.assign(Object.assign({elements:()=>WI(i,o),datum:cd(KS(i,o).map(w=>w.view)),brushRegion:(w,_,S,M)=>[w,_,S,M],extent:[m,b,O,E],state:dp(KS(i,o).map(w=>w.options),d),emitter:a,scale:h,coordinate:p,selectedHandles:void 0},f),r))}const v=r6(u,Object.assign(Object.assign({elements:Vu,key:y=>y.__data__.key,siblings:()=>Sat(i,o,n),datum:cd([c,...gP(i,o,n).map(y=>y.view)]),brushRegion:(y,m,b,O)=>[y,m,b,O],extent:void 0,state:dp([l,...Mat(i,o,n)],d),emitter:a,scale:h,coordinate:p,selectedHandles:void 0},f),r));return u.brush=v,()=>v.destroy()}}function mP(t,e,n,r,i){const[,o,,a]=i;return[t,o,n,a]}function Pat(t){return yP(Object.assign(Object.assign({},t),{brushRegion:mP,selectedHandles:["handle-e","handle-w"]}))}function xP(t,e,n,r,i){const[o,,a]=i;return[o,e,a,r]}function Tat(t){return yP(Object.assign(Object.assign({},t),{brushRegion:xP,selectedHandles:["handle-n","handle-s"]}))}var bP=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const Aat="axis",Cat="axis-line",kat="axis-main-group",i6="axis-hot-area";function Nat(t){return t.getElementsByClassName(Aat)}function o6(t){return t.getElementsByClassName(Cat)[0]}function Rat(t){return t.getElementsByClassName(kat)[0]}function a6(t){return Rat(t).getLocalBounds()}function Lat(t,e){var{cross:n,offsetX:r,offsetY:i}=e,o=bP(e,["cross","offsetX","offsetY"]);const a=a6(t),s=o6(t),[c]=s.getLocalBounds().min,[l,u]=a.min,[f,d]=a.max,h=(f-l)*2;return{brushRegion:xP,hotZone:new cn({className:i6,style:Object.assign({width:n?h/2:h,transform:`translate(${(n?l:c-h/2).toFixed(2)}, ${u})`,height:d-u},o)}),extent:n?(p,v,y,m)=>[-1/0,v,1/0,m]:(p,v,y,m)=>[Math.floor(l-r),v,Math.ceil(f-r),m]}}function Iat(t,e){var{offsetY:n,offsetX:r,cross:i=!1}=e,o=bP(e,["offsetY","offsetX","cross"]);const a=a6(t),s=o6(t),[,c]=s.getLocalBounds().min,[l,u]=a.min,[f,d]=a.max,h=d-u;return{brushRegion:mP,hotZone:new cn({className:i6,style:Object.assign({width:f-l,height:i?h:h*2,transform:`translate(${l}, ${i?u:c-h})`},o)}),extent:i?(p,v,y,m)=>[p,-1/0,y,1/0]:(p,v,y,m)=>[p,Math.floor(u-n),y,Math.ceil(d-n)]}}function Dat(t,e){var{axes:n,elements:r,points:i,horizontal:o,datum:a,offsetY:s,offsetX:c,reverse:l=!1,state:u={},emitter:f,coordinate:d}=e,h=bP(e,["axes","elements","points","horizontal","datum","offsetY","offsetX","reverse","state","emitter","coordinate"]);const p=r(t),v=n(t),y=ig(p,a),{setState:m,removeState:b}=Hl(u,y),O=new Map,E=Xt(h,"mask"),w=G=>Array.from(O.values()).every(([X,q,J,et])=>G.some(([dt,_t])=>dt>=X&&dt<=J&&_t>=q&&_t<=et)),_=v.map(G=>G.attributes.scale),S=G=>G.length>2?[G[0],G[G.length-1]]:G,M=new Map,T=()=>{M.clear();for(let G=0;G<v.length;G++){const X=_[G],{domain:q}=X.getOptions();M.set(G,S(q))}};T();const A=(G,X)=>{const q=[];for(const et of p){const dt=i(et);w(dt)?(m(et,"active"),q.push(et)):m(et,"inactive")}if(M.set(G,N(q,G)),!X)return;const J=()=>{if(!k)return Array.from(M.values());const et=[];for(const[dt,_t]of M){const Dt=_[dt],{name:pt}=Dt.getOptions();pt==="x"?et[0]=_t:et[1]=_t}return et};f.emit("brushAxis:highlight",{nativeEvent:!0,data:{selection:J()}})},C=G=>{for(const X of p)b(X,"active","inactive");T(),G&&f.emit("brushAxis:remove",{nativeEvent:!0})},N=(G,X)=>{const q=_[X],{name:J}=q.getOptions(),et=G.map(dt=>{const _t=dt.__data__;return q.invert(_t[J])});return S(Uu(q,et))},k=v.some(o)&&v.some(G=>!o(G)),R=[];for(let G=0;G<v.length;G++){const X=v[G],q=o(X)?Iat:Lat,{hotZone:J,brushRegion:et,extent:dt}=q(X,{offsetY:s,offsetX:c,cross:k,zIndex:999,fill:"transparent"});X.parentNode.appendChild(J);const _t=vP(J,Object.assign(Object.assign({},E),{reverse:l,brushRegion:et,brushended(Dt){O.delete(X),Array.from(O.entries()).length===0?C(Dt):A(G,Dt)},brushed(Dt,pt,vt,Qt,Bt){O.set(X,dt(Dt,pt,vt,Qt)),A(G,Bt)}}));R.push(_t)}const I=(G={})=>{const{nativeEvent:X}=G;X||R.forEach(q=>q.remove(!1))},D=(G,X,q)=>{const[J,et]=G,dt=pt=>pt.getStep?pt.getStep():0,_t=B(J,X,q),Dt=B(et,X,q)+dt(X);return o(q)?[_t,-1/0,Dt,1/0]:[-1/0,_t,1/0,Dt]},B=(G,X,q)=>{const{height:J,width:et}=d.getOptions(),dt=X.clone();return o(q)?dt.update({range:[0,et]}):dt.update({range:[J,0]}),dt.map(G)},F=G=>{const{nativeEvent:X}=G;if(X)return;const{selection:q}=G.data;for(let J=0;J<R.length;J++){const et=q[J],dt=R[J],_t=v[J];if(et){const Dt=_[J];dt.move(...D(et,Dt,_t),!1)}else dt.remove(!1)}};return f.on("brushAxis:remove",I),f.on("brushAxis:highlight",F),()=>{R.forEach(G=>G.destroy()),f.off("brushAxis:remove",I),f.off("brushAxis:highlight",F)}}function Bat(t){return(e,n,r)=>{const{container:i,view:o,options:a}=e,s=Qc(i),{x:c,y:l}=s.getBBox(),{coordinate:u}=o;return Dat(i,Object.assign({elements:Vu,axes:Nat,offsetY:l,offsetX:c,points:f=>f.__data__.points,horizontal:f=>{const{startPos:[d,h],endPos:[p,v]}=f.attributes;return d!==p&&h===v},datum:cd(o),state:dp(a,["active",["inactive",{opacity:.5}]]),coordinate:u,emitter:r},t))}}var Fat=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(u){try{l(r.next(u))}catch(f){a(f)}}function c(u){try{l(r.throw(u))}catch(f){a(f)}}function l(u){u.done?o(u.value):i(u.value).then(s,c)}l((r=r.apply(t,e||[])).next())})},s6=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function jat(t=300){let e=null;return n=>{const{timeStamp:r}=n;return e!==null&&r-e<t?(e=r,!0):(e=r,!1)}}function Gat(t,e){var{filter:n,reset:r,brushRegion:i,extent:o,reverse:a,emitter:s,scale:c,coordinate:l,selection:u,series:f=!1}=e,d=s6(e,["filter","reset","brushRegion","extent","reverse","emitter","scale","coordinate","selection","series"]);const h=Xt(d,"mask"),{width:p,height:v}=t.getBBox(),y=o||[0,0,p,v],m=jat(),b=vP(t,Object.assign(Object.assign({},h),{extent:y,brushRegion:i,reverse:a,brushcreated:O}));t.addEventListener("click",E);function O(_,S,M,T,A){A.nativeEvent=!0,n(u(_,S,M,T),A),b.remove()}function E(_){m(_)&&(_.nativeEvent=!0,r(_))}const w=({nativeEvent:_,data:S})=>{if(_)return;const{selection:M}=S;n(M,{nativeEvent:!1})};return s.on("brush:filter",w),()=>{b.destroy(),s.off("brush:filter",w),t.removeEventListener("click",E)}}function _P(t){var{hideX:e=!0,hideY:n=!0}=t,r=s6(t,["hideX","hideY"]);return(i,o,a)=>{const{container:s,view:c,options:l,update:u,setState:f}=i,d=Qc(s),h={maskFill:"#777",maskFillOpacity:"0.3",maskStroke:"#fff",unhighlightedOpacity:.5,reverse:!1};let p=!1,v=!1,y=c;const{scale:m,coordinate:b}=c;return Gat(d,Object.assign(Object.assign({brushRegion:(O,E,w,_)=>[O,E,w,_],selection:(O,E,w,_)=>{const{scale:S,coordinate:M}=y;return Mx(O,E,w,_,S,M)},filter:(O,E)=>Fat(this,void 0,void 0,function*(){if(v)return;v=!0;const[w,_]=O;f("brushFilter",M=>{const{marks:T}=M,A=T.map(C=>bt({axis:Object.assign(Object.assign({},e&&{x:{transform:[{type:"hide"}]}}),n&&{y:{transform:[{type:"hide"}]}})},C,{scale:{x:{domain:w,nice:!1},y:{domain:_,nice:!1}}}));return Object.assign(Object.assign({},l),{marks:A,clip:!0})}),a.emit("brush:filter",Object.assign(Object.assign({},E),{data:{selection:[w,_]}})),y=(yield u()).view,v=!1,p=!0}),reset:O=>{if(v||!p)return;const{scale:E}=c,{x:w,y:_}=E,S=w.getOptions().domain,M=_.getOptions().domain;a.emit("brush:filter",Object.assign(Object.assign({},O),{data:{selection:[S,M]}})),p=!1,y=c,f("brushFilter"),u()},extent:void 0,emitter:a,scale:m,coordinate:b},h),r))}}function zat(t){return _P(Object.assign(Object.assign({hideX:!0},t),{brushRegion:mP}))}function Wat(t){return _P(Object.assign(Object.assign({hideY:!0},t),{brushRegion:xP}))}var Yat=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(u){try{l(r.next(u))}catch(f){a(f)}}function c(u){try{l(r.throw(u))}catch(f){a(f)}}function l(u){u.done?o(u.value):i(u.value).then(s,c)}l((r=r.apply(t,e||[])).next())})};const Hat="slider";function Uat(t,e,n,r=!1,i="x",o="y"){const{marks:a}=t,s=a.map(c=>{var l,u;return bt({axis:{x:{transform:[{type:"hide"}]},y:{transform:[{type:"hide"}]}}},c,{scale:e,[n]:Object.assign(Object.assign({},((l=c[n])===null||l===void 0?void 0:l[i])&&{[i]:Object.assign({preserve:!0},r&&{ratio:null})}),((u=c[n])===null||u===void 0?void 0:u[o])&&{[o]:{preserve:!0}}),animate:!1})});return Object.assign(Object.assign({},t),{marks:s,clip:!0,animate:!1})}function Vat(t,e,n){const[r,i]=t,o=n?c=>1-c:c=>c,a=up(e,o(r),!0),s=up(e,o(i),!1);return Uu(e,[a,s])}function mb(t){return[t[0],t[t.length-1]]}function c6({initDomain:t={},className:e=Hat,prefix:n="slider",setValue:r=(l,u)=>l.setValues(u),hasState:i=!1,wait:o=50,leading:a=!0,trailing:s=!1,getInitValues:c=l=>{var u;const f=(u=l==null?void 0:l.attributes)===null||u===void 0?void 0:u.values;if(f[0]!==0||f[1]!==1)return f}}){return(l,u,f)=>{const{container:d,view:h,update:p,setState:v}=l,y=d.getElementsByClassName(e);if(!y.length)return()=>{};let m=!1;const{scale:b,coordinate:O,layout:E}=h,{paddingLeft:w,paddingTop:_,paddingBottom:S,paddingRight:M}=E,{x:T,y:A}=b,C=Rr(O),N=D=>{const B=D==="vertical"?"y":"x",F=D==="vertical"?"x":"y";return C?[F,B]:[B,F]},k=new Map,R=new Set,I={x:t.x||T.getOptions().domain,y:t.y||A.getOptions().domain};for(const D of y){const{orientation:B}=D.attributes,[F,G]=N(B),X=`${n}${Fu(F)}:filter`,q=F==="x",{ratio:J}=T.getOptions(),{ratio:et}=A.getOptions(),dt=vt=>{if(vt.data){const{selection:de}=vt.data,[ye=mb(I.x),Se=mb(I.y)]=de;return q?[Uu(T,ye,J),Uu(A,Se,et)]:[Uu(A,Se,et),Uu(T,ye,J)]}const{value:Qt}=vt.detail,Bt=b[F],Rt=Vat(Qt,Bt,C&&B==="horizontal"),$t=I[G];return[Rt,$t]},_t=yd(vt=>Yat(this,void 0,void 0,function*(){const{initValue:Qt=!1}=vt;if(m&&!Qt)return;m=!0;const{nativeEvent:Bt=!0}=vt,[Rt,$t]=dt(vt);if(I[F]=Rt,I[G]=$t,Bt){const de=q?Rt:$t,ye=q?$t:Rt;f.emit(X,Object.assign(Object.assign({},vt),{nativeEvent:Bt,data:{selection:[mb(de),mb(ye)]}}))}v(D,de=>Object.assign(Object.assign({},Uat(de,{[F]:{domain:Rt,nice:!1}},n,i,F,G)),{paddingLeft:w,paddingTop:_,paddingBottom:S,paddingRight:M})),yield p(),m=!1}),o,{leading:a,trailing:s}),Dt=vt=>{const{nativeEvent:Qt}=vt;if(Qt)return;const{data:Bt}=vt,{selection:Rt}=Bt,[$t,de]=Rt;D.dispatchEvent(new sn("valuechange",{data:Bt,nativeEvent:!1}));const ye=q?Px($t,T):Px(de,A);r(D,ye)};f.on(X,Dt),D.addEventListener("valuechange",_t),k.set(D,_t),R.add([X,Dt]);const pt=c(D);pt&&D.dispatchEvent(new sn("valuechange",{detail:{value:pt},nativeEvent:!1,initValue:!0}))}return()=>{for(const[D,B]of k)D.removeEventListener("valuechange",B);for(const[D,B]of R)f.off(D,B)}}}const l6="g2-scrollbar";function Xat(t={}){return(e,n,r)=>{const{view:i,container:o}=e;if(!o.getElementsByClassName(l6).length)return()=>{};const{scale:s}=i,{x:c,y:l}=s,u={x:[...c.getOptions().domain],y:[...l.getOptions().domain]};return c.update({domain:c.getOptions().expectedDomain}),l.update({domain:l.getOptions().expectedDomain}),c6(Object.assign(Object.assign({},t),{initDomain:u,className:l6,prefix:"scrollbar",hasState:!0,setValue:(d,h)=>d.setValue(h[0]),getInitValues:d=>{const h=d.slider.attributes.values;if(h[0]!==0)return h}}))(e,n,r)}}var $at=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function qat(t,e,n){return`<${t} style="${Object.entries(n).map(([r,i])=>`${_Z(r)}:${i}`).join(";")}">${e}</${t}>`}const Kat={backgroundColor:"rgba(0,0,0,0.75)",color:"#fff",width:"max-content",padding:"1px 4px",fontSize:"12px",borderRadius:"2.5px",boxShadow:"0 3px 6px -4px rgba(0,0,0,0.12), 0 6px 16px 0 rgba(0,0,0,0.08), 0 9px 28px 8px rgba(0,0,0,0.05)"};function u6(t){return t.nodeName!=="text"?!1:!!t.isOverflowing()}function f6(t){var{offsetX:e=8,offsetY:n=8}=t,r=$at(t,["offsetX","offsetY"]);return i=>{const{container:o}=i,[a,s]=o.getBounds().min,c=Xt(r,"tip"),l=new Set,u=d=>{const{target:h}=d;if(!u6(h)){d.stopPropagation();return}const{offsetX:p,offsetY:v}=d,y=p+e-a,m=v+n-s;if(h.tip){h.tip.style.x=y,h.tip.style.y=m;return}const{text:b}=h.style,O=new ae({className:"poptip",style:{innerHTML:qat("div",b,Object.assign(Object.assign({},Kat),c)),x:y,y:m}});o.appendChild(O),h.tip=O,l.add(O)},f=d=>{const{target:h}=d;if(!u6(h)){d.stopPropagation();return}h.tip&&(h.tip.remove(),h.tip=null,l.delete(h.tip))};return o.addEventListener("pointerover",u),o.addEventListener("pointerout",f),()=>{o.removeEventListener("pointerover",u),o.removeEventListener("pointerout",f),l.forEach(d=>d.remove())}}}f6.props={reapplyWhenUpdate:!0};function Zat(t,e){var n=wM(e),r=n.length;if(Lt(t))return!r;for(var i=0;i<r;i+=1){var o=n[i];if(e[o]!==t[o]||!(o in t))return!1}return!0}var Jat=Zat;function Qat(t,e){if(!ri(t))return null;var n;if(Fa(e)&&(n=e),Bl(e)&&(n=function(i){return Jat(i,e)}),n){for(var r=0;r<t.length;r+=1)if(n(t[r]))return t[r]}return null}var Ep=Qat;function xb(t){return t==null?null:d6(t)}function d6(t){if(typeof t!="function")throw new Error;return t}var tst={depth:-1},h6={},wP={};function est(t){return t.id}function nst(t){return t.parentId}function OP(){var t=est,e=nst,n;function r(i){var o=Array.from(i),a=t,s=e,c,l,u,f,d,h,p,v,y=new Map;if(n!=null){var m=o.map(function(M,T){return rst(n(M,T,i))}),b=m.map(p6),O=new Set(m).add(""),E=mM(b),w;try{for(E.s();!(w=E.n()).done;){var _=w.value;O.has(_)||(O.add(_),m.push(_),b.push(p6(_)),o.push(wP))}}catch(M){E.e(M)}finally{E.f()}a=function(T,A){return m[A]},s=function(T,A){return b[A]}}for(u=0,c=o.length;u<c;++u)l=o[u],h=o[u]=new mp(l),(p=a(l,u,i))!=null&&(p+="")&&(v=h.id=p,y.set(v,y.has(v)?h6:h)),(p=s(l,u,i))!=null&&(p+="")&&(h.parent=p);for(u=0;u<c;++u)if(h=o[u],p=h.parent){if(d=y.get(p),!d)throw new Error("missing: "+p);if(d===h6)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===wP&&f.children.length===1;)f=f.children[0],--c;for(var S=o.length-1;S>=0&&(h=o[S],h.data===wP);--S)h.data=null}if(f.parent=tst,f.eachBefore(function(M){M.depth=M.parent.depth+1,--c}).eachBefore(M5),f.parent=null,c>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(t=xb(i),r):t},r.parentId=function(i){return arguments.length?(e=xb(i),r):e},r.path=function(i){return arguments.length?(n=xb(i),r):n},r}function rst(t){t="".concat(t);var e=t.length;return EP(t,e-1)&&!EP(t,e-2)&&(t=t.slice(0,-1)),t[0]==="/"?t:"/".concat(t)}function p6(t){var e=t.length;if(e<2)return"";for(;--e>1&&!EP(t,e););return t.slice(0,e)}function EP(t,e){if(t[e]==="/"){for(var n=0;e>0&&t[--e]==="\\";)++n;if(!(n&1))return!0}return!1}function ist(t,e,n,r,i){var o=t.children,a,s=o.length,c,l=new Array(s+1);for(l[0]=c=a=0;a<s;++a)l[a+1]=c+=o[a].value;u(0,s,t.value,e,n,r,i);function u(f,d,h,p,v,y,m){if(f>=d-1){var b=o[f];b.x0=p,b.y0=v,b.x1=y,b.y1=m;return}for(var O=l[f],E=h/2+O,w=f+1,_=d-1;w<_;){var S=w+_>>>1;l[S]<E?w=S+1:_=S}E-l[w-1]<l[w]-E&&f+1<w&&--w;var M=l[w]-O,T=h-M;if(y-p>m-v){var A=h?(p*T+y*M)/h:y;u(f,w,M,p,v,A,m),u(w,d,T,A,v,y,m)}else{var C=h?(v*T+m*M)/h:m;u(f,w,M,p,v,y,C),u(w,d,T,p,C,y,m)}}}function bb(t,e,n,r,i){for(var o=t.children,a,s=-1,c=o.length,l=t.value&&(i-n)/t.value;++s<c;)a=o[s],a.x0=e,a.x1=r,a.y0=n,a.y1=n+=a.value*l}function ost(t,e,n,r,i){(t.depth&1?bb:cg)(t,e,n,r,i)}var v6=(1+Math.sqrt(5))/2;function g6(t,e,n,r,i,o){for(var a=[],s=e.children,c,l,u=0,f=0,d=s.length,h,p,v=e.value,y,m,b,O,E,w,_;u<d;){h=i-n,p=o-r;do y=s[f++].value;while(!y&&f<d);for(m=b=y,w=Math.max(p/h,h/p)/(v*t),_=y*y*w,E=Math.max(b/_,_/m);f<d;++f){if(y+=l=s[f].value,l<m&&(m=l),l>b&&(b=l),_=y*y*w,O=Math.max(b/_,_/m),O>E){y-=l;break}E=O}a.push(c={value:y,dice:h<p,children:s.slice(u,f)}),c.dice?cg(c,n,r,i,v?r+=p*y/v:o):bb(c,n,r,v?n+=h*y/v:i,o),v-=y,u=f}return a}var y6=function t(e){function n(r,i,o,a,s){g6(e,r,i,o,a,s)}return n.ratio=function(r){return t((r=+r)>1?r:1)},n}(v6),ast=function t(e){function n(r,i,o,a,s){if((c=r._squarify)&&c.ratio===e)for(var c,l,u,f,d=-1,h,p=c.length,v=r.value;++d<p;){for(l=c[d],u=l.children,f=l.value=0,h=u.length;f<h;++f)l.value+=u[f].value;l.dice?cg(l,i,o,a,v?o+=(s-o)*l.value/v:s):bb(l,i,o,v?i+=(a-i)*l.value/v:a,s),v-=l.value}else r._squarify=c=g6(e,r,i,o,a,s),c.ratio=e}return n.ratio=function(r){return t((r=+r)>1?r:1)},n}(v6);function xd(){return 0}function Sp(t){return function(){return t}}function sst(){var t=y6,e=!1,n=1,r=1,i=[0],o=xd,a=xd,s=xd,c=xd,l=xd;function u(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],e&&d.eachBefore(O5),d}function f(d){var h=i[d.depth],p=d.x0+h,v=d.y0+h,y=d.x1-h,m=d.y1-h;y<p&&(p=y=(p+y)/2),m<v&&(v=m=(v+m)/2),d.x0=p,d.y0=v,d.x1=y,d.y1=m,d.children&&(h=i[d.depth+1]=o(d)/2,p+=l(d)-h,v+=a(d)-h,y-=s(d)-h,m-=c(d)-h,y<p&&(p=y=(p+y)/2),m<v&&(v=m=(v+m)/2),t(d,p,v,y,m))}return u.round=function(d){return arguments.length?(e=!!d,u):e},u.size=function(d){return arguments.length?(n=+d[0],r=+d[1],u):[n,r]},u.tile=function(d){return arguments.length?(t=d6(d),u):t},u.padding=function(d){return arguments.length?u.paddingInner(d).paddingOuter(d):u.paddingInner()},u.paddingInner=function(d){return arguments.length?(o=typeof d=="function"?d:Sp(+d),u):o},u.paddingOuter=function(d){return arguments.length?u.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):u.paddingTop()},u.paddingTop=function(d){return arguments.length?(a=typeof d=="function"?d:Sp(+d),u):a},u.paddingRight=function(d){return arguments.length?(s=typeof d=="function"?d:Sp(+d),u):s},u.paddingBottom=function(d){return arguments.length?(c=typeof d=="function"?d:Sp(+d),u):c},u.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:Sp(+d),u):l},u}function cst(t,e){return Array.isArray(t)?typeof e=="function"?OP().path(e)(t):OP()(t):yp(t)}function m6(t,e=[t.data.name]){t.id=t.id||t.data.name,t.path=e,t.children&&t.children.forEach(n=>{n.id=`${t.id}/${n.data.name}`,n.path=[...e,n.data.name],m6(n,n.path)})}function x6(t){const e=Ln(t,["data","name"]);e.replaceAll&&(t.path=e.replaceAll(".","/").split("/")),t.children&&t.children.forEach(n=>{x6(n)})}function lst(t,e){const n={treemapBinary:ist,treemapDice:cg,treemapSlice:bb,treemapSliceDice:ost,treemapSquarify:y6,treemapResquarify:ast},r=t==="treemapSquarify"?n[t].ratio(e):n[t];if(!r)throw new TypeError("Invalid tile method!");return r}function b6(t,e,n){const{value:r}=n,i=lst(e.tile,e.ratio),o=cst(t,e.path);ri(t)?x6(o):m6(o),r?o.sum(c=>e.ignoreParentValue&&c.children?0:il(r)(c)).sort(e.sort):o.count(),sst().tile(i).size(e.size).round(e.round).paddingInner(e.paddingInner).paddingOuter(e.paddingOuter).paddingTop(e.paddingTop).paddingRight(e.paddingRight).paddingBottom(e.paddingBottom).paddingLeft(e.paddingLeft)(o);const a=o.descendants().map(c=>Object.assign(c,{id:c.id.replace(/^\//,""),x:[c.x0,c.x1],y:[c.y0,c.y1]}));return[a.filter(typeof e.layer=="function"?e.layer:c=>c.height===e.layer),a]}var ust=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(u){try{l(r.next(u))}catch(f){a(f)}}function c(u){try{l(r.throw(u))}catch(f){a(f)}}function l(u){u.done?o(u.value):i(u.value).then(s,c)}l((r=r.apply(t,e||[])).next())})},fst=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function dst(t){return Ie(t).select(`.${Ha}`).node()}const hst={breadCrumbFill:"rgba(0, 0, 0, 0.85)",breadCrumbFontSize:12,breadCrumbY:12,activeFill:"rgba(0, 0, 0, 0.5)"};function pst(t={}){const{originData:e=[],layout:n}=t,r=fst(t,["originData","layout"]),i=bt({},hst,r),o=Xt(i,"breadCrumb"),a=Xt(i,"active");return s=>{const{update:c,setState:l,container:u,options:f}=s,d=dst(u),h=f.marks[0],{state:p}=h,v=new Mt;d.appendChild(v);const y=(E,w)=>ust(this,void 0,void 0,function*(){if(v.removeChildren(),w){let _="",S=o.y,M=0;const T=[],A=d.getBBox().width,C=E.map((N,k)=>{_=`${_}${N}/`,T.push(N);const R=new Gr({name:_.replace(/\/$/,""),style:Object.assign(Object.assign({text:N,x:M,path:[...T],depth:k},o),{y:S})});v.appendChild(R),M+=R.getBBox().width;const I=new Gr({style:Object.assign(Object.assign({x:M,text:" / "},o),{y:S})});return v.appendChild(I),M+=I.getBBox().width,M>A&&(S=v.getBBox().height+o.y,M=0,R.attr({x:M,y:S}),M+=R.getBBox().width,I.attr({x:M,y:S}),M+=I.getBBox().width),k===V0(E)-1&&I.remove(),R});C.forEach((N,k)=>{if(k===V0(C)-1)return;const R=Object.assign({},N.attributes);N.attr("cursor","pointer"),N.addEventListener("mouseenter",()=>{N.attr(a)}),N.addEventListener("mouseleave",()=>{N.attr(R)}),N.addEventListener("click",()=>{y(Ln(N,["style","path"]),Ln(N,["style","depth"]))})})}gat(u,l),l("treemapDrillDown",_=>{const{marks:S}=_,M=E.join("/"),T=S.map(A=>{if(A.type!=="rect")return A;let C=e;if(w){const k=e.filter(F=>{const G=Ln(F,["id"]);return G&&(G.match(`${M}/`)||M.match(G))}).map(F=>({value:F.height===0?Ln(F,["value"]):void 0,name:Ln(F,["id"])})),{paddingLeft:R,paddingBottom:I,paddingRight:D}=n,B=Object.assign(Object.assign({},n),{paddingTop:(n.paddingTop||v.getBBox().height+10)/(w+1),paddingLeft:R/(w+1),paddingBottom:I/(w+1),paddingRight:D/(w+1),path:F=>F.name,layer:F=>F.depth===w+1});C=b6(k,B,{value:"value"})[0]}else C=e.filter(k=>k.depth===1);const N=[];return C.forEach(({path:k})=>{N.push(bg(k))}),bt({},A,{data:C,scale:{color:{domain:N}}})});return Object.assign(Object.assign({},_),{marks:T})}),yield c(void 0,["legendFilter"])}),m=E=>{const w=E.target;if(Ln(w,["markType"])!=="rect")return;const _=Ln(w,["__data__","key"]),S=Ep(e,M=>M.id===_);Ln(S,"height")&&y(Ln(S,"path"),Ln(S,"depth"))};d.addEventListener("click",m);const b=wM(Object.assign(Object.assign({},p.active),p.inactive)),O=()=>{$I(d).forEach(w=>{const _=Ln(w,["style","cursor"]),S=Ep(e,M=>M.id===Ln(w,["__data__","key"]));if(_!=="pointer"&&(S!=null&&S.height)){w.style.cursor="pointer";const M=yM(w.attributes,b);w.addEventListener("mouseenter",()=>{w.attr(p.active)}),w.addEventListener("mouseleave",()=>{w.attr(bt(M,p.inactive))})}})};return O(),d.addEventListener("mousemove",O),()=>{v.remove(),d.removeEventListener("click",m),d.removeEventListener("mousemove",O)}}}var SP=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(u){try{l(r.next(u))}catch(f){a(f)}}function c(u){try{l(r.throw(u))}catch(f){a(f)}}function l(u){u.done?o(u.value):i(u.value).then(s,c)}l((r=r.apply(t,e||[])).next())})},vst=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const gst={pointR:6,pointStrokeWidth:1,pointStroke:"#888",pointActiveStroke:"#f5f5f5",pathStroke:"#888",pathLineDash:[3,4],labelFontSize:12,labelFill:"#888",labelStroke:"#fff",labelLineWidth:1,labelY:-6,labelX:2},MP="movePoint",_6=t=>{const e=t.target,{markType:n}=e;n==="line"&&(e.attr("_lineWidth",e.attr("lineWidth")||1),e.attr("lineWidth",e.attr("_lineWidth")+3)),n==="interval"&&(e.attr("_opacity",e.attr("opacity")||1),e.attr("opacity",.7*e.attr("_opacity")))},w6=t=>{const e=t.target,{markType:n}=e;n==="line"&&e.attr("lineWidth",e.attr("_lineWidth")),n==="interval"&&e.attr("opacity",e.attr("_opacity"))},yst=(t,e,n)=>e.map(r=>["x","color"].reduce((o,a)=>{const s=n[a];return s&&r[s]!==t[s]?!1:o},!0)?Object.assign(Object.assign({},r),t):r),mst=t=>{const e=Ln(t,["__data__","y"]),r=Ln(t,["__data__","y1"])-e,{__data__:{data:i,encode:o,transform:a},childNodes:s}=t.parentNode,c=Ep(a,({type:f})=>f==="normalizeY"),l=Ln(o,["y","field"]),u=i[s.indexOf(t)][l];return(f,d=!1)=>c||d?f/(1-f)/(r/(1-r))*u:f},xst=(t,e)=>{const n=Ln(t,["__data__","seriesItems",e,"0","value"]),r=Ln(t,["__data__","seriesIndex",e]),{__data__:{data:i,encode:o,transform:a}}=t.parentNode,s=Ep(a,({type:u})=>u==="normalizeY"),c=Ln(o,["y","field"]),l=i[r][c];return u=>s?n===1?u:u/(1-u)/(n/(1-n))*l:u},O6=(t,e,n)=>{t.forEach((r,i)=>{r.attr("stroke",e[1]===i?n.activeStroke:n.stroke)})},E6=(t,e,n,r)=>{const i=new ke({style:n}),o=new Gr({style:r});return e.appendChild(o),t.appendChild(i),[i,o]},S6=(t,e)=>{if(!Ln(t,["options","range","indexOf"]))return;const r=t.options.range.indexOf(e);return t.sortedDomain[r]},PP=(t,e,n)=>{const r=Lx(t,e),o=Lx(t,n)/r,a=t[0]+(e[0]-t[0])*o,s=t[1]+(e[1]-t[1])*o;return[a,s]};function bst(t={}){const{selection:e=[],precision:n=2}=t,r=vst(t,["selection","precision"]),i=Object.assign(Object.assign({},gst),r||{}),o=Xt(i,"path"),a=Xt(i,"label"),s=Xt(i,"point");return(c,l,u)=>{const{update:f,setState:d,container:h,view:p,options:{marks:v,coordinate:y}}=c,m=Qc(h);let b=$I(m),O,E=e;const{transform:w=[],type:_}=y,S=!!Ep(w,({type:F})=>F==="transpose"),M=_==="polar",T=_==="theta",A=!!Ep(b,({markType:F})=>F==="area");A&&(b=b.filter(({markType:F})=>F==="area"));const C=new Mt({style:{zIndex:2}});m.appendChild(C);const N=()=>{u.emit("element-point:select",{nativeEvent:!0,data:{selection:E}})},k=(F,G)=>{u.emit("element-point:moved",{nativeEvent:!0,data:{changeData:F,data:G}})},R=F=>{const G=F.target;E=[G.parentNode.childNodes.indexOf(G)],N(),D(G)},I=F=>{const{data:{selection:G},nativeEvent:X}=F;if(X)return;E=G;const q=Ln(b,[E==null?void 0:E[0]]);q&&D(q)},D=F=>{const{attributes:G,markType:X,__data__:q}=F,{stroke:J}=G,{points:et,seriesTitle:dt,color:_t,title:Dt,seriesX:pt,y1:vt}=q;if(S&&X!=="interval")return;const{scale:Qt,coordinate:Bt}=(O==null?void 0:O.view)||p,{color:Rt,y:$t,x:de}=Qt,ye=Bt.getCenter();C.removeChildren();let Se;const qe=(Me,De,An,jn)=>SP(this,void 0,void 0,function*(){return d("elementPointMove",zr=>{var Vn;const Jr=(((Vn=O==null?void 0:O.options)===null||Vn===void 0?void 0:Vn.marks)||v).map(Gn=>{if(!jn.includes(Gn.type))return Gn;const{data:Ti,encode:en}=Gn,Ai=Object.keys(en).reduce((ve,je)=>{const hn=en[je];return je==="x"&&(ve[hn]=Me),je==="y"&&(ve[hn]=De),je==="color"&&(ve[hn]=An),ve},{}),Qr=yst(Ai,Ti,en);return k(Ai,Qr),bt({},Gn,{data:Qr,animate:!1})});return Object.assign(Object.assign({},zr),{marks:Jr})}),yield f("elementPointMove")});if(["line","area"].includes(X))et.forEach((Me,De)=>{const An=de.invert(pt[De]);if(!An)return;const jn=new st({name:MP,style:Object.assign({cx:Me[0],cy:Me[1],fill:J},s)}),zr=xst(F,De);jn.addEventListener("mousedown",Vn=>{const Jr=Bt.output([pt[De],0]),Gn=dt==null?void 0:dt.length;h.attr("cursor","move"),E[1]!==De&&(E[1]=De,N()),O6(C.childNodes,E,s);const[Ti,en]=E6(C,jn,o,a),ln=Qr=>{const ve=Me[1]+Qr.clientY-Se[1];if(A)if(M){const je=Me[0]+Qr.clientX-Se[0],[hn,yn]=PP(ye,Jr,[je,ve]),[,br]=Bt.output([1,$t.output(0)]),[,mi]=Bt.invert([hn,br-(et[De+Gn][1]-yn)]),xi=(De+1)%Gn,Ao=(De-1+Gn)%Gn,Ws=og([et[Ao],[hn,yn],dt[xi]&&et[xi]]);en.attr("text",zr($t.invert(mi)).toFixed(n)),Ti.attr("d",Ws),jn.attr("cx",hn),jn.attr("cy",yn)}else{const[,je]=Bt.output([1,$t.output(0)]),[,hn]=Bt.invert([Me[0],je-(et[De+Gn][1]-ve)]),yn=og([et[De-1],[Me[0],ve],dt[De+1]&&et[De+1]]);en.attr("text",zr($t.invert(hn)).toFixed(n)),Ti.attr("d",yn),jn.attr("cy",ve)}else{const[,je]=Bt.invert([Me[0],ve]),hn=og([et[De-1],[Me[0],ve],et[De+1]]);en.attr("text",$t.invert(je).toFixed(n)),Ti.attr("d",hn),jn.attr("cy",ve)}};Se=[Vn.clientX,Vn.clientY],window.addEventListener("mousemove",ln);const Ai=()=>SP(this,void 0,void 0,function*(){if(h.attr("cursor","default"),window.removeEventListener("mousemove",ln),h.removeEventListener("mouseup",Ai),le(en.attr("text")))return;const Qr=Number(en.attr("text")),ve=S6(Rt,_t);O=yield qe(An,Qr,ve,["line","area"]),en.remove(),Ti.remove(),D(F)});h.addEventListener("mouseup",Ai)}),C.appendChild(jn)}),O6(C.childNodes,E,s);else if(X==="interval"){let Me=[(et[0][0]+et[1][0])/2,et[0][1]];S?Me=[et[0][0],(et[0][1]+et[1][1])/2]:T&&(Me=et[0]);const De=mst(F),An=new st({name:MP,style:Object.assign(Object.assign({cx:Me[0],cy:Me[1],fill:J},s),{stroke:s.activeStroke})});An.addEventListener("mousedown",jn=>{h.attr("cursor","move");const zr=S6(Rt,_t),[Vn,Jr]=E6(C,An,o,a),Gn=en=>{if(S){const ln=Me[0]+en.clientX-Se[0],[Ai]=Bt.output([$t.output(0),$t.output(0)]),[,Qr]=Bt.invert([Ai+(ln-et[2][0]),Me[1]]),ve=og([[ln,et[0][1]],[ln,et[1][1]],et[2],et[3]],!0);Jr.attr("text",De($t.invert(Qr)).toFixed(n)),Vn.attr("d",ve),An.attr("cx",ln)}else if(T){const ln=Me[1]+en.clientY-Se[1],Ai=Me[0]+en.clientX-Se[0],[Qr,ve]=PP(ye,[Ai,ln],Me),[je,hn]=PP(ye,[Ai,ln],et[1]),yn=Bt.invert([Qr,ve])[1],br=vt-yn;if(br<0)return;const mi=lJ(ye,[[Qr,ve],[je,hn],et[2],et[3]],br>.5?1:0);Jr.attr("text",De(br,!0).toFixed(n)),Vn.attr("d",mi),An.attr("cx",Qr),An.attr("cy",ve)}else{const ln=Me[1]+en.clientY-Se[1],[,Ai]=Bt.output([1,$t.output(0)]),[,Qr]=Bt.invert([Me[0],Ai-(et[2][1]-ln)]),ve=og([[et[0][0],ln],[et[1][0],ln],et[2],et[3]],!0);Jr.attr("text",De($t.invert(Qr)).toFixed(n)),Vn.attr("d",ve),An.attr("cy",ln)}};Se=[jn.clientX,jn.clientY],window.addEventListener("mousemove",Gn);const Ti=()=>SP(this,void 0,void 0,function*(){if(h.attr("cursor","default"),h.removeEventListener("mouseup",Ti),window.removeEventListener("mousemove",Gn),le(Jr.attr("text")))return;const en=Number(Jr.attr("text"));O=yield qe(Dt,en,zr,[X]),Jr.remove(),Vn.remove(),D(F)});h.addEventListener("mouseup",Ti)}),C.appendChild(An)}};b.forEach((F,G)=>{E[0]===G&&D(F),F.addEventListener("click",R),F.addEventListener("mouseenter",_6),F.addEventListener("mouseleave",w6)});const B=F=>{const G=F==null?void 0:F.target;(!G||G.name!==MP&&!b.includes(G))&&(E=[],N(),C.removeChildren())};return u.on("element-point:select",I),u.on("element-point:unselect",B),h.addEventListener("mousedown",B),()=>{C.remove(),u.off("element-point:select",I),u.off("element-point:unselect",B),h.removeEventListener("mousedown",B),b.forEach(F=>{F.removeEventListener("click",R),F.removeEventListener("mouseenter",_6),F.removeEventListener("mouseleave",w6)})}}}var _st=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const M6=()=>t=>{const{children:e}=t;if(!Array.isArray(e))return[];const{x:n=0,y:r=0,width:i,height:o,data:a}=t;return e.map(s=>{var{data:c,x:l,y:u,width:f,height:d}=s,h=_st(s,["data","x","y","width","height"]);return Object.assign(Object.assign({},h),{data:IS(c,a),x:l!=null?l:n,y:u!=null?u:r,width:f!=null?f:i,height:d!=null?d:o})})};M6.props={};var wst=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const P6=()=>t=>{const{children:e}=t;if(!Array.isArray(e))return[];const{direction:n="row",ratio:r=e.map(()=>1),padding:i=0,data:o}=t,[a,s,c,l]=n==="col"?["y","height","width","x"]:["x","width","height","y"],u=r.reduce((v,y)=>v+y),f=t[s]-i*(e.length-1),d=r.map(v=>f*(v/u)),h=[];let p=t[a]||0;for(let v=0;v<d.length;v+=1){const y=e[v],{data:m}=y,b=wst(y,["data"]),O=IS(m,o);h.push(Object.assign({[a]:p,[s]:d[v],[l]:t[l]||0,[c]:t[c],data:O},b)),p+=d[v]+i}return h};P6.props={};class Pg{constructor(e){this.$value=e}static of(e){return new Pg(e)}call(e,...n){return this.$value=e(this.$value,...n),this}value(){return this.$value}}var Ost=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const Est=$0(t=>{const{encode:e,data:n,scale:r,shareSize:i=!1}=t,{x:o,y:a}=e,s=(c,l)=>{var u;if(c===void 0||!i)return{};const f=Nr(n,p=>p[c]),d=((u=r==null?void 0:r[l])===null||u===void 0?void 0:u.domain)||Array.from(f.keys()),h=d.map(p=>f.has(p)?f.get(p).length:1);return{domain:d,flex:h}};return{scale:{x:Object.assign(Object.assign({paddingOuter:0,paddingInner:.1,guide:o===void 0?null:{position:"top"}},o===void 0&&{paddingInner:0}),s(o,"x")),y:Object.assign(Object.assign({range:[0,1],paddingOuter:0,paddingInner:.1,guide:a===void 0?null:{position:"right"}},a===void 0&&{paddingInner:0}),s(a,"y"))}}}),TP=rd(t=>{const{data:e,scale:n,legend:r}=t,i=[t];let o,a,s;for(;i.length;){const d=i.shift(),{children:h,encode:p={},scale:v={},legend:y={}}=d,{color:m}=p,{color:b}=v,{color:O}=y;m!==void 0&&(o=m),b!==void 0&&(a=b),O!==void 0&&(s=O),Array.isArray(h)&&i.push(...h)}const c=()=>{var d;const h=(d=n==null?void 0:n.color)===null||d===void 0?void 0:d.domain;if(h!==void 0)return[h];if(o===void 0)return[void 0];const p=typeof o=="function"?o:y=>y[o],v=e.map(p);return v.some(y=>typeof y=="number")?[Wl(v)]:[Array.from(new Set(v)),"ordinal"]},l=typeof o=="string"?o:"",[u,f]=c();return Object.assign({encode:{color:{type:"column",value:u!=null?u:[]}},scale:{color:bt({},a,{domain:u,type:f})}},r===void 0&&{legend:{color:bt({title:l},s)}})}),AP=$0(()=>({animate:{enterType:"fadeIn"}})),CP=rd(()=>({frame:!1,encode:{shape:"hollow"},style:{lineWidth:0}})),kP=rd(()=>({type:"cell"})),T6=rd(t=>{const{data:e}=t;return{data:{type:"inline",value:e,transform:[{type:"custom",callback:()=>{const{data:r,encode:i}=t,{x:o,y:a}=i,s=o?Array.from(new Set(r.map(u=>u[o]))):[],c=a?Array.from(new Set(r.map(u=>u[a]))):[];return(()=>{if(s.length&&c.length){const u=[];for(const f of s)for(const d of c)u.push({[o]:f,[a]:d});return u}if(s.length)return s.map(u=>({[o]:u}));if(c.length)return c.map(u=>({[a]:u}))})()}}]}}}),A6=rd((t,e=Sst,n=Mst,r=Pst,i={})=>{const{data:o,encode:a,children:s,scale:c,x:l=0,y:u=0,shareData:f=!1,key:d}=t,{value:h}=o,{x:p,y:v}=a,{color:y}=c,{domain:m}=y;return{children:(O,E,w)=>{const{x:_,y:S}=E,{paddingLeft:M,paddingTop:T,marginLeft:A,marginTop:C}=w,{domain:N}=_.getOptions(),{domain:k}=S.getOptions(),R=Zf(O),I=O.map(e),D=O.map(({x:J,y:et})=>[_.invert(J),S.invert(et)]),F=D.map(([J,et])=>dt=>{const{[p]:_t,[v]:Dt}=dt;return(p!==void 0?_t===J:!0)&&(v!==void 0?Dt===et:!0)}).map(J=>h.filter(J)),G=f?Qn(F,J=>J.length):void 0,X=D.map(([J,et])=>({columnField:p,columnIndex:N.indexOf(J),columnValue:J,columnValuesLength:N.length,rowField:v,rowIndex:k.indexOf(et),rowValue:et,rowValuesLength:k.length})),q=X.map(J=>Array.isArray(s)?s:[s(J)].flat(1));return R.flatMap(J=>{const[et,dt,_t,Dt]=I[J],pt=X[J],vt=F[J];return q[J].map(Bt=>{var Rt,$t,{scale:de,key:ye,facet:Se=!0,axis:qe={},legend:Me={}}=Bt,De=Ost(Bt,["scale","key","facet","axis","legend"]);const An=((Rt=de==null?void 0:de.y)===null||Rt===void 0?void 0:Rt.guide)||qe.y,jn=(($t=de==null?void 0:de.x)===null||$t===void 0?void 0:$t.guide)||qe.x,zr={x:{tickCount:p?5:void 0},y:{tickCount:v?5:void 0}},Vn=Se?vt:vt.length===0?[]:h,Jr={color:{domain:m}},Gn={x:C6(jn,n)(pt,Vn),y:C6(An,r)(pt,Vn)};return Object.assign(Object.assign({key:`${ye}-${J}`,data:Vn,margin:0,x:et+M+l+A,y:dt+T+u+C,parentKey:d,width:_t,height:Dt,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,frame:!!Vn.length,dataDomain:G,scale:bt(zr,de,Jr),axis:bt({},qe,Gn),legend:!1},De),i)})})}}});function Sst(t){const{points:e}=t;return BS(e)}function _b(t,e){return e.length?bt({title:!1,tick:null,label:null},t):bt({title:!1,tick:null,label:null,grid:null},t)}function Mst(t){return(e,n)=>{const{rowIndex:r,rowValuesLength:i,columnIndex:o,columnValuesLength:a}=e;if(r!==i-1)return _b(t,n);const s=o!==a-1?!1:void 0,c=n.length?void 0:null;return bt({title:s,grid:c},t)}}function Pst(t){return(e,n)=>{const{rowIndex:r,columnIndex:i}=e;if(i!==0)return _b(t,n);const o=r!==0?!1:void 0,a=n.length?void 0:null;return bt({title:o,grid:a},t)}}function C6(t,e){return typeof t=="function"?t:t===null||t===!1?()=>null:e(t)}const k6=()=>t=>[Pg.of(t).call(kP).call(TP).call(AP).call(Est).call(CP).call(T6).call(A6).value()];k6.props={};var NP=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const Tst=$0(t=>({scale:{x:{guide:null,paddingOuter:0,paddingInner:.1},y:{guide:null,range:[0,1],paddingOuter:0,paddingInner:.1}}})),Ast=rd(t=>{const{data:e,children:n,x:r=0,y:i=0,key:o}=t;return{children:(s,c,l)=>{const{x:u,y:f}=c,{paddingLeft:d,paddingTop:h,marginLeft:p,marginTop:v}=l,{domain:y}=u.getOptions(),{domain:m}=f.getOptions(),b=Zf(s),O=s.map(({points:S})=>BS(S)),E=s.map(({x:S,y:M})=>[u.invert(S),f.invert(M)]),w=E.map(([S,M])=>({columnField:S,columnIndex:y.indexOf(S),columnValue:S,columnValuesLength:y.length,rowField:M,rowIndex:m.indexOf(M),rowValue:M,rowValuesLength:m.length})),_=w.map(S=>Array.isArray(n)?n:[n(S)].flat(1));return b.flatMap(S=>{const[M,T,A,C]=O[S],[N,k]=E[S],R=w[S];return _[S].map(D=>{var B,F;const{scale:G,key:X,encode:q,axis:J,interaction:et}=D,dt=NP(D,["scale","key","encode","axis","interaction"]),_t=(B=G==null?void 0:G.y)===null||B===void 0?void 0:B.guide,Dt=(F=G==null?void 0:G.x)===null||F===void 0?void 0:F.guide,pt={x:{facet:!1},y:{facet:!1}},vt={x:kst(Dt)(R,e),y:Nst(_t)(R,e)},Qt={x:{tickCount:5},y:{tickCount:5}};return Object.assign({data:e,parentKey:o,key:`${X}-${S}`,x:M+d+r+p,y:T+h+i+v,width:A,height:C,margin:0,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,frame:!0,scale:bt(pt,G),axis:bt(Qt,J,vt),legend:!1,encode:bt({},q,{x:N,y:k}),interaction:bt({},et,{legendFilter:!1})},dt)})})}}}),Cst=rd(t=>{const{encode:e}=t,n=NP(t,["encode"]),{position:r=[],x:i=r,y:o=[...r].reverse()}=e,a=NP(e,["position","x","y"]),s=[];for(const c of[i].flat(1))for(const l of[o].flat(1))s.push({$x:c,$y:l});return Object.assign(Object.assign({},n),{data:s,encode:Object.assign(Object.assign({},a),{x:"$x",y:"$y"}),scale:Object.assign(Object.assign({},[i].flat(1).length===1&&{x:{paddingInner:0}}),[o].flat(1).length===1&&{y:{paddingInner:0}})})});function kst(t){return typeof t=="function"?t:t===null?()=>null:(e,n)=>{const{rowIndex:r,rowValuesLength:i}=e;if(r!==i-1)return _b(t,n)}}function Nst(t){return typeof t=="function"?t:t===null?()=>null:(e,n)=>{const{columnIndex:r}=e;if(r!==0)return _b(t,n)}}const Rst=()=>t=>[Pg.of(t).call(kP).call(TP).call(Ast).call(Cst).call(AP).call(CP).call(Tst).value()];var Lst=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const Ist=$0(t=>({scale:{x:{guide:{type:"axisArc"},paddingOuter:0,paddingInner:.1},y:{guide:null,range:[0,1],paddingOuter:0,paddingInner:.1}}})),Dst=$0(t=>({coordinate:{type:"polar"}})),Bst=t=>{const{encode:e}=t,n=Lst(t,["encode"]),{position:r}=e;return Object.assign(Object.assign({},n),{encode:{x:r}})};function N6(t){return e=>null}function Fst(t){const{points:e}=t,[n,r,i,o]=e,a=Zr(n,o),s=ci(n,o),c=ci(r,i),l=vI(s,c),u=1/Math.sin(l/2),f=a/(1+u),d=f*Math.sqrt(2),[h,p]=i,y=sp(s)+l/2,m=f*u,b=h+m*Math.sin(y),O=p-m*Math.cos(y);return[b-d/2,O-d/2,d,d]}const jst=()=>t=>[Pg.of(t).call(kP).call(Bst).call(TP).call(Dst).call(T6).call(A6,Fst,N6,N6,{frame:!1}).call(AP).call(CP).call(Ist).value()];function Gst(t,e,n){const i=n,o=[0,i],a=[-i+1,1];if(t==="normal")return o;if(t==="reverse")return a;if(t==="alternate")return e%2===0?o:a;if(t==="reverse-alternate")return e%2===0?a:o}function zst(t,e,n){const r=[t];for(;r.length;){const i=r.pop();i.animate=bt({enter:{duration:e},update:{duration:e,easing:n,type:"morphing",fill:"both"},exit:{type:"fadeOut",duration:e}},i.animate||{});const{children:o}=i;Array.isArray(o)&&r.push(...o)}return t}const R6=()=>t=>{const{children:e=[],duration:n=1e3,iterationCount:r=1,direction:i="normal",easing:o="ease-in-out-sine"}=t,a=e.length;if(!Array.isArray(e)||a===0)return[];const{key:s}=e[0],c=e.map(l=>Object.assign(Object.assign({},l),{key:s})).map(l=>zst(l,n,o));return function*(){let l=0,u;for(;r==="infinite"||l<r;){const[f,d]=Gst(i,l,a);for(let h=f;h<d;h+=1){const p=Math.abs(h);u!==p&&(yield c[p]),u=p}l++}}};R6.props={};function nf(t,e,n){const{encode:r}=n;if(t===null)return[e];const i=Wst(t).map(a=>{var s;return[a,(s=En(r,a))===null||s===void 0?void 0:s[0]]}).filter(([,a])=>mr(a)),o=a=>i.map(([,s])=>s[a]).join("-");return Array.from(Nr(e,o).values())}function L6(t){return Array.isArray(t)?Ust(t):typeof t=="function"?Hst(t):t==="series"?Yst:t==="value"?Vst:t==="sum"?Xst:t==="maxIndex"?$st:null}function I6(t,e){for(const n of t)n.sort(e)}function D6(t,e){return(e==null?void 0:e.domain)||Array.from(new Set(t))}function Wst(t){return Array.isArray(t)?t:[t]}function Yst(t,e,n){return Tg(r=>n[r])}function Hst(t){return(e,n,r)=>Tg(i=>t(e[i]))}function Ust(t){return(e,n,r)=>(i,o)=>t.reduce((a,s)=>a!==0?a:li(e[i][s],e[o][s]),0)}function Vst(t,e,n){return Tg(r=>e[r])}function Xst(t,e,n){const r=Zf(t),i=Array.from(Nr(r,a=>n[+a]).entries()),o=new Map(i.map(([a,s])=>[a,s.reduce((c,l)=>c+ +e[l])]));return Tg(a=>o.get(n[a]))}function $st(t,e,n){const r=Zf(t),i=Array.from(Nr(r,a=>n[+a]).entries()),o=new Map(i.map(([a,s])=>[a,lp(s,c=>e[c])]));return Tg(a=>o.get(n[a]))}function Tg(t){return(e,n)=>li(t(e),t(n))}const B6=(t={})=>{const{groupBy:e="x",orderBy:n=null,reverse:r=!1,y:i="y",y1:o="y1",series:a=!0}=t;return(s,c)=>{var l;const{data:u,encode:f,style:d={}}=c,[h,p]=En(f,"y"),[v,y]=En(f,"y1"),[m]=a?ug(f,"series","color"):En(f,"color"),b=nf(e,s,c),E=((l=L6(n))!==null&&l!==void 0?l:()=>null)(u,h,m);E&&I6(b,E);const w=new Array(s.length),_=new Array(s.length),S=new Array(s.length),M=[],T=[];for(const R of b){r&&R.reverse();const I=v?+v[R[0]]:0,D=[],B=[];for(const dt of R){const _t=S[dt]=+h[dt]-I;_t<0?B.push(dt):_t>=0&&D.push(dt)}const F=D.length>0?D:B,G=B.length>0?B:D;let X=D.length-1,q=0;for(;X>0&&h[F[X]]===0;)X--;for(;q<G.length-1&&h[G[q]]===0;)q++;M.push(F[X]),T.push(G[q]);let J=I;for(const dt of B.reverse()){const _t=S[dt];J=w[dt]=(_[dt]=J)+_t}let et=I;for(const dt of D){const _t=S[dt];_t>0?et=w[dt]=(_[dt]=et)+_t:w[dt]=_[dt]=et}}const A=new Set(M),C=new Set(T),N=i==="y"?w:_,k=o==="y"?w:_;return[s,bt({},c,{encode:{y0:qx(h,p),y:xr(N,p),y1:xr(k,y)},style:Object.assign({first:(R,I)=>A.has(I),last:(R,I)=>C.has(I)},d)})]}};B6.props={};function F6(t,e){let n=0;if(e===void 0)for(let r of t)r!=null&&(r=+r)>=r&&++n;else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(i=+i)>=i&&++n}return n}function qst(t,e){let n=0,r,i=0,o=0;if(e===void 0)for(let a of t)a!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,o+=r*(a-i));else{let a=-1;for(let s of t)(s=e(s,++a,t))!=null&&(s=+s)>=s&&(r=s-i,i+=r/++n,o+=r*(s-i))}if(n>1)return o/(n-1)}function j6(t,e){const n=qst(t,e);return n&&Math.sqrt(n)}function Kst(t,e,n){const r=F6(t),i=j6(t);return r&&i?Math.ceil((n-e)*Math.cbrt(r)/(3.49*i)):1}var G6=Array.prototype,Zst=G6.slice,Xgt=G6.map;function RP(t){return()=>t}const Jst=Math.sqrt(50),Qst=Math.sqrt(10),tct=Math.sqrt(2);function wb(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=Jst?10:o>=Qst?5:o>=tct?2:1;let s,c,l;return i<0?(l=Math.pow(10,-i)/a,s=Math.round(t*l),c=Math.round(e*l),s/l<t&&++s,c/l>e&&--c,l=-l):(l=Math.pow(10,i)*a,s=Math.round(t/l),c=Math.round(e/l),s*l<t&&++s,c*l>e&&--c),c<s&&.5<=n&&n<2?wb(t,e,n*2):[s,c,l]}function ect(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,o,a]=r?wb(e,t,n):wb(t,e,n);if(!(o>=i))return[];const s=o-i+1,c=new Array(s);if(r)if(a<0)for(let l=0;l<s;++l)c[l]=(o-l)/-a;else for(let l=0;l<s;++l)c[l]=(o-l)*a;else if(a<0)for(let l=0;l<s;++l)c[l]=(i+l)/-a;else for(let l=0;l<s;++l)c[l]=(i+l)*a;return c}function Ag(t,e,n){return e=+e,t=+t,n=+n,wb(t,e,n)[2]}function $gt(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?Ag(e,t,n):Ag(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function nct(t,e,n){let r;for(;;){const i=Ag(t,e,n);if(i===r||i===0||!isFinite(i))return[t,e];i>0?(t=Math.floor(t/i)*i,e=Math.ceil(e/i)*i):i<0&&(t=Math.ceil(t*i)/i,e=Math.floor(e*i)/i),r=i}}function rct(t){return Math.max(1,Math.ceil(Math.log(F6(t))/Math.LN2)+1)}function ict(){var t=k0,e=Wl,n=rct;function r(i){Array.isArray(i)||(i=Array.from(i));var o,a=i.length,s,c,l=new Array(a);for(o=0;o<a;++o)l[o]=t(i[o],o,i);var u=e(l),f=u[0],d=u[1],h=n(l,f,d);if(!Array.isArray(h)){const O=d,E=+h;if(e===Wl&&([f,d]=nct(f,d,E)),h=ect(f,d,E),h[0]<=f&&(c=Ag(f,d,E)),h[h.length-1]>=d)if(O>=d&&e===Wl){const w=Ag(f,d,E);isFinite(w)&&(w>0?d=(Math.floor(d/w)+1)*w:w<0&&(d=(Math.ceil(d*-w)+1)/-w))}else h.pop()}for(var p=h.length,v=0,y=p;h[v]<=f;)++v;for(;h[y-1]>d;)--y;(v||y<p)&&(h=h.slice(v,y),p=y-v);var m=new Array(p+1),b;for(o=0;o<=p;++o)b=m[o]=[],b.x0=o>0?h[o-1]:f,b.x1=o<p?h[o]:d;if(isFinite(c)){if(c>0)for(o=0;o<a;++o)(s=l[o])!=null&&f<=s&&s<=d&&m[Math.min(p,Math.floor((s-f)/c))].push(i[o]);else if(c<0){for(o=0;o<a;++o)if((s=l[o])!=null&&f<=s&&s<=d){const O=Math.floor((f-s)*c);m[Math.min(p,O+(h[O]<=s))].push(i[o])}}}else for(o=0;o<a;++o)(s=l[o])!=null&&f<=s&&s<=d&&m[VZ(h,s,0,p)].push(i[o]);return m}return r.value=function(i){return arguments.length?(t=typeof i=="function"?i:RP(i),r):t},r.domain=function(i){return arguments.length?(e=typeof i=="function"?i:RP([i[0],i[1]]),r):e},r.thresholds=function(i){return arguments.length?(n=typeof i=="function"?i:RP(Array.isArray(i)?Zst.call(i):i),r):n},r}function LP(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?J0:NI(i);r>n;){if(r-n>600){const c=r-n+1,l=e-n+1,u=Math.log(c),f=.5*Math.exp(2*u/3),d=.5*Math.sqrt(u*f*(c-f)/c)*(l-c/2<0?-1:1),h=Math.max(n,Math.floor(e-l*f/c+d)),p=Math.min(r,Math.floor(e+(c-l)*f/c+d));LP(t,e,h,p,i)}const o=t[e];let a=n,s=r;for(Cg(t,n,e),i(t[r],o)>0&&Cg(t,n,r);a<s;){for(Cg(t,a,s),++a,--s;i(t[a],o)<0;)++a;for(;i(t[s],o)>0;)--s}i(t[n],o)===0?Cg(t,n,s):(++s,Cg(t,s,r)),s<=e&&(n=s+1),e<=s&&(r=s-1)}return t}function Cg(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function oct(t,e=li){let n,r=!1;if(e.length===1){let i;for(const o of t){const a=e(o);(r?li(a,i)>0:li(a,a)===0)&&(n=o,i=a,r=!0)}}else for(const i of t)(r?e(i,n)>0:e(i,i)===0)&&(n=i,r=!0);return n}function Ob(t,e,n){if(t=Float64Array.from(WZ(t,n)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return ls(t);if(e>=1)return Qn(t);var r,i=(r-1)*e,o=Math.floor(i),a=Qn(LP(t,o).subarray(0,o+1)),s=ls(t.subarray(o+1));return a+(s-a)*(i-o)}}function qgt(t,e,n=number){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),a=+n(t[o],o,t),s=+n(t[o+1],o+1,t);return a+(s-a)*(i-o)}}function act(t,e,n=VS){if(!isNaN(e=+e)){if(r=Float64Array.from(t,(s,c)=>VS(n(t[c],c,t))),e<=0)return Sg(r);if(e>=1)return lp(r);var r,i=Uint32Array.from(t,(s,c)=>c),o=r.length-1,a=Math.floor(o*e);return LP(i,a,0,o,(s,c)=>J0(r[s],r[c])),a=oct(i.subarray(0,a+1),s=>r[s]),a>=0?a:-1}}function IP(t,e){return Ob(t,.5,e)}function sct(t,e){return act(t,.5,e)}var cct=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function rf(t){return e=>e===null?t:`${t} of ${e}`}function lct(t){if(typeof t=="function")return[t,null];const n={mean:uct,max:dct,count:pct,first:gct,last:yct,sum:vct,min:hct,median:fct}[t];if(!n)throw new Error(`Unknown reducer: ${t}.`);return n()}function uct(){const t=(n,r)=>Mg(n,i=>+r[i]),e=rf("mean");return[t,e]}function fct(){const t=(n,r)=>IP(n,i=>+r[i]),e=rf("median");return[t,e]}function dct(){const t=(n,r)=>Qn(n,i=>+r[i]),e=rf("max");return[t,e]}function hct(){const t=(n,r)=>ls(n,i=>+r[i]),e=rf("min");return[t,e]}function pct(){const t=(n,r)=>n.length,e=rf("count");return[t,e]}function vct(){const t=(n,r)=>Cs(n,i=>+r[i]),e=rf("sum");return[t,e]}function gct(){const t=(n,r)=>r[n[0]],e=rf("first");return[t,e]}function yct(){const t=(n,r)=>r[n[n.length-1]],e=rf("last");return[t,e]}const DP=(t={})=>{const{groupBy:e}=t,n=cct(t,["groupBy"]);return(r,i)=>{const{data:o,encode:a}=i,s=e(r,i);if(!s)return[r,i];const c=(h,p)=>{if(h)return h;const{from:v}=p;if(!v)return h;const[,y]=En(a,v);return y},l=Object.entries(n).map(([h,p])=>{const[v,y]=lct(p),[m,b]=En(a,h),O=c(b,p),E=s.map(w=>v(w,m!=null?m:o));return[h,Object.assign(Object.assign({},Qnt(E,(y==null?void 0:y(O))||O)),{aggregate:!0})]}),u=Object.keys(a).map(h=>{const[p,v]=En(a,h),y=s.map(m=>p[m[0]]);return[h,xr(y,v)]}),f=s.map(h=>o[h[0]]);return[Zf(s),bt({},i,{data:f,encode:Object.fromEntries([...u,...l])})]}};DP.props={};var mct=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const z6="thresholds";function xct(t){const[e,n]=Wl(t);return Math.min(200,Kst(t,e,n))}const BP=(t={})=>{const{groupChannels:e=["color"],binChannels:n=["x","y"]}=t,r=mct(t,["groupChannels","binChannels"]),i={},o=(a,s)=>{const{encode:c}=s,l=n.map(p=>{const[v]=En(c,p);return v}),u=Xt(r,z6),f=a.filter(p=>l.every(v=>mr(v[p]))),d=[...e.map(p=>{const[v]=En(c,p);return v}).filter(mr).map(p=>v=>p[v]),...n.map((p,v)=>{const y=l[v],m=u[p]||xct(y),b=ict().thresholds(m).value(E=>+y[E])(f),O=new Map(b.flatMap(E=>{const{x0:w,x1:_}=E,S=`${w},${_}`;return E.map(M=>[M,S])}));return i[p]=O,E=>O.get(E)})],h=p=>d.map(v=>v(p)).join("-");return Array.from(Nr(f,h).values())};return DP(Object.assign(Object.assign(Object.assign({},Object.fromEntries(Object.entries(r).filter(([a])=>!a.startsWith(z6)))),Object.fromEntries(n.flatMap(a=>{const s=([l])=>+i[a].get(l).split(",")[0],c=([l])=>+i[a].get(l).split(",")[1];return c.from=a,[[a,s],[`${a}1`,c]]}))),{groupBy:o}))};BP.props={};const W6=(t={})=>{const{thresholds:e}=t;return BP(Object.assign(Object.assign({},t),{thresholdsX:e,groupChannels:["color"],binChannels:["x"]}))};W6.props={};var bct=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const Y6=(t={})=>{const{groupBy:e="x",reverse:n=!1,orderBy:r,padding:i}=t,o=bct(t,["groupBy","reverse","orderBy","padding"]);return(a,s)=>{const{data:c,encode:l,scale:u}=s,{series:f}=u,[d]=En(l,"y"),[h]=ug(l,"series","color"),p=D6(h,f),v=bt({},s,{scale:{series:{domain:p,paddingInner:i}}}),y=nf(e,a,s),m=L6(r);if(!m)return[a,bt(v,{encode:{series:xr(h)}})];const b=m(c,d,h);b&&I6(y,b);const O=new Array(a.length);for(const E of y){n&&E.reverse();for(let w=0;w<E.length;w++)O[E[w]]=p[w]}return[a,bt(v,{encode:{series:xr(r?O:h)}})]}};Y6.props={};function Eb(t,e,n){if(t===null)return[-.5,.5];const r=D6(t,e),o=new Ju({domain:r,range:[0,1],padding:n}).getBandWidth();return[-o/2,o/2]}function Sb(t,e,n){return e*(1-t)+n*t}const H6=(t={})=>{const{padding:e=0,paddingX:n=e,paddingY:r=e,random:i=Math.random}=t;return(o,a)=>{const{encode:s,scale:c}=a,{x:l,y:u}=c,[f]=En(s,"x"),[d]=En(s,"y"),h=Eb(f,l,n),p=Eb(d,u,r),v=o.map(()=>Sb(i(),...p)),y=o.map(()=>Sb(i(),...h));return[o,bt({scale:{x:{padding:.5},y:{padding:.5}}},a,{encode:{dy:xr(v),dx:xr(y)}})]}};H6.props={};const U6=(t={})=>{const{padding:e=0,random:n=Math.random}=t;return(r,i)=>{const{encode:o,scale:a}=i,{x:s}=a,[c]=En(o,"x"),l=Eb(c,s,e),u=r.map(()=>Sb(n(),...l));return[r,bt({scale:{x:{padding:.5}}},i,{encode:{dx:xr(u)}})]}};U6.props={};const V6=(t={})=>{const{padding:e=0,random:n=Math.random}=t;return(r,i)=>{const{encode:o,scale:a}=i,{y:s}=a,[c]=En(o,"y"),l=Eb(c,s,e),u=r.map(()=>Sb(n(),...l));return[r,bt({scale:{y:{padding:.5}}},i,{encode:{dy:xr(u)}})]}};V6.props={};var _ct=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const X6=(t={})=>{const{groupBy:e="x"}=t;return(n,r)=>{const{encode:i}=r,{x:o}=i,a=_ct(i,["x"]),s=Object.entries(a).filter(([d])=>d.startsWith("y")).map(([d])=>[d,En(i,d)[0]]),c=s.map(([d])=>[d,new Array(n.length)]),l=nf(e,n,r),u=new Array(l.length);for(let d=0;d<l.length;d++){const p=l[d].flatMap(m=>s.map(([,b])=>+b[m])),[v,y]=Wl(p);u[d]=(v+y)/2}const f=Math.max(...u);for(let d=0;d<l.length;d++){const h=f-u[d],p=l[d];for(const v of p)for(let y=0;y<s.length;y++){const[,m]=s[y],[,b]=c[y];b[v]=+m[v]+h}}return[n,bt({},r,{encode:Object.fromEntries(c.map(([d,h])=>[d,xr(h,En(i,d)[1])]))})]}};X6.props={};const $6=(t={})=>{const{groupBy:e="x",series:n=!0}=t;return(r,i)=>{const{encode:o}=i,[a]=En(o,"y"),[s,c]=En(o,"y1"),[l]=n?ug(o,"series","color"):En(o,"color"),u=nf(e,r,i),f=new Array(r.length);for(const d of u){const h=d.map(p=>+a[p]);for(let p=0;p<d.length;p++){const v=d[p],y=Math.max(...h.filter((m,b)=>b!==p));f[v]=+a[v]>y?y:a[v]}}return[r,bt({},i,{encode:{y1:xr(f,c)}})]}};$6.props={};const q6=t=>{const{groupBy:e=["x"],reducer:n=(a,s)=>s[a[0]],orderBy:r=null,reverse:i=!1,duration:o}=t;return(a,s)=>{const{encode:c}=s,u=(Array.isArray(e)?e:[e]).map(y=>[y,En(c,y)[0]]);if(u.length===0)return[a,s];let f=[a];for(const[,y]of u){const m=[];for(const b of f){const O=Array.from(Nr(b,E=>y[E]).values());m.push(...O)}f=m}if(r){const[y]=En(c,r);y&&f.sort((m,b)=>n(m,y)-n(b,y)),i&&f.reverse()}const d=(o||3e3)/f.length,[h]=o?[Ku(a,d)]:ug(c,"enterDuration",Ku(a,d)),[p]=ug(c,"enterDelay",Ku(a,0)),v=new Array(a.length);for(let y=0,m=0;y<f.length;y++){const b=f[y],O=Qn(b,E=>+h[E]);for(const E of b)v[E]=+p[E]+m;m+=O}return[a,bt({},s,{encode:{enterDuration:Kx(h),enterDelay:Kx(v)}})]}};q6.props={};var wct=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Oct(t){return typeof t=="function"?t:{min:(n,r)=>ls(n,i=>r[+i]),max:(n,r)=>Qn(n,i=>r[+i]),first:(n,r)=>r[n[0]],last:(n,r)=>r[n[n.length-1]],mean:(n,r)=>Mg(n,i=>r[+i]),median:(n,r)=>IP(n,i=>r[+i]),sum:(n,r)=>Cs(n,i=>r[+i]),deviation:(n,r)=>j6(n,i=>r[+i])}[t]||Qn}const K6=(t={})=>{const{groupBy:e="x",basis:n="max"}=t;return(r,i)=>{const{encode:o,tooltip:a}=i,{x:s}=o,c=wct(o,["x"]),l=Object.entries(c).filter(([v])=>v.startsWith("y")).map(([v])=>[v,En(o,v)[0]]),[,u]=l.find(([v])=>v==="y"),f=l.map(([v])=>[v,new Array(r.length)]),d=nf(e,r,i),h=Oct(n);for(const v of d){const y=h(v,u);for(const m of v)for(let b=0;b<l.length;b++){const[,O]=l[b],[,E]=f[b];E[m]=+O[m]/y}}const p=Fl(a)||(a==null?void 0:a.items)&&(a==null?void 0:a.items.length)!==0;return[r,bt({},i,Object.assign({encode:Object.fromEntries(f.map(([v,y])=>[v,xr(y,En(o,v)[1])]))},!p&&o.y0&&{tooltip:{items:[{channel:"y0"}]}}))]}};K6.props={};function Z6(t,e){return[t[0]]}function Ect(t,e){const n=t.length-1;return[t[n]]}function Sct(t,e){const n=lp(t,r=>e[r]);return[t[n]]}function Mct(t,e){const n=Sg(t,r=>e[r]);return[t[n]]}function Pct(t){return typeof t=="function"?t:{first:Z6,last:Ect,max:Sct,min:Mct}[t]||Z6}const Mb=(t={})=>{const{groupBy:e="series",channel:n,selector:r}=t;return(i,o)=>{const{encode:a}=o,s=nf(e,i,o),[c]=En(a,n),l=Pct(r);return[s.flatMap(u=>l(u,c)),o]}};Mb.props={};var Tct=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const J6=(t={})=>{const{selector:e}=t,n=Tct(t,["selector"]);return Mb(Object.assign({channel:"x",selector:e},n))};J6.props={};var Act=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const Q6=(t={})=>{const{selector:e}=t,n=Act(t,["selector"]);return Mb(Object.assign({channel:"y",selector:e},n))};Q6.props={};var Cct=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const kg=(t={})=>{const{channels:e=["x","y"]}=t,n=Cct(t,["channels"]),r=(i,o)=>nf(e,i,o);return DP(Object.assign(Object.assign({},n),{groupBy:r}))};kg.props={};const t8=(t={})=>kg(Object.assign(Object.assign({},t),{channels:["x","color","series"]}));t8.props={};const e8=(t={})=>kg(Object.assign(Object.assign({},t),{channels:["y","color","series"]}));e8.props={};const n8=(t={})=>kg(Object.assign(Object.assign({},t),{channels:["color"]}));n8.props={};function kct(t,e,n){return(e.length!==2?fc(JE(t,e,n),([r,i],[o,a])=>li(i,a)||li(r,o)):fc(Nr(t,n),([r,i],[o,a])=>e(i,a)||li(r,o))).map(([r])=>r)}var r8=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Nct(t,e,n){const{by:r=t,reducer:i="max"}=e,[o]=En(n,r);if(typeof i=="function")return a=>i(a,o);if(i==="max")return a=>Qn(a,s=>+o[s]);if(i==="min")return a=>ls(a,s=>+o[s]);if(i==="sum")return a=>Cs(a,s=>+o[s]);if(i==="median")return a=>IP(a,s=>+o[s]);if(i==="mean")return a=>Mg(a,s=>+o[s]);if(i==="first")return a=>o[a[0]];if(i==="last")return a=>o[a[a.length-1]];throw new Error(`Unknown reducer: ${i}`)}function Rct(t,e,n){const{reverse:r,channel:i}=n,{encode:o}=e,[a]=En(o,i),s=fc(t,c=>a[c]);return r&&s.reverse(),[s,e]}function Lct(t,e,n){if(!Array.isArray(n))return t;const r=new Set(n);return t.filter(i=>r.has(e[i]))}function Ict(t,e,n){var r;const{reverse:i,slice:o,channel:a}=n,s=r8(n,["reverse","slice","channel"]),{encode:c,scale:l={}}=e,u=(r=l[a])===null||r===void 0?void 0:r.domain,[f]=En(c,a),d=Nct(a,s,c),h=Lct(t,f,u),p=kct(h,d,m=>f[m]);i&&p.reverse();const v=typeof o=="number"?[0,o]:o,y=o?p.slice(...v):p;return[t,bt(e,{scale:{[a]:{domain:y}}})]}const Pb=(t={})=>{const{reverse:e=!1,slice:n,channel:r,ordinal:i=!0}=t,o=r8(t,["reverse","slice","channel","ordinal"]);return(a,s)=>i?Ict(a,s,Object.assign({reverse:e,slice:n,channel:r},o)):Rct(a,s,Object.assign({reverse:e,slice:n,channel:r},o))};Pb.props={};const i8=(t={})=>Pb(Object.assign(Object.assign({},t),{channel:"x"}));i8.props={};const o8=(t={})=>Pb(Object.assign(Object.assign({},t),{channel:"y"}));o8.props={};const a8=(t={})=>Pb(Object.assign(Object.assign({},t),{channel:"color"}));a8.props={};function Dct(t,e){return typeof e=="string"?t.map(n=>n[e]):t.map(e)}function Bct(t,e){if(typeof t=="function")return n=>t(n,e);if(t==="sum")return n=>Cs(n,r=>+e[r]);throw new Error(`Unknown reducer: ${t}`)}const s8=(t={})=>{const{field:e,channel:n="y",reducer:r="sum"}=t;return(i,o)=>{const{data:a,encode:s}=o,[c]=En(s,"x"),l=e?Dct(a,e):En(s,n)[0],u=Bct(r,l),f=Z1(i,u,d=>c[d]).map(d=>d[1]);return[i,bt({},o,{scale:{x:{flex:f}}})]}};s8.props={};function Fct(t){const{padding:e=0,direction:n="col"}=t;return(r,i,o)=>{const a=r.length;if(a===0)return[];const{innerWidth:s,innerHeight:c}=o,l=c/s;let u=Math.ceil(Math.sqrt(i/l)),f=s/u,d=Math.ceil(i/u),h=d*f;for(;h>c;)u=u+1,f=s/u,d=Math.ceil(i/u),h=d*f;const p=c-d*f,v=d<=1?0:p/(d-1),[y,m]=d<=1?[(s-a*f)/(a-1),(c-f)/2]:[0,0];return r.map((b,O)=>{const[E,w,_,S]=BS(b),M=n==="col"?O%u:Math.floor(O/d),T=n==="col"?Math.floor(O/u):O%d,A=M*f,C=(d-T-1)*f+p,N=(f-e)/_,k=(f-e)/S,R=A-E+y*M+1/2*e,I=C-w-v*T-m+1/2*e;return`translate(${R}, ${I}) scale(${N}, ${k})`})}}const c8=t=>(e,n)=>[e,bt({},n,{modifier:Fct(t),axis:!1})];c8.props={};function jct(t,e,n,r){const i=t.length;if(r>=i||r===0)return t;const o=h=>e[t[h]]*1,a=h=>n[t[h]]*1,s=[],c=(i-2)/(r-2);let l=0,u,f,d;s.push(l);for(let h=0;h<r-2;h++){let p=0,v=0,y=Math.floor((h+1)*c)+1,m=Math.floor((h+2)*c)+1;m=Math.min(m,i);const b=m-y;for(;y<m;y++)p+=o(y),v+=a(y);p/=b,v/=b;let O=Math.floor((h+0)*c)+1;const E=Math.floor((h+1)*c)+1,w=[o(l),a(l)];for(u=f=-1;O<E;O++)f=Math.abs((w[0]-p)*(o(O)-w[1])-(w[0]-a(O))*(v-w[0]))*.5,f>u&&(u=f,d=O);s.push(d),l=d}return s.push(i-1),s.map(h=>t[h])}function Gct(t){if(typeof t=="function")return t;if(t==="lttb")return jct;const e={first:r=>[r[0]],last:r=>[r[r.length-1]],min:(r,i,o)=>[r[Sg(r,a=>o[a])]],max:(r,i,o)=>[r[lp(r,a=>o[a])]],median:(r,i,o)=>[r[sct(r,a=>o[a])]]},n=e[t]||e.median;return(r,i,o,a)=>{const s=Math.max(1,Math.floor(r.length/a));return zct(r,s).flatMap(l=>n(l,i,o))}}function zct(t,e){const n=t.length,r=[];let i=0;for(;i<n;)r.push(t.slice(i,i+=e));return r}const l8=(t={})=>{const{strategy:e="median",thresholds:n=2e3,groupBy:r=["series","color"]}=t,i=Gct(e);return(o,a)=>{const{encode:s}=a,c=nf(r,o,a),[l]=En(s,"x"),[u]=En(s,"y");return[c.flatMap(f=>i(f,l,u,n)),a]}};l8.props={};function Wct(t){return typeof t=="object"?[t.value,t.ordinal]:[t,!0]}function Yct(t){var e;const{encode:n}=t,r=Object.assign(Object.assign({},t),{encode:Object.assign(Object.assign({},t.encode),{y:Object.assign(Object.assign({},t.encode.y),{value:[]})})}),i=(e=n==null?void 0:n.color)===null||e===void 0?void 0:e.field;if(!n||!i)return r;let o;for(const[a,s]of Object.entries(n))(a==="x"||a==="y")&&s.field===i&&(o=Object.assign(Object.assign({},o),{[a]:Object.assign(Object.assign({},s),{value:[]})}));return o?Object.assign(Object.assign({},t),{encode:Object.assign(Object.assign({},t.encode),o)}):r}const u8=(t={})=>(e,n)=>{const{encode:r,data:i}=n,o=Object.entries(t).map(([u,f])=>{const[d]=En(r,u);if(!d)return null;const[h,p=!0]=Wct(f);if(typeof h=="function")return v=>h(d[v]);if(p){const v=Array.isArray(h)?h:[h];return v.length===0?null:y=>v.includes(d[y])}else{const[v,y]=h;return m=>d[m]>=v&&d[m]<=y}}).filter(mr),a=u=>o.every(f=>f(u)),s=e.filter(a),c=s.map((u,f)=>f);if(o.length===0){const u=Yct(n);return[e,u]}const l=Object.entries(r).map(([u,f])=>[u,Object.assign(Object.assign({},f),{value:c.map(d=>f.value[s[d]]).filter(d=>d!==void 0)})]);return[c,bt({},n,{encode:Object.fromEntries(l),data:s.map(u=>i[u])})]};u8.props={};var f8={},FP={},jP=34,Ng=10,GP=13;function d8(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+'] || ""'}).join(",")+"}")}function Hct(t,e){var n=d8(t);return function(r,i){return e(n(r),i,t)}}function h8(t){var e=Object.create(null),n=[];return t.forEach(function(r){for(var i in r)i in e||n.push(e[i]=i)}),n}function Ga(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function Uct(t){return t<0?"-"+Ga(-t,6):t>9999?"+"+Ga(t,6):Ga(t,4)}function Vct(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":Uct(t.getUTCFullYear(),4)+"-"+Ga(t.getUTCMonth()+1,2)+"-"+Ga(t.getUTCDate(),2)+(i?"T"+Ga(e,2)+":"+Ga(n,2)+":"+Ga(r,2)+"."+Ga(i,3)+"Z":r?"T"+Ga(e,2)+":"+Ga(n,2)+":"+Ga(r,2)+"Z":n||e?"T"+Ga(e,2)+":"+Ga(n,2)+"Z":"")}function Xct(t){var e=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function r(f,d){var h,p,v=i(f,function(y,m){if(h)return h(y,m-1);p=y,h=d?Hct(y,d):d8(y)});return v.columns=p||[],v}function i(f,d){var h=[],p=f.length,v=0,y=0,m,b=p<=0,O=!1;f.charCodeAt(p-1)===Ng&&--p,f.charCodeAt(p-1)===GP&&--p;function E(){if(b)return FP;if(O)return O=!1,f8;var _,S=v,M;if(f.charCodeAt(S)===jP){for(;v++<p&&f.charCodeAt(v)!==jP||f.charCodeAt(++v)===jP;);return(_=v)>=p?b=!0:(M=f.charCodeAt(v++))===Ng?O=!0:M===GP&&(O=!0,f.charCodeAt(v)===Ng&&++v),f.slice(S+1,_-1).replace(/""/g,'"')}for(;v<p;){if((M=f.charCodeAt(_=v++))===Ng)O=!0;else if(M===GP)O=!0,f.charCodeAt(v)===Ng&&++v;else if(M!==n)continue;return f.slice(S,_)}return b=!0,f.slice(S,p)}for(;(m=E())!==FP;){for(var w=[];m!==f8&&m!==FP;)w.push(m),m=E();d&&(w=d(w,y++))==null||h.push(w)}return h}function o(f,d){return f.map(function(h){return d.map(function(p){return u(h[p])}).join(t)})}function a(f,d){return d==null&&(d=h8(f)),[d.map(u).join(t)].concat(o(f,d)).join(`
`)}function s(f,d){return d==null&&(d=h8(f)),o(f,d).join(`
`)}function c(f){return f.map(l).join(`
`)}function l(f){return f.map(u).join(t)}function u(f){return f==null?"":f instanceof Date?Vct(f):e.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:a,formatBody:s,formatRows:c,formatRow:l,formatValue:u}}function $ct(t){for(var e in t){var n=t[e].trim(),r,i;if(!n)n=null;else if(n==="true")n=!0;else if(n==="false")n=!1;else if(n==="NaN")n=NaN;else if(!isNaN(r=+n))n=r;else if(i=n.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))qct&&i[4]&&!i[7]&&(n=n.replace(/-/g,"/").replace(/T/," ")),n=new Date(n);else continue;t[e]=n}return t}const qct=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();var Kct=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(u){try{l(r.next(u))}catch(f){a(f)}}function c(u){try{l(r.throw(u))}catch(f){a(f)}}function l(u){u.done?o(u.value):i(u.value).then(s,c)}l((r=r.apply(t,e||[])).next())})};const p8=t=>{const{value:e,format:n=e.split(".").pop(),delimiter:r=",",autoType:i=!0}=t;return()=>Kct(void 0,void 0,void 0,function*(){const o=yield fetch(e);if(n==="csv"){const a=yield o.text();return Xct(r).parse(a,i?$ct:Kf)}else if(n==="json")return yield o.json();throw new Error(`Unknown format: ${n}.`)})};p8.props={};const v8=t=>{const{value:e}=t;return()=>e};v8.props={};function Zct(t,e){return t.map(n=>{if(Array.isArray(n)){const[r,i=e]=n;return[r,i]}return[n,e]})}const g8=t=>{const{fields:e=[]}=t,n=Zct(e,!0);return r=>{const i=(o,a)=>n.reduce((s,[c,l=!0])=>s!==0?s:l?o[c]<a[c]?-1:+(o[c]!==a[c]):o[c]>a[c]?-1:+(o[c]!==a[c]),0);return[...r].sort(i)}};g8.props={};function Kgt(t){return t!=null&&!Number.isNaN(t)}const y8=t=>{const{callback:e}=t;return n=>Array.isArray(n)?[...n].sort(e):n};y8.props={};function Jct(t){return t!=null&&!Number.isNaN(t)}const m8=t=>{const{callback:e=Jct}=t;return n=>n.filter(e)};m8.props={};function Qct(t,e=[]){return e.reduce((n,r)=>(r in t&&(n[r]=t[r]),n),{})}const x8=t=>{const{fields:e}=t;return n=>n.map(r=>Qct(r,e))};x8.props={};function tlt(t){return Object.keys(t).length===0}const b8=t=>e=>{if(!t||tlt(t))return e;const n=r=>Object.entries(r).reduce((i,[o,a])=>(i[t[o]||o]=a,i),{});return e.map(n)};b8.props={};function elt(t){return!t||Object.keys(t).length===0}const _8=t=>{const{fields:e,key:n="key",value:r="value"}=t;return i=>elt(e)?i:i.flatMap(o=>e.map(a=>Object.assign(Object.assign({},o),{[n]:a,[r]:o[a]})))};_8.props={};const w8=t=>{const{start:e,end:n}=t;return r=>r.slice(e,n)};w8.props={};const O8=t=>{const{callback:e=Kf}=t;return n=>e(n)};O8.props={};const E8=t=>{const{callback:e=Kf}=t;return n=>Array.isArray(n)?n.map(e):n};E8.props={};function S8(t){return typeof t=="string"?e=>e[t]:t}const M8=t=>{const{join:e,on:n,select:r=[],as:i=r,unknown:o=NaN}=t,[a,s]=n,c=S8(s),l=S8(a),u=JE(e,([f])=>f,f=>c(f));return f=>f.map(d=>{const h=u.get(l(d));return Object.assign(Object.assign({},d),r.reduce((p,v,y)=>(p[i[y]]=h?h[v]:o,p),{}))})};M8.props={};var nlt=gt(53843),rlt=gt.n(nlt);function Zgt(t){return t!=null&&!Number.isNaN(t)}const P8=t=>{const{field:e,groupBy:n,as:r=["y","size"],min:i,max:o,size:a=10,width:s}=t,[c,l]=r;return u=>Array.from(Nr(u,d=>n.map(h=>d[h]).join("-")).values()).map(d=>{const h=rlt().create(d.map(y=>y[e]),{min:i,max:o,size:a,width:s}),p=h.map(y=>y.x),v=h.map(y=>y.y);return Object.assign(Object.assign({},d[0]),{[c]:p,[l]:v})})};P8.props={};const T8=()=>t=>(console.log("G2 data section:",t),t);T8.props={};var ilt=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(u){try{l(r.next(u))}catch(f){a(f)}}function c(u){try{l(r.throw(u))}catch(f){a(f)}}function l(u){u.done?o(u.value):i(u.value).then(s,c)}l((r=r.apply(t,e||[])).next())})};function olt(t,e){return{set(n,r,i){if(e[n]===void 0)return this;const o=r?r.call(null,e[n]):e[n];return i?i.call(null,o):typeof t[n]=="function"?t[n](o):t[n]=o,this},setAsync(n,r,i){return ilt(this,void 0,void 0,function*(){if(e[n]===void 0)return this;const o=r?yield r.call(null,e[n]):e[n];return i?i.call(null,o):typeof t[n]=="function"?t[n](o):t[n]=o,this})}}}const zP=Math.PI/180,Rg=64,Tb=2048;function alt(t){return t.text}function slt(){return"serif"}function A8(){return"normal"}function clt(t){return t.value}function llt(){return~~(Math.random()*2)*90}function ult(){return 1}function flt(){}function dlt(t,e,n,r){if(e.sprite)return;const i=t.context,o=t.ratio;i.clearRect(0,0,(Rg<<5)/o,Tb/o);let a=0,s=0,c=0;const l=n.length;for(--r;++r<l;){e=n[r],i.save(),i.font=e.style+" "+e.weight+" "+~~((e.size+1)/o)+"px "+e.font;let d=i.measureText(e.text+"m").width*o,h=e.size<<1;if(e.rotate){const p=Math.sin(e.rotate*zP),v=Math.cos(e.rotate*zP),y=d*v,m=d*p,b=h*v,O=h*p;d=Math.max(Math.abs(y+O),Math.abs(y-O))+31>>5<<5,h=~~Math.max(Math.abs(m+b),Math.abs(m-b))}else d=d+31>>5<<5;if(h>c&&(c=h),a+d>=Rg<<5&&(a=0,s+=c,c=0),s+h>=Tb)break;i.translate((a+(d>>1))/o,(s+(h>>1))/o),e.rotate&&i.rotate(e.rotate*zP),i.fillText(e.text,0,0),e.padding&&(i.lineWidth=2*e.padding,i.strokeText(e.text,0,0)),i.restore(),e.width=d,e.height=h,e.xoff=a,e.yoff=s,e.x1=d>>1,e.y1=h>>1,e.x0=-e.x1,e.y0=-e.y1,e.hasText=!0,a+=d}const u=i.getImageData(0,0,(Rg<<5)/o,Tb/o).data,f=[];for(;--r>=0;){if(e=n[r],!e.hasText)continue;const d=e.width,h=d>>5;let p=e.y1-e.y0;for(let m=0;m<p*h;m++)f[m]=0;if(a=e.xoff,a==null)return;s=e.yoff;let v=0,y=-1;for(let m=0;m<p;m++){for(let b=0;b<d;b++){const O=h*m+(b>>5),E=u[(s+m)*(Rg<<5)+(a+b)<<2]?1<<31-b%32:0;f[O]|=E,v|=E}v?y=m:(e.y0++,p--,m--,s++)}e.y1=e.y0+y,e.sprite=f.slice(0,(e.y1-e.y0)*h)}}function hlt(t,e,n){n>>=5;const r=t.sprite,i=t.width>>5,o=t.x-(i<<4),a=o&127,s=32-a,c=t.y1-t.y0;let l=(t.y+t.y0)*n+(o>>5),u;for(let f=0;f<c;f++){u=0;for(let d=0;d<=i;d++)if((u<<s|(d<i?(u=r[f*i+d])>>>a:0))&e[l+d])return!0;l+=n}return!1}function plt(t,e){const n=t[0],r=t[1];e.x+e.x0<n.x&&(n.x=e.x+e.x0),e.y+e.y0<n.y&&(n.y=e.y+e.y0),e.x+e.x1>r.x&&(r.x=e.x+e.x1),e.y+e.y1>r.y&&(r.y=e.y+e.y1)}function vlt(t,e){return t.x+t.x1>e[0].x&&t.x+t.x0<e[1].x&&t.y+t.y1>e[0].y&&t.y+t.y0<e[1].y}function C8(t){const e=t[0]/t[1];return function(n){return[e*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function glt(t){const n=4*t[0]/t[1];let r=0,i=0;return function(o){const a=o<0?-1:1;switch(Math.sqrt(1+4*a*o)-a&3){case 0:r+=n;break;case 1:i+=4;break;case 2:r-=n;break;default:i-=4;break}return[r,i]}}function k8(t){const e=[];let n=-1;for(;++n<t;)e[n]=0;return e}function ylt(){return document.createElement("canvas")}function $l(t){return typeof t=="function"?t:function(){return t}}const mlt={archimedean:C8,rectangular:glt};function xlt(){let t=[256,256],e=alt,n=slt,r=clt,i=A8,o=llt,a=ult,s=C8,c=Math.random,l=flt,u=[],f=null,d=1/0,h=ylt;const p=A8,v={};v.start=function(){const[b,O]=t,E=y(h()),w=v.board?v.board:k8((t[0]>>5)*t[1]),_=u.length,S=[],M=u.map(function(N,k,R){return N.text=e.call(this,N,k,R),N.font=n.call(this,N,k,R),N.style=p.call(this,N,k,R),N.weight=i.call(this,N,k,R),N.rotate=o.call(this,N,k,R),N.size=~~r.call(this,N,k,R),N.padding=a.call(this,N,k,R),N}).sort(function(N,k){return k.size-N.size});let T=-1,A=v.board?[{x:0,y:0},{x:b,y:O}]:void 0;f&&clearInterval(f),f=setInterval(C,0),C();function C(){const N=Date.now();for(;Date.now()-N<d&&++T<_;){const k=M[T];k.x=b*(c()+.5)>>1,k.y=O*(c()+.5)>>1,dlt(E,k,M,T),k.hasText&&m(w,k,A)&&(l.call(null,"word",{cloud:v,word:k}),S.push(k),A?v.hasImage||plt(A,k):A=[{x:k.x+k.x0,y:k.y+k.y0},{x:k.x+k.x1,y:k.y+k.y1}],k.x-=t[0]>>1,k.y-=t[1]>>1)}v._tags=S,v._bounds=A,T>=_&&(v.stop(),l.call(null,"end",{cloud:v,words:S,bounds:A}))}return v},v.stop=function(){return f&&(clearInterval(f),f=null),v};function y(b){b.width=b.height=1;const O=Math.sqrt(b.getContext("2d").getImageData(0,0,1,1).data.length>>2);b.width=(Rg<<5)/O,b.height=Tb/O;const E=b.getContext("2d");return E.fillStyle=E.strokeStyle="red",E.textAlign="center",E.textBaseline="middle",{context:E,ratio:O}}function m(b,O,E){const w=O.x,_=O.y,S=Math.sqrt(t[0]*t[0]+t[1]*t[1]),M=s(t),T=c()<.5?1:-1;let A,C=-T,N,k;for(;(A=M(C+=T))&&(N=~~A[0],k=~~A[1],!(Math.min(Math.abs(N),Math.abs(k))>=S));)if(O.x=w+N,O.y=_+k,!(O.x+O.x0<0||O.y+O.y0<0||O.x+O.x1>t[0]||O.y+O.y1>t[1])&&(!E||!hlt(O,b,t[0]))&&(!E||vlt(O,E))){const R=O.sprite,I=O.width>>5,D=t[0]>>5,B=O.x-(I<<4),F=B&127,G=32-F,X=O.y1-O.y0;let q,J=(O.y+O.y0)*D+(B>>5);for(let et=0;et<X;et++){q=0;for(let dt=0;dt<=I;dt++)b[J+dt]|=q<<G|(dt<I?(q=R[et*I+dt])>>>F:0);J+=D}return delete O.sprite,!0}return!1}return v.createMask=b=>{const O=document.createElement("canvas"),[E,w]=t;if(!E||!w)return;const _=E>>5,S=k8((E>>5)*w);O.width=E,O.height=w;const M=O.getContext("2d");M.drawImage(b,0,0,b.width,b.height,0,0,E,w);const T=M.getImageData(0,0,E,w).data;for(let A=0;A<w;A++)for(let C=0;C<E;C++){const N=_*A+(C>>5),k=A*E+C<<2,I=T[k]>=250&&T[k+1]>=250&&T[k+2]>=250?1<<31-C%32:0;S[N]|=I}v.board=S,v.hasImage=!0},v.timeInterval=function(b){d=b==null?1/0:b},v.words=function(b){u=b},v.size=function(b=[]){t=[+b[0],+b[1]]},v.text=function(b){e=$l(b)},v.font=function(b){n=$l(b)},v.fontWeight=function(b){i=$l(b)},v.rotate=function(b){o=$l(b)},v.canvas=function(b){h=$l(b)},v.spiral=function(b){s=mlt[b]||b},v.fontSize=function(b){r=$l(b)},v.padding=function(b){a=$l(b)},v.random=function(b){c=$l(b)},v.on=function(b){l=$l(b)},v}var blt=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(u){try{l(r.next(u))}catch(f){a(f)}}function c(u){try{l(r.throw(u))}catch(f){a(f)}}function l(u){u.done?o(u.value):i(u.value).then(s,c)}l((r=r.apply(t,e||[])).next())})},_lt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const wlt={fontSize:[20,60],font:"Impact",padding:2,rotate:function(){return(~~(Math.random()*6)-3)*30}};function Olt(t){return new Promise((e,n)=>{if(t instanceof HTMLImageElement){e(t);return}if(typeof t=="string"){const r=new Image;r.crossOrigin="anonymous",r.src=t,r.onload=()=>e(r),r.onerror=()=>{console.error(`'image ${t} load failed !!!'`),n()};return}n()})}function Elt(t,e){if(typeof t=="function")return t;if(Array.isArray(t)){const[n,r]=t;if(!e)return()=>(r+n)/2;const[i,o]=e;return o===i?()=>(r+n)/2:({value:a})=>(r-n)/(o-i)*(a-i)+n}return()=>t}const N8=(t,e)=>n=>blt(void 0,void 0,void 0,function*(){const r=Object.assign({},wlt,t,{canvas:e.createCanvas}),i=xlt();yield olt(i,r).set("fontSize",b=>{const O=n.map(E=>E.value);return Elt(b,[ls(O),Qn(O)])}).set("font").set("fontStyle").set("fontWeight").set("padding").set("rotate").set("size").set("spiral").set("timeInterval").set("random").set("text").set("on").set("canvas").setAsync("imageMask",Olt,i.createMask),i.words([...n]);const o=i.start(),[a,s]=r.size,c=[{x:0,y:0},{x:a,y:s}],{_bounds:l=c,_tags:u,hasImage:f}=o,d=u.map(b=>{var{x:O,y:E,font:w}=b,_=_lt(b,["x","y","font"]);return Object.assign(Object.assign({},_),{x:O+a/2,y:E+s/2,fontFamily:w})}),[{x:h,y:p},{x:v,y}]=l,m={text:"",value:0,opacity:0,fontSize:0};return d.push(Object.assign(Object.assign({},m),{x:f?0:h,y:f?0:p}),Object.assign(Object.assign({},m),{x:f?a:v,y:f?s:y})),d});N8.props={};function WP(t){const{min:e,max:n}=t;return[[e[0],e[1]],[n[0],n[1]]]}function R8(t,e){const[n,r]=t,[i,o]=e;return n>=i[0]&&n<=o[0]&&r>=i[1]&&r<=o[1]}function Slt(t,e){const[n,r]=t;return!(R8(n,e)&&R8(r,e))}function Mlt(t,e){const[n,r]=t,[i,o]=e;return n[0]<o[0]&&r[0]>i[0]&&n[1]<o[1]&&r[1]>i[1]}const Plt=t=>{const{priority:e}=t;return n=>{const r=[];return e&&n.sort(e),n.forEach(i=>{Nx(i);const o=i.getLocalBounds();r.some(s=>Mlt(WP(o),WP(s.getLocalBounds())))?qS(i):r.push(i)}),n}};function Tlt([t,e],[n,r]){return r>t&&e>n}function Ab(){const t=new Map;return[r=>t.get(r),(r,i)=>t.set(r,i)]}function Alt(t){const e=t.cloneNode(!0),n=e.getElementById("connector");n&&e.removeChild(n);const{min:r,max:i}=e.getRenderBounds();return e.destroy(),{min:r,max:i}}const Clt=t=>{const{maxIterations:e=10,maxError:n=.1,padding:r=1}=t;return i=>{const o=i.length;if(o<=1)return i;const[a,s]=Ab(),[c,l]=Ab(),[u,f]=Ab(),[d,h]=Ab();for(const p of i){const{min:v,max:y}=Alt(p),[m,b]=v,[O,E]=y;s(p,b),l(p,b),f(p,E-b),h(p,[m,O])}for(let p=0;p<e;p++){i.sort((y,m)=>li(c(y),c(m)));let v=0;for(let y=0;y<o-1;y++){const m=i[y];let b=y+1,O;for(;(O=i[b])&&!Tlt(d(m),d(O));)b+=1;if(O){const E=c(m),w=u(m),_=c(O),S=_-(E+w);if(S<r){const M=(r-S)/2;v=Math.max(v,M),l(m,E-M),l(O,_+M)}}}if(v<n)break}for(const p of i)p.style.y+=c(p)-a(p);return i}},klt=()=>t=>(t.forEach(e=>{Nx(e);const n=e.attr("bounds"),r=e.getLocalBounds();Slt(WP(r),n)&&qS(e)}),t);function Nlt(t){return typeof t=="object"?t:xs(t)}function YP(t){let e=t/255;return e=e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4),e}function L8(t,e,n){return .2126*YP(t)+.7152*YP(e)+.0722*YP(n)}function I8(t,e){const{r:n,g:r,b:i}=t,{r:o,g:a,b:s}=e,c=L8(n,r,i),l=L8(o,a,s);return(Math.max(c,l)+.05)/(Math.min(c,l)+.05)}function Rlt(t,e){const n=lp(e,r=>I8(t,Nlt(r)));return e[n]}const Llt=t=>{const{threshold:e=4.5,palette:n=["#000","#fff"]}=t;return r=>(r.forEach(i=>{const o=i.attr("dependentElement").parsedStyle.fill,a=i.parsedStyle.fill;I8(a,o)<e&&i.attr("fill",Rlt(o,n))}),r)},Ilt=(t,e)=>{const[[n,r],[i,o]]=e,[[a,s],[c,l]]=t;let u=0,f=0;return a<n?u=n-a:c>i&&(u=i-c),s<r?f=r-s:l>o&&(f=o-l),[u,f]},Dlt=()=>(t,{canvas:e})=>{const{width:n,height:r}=e.getConfig();return t.forEach(i=>{Nx(i);const{max:o,min:a}=i.getRenderBounds(),[s,c]=o,[l,u]=a,f=Ilt([[l,u],[s,c]],[[0,0],[n,r]]);i.style.connector&&i.style.connectorPoints&&(i.style.connectorPoints[0][0]-=f[0],i.style.connectorPoints[0][1]-=f[1]),i.style.x+=f[0],i.style.y+=f[1]}),t};function Blt(){return{"data.fetch":p8,"data.inline":v8,"data.sortBy":g8,"data.sort":y8,"data.filter":m8,"data.pick":x8,"data.rename":b8,"data.fold":_8,"data.slice":w8,"data.custom":O8,"data.map":E8,"data.join":M8,"data.kde":P8,"data.log":T8,"data.wordCloud":N8,"transform.stackY":B6,"transform.binX":W6,"transform.bin":BP,"transform.dodgeX":Y6,"transform.jitter":H6,"transform.jitterX":U6,"transform.jitterY":V6,"transform.symmetryY":X6,"transform.diffY":$6,"transform.stackEnter":q6,"transform.normalizeY":K6,"transform.select":Mb,"transform.selectX":J6,"transform.selectY":Q6,"transform.groupX":t8,"transform.groupY":e8,"transform.groupColor":n8,"transform.group":kg,"transform.sortX":i8,"transform.sortY":o8,"transform.sortColor":a8,"transform.flexX":s8,"transform.pack":c8,"transform.sample":l8,"transform.filter":u8,"coordinate.cartesian":C5,"coordinate.polar":N0,"coordinate.transpose":OM,"coordinate.theta":k5,"coordinate.parallel":EM,"coordinate.fisheye":N5,"coordinate.radial":aS,"coordinate.radar":R5,"encode.constant":L5,"encode.field":I5,"encode.transform":D5,"encode.column":B5,"mark.interval":U5,"mark.rect":X5,"mark.line":xD,"mark.point":HD,"mark.text":KD,"mark.cell":JD,"mark.area":a4,"mark.link":WM,"mark.image":b4,"mark.polygon":S4,"mark.box":A4,"mark.vector":k4,"mark.lineX":I4,"mark.lineY":F4,"mark.connector":W4,"mark.range":U4,"mark.rangeX":$4,"mark.rangeY":Z4,"mark.path":nB,"mark.shape":oB,"mark.density":cB,"mark.heatmap":dB,"mark.wordCloud":VM,"palette.category10":hB,"palette.category20":pB,"scale.linear":vB,"scale.ordinal":xB,"scale.band":wB,"scale.identity":OB,"scale.point":EB,"scale.time":VB,"scale.log":$B,"scale.pow":qB,"scale.sqrt":KB,"scale.threshold":ZB,"scale.quantile":JB,"scale.quantize":QB,"scale.sequential":tF,"scale.constant":eF,"theme.classic":nF,"theme.classicDark":iF,"theme.academy":oF,"theme.light":nP,"theme.dark":rF,"component.axisX":aF,"component.axisY":sF,"component.legendCategory":iP,"component.legendContinuous":Yu,"component.legends":lF,"component.title":fF,"component.sliderX":vF,"component.sliderY":gF,"component.scrollbarX":yF,"component.scrollbarY":mF,"animation.scaleInX":cP,"animation.scaleOutX":Tot,"animation.scaleInY":xF,"animation.scaleOutY":Aot,"animation.waveIn":bF,"animation.fadeIn":_F,"animation.fadeOut":wF,"animation.zoomIn":Cot,"animation.zoomOut":kot,"animation.pathIn":OF,"animation.morphing":PF,"animation.growInX":TF,"animation.growInY":AF,"interaction.elementHighlight":pb,"interaction.elementHighlightByX":CF,"interaction.elementHighlightByColor":kF,"interaction.elementSelect":vb,"interaction.elementSelectByX":NF,"interaction.elementSelectByColor":RF,"interaction.fisheye":Xot,"interaction.chartIndex":LF,"interaction.tooltip":qF,"interaction.legendFilter":bat,"interaction.legendHighlight":_at,"interaction.brushHighlight":yP,"interaction.brushXHighlight":Pat,"interaction.brushYHighlight":Tat,"interaction.brushAxisHighlight":Bat,"interaction.brushFilter":_P,"interaction.brushXFilter":zat,"interaction.brushYFilter":Wat,"interaction.sliderFilter":c6,"interaction.scrollbarFilter":Xat,"interaction.poptip":f6,"interaction.treemapDrillDown":pst,"interaction.elementPointMove":bst,"composition.spaceLayer":M6,"composition.spaceFlex":P6,"composition.facetRect":k6,"composition.repeatMatrix":Rst,"composition.facetCircle":jst,"composition.timingKeyframe":R6,"labelTransform.overlapHide":Plt,"labelTransform.overlapDodgeY":Clt,"labelTransform.overflowHide":klt,"labelTransform.contrastReverse":Llt,"labelTransform.exceedAdjust":Dlt}}var Lg=t=>t;function Cb(t,e){t&&B8.hasOwnProperty(t.type)&&B8[t.type](t,e)}var D8={Feature:function(t,e){Cb(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)Cb(n[r].geometry,e)}},B8={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){HP(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)HP(n[r],e,0)},Polygon:function(t,e){F8(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)F8(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)Cb(n[r],e)}};function HP(t,e,n){var r=-1,i=t.length-n,o;for(e.lineStart();++r<i;)o=t[r],e.point(o[0],o[1],o[2]);e.lineEnd()}function F8(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)HP(t[n],e,1);e.polygonEnd()}function Mp(t,e){t&&D8.hasOwnProperty(t.type)?D8[t.type](t,e):Cb(t,e)}class ql{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const o=n[i],a=e+o,s=Math.abs(e)<Math.abs(o)?e-(a-o):o-(a-e);s&&(n[r++]=s),e=a}return n[r]=e,this._n=r+1,this}valueOf(){const e=this._partials;let n=this._n,r,i,o,a=0;if(n>0){for(a=e[--n];n>0&&(r=a,i=e[--n],a=r+i,o=i-(a-r),!o););n>0&&(o<0&&e[n-1]<0||o>0&&e[n-1]>0)&&(i=o*2,r=a+i,i==r-a&&(a=r))}return a}}function Jgt(t,e){const n=new ql;if(e===void 0)for(let r of t)(r=+r)&&n.add(r);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&n.add(i)}return+n}function Qgt(t,e){const n=new ql;let r=-1;return Float64Array.from(t,e===void 0?i=>n.add(+i||0):i=>n.add(+e(i,++r,t)||0))}var Ue=1e-6,j8=1e-12,wn=Math.PI,yi=wn/2,G8=wn/4,fs=wn*2,Jo=180/wn,ui=wn/180,Un=Math.abs,Pp=Math.atan,Kl=Math.atan2,bn=Math.cos,kb=Math.ceil,z8=Math.exp,tyt=Math.floor,eyt=Math.hypot,Nb=Math.log,UP=Math.pow,tn=Math.sin,Fs=Math.sign||function(t){return t>0?1:t<0?-1:0},za=Math.sqrt,VP=Math.tan;function W8(t){return t>1?0:t<-1?wn:Math.acos(t)}function js(t){return t>1?yi:t<-1?-yi:Math.asin(t)}function nyt(t){return(t=tn(t/2))*t}function Gs(){}var XP=new ql,$P=new ql,Y8,H8,qP,KP,of={point:Gs,lineStart:Gs,lineEnd:Gs,polygonStart:function(){of.lineStart=Flt,of.lineEnd=Glt},polygonEnd:function(){of.lineStart=of.lineEnd=of.point=Gs,XP.add(Un($P)),$P=new ql},result:function(){var t=XP/2;return XP=new ql,t}};function Flt(){of.point=jlt}function jlt(t,e){of.point=U8,Y8=qP=t,H8=KP=e}function U8(t,e){$P.add(KP*t-qP*e),qP=t,KP=e}function Glt(){U8(Y8,H8)}var V8=of,Tp=1/0,Rb=Tp,Ig=-Tp,Lb=Ig,zlt={point:Wlt,lineStart:Gs,lineEnd:Gs,polygonStart:Gs,polygonEnd:Gs,result:function(){var t=[[Tp,Rb],[Ig,Lb]];return Ig=Lb=-(Rb=Tp=1/0),t}};function Wlt(t,e){t<Tp&&(Tp=t),t>Ig&&(Ig=t),e<Rb&&(Rb=e),e>Lb&&(Lb=e)}var Ib=zlt,ZP=0,JP=0,Dg=0,Db=0,Bb=0,Ap=0,QP=0,tT=0,Bg=0,X8,$8,ol,al,pc={point:bd,lineStart:q8,lineEnd:K8,polygonStart:function(){pc.lineStart=Ult,pc.lineEnd=Vlt},polygonEnd:function(){pc.point=bd,pc.lineStart=q8,pc.lineEnd=K8},result:function(){var t=Bg?[QP/Bg,tT/Bg]:Ap?[Db/Ap,Bb/Ap]:Dg?[ZP/Dg,JP/Dg]:[NaN,NaN];return ZP=JP=Dg=Db=Bb=Ap=QP=tT=Bg=0,t}};function bd(t,e){ZP+=t,JP+=e,++Dg}function q8(){pc.point=Ylt}function Ylt(t,e){pc.point=Hlt,bd(ol=t,al=e)}function Hlt(t,e){var n=t-ol,r=e-al,i=za(n*n+r*r);Db+=i*(ol+t)/2,Bb+=i*(al+e)/2,Ap+=i,bd(ol=t,al=e)}function K8(){pc.point=bd}function Ult(){pc.point=Xlt}function Vlt(){Z8(X8,$8)}function Xlt(t,e){pc.point=Z8,bd(X8=ol=t,$8=al=e)}function Z8(t,e){var n=t-ol,r=e-al,i=za(n*n+r*r);Db+=i*(ol+t)/2,Bb+=i*(al+e)/2,Ap+=i,i=al*t-ol*e,QP+=i*(ol+t),tT+=i*(al+e),Bg+=i*3,bd(ol=t,al=e)}var J8=pc;function Q8(t){this._context=t}Q8.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,fs);break}}},result:Gs};var eT=new ql,nT,tj,ej,Fg,jg,Fb={point:Gs,lineStart:function(){Fb.point=$lt},lineEnd:function(){nT&&nj(tj,ej),Fb.point=Gs},polygonStart:function(){nT=!0},polygonEnd:function(){nT=null},result:function(){var t=+eT;return eT=new ql,t}};function $lt(t,e){Fb.point=nj,tj=Fg=t,ej=jg=e}function nj(t,e){Fg-=t,jg-=e,eT.add(za(Fg*Fg+jg*jg)),Fg=t,jg=e}var rj=Fb;let ij,jb,oj,aj;class sj{constructor(e){this._append=e==null?cj:qlt(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,n){switch(this._point){case 0:{this._append`M${e},${n}`,this._point=1;break}case 1:{this._append`L${e},${n}`;break}default:{if(this._append`M${e},${n}`,this._radius!==oj||this._append!==jb){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,oj=r,jb=this._append,aj=this._,this._=i}this._+=aj;break}}}result(){const e=this._;return this._="",e.length?e:null}}function cj(t){let e=1;this._+=t[0];for(const n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function qlt(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return cj;if(e!==ij){const n=ki(10,e);ij=e,jb=function(i){let o=1;this._+=i[0];for(const a=i.length;o<a;++o)this._+=Math.round(arguments[o]*n)/n+i[o]}}return jb}function lj(t,e){let n=3,r=4.5,i,o;function a(s){return s&&(typeof r=="function"&&o.pointRadius(+r.apply(this,arguments)),Mp(s,i(o))),o.result()}return a.area=function(s){return Mp(s,i(V8)),V8.result()},a.measure=function(s){return Mp(s,i(rj)),rj.result()},a.bounds=function(s){return Mp(s,i(Ib)),Ib.result()},a.centroid=function(s){return Mp(s,i(J8)),J8.result()},a.projection=function(s){return arguments.length?(i=s==null?(t=null,Lg):(t=s).stream,a):t},a.context=function(s){return arguments.length?(o=s==null?(e=null,new sj(n)):new Q8(e=s),typeof r!="function"&&o.pointRadius(r),a):e},a.pointRadius=function(s){return arguments.length?(r=typeof s=="function"?s:(o.pointRadius(+s),+s),a):r},a.digits=function(s){if(!arguments.length)return n;if(s==null)n=null;else{const c=Math.floor(s);if(!(c>=0))throw new RangeError(`invalid digits: ${s}`);n=c}return e===null&&(o=new sj(n)),a},a.projection(t).digits(n).context(e)}function Cp(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(i);++r<i;)o[r]=t+r*n;return o}function uj(t,e,n){var r=Cp(t,e-Ue,n).concat(e);return function(i){return r.map(function(o){return[i,o]})}}function fj(t,e,n){var r=Cp(t,e-Ue,n).concat(e);return function(i){return r.map(function(o){return[o,i]})}}function Klt(){var t,e,n,r,i,o,a,s,c=10,l=c,u=90,f=360,d,h,p,v,y=2.5;function m(){return{type:"MultiLineString",coordinates:b()}}function b(){return Cp(kb(r/u)*u,n,u).map(p).concat(Cp(kb(s/f)*f,a,f).map(v)).concat(Cp(kb(e/c)*c,t,c).filter(function(O){return Un(O%u)>Ue}).map(d)).concat(Cp(kb(o/l)*l,i,l).filter(function(O){return Un(O%f)>Ue}).map(h))}return m.lines=function(){return b().map(function(O){return{type:"LineString",coordinates:O}})},m.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(v(a).slice(1),p(n).reverse().slice(1),v(s).reverse().slice(1))]}},m.extent=function(O){return arguments.length?m.extentMajor(O).extentMinor(O):m.extentMinor()},m.extentMajor=function(O){return arguments.length?(r=+O[0][0],n=+O[1][0],s=+O[0][1],a=+O[1][1],r>n&&(O=r,r=n,n=O),s>a&&(O=s,s=a,a=O),m.precision(y)):[[r,s],[n,a]]},m.extentMinor=function(O){return arguments.length?(e=+O[0][0],t=+O[1][0],o=+O[0][1],i=+O[1][1],e>t&&(O=e,e=t,t=O),o>i&&(O=o,o=i,i=O),m.precision(y)):[[e,o],[t,i]]},m.step=function(O){return arguments.length?m.stepMajor(O).stepMinor(O):m.stepMinor()},m.stepMajor=function(O){return arguments.length?(u=+O[0],f=+O[1],m):[u,f]},m.stepMinor=function(O){return arguments.length?(c=+O[0],l=+O[1],m):[c,l]},m.precision=function(O){return arguments.length?(y=+O,d=uj(o,i,90),h=fj(e,t,y),p=uj(s,a,90),v=fj(r,n,y),m):y},m.extentMajor([[-180,-90+Ue],[180,90-Ue]]).extentMinor([[-180,-80-Ue],[180,80+Ue]])}function Zlt(){return Klt()()}function dj(){var t=[],e;return{point:function(n,r,i){e.push([n,r,i])},lineStart:function(){t.push(e=[])},lineEnd:Gs,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function Gb(t,e){return Un(t[0]-e[0])<Ue&&Un(t[1]-e[1])<Ue}function zb(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function hj(t,e,n,r,i){var o=[],a=[],s,c;if(t.forEach(function(p){if(!((v=p.length-1)<=0)){var v,y=p[0],m=p[v],b;if(Gb(y,m)){if(!y[2]&&!m[2]){for(i.lineStart(),s=0;s<v;++s)i.point((y=p[s])[0],y[1]);i.lineEnd();return}m[0]+=2*Ue}o.push(b=new zb(y,p,null,!0)),a.push(b.o=new zb(y,null,b,!1)),o.push(b=new zb(m,p,null,!1)),a.push(b.o=new zb(m,null,b,!0))}}),!!o.length){for(a.sort(e),pj(o),pj(a),s=0,c=a.length;s<c;++s)a[s].e=n=!n;for(var l=o[0],u,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;u=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(s=0,c=u.length;s<c;++s)i.point((f=u[s])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(u=d.p.z,s=u.length-1;s>=0;--s)i.point((f=u[s])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,u=d.z,h=!h}while(!d.v);i.lineEnd()}}}function pj(t){if(e=t.length){for(var e,n=0,r=t[0],i;++n<e;)r.n=i=t[n],i.p=r,r=i;r.n=i=t[0],i.p=r}}function rT(t){return[Kl(t[1],t[0]),js(t[2])]}function kp(t){var e=t[0],n=t[1],r=bn(n);return[r*bn(e),r*tn(e),tn(n)]}function Wb(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Yb(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function iT(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Hb(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function oT(t){var e=za(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function aT(t){return Un(t[0])<=wn?t[0]:Fs(t[0])*((Un(t[0])+wn)%fs-wn)}function Jlt(t,e){var n=aT(e),r=e[1],i=tn(r),o=[tn(n),-bn(n),0],a=0,s=0,c=new ql;i===1?r=yi+Ue:i===-1&&(r=-yi-Ue);for(var l=0,u=t.length;l<u;++l)if(d=(f=t[l]).length)for(var f,d,h=f[d-1],p=aT(h),v=h[1]/2+G8,y=tn(v),m=bn(v),b=0;b<d;++b,p=E,y=_,m=S,h=O){var O=f[b],E=aT(O),w=O[1]/2+G8,_=tn(w),S=bn(w),M=E-p,T=M>=0?1:-1,A=T*M,C=A>wn,N=y*_;if(c.add(Kl(N*T*tn(A),m*S+N*bn(A))),a+=C?M+T*fs:M,C^p>=n^E>=n){var k=Yb(kp(h),kp(O));oT(k);var R=Yb(o,k);oT(R);var I=(C^M>=0?-1:1)*js(R[2]);(r>I||r===I&&(k[0]||k[1]))&&(s+=C^M>=0?1:-1)}}return(a<-Ue||a<Ue&&c<-j8)^s&1}function*Qlt(t){for(const e of t)yield*K9(e)}function vj(t){return Array.from(Qlt(t))}function gj(t,e,n,r){return function(i){var o=e(i),a=dj(),s=e(a),c=!1,l,u,f,d={point:h,lineStart:v,lineEnd:y,polygonStart:function(){d.point=m,d.lineStart=b,d.lineEnd=O,u=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=v,d.lineEnd=y,u=vj(u);var E=Jlt(l,r);u.length?(c||(i.polygonStart(),c=!0),hj(u,eut,E,n,i)):E&&(c||(i.polygonStart(),c=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),c&&(i.polygonEnd(),c=!1),u=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(E,w){t(E,w)&&i.point(E,w)}function p(E,w){o.point(E,w)}function v(){d.point=p,o.lineStart()}function y(){d.point=h,o.lineEnd()}function m(E,w){f.push([E,w]),s.point(E,w)}function b(){s.lineStart(),f=[]}function O(){m(f[0][0],f[0][1]),s.lineEnd();var E=s.clean(),w=a.result(),_,S=w.length,M,T,A;if(f.pop(),l.push(f),f=null,!!S){if(E&1){if(T=w[0],(M=T.length-1)>0){for(c||(i.polygonStart(),c=!0),i.lineStart(),_=0;_<M;++_)i.point((A=T[_])[0],A[1]);i.lineEnd()}return}S>1&&E&2&&w.push(w.pop().concat(w.shift())),u.push(w.filter(tut))}}return d}}function tut(t){return t.length>1}function eut(t,e){return((t=t.x)[0]<0?t[1]-yi-Ue:yi-t[1])-((e=e.x)[0]<0?e[1]-yi-Ue:yi-e[1])}var yj=gj(function(){return!0},nut,iut,[-wn,-yi]);function nut(t){var e=NaN,n=NaN,r=NaN,i;return{lineStart:function(){t.lineStart(),i=1},point:function(o,a){var s=o>0?wn:-wn,c=Un(o-e);Un(c-wn)<Ue?(t.point(e,n=(n+a)/2>0?yi:-yi),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(s,n),t.point(o,n),i=0):r!==s&&c>=wn&&(Un(e-r)<Ue&&(e-=r*Ue),Un(o-s)<Ue&&(o-=s*Ue),n=rut(e,n,o,a),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(s,n),i=0),t.point(e=o,n=a),r=s},lineEnd:function(){t.lineEnd(),e=n=NaN},clean:function(){return 2-i}}}function rut(t,e,n,r){var i,o,a=tn(t-n);return Un(a)>Ue?Pp((tn(e)*(o=bn(r))*tn(n)-tn(r)*(i=bn(e))*tn(t))/(i*o*a)):(e+r)/2}function iut(t,e,n,r){var i;if(t==null)i=n*yi,r.point(-wn,i),r.point(0,i),r.point(wn,i),r.point(wn,0),r.point(wn,-i),r.point(0,-i),r.point(-wn,-i),r.point(-wn,0),r.point(-wn,i);else if(Un(t[0]-e[0])>Ue){var o=t[0]<e[0]?wn:-wn;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}function mj(t,e,n,r,i,o){if(n){var a=bn(e),s=tn(e),c=r*n;i==null?(i=e+r*fs,o=e-c/2):(i=xj(a,i),o=xj(a,o),(r>0?i<o:i>o)&&(i+=r*fs));for(var l,u=i;r>0?u>o:u<o;u-=c)l=rT([a,-s*bn(u),-s*tn(u)]),t.point(l[0],l[1])}}function xj(t,e){e=kp(e),e[0]-=t,oT(e);var n=W8(-e[1]);return((-e[2]<0?-n:n)+fs-Ue)%fs}function ryt(){var t=constant([0,0]),e=constant(90),n=constant(2),r,i,o={point:a};function a(c,l){r.push(c=i(c,l)),c[0]*=degrees,c[1]*=degrees}function s(){var c=t.apply(this,arguments),l=e.apply(this,arguments)*radians,u=n.apply(this,arguments)*radians;return r=[],i=rotateRadians(-c[0]*radians,-c[1]*radians,0).invert,mj(o,l,u,1),c={type:"Polygon",coordinates:[r]},r=i=null,c}return s.center=function(c){return arguments.length?(t=typeof c=="function"?c:constant([+c[0],+c[1]]),s):t},s.radius=function(c){return arguments.length?(e=typeof c=="function"?c:constant(+c),s):e},s.precision=function(c){return arguments.length?(n=typeof c=="function"?c:constant(+c),s):n},s}function out(t){var e=bn(t),n=2*ui,r=e>0,i=Un(e)>Ue;function o(u,f,d,h){mj(h,t,n,d,u,f)}function a(u,f){return bn(u)*bn(f)>e}function s(u){var f,d,h,p,v;return{lineStart:function(){p=h=!1,v=1},point:function(y,m){var b=[y,m],O,E=a(y,m),w=r?E?0:l(y,m):E?l(y+(y<0?wn:-wn),m):0;if(!f&&(p=h=E)&&u.lineStart(),E!==h&&(O=c(f,b),(!O||Gb(f,O)||Gb(b,O))&&(b[2]=1)),E!==h)v=0,E?(u.lineStart(),O=c(b,f),u.point(O[0],O[1])):(O=c(f,b),u.point(O[0],O[1],2),u.lineEnd()),f=O;else if(i&&f&&r^E){var _;!(w&d)&&(_=c(b,f,!0))&&(v=0,r?(u.lineStart(),u.point(_[0][0],_[0][1]),u.point(_[1][0],_[1][1]),u.lineEnd()):(u.point(_[1][0],_[1][1]),u.lineEnd(),u.lineStart(),u.point(_[0][0],_[0][1],3)))}E&&(!f||!Gb(f,b))&&u.point(b[0],b[1]),f=b,h=E,d=w},lineEnd:function(){h&&u.lineEnd(),f=null},clean:function(){return v|(p&&h)<<1}}}function c(u,f,d){var h=kp(u),p=kp(f),v=[1,0,0],y=Yb(h,p),m=Wb(y,y),b=y[0],O=m-b*b;if(!O)return!d&&u;var E=e*m/O,w=-e*b/O,_=Yb(v,y),S=Hb(v,E),M=Hb(y,w);iT(S,M);var T=_,A=Wb(S,T),C=Wb(T,T),N=A*A-C*(Wb(S,S)-1);if(!(N<0)){var k=za(N),R=Hb(T,(-A-k)/C);if(iT(R,S),R=rT(R),!d)return R;var I=u[0],D=f[0],B=u[1],F=f[1],G;D<I&&(G=I,I=D,D=G);var X=D-I,q=Un(X-wn)<Ue,J=q||X<Ue;if(!q&&F<B&&(G=B,B=F,F=G),J?q?B+F>0^R[1]<(Un(R[0]-I)<Ue?B:F):B<=R[1]&&R[1]<=F:X>wn^(I<=R[0]&&R[0]<=D)){var et=Hb(T,(-A+k)/C);return iT(et,S),[R,rT(et)]}}}function l(u,f){var d=r?t:wn-t,h=0;return u<-d?h|=1:u>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return gj(a,s,o,r?[0,-t]:[-wn,t-wn])}function aut(t,e,n,r,i,o){var a=t[0],s=t[1],c=e[0],l=e[1],u=0,f=1,d=c-a,h=l-s,p;if(p=n-a,!(!d&&p>0)){if(p/=d,d<0){if(p<u)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>u&&(u=p)}if(p=i-a,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>u&&(u=p)}else if(d>0){if(p<u)return;p<f&&(f=p)}if(p=r-s,!(!h&&p>0)){if(p/=h,h<0){if(p<u)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>u&&(u=p)}if(p=o-s,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>u&&(u=p)}else if(h>0){if(p<u)return;p<f&&(f=p)}return u>0&&(t[0]=a+u*d,t[1]=s+u*h),f<1&&(e[0]=a+f*d,e[1]=s+f*h),!0}}}}}var Gg=1e9,Ub=-Gg;function bj(t,e,n,r){function i(l,u){return t<=l&&l<=n&&e<=u&&u<=r}function o(l,u,f,d){var h=0,p=0;if(l==null||(h=a(l,f))!==(p=a(u,f))||c(l,u)<0^f>0)do d.point(h===0||h===3?t:n,h>1?r:e);while((h=(h+f+4)%4)!==p);else d.point(u[0],u[1])}function a(l,u){return Un(l[0]-t)<Ue?u>0?0:3:Un(l[0]-n)<Ue?u>0?2:1:Un(l[1]-e)<Ue?u>0?1:0:u>0?3:2}function s(l,u){return c(l.x,u.x)}function c(l,u){var f=a(l,1),d=a(u,1);return f!==d?f-d:f===0?u[1]-l[1]:f===1?l[0]-u[0]:f===2?l[1]-u[1]:u[0]-l[0]}return function(l){var u=l,f=dj(),d,h,p,v,y,m,b,O,E,w,_,S={point:M,lineStart:N,lineEnd:k,polygonStart:A,polygonEnd:C};function M(I,D){i(I,D)&&u.point(I,D)}function T(){for(var I=0,D=0,B=h.length;D<B;++D)for(var F=h[D],G=1,X=F.length,q=F[0],J,et,dt=q[0],_t=q[1];G<X;++G)J=dt,et=_t,q=F[G],dt=q[0],_t=q[1],et<=r?_t>r&&(dt-J)*(r-et)>(_t-et)*(t-J)&&++I:_t<=r&&(dt-J)*(r-et)<(_t-et)*(t-J)&&--I;return I}function A(){u=f,d=[],h=[],_=!0}function C(){var I=T(),D=_&&I,B=(d=vj(d)).length;(D||B)&&(l.polygonStart(),D&&(l.lineStart(),o(null,null,1,l),l.lineEnd()),B&&hj(d,s,I,o,l),l.polygonEnd()),u=l,d=h=p=null}function N(){S.point=R,h&&h.push(p=[]),w=!0,E=!1,b=O=NaN}function k(){d&&(R(v,y),m&&E&&f.rejoin(),d.push(f.result())),S.point=M,E&&u.lineEnd()}function R(I,D){var B=i(I,D);if(h&&p.push([I,D]),w)v=I,y=D,m=B,w=!1,B&&(u.lineStart(),u.point(I,D));else if(B&&E)u.point(I,D);else{var F=[b=Math.max(Ub,Math.min(Gg,b)),O=Math.max(Ub,Math.min(Gg,O))],G=[I=Math.max(Ub,Math.min(Gg,I)),D=Math.max(Ub,Math.min(Gg,D))];aut(F,G,t,e,n,r)?(E||(u.lineStart(),u.point(F[0],F[1])),u.point(G[0],G[1]),B||u.lineEnd(),_=!1):B&&(u.lineStart(),u.point(I,D),_=!1)}b=I,O=D,E=B}return S}}function sT(t,e){function n(r,i){return r=t(r,i),e(r[0],r[1])}return t.invert&&e.invert&&(n.invert=function(r,i){return r=e.invert(r,i),r&&t.invert(r[0],r[1])}),n}function cT(t,e){return Un(t)>wn&&(t-=Math.round(t/fs)*fs),[t,e]}cT.invert=cT;function _j(t,e,n){return(t%=fs)?e||n?sT(Oj(t),Ej(e,n)):Oj(t):e||n?Ej(e,n):cT}function wj(t){return function(e,n){return e+=t,Un(e)>wn&&(e-=Math.round(e/fs)*fs),[e,n]}}function Oj(t){var e=wj(t);return e.invert=wj(-t),e}function Ej(t,e){var n=bn(t),r=tn(t),i=bn(e),o=tn(e);function a(s,c){var l=bn(c),u=bn(s)*l,f=tn(s)*l,d=tn(c),h=d*n+u*r;return[Kl(f*i-h*o,u*n-d*r),js(h*i+f*o)]}return a.invert=function(s,c){var l=bn(c),u=bn(s)*l,f=tn(s)*l,d=tn(c),h=d*i-f*o;return[Kl(f*i+d*o,u*n+h*r),js(h*n-u*r)]},a}function sut(t){t=_j(t[0]*ui,t[1]*ui,t.length>2?t[2]*ui:0);function e(n){return n=t(n[0]*ui,n[1]*ui),n[0]*=Jo,n[1]*=Jo,n}return e.invert=function(n){return n=t.invert(n[0]*ui,n[1]*ui),n[0]*=Jo,n[1]*=Jo,n},e}function iyt(t){return{stream:zg(t)}}function zg(t){return function(e){var n=new lT;for(var r in t)n[r]=t[r];return n.stream=e,n}}function lT(){}lT.prototype={constructor:lT,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function uT(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),r!=null&&t.clipExtent(null),Mp(n,t.stream(Ib)),e(Ib.result()),r!=null&&t.clipExtent(r),t}function Vb(t,e,n){return uT(t,function(r){var i=e[1][0]-e[0][0],o=e[1][1]-e[0][1],a=Math.min(i/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),s=+e[0][0]+(i-a*(r[1][0]+r[0][0]))/2,c=+e[0][1]+(o-a*(r[1][1]+r[0][1]))/2;t.scale(150*a).translate([s,c])},n)}function fT(t,e,n){return Vb(t,[[0,0],e],n)}function dT(t,e,n){return uT(t,function(r){var i=+e,o=i/(r[1][0]-r[0][0]),a=(i-o*(r[1][0]+r[0][0]))/2,s=-o*r[0][1];t.scale(150*o).translate([a,s])},n)}function hT(t,e,n){return uT(t,function(r){var i=+e,o=i/(r[1][1]-r[0][1]),a=-o*r[0][0],s=(i-o*(r[1][1]+r[0][1]))/2;t.scale(150*o).translate([a,s])},n)}var Sj=16,cut=bn(30*ui);function Mj(t,e){return+e?uut(t,e):lut(t)}function lut(t){return zg({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function uut(t,e){function n(r,i,o,a,s,c,l,u,f,d,h,p,v,y){var m=l-r,b=u-i,O=m*m+b*b;if(O>4*e&&v--){var E=a+d,w=s+h,_=c+p,S=za(E*E+w*w+_*_),M=js(_/=S),T=Un(Un(_)-1)<Ue||Un(o-f)<Ue?(o+f)/2:Kl(w,E),A=t(T,M),C=A[0],N=A[1],k=C-r,R=N-i,I=b*k-m*R;(I*I/O>e||Un((m*k+b*R)/O-.5)>.3||a*d+s*h+c*p<cut)&&(n(r,i,o,a,s,c,C,N,T,E/=S,w/=S,_,v,y),y.point(C,N),n(C,N,T,E,w,_,l,u,f,d,h,p,v,y))}}return function(r){var i,o,a,s,c,l,u,f,d,h,p,v,y={point:m,lineStart:b,lineEnd:E,polygonStart:function(){r.polygonStart(),y.lineStart=w},polygonEnd:function(){r.polygonEnd(),y.lineStart=b}};function m(M,T){M=t(M,T),r.point(M[0],M[1])}function b(){f=NaN,y.point=O,r.lineStart()}function O(M,T){var A=kp([M,T]),C=t(M,T);n(f,d,u,h,p,v,f=C[0],d=C[1],u=M,h=A[0],p=A[1],v=A[2],Sj,r),r.point(f,d)}function E(){y.point=m,r.lineEnd()}function w(){b(),y.point=_,y.lineEnd=S}function _(M,T){O(i=M,T),o=f,a=d,s=h,c=p,l=v,y.point=O}function S(){n(f,d,u,h,p,v,o,a,i,s,c,l,Sj,r),y.lineEnd=E,E()}return y}}var fut=zg({point:function(t,e){this.stream.point(t*ui,e*ui)}});function dut(t){return zg({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}function hut(t,e,n,r,i){function o(a,s){return a*=r,s*=i,[e+t*a,n-t*s]}return o.invert=function(a,s){return[(a-e)/t*r,(n-s)/t*i]},o}function Pj(t,e,n,r,i,o){if(!o)return hut(t,e,n,r,i);var a=bn(o),s=tn(o),c=a*t,l=s*t,u=a/t,f=s/t,d=(s*n-a*e)/t,h=(s*e+a*n)/t;function p(v,y){return v*=r,y*=i,[c*v-l*y+e,n-l*v-c*y]}return p.invert=function(v,y){return[r*(u*v-f*y+d),i*(h-f*v-u*y)]},p}function sl(t){return pT(function(){return t})()}function pT(t){var e,n=150,r=480,i=250,o=0,a=0,s=0,c=0,l=0,u,f=0,d=1,h=1,p=null,v=yj,y=null,m,b,O,E=Lg,w=.5,_,S,M,T,A;function C(I){return M(I[0]*ui,I[1]*ui)}function N(I){return I=M.invert(I[0],I[1]),I&&[I[0]*Jo,I[1]*Jo]}C.stream=function(I){return T&&A===I?T:T=fut(dut(u)(v(_(E(A=I)))))},C.preclip=function(I){return arguments.length?(v=I,p=void 0,R()):v},C.postclip=function(I){return arguments.length?(E=I,y=m=b=O=null,R()):E},C.clipAngle=function(I){return arguments.length?(v=+I?out(p=I*ui):(p=null,yj),R()):p*Jo},C.clipExtent=function(I){return arguments.length?(E=I==null?(y=m=b=O=null,Lg):bj(y=+I[0][0],m=+I[0][1],b=+I[1][0],O=+I[1][1]),R()):y==null?null:[[y,m],[b,O]]},C.scale=function(I){return arguments.length?(n=+I,k()):n},C.translate=function(I){return arguments.length?(r=+I[0],i=+I[1],k()):[r,i]},C.center=function(I){return arguments.length?(o=I[0]%360*ui,a=I[1]%360*ui,k()):[o*Jo,a*Jo]},C.rotate=function(I){return arguments.length?(s=I[0]%360*ui,c=I[1]%360*ui,l=I.length>2?I[2]%360*ui:0,k()):[s*Jo,c*Jo,l*Jo]},C.angle=function(I){return arguments.length?(f=I%360*ui,k()):f*Jo},C.reflectX=function(I){return arguments.length?(d=I?-1:1,k()):d<0},C.reflectY=function(I){return arguments.length?(h=I?-1:1,k()):h<0},C.precision=function(I){return arguments.length?(_=Mj(S,w=I*I),R()):za(w)},C.fitExtent=function(I,D){return Vb(C,I,D)},C.fitSize=function(I,D){return fT(C,I,D)},C.fitWidth=function(I,D){return dT(C,I,D)},C.fitHeight=function(I,D){return hT(C,I,D)};function k(){var I=Pj(n,0,0,d,h,f).apply(null,e(o,a)),D=Pj(n,r-I[0],i-I[1],d,h,f);return u=_j(s,c,l),S=sT(e,D),M=sT(u,S),_=Mj(S,w),R()}function R(){return T=A=null,C}return function(){return e=t.apply(this,arguments),C.invert=e.invert&&N,k()}}function vT(t){var e=0,n=wn/3,r=pT(t),i=r(e,n);return i.parallels=function(o){return arguments.length?r(e=o[0]*ui,n=o[1]*ui):[e*Jo,n*Jo]},i}function put(t){var e=bn(t);function n(r,i){return[r*e,tn(i)/e]}return n.invert=function(r,i){return[r/e,js(i*e)]},n}function Tj(t,e){var n=tn(t),r=(n+tn(e))/2;if(Un(r)<Ue)return put(t);var i=1+n*(2*r-n),o=za(i)/r;function a(s,c){var l=za(i-2*r*tn(c))/r;return[l*tn(s*=r),o-l*bn(s)]}return a.invert=function(s,c){var l=o-c,u=Kl(s,Un(l))*Fs(l);return l*r<0&&(u-=wn*Fs(s)*Fs(l)),[u/r,js((i-(s*s+l*l)*r*r)/(2*r))]},a}function Xb(){return vT(Tj).scale(155.424).center([0,33.6442])}function Aj(){return Xb().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function vut(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function gut(){var t,e,n=Aj(),r,i=Xb().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,a=Xb().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s,c,l={point:function(d,h){c=[d,h]}};function u(d){var h=d[0],p=d[1];return c=null,r.point(h,p),c||(o.point(h,p),c)||(s.point(h,p),c)}u.invert=function(d){var h=n.scale(),p=n.translate(),v=(d[0]-p[0])/h,y=(d[1]-p[1])/h;return(y>=.12&&y<.234&&v>=-.425&&v<-.214?i:y>=.166&&y<.234&&v>=-.214&&v<-.115?a:n).invert(d)},u.stream=function(d){return t&&e===d?t:t=vut([n.stream(e=d),i.stream(d),a.stream(d)])},u.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),a.precision(d),f()):n.precision()},u.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),a.scale(d),u.translate(n.translate())):n.scale()},u.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],v=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,v-.238*h],[p+.455*h,v+.238*h]]).stream(l),o=i.translate([p-.307*h,v+.201*h]).clipExtent([[p-.425*h+Ue,v+.12*h+Ue],[p-.214*h-Ue,v+.234*h-Ue]]).stream(l),s=a.translate([p-.205*h,v+.212*h]).clipExtent([[p-.214*h+Ue,v+.166*h+Ue],[p-.115*h-Ue,v+.234*h-Ue]]).stream(l),f()},u.fitExtent=function(d,h){return Vb(u,d,h)},u.fitSize=function(d,h){return fT(u,d,h)},u.fitWidth=function(d,h){return dT(u,d,h)},u.fitHeight=function(d,h){return hT(u,d,h)};function f(){return t=e=null,u}return u.scale(1070)}function Cj(t){return function(e,n){var r=bn(e),i=bn(n),o=t(r*i);return o===1/0?[2,0]:[o*i*tn(e),o*tn(n)]}}function Wg(t){return function(e,n){var r=za(e*e+n*n),i=t(r),o=tn(i),a=bn(i);return[Kl(e*o,r*a),js(r&&n*o/r)]}}var gT=Cj(function(t){return za(2/(1+t))});gT.invert=Wg(function(t){return 2*js(t/2)});function yut(){return sl(gT).scale(124.75).clipAngle(180-.001)}var yT=Cj(function(t){return(t=W8(t))&&t/tn(t)});yT.invert=Wg(function(t){return t});function mut(){return sl(yT).scale(79.4188).clipAngle(180-.001)}function Yg(t,e){return[t,Nb(VP((yi+e)/2))]}Yg.invert=function(t,e){return[t,2*Pp(z8(e))-yi]};function xut(){return kj(Yg).scale(961/fs)}function kj(t){var e=sl(t),n=e.center,r=e.scale,i=e.translate,o=e.clipExtent,a=null,s,c,l;e.scale=function(f){return arguments.length?(r(f),u()):r()},e.translate=function(f){return arguments.length?(i(f),u()):i()},e.center=function(f){return arguments.length?(n(f),u()):n()},e.clipExtent=function(f){return arguments.length?(f==null?a=s=c=l=null:(a=+f[0][0],s=+f[0][1],c=+f[1][0],l=+f[1][1]),u()):a==null?null:[[a,s],[c,l]]};function u(){var f=wn*r(),d=e(sut(e.rotate()).invert([0,0]));return o(a==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:t===Yg?[[Math.max(d[0]-f,a),s],[Math.min(d[0]+f,c),l]]:[[a,Math.max(d[1]-f,s)],[c,Math.min(d[1]+f,l)]])}return u()}function $b(t){return VP((yi+t)/2)}function Nj(t,e){var n=bn(t),r=t===e?tn(t):Nb(n/bn(e))/Nb($b(e)/$b(t)),i=n*UP($b(t),r)/r;if(!r)return Yg;function o(a,s){i>0?s<-yi+Ue&&(s=-yi+Ue):s>yi-Ue&&(s=yi-Ue);var c=i/UP($b(s),r);return[c*tn(r*a),i-c*bn(r*a)]}return o.invert=function(a,s){var c=i-s,l=Fs(r)*za(a*a+c*c),u=Kl(a,Un(c))*Fs(c);return c*r<0&&(u-=wn*Fs(a)*Fs(c)),[u/r,2*Pp(UP(i/l,1/r))-yi]},o}function but(){return vT(Nj).scale(109.5).parallels([30,30])}function Hg(t,e){return[t,e]}Hg.invert=Hg;function _ut(){return sl(Hg).scale(152.63)}function Rj(t,e){var n=bn(t),r=t===e?tn(t):(n-bn(e))/(e-t),i=n/r+t;if(Un(r)<Ue)return Hg;function o(a,s){var c=i-s,l=r*a;return[c*tn(l),i-c*bn(l)]}return o.invert=function(a,s){var c=i-s,l=Kl(a,Un(c))*Fs(c);return c*r<0&&(l-=wn*Fs(a)*Fs(c)),[l/r,i-Fs(r)*za(a*a+c*c)]},o}function wut(){return vT(Rj).scale(131.154).center([0,13.9389])}var Ug=1.340264,Vg=-.081106,Xg=893e-6,$g=.003796,qb=za(3)/2,Out=12;function mT(t,e){var n=js(qb*tn(e)),r=n*n,i=r*r*r;return[t*bn(n)/(qb*(Ug+3*Vg*r+i*(7*Xg+9*$g*r))),n*(Ug+Vg*r+i*(Xg+$g*r))]}mT.invert=function(t,e){for(var n=e,r=n*n,i=r*r*r,o=0,a,s,c;o<Out&&(s=n*(Ug+Vg*r+i*(Xg+$g*r))-e,c=Ug+3*Vg*r+i*(7*Xg+9*$g*r),n-=a=s/c,r=n*n,i=r*r*r,!(Un(a)<j8));++o);return[qb*t*(Ug+3*Vg*r+i*(7*Xg+9*$g*r))/bn(n),js(tn(n)/qb)]};function Eut(){return sl(mT).scale(177.158)}function xT(t,e){var n=bn(e),r=bn(t)*n;return[n*tn(t)/r,tn(e)/r]}xT.invert=Wg(Pp);function Sut(){return sl(xT).scale(144.049).clipAngle(60)}function Mut(){var t=1,e=0,n=0,r=1,i=1,o=0,a,s,c=null,l,u,f,d=1,h=1,p=zg({point:function(E,w){var _=O([E,w]);this.stream.point(_[0],_[1])}}),v=Lg,y,m;function b(){return d=t*r,h=t*i,y=m=null,O}function O(E){var w=E[0]*d,_=E[1]*h;if(o){var S=_*a-w*s;w=w*a+_*s,_=S}return[w+e,_+n]}return O.invert=function(E){var w=E[0]-e,_=E[1]-n;if(o){var S=_*a+w*s;w=w*a-_*s,_=S}return[w/d,_/h]},O.stream=function(E){return y&&m===E?y:y=p(v(m=E))},O.postclip=function(E){return arguments.length?(v=E,c=l=u=f=null,b()):v},O.clipExtent=function(E){return arguments.length?(v=E==null?(c=l=u=f=null,Lg):bj(c=+E[0][0],l=+E[0][1],u=+E[1][0],f=+E[1][1]),b()):c==null?null:[[c,l],[u,f]]},O.scale=function(E){return arguments.length?(t=+E,b()):t},O.translate=function(E){return arguments.length?(e=+E[0],n=+E[1],b()):[e,n]},O.angle=function(E){return arguments.length?(o=E%360*ui,s=tn(o),a=bn(o),b()):o*Jo},O.reflectX=function(E){return arguments.length?(r=E?-1:1,b()):r<0},O.reflectY=function(E){return arguments.length?(i=E?-1:1,b()):i<0},O.fitExtent=function(E,w){return Vb(O,E,w)},O.fitSize=function(E,w){return fT(O,E,w)},O.fitWidth=function(E,w){return dT(O,E,w)},O.fitHeight=function(E,w){return hT(O,E,w)},O}function bT(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),e*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}bT.invert=function(t,e){var n=e,r=25,i;do{var o=n*n,a=o*o;n-=i=(n*(1.007226+o*(.015085+a*(-.044475+.028874*o-.005916*a)))-e)/(1.007226+o*(.015085*3+a*(-.044475*7+.028874*9*o-.005916*11*a)))}while(Un(i)>Ue&&--r>0);return[t/(.8707+(o=n*n)*(-.131979+o*(-.013791+o*o*o*(.003971-.001529*o)))),n]};function Put(){return sl(bT).scale(175.295)}function _T(t,e){return[bn(e)*tn(t),tn(e)]}_T.invert=Wg(js);function Tut(){return sl(_T).scale(249.5).clipAngle(90+Ue)}function wT(t,e){var n=bn(e),r=1+bn(t)*n;return[n*tn(t)/r,tn(e)/r]}wT.invert=Wg(function(t){return 2*Pp(t)});function Aut(){return sl(wT).scale(250).clipAngle(142)}function OT(t,e){return[Nb(VP((yi+e)/2)),-t]}OT.invert=function(t,e){return[-e,2*Pp(z8(t))-yi]};function Cut(){var t=kj(OT),e=t.center,n=t.rotate;return t.center=function(r){return arguments.length?e([-r[1],r[0]]):(r=e(),[r[1],-r[0]])},t.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}var kut=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Nut(t){if(typeof t=="function")return t;const e=`geo${Fu(t)}`,n=nn[e];if(!n)throw new Error(`Unknown coordinate: ${t}`);return n}function Rut(t){return{type:"FeatureCollection",features:t.flatMap(e=>Lut(e).features)}}function Lut(t){const e={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featureCollection"};if(!t||!t.type)return null;const n=e[t.type];if(!n)return null;if(n==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:t}]};if(n==="feature")return{type:"FeatureCollection",features:[t]};if(n==="featureCollection")return t}function Iut(t,e){var n;for(const[r,i]of Object.entries(e))(n=t[r])===null||n===void 0||n.call(t,i)}function Dut(t,e,n,r){const i=()=>{const s=e.filter(Lj);return s.find(l=>l.sphere)?{type:"Sphere"}:Rut(s.filter(l=>!l.sphere).flatMap(l=>l.data.value))},{outline:o=i()}=r,{size:a="fitExtent"}=r;if(a==="fitExtent")return But(t,o,n);if(a==="fitWidth")return Fut(t,o,n)}function But(t,e,n){const{x:r,y:i,width:o,height:a}=n;t.fitExtent([[r,i],[o,a]],e)}function Fut(t,e,n){const{width:r,height:i}=n,[[o,a],[s,c]]=lj(t.fitWidth(r,e)).bounds(e),l=Math.ceil(c-a),u=Math.min(Math.ceil(s-o),l),f=t.scale()*(u-1)/u,[d,h]=t.translate(),p=h+(i-l)/2;t.scale(f).translate([d,p]).precision(.2)}function jut(t){const{data:e}=t;if(Array.isArray(e))return Object.assign(Object.assign({},t),{data:{value:e}});const{type:n}=e;return n==="graticule10"?Object.assign(Object.assign({},t),{data:{value:[Zlt()]}}):n==="sphere"?Object.assign(Object.assign({},t),{sphere:!0,data:{value:[{type:"Sphere"}]}}):t}function Lj(t){return t.type==="geoPath"}const Ij=()=>t=>{const{children:e,coordinate:n={}}=t;if(!Array.isArray(e))return[];const{type:r="equalEarth"}=n,i=kut(n,["type"]),o=Nut(r),a=e.map(jut);let s;function c(){return[["custom",(f,d,h,p)=>{const v=o();Dut(v,a,{x:f,y:d,width:h,height:p},i),Iut(v,i),s=lj(v);const m=new $o({domain:[f,f+h]}),b=new $o({domain:[d,d+p]}),O=w=>{const _=v(w);if(!_)return[null,null];const[S,M]=_;return[m.map(S),b.map(M)]},E=w=>{if(!w)return null;const[_,S]=w,M=[m.invert(_),b.invert(S)];return v.invert(M)};return{transform:w=>O(w),untransform:w=>E(w)}}]]}function l(f){const{style:d,tooltip:h={}}=f;return Object.assign(Object.assign({},f),{type:"path",tooltip:Hx(h,{title:"id",items:[{channel:"color"}]}),style:Object.assign(Object.assign({},d),{d:p=>s(p)||[]})})}const u=f=>Lj(f)?l(f):f;return[Object.assign(Object.assign({},t),{type:"view",scale:{x:{type:"identity"},y:{type:"identity"}},axis:!1,coordinate:{type:c},children:a.flatMap(u)})]};Ij.props={};var Gut=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const Dj=()=>t=>{const{type:e,data:n,scale:r,encode:i,style:o,animate:a,key:s,state:c}=t,l=Gut(t,["type","data","scale","encode","style","animate","key","state"]);return[Object.assign(Object.assign({type:"geoView"},l),{children:[{type:"geoPath",key:`${s}-0`,data:{value:n},scale:r,encode:i,style:o,animate:a,state:c}]})]};Dj.props={};function zut(){return{"composition.geoView":Ij,"composition.geoPath":Dj}}function Wut(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return Bj(this.cover(e,n),e,n,t)}function Bj(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o=t._root,a={data:r},s=t._x0,c=t._y0,l=t._x1,u=t._y1,f,d,h,p,v,y,m,b;if(!o)return t._root=a,t;for(;o.length;)if((v=e>=(f=(s+l)/2))?s=f:l=f,(y=n>=(d=(c+u)/2))?c=d:u=d,i=o,!(o=o[m=y<<1|v]))return i[m]=a,t;if(h=+t._x.call(null,o.data),p=+t._y.call(null,o.data),e===h&&n===p)return a.next=o,i?i[m]=a:t._root=a,t;do i=i?i[m]=new Array(4):t._root=new Array(4),(v=e>=(f=(s+l)/2))?s=f:l=f,(y=n>=(d=(c+u)/2))?c=d:u=d;while((m=y<<1|v)===(b=(p>=d)<<1|h>=f));return i[b]=o,i[m]=a,t}function Yut(t){var e,n,r=t.length,i,o,a=new Array(r),s=new Array(r),c=1/0,l=1/0,u=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(o=+this._y.call(null,e))||(a[n]=i,s[n]=o,i<c&&(c=i),i>u&&(u=i),o<l&&(l=o),o>f&&(f=o));if(c>u||l>f)return this;for(this.cover(c,l).cover(u,f),n=0;n<r;++n)Bj(this,a[n],s[n],t[n]);return this}function Hut(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{for(var a=i-n||1,s=this._root,c,l;n>t||t>=i||r>e||e>=o;)switch(l=(e<r)<<1|t<n,c=new Array(4),c[l]=s,s=c,a*=2,l){case 0:i=n+a,o=r+a;break;case 1:n=i-a,o=r+a;break;case 2:i=n+a,r=o-a;break;case 3:n=i-a,r=o-a;break}this._root&&this._root.length&&(this._root=s)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function Uut(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function Vut(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function ha(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function Xut(t,e,n){var r,i=this._x0,o=this._y0,a,s,c,l,u=this._x1,f=this._y1,d=[],h=this._root,p,v;for(h&&d.push(new ha(h,i,o,u,f)),n==null?n=1/0:(i=t-n,o=e-n,u=t+n,f=e+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(a=p.x0)>u||(s=p.y0)>f||(c=p.x1)<i||(l=p.y1)<o))if(h.length){var y=(a+c)/2,m=(s+l)/2;d.push(new ha(h[3],y,m,c,l),new ha(h[2],a,m,y,l),new ha(h[1],y,s,c,m),new ha(h[0],a,s,y,m)),(v=(e>=m)<<1|t>=y)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-v],d[d.length-1-v]=p)}else{var b=t-+this._x.call(null,h.data),O=e-+this._y.call(null,h.data),E=b*b+O*O;if(E<n){var w=Math.sqrt(n=E);i=t-w,o=e-w,u=t+w,f=e+w,r=h.data}}return r}function $ut(t){if(isNaN(u=+this._x.call(null,t))||isNaN(f=+this._y.call(null,t)))return this;var e,n=this._root,r,i,o,a=this._x0,s=this._y0,c=this._x1,l=this._y1,u,f,d,h,p,v,y,m;if(!n)return this;if(n.length)for(;;){if((p=u>=(d=(a+c)/2))?a=d:c=d,(v=f>=(h=(s+l)/2))?s=h:l=h,e=n,!(n=n[y=v<<1|p]))return this;if(!n.length)break;(e[y+1&3]||e[y+2&3]||e[y+3&3])&&(r=e,m=y)}for(;n.data!==t;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):e?(o?e[y]=o:delete e[y],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(r?r[m]=n:this._root=n),this):(this._root=o,this)}function qut(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function Kut(){return this._root}function Zut(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function Jut(t){var e=[],n,r=this._root,i,o,a,s,c;for(r&&e.push(new ha(r,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(r=n.node,o=n.x0,a=n.y0,s=n.x1,c=n.y1)&&r.length){var l=(o+s)/2,u=(a+c)/2;(i=r[3])&&e.push(new ha(i,l,u,s,c)),(i=r[2])&&e.push(new ha(i,o,u,l,c)),(i=r[1])&&e.push(new ha(i,l,a,s,u)),(i=r[0])&&e.push(new ha(i,o,a,l,u))}return this}function Qut(t){var e=[],n=[],r;for(this._root&&e.push(new ha(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var i=r.node;if(i.length){var o,a=r.x0,s=r.y0,c=r.x1,l=r.y1,u=(a+c)/2,f=(s+l)/2;(o=i[0])&&e.push(new ha(o,a,s,u,f)),(o=i[1])&&e.push(new ha(o,u,s,c,f)),(o=i[2])&&e.push(new ha(o,a,f,u,l)),(o=i[3])&&e.push(new ha(o,u,f,c,l))}n.push(r)}for(;r=n.pop();)t(r.node,r.x0,r.y0,r.x1,r.y1);return this}function tft(t){return t[0]}function eft(t){return arguments.length?(this._x=t,this):this._x}function nft(t){return t[1]}function rft(t){return arguments.length?(this._y=t,this):this._y}function Fj(t,e,n){var r=new ET(e==null?tft:e,n==null?nft:n,NaN,NaN,NaN,NaN);return t==null?r:r.addAll(t)}function ET(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function jj(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var pa=Fj.prototype=ET.prototype;pa.copy=function(){var t=new ET(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,r;if(!e)return t;if(!e.length)return t._root=jj(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var i=0;i<4;++i)(r=e.source[i])&&(r.length?n.push({source:r,target:e.target[i]=new Array(4)}):e.target[i]=jj(r));return t},pa.add=Wut,pa.addAll=Yut,pa.cover=Hut,pa.data=Uut,pa.extent=Vut,pa.find=Xut,pa.remove=$ut,pa.removeAll=qut,pa.root=Kut,pa.size=Zut,pa.visit=Jut,pa.visitAfter=Qut,pa.x=eft,pa.y=rft;function ds(t){return function(){return t}}function Np(t){return(t()-.5)*1e-6}var ift={value:function(){}};function Gj(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Kb(n)}function Kb(t){this._=t}function oft(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Kb.prototype=Gj.prototype={constructor:Kb,on:function(e,n){var r=this._,i=oft(e+"",r),o,a=-1,s=i.length;if(arguments.length<2){for(;++a<s;)if((o=(e=i[a]).type)&&(o=aft(r[o],e.name)))return o;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++a<s;)if(o=(e=i[a]).type)r[o]=zj(r[o],e.name,n);else if(n==null)for(o in r)r[o]=zj(r[o],e.name,null);return this},copy:function(){var e={},n=this._;for(var r in n)e[r]=n[r].slice();return new Kb(e)},call:function(e,n){if((o=arguments.length-2)>0)for(var r=new Array(o),i=0,o,a;i<o;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],i=0,o=a.length;i<o;++i)a[i].value.apply(n,r)},apply:function(e,n,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],o=0,a=i.length;o<a;++o)i[o].value.apply(n,r)}};function aft(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function zj(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=ift,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var sft=Gj,Rp=0,qg=0,Kg=0,Wj=1e3,Zb,Zg,Jb=0,_d=0,Qb=0,Jg=typeof performance=="object"&&performance.now?performance:Date,Yj=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Hj(){return _d||(Yj(cft),_d=Jg.now()+Qb)}function cft(){_d=0}function ST(){this._call=this._time=this._next=null}ST.prototype=Uj.prototype={constructor:ST,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Hj():+n)+(e==null?0:+e),!this._next&&Zg!==this&&(Zg?Zg._next=this:Zb=this,Zg=this),this._call=t,this._time=n,MT()},stop:function(){this._call&&(this._call=null,this._time=1/0,MT())}};function Uj(t,e,n){var r=new ST;return r.restart(t,e,n),r}function lft(){Hj(),++Rp;for(var t=Zb,e;t;)(e=_d-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Rp}function Vj(){_d=(Jb=Jg.now())+Qb,Rp=qg=0;try{lft()}finally{Rp=0,fft(),_d=0}}function uft(){var t=Jg.now(),e=t-Jb;e>Wj&&(Qb-=e,Jb=t)}function fft(){for(var t,e=Zb,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Zb=n);Zg=t,MT(r)}function MT(t){if(!Rp){qg&&(qg=clearTimeout(qg));var e=t-_d;e>24?(t<1/0&&(qg=setTimeout(Vj,t-Jg.now()-Qb)),Kg&&(Kg=clearInterval(Kg))):(Kg||(Jb=Jg.now(),Kg=setInterval(uft,Wj)),Rp=1,Yj(Vj))}}const dft=1664525,hft=1013904223,Xj=4294967296;function pft(){let t=1;return()=>(t=(dft*t+hft)%Xj)/Xj}function vft(t){return t.x}function gft(t){return t.y}var yft=10,mft=Math.PI*(3-Math.sqrt(5));function xft(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,s=new Map,c=Uj(f),l=sft("tick","end"),u=pft();t==null&&(t=[]);function f(){d(),l.call("tick",e),n<r&&(c.stop(),l.call("end",e))}function d(v){var y,m=t.length,b;v===void 0&&(v=1);for(var O=0;O<v;++O)for(n+=(o-n)*i,s.forEach(function(E){E(n)}),y=0;y<m;++y)b=t[y],b.fx==null?b.x+=b.vx*=a:(b.x=b.fx,b.vx=0),b.fy==null?b.y+=b.vy*=a:(b.y=b.fy,b.vy=0);return e}function h(){for(var v=0,y=t.length,m;v<y;++v){if(m=t[v],m.index=v,m.fx!=null&&(m.x=m.fx),m.fy!=null&&(m.y=m.fy),isNaN(m.x)||isNaN(m.y)){var b=yft*Math.sqrt(.5+v),O=v*mft;m.x=b*Math.cos(O),m.y=b*Math.sin(O)}(isNaN(m.vx)||isNaN(m.vy))&&(m.vx=m.vy=0)}}function p(v){return v.initialize&&v.initialize(t,u),v}return h(),e={tick:d,restart:function(){return c.restart(f),e},stop:function(){return c.stop(),e},nodes:function(v){return arguments.length?(t=v,h(),s.forEach(p),e):t},alpha:function(v){return arguments.length?(n=+v,e):n},alphaMin:function(v){return arguments.length?(r=+v,e):r},alphaDecay:function(v){return arguments.length?(i=+v,e):+i},alphaTarget:function(v){return arguments.length?(o=+v,e):o},velocityDecay:function(v){return arguments.length?(a=1-v,e):1-a},randomSource:function(v){return arguments.length?(u=v,s.forEach(p),e):u},force:function(v,y){return arguments.length>1?(y==null?s.delete(v):s.set(v,p(y)),e):s.get(v)},find:function(v,y,m){var b=0,O=t.length,E,w,_,S,M;for(m==null?m=1/0:m*=m,b=0;b<O;++b)S=t[b],E=v-S.x,w=y-S.y,_=E*E+w*w,_<m&&(M=S,m=_);return M},on:function(v,y){return arguments.length>1?(l.on(v,y),e):l.on(v)}}}function bft(){var t,e,n,r,i=ds(-30),o,a=1,s=1/0,c=.81;function l(h){var p,v=t.length,y=Fj(t,vft,gft).visitAfter(f);for(r=h,p=0;p<v;++p)e=t[p],y.visit(d)}function u(){if(t){var h,p=t.length,v;for(o=new Array(p),h=0;h<p;++h)v=t[h],o[v.index]=+i(v,h,t)}}function f(h){var p=0,v,y,m=0,b,O,E;if(h.length){for(b=O=E=0;E<4;++E)(v=h[E])&&(y=Math.abs(v.value))&&(p+=v.value,m+=y,b+=y*v.x,O+=y*v.y);h.x=b/m,h.y=O/m}else{v=h,v.x=v.data.x,v.y=v.data.y;do p+=o[v.data.index];while(v=v.next)}h.value=p}function d(h,p,v,y){if(!h.value)return!0;var m=h.x-e.x,b=h.y-e.y,O=y-p,E=m*m+b*b;if(O*O/c<E)return E<s&&(m===0&&(m=Np(n),E+=m*m),b===0&&(b=Np(n),E+=b*b),E<a&&(E=Math.sqrt(a*E)),e.vx+=m*h.value*r/E,e.vy+=b*h.value*r/E),!0;if(h.length||E>=s)return;(h.data!==e||h.next)&&(m===0&&(m=Np(n),E+=m*m),b===0&&(b=Np(n),E+=b*b),E<a&&(E=Math.sqrt(a*E)));do h.data!==e&&(O=o[h.data.index]*r/E,e.vx+=m*O,e.vy+=b*O);while(h=h.next)}return l.initialize=function(h,p){t=h,n=p,u()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:ds(+h),u(),l):i},l.distanceMin=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l.distanceMax=function(h){return arguments.length?(s=h*h,l):Math.sqrt(s)},l.theta=function(h){return arguments.length?(c=h*h,l):Math.sqrt(c)},l}function _ft(t){return t.index}function $j(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function wft(t){var e=_ft,n=f,r,i=ds(30),o,a,s,c,l,u=1;t==null&&(t=[]);function f(y){return 1/Math.min(s[y.source.index],s[y.target.index])}function d(y){for(var m=0,b=t.length;m<u;++m)for(var O=0,E,w,_,S,M,T,A;O<b;++O)E=t[O],w=E.source,_=E.target,S=_.x+_.vx-w.x-w.vx||Np(l),M=_.y+_.vy-w.y-w.vy||Np(l),T=Math.sqrt(S*S+M*M),T=(T-o[O])/T*y*r[O],S*=T,M*=T,_.vx-=S*(A=c[O]),_.vy-=M*A,w.vx+=S*(A=1-A),w.vy+=M*A}function h(){if(a){var y,m=a.length,b=t.length,O=new Map(a.map((w,_)=>[e(w,_,a),w])),E;for(y=0,s=new Array(m);y<b;++y)E=t[y],E.index=y,typeof E.source!="object"&&(E.source=$j(O,E.source)),typeof E.target!="object"&&(E.target=$j(O,E.target)),s[E.source.index]=(s[E.source.index]||0)+1,s[E.target.index]=(s[E.target.index]||0)+1;for(y=0,c=new Array(b);y<b;++y)E=t[y],c[y]=s[E.source.index]/(s[E.source.index]+s[E.target.index]);r=new Array(b),p(),o=new Array(b),v()}}function p(){if(a)for(var y=0,m=t.length;y<m;++y)r[y]=+n(t[y],y,t)}function v(){if(a)for(var y=0,m=t.length;y<m;++y)o[y]=+i(t[y],y,t)}return d.initialize=function(y,m){a=y,l=m,h()},d.links=function(y){return arguments.length?(t=y,h(),d):t},d.id=function(y){return arguments.length?(e=y,d):e},d.iterations=function(y){return arguments.length?(u=+y,d):u},d.strength=function(y){return arguments.length?(n=typeof y=="function"?y:ds(+y),p(),d):n},d.distance=function(y){return arguments.length?(i=typeof y=="function"?y:ds(+y),v(),d):i},d}function Oft(t,e){var n,r=1;t==null&&(t=0),e==null&&(e=0);function i(){var o,a=n.length,s,c=0,l=0;for(o=0;o<a;++o)s=n[o],c+=s.x,l+=s.y;for(c=(c/a-t)*r,l=(l/a-e)*r,o=0;o<a;++o)s=n[o],s.x-=c,s.y-=l}return i.initialize=function(o){n=o},i.x=function(o){return arguments.length?(t=+o,i):t},i.y=function(o){return arguments.length?(e=+o,i):e},i.strength=function(o){return arguments.length?(r=+o,i):r},i}function Eft(t){var e=ds(.1),n,r,i;typeof t!="function"&&(t=ds(t==null?0:+t));function o(s){for(var c=0,l=n.length,u;c<l;++c)u=n[c],u.vx+=(i[c]-u.x)*r[c]*s}function a(){if(n){var s,c=n.length;for(r=new Array(c),i=new Array(c),s=0;s<c;++s)r[s]=isNaN(i[s]=+t(n[s],s,n))?0:+e(n[s],s,n)}}return o.initialize=function(s){n=s,a()},o.strength=function(s){return arguments.length?(e=typeof s=="function"?s:ds(+s),a(),o):e},o.x=function(s){return arguments.length?(t=typeof s=="function"?s:ds(+s),a(),o):t},o}function Sft(t){var e=ds(.1),n,r,i;typeof t!="function"&&(t=ds(t==null?0:+t));function o(s){for(var c=0,l=n.length,u;c<l;++c)u=n[c],u.vy+=(i[c]-u.y)*r[c]*s}function a(){if(n){var s,c=n.length;for(r=new Array(c),i=new Array(c),s=0;s<c;++s)r[s]=isNaN(i[s]=+t(n[s],s,n))?0:+e(n[s],s,n)}}return o.initialize=function(s){n=s,a()},o.strength=function(s){return arguments.length?(e=typeof s=="function"?s:ds(+s),a(),o):e},o.y=function(s){return arguments.length?(t=typeof s=="function"?s:ds(+s),a(),o):t},o}var Mft=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const Pft={joint:!0},Tft={type:"link",axis:!1,legend:!1,encode:{x:[t=>t.source.x,t=>t.target.x],y:[t=>t.source.y,t=>t.target.y]},style:{stroke:"#999",strokeOpacity:.6}},Aft={type:"point",axis:!1,legend:!1,encode:{x:"x",y:"y",size:5,color:"group",shape:"point"},style:{stroke:"#fff"}},Cft={text:""};function kft(t,e,n){const{nodes:r,links:i}=t,{joint:o,nodeStrength:a,linkStrength:s}=e,{nodeKey:c=p=>p.id,linkKey:l=p=>p.id}=n,u=bft(),f=wft(i).id(il(l));typeof a=="function"&&u.strength(a),typeof s=="function"&&f.strength(s);const d=xft(r).force("link",f).force("charge",u);o?d.force("center",Oft()):d.force("x",Eft()).force("y",Sft()),d.stop();const h=Math.ceil(Math.log(d.alphaMin())/Math.log(1-d.alphaDecay()));for(let p=0;p<h;p++)d.tick();return{nodesData:r,linksData:i}}const qj=t=>{const{data:e,encode:n={},scale:r,style:i={},layout:o={},nodeLabels:a=[],linkLabels:s=[],animate:c={},tooltip:l={}}=t,{nodeKey:u=_=>_.id,linkKey:f=_=>_.id}=n,d=Mft(n,["nodeKey","linkKey"]),h=Object.assign({nodeKey:u,linkKey:f},d),p=Xt(h,"node"),v=Xt(h,"link"),{links:y,nodes:m}=CM(e,h),{nodesData:b,linksData:O}=kft({links:y,nodes:m},bt({},Pft,o),h),E=el(l,"link",{items:[_=>({name:"source",value:il(f)(_.source)}),_=>({name:"target",value:il(f)(_.target)})]}),w=el(l,"node",{items:[_=>({name:"key",value:il(u)(_)})]},!0);return[bt({},Tft,{data:O,encode:v,labels:s,style:Xt(i,"link"),tooltip:E,animate:nl(c,"link")}),bt({},Aft,{data:b,encode:Object.assign({},p),scale:r,style:Xt(i,"node"),tooltip:w,labels:[Object.assign(Object.assign({},Cft),Xt(i,"label")),...a],animate:nl(c,"link")})]};qj.props={};function Nft(t,e){return t.parent===e.parent?1:2}function PT(t){var e=t.children;return e?e[0]:t.t}function TT(t){var e=t.children;return e?e[e.length-1]:t.t}function Rft(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function Lft(t){for(var e=0,n=0,r=t.children,i=r.length,o;--i>=0;)o=r[i],o.z+=e,o.m+=e,e+=o.s+(n+=o.c)}function Ift(t,e,n){return t.a.parent===e.parent?t.a:n}function t_(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}t_.prototype=Object.create(mp.prototype);function Dft(t){for(var e=new t_(t,0),n,r=[e],i,o,a,s;n=r.pop();)if(o=n._.children)for(n.children=new Array(s=o.length),a=s-1;a>=0;--a)r.push(i=n.children[a]=new t_(o[a],a)),i.parent=n;return(e.parent=new t_(null,0)).children=[e],e}function Bft(){var t=Nft,e=1,n=1,r=null;function i(l){var u=Dft(l);if(u.eachAfter(o),u.parent.m=-u.z,u.eachBefore(a),r)l.eachBefore(c);else{var f=l,d=l,h=l;l.eachBefore(function(b){b.x<f.x&&(f=b),b.x>d.x&&(d=b),b.depth>h.depth&&(h=b)});var p=f===d?1:t(f,d)/2,v=p-f.x,y=e/(d.x+p+v),m=n/(h.depth||1);l.eachBefore(function(b){b.x=(b.x+v)*y,b.y=b.depth*m})}return l}function o(l){var u=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(u){Lft(l);var h=(u[0].z+u[u.length-1].z)/2;d?(l.z=d.z+t(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+t(l._,d._));l.parent.A=s(l,d,l.parent.A||f[0])}function a(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function s(l,u,f){if(u){for(var d=l,h=l,p=u,v=d.parent.children[0],y=d.m,m=h.m,b=p.m,O=v.m,E;p=TT(p),d=PT(d),p&&d;)v=PT(v),h=TT(h),h.a=l,E=p.z+b-d.z-y+t(p._,d._),E>0&&(Rft(Ift(p,l,f),l,E),y+=E,m+=E),b+=p.m,y+=d.m,O+=v.m,m+=h.m;p&&!TT(h)&&(h.t=p,h.m+=b-m),d&&!PT(v)&&(v.t=d,v.m+=y-O,f=l)}return f}function c(l){l.x*=e,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(t=l,i):t},i.size=function(l){return arguments.length?(r=!1,e=+l[0],n=+l[1],i):r?null:[e,n]},i.nodeSize=function(l){return arguments.length?(r=!0,e=+l[0],n=+l[1],i):r?[e,n]:null},i}function Fft(t,e){return t.parent===e.parent?1:2}function jft(t){return t.reduce(Gft,0)/t.length}function Gft(t,e){return t+e.x}function zft(t){return 1+t.reduce(Wft,0)}function Wft(t,e){return Math.max(t,e.y)}function Yft(t){for(var e;e=t.children;)t=e[0];return t}function Hft(t){for(var e;e=t.children;)t=e[e.length-1];return t}function Uft(){var t=Fft,e=1,n=1,r=!1;function i(o){var a,s=0;o.eachAfter(function(d){var h=d.children;h?(d.x=jft(h),d.y=zft(h)):(d.x=a?s+=t(d,a):0,d.y=0,a=d)});var c=Yft(o),l=Hft(o),u=c.x-t(c,l)/2,f=l.x+t(l,c)/2;return o.eachAfter(r?function(d){d.x=(d.x-o.x)*e,d.y=(o.y-d.y)*n}:function(d){d.x=(d.x-u)/(f-u)*e,d.y=(1-(o.y?d.y/o.y:1))*n})}return i.separation=function(o){return arguments.length?(t=o,i):t},i.size=function(o){return arguments.length?(r=!1,e=+o[0],n=+o[1],i):r?null:[e,n]},i.nodeSize=function(o){return arguments.length?(r=!0,e=+o[0],n=+o[1],i):r?[e,n]:null},i}const Kj=t=>e=>n=>{const{field:r="value",nodeSize:i,separation:o,sortBy:a,as:s=["x","y"]}=e,[c,l]=s,u=yp(n,p=>p.children).sum(p=>p[r]).sort(a),f=t();f.size([1,1]),i&&f.nodeSize(i),o&&f.separation(o),f(u);const d=[];u.each(p=>{p[c]=p.x,p[l]=p.y,p.name=p.data.name,d.push(p)});const h=u.links();return h.forEach(p=>{p[c]=[p.source[c],p.target[c]],p[l]=[p.source[l],p.target[l]]}),{nodes:d,edges:h}},Zj=t=>Kj(Uft)(t);Zj.props={};const Jj=t=>Kj(Bft)(t);Jj.props={};const Vft={sortBy:(t,e)=>e.value-t.value},Xft={axis:!1,legend:!1,type:"point",encode:{x:"x",y:"y",size:2,shape:"point"}},$ft={type:"link",encode:{x:"x",y:"y",shape:"smooth"}},qft={text:"",fontSize:10},Qj=t=>{const{data:e,encode:n={},scale:r={},style:i={},layout:o={},nodeLabels:a=[],linkLabels:s=[],animate:c={},tooltip:l={}}=t,u=n==null?void 0:n.value,{nodes:f,edges:d}=Jj(Object.assign(Object.assign(Object.assign({},Vft),o),{field:u}))(e),h=el(l,"node",{title:"name",items:["value"]},!0),p=el(l,"link",{title:"",items:[v=>({name:"source",value:v.source.name}),v=>({name:"target",value:v.target.name})]});return[bt({},$ft,{data:d,encode:Xt(n,"link"),scale:Xt(r,"link"),labels:s,style:Object.assign({stroke:"#999"},Xt(i,"link")),tooltip:p,animate:nl(c,"link")}),bt({},Xft,{data:f,scale:Xt(r,"node"),encode:Xt(n,"node"),labels:[Object.assign(Object.assign({},qft),Xt(i,"label")),...a],style:Object.assign({},Xt(i,"node")),tooltip:h,animate:nl(c,"node")})]};Qj.props={};var Kft=1664525,Zft=1013904223,t9=4294967296;function Jft(){var t=1;return function(){return(t=(Kft*t+Zft)%t9)/t9}}var Qft=gt(52677);function tdt(t){return Qft(t)==="object"&&"length"in t?t:Array.from(t)}function edt(t,e){for(var n=t.length,r,i;n;)i=e()*n--|0,r=t[n],t[n]=t[i],t[i]=r;return t}function oyt(t){return e9(t,lcg())}function e9(t,e){for(var n=0,r=(t=edt(Array.from(t),e)).length,i=[],o,a;n<r;)o=t[n],a&&n9(a,o)?++n:(a=rdt(i=ndt(i,o)),n=0);return a}function ndt(t,e){var n,r;if(AT(e,t))return[e];for(n=0;n<t.length;++n)if(e_(e,t[n])&&AT(Qg(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(e_(Qg(t[n],t[r]),e)&&e_(Qg(t[n],e),t[r])&&e_(Qg(t[r],e),t[n])&&AT(r9(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function e_(t,e){var n=t.r-e.r,r=e.x-t.x,i=e.y-t.y;return n<0||n*n<r*r+i*i}function n9(t,e){var n=t.r-e.r+Math.max(t.r,e.r,1)*1e-9,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function AT(t,e){for(var n=0;n<e.length;++n)if(!n9(t,e[n]))return!1;return!0}function rdt(t){switch(t.length){case 1:return idt(t[0]);case 2:return Qg(t[0],t[1]);case 3:return r9(t[0],t[1],t[2])}}function idt(t){return{x:t.x,y:t.y,r:t.r}}function Qg(t,e){var n=t.x,r=t.y,i=t.r,o=e.x,a=e.y,s=e.r,c=o-n,l=a-r,u=s-i,f=Math.sqrt(c*c+l*l);return{x:(n+o+c/f*u)/2,y:(r+a+l/f*u)/2,r:(f+i+s)/2}}function r9(t,e,n){var r=t.x,i=t.y,o=t.r,a=e.x,s=e.y,c=e.r,l=n.x,u=n.y,f=n.r,d=r-a,h=r-l,p=i-s,v=i-u,y=c-o,m=f-o,b=r*r+i*i-o*o,O=b-a*a-s*s+c*c,E=b-l*l-u*u+f*f,w=h*p-d*v,_=(p*E-v*O)/(w*2)-r,S=(v*y-p*m)/w,M=(h*O-d*E)/(w*2)-i,T=(d*m-h*y)/w,A=S*S+T*T-1,C=2*(o+_*S+M*T),N=_*_+M*M-o*o,k=-(Math.abs(A)>1e-6?(C+Math.sqrt(C*C-4*A*N))/(2*A):N/C);return{x:r+_+S*k,y:i+M+T*k,r:k}}function i9(t,e,n){var r=t.x-e.x,i,o,a=t.y-e.y,s,c,l=r*r+a*a;l?(o=e.r+n.r,o*=o,c=t.r+n.r,c*=c,o>c?(i=(l+c-o)/(2*l),s=Math.sqrt(Math.max(0,c/l-i*i)),n.x=t.x-i*r-s*a,n.y=t.y-i*a+s*r):(i=(l+o-c)/(2*l),s=Math.sqrt(Math.max(0,o/l-i*i)),n.x=e.x+i*r-s*a,n.y=e.y+i*a+s*r)):(n.x=e.x+n.r,n.y=e.y)}function o9(t,e){var n=t.r+e.r-1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function a9(t){var e=t._,n=t.next._,r=e.r+n.r,i=(e.x*n.r+n.x*e.r)/r,o=(e.y*n.r+n.y*e.r)/r;return i*i+o*o}function n_(t){this._=t,this.next=null,this.previous=null}function s9(t,e){if(!(o=(t=tdt(t)).length))return 0;var n,r,i,o,a,s,c,l,u,f,d;if(n=t[0],n.x=0,n.y=0,!(o>1))return n.r;if(r=t[1],n.x=-r.r,r.x=n.r,r.y=0,!(o>2))return n.r+r.r;i9(r,n,i=t[2]),n=new n_(n),r=new n_(r),i=new n_(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;t:for(c=3;c<o;++c){i9(n._,r._,i=t[c]),i=new n_(i),l=r.next,u=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(o9(l._,i._)){r=l,n.next=r,r.previous=n,--c;continue t}f+=l._.r,l=l.next}else{if(o9(u._,i._)){n=u,n.next=r,r.previous=n,--c;continue t}d+=u._.r,u=u.previous}while(l!==u.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,a=a9(n);(i=i.next)!==r;)(s=a9(i))<a&&(n=i,a=s);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=e9(n,e),c=0;c<o;++c)n=t[c],n.x-=i.x,n.y-=i.y;return i.r}function ayt(t){return s9(t,lcg()),t}function odt(t){return Math.sqrt(t.value)}function adt(){var t=null,e=1,n=1,r=xd;function i(o){var a=Jft();return o.x=e/2,o.y=n/2,t?o.eachBefore(c9(t)).eachAfter(CT(r,.5,a)).eachBefore(l9(1)):o.eachBefore(c9(odt)).eachAfter(CT(xd,1,a)).eachAfter(CT(r,o.r/Math.min(e,n),a)).eachBefore(l9(Math.min(e,n)/(2*o.r))),o}return i.radius=function(o){return arguments.length?(t=xb(o),i):t},i.size=function(o){return arguments.length?(e=+o[0],n=+o[1],i):[e,n]},i.padding=function(o){return arguments.length?(r=typeof o=="function"?o:Sp(+o),i):r},i}function c9(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function CT(t,e,n){return function(r){if(i=r.children){var i,o,a=i.length,s=t(r)*e||0,c;if(s)for(o=0;o<a;++o)i[o].r+=s;if(c=s9(i,n),s)for(o=0;o<a;++o)i[o].r-=s;r.r=c+s}}}function l9(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}var sdt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const cdt=(t,e)=>({size:[t,e],padding:0,sort:(n,r)=>r.value-n.value}),ldt=(t,e,n)=>({type:"point",axis:!1,legend:!1,scale:{x:{domain:[0,t]},y:{domain:[0,e]},size:{type:"identity"}},encode:{x:"x",y:"y",size:"r",shape:"point"},style:{fill:n.color?void 0:r=>r.height===0?"#ddd":"#fff",stroke:n.color?void 0:r=>r.height===0?"":"#000"}}),udt={text:"",position:"inside",textOverflow:"clip",wordWrap:!0,maxLines:1,wordWrapWidth:t=>t.r*2},fdt={title:t=>t.data.name,items:[{field:"value"}]},ddt=(t,e,n)=>{const{value:r}=n,i=ri(t)?OP().path(e.path)(t):yp(t);return r?i.sum(o=>il(r)(o)).sort(e.sort):i.count(),adt().size(e.size).padding(e.padding)(i),i.descendants()},u9=(t,e)=>{const{width:n,height:r}=e,{data:i,encode:o={},scale:a={},style:s={},layout:c={},labels:l=[],tooltip:u={}}=t,f=sdt(t,["data","encode","scale","style","layout","labels","tooltip"]),d=ldt(n,r,o),h=ddt(i,bt({},cdt(n,r),c),bt({},d.encode,o)),p=Xt(s,"label");return bt({},d,Object.assign(Object.assign({data:h,encode:o,scale:a,style:s,labels:[Object.assign(Object.assign({},udt),p),...l]},f),{tooltip:Hx(u,fdt),axis:!1}))};u9.props={};function hdt(t){return t.target.depth}function pdt(t){return t.depth}function vdt(t,e){return e-1-t.height}function r_(t,e){return t.sourceLinks.length?t.depth:e-1}function gdt(t){return t.targetLinks.length?t.depth:t.sourceLinks.length?ls(t.sourceLinks,hdt)-1:0}function i_(t){return function(){return t}}function f9(t,e){return o_(t.source,e.source)||t.index-e.index}function d9(t,e){return o_(t.target,e.target)||t.index-e.index}function o_(t,e){return t.y0-e.y0}function kT(t){return t.value}function ydt(t){return t.index}function mdt(t){return t.nodes}function xdt(t){return t.links}function h9(t,e){const n=t.get(e);if(!n)throw new Error("missing: "+e);return n}function p9({nodes:t}){for(const e of t){let n=e.y0,r=n;for(const i of e.sourceLinks)i.y0=n+i.width/2,n+=i.width;for(const i of e.targetLinks)i.y1=r+i.width/2,r+=i.width}}function bdt(){let t=0,e=0,n=1,r=1,i=24,o=8,a,s=ydt,c=r_,l,u,f,d=mdt,h=xdt,p=6;function v(D){const B={nodes:d(D),links:h(D)};return y(B),m(B),b(B),O(B),_(B),p9(B),B}v.update=function(D){return p9(D),D},v.nodeId=function(D){return arguments.length?(s=typeof D=="function"?D:i_(D),v):s},v.nodeAlign=function(D){return arguments.length?(c=typeof D=="function"?D:i_(D),v):c},v.nodeDepth=function(D){return arguments.length?(l=D,v):l},v.nodeSort=function(D){return arguments.length?(u=D,v):u},v.nodeWidth=function(D){return arguments.length?(i=+D,v):i},v.nodePadding=function(D){return arguments.length?(o=a=+D,v):o},v.nodes=function(D){return arguments.length?(d=typeof D=="function"?D:i_(D),v):d},v.links=function(D){return arguments.length?(h=typeof D=="function"?D:i_(D),v):h},v.linkSort=function(D){return arguments.length?(f=D,v):f},v.size=function(D){return arguments.length?(t=e=0,n=+D[0],r=+D[1],v):[n-t,r-e]},v.extent=function(D){return arguments.length?(t=+D[0][0],n=+D[1][0],e=+D[0][1],r=+D[1][1],v):[[t,e],[n,r]]},v.iterations=function(D){return arguments.length?(p=+D,v):p};function y({nodes:D,links:B}){D.forEach((G,X)=>{G.index=X,G.sourceLinks=[],G.targetLinks=[]});const F=new Map(D.map(G=>[s(G),G]));if(B.forEach((G,X)=>{G.index=X;let{source:q,target:J}=G;typeof q!="object"&&(q=G.source=h9(F,q)),typeof J!="object"&&(J=G.target=h9(F,J)),q.sourceLinks.push(G),J.targetLinks.push(G)}),f!=null)for(const{sourceLinks:G,targetLinks:X}of D)G.sort(f),X.sort(f)}function m({nodes:D}){for(const B of D)B.value=B.fixedValue===void 0?Math.max(Cs(B.sourceLinks,kT),Cs(B.targetLinks,kT)):B.fixedValue}function b({nodes:D}){const B=D.length;let F=new Set(D),G=new Set,X=0;for(;F.size;){if(F.forEach(q=>{q.depth=X;for(const{target:J}of q.sourceLinks)G.add(J)}),++X>B)throw new Error("circular link");F=G,G=new Set}if(l){const q=Math.max(Qn(D,et=>et.depth)+1,0);let J;for(let et=0;et<D.length;et++)J=D[et],J.depth=l.call(null,J,q)}}function O({nodes:D}){const B=D.length;let F=new Set(D),G=new Set,X=0;for(;F.size;){if(F.forEach(q=>{q.height=X;for(const{source:J}of q.targetLinks)G.add(J)}),++X>B)throw new Error("circular link");F=G,G=new Set}}function E({nodes:D}){const B=Math.max(Qn(D,X=>X.depth)+1,0),F=(n-t-i)/(B-1),G=new Array(B).fill(0).map(()=>[]);for(const X of D){const q=Math.max(0,Math.min(B-1,Math.floor(c.call(null,X,B))));X.layer=q,X.x0=t+q*F,X.x1=X.x0+i,G[q]?G[q].push(X):G[q]=[X]}if(u)for(const X of G)X.sort(u);return G}function w(D){const B=ls(D,F=>(r-e-(F.length-1)*a)/Cs(F,kT));for(const F of D){let G=e;for(const X of F){X.y0=G,X.y1=G+X.value*B,G=X.y1+a;for(const q of X.sourceLinks)q.width=q.value*B}G=(r-G+a)/(F.length+1);for(let X=0;X<F.length;++X){const q=F[X];q.y0+=G*(X+1),q.y1+=G*(X+1)}k(F)}}function _(D){const B=E(D);a=Math.min(o,(r-e)/(Qn(B,F=>F.length)-1)),w(B);for(let F=0;F<p;++F){const G=Math.pow(.99,F),X=Math.max(1-G,(F+1)/p);M(B,G,X),S(B,G,X)}}function S(D,B,F){for(let G=1,X=D.length;G<X;++G){const q=D[G];for(const J of q){let et=0,dt=0;for(const{source:Dt,value:pt}of J.targetLinks){const vt=pt*(J.layer-Dt.layer);et+=R(Dt,J)*vt,dt+=vt}if(!(dt>0))continue;const _t=(et/dt-J.y0)*B;J.y0+=_t,J.y1+=_t,N(J)}u===void 0&&q.sort(o_),q.length&&T(q,F)}}function M(D,B,F){for(let G=D.length,X=G-2;X>=0;--X){const q=D[X];for(const J of q){let et=0,dt=0;for(const{target:Dt,value:pt}of J.sourceLinks){const vt=pt*(Dt.layer-J.layer);et+=I(J,Dt)*vt,dt+=vt}if(!(dt>0))continue;const _t=(et/dt-J.y0)*B;J.y0+=_t,J.y1+=_t,N(J)}u===void 0&&q.sort(o_),q.length&&T(q,F)}}function T(D,B){const F=D.length>>1,G=D[F];C(D,G.y0-a,F-1,B),A(D,G.y1+a,F+1,B),C(D,r,D.length-1,B),A(D,e,0,B)}function A(D,B,F,G){for(;F<D.length;++F){const X=D[F],q=(B-X.y0)*G;q>1e-6&&(X.y0+=q,X.y1+=q),B=X.y1+a}}function C(D,B,F,G){for(;F>=0;--F){const X=D[F],q=(X.y1-B)*G;q>1e-6&&(X.y0-=q,X.y1-=q),B=X.y0-a}}function N({sourceLinks:D,targetLinks:B}){if(f===void 0){for(const{source:{sourceLinks:F}}of B)F.sort(d9);for(const{target:{targetLinks:F}}of D)F.sort(f9)}}function k(D){if(f===void 0)for(const{sourceLinks:B,targetLinks:F}of D)B.sort(d9),F.sort(f9)}function R(D,B){let F=D.y0-(D.sourceLinks.length-1)*a/2;for(const{target:G,width:X}of D.sourceLinks){if(G===B)break;F+=X+a}for(const{source:G,width:X}of B.targetLinks){if(G===D)break;F-=X}return F}function I(D,B){let F=B.y0-(B.targetLinks.length-1)*a/2;for(const{source:G,width:X}of B.targetLinks){if(G===D)break;F+=X+a}for(const{target:G,width:X}of D.sourceLinks){if(G===B)break;F-=X}return F}return v}const _dt={nodeAlign:"justify",nodeWidth:.008,nodePadding:.03,nodes:t=>t.nodes,links:t=>t.links,nodeSort:void 0,linkSort:void 0,iterations:6},wdt={left:pdt,right:vdt,center:gdt,justify:r_};function Odt(t){const e=typeof t;return e==="string"?wdt[t]||r_:e==="function"?t:r_}const v9=t=>e=>{const{nodeId:n,nodeSort:r,nodeAlign:i,nodeWidth:o,nodePadding:a,nodeDepth:s,nodes:c,links:l,linkSort:u,iterations:f}=Object.assign({},_dt,t),d=bdt().nodeSort(r).linkSort(u).links(l).nodes(c).nodeWidth(o).nodePadding(a).nodeDepth(s).nodeAlign(Odt(i)).iterations(f).extent([[0,0],[1,1]]);typeof n=="function"&&d.nodeId(n);const h=d(e),{nodes:p,links:v}=h,y=p.map(b=>{const{x0:O,x1:E,y0:w,y1:_}=b;return Object.assign(Object.assign({},b),{x:[O,E,E,O],y:[w,w,_,_]})}),m=v.map(b=>{const{source:O,target:E}=b,w=O.x1,_=E.x0,S=b.width/2;return Object.assign(Object.assign({},b),{x:[w,w,_,_],y:[b.y0+S,b.y0-S,b.y1+S,b.y1-S]})});return{nodes:y,links:m}};v9.props={};var Edt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const Sdt={nodeId:t=>t.key,nodeWidth:.02,nodePadding:.02},Mdt={type:"polygon",axis:!1,legend:!1,encode:{shape:"polygon",x:"x",y:"y"},scale:{x:{type:"identity"},y:{type:"identity"}},style:{stroke:"#000"}},Pdt={type:"polygon",axis:!1,legend:!1,encode:{shape:"ribbon",x:"x",y:"y"},style:{fillOpacity:.5,stroke:void 0}},Tdt={textAlign:t=>t.x[0]<.5?"start":"end",position:t=>t.x[0]<.5?"right":"left",fontSize:10},g9=t=>{const{data:e,encode:n={},scale:r,style:i={},layout:o={},nodeLabels:a=[],linkLabels:s=[],animate:c={},tooltip:l={},interaction:u}=t,{links:f,nodes:d}=CM(e,n),h=Xt(n,"node"),p=Xt(n,"link"),{key:v=A=>A.key,color:y=v}=h,{links:m,nodes:b}=v9(Object.assign(Object.assign(Object.assign({},Sdt),{nodeId:il(v)}),o))({links:f,nodes:d}),O=Xt(i,"label"),{text:E=v,spacing:w=5}=O,_=Edt(O,["text","spacing"]),S=il(v),M=el(l,"node",{title:S,items:[{field:"value"}]},!0),T=el(l,"link",{title:"",items:[A=>({name:"source",value:S(A.source)}),A=>({name:"target",value:S(A.target)})]});return[bt({},Mdt,{data:b,encode:Object.assign(Object.assign({},h),{color:y}),scale:r,style:Xt(i,"node"),labels:[Object.assign(Object.assign(Object.assign({},Tdt),{text:E,dx:A=>A.x[0]<.5?w:-w}),_),...a],tooltip:M,animate:nl(c,"node"),axis:!1,interaction:u}),bt({},Pdt,{data:m,encode:p,labels:s,style:Object.assign({fill:p.color?void 0:"#aaa",lineWidth:0},Xt(i,"link")),tooltip:T,animate:nl(c,"link"),interaction:u})]};g9.props={};function Adt(t,e){return e.value-t.value}function Cdt(t,e){return e.frequency-t.frequency}function kdt(t,e){return`${t.id}`.localeCompare(`${e.id}`)}function Ndt(t,e){return`${t.name}`.localeCompare(`${e.name}`)}const Rdt={y:0,thickness:.05,weight:!1,marginRatio:.1,id:t=>t.id,source:t=>t.source,target:t=>t.target,sourceWeight:t=>t.value||1,targetWeight:t=>t.value||1,sortBy:null};function Ldt(t){const{y:e,thickness:n,weight:r,marginRatio:i,id:o,source:a,target:s,sourceWeight:c,targetWeight:l,sortBy:u}=Object.assign(Object.assign({},Rdt),t);function f(y){const m=y.nodes.map(O=>Object.assign({},O)),b=y.edges.map(O=>Object.assign({},O));return d(m,b),h(m,b),p(m,b),v(m,b),{nodes:m,edges:b}}function d(y,m){m.forEach(E=>{E.source=a(E),E.target=s(E),E.sourceWeight=c(E),E.targetWeight=l(E)});const b=Nr(m,E=>E.source),O=Nr(m,E=>E.target);return y.forEach(E=>{E.id=o(E);const w=b.has(E.id)?b.get(E.id):[],_=O.has(E.id)?O.get(E.id):[];E.frequency=w.length+_.length,E.value=Cs(w,S=>S.sourceWeight)+Cs(_,S=>S.targetWeight)}),{nodes:y,edges:m}}function h(y,m){const b=typeof u=="function"?u:xe[u];b&&y.sort(b)}function p(y,m){const b=y.length;if(!b)throw Zh("Invalid nodes: it's empty!");if(!r){const w=1/b;return y.forEach((_,S)=>{_.x=(S+.5)*w,_.y=e}),{nodes:y,edges:m}}const O=i/(2*b),E=y.reduce((w,_)=>w+=_.value,0);return y.reduce((w,_)=>{_.weight=_.value/E,_.width=_.weight*(1-i),_.height=n;const S=O+w,M=S+_.width,T=e-n/2,A=T+n;return _.x=[S,M,M,S],_.y=[T,T,A,A],w+_.width+2*O},0),{nodes:y,edges:m}}function v(y,m){const b=new Map(y.map(w=>[w.id,w]));if(!r)return m.forEach(w=>{const _=a(w),S=s(w),M=b.get(_),T=b.get(S);M&&T&&(w.x=[M.x,T.x],w.y=[M.y,T.y])}),{nodes:y,edges:m};m.forEach(w=>{w.x=[0,0,0,0],w.y=[e,e,e,e]});const O=Nr(m,w=>w.source),E=Nr(m,w=>w.target);y.forEach(w=>{const{edges:_,width:S,x:M,y:T,value:A,id:C}=w,N=O.get(C)||[],k=E.get(C)||[];let R=0;N.map(I=>{const D=I.sourceWeight/A*S;I.x[0]=M[0]+R,I.x[1]=M[0]+R+D,R+=D}),k.forEach(I=>{const D=I.targetWeight/A*S;I.x[3]=M[0]+R,I.x[2]=M[0]+R+D,R+=D})})}return f}const NT=t=>e=>Ldt(t)(e);NT.props={};var y9=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const RT={y:0,thickness:.05,marginRatio:.1,id:t=>t.key,source:t=>t.source,target:t=>t.target,sourceWeight:t=>t.value||1,targetWeight:t=>t.value||1,sortBy:null},Idt={type:"polygon",axis:!1,legend:!1,encode:{shape:"polygon",x:"x",y:"y"},scale:{x:{type:"identity"},y:{type:"identity"}},style:{opacity:1,fillOpacity:1,lineWidth:1}},Ddt={type:"polygon",axis:!1,legend:!1,encode:{shape:"ribbon",x:"x",y:"y"},style:{opacity:.5,lineWidth:1}},Bdt={position:"outside",fontSize:10},m9=(t,e)=>{const{data:n,encode:r={},scale:i,style:o={},layout:a={},nodeLabels:s=[],linkLabels:c=[],animate:l={},tooltip:u={}}=t,{nodes:f,links:d}=CM(n,r),h=Xt(r,"node"),p=Xt(r,"link"),{key:v=I=>I.key,color:y=v}=h,{linkEncodeColor:m=I=>I.source}=p,{nodeWidthRatio:b=RT.thickness,nodePaddingRatio:O=RT.marginRatio}=a,E=y9(a,["nodeWidthRatio","nodePaddingRatio"]),{nodes:w,edges:_}=NT(Object.assign(Object.assign(Object.assign(Object.assign({},RT),{id:il(v),thickness:b,marginRatio:O}),E),{weight:!0}))({nodes:f,edges:d}),S=Xt(o,"label"),{text:M=v}=S,T=y9(S,["text"]),A=el(u,"node",{title:"",items:[I=>({name:I.key,value:I.value})]},!0),C=el(u,"link",{title:"",items:[I=>({name:`${I.source} -> ${I.target}`,value:I.value})]}),{height:N,width:k}=e,R=Math.min(N,k);return[bt({},Ddt,{data:_,encode:Object.assign(Object.assign({},p),{color:m}),labels:c,style:Object.assign({fill:m?void 0:"#aaa"},Xt(o,"link")),tooltip:C,animate:nl(l,"link")}),bt({},Idt,{data:w,encode:Object.assign(Object.assign({},h),{color:y}),scale:i,style:Xt(o,"node"),coordinate:{type:"polar",outerRadius:(R-20)/R,startAngle:-Math.PI*2,endAngle:0},labels:[Object.assign(Object.assign(Object.assign({},Bdt),{text:M}),T),...s],tooltip:A,animate:nl(l,"node"),axis:!1})]};m9.props={};var Fdt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const jdt=(t,e)=>({tile:"treemapSquarify",ratio:.5*(1+Math.sqrt(5)),size:[t,e],round:!1,ignoreParentValue:!0,padding:0,paddingInner:0,paddingOuter:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,sort:(n,r)=>r.value-n.value,layer:0}),Gdt=(t,e)=>({type:"rect",axis:!1,encode:{x:"x",y:"y",key:"id",color:n=>n.path[1]},scale:{x:{domain:[0,t],range:[0,1]},y:{domain:[0,e],range:[0,1]}},style:{stroke:"#fff"},state:{active:{opacity:.6},inactive:{opacity:1}}}),zdt={fontSize:10,text:t=>bg(t.path),position:"inside",fill:"#000",textOverflow:"clip",wordWrap:!0,maxLines:1,wordWrapWidth:t=>t.x1-t.x0},Wdt={title:t=>{var e,n;return(n=(e=t.path)===null||e===void 0?void 0:e.join)===null||n===void 0?void 0:n.call(e,".")},items:[{field:"value"}]},Ydt={title:t=>bg(t.path),items:[{field:"value"}]},x9=(t,e)=>{const{width:n,height:r,options:i}=e,{data:o,encode:a={},scale:s,style:c={},layout:l={},labels:u=[],tooltip:f={}}=t,d=Fdt(t,["data","encode","scale","style","layout","labels","tooltip"]),h=Ln(i,["interaction","treemapDrillDown"]),p=bt({},jdt(n,r),l,{layer:h?b=>b.depth===1:l.layer}),[v,y]=b6(o,p,a),m=Xt(c,"label");return bt({},Gdt(n,r),Object.assign(Object.assign({data:v,scale:s,style:c,labels:[Object.assign(Object.assign({},zdt),m),...u]},d),{encode:a,tooltip:Hx(f,Wdt),axis:!1}),h?{interaction:Object.assign(Object.assign({},d.interaction),{treemapDrillDown:h?Object.assign(Object.assign({},h),{originData:y,layout:p}):void 0}),encode:Object.assign({color:b=>bg(b.path)},a),tooltip:Hx(f,Ydt)}:{})};x9.props={};function Hdt(){return{"data.arc":NT,"data.cluster":Zj,"mark.forceGraph":qj,"mark.tree":Qj,"mark.pack":u9,"mark.sankey":g9,"mark.chord":m9,"mark.treemap":x9}}var b9=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Udt(t,e){return ls(t,n=>e[n])}function Vdt(t,e){return Qn(t,n=>e[n])}function _9(t,e){const n=LT(t,e)*2.5-IT(t,e)*1.5;return ls(t,r=>e[r]>=n?e[r]:NaN)}function LT(t,e){return Ob(t,.25,n=>e[n])}function Xdt(t,e){return Ob(t,.5,n=>e[n])}function IT(t,e){return Ob(t,.75,n=>e[n])}function w9(t,e){const n=IT(t,e)*2.5-LT(t,e)*1.5;return Qn(t,r=>e[r]<=n?e[r]:NaN)}function $dt(){return(t,e)=>{const{encode:n}=e,{y:r,x:i}=n,{value:o}=r,{value:a}=i;return[Array.from(Nr(t,l=>a[+l]).values()).flatMap(l=>{const u=_9(l,o),f=w9(l,o);return l.filter(d=>o[d]<u||o[d]>f)}),e]}}const O9=t=>{const{data:e,encode:n,style:r={},tooltip:i={},transform:o,animate:a}=t,s=b9(t,["data","encode","style","tooltip","transform","animate"]),{point:c=!0}=r,l=b9(r,["point"]),{y:u}=n,f={y:u,y1:u,y2:u,y3:u,y4:u},d={y1:LT,y2:Xdt,y3:IT},h=el(i,"box",{items:[{channel:"y",name:"min"},{channel:"y1",name:"q1"},{channel:"y2",name:"q2"},{channel:"y3",name:"q3"},{channel:"y4",name:"max"}]},!0),p=el(i,"point",{title:{channel:"x"},items:[{name:"outlier",channel:"y"}]});if(!c)return Object.assign({type:"box",data:e,transform:[Object.assign(Object.assign({type:"groupX",y:Udt},d),{y4:Vdt})],encode:Object.assign(Object.assign({},n),f),style:l,tooltip:h},s);const v=Xt(l,"box"),y=Xt(l,"point");return[Object.assign({type:"box",data:e,transform:[Object.assign(Object.assign({type:"groupX",y:_9},d),{y4:w9})],encode:Object.assign(Object.assign({},n),f),style:v,tooltip:h,animate:nl(a,"box")},s),{type:"point",data:e,transform:[{type:$dt}],encode:n,style:Object.assign({},y),tooltip:p,animate:nl(a,"point")}]};O9.props={};const E9=(t,e)=>Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))/2,qdt=(t,e)=>{if(!e)return;const{coordinate:n}=e;if(!(n!=null&&n.getCenter))return;const r=n.getCenter();return(i,o,a)=>{const{document:s}=e.canvas,{color:c,index:l}=o,u=s.createElement("g",{}),f=E9(i[0],i[1]),d=E9(i[0],r)*2,h=s.createElement("path",{style:Object.assign(Object.assign(Object.assign({d:[["M",...i[0]],["A",f,f,0,1,0,...i[1]],["A",d+f*2,d+f*2,0,0,0,...i[2]],["A",f,f,0,1,l===0?0:1,...i[3]],["A",d,d,0,0,1,...i[0]],["Z"]]},a),CS(t,["shape","last","first"])),{fill:c||a.color})});return u.appendChild(h),u}};var a_=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const Kdt=(t,e)=>{const{shape:n,radius:r}=t,i=a_(t,["shape","radius"]),o=Xt(i,"pointer"),a=Xt(i,"pin"),{shape:s}=o,c=a_(o,["shape"]),{shape:l}=a,u=a_(a,["shape"]),{coordinate:f,theme:d}=e;return(h,p)=>{const v=h.map(R=>f.invert(R)),[y,m,b]=$X(f,"polar"),O=f.clone(),{color:E}=p,w=aS({startAngle:y,endAngle:m,innerRadius:b,outerRadius:r});w.push(["cartesian"]),O.update({transformations:w});const _=v.map(R=>O.map(R)),[S,M]=jS(_),[T,A]=f.getCenter(),C=Object.assign(Object.assign({x1:S,y1:M,x2:T,y2:A,stroke:E},c),i),N=Object.assign(Object.assign({cx:T,cy:A,stroke:E},u),i),k=Ie(new Mt);return Fl(s)||(typeof s=="function"?k.append(()=>s(_,p,O,d)):k.append("line").call(be,C).node()),Fl(l)||(typeof l=="function"?k.append(()=>l(_,p,O,d)):k.append("circle").call(be,N).node()),k.node()}},S9={coordinate:{type:"radial",innerRadius:.9,outerRadius:1,startAngle:-11/10*Math.PI,endAngle:1/10*Math.PI},axis:{x:!1},legend:!1,tooltip:!1,encode:{x:"x",y:"y",color:"color"},scale:{color:{range:["#30BF78","#D0D0D0"]}}},Zdt={style:{shape:Kdt,lineWidth:4,pointerLineCap:"round",pinR:10,pinFill:"#fff",radius:.6}},Jdt={type:"text",style:{x:"50%",y:"60%",textAlign:"center",textBaseline:"middle",fontSize:20,fontWeight:800,fill:"#888"}};function Qdt(t){if(Je(t)){const e=Math.max(0,Math.min(t,1));return{percent:e,target:e,total:1}}return t}function tht(t,e){const{name:n="score",target:r,total:i,percent:o,thresholds:a=[]}=Qdt(t),s=o||r,c=o?1:i,l=Object.assign({y:{domain:[0,c]}},e);return a.length?{targetData:[{x:n,y:s,color:"target"}],totalData:a.map((u,f)=>({x:n,y:f>=1?u-a[f-1]:u,color:f})),target:s,total:c,scale:l}:{targetData:[{x:n,y:s,color:"target"}],totalData:[{x:n,y:s,color:"target"},{x:n,y:c-s,color:"total"}],target:s,total:c,scale:l}}function eht(t,{target:e,total:n}){const{content:r}=t;return r?r(e,n):e.toString()}const M9=t=>{const{data:e={},scale:n={},style:r={},animate:i={},transform:o=[]}=t,a=a_(t,["data","scale","style","animate","transform"]),{targetData:s,totalData:c,target:l,total:u,scale:f}=tht(e,n),d=Xt(r,"text"),h=TX(r,["pointer","pin"]),p=Xt(r,"arc"),v=p.shape;return[bt({},S9,Object.assign({type:"interval",transform:[{type:"stackY"}],data:c,scale:f,style:v==="round"?Object.assign(Object.assign({},p),{shape:qdt}):p,animate:typeof i=="object"?Xt(i,"arc"):i},a)),bt({},S9,Zdt,Object.assign({type:"point",data:s,scale:f,style:h,animate:typeof i=="object"?Xt(i,"indicator"):i},a)),bt({},Jdt,{style:Object.assign({text:eht(d,{target:l,total:u})},d),animate:typeof i=="object"?Xt(i,"text"):i})]};M9.props={};const P9=5e3;function T9(t,e,n){return t+(e-t)*n}function nht(t,e,n,r){return e===0?[[t+1/2*n/Math.PI/2,r/2],[t+1/2*n/Math.PI,r],[t+n/4,r]]:e===1?[[t+1/2*n/Math.PI/2*(Math.PI-2),r],[t+1/2*n/Math.PI/2*(Math.PI-1),r/2],[t+n/4,0]]:e===2?[[t+1/2*n/Math.PI/2,-r/2],[t+1/2*n/Math.PI,-r],[t+n/4,-r]]:[[t+1/2*n/Math.PI/2*(Math.PI-2),-r],[t+1/2*n/Math.PI/2*(Math.PI-1),-r/2],[t+n/4,0]]}function rht(t,e,n,r,i,o,a){const s=Math.ceil(2*t/n*4)*4,c=[];let l=r;for(;l<-Math.PI*2;)l+=Math.PI*2;for(;l>0;)l-=Math.PI*2;l=l/Math.PI/2*n;const u=o-t+l-t*2;c.push(["M",u,e]);let f=0;for(let d=0;d<s;++d){const h=d%4,p=nht(d*n/4,h,n,i);c.push(["C",p[0][0]+u,-p[0][1]+e,p[1][0]+u,-p[1][1]+e,p[2][0]+u,-p[2][1]+e]),d===s-1&&(f=p[2][0])}return c.push(["L",f+u,a+t]),c.push(["L",u,a+t]),c.push(["Z"]),c}function iht(t,e,n,r,i,o,a,s,c,l,u){const{fill:f,fillOpacity:d,opacity:h}=i;for(let p=0;p<r;p++){const v=r<=1?1:p/(r-1),y=rht(s,a+s*n,c,0,s/40,t,e),m=u.createElement("path",{style:{d:y,fill:f,opacity:T9(.2,.9,v)*Number(h||d)}});o.appendChild(m);try{if(l===!1)return;const b=[{transform:"translate(0, 0)"},{transform:`translate(${c*2}, 0)`}];m.animate(b,{duration:T9(.5*P9,P9,v)*2,iterations:1/0})}catch(b){console.warn("off-screen group animate error!")}}}function oht(t,e,n){return`
      M ${t} ${e-n} 
      a ${n} ${n} 0 1 0 0 ${n*2}
      a ${n} ${n} 0 1 0 0 ${-n*2}
      Z
    `}function aht(t,e,n){const i=n*.618;return`
      M ${t-i} ${e-n}
      L ${t+i} ${e-n}
      L ${t+i} ${e+n}
      L ${t-i} ${e+n}
      Z
    `}function sht(t,e,n){return`
      M ${t} ${e-n}
      L ${t+n} ${e}
      L ${t} ${e+n}
      L ${t-n} ${e}
      Z
    `}function cht(t,e,n){return`
      M ${t} ${e-n}
      L ${t+n} ${e+n}
      L ${t-n} ${e+n}
      Z
    `}function lht(t,e,n){const r=n*4/3,i=Math.max(r,n*2),o=r/2,a=t,s=o+e-i/2,c=Math.asin(o/((i-o)*.85)),l=Math.sin(c)*o,u=Math.cos(c)*o,f=a-u,d=s+l,h=t,p=s+o/Math.sin(c);return`
      M ${f} ${d}
      A ${o} ${o} 0 1 1 ${f+u*2} ${d}
      Q ${h} ${p} ${t} ${e+i/2}
      Q ${h} ${p} ${f} ${d}
      Z 
    `}const A9={pin:lht,rect:aht,circle:oht,diamond:sht,triangle:cht};var C9=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const uht=(t="circle")=>A9[t]||A9.circle,k9=(t,e)=>{if(!e)return;const{coordinate:n}=e,{liquidOptions:r,styleOptions:i}=t,{liquidShape:o,percent:a}=r,{background:s,outline:c={},wave:l={}}=i,u=C9(i,["background","outline","wave"]),{border:f=2,distance:d=0}=c,h=C9(c,["border","distance"]),{length:p=192,count:v=3}=l;return(y,m,b)=>{const{document:O}=e.canvas,{color:E,fillOpacity:w}=b,_=Object.assign(Object.assign({fill:E},b),u),S=O.createElement("g",{}),[M,T]=n.getCenter(),A=n.getSize(),C=Math.min(...A)/2,k=(Fa(o)?o:uht(o))(M,T,C,...A);if(Object.keys(s).length){const D=O.createElement("path",{style:Object.assign({d:k,fill:"#fff"},s)});S.appendChild(D)}if(a>0){const D=O.createElement("path",{style:{d:k}});S.appendChild(D),S.style.clipPath=D,iht(M,T,1-a,v,_,S,D.getBBox().y,C*2,p,!0,O)}const R=O.createElement("path",{style:{d:k,fill:"transparent",lineWidth:f+2*d,stroke:"#fff"}}),I=O.createElement("path",{style:Object.assign(Object.assign(Object.assign({d:k,stroke:E,strokeOpacity:w,lineWidth:f},_),h),{fill:"transparent"})});return S.appendChild(R),S.appendChild(I),S}};k9.props={};var fht=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const dht={axis:{x:!1,y:!1},legend:!1,tooltip:!1,encode:{x:"type",y:"percent"},scale:{y:{domain:[0,1]}},style:{shape:k9},animate:{enter:{type:"fadeIn"}}},hht={type:"text",style:{x:"50%",y:"50%",textAlign:"center",textBaseline:"middle",fontSize:20,fontWeight:800,fill:"#888"},animate:{enter:{type:"fadeIn"}}},N9=t=>{const{data:e={},style:n={},animate:r}=t,i=fht(t,["data","style","animate"]),o=Math.max(0,Je(e)?e:e==null?void 0:e.percent),a=[{percent:o,type:"liquid"}],s=Object.assign(Object.assign({},Xt(n,"text")),Xt(n,"content")),c=Xt(n,"outline"),l=Xt(n,"wave"),u=Xt(n,"background");return[bt({},dht,Object.assign({type:"interval",data:a,style:{liquidOptions:{percent:o,liquidShape:n==null?void 0:n.shape},styleOptions:Object.assign(Object.assign({},n),{outline:c,wave:l,background:u})},animate:r},i)),bt({},hht,{style:Object.assign({text:`${ex(o*100)} %`},s),animate:r})]};N9.props={};var Zl=gt(69916);const R9=1e-10;function L9(t,e){const n=vht(t),r=n.filter(function(c){return pht(c,t)});let i=0,o=0,a;const s=[];if(r.length>1){const c=ght(r);for(a=0;a<r.length;++a){const u=r[a];u.angle=Math.atan2(u.x-c.x,u.y-c.y)}r.sort(function(u,f){return f.angle-u.angle});let l=r[r.length-1];for(a=0;a<r.length;++a){const u=r[a];o+=(l.x+u.x)*(u.y-l.y);const f={x:(u.x+l.x)/2,y:(u.y+l.y)/2};let d=null;for(let h=0;h<u.parentIndex.length;++h)if(l.parentIndex.indexOf(u.parentIndex[h])>-1){const p=t[u.parentIndex[h]],v=Math.atan2(u.x-p.x,u.y-p.y),y=Math.atan2(l.x-p.x,l.y-p.y);let m=y-v;m<0&&(m+=2*Math.PI);const b=y-m/2;let O=ty(f,{x:p.x+p.radius*Math.sin(b),y:p.y+p.radius*Math.cos(b)});O>p.radius*2&&(O=p.radius*2),(d===null||d.width>O)&&(d={circle:p,width:O,p1:u,p2:l})}d!==null&&(s.push(d),i+=DT(d.circle.radius,d.width),l=u)}}else{let c=t[0];for(a=1;a<t.length;++a)t[a].radius<c.radius&&(c=t[a]);let l=!1;for(a=0;a<t.length;++a)if(ty(t[a],c)>Math.abs(c.radius-t[a].radius)){l=!0;break}l?i=o=0:(i=c.radius*c.radius*Math.PI,s.push({circle:c,p1:{x:c.x,y:c.y+c.radius},p2:{x:c.x-R9,y:c.y+c.radius},width:c.radius*2}))}return o/=2,e&&(e.area=i+o,e.arcArea=i,e.polygonArea=o,e.arcs=s,e.innerPoints=r,e.intersectionPoints=n),i+o}function pht(t,e){for(let n=0;n<e.length;++n)if(ty(t,e[n])>e[n].radius+R9)return!1;return!0}function vht(t){const e=[];for(let n=0;n<t.length;++n)for(let r=n+1;r<t.length;++r){const i=D9(t[n],t[r]);for(let o=0;o<i.length;++o){const a=i[o];a.parentIndex=[n,r],e.push(a)}}return e}function DT(t,e){return t*t*Math.acos(1-e/t)-(t-e)*Math.sqrt(e*(2*t-e))}function ty(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))}function I9(t,e,n){if(n>=t+e)return 0;if(n<=Math.abs(t-e))return Math.PI*Math.min(t,e)*Math.min(t,e);const r=t-(n*n-e*e+t*t)/(2*n),i=e-(n*n-t*t+e*e)/(2*n);return DT(t,r)+DT(e,i)}function D9(t,e){const n=ty(t,e),r=t.radius,i=e.radius;if(n>=r+i||n<=Math.abs(r-i))return[];const o=(r*r-i*i+n*n)/(2*n),a=Math.sqrt(r*r-o*o),s=t.x+o*(e.x-t.x)/n,c=t.y+o*(e.y-t.y)/n,l=-(e.y-t.y)*(a/n),u=-(e.x-t.x)*(a/n);return[{x:s+l,y:c-u},{x:s-l,y:c+u}]}function ght(t){const e={x:0,y:0};for(let n=0;n<t.length;++n)e.x+=t[n].x,e.y+=t[n].y;return e.x/=t.length,e.y/=t.length,e}function yht(t,e){e=e||{},e.maxIterations=e.maxIterations||500;const n=e.initialLayout||_ht,r=e.lossFunction||FT;t=mht(t);const i=n(t,e),o=[],a=[];let s;for(s in i)i.hasOwnProperty(s)&&(o.push(i[s].x),o.push(i[s].y),a.push(s));const l=(0,Zl.nelderMead)(function(u){const f={};for(let d=0;d<a.length;++d){const h=a[d];f[h]={x:u[2*d],y:u[2*d+1],radius:i[h].radius}}return r(f,t)},o,e).x;for(let u=0;u<a.length;++u)s=a[u],i[s].x=l[2*u],i[s].y=l[2*u+1];return i}const B9=1e-10;function BT(t,e,n){return Math.min(t,e)*Math.min(t,e)*Math.PI<=n+B9?Math.abs(t-e):(0,Zl.bisect)(function(r){return I9(t,e,r)-n},0,t+e)}function mht(t){t=t.slice();const e=[],n={};let r,i,o,a;for(r=0;r<t.length;++r){const s=t[r];s.sets.length==1?e.push(s.sets[0]):s.sets.length==2&&(o=s.sets[0],a=s.sets[1],n[[o,a]]=!0,n[[a,o]]=!0)}for(e.sort((s,c)=>s>c?1:-1),r=0;r<e.length;++r)for(o=e[r],i=r+1;i<e.length;++i)a=e[i],[o,a]in n||t.push({sets:[o,a],size:0});return t}function xht(t,e,n){const r=(0,Zl.zerosM)(e.length,e.length),i=(0,Zl.zerosM)(e.length,e.length);return t.filter(function(o){return o.sets.length==2}).map(function(o){const a=n[o.sets[0]],s=n[o.sets[1]],c=Math.sqrt(e[a].size/Math.PI),l=Math.sqrt(e[s].size/Math.PI),u=BT(c,l,o.size);r[a][s]=r[s][a]=u;let f=0;o.size+1e-10>=Math.min(e[a].size,e[s].size)?f=1:o.size<=1e-10&&(f=-1),i[a][s]=i[s][a]=f}),{distances:r,constraints:i}}function bht(t,e,n,r){let i=0,o;for(o=0;o<e.length;++o)e[o]=0;for(o=0;o<n.length;++o){const a=t[2*o],s=t[2*o+1];for(let c=o+1;c<n.length;++c){const l=t[2*c],u=t[2*c+1],f=n[o][c],d=r[o][c],h=(l-a)*(l-a)+(u-s)*(u-s),p=Math.sqrt(h),v=h-f*f;d>0&&p<=f||d<0&&p>=f||(i+=2*v*v,e[2*o]+=4*v*(a-l),e[2*o+1]+=4*v*(s-u),e[2*c]+=4*v*(l-a),e[2*c+1]+=4*v*(u-s))}}return i}function _ht(t,e){let n=Oht(t,e);const r=e.lossFunction||FT;if(t.length>=8){const i=wht(t,e),o=r(i,t),a=r(n,t);o+1e-8<a&&(n=i)}return n}function wht(t,e){e=e||{};const n=e.restarts||10,r=[],i={};let o;for(o=0;o<t.length;++o){const v=t[o];v.sets.length==1&&(i[v.sets[0]]=r.length,r.push(v))}const a=xht(t,r,i);let s=a.distances;const c=a.constraints,l=(0,Zl.norm2)(s.map(Zl.norm2))/s.length;s=s.map(function(v){return v.map(function(y){return y/l})});const u=function(v,y){return bht(v,y,s,c)};let f,d;for(o=0;o<n;++o){const v=(0,Zl.zeros)(s.length*2).map(Math.random);d=(0,Zl.conjugateGradient)(u,v,e),(!f||d.fx<f.fx)&&(f=d)}const h=f.x,p={};for(o=0;o<r.length;++o){const v=r[o];p[v.sets[0]]={x:h[2*o]*l,y:h[2*o+1]*l,radius:Math.sqrt(v.size/Math.PI)}}if(e.history)for(o=0;o<e.history.length;++o)(0,Zl.scale)(e.history[o].x,l);return p}function Oht(t,e){const n=e&&e.lossFunction?e.lossFunction:FT,r={},i={};let o;for(let f=0;f<t.length;++f){const d=t[f];d.sets.length==1&&(o=d.sets[0],r[o]={x:1e10,y:1e10,rowid:Object.keys(r).length,size:d.size,radius:Math.sqrt(d.size/Math.PI)},i[o]=[])}t=t.filter(function(f){return f.sets.length==2});for(let f=0;f<t.length;++f){const d=t[f];let h=d.hasOwnProperty("weight")?d.weight:1;const p=d.sets[0],v=d.sets[1];d.size+B9>=Math.min(r[p].size,r[v].size)&&(h=0),i[p].push({set:v,size:d.size,weight:h}),i[v].push({set:p,size:d.size,weight:h})}const a=[];for(o in i)if(i.hasOwnProperty(o)){let f=0;for(let d=0;d<i[o].length;++d)f+=i[o][d].size*i[o][d].weight;a.push({set:o,size:f})}function s(f,d){return d.size-f.size}a.sort(s);const c={};function l(f){return f.set in c}function u(f,d){r[d].x=f.x,r[d].y=f.y,c[d]=!0}u({x:0,y:0},a[0].set);for(let f=1;f<a.length;++f){const d=a[f].set,h=i[d].filter(l);if(o=r[d],h.sort(s),h.length===0)throw"ERROR: missing pairwise overlap information";const p=[];for(let m=0;m<h.length;++m){const b=r[h[m].set],O=BT(o.radius,b.radius,h[m].size);p.push({x:b.x+O,y:b.y}),p.push({x:b.x-O,y:b.y}),p.push({y:b.y+O,x:b.x}),p.push({y:b.y-O,x:b.x});for(let E=m+1;E<h.length;++E){const w=r[h[E].set],_=BT(o.radius,w.radius,h[E].size),S=D9({x:b.x,y:b.y,radius:O},{x:w.x,y:w.y,radius:_});for(let M=0;M<S.length;++M)p.push(S[M])}}let v=1e50,y=p[0];for(let m=0;m<p.length;++m){r[d].x=p[m].x,r[d].y=p[m].y;const b=n(r,t);b<v&&(v=b,y=p[m])}u(y,d)}return r}function FT(t,e){let n=0;function r(i){return i.map(function(o){return t[o]})}for(let i=0;i<e.length;++i){const o=e[i];let a;if(o.sets.length==1)continue;if(o.sets.length==2){const c=t[o.sets[0]],l=t[o.sets[1]];a=I9(c.radius,l.radius,ty(c,l))}else a=L9(r(o.sets));const s=o.hasOwnProperty("weight")?o.weight:1;n+=s*(a-o.size)*(a-o.size)}return n}function Eht(t,e,n){n===null?t.sort(function(i,o){return o.radius-i.radius}):t.sort(n);let r;if(t.length>0){const i=t[0].x,o=t[0].y;for(r=0;r<t.length;++r)t[r].x-=i,t[r].y-=o}if(t.length==2&&distance(t[0],t[1])<Math.abs(t[1].radius-t[0].radius)&&(t[1].x=t[0].x+t[0].radius-t[1].radius-1e-10,t[1].y=t[0].y),t.length>1){const i=Math.atan2(t[1].x,t[1].y)-e;let o,a;const s=Math.cos(i),c=Math.sin(i);for(r=0;r<t.length;++r)o=t[r].x,a=t[r].y,t[r].x=s*o-c*a,t[r].y=c*o+s*a}if(t.length>2){let i=Math.atan2(t[2].x,t[2].y)-e;for(;i<0;)i+=2*Math.PI;for(;i>2*Math.PI;)i-=2*Math.PI;if(i>Math.PI){const o=t[1].y/(1e-10+t[1].x);for(r=0;r<t.length;++r){const a=(t[r].x+o*t[r].y)/(1+o*o);t[r].x=2*a-t[r].x,t[r].y=2*a*o-t[r].y}}}}function Sht(t){t.map(function(a){a.parent=a});function e(a){return a.parent!==a&&(a.parent=e(a.parent)),a.parent}function n(a,s){const c=e(a),l=e(s);c.parent=l}for(let a=0;a<t.length;++a)for(let s=a+1;s<t.length;++s){const c=t[a].radius+t[s].radius;distance(t[a],t[s])+1e-10<c&&n(t[s],t[a])}const r={};let i;for(let a=0;a<t.length;++a)i=e(t[a]).parent.setid,i in r||(r[i]=[]),r[i].push(t[a]);t.map(function(a){delete a.parent});const o=[];for(i in r)r.hasOwnProperty(i)&&o.push(r[i]);return o}function jT(t){const e=function(n){const r=Math.max.apply(null,t.map(function(o){return o[n]+o.radius})),i=Math.min.apply(null,t.map(function(o){return o[n]-o.radius}));return{max:r,min:i}};return{xRange:e("x"),yRange:e("y")}}function syt(t,e,n){e===null&&(e=Math.PI/2);let r=[],i,o;for(o in t)if(t.hasOwnProperty(o)){const d=t[o];r.push({x:d.x,y:d.y,radius:d.radius,setid:o})}const a=Sht(r);for(i=0;i<a.length;++i){Eht(a[i],e,n);const d=jT(a[i]);a[i].size=(d.xRange.max-d.xRange.min)*(d.yRange.max-d.yRange.min),a[i].bounds=d}a.sort(function(d,h){return h.size-d.size}),r=a[0];let s=r.bounds;const c=(s.xRange.max-s.xRange.min)/50;function l(d,h,p){if(!d)return;const v=d.bounds;let y,m,b;h?y=s.xRange.max-v.xRange.min+c:(y=s.xRange.max-v.xRange.max,b=(v.xRange.max-v.xRange.min)/2-(s.xRange.max-s.xRange.min)/2,b<0&&(y+=b)),p?m=s.yRange.max-v.yRange.min+c:(m=s.yRange.max-v.yRange.max,b=(v.yRange.max-v.yRange.min)/2-(s.yRange.max-s.yRange.min)/2,b<0&&(m+=b));for(let O=0;O<d.length;++O)d[O].x+=y,d[O].y+=m,r.push(d[O])}let u=1;for(;u<a.length;)l(a[u],!0,!1),l(a[u+1],!1,!0),l(a[u+2],!0,!0),u+=3,s=jT(r);const f={};for(i=0;i<r.length;++i)f[r[i].setid]=r[i];return f}function Mht(t,e,n,r){const i=[],o=[];for(const v in t)t.hasOwnProperty(v)&&(o.push(v),i.push(t[v]));e-=2*r,n-=2*r;const a=jT(i),s=a.xRange,c=a.yRange;if(s.max==s.min||c.max==c.min)return console.log("not scaling solution: zero size detected"),t;const l=e/(s.max-s.min),u=n/(c.max-c.min),f=Math.min(u,l),d=(e-(s.max-s.min)*f)/2,h=(n-(c.max-c.min)*f)/2,p={};for(let v=0;v<i.length;++v){const y=i[v];p[o[v]]={radius:f*y.radius,x:r+d+(y.x-s.min)*f,y:r+h+(y.y-c.min)*f}}return p}function Pht(t,e,n){const r=[],i=t-n,o=e;return r.push("M",i,o),r.push("A",n,n,0,1,0,i+2*n,o),r.push("A",n,n,0,1,0,i,o),r.join(" ")}function Tht(t){const e={};L9(t,e);const n=e.arcs;if(n.length===0)return"M 0 0";if(n.length==1){const r=n[0].circle;return Pht(r.x,r.y,r.radius)}else{const r=[`
M`,n[0].p2.x,n[0].p2.y];for(let i=0;i<n.length;++i){const o=n[i],a=o.circle.radius,s=o.width>a;r.push(`
A`,a,a,0,s?1:0,1,o.p1.x,o.p1.y)}return r.join(" ")}}const F9=t=>{const{sets:e="sets",size:n="size",as:r=["key","path"],padding:i=0}=t,[o,a]=r;return s=>{const c=s.map(f=>Object.assign(Object.assign({},f),{sets:f[e],size:f[n],[o]:f.sets.join("&")}));c.sort((f,d)=>f.sets.length-d.sets.length);const l=yht(c);let u;return c.map(f=>{const d=f[e],h=({width:p,height:v})=>{u=u||Mht(l,p,v,i);const y=d.map(b=>u[b]);let m=Tht(y);return/[zZ]$/.test(m)||(m+=" Z"),m};return Object.assign(Object.assign({},f),{[a]:h})})}};F9.props={};function Aht(){return{"data.venn":F9,"mark.boxplot":O9,"mark.gauge":M9,"mark.wordCloud":VM,"mark.liquid":N9}}function Cht(){return Object.assign(Object.assign(Object.assign(Object.assign({},zut()),Hdt()),Aht()),Blt())}var s_=function(){return s_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},s_.apply(this,arguments)},kht=hnt(dnt,s_(s_({},Cht()),Znt())),ey=function(){return ey=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},ey.apply(this,arguments)},Nht=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},Rht=["renderer"],j9=["width","height","autoFit","theme","inset","insetLeft","insetRight","insetTop","insetBottom","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","margin","marginTop","marginRight","marginBottom","marginLeft","depth","title","clip","children","type","data","direction"],GT="__transform__",Lht="__skipDelCustomKeys__",wd=function(t,e){return(0,ot.isBoolean)(e)?{type:t,available:e}:ey({type:t},e)},zT={xField:"encode.x",yField:"encode.y",colorField:"encode.color",angleField:"encode.y",keyField:"encode.key",sizeField:"encode.size",shapeField:"encode.shape",seriesField:"encode.series",positionField:"encode.position",textField:"encode.text",valueField:"encode.value",binField:"encode.x",srcField:"encode.src",linkColorField:"encode.linkColor",fontSizeField:"encode.fontSize",radius:"coordinate.outerRadius",innerRadius:"coordinate.innerRadius",startAngle:"coordinate.startAngle",endAngle:"coordinate.endAngle",focusX:"coordinate.focusX",focusY:"coordinate.focusY",distortionX:"coordinate.distortionX",distortionY:"coordinate.distortionY",visual:"coordinate.visual",stack:{target:"transform",value:function(t){return wd("stackY",t)}},normalize:{target:"transform",value:function(t){return wd("normalizeY",t)}},percent:{target:"transform",value:function(t){return wd("normalizeY",t)}},group:{target:"transform",value:function(t){return wd("dodgeX",t)}},sort:{target:"transform",value:function(t){return wd("sortX",t)}},symmetry:{target:"transform",value:function(t){return wd("symmetryY",t)}},diff:{target:"transform",value:function(t){return wd("diffY",t)}},meta:{target:"scale",value:function(t){return t}},label:{target:"labels",value:function(t){return t}},shape:"style.shape",connectNulls:{target:"style",value:function(t){return(0,ot.isBoolean)(t)?{connect:t}:t}}},WT=["xField","yField","seriesField","colorField","keyField","positionField","meta","tooltip","animate","stack","normalize","percent","group","sort","symmetry","diff"],c_=[{key:"annotations",extend_keys:[]},{key:"line",type:"line",extend_keys:WT},{key:"point",type:"point",extend_keys:WT},{key:"area",type:"area",extend_keys:WT}],Iht=[{key:"transform",callback:function(t,e,n){var r;t[e]=t[e]||[];var i=n.available,o=i===void 0?!0:i,a=Nht(n,["available"]);if(o)t[e].push(ey((r={},r[GT]=!0,r),a));else{var s=t[e].indexOf(function(c){return c.type===n.type});s!==-1&&t[e].splice(s,1)}}},{key:"labels",callback:function(t,e,n){var r;if(!n||(0,ot.isArray)(n)){t[e]=n||[];return}n.text||(n.text=t.yField),t[e]=t[e]||[],t[e].push(ey((r={},r[GT]=!0,r),n))}}],YT=[{key:"conversionTag",shape:"ConversionTag"},{key:"axisText",shape:"BidirectionalBarAxisText"}],Dht=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),l_=function(){return l_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},l_.apply(this,arguments)},Bht=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},Fht=function(t){Dht(e,t);function e(n){n===void 0&&(n={});var r=n.style,i=Bht(n,["style"]);return t.call(this,l_({style:l_({fill:"#eee"},r)},i))||this}return e}(Ne),jht=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),u_=function(){return u_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},u_.apply(this,arguments)},Ght=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},G9=function(t){jht(e,t);function e(n){n===void 0&&(n={});var r=n.style,i=Ght(n,["style"]);return t.call(this,u_({style:u_({text:"",fontSize:12,textBaseline:"middle",textAlign:"center",fill:"#000",fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",lineWidth:1},r)},i))||this}return e}(Gr),z9=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},zht=function(t,e){if((0,ot.isArray)(e))return e},af=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return ot.mergeWith.apply(void 0,z9(z9([],t,!1),[zht],!1))},Wht=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),W9=function(t){Wht(e,t);function e(n,r,i){var o=t.call(this,{style:af(i,r)})||this;return o.chart=n,o}return e.prototype.connectedCallback=function(){this.render(this.attributes,this),this.bindEvents(this.attributes,this)},e.prototype.disconnectedCallback=function(){},e.prototype.attributeChangedCallback=function(n){},e.prototype.update=function(n,r){var i;return this.attr(af({},this.attributes,n||{})),(i=this.render)===null||i===void 0?void 0:i.call(this,this.attributes,this,r)},e.prototype.clear=function(){this.removeChildren()},e.prototype.getElementsLayout=function(){var n=this.chart.getContext().canvas,r=n.document.getElementsByClassName("element"),i=[];return r.forEach(function(o){var a=o.getBBox(),s=a.x,c=a.y,l=a.width,u=a.height,f=o.__data__;i.push({bbox:a,x:s,y:c,width:l,height:u,key:f.key,data:f})}),i},e.prototype.bindEvents=function(n,r){},e}(Tt),Yht=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),f_=function(){return f_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},f_.apply(this,arguments)},Hht=function(t){Yht(e,t);function e(n,r){return t.call(this,n,r,{type:e.tag})||this}return e.prototype.getConversionTagLayout=function(){var n=this.direction==="vertical",r=this.getElementsLayout(),i=r[0],o=i.x,a=i.y,s=i.height,c=i.width,l=i.data,u=["items",0,"value"],f=(0,ot.get)(l,u),d=n?r[1].y-a-s:r[1].x-o-c,h=[],p=this.attributes,v=p.size,y=v===void 0?40:v,m=p.arrowSize,b=m===void 0?20:m,O=p.spacing,E=O===void 0?4:O;return r.forEach(function(w,_){if(_>0){var S=w.x,M=w.y,T=w.height,A=w.width,C=w.data,N=w.key,k=(0,ot.get)(C,u),R=y/2;if(n){var I=S+A/2,D=M;h.push({points:[[I+R,D-d+E],[I+R,D-b-E],[I,D-E],[I-R,D-b-E],[I-R,D-d+E]],center:[I,D-d/2-E],width:d,value:[f,k],key:N})}else{var I=S,D=M+T/2;h.push({points:[[S-d+E,D-R],[S-b-E,D-R],[I-E,D],[S-b-E,D+R],[S-d+E,D+R]],center:[I-d/2-E,D],width:d,value:[f,k],key:N})}f=k}}),h},e.prototype.render=function(){this.setDirection(),this.drawConversionTag()},e.prototype.setDirection=function(){var n=this.chart.getCoordinate(),r=(0,ot.get)(n,"options.transformations"),i="horizontal";r.forEach(function(o){o.includes("transpose")&&(i="vertical")}),this.direction=i},e.prototype.drawConversionTag=function(){var n=this,r=this.getConversionTagLayout(),i=this.attributes,o=i.style,a=i.text,s=a.style,c=a.formatter;r.forEach(function(l){var u=l.points,f=l.center,d=l.value,h=l.key,p=d[0],v=d[1],y=f[0],m=f[1],b=new Fht({style:f_({points:u,fill:"#eee"},o),id:"polygon-".concat(h)}),O=new G9({style:f_({x:y,y:m,text:(0,ot.isFunction)(c)?c(p,v):(v/p*100).toFixed(2)+"%"},s),id:"text-".concat(h)});n.appendChild(b),n.appendChild(O)})},e.prototype.update=function(){var n=this,r=this.getConversionTagLayout();r.forEach(function(i){var o=i.points,a=i.center,s=i.key,c=a[0],l=a[1],u=n.getElementById("polygon-".concat(s)),f=n.getElementById("text-".concat(s));u.setAttribute("points",o),f.setAttribute("x",c),f.setAttribute("y",l)})},e.tag="ConversionTag",e}(W9),HT=32,Y9=16,H9=48,Uht=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ny=function(){return ny=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},ny.apply(this,arguments)},Vht=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},Xht=function(t){Uht(e,t);function e(n,r){return t.call(this,n,r,{type:e.tag})||this}return e.prototype.render=function(){this.drawText()},e.prototype.getBidirectionalBarAxisTextLayout=function(){var n=this.attributes.layout,r=n==="vertical",i=this.getElementsLayout(),o=r?(0,ot.uniqBy)(i,"x"):(0,ot.uniqBy)(i,"y"),a=["title"],s=[],c=this.chart.getContext().views,l=(0,ot.get)(c,[0,"layout"]),u=l.width,f=l.height;return o.forEach(function(d){var h=d.x,p=d.y,v=d.height,y=d.width,m=d.data,b=d.key,O=(0,ot.get)(m,a);r?s.push({x:h+y/2,y:f,text:O,key:b}):s.push({x:u,y:p+v/2,text:O,key:b})}),(0,ot.uniqBy)(s,"text").length!==s.length&&(s=Object.values((0,ot.groupBy)(s,"text")).map(function(d){var h,p=d.reduce(function(v,y){return v+(r?y.x:y.y)},0);return ny(ny({},d[0]),(h={},h[r?"x":"y"]=p/d.length,h))})),s},e.prototype.transformLabelStyle=function(n){var r={},i=/^label[A-Z]/;return Object.keys(n).forEach(function(o){i.test(o)&&(r[o.replace("label","").replace(/^[A-Z]/,function(a){return a.toLowerCase()})]=n[o])}),r},e.prototype.drawText=function(){var n=this,r=this.getBidirectionalBarAxisTextLayout(),i=this.attributes,o=i.layout,a=i.labelFormatter,s=Vht(i,["layout","labelFormatter"]);r.forEach(function(c){var l=c.x,u=c.y,f=c.text,d=c.key,h=new G9({style:ny({x:l,y:u,text:(0,ot.isFunction)(a)?a(f):f,wordWrap:!0,wordWrapWidth:o==="horizontal"?HT*2:120,maxLines:2,textOverflow:"ellipsis"},n.transformLabelStyle(s)),id:"text-".concat(d)});n.appendChild(h)})},e.prototype.update=function(){var n=this,r=this.getBidirectionalBarAxisTextLayout();r.forEach(function(i){var o=i.x,a=i.y,s=i.key,c=n.getElementById("text-".concat(s));c.setAttribute("x",o),c.setAttribute("y",a)})},e.tag="BidirectionalBarAxisText",e}(W9),$ht={ConversionTag:Hht,BidirectionalBarAxisText:Xht},qht=function(){function t(e,n){this.container=new Map,this.chart=e,this.config=n,this.init()}return t.prototype.init=function(){var e=this;YT.forEach(function(n){var r,i=n.key,o=n.shape,a=e.config[i];if(a){var s=new $ht[o](e.chart,a),c=e.chart.getContext().canvas;c.appendChild(s),e.container.set(i,s)}else(r=e.container.get(i))===null||r===void 0||r.clear()})},t.prototype.update=function(){var e=this;this.container.size&&YT.forEach(function(n){var r=n.key,i=e.container.get(r);i==null||i.update()})},t}(),Kht=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Lp=function(){return Lp=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Lp.apply(this,arguments)},U9="data-chart-source-type",Fn=function(t){Kht(e,t);function e(n,r){var i=t.call(this)||this;return i.container=typeof n=="string"?document.getElementById(n):n,i.options=i.mergeOption(r),i.createG2(),i.bindEvents(),i}return e.prototype.getChartOptions=function(){return Lp(Lp({},(0,ot.pick)(this.options,Rht)),{container:this.container})},e.prototype.getSpecOptions=function(){return this.type==="base"||this[Lht]?Lp(Lp({},this.options),this.getChartOptions()):this.options},e.prototype.createG2=function(){if(!this.container)throw Error("The container is not initialized!");this.chart=new kht(this.getChartOptions()),this.container.setAttribute(U9,"Ant Design Charts")},e.prototype.bindEvents=function(){var n=this;this.chart&&this.chart.on("*",function(r){r!=null&&r.type&&n.emit(r.type,r)})},e.prototype.getBaseOptions=function(){return{type:"view",autoFit:!0}},e.prototype.getDefaultOptions=function(){},e.prototype.render=function(){var n=this;this.type!=="base"&&this.execAdaptor(),this.chart.options(this.getSpecOptions()),this.chart.render().then(function(){n.annotation=new qht(n.chart,n.options)}),this.bindSizeSensor()},e.prototype.update=function(n){this.options=this.mergeOption(n)},e.prototype.mergeOption=function(n){return af({},this.getBaseOptions(),this.getDefaultOptions(),n)},e.prototype.changeData=function(n){this.chart.changeData(n)},e.prototype.changeSize=function(n,r){this.chart.changeSize(n,r)},e.prototype.destroy=function(){this.chart.destroy(),this.off(),this.container.removeAttribute(U9)},e.prototype.execAdaptor=function(){var n=this.getSchemaAdaptor();n({chart:this.chart,options:this.options})},e.prototype.triggerResize=function(){this.chart.forceFit()},e.prototype.bindSizeSensor=function(){var n=this,r=this.options.autoFit,i=r===void 0?!0:r;i&&this.chart.on(Jn.AFTER_CHANGE_SIZE,function(){n.annotation.update()})},e}(hs),Zht=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Jht=function(t){Zht(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="base",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"line"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return function(n){return n}},e}(Fn),Qht=function(t){var e=t.options,n=e.children,r=n===void 0?[]:n;return r.forEach(function(i){Object.keys(i).forEach(function(o){(0,ot.isArray)(i[o])&&o!=="data"&&(i[o]=i[o].filter(function(a){return!a[GT]}))})}),e},V9=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},tpt=function(t){var e=t.children,n=e===void 0?[]:e,r=Object.keys(zT).concat(c_.map(function(i){return i.key}));return r.forEach(function(i){delete t[i]}),n.forEach(function(i){Object.keys(i).forEach(function(o){r.includes(o)&&delete i[o]})}),Object.keys(t).forEach(function(i){V9(V9([],j9,!0),YT.map(function(o){return o.key}),!0).includes(i)||delete t[i]}),t},tr=function(t){var e=Qht(t),n=e.children,r=n===void 0?[]:n,i=(0,ot.omit)(e,[].concat(j9,c_.map(function(l){return l.key}))),o=function(l){var u;return(u=Iht.find(function(f){return f.key===l}))===null||u===void 0?void 0:u.callback},a=function(l,u,f){var d=o(u);d?d(l,u,f):l[u]=af({},l[u],f)},s=function(l){Object.keys(l).forEach(function(u){if(l[u]){var f=c_.find(function(p){return p.key===u});if(f){var d=f.type,h=f.extend_keys;d?r.push(c(af({},(0,ot.pick)(l,h),{type:d},l[u]))):(0,ot.isArray)(l[u])&&l[u].forEach(function(p){r.push(c(p))})}}})},c=function(l){return s(l),Object.keys(zT).forEach(function(u){var f=zT[u];if(!(0,ot.isUndefined)(l[u]))if((0,ot.isObject)(f)){var d=f.value,h=f.target,p=d(l[u]);a(l,h,p)}else(0,ot.set)(l,f,l[u])}),l};return r.forEach(function(l){var u=af({},i,l);c(af(l,u))}),s(e),tpt(e),t},UT=function(){return UT=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},UT.apply(this,arguments)};function ept(t){var e=t.options,n=e.stack,r=e.tooltip,i=e.xField;if(!n)return t;var o=c_.map(function(s){return s.type}).filter(function(s){return!!s}),a=!1;return o.forEach(function(s){e[s]&&(a=!0,(0,ot.set)(e,[s,"stack"],UT({y1:"y"},typeof n=="object"?n:{})))}),a&&!(0,ot.isBoolean)(r)&&!r&&(0,ot.set)(e,"tooltip",{title:i,items:[{channel:"y"}]}),t}function fi(t){return(0,ot.flow)(ept)(t)}function npt(t){return(0,ot.flow)(fi,tr)(t)}var rpt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ipt=function(t){rpt(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="area",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"area"}],scale:{y:{nice:!0}},axis:{y:{title:!1},x:{title:!1}},interaction:{tooltip:{shared:!0}}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return npt},e}(Fn),Ip=function(){return Ip=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Ip.apply(this,arguments)};function X9(t){var e=function(n){var r=n.options;(0,ot.get)(r,"children.length")>1&&(0,ot.set)(r,"children",[{type:"interval"}]);var i=r.scale,o=r.markBackground,a=r.data,s=r.children,c=r.yField,l=(0,ot.get)(i,"y.domain",[]);if(o&&l.length&&(0,ot.isArray)(a)){var u="domainMax",f=a.map(function(d){var h;return Ip(Ip({originData:Ip({},d)},(0,ot.omit)(d,c)),(h={},h[u]=l[l.length-1],h))});s.unshift(Ip({type:"interval",data:f,yField:u,tooltip:!1,style:{fill:"#eee"},label:!1},o))}return n};return(0,ot.flow)(e,fi,tr)(t)}var opt=function(){var t=function(e,n){return function(r){var i=e.fill,o=i===void 0?"#2888FF":i,a=e.stroke,s=e.fillOpacity,c=s===void 0?1:s,l=e.strokeOpacity,u=l===void 0?.2:l,f=e.pitch,d=f===void 0?8:f,h=r[0],p=r[1],v=r[2],y=r[3],m=(p[1]-h[1])/2,b=n.document,O=b.createElement("g",{}),E=b.createElement("polygon",{style:{points:[h,[h[0]-d,h[1]+m],[v[0]-d,h[1]+m],y],fill:o,fillOpacity:c,stroke:a,strokeOpacity:u,inset:30}}),w=b.createElement("polygon",{style:{points:[[h[0]-d,h[1]+m],p,v,[v[0]-d,h[1]+m]],fill:o,fillOpacity:c,stroke:a,strokeOpacity:u}}),_=b.createElement("polygon",{style:{points:[h,[h[0]-d,h[1]+m],p,[h[0]+d,h[1]+m]],fill:o,fillOpacity:c-.2}});return O.appendChild(E),O.appendChild(w),O.appendChild(_),O}};rk("shape.interval.bar25D",t)},apt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();opt();var spt=function(t){apt(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="Bar",n}return e.getDefaultOptions=function(){return{type:"view",coordinate:{transform:[{type:"transpose"}]},children:[{type:"interval"}],scale:{y:{nice:!0}},axis:{y:{title:!1},x:{title:!1}},interaction:{tooltip:{shared:!0},elementHighlight:{background:!0}}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return X9},e}(Fn),cpt=function(){var t=function(e,n){return function(r){var i=e.fill,o=i===void 0?"#2888FF":i,a=e.stroke,s=e.fillOpacity,c=s===void 0?1:s,l=e.strokeOpacity,u=l===void 0?.2:l,f=e.pitch,d=f===void 0?8:f,h=r[1][0]-r[0][0],p=h/2+r[0][0],v=n.document,y=v.createElement("g",{}),m=v.createElement("polygon",{style:{points:[[r[0][0],r[0][1]],[p,r[1][1]+d],[p,r[3][1]+d],[r[3][0],r[3][1]]],fill:o,fillOpacity:c,stroke:a,strokeOpacity:u,inset:30}}),b=v.createElement("polygon",{style:{points:[[p,r[1][1]+d],[r[1][0],r[1][1]],[r[2][0],r[2][1]],[p,r[2][1]+d]],fill:o,fillOpacity:c,stroke:a,strokeOpacity:u}}),O=v.createElement("polygon",{style:{points:[[r[0][0],r[0][1]],[p,r[1][1]-d],[r[1][0],r[1][1]],[p,r[1][1]+d]],fill:o,fillOpacity:c-.2}});return y.appendChild(b),y.appendChild(m),y.appendChild(O),y}};rk("shape.interval.column25D",t)},lpt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();cpt();var upt=function(t){lpt(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="column",n}return e.getDefaultOptions=function(){return{type:"view",scale:{y:{nice:!0}},interaction:{tooltip:{shared:!0},elementHighlight:{background:!0}},axis:{y:{title:!1},x:{title:!1}},children:[{type:"interval"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return X9},e}(Fn);function fpt(t){var e=function(r){var i=r.options,o=i.children,a=o===void 0?[]:o,s=i.legend;return s&&a.forEach(function(c){if(!(0,ot.get)(c,"colorField")){var l=(0,ot.get)(c,"yField");(0,ot.set)(c,"colorField",function(){return l})}}),r},n=function(r){var i=r.options,o=i.annotations,a=o===void 0?[]:o,s=i.children,c=s===void 0?[]:s,l=i.scale,u=!1;return(0,ot.get)(l,"y.key")||c.forEach(function(f,d){if(!(0,ot.get)(f,"scale.y.key")){var h="child".concat(d,"Scale");(0,ot.set)(f,"scale.y.key",h);var p=f.annotations,v=p===void 0?[]:p;v.length>0&&((0,ot.set)(f,"scale.y.independent",!1),v.forEach(function(y){(0,ot.set)(y,"scale.y.key",h)})),!u&&a.length>0&&(0,ot.get)(f,"scale.y.independent")===void 0&&(u=!0,(0,ot.set)(f,"scale.y.independent",!1),a.forEach(function(y){(0,ot.set)(y,"scale.y.key",h)}))}}),r};return(0,ot.flow)(e,n,fi,tr)(t)}var dpt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),$9=function(t){dpt(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="DualAxes",n}return e.getDefaultOptions=function(){return{type:"view",axis:{y:{title:!1,tick:!1},x:{title:!1}},scale:{y:{independent:!0,nice:!0}}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return fpt},e}(Fn);function hpt(t){var e=function(o){var a=o.options,s=a.xField,c=a.colorField;return c||(0,ot.set)(a,"colorField",s),o},n=function(o){var a=o.options,s=a.compareField,c=a.transform,l=a.isTransposed,u=l===void 0?!0:l,f=a.coordinate;return c||(s?(0,ot.set)(a,"transform",[]):(0,ot.set)(a,"transform",[{type:"symmetryY"}])),!f&&u&&(0,ot.set)(a,"coordinate",{transform:[{type:"transpose"}]}),o},r=function(o){var a=o.options,s=a.compareField,c=a.seriesField,l=a.data,u=a.children,f=a.yField,d=a.isTransposed,h=d===void 0?!0:d;if(s||c){var p=Object.values((0,ot.groupBy)(l,function(v){return v[s||c]}));u[0].data=p[0],u.push({type:"interval",data:p[1],yField:function(v){return-v[f]}}),delete a.compareField,delete a.data}return c&&((0,ot.set)(a,"type","spaceFlex"),(0,ot.set)(a,"ratio",[1,1]),(0,ot.set)(a,"direction",h?"row":"col"),delete a.seriesField),o},i=function(o){var a=o.options,s=a.tooltip,c=a.xField,l=a.yField;return s||(0,ot.set)(a,"tooltip",{title:!1,items:[function(u){return{name:u[c],value:u[l]}}]}),o};return(0,ot.flow)(e,n,r,i,fi,tr)(t)}var ppt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),vpt=function(t){ppt(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="column",n}return e.getDefaultOptions=function(){return{type:"view",scale:{x:{padding:0}},animate:{enter:{type:"fadeIn"}},axis:!1,shapeField:"funnel",label:{position:"inside",transform:[{type:"contrastReverse"}]},children:[{type:"interval"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return hpt},e}(Fn);function gpt(t){return(0,ot.flow)(fi,tr)(t)}var ypt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),mpt=function(t){ypt(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="line",n}return e.getDefaultOptions=function(){return{type:"view",scale:{y:{nice:!0}},interaction:{tooltip:{shared:!0}},axis:{y:{title:!1},x:{title:!1}},children:[{type:"line"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return gpt},e}(Fn);function ry(t){switch(typeof t){case"function":return t;case"string":return function(e){return(0,ot.get)(e,[t])};default:return function(){return t}}}var zs=function(){return zs=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},zs.apply(this,arguments)};function xpt(t){var e=function(n){var r=n.options,i=r.angleField,o=r.data,a=r.label,s=r.tooltip,c=r.colorField,l=ry(c);if((0,ot.isArray)(o)&&o.length>0){var u=o.reduce(function(d,h){return d+h[i]},0);if(u===0){var f=o.map(function(d){var h;return zs(zs({},d),(h={},h[i]=1,h))});(0,ot.set)(r,"data",f),a&&(0,ot.set)(r,"label",zs(zs({},a),{formatter:function(){return 0}})),s!==!1&&((0,ot.isFunction)(s)?(0,ot.set)(r,"tooltip",function(d,h,p){var v;return s(zs(zs({},d),(v={},v[i]=0,v)),h,p.map(function(y){var m;return zs(zs({},y),(m={},m[i]=0,m))}))}):(0,ot.set)(r,"tooltip",zs(zs({},s),{items:[function(d,h,p){return{name:l(d,h,p),value:0}}]})))}}return n};return(0,ot.flow)(e,tr)(t)}var bpt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),_pt=function(t){bpt(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="pie",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"interval"}],coordinate:{type:"theta"},transform:[{type:"stackY",reverse:!0}],animate:{enter:{type:"waveIn"}}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return xpt},e}(Fn);function wpt(t){return(0,ot.flow)(fi,tr)(t)}var Opt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ept=function(t){Opt(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="scatter",n}return e.getDefaultOptions=function(){return{axis:{y:{title:!1},x:{title:!1}},legend:{size:!1},children:[{type:"point"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return wpt},e}(Fn);function Spt(t){var e=function(n){return(0,ot.set)(n,"options.coordinate",{type:(0,ot.get)(n,"options.coordinateType","polar")}),n};return(0,ot.flow)(e,tr)(t)}var Mpt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ppt=function(t){Mpt(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="radar",n}return e.getDefaultOptions=function(){return{axis:{x:{grid:!0,line:!0},y:{zIndex:1,title:!1,line:!0,nice:!0}},meta:{x:{padding:.5,align:0}},interaction:{tooltip:{style:{crosshairsLineDash:[4,4]}}},children:[{type:"line"}],coordinateType:"polar"}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Spt},e}(Fn),Jl=function(){return Jl=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Jl.apply(this,arguments)},Tpt="__stock-range__",Apt="trend",Cpt="up",kpt="down";function Npt(t){var e=function(r){var i=r.options,o=i.data,a=i.yField;return r.options.data=(0,ot.map)(o,function(s){var c=s&&Jl({},s);if(Array.isArray(a)&&c){var l=a[0],u=a[1],f=a[2],d=a[3];c[Apt]=c[l]<=c[u]?Cpt:kpt,c[Tpt]=[c[l],c[u],c[f],c[d]]}return c}),r},n=function(r){var i=r.options,o=i.xField,a=i.yField,s=i.fallingFill,c=i.risingFill,l=a[0],u=a[1],f=a[2],d=a[3],h=ry(o);return r.options.children=(0,ot.map)(r.options.children,function(p,v){var y=v===0;return Jl(Jl({},p),{tooltip:{title:function(m,b,O){var E=h(m,b,O);return E instanceof Date?E.toLocaleString():E},items:[{field:f},{field:d},{field:l},{field:u}]},encode:Jl(Jl({},p.encode||{}),{y:y?[f,d]:[l,u],color:function(m){return Math.sign(m[u]-m[l])}}),style:Jl(Jl({},p.style||{}),{lineWidth:y?1:10})})}),delete i.yField,r.options.legend={color:!1},s&&(0,ot.set)(r,"options.scale.color.range[0]",s),c&&(0,ot.set)(r,"options.scale.color.range[2]",c),r};return(0,ot.flow)(e,n,tr)(t)}var Rpt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Lpt=["#26a69a","#999999","#ef5350"],Ipt=function(t){Rpt(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="stock",n}return e.getDefaultOptions=function(){return{type:"view",scale:{color:{domain:[-1,0,1],range:Lpt},y:{nice:!0}},children:[{type:"link"},{type:"link"}],axis:{x:{title:!1,grid:!1},y:{title:!1,grid:!0,gridLineDash:null}},animate:{enter:{type:"scaleInY"}},interaction:{tooltip:{shared:!0,marker:!1,groupName:!1,crosshairs:!0}}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Npt},e}(Fn);function Dpt(t){return(0,ot.flow)(fi,tr)(t)}var Bpt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Fpt=function(t){Bpt(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="TinyLine",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"line",axis:!1}],animate:{enter:{type:"growInX",duration:500}},padding:0,margin:0,tooltip:!1}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Dpt},e}(Fn);function jpt(t){return(0,ot.flow)(fi,tr)(t)}var Gpt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),zpt=function(t){Gpt(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="TinyArea",n}return e.getDefaultOptions=function(){return{type:"view",animate:{enter:{type:"growInX",duration:500}},children:[{type:"area",axis:!1}],padding:0,margin:0,tooltip:!1}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return jpt},e}(Fn);function Wpt(t){return(0,ot.flow)(fi,tr)(t)}var Ypt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Hpt=function(t){Ypt(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="TinyColumn",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"interval",axis:!1}],padding:0,margin:0,tooltip:!1}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Wpt},e}(Fn),VT=function(){return VT=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},VT.apply(this,arguments)};function Upt(t){var e=function(n){var r=n.options,i=r.percent,o=r.color,a=o===void 0?[]:o;if(!i)return n;var s={scale:{color:{range:a.length?a:[]}},data:[1,i]};return Object.assign(r,VT({},s)),n};return(0,ot.flow)(e,fi,tr)(t)}var Vpt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Xpt=function(t){Vpt(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="TinyProgress",n}return e.getDefaultOptions=function(){return{type:"view",data:[],margin:0,padding:0,tooltip:!1,children:[{interaction:{tooltip:!1},coordinate:{transform:[{type:"transpose"}]},type:"interval",axis:!1,legend:!1,encode:{y:function(n){return n},color:function(n,r){return r}}}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Upt},e}(Fn),XT=function(){return XT=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},XT.apply(this,arguments)};function $pt(t){var e=function(r){var i=r.options,o=i.radius,a=o===void 0?.8:o;return(0,ot.set)(r,"options.coordinate.innerRadius",a),r},n=function(r){var i=r.options,o=i.percent,a=i.color,s=a===void 0?[]:a;if(!o)return r;var c={scale:{color:{range:s.length?s:[]}},data:[1,o]};return Object.assign(i,XT({},c)),r};return(0,ot.flow)(e,n,fi,tr)(t)}var qpt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Kpt=function(t){qpt(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="TinyRing",n}return e.getDefaultOptions=function(){return{type:"view",data:[],margin:0,padding:0,coordinate:{type:"theta"},animate:{enter:{type:"waveIn"}},interaction:{tooltip:!1},tooltip:!1,children:[{type:"interval",axis:!1,legend:!1,encode:{y:function(n){return n},color:function(n,r){return r}}}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return $pt},e}(Fn);function Zpt(t){return(0,ot.flow)(tr)(t)}var Jpt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Qpt=function(t){Jpt(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="rose",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"interval"}],coordinate:{type:"polar"},animate:{enter:{type:"waveIn"}}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Zpt},e}(Fn),$T="__start__",Dp="__end__",qT="__waterfall_value__",KT=function(){return KT=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},KT.apply(this,arguments)},tvt=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))};function evt(t){var e=function(r){var i=r.options,o=i.data,a=o===void 0?[]:o,s=i.yField;return a.length&&(a.reduce(function(c,l,u){var f,d=ry(s),h=d(l,u,a);if(u===0||l.isTotal)l[$T]=0,l[Dp]=h,l[qT]=h;else{var p=(f=c[Dp])!==null&&f!==void 0?f:d(c,u,a);l[$T]=p,l[Dp]=p+h,l[qT]=c[Dp]}return l},[]),Object.assign(i,{yField:[$T,Dp]})),r},n=function(r){var i=r.options,o=i.data,a=o===void 0?[]:o,s=i.xField,c=i.children,l=i.linkStyle,u=tvt([],a,!0);return u.reduce(function(f,d,h){return h>0&&(d.x1=f[s],d.x2=d[s],d.y1=f[Dp]),d},[]),u.shift(),c.push({type:"link",xField:["x1","x2"],yField:"y1",zIndex:-1,data:u,style:KT({stroke:"#697474"},l),label:!1,tooltip:!1}),r};return(0,ot.flow)(e,n,fi,tr)(t)}var nvt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),rvt=function(t){nvt(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="waterfall",n}return e.getDefaultOptions=function(){return{type:"view",legend:null,tooltip:{field:qT,valueFormatter:"~s",name:"value"},axis:{y:{title:null,labelFormatter:"~s"},x:{title:null}},children:[{type:"interval",interaction:{elementHighlight:{background:!0}}}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return evt},e}(Fn);function ivt(t){var e=function(n){var r=n.options,i=r.data,o=r.binNumber,a=r.binWidth,s=r.children,c=r.channel,l=c===void 0?"count":c,u=(0,ot.get)(s,"[0].transform[0]",{});return(0,ot.isNumber)(a)?((0,ot.assign)(u,{thresholds:(0,ot.ceil)((0,ot.divide)(i.length,a)),y:l}),n):((0,ot.isNumber)(o)&&(0,ot.assign)(u,{thresholds:o,y:l}),n)};return(0,ot.flow)(e,fi,tr)(t)}var ovt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),avt=function(t){ovt(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="Histogram",n}return e.getDefaultOptions=function(){return{type:"view",autoFit:!0,axis:{y:{title:!1},x:{title:!1}},children:[{type:"rect",transform:[{type:"binX",y:"count"}],interaction:{elementHighlight:{background:!0}}}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return ivt},e}(Fn);function svt(t){var e=function(r){var i=r.options,o=i.tooltip,a=o===void 0?{}:o,s=i.colorField,c=i.sizeField;return a&&!a.field&&(a.field=s||c),r},n=function(r){var i=r.options,o=i.mark,a=i.children;return o&&(a[0].type=o),r};return(0,ot.flow)(e,n,fi,tr)(t)}var cvt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),lvt=function(t){cvt(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="heatmap",n}return e.getDefaultOptions=function(){return{type:"view",legend:null,tooltip:{valueFormatter:"~s"},axis:{y:{title:null,grid:!0},x:{title:null,grid:!0}},children:[{type:"point",interaction:{elementHighlight:{background:!0}}}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return svt},e}(Fn);function uvt(t){var e=function(n){var r=n.options.boxType,i=r===void 0?"box":r;return n.options.children[0].type=i,n};return(0,ot.flow)(e,fi,tr)(t)}var fvt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),dvt=function(t){fvt(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="box",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"box"}],axis:{y:{title:!1},x:{title:!1}},tooltip:{items:[{name:"min",channel:"y"},{name:"q1",channel:"y1"},{name:"q2",channel:"y2"},{name:"q3",channel:"y3"},{name:"max",channel:"y4"}]}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return uvt},e}(Fn);function hvt(t){var e=function(n){var r=n.options,i=r.data,o=[{type:"custom",callback:function(s){return{links:s}}}];if((0,ot.isArray)(i))i.length>0?(0,ot.set)(r,"data",{value:i,transform:o}):delete r.children;else if((0,ot.get)(i,"type")==="fetch"&&(0,ot.get)(i,"value")){var a=(0,ot.get)(i,"transform");(0,ot.isArray)(a)?(0,ot.set)(i,"transform",a.concat(o)):(0,ot.set)(i,"transform",o)}return n};return(0,ot.flow)(e,fi,tr)(t)}var pvt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),vvt=function(t){pvt(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="sankey",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"sankey"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return hvt},e}(Fn);function gvt(t){var e=t.options.layout,n=e===void 0?"horizontal":e;return t.options.coordinate.transform=n!=="horizontal"?void 0:[{type:"transpose"}],t}function yvt(t){gvt(t);var e=t.options.layout,n=e===void 0?"horizontal":e;return t.options.children.forEach(function(r){var i;!((i=r==null?void 0:r.coordinate)===null||i===void 0)&&i.transform&&(r.coordinate.transform=n!=="horizontal"?void 0:[{type:"transpose"}])}),t}var vc=function(){return vc=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},vc.apply(this,arguments)},d_=["#f0efff","#5B8FF9","#3D76DD"];function ZT(t,e,n,r){r===void 0&&(r=!0);var i=0,o=!1,a=(0,ot.map)(t,function(s){var c,l,u=(0,ot.get)(s,[e]);if((0,ot.isNil)(u))return[];if((0,ot.isString)(u)){var f=Number(u);return isNaN(f)?[]:(c={},c[n]=s[n],c[e]=f,c)}return(0,ot.isArray)(u)?(o=!0,i=Math.max(i,u.length),(0,ot.map)(r?u.sort(function(d,h){return h-d}):u,function(d,h){var p;return p={},p[n]=s[n],p[e]=d,p.index=h,p})):(i=Math.max(1,i),l={},l[n]=s[n],l[e]=u,l)}).flat();return o?[a.map(function(s){return vc({index:0},s)}),i]:[a,i]}function JT(t,e){return new Array(t).fill("").map(function(n,r){return(0,ot.isArray)(e)?e[r%e.length]:e})}function mvt(t){var e=function(i){var o=i.options,a=o.color,s=o.rangeField,c=s===void 0?"ranges":s,l=o.measureField,u=l===void 0?"measures":l,f=o.targetField,d=f===void 0?"targets":f,h=o.xField,p=h===void 0?"title":h,v=o.mapField,y=o.data,m=ZT(y,c,p),b=m[0],O=m[1],E=ZT(y,u,p,!1),w=E[0],_=E[1],S=ZT(y,d,p,!1),M=S[0],T=S[1],A=(0,ot.get)(a,[c],d_[0]),C=(0,ot.get)(a,[u],d_[1]),N=(0,ot.get)(a,[d],d_[2]),k=[JT(O,A),JT(_,C),JT(T,N)].flat();return i.options.children=(0,ot.map)(i.options.children,function(R,I){var D=[b,w,M][I],B=[c,u,d][I];return vc(vc({},R),{data:D,encode:vc(vc({},R.encode||{}),{x:p,y:B,color:function(F){var G=F.index,X=(0,ot.isNumber)(G)?"".concat(B,"_").concat(G):B;return v?(0,ot.get)(v,[B,G],X):X}}),style:vc(vc({},R.style||{}),{zIndex:function(F){return-F[B]}}),labels:I!==0?(0,ot.map)(R.labels,function(F){return vc(vc({},F),{text:B})}):void 0})}),i.options.scale.color.range=k,i.options.legend.color.itemMarker=function(R){return v&&(0,ot.includes)(v==null?void 0:v[d],R)||(R==null?void 0:R.replace(/\_\d$/,""))===d?"line":"square"},i},n=function(i){var o=i.options.layout,a=o===void 0?"horizontal":o;return a!=="horizontal"&&(0,ot.set)(i,"options.children[2].shapeField","hyphen"),i},r=function(i){var o=i.options,a=o.range,s=a===void 0?{}:a,c=o.measure,l=c===void 0?{}:c,u=o.target,f=u===void 0?{}:u,d=o.children;return i.options.children=[s,l,f].map(function(h,p){return af(d[p],h)}),i};return(0,ot.flow)(e,n,r,yvt,tr)(t)}var xvt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),bvt=function(t){xvt(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="bullet",n}return e.getDefaultOptions=function(){return{type:"view",scale:{color:{range:d_}},legend:{color:{itemMarker:function(n){return n==="target"?"line":"square"}}},axis:{y:{title:!1},x:{title:!1}},children:[{type:"interval",style:{maxWidth:30},axis:{y:{grid:!0,gridLineWidth:2}}},{type:"interval",style:{maxWidth:20},transform:[{type:"stackY"}]},{type:"point",encode:{size:8,shape:"line"}}],interaction:{tooltip:{shared:!0}},coordinate:{transform:[{type:"transpose"}]}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return mvt},e}(Fn);function _vt(t){var e=function(n){var r=n.options.data;return n.options.data={value:r},n};return(0,ot.flow)(e,fi,tr)(t)}var wvt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ovt=function(t){wvt(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="Gauge",n}return e.getDefaultOptions=function(){return{type:"view",legend:!1,children:[{type:"gauge"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return _vt},e}(Fn);function Evt(t){var e=function(n){var r=n.options.percent;return(0,ot.isNumber)(r)&&((0,ot.set)(n,"options.data",r),delete n.options.percent),n};return(0,ot.flow)(e,fi,tr)(t)}var Svt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Mvt=function(t){Svt(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="Liquid",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"liquid"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Evt},e}(Fn);function Pvt(t){return(0,ot.flow)(fi,tr)(t)}var Tvt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Avt=function(t){Tvt(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="WordCloud",n}return e.getDefaultOptions=function(){return{type:"view",legend:!1,children:[{type:"wordCloud"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Pvt},e}(Fn);function Cvt(t){var e=function(n){var r=n.options,i=r.data;return i&&(0,ot.set)(r,"data",{value:i}),n};return(0,ot.flow)(e,fi,tr)(t)}var kvt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Nvt=function(t){kvt(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="treemap",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"treemap"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Cvt},e}(Fn),Od=function(){return Od=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Od.apply(this,arguments)};function Rvt(t){var e=function(i){var o=i.options,a=o.startAngle,s=o.maxAngle,c=o.coordinate,l=(0,ot.isNumber)(a)?a/(2*Math.PI)*360:-90,u=(0,ot.isNumber)(s)?(Number(s)+l)/180*Math.PI:Math.PI;return(0,ot.set)(i,["options","coordinate"],Od(Od({},c),{endAngle:u,startAngle:a!=null?a:-Math.PI/2})),i},n=function(i){var o=i.options,a=o.tooltip,s=o.xField,c=o.yField,l=ry(s),u=ry(c);return a||(0,ot.set)(o,"tooltip",{title:!1,items:[function(f,d,h){return{name:l(f,d,h),value:u(f,d,h)}}]}),i},r=function(i){var o=i.options,a=o.markBackground,s=o.children,c=o.scale,l=o.coordinate,u=o.xField,f=(0,ot.get)(c,"y.domain",[]);return a&&s.unshift(Od({type:"interval",xField:u,yField:f[f.length-1],colorField:a.color,scale:{color:{type:"identity"}},style:{fillOpacity:a.opacity,fill:a.color?void 0:"#e0e4ee"},coordinate:Od(Od({},l),{startAngle:-Math.PI/2,endAngle:1.5*Math.PI}),animate:!1},a)),i};return(0,ot.flow)(e,n,r,fi,tr)(t)}var Lvt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ivt=function(t){Lvt(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="radial",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"interval"}],coordinate:{type:"radial",innerRadius:.1,outerRadius:1,endAngle:Math.PI},animate:{enter:{type:"waveIn",duration:800}},axis:{y:{nice:!0,labelAutoHide:!0,labelAutoRotate:!1},x:{title:!1,nice:!0,labelAutoRotate:!1,labelAutoHide:{type:"equidistance",cfg:{minGap:6}}}}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Rvt},e}(Fn);function Dvt(t){return(0,ot.flow)(tr)(t)}var Bvt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Fvt=function(t){Bvt(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="CirclePacking",n}return e.getDefaultOptions=function(){return{legend:!1,type:"view",children:[{type:"pack"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Dvt},e}(Fn),h_=function(){return h_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},h_.apply(this,arguments)};function jvt(t){var e=function(n){var r=n.options,i=r.xField,o=r.yField,a=r.seriesField,s=r.children,c=s==null?void 0:s.map(function(l){return h_(h_({},l),{xField:i,yField:o,seriesField:a,colorField:a,data:l.type==="density"?{transform:[{type:"kde",field:o,groupBy:[i,a]}]}:l.data})}).filter(function(l){return r.violinType!=="density"||l.type==="density"});return(0,ot.set)(r,"children",c),r.violinType==="polar"&&(0,ot.set)(r,"coordinate",{type:"polar"}),(0,ot.set)(r,"violinType",void 0),n};return(0,ot.flow)(e,fi,tr)(t)}var Gvt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),zvt=function(t){Gvt(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="violin",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"density",sizeField:"size",tooltip:!1},{type:"boxplot",shapeField:"violin",style:{opacity:.5,point:!1}}],animate:{enter:{type:"fadeIn"}}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return jvt},e}(Fn),iy=function(){return iy=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},iy.apply(this,arguments)},Wvt=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))};function Yvt(t){var e=function(o){var a=o.options,s=a.yField,c=a.children;return c.forEach(function(l,u){(0,ot.set)(l,"yField",s[u])}),o},n=function(o){var a=o.options,s=a.yField,c=a.children,l=a.data;if((0,ot.isPlainObject)(l))return o;var u=(0,ot.isArray)((0,ot.get)(l,[0]))?l:[l,l];return c.forEach(function(f,d){(0,ot.set)(f,"data",Wvt([],u[d].map(function(h){return iy({groupKey:s[d]},h)}),!0))}),o},r=function(o){var a=o.options,s=a.yField,c=s[0],l=s[1],u=a.tooltip;return u||(0,ot.set)(a,"tooltip",{items:[{field:c,value:c},{field:l,value:l}]}),o},i=function(o){var a=o.options,s=a.children,c=a.layout,l=a.coordinate.transform,u=a.paddingBottom,f=u===void 0?H9:u,d=a.paddingLeft,h=d===void 0?H9:d,p=a.axis;(0,ot.set)(a,"axisText",iy(iy({},(p==null?void 0:p.x)||{}),{layout:c}));var v=s[0],y=s[1];if(c==="vertical")(0,ot.set)(a,"direction","col"),(0,ot.set)(a,"paddingLeft",h),(0,ot.set)(a,"coordinate.transform",l.filter(function(w){return w.type!=="transpose"})),(0,ot.set)(v,"paddingBottom",Y9),(0,ot.set)(y,"paddingTop",Y9),(0,ot.set)(y,"axis",{x:{position:"top"}}),(0,ot.set)(y,"scale",{y:{range:[0,1]}});else{(0,ot.set)(a,"paddingBottom",f),(0,ot.set)(v,"scale",{y:{range:[0,1]}});var m=v.paddingRight,b=m===void 0?HT:m,O=y.paddingLeft,E=O===void 0?HT:O;(0,ot.set)(v,"paddingRight",b),(0,ot.set)(v,"axis",{x:{position:"right"}}),(0,ot.set)(y,"paddingLeft",E)}return o};return(0,ot.flow)(e,n,r,i,fi,tr)(t)}var Hvt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Uvt=function(t){Hvt(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="BidirectionalBar",n}return e.getDefaultOptions=function(){return{type:"spaceFlex",coordinate:{transform:[{type:"transpose"}]},scale:{y:{nice:!0}},direction:"row",layout:"horizontal",legend:!1,axis:{y:{title:!1},x:{title:!1,label:!1}},children:[{type:"interval"},{type:"interval"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Yvt},e}(Fn),Ed;(function(t){t.color="key",t.d="path"})(Ed||(Ed={}));function Vvt(t){var e=function(n){var r=n.options,i=r.data,o=r.setsField,a=r.sizeField;return(0,ot.isArray)(i)&&((0,ot.set)(r,"data",{type:"inline",value:i,transform:[{type:"venn",sets:o,size:a,as:[Ed.color,Ed.d]}]}),(0,ot.set)(r,"colorField",o),(0,ot.set)(r,["children","0","encode","d"],Ed.d)),(0,ot.set)(n,"options",(0,ot.omit)(r,["sizeField","setsField"])),n};return(0,ot.flow)(e,tr)(t)}var Xvt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),$vt=function(t){Xvt(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="venn",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"path"}],legend:{color:{itemMarker:"circle"}},encode:{color:Ed.color,d:Ed.d}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Vvt},e}(Fn);function qvt(t){var e=function(n){return n};return(0,ot.flow)(e,tr)(t)}var Kvt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Zvt=function(t){Kvt(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="Sunburst",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"sunburst"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return qvt},e}(Fn),Jvt={Base:Jht,Line:mpt,Column:upt,Pie:_pt,Area:ipt,Bar:spt,DualAxes:$9,Funnel:vpt,Scatter:Ept,Radar:Ppt,Rose:Qpt,Stock:Ipt,TinyLine:Fpt,TinyArea:zpt,TinyColumn:Hpt,TinyProgress:Xpt,TinyRing:Kpt,Waterfall:rvt,Histogram:avt,Heatmap:lvt,Box:dvt,Sankey:vvt,Bullet:bvt,Gauge:Ovt,Liquid:Mvt,WordCloud:Avt,Treemap:Nvt,RadialBar:Ivt,CirclePacking:Fvt,Violin:zvt,BidirectionalBar:Uvt,Venn:$vt,Mix:$9,Sunburst:Zvt},QT=function(){return QT=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},QT.apply(this,arguments)},q9=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},Qvt=(0,zt.forwardRef)(function(t,e){var n=t.chartType,r=n===void 0?"Base":n,i=q9(t,["chartType"]),o=i.containerStyle,a=o===void 0?{height:"inherit",flex:1}:o,s=i.containerAttributes,c=s===void 0?{}:s,l=i.className,u=i.loading,f=i.loadingTemplate,d=i.errorTemplate,h=q9(i,["containerStyle","containerAttributes","className","loading","loadingTemplate","errorTemplate"]),p=_i(Jvt[r],h),v=p.chart,y=p.container;return(0,zt.useImperativeHandle)(e,function(){return v.current}),zt.createElement(wr,{errorTemplate:d},u&&zt.createElement(Co,{loadingTemplate:f}),zt.createElement("div",QT({className:l,style:a,ref:y},c)))})},17816:function(Be,pn){(function(gt,_e){_e(pn)})(this,function(gt){"use strict";function _e(z){var Y=typeof Symbol=="function"&&Symbol.iterator,$=Y&&z[Y],K=0;if($)return $.call(z);if(z&&typeof z.length=="number")return{next:function(){return{value:(z=z&&K>=z.length?void 0:z)&&z[K++],done:!z}}};throw new TypeError(Y?"Object is not iterable.":"Symbol.iterator is not defined.")}function H(z,Y){var $=typeof Symbol=="function"&&z[Symbol.iterator];if(!$)return z;var K,it,at=$.call(z),Q=[];try{for(;(Y===void 0||0<Y--)&&!(K=at.next()).done;)Q.push(K.value)}catch(tt){it={error:tt}}finally{try{K&&!K.done&&($=at.return)&&$.call(at)}finally{if(it)throw it.error}}return Q}function Ee(z,Y,$){if($||arguments.length===2)for(var K,it=0,at=Y.length;it<at;it++)!K&&it in Y||((K=K||Array.prototype.slice.call(Y,0,it))[it]=Y[it]);return z.concat(K||Array.prototype.slice.call(Y))}function nn(z){return zt(z,"Function")}var xe={}.toString,zt=function(z,Y){return xe.call(z)==="[object "+Y+"]"},fe=function(z){return Array.isArray?Array.isArray(z):zt(z,"Array")},Kt=function(z){if(typeof(Y=z)!="object"||Y===null||!zt(z,"Object"))return!1;var Y;if(Object.getPrototypeOf(z)===null)return!0;for(var $=z;Object.getPrototypeOf($)!==null;)$=Object.getPrototypeOf($);return Object.getPrototypeOf(z)===$},ht=function(z){return zt(z,"Number")},pe=Object.values?function(z){return Object.values(z)}:function(z){var Y,$=[],K=z,it=function(lt,ft){nn(z)&&ft==="prototype"||$.push(lt)};if(K){if(fe(K))for(var at=0,Q=K.length;at<Q&&it(K[at],at)!==!1;at++);else if(Y=typeof K,K!==null&&Y=="object"||Y=="function"){for(var tt in K)if(K.hasOwnProperty(tt)&&it(K[tt],tt)===!1)break}}return $},Ht=5;function he(z){for(var Y=[],$=1;$<arguments.length;$++)Y[$-1]=arguments[$];for(var K=0;K<Y.length;K+=1)(function it(at,Q,tt,lt){for(var ft in tt=tt||0,lt=lt||Ht,Q){var Ut;Q.hasOwnProperty(ft)&&((Ut=Q[ft])!==null&&Kt(Ut)?(Kt(at[ft])||(at[ft]={}),tt<lt?it(at[ft],Ut,tt+1,lt):at[ft]=Q[ft]):fe(Ut)?(at[ft]=[],at[ft]=at[ft].concat(Ut)):Ut!==void 0&&(at[ft]=Ut))}})(z,Y[K]);return z}function ie(z){return z}(function(z,Y){var $;if(nn(z))return($=function(){for(var K=[],it=0;it<arguments.length;it++)K[it]=arguments[it];var at,Q=Y?Y.apply(this,K):K[0],tt=$.cache;return tt.has(Q)?tt.get(Q):(at=z.apply(this,K),tt.set(Q,at),at)}).cache=new Map;throw new TypeError("Expected a function")})(function(z,Q){var $=(Q=Q===void 0?{}:Q).fontSize,K=Q.fontFamily,it=Q.fontWeight,at=Q.fontStyle,Q=Q.fontVariant;return(Ct=Ct||document.createElement("canvas").getContext("2d")).font=[at,Q,it,$+"px",K].join(" "),Ct.measureText(zt(z,"String")?z:"").width},function(z,Y){return function(){for(var $=0,K=0,it=arguments.length;K<it;K++)$+=arguments[K].length;for(var at=Array($),Q=0,K=0;K<it;K++)for(var tt=arguments[K],lt=0,ft=tt.length;lt<ft;lt++,Q++)at[Q]=tt[lt];return at}([z],pe(Y=Y===void 0?{}:Y)).join("")});var Ct,Pt=typeof Float32Array!="undefined"?Float32Array:Array;function wt(){var z=new Pt(9);return Pt!=Float32Array&&(z[1]=0,z[2]=0,z[3]=0,z[5]=0,z[6]=0,z[7]=0),z[0]=1,z[4]=1,z[8]=1,z}Math.hypot||(Math.hypot=function(){for(var z=0,Y=arguments.length;Y--;)z+=arguments[Y]*arguments[Y];return Math.sqrt(z)});var Nt=function(z,It,re){var K=It[0],it=It[1],at=It[2],Q=It[3],tt=It[4],lt=It[5],ft=It[6],Ut=It[7],It=It[8],Yt=re[0],Wt=re[1],ne=re[2],oe=re[3],jt=re[4],Ae=re[5],Ft=re[6],we=re[7],re=re[8];return z[0]=Yt*K+Wt*Q+ne*ft,z[1]=Yt*it+Wt*tt+ne*Ut,z[2]=Yt*at+Wt*lt+ne*It,z[3]=oe*K+jt*Q+Ae*ft,z[4]=oe*it+jt*tt+Ae*Ut,z[5]=oe*at+jt*lt+Ae*It,z[6]=Ft*K+we*Q+re*ft,z[7]=Ft*it+we*tt+re*Ut,z[8]=Ft*at+we*lt+re*It,z};function Re(){var z=new Pt(16);return Pt!=Float32Array&&(z[1]=0,z[2]=0,z[3]=0,z[4]=0,z[6]=0,z[7]=0,z[8]=0,z[9]=0,z[11]=0,z[12]=0,z[13]=0,z[14]=0),z[0]=1,z[5]=1,z[10]=1,z[15]=1,z}var Le=function(z,Ft,$){var K=Ft[0],it=Ft[1],at=Ft[2],Q=Ft[3],tt=Ft[4],lt=Ft[5],ft=Ft[6],Ut=Ft[7],It=Ft[8],Yt=Ft[9],Wt=Ft[10],ne=Ft[11],oe=Ft[12],jt=Ft[13],Ae=Ft[14],Ft=Ft[15],we=$[0],re=$[1],Pe=$[2],rn=$[3];return z[0]=we*K+re*tt+Pe*It+rn*oe,z[1]=we*it+re*lt+Pe*Yt+rn*jt,z[2]=we*at+re*ft+Pe*Wt+rn*Ae,z[3]=we*Q+re*Ut+Pe*ne+rn*Ft,we=$[4],re=$[5],Pe=$[6],rn=$[7],z[4]=we*K+re*tt+Pe*It+rn*oe,z[5]=we*it+re*lt+Pe*Yt+rn*jt,z[6]=we*at+re*ft+Pe*Wt+rn*Ae,z[7]=we*Q+re*Ut+Pe*ne+rn*Ft,we=$[8],re=$[9],Pe=$[10],rn=$[11],z[8]=we*K+re*tt+Pe*It+rn*oe,z[9]=we*it+re*lt+Pe*Yt+rn*jt,z[10]=we*at+re*ft+Pe*Wt+rn*Ae,z[11]=we*Q+re*Ut+Pe*ne+rn*Ft,we=$[12],re=$[13],Pe=$[14],rn=$[15],z[12]=we*K+re*tt+Pe*It+rn*oe,z[13]=we*it+re*lt+Pe*Yt+rn*jt,z[14]=we*at+re*ft+Pe*Wt+rn*Ae,z[15]=we*Q+re*Ut+Pe*ne+rn*Ft,z};function In(z){for(var Y=[],$=1;$<arguments.length;$++)Y[$-1]=arguments[$];return z?Y.reduce(function(K,it){return function(at){return it(K(at))}},z):ie}function un(z){return z instanceof Float32Array||z instanceof Array}function Sn(z,Y,$){for(;z<Y;)z+=2*Math.PI;for(;$<z;)z-=2*Math.PI;return z}Ri=new Pt(3),Pt!=Float32Array&&(Ri[0]=0,Ri[1]=0,Ri[2]=0),Ri=new Pt(4),Pt!=Float32Array&&(Ri[0]=0,Ri[1]=0,Ri[2]=0,Ri[3]=0);function Cn(Q,Y,$,K,it){var at=(Q=H(Q,2))[0],Q=Q[1],tt=wt();return at=[at,Q],(Q=tt)[0]=1,Q[1]=0,Q[2]=0,Q[3]=0,Q[4]=1,Q[5]=0,Q[6]=at[0],Q[7]=at[1],Q[8]=1,Q}function mn(z,...Y){return Y.reduce(($,K)=>it=>$(K(it)),z)}function hr(z,Y){return Y-z?$=>($-z)/(Y-z):$=>.5}const _r=Math.sqrt(50),We=Math.sqrt(10),Fe=Math.sqrt(2);function bi(z,Y,$){return Y=(Y-z)/Math.max(0,$),z=Math.floor(Math.log(Y)/Math.LN10),$=Y/ki(10,z),0<=z?($>=_r?10:$>=We?5:$>=Fe?2:1)*ki(10,z):-ki(10,-z)/($>=_r?10:$>=We?5:$>=Fe?2:1)}const qi=(z,Y,$=5)=>{z=[z,Y];let K=0,it=z.length-1,at=z[K],Q=z[it],tt;return Q<at&&([at,Q]=[Q,at],[K,it]=[it,K]),0<(tt=bi(at,Q,$))?(at=Math.floor(at/tt)*tt,Q=Math.ceil(Q/tt)*tt,tt=bi(at,Q,$)):tt<0&&(at=Math.ceil(at*tt)/tt,Q=Math.floor(Q*tt)/tt,tt=bi(at,Q,$)),0<tt?(z[K]=Math.floor(at/tt)*tt,z[it]=Math.ceil(Q/tt)*tt):tt<0&&(z[K]=Math.ceil(at*tt)/tt,z[it]=Math.floor(Q*tt)/tt),z};function Co(z){return z!=null&&!Number.isNaN(z)}function Ki(z,Y){return $=>{$.prototype.rescale=function(){this.initRange(),this.nice();var[K]=this.chooseTransforms();this.composeOutput(K,this.chooseClamp(K))},$.prototype.initRange=function(){var K=this.options.interpolator;this.options.range=z(K)},$.prototype.composeOutput=function(K,it){var at,{domain:tt,interpolator:Q,round:lt}=this.getOptions(),tt=Y(tt.map(K)),lt=lt?(at=Q,ft=>(ft=at(ft),ht(ft)?Math.round(ft):ft)):Q;this.output=mn(lt,tt,it,K)},$.prototype.invert=void 0}}var wr,Ri={exports:{}},Va={exports:{}},ot=function(z){return!(!z||typeof z=="string")&&(z instanceof Array||Array.isArray(z)||0<=z.length&&(z.splice instanceof Function||Object.getOwnPropertyDescriptor(z,z.length-1)&&z.constructor.name!=="String"))},Wa=Array.prototype.concat,Zi=Array.prototype.slice,_i=Va.exports=function(z){for(var Y=[],$=0,K=z.length;$<K;$++){var it=z[$];ot(it)?Y=Wa.call(Y,Zi.call(it)):Y.push(it)}return Y},Ya=(_i.wrap=function(z){return function(){return z(_i(arguments))}},{aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}),ko=Va.exports,hs=Object.hasOwnProperty,Wr=Object.create(null);for(wr in Ya)hs.call(Ya,wr)&&(Wr[Ya[wr]]=wr);var kn=Ri.exports={to:{},get:{}};function Ni(z,Y,$){return Math.min(Math.max(Y,z),$)}function va(z){return z=Math.round(z).toString(16).toUpperCase(),z.length<2?"0"+z:z}kn.get=function(z){var Y,$;switch(z.substring(0,3).toLowerCase()){case"hsl":Y=kn.get.hsl(z),$="hsl";break;case"hwb":Y=kn.get.hwb(z),$="hwb";break;default:Y=kn.get.rgb(z),$="rgb"}return Y?{model:$,value:Y}:null},kn.get.rgb=function(z){if(!z)return null;var Y,$,K,it=[0,0,0,1];if(Y=z.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(K=Y[2],Y=Y[1],$=0;$<3;$++){var at=2*$;it[$]=parseInt(Y.slice(at,2+at),16)}K&&(it[3]=parseInt(K,16)/255)}else if(Y=z.match(/^#([a-f0-9]{3,4})$/i)){for(K=(Y=Y[1])[3],$=0;$<3;$++)it[$]=parseInt(Y[$]+Y[$],16);K&&(it[3]=parseInt(K+K,16)/255)}else{if(Y=z.match(/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/))for($=0;$<3;$++)it[$]=parseInt(Y[$+1],0);else{if(!(Y=z.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)))return(Y=z.match(/^(\w+)$/))?Y[1]==="transparent"?[0,0,0,0]:hs.call(Ya,Y[1])?((it=Ya[Y[1]])[3]=1,it):null:null;for($=0;$<3;$++)it[$]=Math.round(2.55*parseFloat(Y[$+1]))}Y[4]&&(Y[5]?it[3]=.01*parseFloat(Y[4]):it[3]=parseFloat(Y[4]))}for($=0;$<3;$++)it[$]=Ni(it[$],0,255);return it[3]=Ni(it[3],0,1),it},kn.get.hsl=function(z){var Y;return(z=z&&z.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/))?(Y=parseFloat(z[4]),[(parseFloat(z[1])%360+360)%360,Ni(parseFloat(z[2]),0,100),Ni(parseFloat(z[3]),0,100),Ni(isNaN(Y)?1:Y,0,1)]):null},kn.get.hwb=function(z){var Y;return(z=z&&z.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/))?(Y=parseFloat(z[4]),[(parseFloat(z[1])%360+360)%360,Ni(parseFloat(z[2]),0,100),Ni(parseFloat(z[3]),0,100),Ni(isNaN(Y)?1:Y,0,1)]):null},kn.to.hex=function(){var z=ko(arguments);return"#"+va(z[0])+va(z[1])+va(z[2])+(z[3]<1?va(Math.round(255*z[3])):"")},kn.to.rgb=function(){var z=ko(arguments);return z.length<4||z[3]===1?"rgb("+Math.round(z[0])+", "+Math.round(z[1])+", "+Math.round(z[2])+")":"rgba("+Math.round(z[0])+", "+Math.round(z[1])+", "+Math.round(z[2])+", "+z[3]+")"},kn.to.rgb.percent=function(){var z=ko(arguments),Y=Math.round(z[0]/255*100),$=Math.round(z[1]/255*100),K=Math.round(z[2]/255*100);return z.length<4||z[3]===1?"rgb("+Y+"%, "+$+"%, "+K+"%)":"rgba("+Y+"%, "+$+"%, "+K+"%, "+z[3]+")"},kn.to.hsl=function(){var z=ko(arguments);return z.length<4||z[3]===1?"hsl("+z[0]+", "+z[1]+"%, "+z[2]+"%)":"hsla("+z[0]+", "+z[1]+"%, "+z[2]+"%, "+z[3]+")"},kn.to.hwb=function(){var z=ko(arguments),Y="";return 4<=z.length&&z[3]!==1&&(Y=", "+z[3]),"hwb("+z[0]+", "+z[1]+"%, "+z[2]+"%"+Y+")"},kn.to.keyword=function(z){return Wr[z.slice(0,3)]};var Ha=Ri.exports;function tu(z,Y,$){let K=$;return K<0&&(K+=1),1<K&&--K,K<1/6?z+6*(Y-z)*K:K<.5?Y:K<2/3?z+(Y-z)*(2/3-K)*6:z}function Ys(it){var Y,$,K,it=Ha.get(it);return it?({model:it,value:Y}=it,it==="rgb"?Y:it==="hsl"?(Y=(it=Y)[0]/360,$=it[1]/100,K=it[2]/100,it=it[3],$==0?[255*K,255*K,255*K,it]:[255*tu($=2*K-(K=K<.5?K*(1+$):K+$-K*$),K,Y+1/3),255*tu($,K,Y),255*tu($,K,Y-1/3),it]):null):null}const Qo=(z,Y)=>$=>z*(1-$)+Y*$,Fp=(z,Y)=>{if(typeof z=="number"&&typeof Y=="number")return Qo(z,Y);if(typeof z!="string"||typeof Y!="string")return()=>z;{var $=z,K=Y;const it=Ys($),at=Ys(K);return it===null||at===null?it?()=>$:()=>K:Q=>{var tt=new Array(4);for(let ne=0;ne<4;ne+=1){var lt=it[ne],ft=at[ne];tt[ne]=lt*(1-Q)+ft*Q}var[Ut,It,Yt,Wt]=tt;return`rgba(${Math.round(Ut)}, ${Math.round(It)}, ${Math.round(Yt)}, ${Wt})`}}},so=(z,Y)=>{const $=Qo(z,Y);return K=>Math.round($(K))};function xt({map:z,initKey:Y},$){return Y=Y($),z.has(Y)?z.get(Y):$}function nt(z){return typeof z=="object"?z.valueOf():z}class Ge extends Map{constructor(Y){if(super(),this.map=new Map,this.initKey=nt,Y!==null)for(var[$,K]of Y)this.set($,K)}get(Y){return super.get(xt({map:this.map,initKey:this.initKey},Y))}has(Y){return super.has(xt({map:this.map,initKey:this.initKey},Y))}set(Y,$){return super.set(([{map:Y,initKey:K},it]=[{map:this.map,initKey:this.initKey},Y],K=K(it),Y.has(K)?Y.get(K):(Y.set(K,it),it)),$);var K,it}delete(Y){return super.delete(([{map:Y,initKey:$},K]=[{map:this.map,initKey:this.initKey},Y],$=$(K),Y.has($)&&(K=Y.get($),Y.delete($)),K));var $,K}}class sf{constructor(Y){this.options=he({},this.getDefaultOptions()),this.update(Y)}getOptions(){return this.options}update(Y={}){this.options=he({},this.options,Y),this.rescale(Y)}rescale(Y){}}const eu=Symbol("defaultUnknown");function cl(z,Y,$){for(let K=0;K<Y.length;K+=1)z.has(Y[K])||z.set($(Y[K]),K)}function ta(Y){var{value:Y,from:$,to:K,mapper:it,notFoundReturn:at}=Y;let Q=it.get(Y);if(Q===void 0){if(at!==eu)return at;Q=$.push(Y)-1,it.set(Y,Q)}return K[Q%K.length]}function ll(z){return z instanceof Date?Y=>""+Y:typeof z=="object"?Y=>JSON.stringify(Y):Y=>Y}class ul extends sf{getDefaultOptions(){return{domain:[],range:[],unknown:eu}}constructor(Y){super(Y)}map(Y){return this.domainIndexMap.size===0&&cl(this.domainIndexMap,this.getDomain(),this.domainKey),ta({value:this.domainKey(Y),mapper:this.domainIndexMap,from:this.getDomain(),to:this.getRange(),notFoundReturn:this.options.unknown})}invert(Y){return this.rangeIndexMap.size===0&&cl(this.rangeIndexMap,this.getRange(),this.rangeKey),ta({value:this.rangeKey(Y),mapper:this.rangeIndexMap,from:this.getRange(),to:this.getDomain(),notFoundReturn:this.options.unknown})}rescale(Y){var[$]=this.options.domain,[K]=this.options.range;this.domainKey=ll($),this.rangeKey=ll(K),this.rangeIndexMap?(Y&&!Y.range||this.rangeIndexMap.clear(),Y&&!Y.domain&&!Y.compare||(this.domainIndexMap.clear(),this.sortedDomain=void 0)):(this.rangeIndexMap=new Map,this.domainIndexMap=new Map)}clone(){return new ul(this.options)}getRange(){return this.options.range}getDomain(){var Y,$;return this.sortedDomain||({domain:Y,compare:$}=this.options,this.sortedDomain=$?[...Y].sort($):Y),this.sortedDomain}}function jp(jt){const{domain:Y,range:$,paddingOuter:K,paddingInner:it,flex:at,round:Q,align:tt}=jt;var lt=Y.length,Wt=0<(Wt=(jt=lt)-(ft=at).length)?[...ft,...new Array(Wt).fill(1)]:Wt<0?ft.slice(0,jt):ft,[jt,ft]=$,ft=ft-jt,oe=ft/(2/lt*K+1-1/lt*it);const Ut=oe*it/lt;oe-=lt*Ut;const It=function(re){const Pe=Math.min(...re);return re.map(rn=>rn/Pe)}(Wt),Yt=oe/It.reduce((re,Pe)=>re+Pe);var Wt=new Ge(Y.map((re,Pe)=>(Pe=It[Pe]*Yt,[re,Q?Math.floor(Pe):Pe]))),ne=new Ge(Y.map((re,Pe)=>(Pe=It[Pe]*Yt+Ut,[re,Q?Math.floor(Pe):Pe]))),oe=Array.from(ne.values()).reduce((re,Pe)=>re+Pe),jt=jt+(ft-(oe-oe/lt*it))*tt;let Ae=Q?Math.round(jt):jt;var Ft=new Array(lt);for(let re=0;re<lt;re+=1){Ft[re]=(we=Ae,Math.round(1e12*we)/1e12);var we=Y[re];Ae+=ne.get(we)}return{valueBandWidth:Wt,valueStep:ne,adjustedRange:Ft}}class ti extends ul{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,paddingInner:0,paddingOuter:0,padding:0,unknown:eu,flex:[]}}constructor(Y){super(Y)}clone(){return new ti(this.options)}getStep(Y){return this.valueStep===void 0?1:typeof this.valueStep=="number"?this.valueStep:Y===void 0?Array.from(this.valueStep.values())[0]:this.valueStep.get(Y)}getBandWidth(Y){return this.valueBandWidth===void 0?1:typeof this.valueBandWidth=="number"?this.valueBandWidth:Y===void 0?Array.from(this.valueBandWidth.values())[0]:this.valueBandWidth.get(Y)}getRange(){return this.adjustedRange}getPaddingInner(){var{padding:Y,paddingInner:$}=this.options;return 0<Y?Y:$}getPaddingOuter(){var{padding:Y,paddingOuter:$}=this.options;return 0<Y?Y:$}rescale(){super.rescale();var{align:K,domain:Y,range:it,round:at,flex:$}=this.options,{adjustedRange:K,valueBandWidth:it,valueStep:at}=function(ft){var tt=ft.domain;if((tt=tt.length)===0)return{valueBandWidth:void 0,valueStep:void 0,adjustedRange:[]};if(!((lt=ft.flex)==null||!lt.length))return jp(ft);var{range:lt,paddingOuter:ft,paddingInner:Ut,round:It,align:Yt}=ft;let Wt,ne,oe=lt[0];return lt=lt[1]-oe,Wt=lt/Math.max(1,2*ft+(tt-Ut)),It&&(Wt=Math.floor(Wt)),oe+=(lt-Wt*(tt-Ut))*Yt,ne=Wt*(1-Ut),It&&(oe=Math.round(oe),ne=Math.round(ne)),ft=new Array(tt).fill(0).map((jt,Ae)=>oe+Ae*Wt),{valueStep:Wt,valueBandWidth:ne,adjustedRange:ft}}({align:K,range:it,round:at,flex:$,paddingInner:this.getPaddingInner(),paddingOuter:this.getPaddingOuter(),domain:Y});this.valueStep=at,this.valueBandWidth=it,this.adjustedRange=K}}const Fi=(z,Y,$)=>{let K,it,at=z,Q=Y;if(at===Q&&0<$)return[at];let tt=bi(at,Q,$);if(tt===0||!Number.isFinite(tt))return[];if(0<tt){at=Math.ceil(at/tt),Q=Math.floor(Q/tt),it=new Array(K=Math.ceil(Q-at+1));for(let lt=0;lt<K;lt+=1)it[lt]=(at+lt)*tt}else{tt=-tt,at=Math.ceil(at*tt),Q=Math.floor(Q*tt),it=new Array(K=Math.ceil(Q-at+1));for(let lt=0;lt<K;lt+=1)it[lt]=(at+lt)/tt}return it},Hs=(K,at,$)=>{var[K,it]=K,[at,Q]=at;let tt,lt;return mn(lt=K<it?(tt=hr(K,it),$(at,Q)):(tt=hr(it,K),$(Q,at)),tt)},yc=(z,Y,$)=>{const K=Math.min(z.length,Y.length)-1,it=new Array(K),at=new Array(K);var Q=z[0]>z[K],tt=Q?[...z].reverse():z,lt=Q?[...Y].reverse():Y;for(let ft=0;ft<K;ft+=1)it[ft]=hr(tt[ft],tt[ft+1]),at[ft]=$(lt[ft],lt[ft+1]);return ft=>{var Ut=function(Yt,Wt,ne,oe,jt){let Ae=ne||0,Ft=oe||Yt.length;for(var we=jt||(Pe=>Pe);Ae<Ft;){var re=Math.floor((Ae+Ft)/2);we(Yt[re])>Wt?Ft=re:Ae=re+1}return Ae}(z,ft,1,K)-1,It=it[Ut];return mn(at[Ut],It)(ft)}},On=(z,Y,$,K)=>(2<Math.min(z.length,Y.length)?yc:Hs)(z,Y,K?so:$);class j extends sf{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:Qo,tickCount:5}}map(Y){return Co(Y)?this.output(Y):this.options.unknown}invert(Y){return Co(Y)?this.input(Y):this.options.unknown}nice(){var Y,$,K,it;this.options.nice&&([Y,$,K,...it]=this.getTickMethodOptions(),this.options.domain=this.chooseNice()(Y,$,K,...it))}getTicks(){var Y=this.options.tickMethod,[$,K,it,...at]=this.getTickMethodOptions();return Y($,K,it,...at)}getTickMethodOptions(){var{domain:Y,tickCount:$}=this.options;return[Y[0],Y[Y.length-1],$]}chooseNice(){return qi}rescale(){this.nice();var[Y,$]=this.chooseTransforms();this.composeOutput(Y,this.chooseClamp(Y)),this.composeInput(Y,$,this.chooseClamp($))}chooseClamp(K){var{clamp:$,range:it}=this.options,K=this.options.domain.map(K),it=Math.min(K.length,it.length);if($){$=K[0],K=K[it-1];const at=K<$?K:$,Q=K<$?$:K;return tt=>Math.min(Math.max(at,tt),Q)}return ie}composeOutput(Y,$){var{domain:Q,range:K,round:it,interpolate:at}=this.options,Q=On(Q.map(Y),K,at,it);this.output=mn(Q,$,Y)}composeInput(Y,$,K){var{domain:it,range:at}=this.options,at=On(at,it.map(Y),Qo);this.input=mn($,K,at)}}class ei extends j{getDefaultOptions(){return{domain:[0,1],range:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolate:Fp,tickMethod:Fi,tickCount:5}}chooseTransforms(){return[ie,ie]}clone(){return new ei(this.options)}}class fl extends ti{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,padding:0,unknown:eu,paddingInner:1,paddingOuter:0}}constructor(Y){super(Y)}getPaddingInner(){return 1}clone(){return new fl(this.options)}update(Y){super.update(Y)}getPaddingOuter(){return this.options.padding}}function ut(z,Y){for(var $=[],K=0,it=z.length;K<it;K++)$.push(z[K].substr(0,Y));return $}var Ua,Va=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Ri=["January","February","March","April","May","June","July","August","September","October","November","December"],dl=ut(Ri,3);(function(z){for(var Y=[],$=1;$<arguments.length;$++)Y[$-1]=arguments[$];for(var K=0,it=Y;K<it.length;K++){var at,Q=it[K];for(at in Q)z[at]=Q[at]}})({},{dayNamesShort:ut(Va,3),dayNames:Va,monthNamesShort:dl,monthNames:Ri,amPm:["am","pm"],DoFn:function(z){return z+["th","st","nd","rd"][3<z%10?0:(z-z%10!=10?1:0)*z%10]}});var cf;let Sd=Ua=class extends ei{getDefaultOptions(){return{domain:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolator:ie,tickMethod:Fi,tickCount:5}}constructor(z){super(z)}clone(){return new Ua(this.options)}};Sd=Ua=function(z,Y,$,K){var it,at=arguments.length,Q=at<3?Y:K===null?K=Object.getOwnPropertyDescriptor(Y,$):K;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Q=Reflect.decorate(z,Y,$,K);else for(var tt=z.length-1;0<=tt;tt--)(it=z[tt])&&(Q=(at<3?it(Q):3<at?it(Y,$,Q):it(Y,$))||Q);return 3<at&&Q&&Object.defineProperty(Y,$,Q),Q}([Ki(function(z){return[z(0),z(1)]},Y=>{var[Y,$]=Y;return mn(Qo(0,1),hr(Y,$))})],Sd);let Md=cf=class extends ei{getDefaultOptions(){return{domain:[0,.5,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolator:ie,tickMethod:Fi,tickCount:5}}constructor(z){super(z)}clone(){return new cf(this.options)}};Md=cf=function(z,Y,$,K){var it,at=arguments.length,Q=at<3?Y:K===null?K=Object.getOwnPropertyDescriptor(Y,$):K;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Q=Reflect.decorate(z,Y,$,K);else for(var tt=z.length-1;0<=tt;tt--)(it=z[tt])&&(Q=(at<3?it(Q):3<at?it(Y,$,Q):it(Y,$))||Q);return 3<at&&Q&&Object.defineProperty(Y,$,Q),Q}([Ki(function(z){return[z(0),z(.5),z(1)]},z=>{const[Y,$,K]=z,it=mn(Qo(0,.5),hr(Y,$)),at=mn(Qo(.5,1),hr($,K));return Q=>(Y>K?Q<$?at:it:Q<$?it:at)(Q)})],Md);function Pd(z,Y,$,K,it){var at=new ei({range:[Y,Y+K]}),Q=new ei({range:[$,$+it]});return{transform:function(ft){var ft=H(ft,2),lt=ft[0],ft=ft[1];return[at.map(lt),Q.map(ft)]},untransform:function(ft){var ft=H(ft,2),lt=ft[0],ft=ft[1];return[at.invert(lt),Q.invert(ft)]}}}function hl(z,Y,$,K,it){return(0,H(z,1)[0])(Y,$,K,it)}function Gp(z,Y,$,K,it){return H(z,1)[0]}function zp(lt,Y,$,K,it){var at=(lt=H(lt,4))[0],Q=lt[1],tt=lt[2],lt=lt[3],ft=new ei({range:[tt,lt]}),Ut=new ei({range:[at,Q]}),It=1<(tt=it/K)?1:tt,Yt=1<tt?1/tt:1;return{transform:function(oe){var oe=H(oe,2),ne=oe[0],oe=oe[1],ne=Ut.map(ne),oe=ft.map(oe);return[.5*(oe*Math.cos(ne)*It)+.5,.5*(oe*Math.sin(ne)*Yt)+.5]},untransform:function(jt){var jt=H(jt,2),ne=jt[0],jt=jt[1],ne=2*(ne-.5)/It,jt=2*(jt-.5)/Yt,oe=Math.sqrt(Math.pow(ne,2)+Math.pow(jt,2)),jt=Sn(Math.atan2(jt,ne),at,Q);return[Ut.invert(jt),ft.invert(oe)]}}}function Wp(z,Y,$,K,it){return{transform:function(Q){var Q=H(Q,2),tt=Q[0];return[Q[1],tt]},untransform:function(Q){var Q=H(Q,2),tt=Q[0];return[Q[1],tt]}}}function Yp(z){for(var Y=[],$=1;$<arguments.length;$++)Y[$-1]=arguments[$];return er.apply(void 0,Ee([[-1,-1]],H(Y),!1))}function Td(z){for(var Y=[],$=1;$<arguments.length;$++)Y[$-1]=arguments[$];return er.apply(void 0,Ee([[-1,1]],H(Y),!1))}function ly(z){for(var Y=[],$=1;$<arguments.length;$++)Y[$-1]=arguments[$];return er.apply(void 0,Ee([[1,-1]],H(Y),!1))}function Hp(Q,Y,$,K,it){var at,Q=H(Q,1)[0],tt=wt();return tt=tt,Q=Q,at=Math.sin(Q),Q=Math.cos(Q),tt[0]=Q,tt[1]=at,tt[2]=0,tt[3]=-at,tt[4]=Q,tt[5]=0,tt[6]=0,tt[7]=0,tt[8]=1,tt}function Xa(z,Y,$,K,it){var at=(z=H(z,4))[0],Q=z[1],tt=z[2],lt=(z[3]-tt)/(+Q/(2*Math.PI)+1),ft=lt/(2*Math.PI),Ut=new ei({range:[tt,tt+.99*lt]}),It=new ei({range:[at,Q]}),Yt=1<(z=it/K)?1:z,Wt=1<z?1/z:1;return{transform:function(jt){var jt=H(jt,2),oe=jt[0],jt=jt[1],oe=It.map(oe),jt=Ut.map(jt);return[.5*(Math.cos(oe)*(ft*oe+jt)*Yt)+.5,.5*(Math.sin(oe)*(ft*oe+jt)*Wt)+.5]},untransform:function(jt){var jt=H(jt,2),Ae=jt[0],jt=jt[1],Ae=2*(Ae-.5)/Yt,jt=2*(jt-.5)/Wt,oe=Math.sqrt(Math.pow(Ae,2)+Math.pow(jt,2)),jt=Sn(Math.atan2(jt,Ae)+Math.floor(oe/lt)*Math.PI*2,at,Q),Ae=oe-ft*jt;return[It.invert(jt),Ut.invert(Ae)]}}}function Mn(lt,Y,$,K,it){var at=(lt=H(lt,4))[0],Q=lt[1],tt=lt[2],lt=lt[3],ft=new ei({range:[tt,lt]});return{transform:function(Ut){for(var It=[],Yt=Ut.length,Wt=new fl({domain:new Array(Yt).fill(0).map(function(Ae,Ft){return Ft}),range:[at,Q]}),ne=0;ne<Yt;ne++){var jt=Ut[ne],oe=Wt.map(ne),jt=ft.map(jt);It.push(oe,jt)}return It},untransform:function(Ut){for(var It=[],Yt=0;Yt<Ut.length;Yt+=2){var Wt=Ut[Yt+1];It.push(ft.invert(Wt))}return It}}}var er=function(Q,Y,$,K,it){var Q=H(Q,2),at=Q[0],Q=Q[1],tt=wt();return at=[at,Q],(Q=tt)[0]=at[0],Q[1]=0,Q[2]=0,Q[3]=0,Q[4]=at[1],Q[5]=0,Q[6]=0,Q[7]=0,Q[8]=1,Q};function lf(z){return 1/Math.tan(z)}function uy(z,Y,$,K,it){var at=lf(H(z,1)[0]);return{transform:function(lt){var lt=H(lt,2),tt=lt[0],lt=lt[1];return[tt+lt*at,lt]},untransform:function(lt){var lt=H(lt,2),tt=lt[0],lt=lt[1];return[tt-lt*at,lt]}}}function Up(z,Y,$,K,it){var at=lf(H(z,1)[0]);return{transform:function(tt){var tt=H(tt,2),lt=tt[0];return[lt,tt[1]+lt*at]},untransform:function(tt){var tt=H(tt,2),lt=tt[0];return[lt,tt[1]-lt*at]}}}function nu(z,Y,$,tt,Q){var at=z<Y,Q=(at?Y-tt:Q-Y)||Q-tt,tt=at?-1:1;return tt*Q*($+1)/($+Q/((z-Y)*tt))+Y}function ru(z,Y,$,K,Q){var at=z<Y,Q=(at?Y-K:Q-Y)||Q-K;return Q/(Q*($+1)/(z-Y)-$*(at?-1:1))+Y}function Gt(z,Y,$){return $?new ei({range:[0,1],domain:[0,Y]}).map(z):z}function ea(tt,Y,$,K,it){var at=(tt=H(tt,3))[0],Q=tt[1],tt=tt[2],lt=Gt(at,K,tt!==void 0&&tt);return{transform:function(It){var It=H(It,2),Ut=It[0],It=It[1];return[nu(Ut,lt,Q,0,1),It]},untransform:function(It){var It=H(It,2),Ut=It[0],It=It[1];return[ru(Ut,lt,Q,0,1),It]}}}function cr(tt,Y,$,K,it){var at=(tt=H(tt,3))[0],Q=tt[1],tt=tt[2],lt=Gt(at,it,tt!==void 0&&tt);return{transform:function(ft){return ft=H(ft,2),[ft[0],nu(ft[1],lt,Q,0,1)]},untransform:function(ft){return ft=H(ft,2),[ft[0],ru(ft[1],lt,Q,0,1)]}}}function te(ft,Y,$,K,it){var at=(ft=H(ft,5))[0],Q=ft[1],tt=ft[2],lt=ft[3],ft=ft[4],Ut=Gt(at,K,ft=ft!==void 0&&ft),It=Gt(Q,it,ft);return{transform:function(ne){var ne=H(ne,2),Wt=ne[0],ne=ne[1];return[nu(Wt,Ut,tt,0,1),nu(ne,It,lt,0,1)]},untransform:function(ne){var ne=H(ne,2),Wt=ne[0],ne=ne[1];return[ru(Wt,Ut,tt,0,1),ru(ne,It,lt,0,1)]}}}function lr(ft,Y,$,K,it){var at=(ft=H(ft,5))[0],Q=ft[1],tt=ft[2],lt=ft[3],ft=(ft=ft[4])!==void 0&&ft,Ut=new ei({range:[0,K]}),It=new ei({range:[0,it]}),Yt=ft?at:Ut.map(at),Wt=ft?Q:It.map(Q);return{transform:function(jt){var jt=H(jt,2),oe=jt[0],jt=jt[1],Ae=Ut.map(oe)-Yt,Ft=It.map(jt)-Wt,we=Math.sqrt(Ae*Ae+Ft*Ft);return tt<we?[oe,jt]:(oe=nu(we,0,lt,0,tt),jt=Math.atan2(Ft,Ae),we=Yt+oe*Math.cos(jt),Ft=Wt+oe*Math.sin(jt),[Ut.invert(we),It.invert(Ft)])},untransform:function(jt){var jt=H(jt,2),oe=jt[0],jt=jt[1],Ae=Ut.map(oe)-Yt,Ft=It.map(jt)-Wt,we=Math.sqrt(Ae*Ae+Ft*Ft);return tt<we?[oe,jt]:(oe=ru(we,0,lt,0,tt),jt=Math.atan2(Ft,Ae),we=Yt+oe*Math.cos(jt),Ft=Wt+oe*Math.sin(jt),[Ut.invert(we),It.invert(Ft)])}}}function Dn(z,Y,$,K,it,at,Q){var tt=new ei({range:[Y,Y+it]}),lt=new ei({range:[$,$+at]}),ft=new ei({range:[K,K+Q]});return{transform:function(Wt){var Wt=H(Wt,3),It=Wt[0],Yt=Wt[1],Wt=Wt[2];return[tt.map(It),lt.map(Yt),ft.map(Wt)]},untransform:function(Wt){var Wt=H(Wt,3),It=Wt[0],Yt=Wt[1],Wt=Wt[2];return[tt.invert(It),lt.invert(Yt),ft.invert(Wt)]}}}function No(Ut,Y,$,K,it,at,Q){var tt,lt=(Ut=H(Ut,3))[0],ft=Ut[1],Ut=Ut[2];return tt=Re(),lt=[lt,ft,Ut],tt[0]=1,tt[1]=0,tt[2]=0,tt[3]=0,tt[4]=0,tt[5]=1,tt[6]=0,tt[7]=0,tt[8]=0,tt[9]=0,tt[10]=1,tt[11]=0,tt[12]=lt[0],tt[13]=lt[1],tt[14]=lt[2],tt[15]=1,tt}function mc(z,Y,$,K,it,at,Q){return{transform:function(lt){var lt=H(lt,3),ft=lt[0];return[lt[1],ft,lt[2]]},untransform:function(lt){var lt=H(lt,3),ft=lt[0];return[lt[1],ft,lt[2]]}}}function uf(Ut,Y,$,K,it,at,Q){var tt,lt=(Ut=H(Ut,3))[0],ft=Ut[1],Ut=Ut[2];return tt=Re(),lt=[lt,ft,Ut],tt[0]=lt[0],tt[1]=0,tt[2]=0,tt[3]=0,tt[4]=0,tt[5]=lt[1],tt[6]=0,tt[7]=0,tt[8]=0,tt[9]=0,tt[10]=lt[2],tt[11]=0,tt[12]=0,tt[13]=0,tt[14]=0,tt[15]=1,tt}co.prototype.update=function(z){this.options=he({},this.options,z),this.recoordinate()},co.prototype.clone=function(){return new co(this.options)},co.prototype.getOptions=function(){return this.options},co.prototype.clear=function(){this.update({transformations:[]})},co.prototype.getSize=function(){var z=this.options;return[z.width,z.height]},co.prototype.getCenter=function(){var z=this.options,Y=z.x,$=z.y;return[(2*Y+z.width)/2,(2*$+z.height)/2]},co.prototype.transform=function(){for(var z=[],Y=0;Y<arguments.length;Y++)z[Y]=arguments[Y];var $=this.options.transformations;return this.update({transformations:Ee(Ee([],H($),!1),[Ee([],H(z),!1)],!1)}),this},co.prototype.map=function(z){return this.output(z)},co.prototype.invert=function(z){return this.input(z)},co.prototype.recoordinate=function(){this.output=this.compose(),this.input=this.compose(!0)},co.prototype.compose=function(z){function Y(re,Pe){var rn;tt.push((Pe=Pe===void 0?!0:Pe)?(rn=re,function(uo){for(var fo=[],Ji=0;Ji<uo.length-1;Ji+=2){var ho=[uo[Ji],uo[Ji+1]],ho=rn(ho);fo.push.apply(fo,Ee([],H(ho),!1))}return fo}):re)}var $,K,it=(z=z===void 0?!1:z)?Ee([],H(this.options.transformations),!1).reverse():this.options.transformations,at=z?function(re){return re.untransform}:function(re){return re.transform},Q=[],tt=[];try{for(var lt=_e(it),ft=lt.next();!ft.done;ft=lt.next()){var Ut,It,Yt,Wt,ne,oe,jt=H(ft.value),Ae=jt[0],Ft=jt.slice(1),we=this.transformers[Ae];we&&(It=(Ut=this.options).x,Yt=Ut.y,Wt=Ut.width,ne=Ut.height,un(oe=we(Ee([],H(Ft),!1),It,Yt,Wt,ne))?Q.push(oe):(Q.length&&(Y(this.createMatrixTransform(Q,z)),Q.splice(0,Q.length)),Y(at(oe)||ie,Ae!=="parallel")))}}catch(re){$={error:re}}finally{try{ft&&!ft.done&&(K=lt.return)&&K.call(lt)}finally{if($)throw $.error}}return Q.length&&Y(this.createMatrixTransform(Q,z)),In.apply(void 0,Ee([],H(tt),!1))},co.prototype.createMatrixTransform=function(z,Y){var $,K,it,at,Q,tt,lt,ft,Ut,It,Yt,Wt,ne=wt();return Y&&z.reverse(),z.forEach(function(oe){return Nt(ne,ne,oe)}),Y&&(Y=z=ne,(Wt=new Pt(9))[0]=Y[0],Wt[1]=Y[1],Wt[2]=Y[2],Wt[3]=Y[3],Wt[4]=Y[4],Wt[5]=Y[5],Wt[6]=Y[6],Wt[7]=Y[7],Wt[8]=Y[8],Wt=(Y=Wt)[0],$=Y[1],K=Y[2],it=Y[3],at=Y[4],Q=Y[5],tt=Y[6],lt=Y[7],ft=(Y=Y[8])*at-Q*lt,Yt=Wt*ft+$*(Ut=-Y*it+Q*tt)+K*(It=lt*it-at*tt))&&(z[0]=ft*(Yt=1/Yt),z[1]=(-Y*$+K*lt)*Yt,z[2]=(Q*$-K*at)*Yt,z[3]=Ut*Yt,z[4]=(Y*Wt-K*tt)*Yt,z[5]=(-Q*Wt+K*it)*Yt,z[6]=It*Yt,z[7]=(-lt*Wt+$*tt)*Yt,z[8]=(at*Wt-$*it)*Yt),function(Pe){var jt,Ae,Ft,we,re,Pe=[Pe[0],Pe[1],1];return Ft=ne,we=(Ae=jt=Pe)[0],re=Ae[1],Ae=Ae[2],jt[0]=we*Ft[0]+re*Ft[3]+Ae*Ft[6],jt[1]=we*Ft[1]+re*Ft[4]+Ae*Ft[7],jt[2]=we*Ft[2]+re*Ft[5]+Ae*Ft[8],[Pe[0],Pe[1]]}},Va=co;function co(z){this.options={x:0,y:0,width:300,height:150,transformations:[]},this.transformers={cartesian:Pd,translate:Cn,custom:hl,matrix:Gp,polar:zp,transpose:Wp,scale:er,"shear.x":uy,"shear.y":Up,reflect:Yp,"reflect.x":Td,"reflect.y":ly,rotate:Hp,helix:Xa,parallel:Mn,fisheye:te,"fisheye.x":ea,"fisheye.y":cr,"fisheye.circular":lr},this.update(z)}lo.prototype.update=function(z){this.options=he({},this.options,z),this.recoordinate()},lo.prototype.clone=function(){return new lo(this.options)},lo.prototype.getOptions=function(){return this.options},lo.prototype.clear=function(){this.update({transformations:[]})},lo.prototype.getSize=function(){var z=this.options;return[z.width,z.height,z.depth]},lo.prototype.getCenter=function(){var z=this.options,Y=z.x,$=z.y,K=z.z;return[(2*Y+z.width)/2,(2*$+z.height)/2,(2*K+z.depth)/2]},lo.prototype.transform=function(){for(var z=[],Y=0;Y<arguments.length;Y++)z[Y]=arguments[Y];var $=this.options.transformations;return this.update({transformations:Ee(Ee([],H($),!1),[Ee([],H(z),!1)],!1)}),this},lo.prototype.map=function(z){return this.output(z)},lo.prototype.invert=function(z){return this.input(z)},lo.prototype.recoordinate=function(){this.output=this.compose(),this.input=this.compose(!0)},lo.prototype.compose=function(z){function Y(rn,uo){var fo;tt.push((uo=uo===void 0?!0:uo)?(fo=rn,function(Ji){for(var ho=[],Ro=0;Ro<Ji.length-1;Ro+=3){var fn=[Ji[Ro],Ji[Ro+1],Ji[Ro+2]],fn=fo(fn);ho.push.apply(ho,Ee([],H(fn),!1))}return ho}):rn)}var $,K,it=(z=z===void 0?!1:z)?Ee([],H(this.options.transformations),!1).reverse():this.options.transformations,at=z?function(rn){return rn.untransform}:function(rn){return rn.transform},Q=[],tt=[];try{for(var lt=_e(it),ft=lt.next();!ft.done;ft=lt.next()){var Ut,It,Yt,Wt,ne,oe,jt,Ae,Ft=H(ft.value),we=Ft[0],re=Ft.slice(1),Pe=this.transformers[we];Pe&&(It=(Ut=this.options).x,Yt=Ut.y,Wt=Ut.z,ne=Ut.width,oe=Ut.height,jt=Ut.depth,un(Ae=Pe(Ee([],H(re),!1),It,Yt,Wt,ne,oe,jt))?Q.push(Ae):(Q.length&&(Y(this.createMatrixTransform(Q,z)),Q.splice(0,Q.length)),Y(at(Ae)||ie,!0)))}}catch(rn){$={error:rn}}finally{try{ft&&!ft.done&&(K=lt.return)&&K.call(lt)}finally{if($)throw $.error}}return Q.length&&Y(this.createMatrixTransform(Q,z)),In.apply(void 0,Ee([],H(tt),!1))},lo.prototype.createMatrixTransform=function(z,Y){var $,K,it,at,Q,tt,lt,ft,Ut,It,Yt,Wt,ne,oe,jt,Ae,Ft,we,re,Pe,rn,uo,fo,Ji,ho,Ro,fn,zn,iu=Re();return Y&&z.reverse(),z.forEach(function(Vp){return Le(iu,iu,Vp)}),Y&&(Y=z=iu,(zn=new Pt(16))[0]=Y[0],zn[1]=Y[1],zn[2]=Y[2],zn[3]=Y[3],zn[4]=Y[4],zn[5]=Y[5],zn[6]=Y[6],zn[7]=Y[7],zn[8]=Y[8],zn[9]=Y[9],zn[10]=Y[10],zn[11]=Y[11],zn[12]=Y[12],zn[13]=Y[13],zn[14]=Y[14],zn[15]=Y[15],zn=(Y=zn)[0],$=Y[1],K=Y[2],it=Y[3],at=Y[4],Q=Y[5],tt=Y[6],lt=Y[7],ft=Y[8],Ut=Y[9],It=Y[10],Yt=Y[11],Wt=Y[12],ne=Y[13],oe=Y[14],Y=Y[15],fn=(jt=zn*Q-$*at)*(Ro=It*Y-Yt*oe)-(Ae=zn*tt-K*at)*(ho=Ut*Y-Yt*ne)+(Ft=zn*lt-it*at)*(Ji=Ut*oe-It*ne)+(we=$*tt-K*Q)*(fo=ft*Y-Yt*Wt)-(re=$*lt-it*Q)*(uo=ft*oe-It*Wt)+(Pe=K*lt-it*tt)*(rn=ft*ne-Ut*Wt))&&(z[0]=(Q*Ro-tt*ho+lt*Ji)*(fn=1/fn),z[1]=(K*ho-$*Ro-it*Ji)*fn,z[2]=(ne*Pe-oe*re+Y*we)*fn,z[3]=(It*re-Ut*Pe-Yt*we)*fn,z[4]=(tt*fo-at*Ro-lt*uo)*fn,z[5]=(zn*Ro-K*fo+it*uo)*fn,z[6]=(oe*Ft-Wt*Pe-Y*Ae)*fn,z[7]=(ft*Pe-It*Ft+Yt*Ae)*fn,z[8]=(at*ho-Q*fo+lt*rn)*fn,z[9]=($*fo-zn*ho-it*rn)*fn,z[10]=(Wt*re-ne*Ft+Y*jt)*fn,z[11]=(Ut*Ft-ft*re-Yt*jt)*fn,z[12]=(Q*uo-at*Ji-tt*rn)*fn,z[13]=(zn*Ji-$*uo+K*rn)*fn,z[14]=(ne*Ae-Wt*we-oe*jt)*fn,z[15]=(ft*we-Ut*Ae+It*jt)*fn),function(qa){var xc,$a,Br,pl,vl,ue,qa=[qa[0],qa[1],qa[2],1];return Br=iu,pl=($a=xc=qa)[0],vl=$a[1],ue=$a[2],$a=$a[3],xc[0]=Br[0]*pl+Br[4]*vl+Br[8]*ue+Br[12]*$a,xc[1]=Br[1]*pl+Br[5]*vl+Br[9]*ue+Br[13]*$a,xc[2]=Br[2]*pl+Br[6]*vl+Br[10]*ue+Br[14]*$a,xc[3]=Br[3]*pl+Br[7]*vl+Br[11]*ue+Br[15]*$a,[qa[0],qa[1],qa[2]]}},dl=lo;function lo(z){this.options={x:0,y:0,z:0,width:300,height:150,depth:150,transformations:[]},this.transformers={cartesian3D:Dn,translate3D:No,scale3D:uf,transpose3D:mc},this.update(z)}gt.Coordinate=Va,gt.Coordinate3D=dl,Object.defineProperty(gt,"__esModule",{value:!0})})},8874:function(Be){"use strict";Be.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},19818:function(Be,pn,gt){var _e=gt(8874),H=gt(86851),Ee=Object.hasOwnProperty,nn=Object.create(null);for(var xe in _e)Ee.call(_e,xe)&&(nn[_e[xe]]=xe);var zt=Be.exports={to:{},get:{}};zt.get=function(ht){var pe=ht.substring(0,3).toLowerCase(),Ht,he;switch(pe){case"hsl":Ht=zt.get.hsl(ht),he="hsl";break;case"hwb":Ht=zt.get.hwb(ht),he="hwb";break;default:Ht=zt.get.rgb(ht),he="rgb";break}return Ht?{model:he,value:Ht}:null},zt.get.rgb=function(ht){if(!ht)return null;var pe=/^#([a-f0-9]{3,4})$/i,Ht=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,he=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,ie=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,Ct=/^(\w+)$/,Pt=[0,0,0,1],wt,Nt,Re;if(wt=ht.match(Ht)){for(Re=wt[2],wt=wt[1],Nt=0;Nt<3;Nt++){var Le=Nt*2;Pt[Nt]=parseInt(wt.slice(Le,Le+2),16)}Re&&(Pt[3]=parseInt(Re,16)/255)}else if(wt=ht.match(pe)){for(wt=wt[1],Re=wt[3],Nt=0;Nt<3;Nt++)Pt[Nt]=parseInt(wt[Nt]+wt[Nt],16);Re&&(Pt[3]=parseInt(Re+Re,16)/255)}else if(wt=ht.match(he)){for(Nt=0;Nt<3;Nt++)Pt[Nt]=parseInt(wt[Nt+1],0);wt[4]&&(wt[5]?Pt[3]=parseFloat(wt[4])*.01:Pt[3]=parseFloat(wt[4]))}else if(wt=ht.match(ie)){for(Nt=0;Nt<3;Nt++)Pt[Nt]=Math.round(parseFloat(wt[Nt+1])*2.55);wt[4]&&(wt[5]?Pt[3]=parseFloat(wt[4])*.01:Pt[3]=parseFloat(wt[4]))}else return(wt=ht.match(Ct))?wt[1]==="transparent"?[0,0,0,0]:Ee.call(_e,wt[1])?(Pt=_e[wt[1]],Pt[3]=1,Pt):null:null;for(Nt=0;Nt<3;Nt++)Pt[Nt]=fe(Pt[Nt],0,255);return Pt[3]=fe(Pt[3],0,1),Pt},zt.get.hsl=function(ht){if(!ht)return null;var pe=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,Ht=ht.match(pe);if(Ht){var he=parseFloat(Ht[4]),ie=(parseFloat(Ht[1])%360+360)%360,Ct=fe(parseFloat(Ht[2]),0,100),Pt=fe(parseFloat(Ht[3]),0,100),wt=fe(isNaN(he)?1:he,0,1);return[ie,Ct,Pt,wt]}return null},zt.get.hwb=function(ht){if(!ht)return null;var pe=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,Ht=ht.match(pe);if(Ht){var he=parseFloat(Ht[4]),ie=(parseFloat(Ht[1])%360+360)%360,Ct=fe(parseFloat(Ht[2]),0,100),Pt=fe(parseFloat(Ht[3]),0,100),wt=fe(isNaN(he)?1:he,0,1);return[ie,Ct,Pt,wt]}return null},zt.to.hex=function(){var ht=H(arguments);return"#"+Kt(ht[0])+Kt(ht[1])+Kt(ht[2])+(ht[3]<1?Kt(Math.round(ht[3]*255)):"")},zt.to.rgb=function(){var ht=H(arguments);return ht.length<4||ht[3]===1?"rgb("+Math.round(ht[0])+", "+Math.round(ht[1])+", "+Math.round(ht[2])+")":"rgba("+Math.round(ht[0])+", "+Math.round(ht[1])+", "+Math.round(ht[2])+", "+ht[3]+")"},zt.to.rgb.percent=function(){var ht=H(arguments),pe=Math.round(ht[0]/255*100),Ht=Math.round(ht[1]/255*100),he=Math.round(ht[2]/255*100);return ht.length<4||ht[3]===1?"rgb("+pe+"%, "+Ht+"%, "+he+"%)":"rgba("+pe+"%, "+Ht+"%, "+he+"%, "+ht[3]+")"},zt.to.hsl=function(){var ht=H(arguments);return ht.length<4||ht[3]===1?"hsl("+ht[0]+", "+ht[1]+"%, "+ht[2]+"%)":"hsla("+ht[0]+", "+ht[1]+"%, "+ht[2]+"%, "+ht[3]+")"},zt.to.hwb=function(){var ht=H(arguments),pe="";return ht.length>=4&&ht[3]!==1&&(pe=", "+ht[3]),"hwb("+ht[0]+", "+ht[1]+"%, "+ht[2]+"%"+pe+")"},zt.to.keyword=function(ht){return nn[ht.slice(0,3)]};function fe(ht,pe,Ht){return Math.min(Math.max(pe,ht),Ht)}function Kt(ht){var pe=Math.round(ht).toString(16).toUpperCase();return pe.length<2?"0"+pe:pe}},26729:function(Be){"use strict";var pn=Object.prototype.hasOwnProperty,gt="~";function _e(){}Object.create&&(_e.prototype=Object.create(null),new _e().__proto__||(gt=!1));function H(zt,fe,Kt){this.fn=zt,this.context=fe,this.once=Kt||!1}function Ee(zt,fe,Kt,ht,pe){if(typeof Kt!="function")throw new TypeError("The listener must be a function");var Ht=new H(Kt,ht||zt,pe),he=gt?gt+fe:fe;return zt._events[he]?zt._events[he].fn?zt._events[he]=[zt._events[he],Ht]:zt._events[he].push(Ht):(zt._events[he]=Ht,zt._eventsCount++),zt}function nn(zt,fe){--zt._eventsCount===0?zt._events=new _e:delete zt._events[fe]}function xe(){this._events=new _e,this._eventsCount=0}xe.prototype.eventNames=function(){var fe=[],Kt,ht;if(this._eventsCount===0)return fe;for(ht in Kt=this._events)pn.call(Kt,ht)&&fe.push(gt?ht.slice(1):ht);return Object.getOwnPropertySymbols?fe.concat(Object.getOwnPropertySymbols(Kt)):fe},xe.prototype.listeners=function(fe){var Kt=gt?gt+fe:fe,ht=this._events[Kt];if(!ht)return[];if(ht.fn)return[ht.fn];for(var pe=0,Ht=ht.length,he=new Array(Ht);pe<Ht;pe++)he[pe]=ht[pe].fn;return he},xe.prototype.listenerCount=function(fe){var Kt=gt?gt+fe:fe,ht=this._events[Kt];return ht?ht.fn?1:ht.length:0},xe.prototype.emit=function(fe,Kt,ht,pe,Ht,he){var ie=gt?gt+fe:fe;if(!this._events[ie])return!1;var Ct=this._events[ie],Pt=arguments.length,wt,Nt;if(Ct.fn){switch(Ct.once&&this.removeListener(fe,Ct.fn,void 0,!0),Pt){case 1:return Ct.fn.call(Ct.context),!0;case 2:return Ct.fn.call(Ct.context,Kt),!0;case 3:return Ct.fn.call(Ct.context,Kt,ht),!0;case 4:return Ct.fn.call(Ct.context,Kt,ht,pe),!0;case 5:return Ct.fn.call(Ct.context,Kt,ht,pe,Ht),!0;case 6:return Ct.fn.call(Ct.context,Kt,ht,pe,Ht,he),!0}for(Nt=1,wt=new Array(Pt-1);Nt<Pt;Nt++)wt[Nt-1]=arguments[Nt];Ct.fn.apply(Ct.context,wt)}else{var Re=Ct.length,Le;for(Nt=0;Nt<Re;Nt++)switch(Ct[Nt].once&&this.removeListener(fe,Ct[Nt].fn,void 0,!0),Pt){case 1:Ct[Nt].fn.call(Ct[Nt].context);break;case 2:Ct[Nt].fn.call(Ct[Nt].context,Kt);break;case 3:Ct[Nt].fn.call(Ct[Nt].context,Kt,ht);break;case 4:Ct[Nt].fn.call(Ct[Nt].context,Kt,ht,pe);break;default:if(!wt)for(Le=1,wt=new Array(Pt-1);Le<Pt;Le++)wt[Le-1]=arguments[Le];Ct[Nt].fn.apply(Ct[Nt].context,wt)}}return!0},xe.prototype.on=function(fe,Kt,ht){return Ee(this,fe,Kt,ht,!1)},xe.prototype.once=function(fe,Kt,ht){return Ee(this,fe,Kt,ht,!0)},xe.prototype.removeListener=function(fe,Kt,ht,pe){var Ht=gt?gt+fe:fe;if(!this._events[Ht])return this;if(!Kt)return nn(this,Ht),this;var he=this._events[Ht];if(he.fn)he.fn===Kt&&(!pe||he.once)&&(!ht||he.context===ht)&&nn(this,Ht);else{for(var ie=0,Ct=[],Pt=he.length;ie<Pt;ie++)(he[ie].fn!==Kt||pe&&!he[ie].once||ht&&he[ie].context!==ht)&&Ct.push(he[ie]);Ct.length?this._events[Ht]=Ct.length===1?Ct[0]:Ct:nn(this,Ht)}return this},xe.prototype.removeAllListeners=function(fe){var Kt;return fe?(Kt=gt?gt+fe:fe,this._events[Kt]&&nn(this,Kt)):(this._events=new _e,this._eventsCount=0),this},xe.prototype.off=xe.prototype.removeListener,xe.prototype.addListener=xe.prototype.on,xe.prefixed=gt,xe.EventEmitter=xe,Be.exports=xe},69916:function(Be,pn){(function(gt,_e){_e(pn)})(this,function(gt){"use strict";function _e(ie,Ct,Pt,wt){wt=wt||{};var Nt=wt.maxIterations||100,Re=wt.tolerance||1e-10,Le=ie(Ct),In=ie(Pt),un=Pt-Ct;if(Le*In>0)throw"Initial bisect points must have opposite signs";if(Le===0)return Ct;if(In===0)return Pt;for(var Sn=0;Sn<Nt;++Sn){un/=2;var Cn=Ct+un,mn=ie(Cn);if(mn*Le>=0&&(Ct=Cn),Math.abs(un)<Re||mn===0)return Cn}return Ct+un}function H(ie){for(var Ct=new Array(ie),Pt=0;Pt<ie;++Pt)Ct[Pt]=0;return Ct}function Ee(ie,Ct){return H(ie).map(function(){return H(Ct)})}function nn(ie,Ct){for(var Pt=0,wt=0;wt<ie.length;++wt)Pt+=ie[wt]*Ct[wt];return Pt}function xe(ie){return Math.sqrt(nn(ie,ie))}function zt(ie,Ct,Pt){for(var wt=0;wt<Ct.length;++wt)ie[wt]=Ct[wt]*Pt}function fe(ie,Ct,Pt,wt,Nt){for(var Re=0;Re<ie.length;++Re)ie[Re]=Ct*Pt[Re]+wt*Nt[Re]}function Kt(ie,Ct,Pt){Pt=Pt||{};var wt=Pt.maxIterations||Ct.length*200,Nt=Pt.nonZeroDelta||1.05,Re=Pt.zeroDelta||.001,Le=Pt.minErrorDelta||1e-6,In=Pt.minErrorDelta||1e-5,un=Pt.rho!==void 0?Pt.rho:1,Sn=Pt.chi!==void 0?Pt.chi:2,Cn=Pt.psi!==void 0?Pt.psi:-.5,mn=Pt.sigma!==void 0?Pt.sigma:.5,hr,_r=Ct.length,We=new Array(_r+1);We[0]=Ct,We[0].fx=ie(Ct),We[0].id=0;for(var Fe=0;Fe<_r;++Fe){var bi=Ct.slice();bi[Fe]=bi[Fe]?bi[Fe]*Nt:Re,We[Fe+1]=bi,We[Fe+1].fx=ie(bi),We[Fe+1].id=Fe+1}function qi(Wr){for(var kn=0;kn<Wr.length;kn++)We[_r][kn]=Wr[kn];We[_r].fx=Wr.fx}for(var Co=function(Wr,kn){return Wr.fx-kn.fx},Ki=Ct.slice(),wr=Ct.slice(),ot=Ct.slice(),Wa=Ct.slice(),Zi=0;Zi<wt;++Zi){if(We.sort(Co),Pt.history){var _i=We.map(function(Wr){var kn=Wr.slice();return kn.fx=Wr.fx,kn.id=Wr.id,kn});_i.sort(function(Wr,kn){return Wr.id-kn.id}),Pt.history.push({x:We[0].slice(),fx:We[0].fx,simplex:_i})}for(hr=0,Fe=0;Fe<_r;++Fe)hr=Math.max(hr,Math.abs(We[0][Fe]-We[1][Fe]));if(Math.abs(We[0].fx-We[_r].fx)<Le&&hr<In)break;for(Fe=0;Fe<_r;++Fe){Ki[Fe]=0;for(var Ya=0;Ya<_r;++Ya)Ki[Fe]+=We[Ya][Fe];Ki[Fe]/=_r}var ko=We[_r];if(fe(wr,1+un,Ki,-un,ko),wr.fx=ie(wr),wr.fx<We[0].fx)fe(Wa,1+Sn,Ki,-Sn,ko),Wa.fx=ie(Wa),Wa.fx<wr.fx?qi(Wa):qi(wr);else if(wr.fx>=We[_r-1].fx){var hs=!1;if(wr.fx>ko.fx?(fe(ot,1+Cn,Ki,-Cn,ko),ot.fx=ie(ot),ot.fx<ko.fx?qi(ot):hs=!0):(fe(ot,1-Cn*un,Ki,Cn*un,ko),ot.fx=ie(ot),ot.fx<wr.fx?qi(ot):hs=!0),hs){if(mn>=1)break;for(Fe=1;Fe<We.length;++Fe)fe(We[Fe],1-mn,We[0],mn,We[Fe]),We[Fe].fx=ie(We[Fe])}}else qi(wr)}return We.sort(Co),{fx:We[0].fx,x:We[0]}}function ht(ie,Ct,Pt,wt,Nt,Re,Le){var In=Pt.fx,un=nn(Pt.fxprime,Ct),Sn=In,Cn=In,mn=un,hr=0;Nt=Nt||1,Re=Re||1e-6,Le=Le||.1;function _r(Fe,bi,qi){for(var Co=0;Co<16;++Co)if(Nt=(Fe+bi)/2,fe(wt.x,1,Pt.x,Nt,Ct),Sn=wt.fx=ie(wt.x,wt.fxprime),mn=nn(wt.fxprime,Ct),Sn>In+Re*Nt*un||Sn>=qi)bi=Nt;else{if(Math.abs(mn)<=-Le*un)return Nt;mn*(bi-Fe)>=0&&(bi=Fe),Fe=Nt,qi=Sn}return 0}for(var We=0;We<10;++We){if(fe(wt.x,1,Pt.x,Nt,Ct),Sn=wt.fx=ie(wt.x,wt.fxprime),mn=nn(wt.fxprime,Ct),Sn>In+Re*Nt*un||We&&Sn>=Cn)return _r(hr,Nt,Cn);if(Math.abs(mn)<=-Le*un)return Nt;if(mn>=0)return _r(Nt,hr,Sn);Cn=Sn,hr=Nt,Nt*=2}return Nt}function pe(ie,Ct,Pt){var wt={x:Ct.slice(),fx:0,fxprime:Ct.slice()},Nt={x:Ct.slice(),fx:0,fxprime:Ct.slice()},Re=Ct.slice(),Le,In,un=1,Sn;Pt=Pt||{},Sn=Pt.maxIterations||Ct.length*20,wt.fx=ie(wt.x,wt.fxprime),Le=wt.fxprime.slice(),zt(Le,wt.fxprime,-1);for(var Cn=0;Cn<Sn;++Cn){if(un=ht(ie,Le,wt,Nt,un),Pt.history&&Pt.history.push({x:wt.x.slice(),fx:wt.fx,fxprime:wt.fxprime.slice(),alpha:un}),!un)zt(Le,wt.fxprime,-1);else{fe(Re,1,Nt.fxprime,-1,wt.fxprime);var mn=nn(wt.fxprime,wt.fxprime),hr=Math.max(0,nn(Re,Nt.fxprime)/mn);fe(Le,hr,Le,-1,Nt.fxprime),In=wt,wt=Nt,Nt=In}if(xe(wt.fxprime)<=1e-5)break}return Pt.history&&Pt.history.push({x:wt.x.slice(),fx:wt.fx,fxprime:wt.fxprime.slice(),alpha:un}),wt}function Ht(ie,Ct,Pt){Pt=Pt||{};for(var wt=Pt.maxIterations||Ct.length*100,Nt=Pt.learnRate||.001,Re={x:Ct.slice(),fx:0,fxprime:Ct.slice()},Le=0;Le<wt&&(Re.fx=ie(Re.x,Re.fxprime),Pt.history&&Pt.history.push({x:Re.x.slice(),fx:Re.fx,fxprime:Re.fxprime.slice()}),fe(Re.x,1,Re.x,-Nt,Re.fxprime),!(xe(Re.fxprime)<=1e-5));++Le);return Re}function he(ie,Ct,Pt){Pt=Pt||{};var wt={x:Ct.slice(),fx:0,fxprime:Ct.slice()},Nt={x:Ct.slice(),fx:0,fxprime:Ct.slice()},Re=Pt.maxIterations||Ct.length*100,Le=Pt.learnRate||1,In=Ct.slice(),un=Pt.c1||.001,Sn=Pt.c2||.1,Cn,mn=[];if(Pt.history){var hr=ie;ie=function(We,Fe){return mn.push(We.slice()),hr(We,Fe)}}wt.fx=ie(wt.x,wt.fxprime);for(var _r=0;_r<Re&&(zt(In,wt.fxprime,-1),Le=ht(ie,In,wt,Nt,Le,un,Sn),Pt.history&&(Pt.history.push({x:wt.x.slice(),fx:wt.fx,fxprime:wt.fxprime.slice(),functionCalls:mn,learnRate:Le,alpha:Le}),mn=[]),Cn=wt,wt=Nt,Nt=Cn,!(Le===0||xe(wt.fxprime)<1e-5));++_r);return wt}gt.bisect=_e,gt.nelderMead=Kt,gt.conjugateGradient=pe,gt.gradientDescent=Ht,gt.gradientDescentLineSearch=he,gt.zeros=H,gt.zerosM=Ee,gt.norm2=xe,gt.weightedSum=fe,gt.scale=zt})},35171:function(Be){Be.exports=function(gt){return!gt||typeof gt=="string"?!1:gt instanceof Array||Array.isArray(gt)||gt.length>=0&&(gt.splice instanceof Function||Object.getOwnPropertyDescriptor(gt,gt.length-1)&&gt.constructor.name!=="String")}},96486:function(Be,pn,gt){Be=gt.nmd(Be);var _e;(function(){var H,Ee="4.17.21",nn=200,xe="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",zt="Expected a function",fe="Invalid `variable` option passed into `_.template`",Kt="__lodash_hash_undefined__",ht=500,pe="__lodash_placeholder__",Ht=1,he=2,ie=4,Ct=1,Pt=2,wt=1,Nt=2,Re=4,Le=8,In=16,un=32,Sn=64,Cn=128,mn=256,hr=512,_r=30,We="...",Fe=800,bi=16,qi=1,Co=2,Ki=3,wr=1/0,ot=9007199254740991,Wa=17976931348623157e292,Zi=NaN,_i=4294967295,Ya=_i-1,ko=_i>>>1,hs=[["ary",Cn],["bind",wt],["bindKey",Nt],["curry",Le],["curryRight",In],["flip",hr],["partial",un],["partialRight",Sn],["rearg",mn]],Wr="[object Arguments]",kn="[object Array]",Ni="[object AsyncFunction]",va="[object Boolean]",Ha="[object Date]",tu="[object DOMException]",Ys="[object Error]",Qo="[object Function]",Fp="[object GeneratorFunction]",so="[object Map]",xt="[object Number]",nt="[object Null]",Ge="[object Object]",sf="[object Promise]",eu="[object Proxy]",cl="[object RegExp]",ta="[object Set]",ll="[object String]",ul="[object Symbol]",jp="[object Undefined]",ti="[object WeakMap]",Fi="[object WeakSet]",Hs="[object ArrayBuffer]",yc="[object DataView]",On="[object Float32Array]",j="[object Float64Array]",ei="[object Int8Array]",fl="[object Int16Array]",ut="[object Int32Array]",Ua="[object Uint8Array]",Va="[object Uint8ClampedArray]",Ri="[object Uint16Array]",dl="[object Uint32Array]",cf=/\b__p \+= '';/g,Sd=/\b(__p \+=) '' \+/g,Md=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Pd=/&(?:amp|lt|gt|quot|#39);/g,hl=/[&<>"']/g,Gp=RegExp(Pd.source),zp=RegExp(hl.source),Wp=/<%-([\s\S]+?)%>/g,Yp=/<%([\s\S]+?)%>/g,Td=/<%=([\s\S]+?)%>/g,ly=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Hp=/^\w*$/,Xa=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Mn=/[\\^$.*+?()[\]{}|]/g,er=RegExp(Mn.source),lf=/^\s+/,uy=/\s/,Up=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,nu=/\{\n\/\* \[wrapped with (.+)\] \*/,ru=/,? & /,Gt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ea=/[()=,{}\[\]\/\s]/,cr=/\\(\\)?/g,te=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,lr=/\w*$/,Dn=/^[-+]0x[0-9a-f]+$/i,No=/^0b[01]+$/i,mc=/^\[object .+?Constructor\]$/,uf=/^0o[0-7]+$/i,co=/^(?:0|[1-9]\d*)$/,lo=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,z=/($^)/,Y=/['\n\r\u2028\u2029\\]/g,$="\\ud800-\\udfff",K="\\u0300-\\u036f",it="\\ufe20-\\ufe2f",at="\\u20d0-\\u20ff",Q=K+it+at,tt="\\u2700-\\u27bf",lt="a-z\\xdf-\\xf6\\xf8-\\xff",ft="\\xac\\xb1\\xd7\\xf7",Ut="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",It="\\u2000-\\u206f",Yt=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Wt="A-Z\\xc0-\\xd6\\xd8-\\xde",ne="\\ufe0e\\ufe0f",oe=ft+Ut+It+Yt,jt="['\u2019]",Ae="["+$+"]",Ft="["+oe+"]",we="["+Q+"]",re="\\d+",Pe="["+tt+"]",rn="["+lt+"]",uo="[^"+$+oe+re+tt+lt+Wt+"]",fo="\\ud83c[\\udffb-\\udfff]",Ji="(?:"+we+"|"+fo+")",ho="[^"+$+"]",Ro="(?:\\ud83c[\\udde6-\\uddff]){2}",fn="[\\ud800-\\udbff][\\udc00-\\udfff]",zn="["+Wt+"]",iu="\\u200d",Vp="(?:"+rn+"|"+uo+")",xc="(?:"+zn+"|"+uo+")",$a="(?:"+jt+"(?:d|ll|m|re|s|t|ve))?",Br="(?:"+jt+"(?:D|LL|M|RE|S|T|VE))?",pl=Ji+"?",vl="["+ne+"]?",ue="(?:"+iu+"(?:"+[ho,Ro,fn].join("|")+")"+vl+pl+")*",qa="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ga="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",fy=vl+pl+ue,gl="(?:"+[Pe,Ro,fn].join("|")+")"+fy,po="(?:"+[ho+we+"?",we,Ro,fn,Ae].join("|")+")",Ad=RegExp(jt,"g"),pr=RegExp(we,"g"),Xp=RegExp(fo+"(?="+fo+")|"+po+fy,"g"),Cd=RegExp([zn+"?"+rn+"+"+$a+"(?="+[Ft,zn,"$"].join("|")+")",xc+"+"+Br+"(?="+[Ft,zn+Vp,"$"].join("|")+")",zn+"?"+Vp+"+"+$a,zn+"+"+Br,ga,qa,re,gl].join("|"),"g"),Pn=RegExp("["+iu+$+Q+ne+"]"),ya=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,dy=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],g_=-1,nr={};nr[On]=nr[j]=nr[ei]=nr[fl]=nr[ut]=nr[Ua]=nr[Va]=nr[Ri]=nr[dl]=!0,nr[Wr]=nr[kn]=nr[Hs]=nr[va]=nr[yc]=nr[Ha]=nr[Ys]=nr[Qo]=nr[so]=nr[xt]=nr[Ge]=nr[cl]=nr[ta]=nr[ll]=nr[ti]=!1;var Xn={};Xn[Wr]=Xn[kn]=Xn[Hs]=Xn[yc]=Xn[va]=Xn[Ha]=Xn[On]=Xn[j]=Xn[ei]=Xn[fl]=Xn[ut]=Xn[so]=Xn[xt]=Xn[Ge]=Xn[cl]=Xn[ta]=Xn[ll]=Xn[ul]=Xn[Ua]=Xn[Va]=Xn[Ri]=Xn[dl]=!0,Xn[Ys]=Xn[Qo]=Xn[ti]=!1;var y_={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},wi={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ji={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},kd={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Nd=parseFloat,Rd=parseInt,bc=typeof gt.g=="object"&&gt.g&&gt.g.Object===Object&&gt.g,hy=typeof self=="object"&&self&&self.Object===Object&&self,Gi=bc||hy||Function("return this")(),Ka=pn&&!pn.nodeType&&pn,Li=Ka&&!0&&Be&&!Be.nodeType&&Be,Za=Li&&Li.exports===Ka,$p=Za&&bc.process,Sr=function(){try{var ct=Li&&Li.require&&Li.require("util").types;return ct||$p&&$p.binding&&$p.binding("util")}catch(Ot){}}(),ou=Sr&&Sr.isArrayBuffer,py=Sr&&Sr.isDate,qp=Sr&&Sr.isMap,vy=Sr&&Sr.isRegExp,gy=Sr&&Sr.isSet,yy=Sr&&Sr.isTypedArray;function Lo(ct,Ot,yt){switch(yt.length){case 0:return ct.call(Ot);case 1:return ct.call(Ot,yt[0]);case 2:return ct.call(Ot,yt[0],yt[1]);case 3:return ct.call(Ot,yt[0],yt[1],yt[2])}return ct.apply(Ot,yt)}function Ld(ct,Ot,yt,me){for(var Ze=-1,Wn=ct==null?0:ct.length;++Ze<Wn;){var Oi=ct[Ze];Ot(me,Oi,yt(Oi),ct)}return me}function vo(ct,Ot){for(var yt=-1,me=ct==null?0:ct.length;++yt<me&&Ot(ct[yt],yt,ct)!==!1;);return ct}function Id(ct,Ot){for(var yt=ct==null?0:ct.length;yt--&&Ot(ct[yt],yt,ct)!==!1;);return ct}function my(ct,Ot){for(var yt=-1,me=ct==null?0:ct.length;++yt<me;)if(!Ot(ct[yt],yt,ct))return!1;return!0}function _c(ct,Ot){for(var yt=-1,me=ct==null?0:ct.length,Ze=0,Wn=[];++yt<me;){var Oi=ct[yt];Ot(Oi,yt,ct)&&(Wn[Ze++]=Oi)}return Wn}function Dd(ct,Ot){var yt=ct==null?0:ct.length;return!!yt&&ff(ct,Ot,0)>-1}function Kp(ct,Ot,yt){for(var me=-1,Ze=ct==null?0:ct.length;++me<Ze;)if(yt(Ot,ct[me]))return!0;return!1}function Or(ct,Ot){for(var yt=-1,me=ct==null?0:ct.length,Ze=Array(me);++yt<me;)Ze[yt]=Ot(ct[yt],yt,ct);return Ze}function wc(ct,Ot){for(var yt=-1,me=Ot.length,Ze=ct.length;++yt<me;)ct[Ze+yt]=Ot[yt];return ct}function Zp(ct,Ot,yt,me){var Ze=-1,Wn=ct==null?0:ct.length;for(me&&Wn&&(yt=ct[++Ze]);++Ze<Wn;)yt=Ot(yt,ct[Ze],Ze,ct);return yt}function m_(ct,Ot,yt,me){var Ze=ct==null?0:ct.length;for(me&&Ze&&(yt=ct[--Ze]);Ze--;)yt=Ot(yt,ct[Ze],Ze,ct);return yt}function Jp(ct,Ot){for(var yt=-1,me=ct==null?0:ct.length;++yt<me;)if(Ot(ct[yt],yt,ct))return!0;return!1}var Bd=xy("length");function x_(ct){return ct.split("")}function Fd(ct){return ct.match(Gt)||[]}function jd(ct,Ot,yt){var me;return yt(ct,function(Ze,Wn,Oi){if(Ot(Ze,Wn,Oi))return me=Wn,!1}),me}function Qp(ct,Ot,yt,me){for(var Ze=ct.length,Wn=yt+(me?1:-1);me?Wn--:++Wn<Ze;)if(Ot(ct[Wn],Wn,ct))return Wn;return-1}function ff(ct,Ot,yt){return Ot===Ot?P_(ct,Ot,yt):Qp(ct,b_,yt)}function tv(ct,Ot,yt,me){for(var Ze=yt-1,Wn=ct.length;++Ze<Wn;)if(me(ct[Ze],Ot))return Ze;return-1}function b_(ct){return ct!==ct}function __(ct,Ot){var yt=ct==null?0:ct.length;return yt?_y(ct,Ot)/yt:Zi}function xy(ct){return function(Ot){return Ot==null?H:Ot[ct]}}function by(ct){return function(Ot){return ct==null?H:ct[Ot]}}function w_(ct,Ot,yt,me,Ze){return Ze(ct,function(Wn,Oi,ur){yt=me?(me=!1,Wn):Ot(yt,Wn,Oi,ur)}),yt}function iA(ct,Ot){var yt=ct.length;for(ct.sort(Ot);yt--;)ct[yt]=ct[yt].value;return ct}function _y(ct,Ot){for(var yt,me=-1,Ze=ct.length;++me<Ze;){var Wn=Ot(ct[me]);Wn!==H&&(yt=yt===H?Wn:yt+Wn)}return yt}function wy(ct,Ot){for(var yt=-1,me=Array(ct);++yt<ct;)me[yt]=Ot(yt);return me}function oA(ct,Ot){return Or(Ot,function(yt){return[yt,ct[yt]]})}function O_(ct){return ct&&ct.slice(0,Sy(ct)+1).replace(lf,"")}function ma(ct){return function(Ot){return ct(Ot)}}function Oy(ct,Ot){return Or(Ot,function(yt){return ct[yt]})}function Gd(ct,Ot){return ct.has(Ot)}function E_(ct,Ot){for(var yt=-1,me=ct.length;++yt<me&&ff(Ot,ct[yt],0)>-1;);return yt}function S_(ct,Ot){for(var yt=ct.length;yt--&&ff(Ot,ct[yt],0)>-1;);return yt}function aA(ct,Ot){for(var yt=ct.length,me=0;yt--;)ct[yt]===Ot&&++me;return me}var sA=by(y_),cA=by(wi);function lA(ct){return"\\"+kd[ct]}function uA(ct,Ot){return ct==null?H:ct[Ot]}function df(ct){return Pn.test(ct)}function fA(ct){return ya.test(ct)}function dA(ct){for(var Ot,yt=[];!(Ot=ct.next()).done;)yt.push(Ot.value);return yt}function Ey(ct){var Ot=-1,yt=Array(ct.size);return ct.forEach(function(me,Ze){yt[++Ot]=[Ze,me]}),yt}function M_(ct,Ot){return function(yt){return ct(Ot(yt))}}function yl(ct,Ot){for(var yt=-1,me=ct.length,Ze=0,Wn=[];++yt<me;){var Oi=ct[yt];(Oi===Ot||Oi===pe)&&(ct[yt]=pe,Wn[Ze++]=yt)}return Wn}function ev(ct){var Ot=-1,yt=Array(ct.size);return ct.forEach(function(me){yt[++Ot]=me}),yt}function rr(ct){var Ot=-1,yt=Array(ct.size);return ct.forEach(function(me){yt[++Ot]=[me,me]}),yt}function P_(ct,Ot,yt){for(var me=yt-1,Ze=ct.length;++me<Ze;)if(ct[me]===Ot)return me;return-1}function na(ct,Ot,yt){for(var me=yt+1;me--;)if(ct[me]===Ot)return me;return me}function au(ct){return df(ct)?pA(ct):Bd(ct)}function Ja(ct){return df(ct)?vA(ct):x_(ct)}function Sy(ct){for(var Ot=ct.length;Ot--&&uy.test(ct.charAt(Ot)););return Ot}var hA=by(ji);function pA(ct){for(var Ot=Xp.lastIndex=0;Xp.test(ct);)++Ot;return Ot}function vA(ct){return ct.match(Xp)||[]}function gA(ct){return ct.match(Cd)||[]}var yA=function ct(Ot){Ot=Ot==null?Gi:nv.defaults(Gi.Object(),Ot,nv.pick(Gi,dy));var yt=Ot.Array,me=Ot.Date,Ze=Ot.Error,Wn=Ot.Function,Oi=Ot.Math,ur=Ot.Object,My=Ot.RegExp,mA=Ot.String,xa=Ot.TypeError,zd=yt.prototype,xA=Wn.prototype,su=ur.prototype,rv=Ot["__core-js_shared__"],Yn=xA.toString,ir=su.hasOwnProperty,bA=0,T_=function(){var g=/[^.]+$/.exec(rv&&rv.keys&&rv.keys.IE_PROTO||"");return g?"Symbol(src)_1."+g:""}(),Wd=su.toString,A_=Yn.call(ur),_A=Gi._,wA=My("^"+Yn.call(ir).replace(Mn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),iv=Za?Ot.Buffer:H,ml=Ot.Symbol,ov=Ot.Uint8Array,C_=iv?iv.allocUnsafe:H,av=M_(ur.getPrototypeOf,ur),k_=ur.create,ze=su.propertyIsEnumerable,sv=zd.splice,zi=ml?ml.isConcatSpreadable:H,Yd=ml?ml.iterator:H,cu=ml?ml.toStringTag:H,ni=function(){try{var g=Sl(ur,"defineProperty");return g({},"",{}),g}catch(x){}}(),OA=Ot.clearTimeout!==Gi.clearTimeout&&Ot.clearTimeout,EA=me&&me.now!==Gi.Date.now&&me.now,SA=Ot.setTimeout!==Gi.setTimeout&&Ot.setTimeout,cv=Oi.ceil,Hd=Oi.floor,lv=ur.getOwnPropertySymbols,MA=iv?iv.isBuffer:H,Ud=Ot.isFinite,PA=zd.join,Us=M_(ur.keys,ur),Ii=Oi.max,Qi=Oi.min,ba=me.now,TA=Ot.parseInt,N_=Oi.random,Vs=zd.reverse,Io=Sl(Ot,"DataView"),Vd=Sl(Ot,"Map"),Py=Sl(Ot,"Promise"),Qa=Sl(Ot,"Set"),hf=Sl(Ot,"WeakMap"),pf=Sl(ur,"create"),uv=hf&&new hf,vf={},AA=Oa(Io),CA=Oa(Vd),kA=Oa(Py),Oc=Oa(Qa),NA=Oa(hf),fv=ml?ml.prototype:H,Xd=fv?fv.valueOf:H,R_=fv?fv.toString:H;function U(g){if(Fr(g)&&!$e(g)&&!(g instanceof xn)){if(g instanceof Do)return g;if(ir.call(g,"__wrapped__"))return Tf(g)}return new Do(g)}var lu=function(){function g(){}return function(x){if(!Ur(x))return{};if(k_)return k_(x);g.prototype=x;var P=new g;return g.prototype=H,P}}();function dv(){}function Do(g,x){this.__wrapped__=g,this.__actions__=[],this.__chain__=!!x,this.__index__=0,this.__values__=H}U.templateSettings={escape:Wp,evaluate:Yp,interpolate:Td,variable:"",imports:{_:U}},U.prototype=dv.prototype,U.prototype.constructor=U,Do.prototype=lu(dv.prototype),Do.prototype.constructor=Do;function xn(g){this.__wrapped__=g,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=_i,this.__views__=[]}function RA(){var g=new xn(this.__wrapped__);return g.__actions__=$n(this.__actions__),g.__dir__=this.__dir__,g.__filtered__=this.__filtered__,g.__iteratees__=$n(this.__iteratees__),g.__takeCount__=this.__takeCount__,g.__views__=$n(this.__views__),g}function LA(){if(this.__filtered__){var g=new xn(this);g.__dir__=-1,g.__filtered__=!0}else g=this.clone(),g.__dir__*=-1;return g}function IA(){var g=this.__wrapped__.value(),x=this.__dir__,P=$e(g),L=x<0,W=P?g.length:0,V=tm(0,W,this.__views__),Z=V.start,rt=V.end,st=rt-Z,Tt=L?rt:Z-1,At=this.__iteratees__,Mt=At.length,ae=0,Oe=Qi(st,this.__takeCount__);if(!P||!L&&W==st&&Oe==st)return mu(g,this.__actions__);var Ce=[];t:for(;st--&&ae<Oe;){Tt+=x;for(var ke=-1,Ne=g[Tt];++ke<Mt;){var vn=At[ke],cn=vn.iteratee,Gr=vn.type,wo=cn(Ne);if(Gr==Co)Ne=wo;else if(!wo){if(Gr==qi)continue t;break t}}Ce[ae++]=Ne}return Ce}xn.prototype=lu(dv.prototype),xn.prototype.constructor=xn;function uu(g){var x=-1,P=g==null?0:g.length;for(this.clear();++x<P;){var L=g[x];this.set(L[0],L[1])}}function DA(){this.__data__=pf?pf(null):{},this.size=0}function BA(g){var x=this.has(g)&&delete this.__data__[g];return this.size-=x?1:0,x}function FA(g){var x=this.__data__;if(pf){var P=x[g];return P===Kt?H:P}return ir.call(x,g)?x[g]:H}function jA(g){var x=this.__data__;return pf?x[g]!==H:ir.call(x,g)}function GA(g,x){var P=this.__data__;return this.size+=this.has(g)?0:1,P[g]=pf&&x===H?Kt:x,this}uu.prototype.clear=DA,uu.prototype.delete=BA,uu.prototype.get=FA,uu.prototype.has=jA,uu.prototype.set=GA;function Ec(g){var x=-1,P=g==null?0:g.length;for(this.clear();++x<P;){var L=g[x];this.set(L[0],L[1])}}function zA(){this.__data__=[],this.size=0}function WA(g){var x=this.__data__,P=hv(x,g);if(P<0)return!1;var L=x.length-1;return P==L?x.pop():sv.call(x,P,1),--this.size,!0}function YA(g){var x=this.__data__,P=hv(x,g);return P<0?H:x[P][1]}function HA(g){return hv(this.__data__,g)>-1}function UA(g,x){var P=this.__data__,L=hv(P,g);return L<0?(++this.size,P.push([g,x])):P[L][1]=x,this}Ec.prototype.clear=zA,Ec.prototype.delete=WA,Ec.prototype.get=YA,Ec.prototype.has=HA,Ec.prototype.set=UA;function Sc(g){var x=-1,P=g==null?0:g.length;for(this.clear();++x<P;){var L=g[x];this.set(L[0],L[1])}}function VA(){this.size=0,this.__data__={hash:new uu,map:new(Vd||Ec),string:new uu}}function XA(g){var x=Ef(this,g).delete(g);return this.size-=x?1:0,x}function L_(g){return Ef(this,g).get(g)}function I_(g){return Ef(this,g).has(g)}function $A(g,x){var P=Ef(this,g),L=P.size;return P.set(g,x),this.size+=P.size==L?0:1,this}Sc.prototype.clear=VA,Sc.prototype.delete=XA,Sc.prototype.get=L_,Sc.prototype.has=I_,Sc.prototype.set=$A;function fu(g){var x=-1,P=g==null?0:g.length;for(this.__data__=new Sc;++x<P;)this.add(g[x])}function qA(g){return this.__data__.set(g,Kt),this}function KA(g){return this.__data__.has(g)}fu.prototype.add=fu.prototype.push=qA,fu.prototype.has=KA;function ps(g){var x=this.__data__=new Ec(g);this.size=x.size}function ZA(){this.__data__=new Ec,this.size=0}function JA(g){var x=this.__data__,P=x.delete(g);return this.size=x.size,P}function QA(g){return this.__data__.get(g)}function tC(g){return this.__data__.has(g)}function eC(g,x){var P=this.__data__;if(P instanceof Ec){var L=P.__data__;if(!Vd||L.length<nn-1)return L.push([g,x]),this.size=++P.size,this;P=this.__data__=new Sc(L)}return P.set(g,x),this.size=P.size,this}ps.prototype.clear=ZA,ps.prototype.delete=JA,ps.prototype.get=QA,ps.prototype.has=tC,ps.prototype.set=eC;function D_(g,x){var P=$e(g),L=!P&&Al(g),W=!P&&!L&&nc(g),V=!P&&!L&&!W&&Cl(g),Z=P||L||W||V,rt=Z?wy(g.length,mA):[],st=rt.length;for(var Tt in g)(x||ir.call(g,Tt))&&!(Z&&(Tt=="length"||W&&(Tt=="offset"||Tt=="parent")||V&&(Tt=="buffer"||Tt=="byteLength"||Tt=="byteOffset")||Qs(Tt,st)))&&rt.push(Tt);return rt}function Ty(g){var x=g.length;return x?g[mv(0,x-1)]:H}function nC(g,x){return tc($n(g),di(x,0,g.length))}function rC(g){return tc($n(g))}function Ay(g,x,P){(P!==H&&!es(g[x],P)||P===H&&!(x in g))&&Mc(g,x,P)}function $d(g,x,P){var L=g[x];(!(ir.call(g,x)&&es(L,P))||P===H&&!(x in g))&&Mc(g,x,P)}function hv(g,x){for(var P=g.length;P--;)if(es(g[P][0],x))return P;return-1}function iC(g,x,P,L){return $s(g,function(W,V,Z){x(L,W,P(W),Z)}),L}function B_(g,x){return g&&ts(x,hi(x),g)}function oC(g,x){return g&&ts(x,Yo(x),g)}function Mc(g,x,P){x=="__proto__"&&ni?ni(g,x,{configurable:!0,enumerable:!0,value:P,writable:!0}):g[x]=P}function Je(g,x){for(var P=-1,L=x.length,W=yt(L),V=g==null;++P<L;)W[P]=V?H:i0(g,x[P]);return W}function di(g,x,P){return g===g&&(P!==H&&(g=g<=P?g:P),x!==H&&(g=g>=x?g:x)),g}function Lt(g,x,P,L,W,V){var Z,rt=x&Ht,st=x&he,Tt=x&ie;if(P&&(Z=W?P(g,L,W,V):P(g)),Z!==H)return Z;if(!Ur(g))return g;var At=$e(g);if(At){if(Z=em(g),!rt)return $n(g,Z)}else{var Mt=no(g),ae=Mt==Qo||Mt==Fp;if(nc(g))return wv(g,rt);if(Mt==Ge||Mt==Wr||ae&&!W){if(Z=st||ae?{}:Nv(g),!rt)return st?Xy(g,oC(Z,g)):Q_(g,B_(Z,g))}else{if(!Xn[Mt])return W?g:{};Z=nm(g,Mt,rt)}}V||(V=new ps);var Oe=V.get(g);if(Oe)return Oe;V.set(g,Z),Fm(g)?g.forEach(function(Ne){Z.add(Lt(Ne,x,P,Ne,g,V))}):Im(g)&&g.forEach(function(Ne,vn){Z.set(vn,Lt(Ne,x,P,vn,g,V))});var Ce=Tt?st?eo:Dc:st?Yo:hi,ke=At?H:Ce(g);return vo(ke||g,function(Ne,vn){ke&&(vn=Ne,Ne=g[vn]),$d(Z,vn,Lt(Ne,x,P,vn,g,V))}),Z}function Qe(g){var x=hi(g);return function(P){return Cy(P,g,x)}}function Cy(g,x,P){var L=P.length;if(g==null)return!L;for(g=ur(g);L--;){var W=P[L],V=x[W],Z=g[W];if(Z===H&&!(W in g)||!V(Z))return!1}return!0}function Nn(g,x,P){if(typeof g!="function")throw new xa(zt);return Pf(function(){g.apply(H,P)},x)}function Xs(g,x,P,L){var W=-1,V=Dd,Z=!0,rt=g.length,st=[],Tt=x.length;if(!rt)return st;P&&(x=Or(x,ma(P))),L?(V=Kp,Z=!1):x.length>=nn&&(V=Gd,Z=!1,x=new fu(x));t:for(;++W<rt;){var At=g[W],Mt=P==null?At:P(At);if(At=L||At!==0?At:0,Z&&Mt===Mt){for(var ae=Tt;ae--;)if(x[ae]===Mt)continue t;st.push(At)}else V(x,Mt,L)||st.push(At)}return st}var $s=Lc(vs),pv=Lc(du,!0);function ky(g,x){var P=!0;return $s(g,function(L,W,V){return P=!!x(L,W,V),P}),P}function gf(g,x,P){for(var L=-1,W=g.length;++L<W;){var V=g[L],Z=x(V);if(Z!=null&&(rt===H?Z===Z&&!aa(Z):P(Z,rt)))var rt=Z,st=V}return st}function Ny(g,x,P,L){var W=g.length;for(P=an(P),P<0&&(P=-P>W?0:W+P),L=L===H||L>W?W:an(L),L<0&&(L+=W),L=P>L?0:jm(L);P<L;)g[P++]=x;return g}function Ry(g,x){var P=[];return $s(g,function(L,W,V){x(L,W,V)&&P.push(L)}),P}function Wi(g,x,P,L,W){var V=-1,Z=g.length;for(P||(P=im),W||(W=[]);++V<Z;){var rt=g[V];x>0&&P(rt)?x>1?Wi(rt,x-1,P,L,W):wc(W,rt):L||(W[W.length]=rt)}return W}var Pc=Sv(),Ly=Sv(!0);function vs(g,x){return g&&Pc(g,x,hi)}function du(g,x){return g&&Ly(g,x,hi)}function qd(g,x){return _c(x,function(P){return rc(g[P])})}function xl(g,x){x=Nc(x,g);for(var P=0,L=x.length;g!=null&&P<L;)g=g[ec(x[P++])];return P&&P==L?g:H}function Iy(g,x,P){var L=x(g);return $e(g)?L:wc(L,P(g))}function go(g){return g==null?g===H?jp:nt:cu&&cu in ur(g)?kv(g):c2(g)}function vv(g,x){return g>x}function F_(g,x){return g!=null&&ir.call(g,x)}function j_(g,x){return g!=null&&x in ur(g)}function Tc(g,x,P){return g>=Qi(x,P)&&g<Ii(x,P)}function gs(g,x,P){for(var L=P?Kp:Dd,W=g[0].length,V=g.length,Z=V,rt=yt(V),st=1/0,Tt=[];Z--;){var At=g[Z];Z&&x&&(At=Or(At,ma(x))),st=Qi(At.length,st),rt[Z]=!P&&(x||W>=120&&At.length>=120)?new fu(Z&&At):H}At=g[0];var Mt=-1,ae=rt[0];t:for(;++Mt<W&&Tt.length<st;){var Oe=At[Mt],Ce=x?x(Oe):Oe;if(Oe=P||Oe!==0?Oe:0,!(ae?Gd(ae,Ce):L(Tt,Ce,P))){for(Z=V;--Z;){var ke=rt[Z];if(!(ke?Gd(ke,Ce):L(g[Z],Ce,P)))continue t}ae&&ae.push(Ce),Tt.push(Oe)}}return Tt}function gv(g,x,P,L){return vs(g,function(W,V,Z){x(L,P(W),V,Z)}),L}function hu(g,x,P){x=Nc(x,g),g=uh(g,x);var L=g==null?g:g[ec(Bo(x))];return L==null?H:Lo(L,g,P)}function Dy(g){return Fr(g)&&go(g)==Wr}function G_(g){return Fr(g)&&go(g)==Hs}function z_(g){return Fr(g)&&go(g)==Ha}function pu(g,x,P,L,W){return g===x?!0:g==null||x==null||!Fr(g)&&!Fr(x)?g!==g&&x!==x:W_(g,x,P,L,pu,W)}function W_(g,x,P,L,W,V){var Z=$e(g),rt=$e(x),st=Z?kn:no(g),Tt=rt?kn:no(x);st=st==Wr?Ge:st,Tt=Tt==Wr?Ge:Tt;var At=st==Ge,Mt=Tt==Ge,ae=st==Tt;if(ae&&nc(g)){if(!nc(x))return!1;Z=!0,At=!1}if(ae&&!At)return V||(V=new ps),Z||Cl(g)?Jy(g,x,P,L,W,V):Qy(g,x,st,P,L,W,V);if(!(P&Ct)){var Oe=At&&ir.call(g,"__wrapped__"),Ce=Mt&&ir.call(x,"__wrapped__");if(Oe||Ce){var ke=Oe?g.value():g,Ne=Ce?x.value():x;return V||(V=new ps),W(ke,Ne,P,L,V)}}return ae?(V||(V=new ps),r2(g,x,P,L,W,V)):!1}function Y_(g){return Fr(g)&&no(g)==so}function Kd(g,x,P,L){var W=P.length,V=W,Z=!L;if(g==null)return!V;for(g=ur(g);W--;){var rt=P[W];if(Z&&rt[2]?rt[1]!==g[rt[0]]:!(rt[0]in g))return!1}for(;++W<V;){rt=P[W];var st=rt[0],Tt=g[st],At=rt[1];if(Z&&rt[2]){if(Tt===H&&!(st in g))return!1}else{var Mt=new ps;if(L)var ae=L(Tt,At,st,g,x,Mt);if(!(ae===H?pu(At,Tt,Ct|Pt,L,Mt):ae))return!1}}return!0}function Zd(g){if(!Ur(g)||sh(g))return!1;var x=rc(g)?wA:mc;return x.test(Oa(g))}function ri(g){return Fr(g)&&go(g)==cl}function Ac(g){return Fr(g)&&no(g)==ta}function Cc(g){return Fr(g)&&Lf(g.length)&&!!nr[go(g)]}function By(g){return typeof g=="function"?g:g==null?sn:typeof g=="object"?$e(g)?yf(g[0],g[1]):jy(g):v0(g)}function qs(g){if(!ch(g))return Us(g);var x=[];for(var P in ur(g))ir.call(g,P)&&P!="constructor"&&x.push(P);return x}function H_(g){if(!Ur(g))return sm(g);var x=ch(g),P=[];for(var L in g)L=="constructor"&&(x||!ir.call(g,L))||P.push(L);return P}function kc(g,x){return g<x}function Fy(g,x){var P=-1,L=xo(g)?yt(g.length):[];return $s(g,function(W,V,Z){L[++P]=x(W,V,Z)}),L}function jy(g){var x=ah(g);return x.length==1&&x[0][2]?s2(x[0][0],x[0][1]):function(P){return P===g||Kd(P,g,x)}}function yf(g,x){return om(g)&&a2(x)?s2(ec(g),x):function(P){var L=i0(P,g);return L===H&&L===x?o0(P,g):pu(x,L,Ct|Pt)}}function vu(g,x,P,L,W){g!==x&&Pc(x,function(V,Z){if(W||(W=new ps),Ur(V))U_(g,x,Z,P,vu,L,W);else{var rt=L?L(Rv(g,Z),V,Z+"",g,x,W):H;rt===H&&(rt=V),Ay(g,Z,rt)}},Yo)}function U_(g,x,P,L,W,V,Z){var rt=Rv(g,P),st=Rv(x,P),Tt=Z.get(st);if(Tt){Ay(g,P,Tt);return}var At=V?V(rt,st,P+"",g,x,Z):H,Mt=At===H;if(Mt){var ae=$e(st),Oe=!ae&&nc(st),Ce=!ae&&!Oe&&Cl(st);At=st,ae||Oe||Ce?$e(rt)?At=rt:Hr(rt)?At=$n(rt):Oe?(Mt=!1,At=wv(st,!0)):Ce?(Mt=!1,At=wl(st,!0)):At=[]:zc(st)||Al(st)?(At=rt,Al(rt)?At=Gm(rt):(!Ur(rt)||rc(rt))&&(At=Nv(st))):Mt=!1}Mt&&(Z.set(st,At),W(At,st,L,V,Z),Z.delete(st)),Ay(g,P,At)}function yv(g,x){var P=g.length;if(P)return x+=x<0?P:0,Qs(x,P)?g[x]:H}function Gy(g,x,P){x.length?x=Or(x,function(V){return $e(V)?function(Z){return xl(Z,V.length===1?V[0]:V)}:V}):x=[sn];var L=-1;x=Or(x,ma(Te()));var W=Fy(g,function(V,Z,rt){var st=Or(x,function(Tt){return Tt(V)});return{criteria:st,index:++L,value:V}});return iA(W,function(V,Z){return th(V,Z,P)})}function bl(g,x){return zy(g,x,function(P,L){return o0(g,L)})}function zy(g,x,P){for(var L=-1,W=x.length,V={};++L<W;){var Z=x[L],rt=xl(g,Z);P(rt,Z)&&xf(V,Nc(Z,g),rt)}return V}function Wy(g){return function(x){return xl(x,g)}}function gu(g,x,P,L){var W=L?tv:ff,V=-1,Z=x.length,rt=g;for(g===x&&(x=$n(x)),P&&(rt=Or(g,ma(P)));++V<Z;)for(var st=0,Tt=x[V],At=P?P(Tt):Tt;(st=W(rt,At,st,L))>-1;)rt!==g&&sv.call(rt,st,1),sv.call(g,st,1);return g}function Yy(g,x){for(var P=g?x.length:0,L=P-1;P--;){var W=x[P];if(P==L||W!==V){var V=W;Qs(W)?sv.call(g,W,1):Zs(g,W)}}return g}function mv(g,x){return g+Hd(N_()*(x-g+1))}function yu(g,x,P,L){for(var W=-1,V=Ii(cv((x-g)/(P||1)),0),Z=yt(V);V--;)Z[L?V:++W]=g,g+=P;return Z}function mf(g,x){var P="";if(!g||x<1||x>ot)return P;do x%2&&(P+=g),x=Hd(x/2),x&&(g+=g);while(x);return P}function on(g,x){return fh(lh(g,x,sn),g+"")}function V_(g){return Ty(bo(g))}function xv(g,x){var P=bo(g);return tc(P,di(x,0,P.length))}function xf(g,x,P,L){if(!Ur(g))return g;x=Nc(x,g);for(var W=-1,V=x.length,Z=V-1,rt=g;rt!=null&&++W<V;){var st=ec(x[W]),Tt=P;if(st==="__proto__"||st==="constructor"||st==="prototype")return g;if(W!=Z){var At=rt[st];Tt=L?L(At,st,rt):H,Tt===H&&(Tt=Ur(At)?At:Qs(x[W+1])?[]:{})}$d(rt,st,Tt),rt=rt[st]}return g}var le=uv?function(g,x){return uv.set(g,x),g}:sn,X_=ni?function(g,x){return ni(g,"toString",{configurable:!0,enumerable:!1,value:Cu(x),writable:!0})}:sn;function $_(g){return tc(bo(g))}function ra(g,x,P){var L=-1,W=g.length;x<0&&(x=-x>W?0:W+x),P=P>W?W:P,P<0&&(P+=W),W=x>P?0:P-x>>>0,x>>>=0;for(var V=yt(W);++L<W;)V[L]=g[L+x];return V}function q_(g,x){var P;return $s(g,function(L,W,V){return P=x(L,W,V),!P}),!!P}function Ks(g,x,P){var L=0,W=g==null?L:g.length;if(typeof x=="number"&&x===x&&W<=ko){for(;L<W;){var V=L+W>>>1,Z=g[V];Z!==null&&!aa(Z)&&(P?Z<=x:Z<x)?L=V+1:W=V}return W}return Yi(g,x,sn,P)}function Yi(g,x,P,L){var W=0,V=g==null?0:g.length;if(V===0)return 0;x=P(x);for(var Z=x!==x,rt=x===null,st=aa(x),Tt=x===H;W<V;){var At=Hd((W+V)/2),Mt=P(g[At]),ae=Mt!==H,Oe=Mt===null,Ce=Mt===Mt,ke=aa(Mt);if(Z)var Ne=L||Ce;else Tt?Ne=Ce&&(L||ae):rt?Ne=Ce&&ae&&(L||!Oe):st?Ne=Ce&&ae&&!Oe&&(L||!ke):Oe||ke?Ne=!1:Ne=L?Mt<=x:Mt<x;Ne?W=At+1:V=At}return Qi(V,Ya)}function Jd(g,x){for(var P=-1,L=g.length,W=0,V=[];++P<L;){var Z=g[P],rt=x?x(Z):Z;if(!P||!es(rt,st)){var st=rt;V[W++]=Z===0?0:Z}}return V}function bf(g){return typeof g=="number"?g:aa(g)?Zi:+g}function yo(g){if(typeof g=="string")return g;if($e(g))return Or(g,yo)+"";if(aa(g))return R_?R_.call(g):"";var x=g+"";return x=="0"&&1/g==-wr?"-0":x}function ia(g,x,P){var L=-1,W=Dd,V=g.length,Z=!0,rt=[],st=rt;if(P)Z=!1,W=Kp;else if(V>=nn){var Tt=x?null:e2(g);if(Tt)return ev(Tt);Z=!1,W=Gd,st=new fu}else st=x?[]:rt;t:for(;++L<V;){var At=g[L],Mt=x?x(At):At;if(At=P||At!==0?At:0,Z&&Mt===Mt){for(var ae=st.length;ae--;)if(st[ae]===Mt)continue t;x&&st.push(Mt),rt.push(At)}else W(st,Mt,P)||(st!==rt&&st.push(Mt),rt.push(At))}return rt}function Zs(g,x){return x=Nc(x,g),g=uh(g,x),g==null||delete g[ec(Bo(x))]}function _l(g,x,P,L){return xf(g,x,P(xl(g,x)),L)}function Js(g,x,P,L){for(var W=g.length,V=L?W:-1;(L?V--:++V<W)&&x(g[V],V,g););return P?ra(g,L?0:V,L?V+1:W):ra(g,L?V+1:0,L?W:V)}function mu(g,x){var P=g;return P instanceof xn&&(P=P.value()),Zp(x,function(L,W){return W.func.apply(W.thisArg,wc([L],W.args))},P)}function _a(g,x,P){var L=g.length;if(L<2)return L?ia(g[0]):[];for(var W=-1,V=yt(L);++W<L;)for(var Z=g[W],rt=-1;++rt<L;)rt!=W&&(V[W]=Xs(V[W]||Z,g[rt],x,P));return ia(Wi(V,1),x,P)}function Hy(g,x,P){for(var L=-1,W=g.length,V=x.length,Z={};++L<W;){var rt=L<V?x[L]:H;P(Z,g[L],rt)}return Z}function bv(g){return Hr(g)?g:[]}function _v(g){return typeof g=="function"?g:sn}function Nc(g,x){return $e(g)?g:om(g,x)?[g]:Ml(Rn(g))}var K_=on;function Rc(g,x,P){var L=g.length;return P=P===H?L:P,!x&&P>=L?g:ra(g,x,P)}var Uy=OA||function(g){return Gi.clearTimeout(g)};function wv(g,x){if(x)return g.slice();var P=g.length,L=C_?C_(P):new g.constructor(P);return g.copy(L),L}function Qd(g){var x=new g.constructor(g.byteLength);return new ov(x).set(new ov(g)),x}function Z_(g,x){var P=x?Qd(g.buffer):g.buffer;return new g.constructor(P,g.byteOffset,g.byteLength)}function J_(g){var x=new g.constructor(g.source,lr.exec(g));return x.lastIndex=g.lastIndex,x}function Vy(g){return Xd?ur(Xd.call(g)):{}}function wl(g,x){var P=x?Qd(g.buffer):g.buffer;return new g.constructor(P,g.byteOffset,g.length)}function Ov(g,x){if(g!==x){var P=g!==H,L=g===null,W=g===g,V=aa(g),Z=x!==H,rt=x===null,st=x===x,Tt=aa(x);if(!rt&&!Tt&&!V&&g>x||V&&Z&&st&&!rt&&!Tt||L&&Z&&st||!P&&st||!W)return 1;if(!L&&!V&&!Tt&&g<x||Tt&&P&&W&&!L&&!V||rt&&P&&W||!Z&&W||!st)return-1}return 0}function th(g,x,P){for(var L=-1,W=g.criteria,V=x.criteria,Z=W.length,rt=P.length;++L<Z;){var st=Ov(W[L],V[L]);if(st){if(L>=rt)return st;var Tt=P[L];return st*(Tt=="desc"?-1:1)}}return g.index-x.index}function Ev(g,x,P,L){for(var W=-1,V=g.length,Z=P.length,rt=-1,st=x.length,Tt=Ii(V-Z,0),At=yt(st+Tt),Mt=!L;++rt<st;)At[rt]=x[rt];for(;++W<Z;)(Mt||W<V)&&(At[P[W]]=g[W]);for(;Tt--;)At[rt++]=g[W++];return At}function xu(g,x,P,L){for(var W=-1,V=g.length,Z=-1,rt=P.length,st=-1,Tt=x.length,At=Ii(V-rt,0),Mt=yt(At+Tt),ae=!L;++W<At;)Mt[W]=g[W];for(var Oe=W;++st<Tt;)Mt[Oe+st]=x[st];for(;++Z<rt;)(ae||W<V)&&(Mt[Oe+P[Z]]=g[W++]);return Mt}function $n(g,x){var P=-1,L=g.length;for(x||(x=yt(L));++P<L;)x[P]=g[P];return x}function ts(g,x,P,L){var W=!P;P||(P={});for(var V=-1,Z=x.length;++V<Z;){var rt=x[V],st=L?L(P[rt],g[rt],rt,P,g):H;st===H&&(st=g[rt]),W?Mc(P,rt,st):$d(P,rt,st)}return P}function Q_(g,x){return ts(g,Sf(g),x)}function Xy(g,x){return ts(g,i2(g),x)}function Ol(g,x){return function(P,L){var W=$e(P)?Ld:iC,V=x?x():{};return W(P,g,Te(L,2),V)}}function wa(g){return on(function(x,P){var L=-1,W=P.length,V=W>1?P[W-1]:H,Z=W>2?P[2]:H;for(V=g.length>3&&typeof V=="function"?(W--,V):H,Z&&Ui(P[0],P[1],Z)&&(V=W<3?H:V,W=1),x=ur(x);++L<W;){var rt=P[L];rt&&g(x,rt,L,V)}return x})}function Lc(g,x){return function(P,L){if(P==null)return P;if(!xo(P))return g(P,L);for(var W=P.length,V=x?W:-1,Z=ur(P);(x?V--:++V<W)&&L(Z[V],V,Z)!==!1;);return P}}function Sv(g){return function(x,P,L){for(var W=-1,V=ur(x),Z=L(x),rt=Z.length;rt--;){var st=Z[g?rt:++W];if(P(V[st],st,V)===!1)break}return x}}function $y(g,x,P){var L=x&wt,W=bu(g);function V(){var Z=this&&this!==Gi&&this instanceof V?W:g;return Z.apply(L?P:this,arguments)}return V}function qy(g){return function(x){x=Rn(x);var P=df(x)?Ja(x):H,L=P?P[0]:x.charAt(0),W=P?Rc(P,1).join(""):x.slice(1);return L[g]()+W}}function to(g){return function(x){return Zp(r1(Jm(x).replace(Ad,"")),g,"")}}function bu(g){return function(){var x=arguments;switch(x.length){case 0:return new g;case 1:return new g(x[0]);case 2:return new g(x[0],x[1]);case 3:return new g(x[0],x[1],x[2]);case 4:return new g(x[0],x[1],x[2],x[3]);case 5:return new g(x[0],x[1],x[2],x[3],x[4]);case 6:return new g(x[0],x[1],x[2],x[3],x[4],x[5]);case 7:return new g(x[0],x[1],x[2],x[3],x[4],x[5],x[6])}var P=lu(g.prototype),L=g.apply(P,x);return Ur(L)?L:P}}function eh(g,x,P){var L=bu(g);function W(){for(var V=arguments.length,Z=yt(V),rt=V,st=Of(W);rt--;)Z[rt]=arguments[rt];var Tt=V<3&&Z[0]!==st&&Z[V-1]!==st?[]:yl(Z,st);if(V-=Tt.length,V<P)return Zy(g,x,El,W.placeholder,H,Z,Tt,H,H,P-V);var At=this&&this!==Gi&&this instanceof W?L:g;return Lo(At,this,Z)}return W}function nh(g){return function(x,P,L){var W=ur(x);if(!xo(x)){var V=Te(P,3);x=hi(x),P=function(rt){return V(W[rt],rt,W)}}var Z=g(x,P,L);return Z>-1?W[V?x[Z]:Z]:H}}function Hi(g){return Ic(function(x){var P=x.length,L=P,W=Do.prototype.thru;for(g&&x.reverse();L--;){var V=x[L];if(typeof V!="function")throw new xa(zt);if(W&&!Z&&wf(V)=="wrapper")var Z=new Do([],!0)}for(L=Z?L:P;++L<P;){V=x[L];var rt=wf(V),st=rt=="wrapper"?Cv(V):H;st&&am(st[0])&&st[1]==(Cn|Le|un|mn)&&!st[4].length&&st[9]==1?Z=Z[wf(st[0])].apply(Z,st[3]):Z=V.length==1&&am(V)?Z[rt]():Z.thru(V)}return function(){var Tt=arguments,At=Tt[0];if(Z&&Tt.length==1&&$e(At))return Z.plant(At).value();for(var Mt=0,ae=P?x[Mt].apply(this,Tt):At;++Mt<P;)ae=x[Mt].call(this,ae);return ae}})}function El(g,x,P,L,W,V,Z,rt,st,Tt){var At=x&Cn,Mt=x&wt,ae=x&Nt,Oe=x&(Le|In),Ce=x&hr,ke=ae?H:bu(g);function Ne(){for(var vn=arguments.length,cn=yt(vn),Gr=vn;Gr--;)cn[Gr]=arguments[Gr];if(Oe)var wo=Of(Ne),Ho=aA(cn,wo);if(L&&(cn=Ev(cn,L,W,Oe)),V&&(cn=xu(cn,V,Z,Oe)),vn-=Ho,Oe&&vn<Tt){var oi=yl(cn,wo);return Zy(g,x,El,Ne.placeholder,P,cn,oi,rt,st,Tt-vn)}var rs=Mt?P:this,ac=ae?rs[g]:g;return vn=cn.length,rt?cn=fC(cn,rt):Ce&&vn>1&&cn.reverse(),At&&st<vn&&(cn.length=st),this&&this!==Gi&&this instanceof Ne&&(ac=ke||bu(ac)),ac.apply(rs,cn)}return Ne}function Mv(g,x){return function(P,L){return gv(P,g,x(L),{})}}function _f(g,x){return function(P,L){var W;if(P===H&&L===H)return x;if(P!==H&&(W=P),L!==H){if(W===H)return L;typeof P=="string"||typeof L=="string"?(P=yo(P),L=yo(L)):(P=bf(P),L=bf(L)),W=g(P,L)}return W}}function Pv(g){return Ic(function(x){return x=Or(x,ma(Te())),on(function(P){var L=this;return g(x,function(W){return Lo(W,L,P)})})})}function rh(g,x){x=x===H?" ":yo(x);var P=x.length;if(P<2)return P?mf(x,g):x;var L=mf(x,cv(g/au(x)));return df(x)?Rc(Ja(L),0,g).join(""):L.slice(0,g)}function t2(g,x,P,L){var W=x&wt,V=bu(g);function Z(){for(var rt=-1,st=arguments.length,Tt=-1,At=L.length,Mt=yt(At+st),ae=this&&this!==Gi&&this instanceof Z?V:g;++Tt<At;)Mt[Tt]=L[Tt];for(;st--;)Mt[Tt++]=arguments[++rt];return Lo(ae,W?P:this,Mt)}return Z}function Ky(g){return function(x,P,L){return L&&typeof L!="number"&&Ui(x,P,L)&&(P=L=H),x=ns(x),P===H?(P=x,x=0):P=ns(P),L=L===H?x<P?1:-1:ns(L),yu(x,P,L,g)}}function ih(g){return function(x,P){return typeof x=="string"&&typeof P=="string"||(x=sa(x),P=sa(P)),g(x,P)}}function Zy(g,x,P,L,W,V,Z,rt,st,Tt){var At=x&Le,Mt=At?Z:H,ae=At?H:Z,Oe=At?V:H,Ce=At?H:V;x|=At?un:Sn,x&=~(At?Sn:un),x&Re||(x&=~(wt|Nt));var ke=[g,x,W,Oe,Mt,Ce,ae,rt,st,Tt],Ne=P.apply(H,ke);return am(g)&&cm(Ne,ke),Ne.placeholder=L,lm(Ne,g,x)}function Tv(g){var x=Oi[g];return function(P,L){if(P=sa(P),L=L==null?0:Qi(an(L),292),L&&Ud(P)){var W=(Rn(P)+"e").split("e"),V=x(W[0]+"e"+(+W[1]+L));return W=(Rn(V)+"e").split("e"),+(W[0]+"e"+(+W[1]-L))}return x(P)}}var e2=Qa&&1/ev(new Qa([,-0]))[1]==wr?function(g){return new Qa(g)}:p0;function Av(g){return function(x){var P=no(x);return P==so?Ey(x):P==ta?rr(x):oA(x,g(x))}}function ys(g,x,P,L,W,V,Z,rt){var st=x&Nt;if(!st&&typeof g!="function")throw new xa(zt);var Tt=L?L.length:0;if(Tt||(x&=~(un|Sn),L=W=H),Z=Z===H?Z:Ii(an(Z),0),rt=rt===H?rt:an(rt),Tt-=W?W.length:0,x&Sn){var At=L,Mt=W;L=W=H}var ae=st?H:Cv(g),Oe=[g,x,P,L,W,At,Mt,V,Z,rt];if(ae&&Mf(Oe,ae),g=Oe[0],x=Oe[1],P=Oe[2],L=Oe[3],W=Oe[4],rt=Oe[9]=Oe[9]===H?st?0:g.length:Ii(Oe[9]-Tt,0),!rt&&x&(Le|In)&&(x&=~(Le|In)),!x||x==wt)var Ce=$y(g,x,P);else x==Le||x==In?Ce=eh(g,x,rt):(x==un||x==(wt|un))&&!W.length?Ce=t2(g,x,P,L):Ce=El.apply(H,Oe);var ke=ae?le:cm;return lm(ke(Ce,Oe),g,x)}function oh(g,x,P,L){return g===H||es(g,su[P])&&!ir.call(L,P)?x:g}function n2(g,x,P,L,W,V){return Ur(g)&&Ur(x)&&(V.set(x,g),vu(g,x,H,n2,V),V.delete(x)),g}function aC(g){return zc(g)?H:g}function Jy(g,x,P,L,W,V){var Z=P&Ct,rt=g.length,st=x.length;if(rt!=st&&!(Z&&st>rt))return!1;var Tt=V.get(g),At=V.get(x);if(Tt&&At)return Tt==x&&At==g;var Mt=-1,ae=!0,Oe=P&Pt?new fu:H;for(V.set(g,x),V.set(x,g);++Mt<rt;){var Ce=g[Mt],ke=x[Mt];if(L)var Ne=Z?L(ke,Ce,Mt,x,g,V):L(Ce,ke,Mt,g,x,V);if(Ne!==H){if(Ne)continue;ae=!1;break}if(Oe){if(!Jp(x,function(vn,cn){if(!Gd(Oe,cn)&&(Ce===vn||W(Ce,vn,P,L,V)))return Oe.push(cn)})){ae=!1;break}}else if(!(Ce===ke||W(Ce,ke,P,L,V))){ae=!1;break}}return V.delete(g),V.delete(x),ae}function Qy(g,x,P,L,W,V,Z){switch(P){case yc:if(g.byteLength!=x.byteLength||g.byteOffset!=x.byteOffset)return!1;g=g.buffer,x=x.buffer;case Hs:return!(g.byteLength!=x.byteLength||!V(new ov(g),new ov(x)));case va:case Ha:case xt:return es(+g,+x);case Ys:return g.name==x.name&&g.message==x.message;case cl:case ll:return g==x+"";case so:var rt=Ey;case ta:var st=L&Ct;if(rt||(rt=ev),g.size!=x.size&&!st)return!1;var Tt=Z.get(g);if(Tt)return Tt==x;L|=Pt,Z.set(g,x);var At=Jy(rt(g),rt(x),L,W,V,Z);return Z.delete(g),At;case ul:if(Xd)return Xd.call(g)==Xd.call(x)}return!1}function r2(g,x,P,L,W,V){var Z=P&Ct,rt=Dc(g),st=rt.length,Tt=Dc(x),At=Tt.length;if(st!=At&&!Z)return!1;for(var Mt=st;Mt--;){var ae=rt[Mt];if(!(Z?ae in x:ir.call(x,ae)))return!1}var Oe=V.get(g),Ce=V.get(x);if(Oe&&Ce)return Oe==x&&Ce==g;var ke=!0;V.set(g,x),V.set(x,g);for(var Ne=Z;++Mt<st;){ae=rt[Mt];var vn=g[ae],cn=x[ae];if(L)var Gr=Z?L(cn,vn,ae,x,g,V):L(vn,cn,ae,g,x,V);if(!(Gr===H?vn===cn||W(vn,cn,P,L,V):Gr)){ke=!1;break}Ne||(Ne=ae=="constructor")}if(ke&&!Ne){var wo=g.constructor,Ho=x.constructor;wo!=Ho&&"constructor"in g&&"constructor"in x&&!(typeof wo=="function"&&wo instanceof wo&&typeof Ho=="function"&&Ho instanceof Ho)&&(ke=!1)}return V.delete(g),V.delete(x),ke}function Ic(g){return fh(lh(g,H,dm),g+"")}function Dc(g){return Iy(g,hi,Sf)}function eo(g){return Iy(g,Yo,i2)}var Cv=uv?function(g){return uv.get(g)}:p0;function wf(g){for(var x=g.name+"",P=vf[x],L=ir.call(vf,x)?P.length:0;L--;){var W=P[L],V=W.func;if(V==null||V==g)return W.name}return x}function Of(g){var x=ir.call(U,"placeholder")?U:g;return x.placeholder}function Te(){var g=U.iteratee||Eh;return g=g===Eh?By:g,arguments.length?g(arguments[0],arguments[1]):g}function Ef(g,x){var P=g.__data__;return cC(x)?P[typeof x=="string"?"string":"hash"]:P.map}function ah(g){for(var x=hi(g),P=x.length;P--;){var L=x[P],W=g[L];x[P]=[L,W,a2(W)]}return x}function Sl(g,x){var P=uA(g,x);return Zd(P)?P:H}function kv(g){var x=ir.call(g,cu),P=g[cu];try{g[cu]=H;var L=!0}catch(V){}var W=Wd.call(g);return L&&(x?g[cu]=P:delete g[cu]),W}var Sf=lv?function(g){return g==null?[]:(g=ur(g),_c(lv(g),function(x){return ze.call(g,x)}))}:Sh,i2=lv?function(g){for(var x=[];g;)wc(x,Sf(g)),g=av(g);return x}:Sh,no=go;(Io&&no(new Io(new ArrayBuffer(1)))!=yc||Vd&&no(new Vd)!=so||Py&&no(Py.resolve())!=sf||Qa&&no(new Qa)!=ta||hf&&no(new hf)!=ti)&&(no=function(g){var x=go(g),P=x==Ge?g.constructor:H,L=P?Oa(P):"";if(L)switch(L){case AA:return yc;case CA:return so;case kA:return sf;case Oc:return ta;case NA:return ti}return x});function tm(g,x,P){for(var L=-1,W=P.length;++L<W;){var V=P[L],Z=V.size;switch(V.type){case"drop":g+=Z;break;case"dropRight":x-=Z;break;case"take":x=Qi(x,g+Z);break;case"takeRight":g=Ii(g,x-Z);break}}return{start:g,end:x}}function sC(g){var x=g.match(nu);return x?x[1].split(ru):[]}function o2(g,x,P){x=Nc(x,g);for(var L=-1,W=x.length,V=!1;++L<W;){var Z=ec(x[L]);if(!(V=g!=null&&P(g,Z)))break;g=g[Z]}return V||++L!=W?V:(W=g==null?0:g.length,!!W&&Lf(W)&&Qs(Z,W)&&($e(g)||Al(g)))}function em(g){var x=g.length,P=new g.constructor(x);return x&&typeof g[0]=="string"&&ir.call(g,"index")&&(P.index=g.index,P.input=g.input),P}function Nv(g){return typeof g.constructor=="function"&&!ch(g)?lu(av(g)):{}}function nm(g,x,P){var L=g.constructor;switch(x){case Hs:return Qd(g);case va:case Ha:return new L(+g);case yc:return Z_(g,P);case On:case j:case ei:case fl:case ut:case Ua:case Va:case Ri:case dl:return wl(g,P);case so:return new L;case xt:case ll:return new L(g);case cl:return J_(g);case ta:return new L;case ul:return Vy(g)}}function rm(g,x){var P=x.length;if(!P)return g;var L=P-1;return x[L]=(P>1?"& ":"")+x[L],x=x.join(P>2?", ":" "),g.replace(Up,`{
/* [wrapped with `+x+`] */
`)}function im(g){return $e(g)||Al(g)||!!(zi&&g&&g[zi])}function Qs(g,x){var P=typeof g;return x=x==null?ot:x,!!x&&(P=="number"||P!="symbol"&&co.test(g))&&g>-1&&g%1==0&&g<x}function Ui(g,x,P){if(!Ur(P))return!1;var L=typeof x;return(L=="number"?xo(P)&&Qs(x,P.length):L=="string"&&x in P)?es(P[x],g):!1}function om(g,x){if($e(g))return!1;var P=typeof g;return P=="number"||P=="symbol"||P=="boolean"||g==null||aa(g)?!0:Hp.test(g)||!ly.test(g)||x!=null&&g in ur(x)}function cC(g){var x=typeof g;return x=="string"||x=="number"||x=="symbol"||x=="boolean"?g!=="__proto__":g===null}function am(g){var x=wf(g),P=U[x];if(typeof P!="function"||!(x in xn.prototype))return!1;if(g===P)return!0;var L=Cv(P);return!!L&&g===L[0]}function sh(g){return!!T_&&T_ in g}var lC=rv?rc:g0;function ch(g){var x=g&&g.constructor,P=typeof x=="function"&&x.prototype||su;return g===P}function a2(g){return g===g&&!Ur(g)}function s2(g,x){return function(P){return P==null?!1:P[g]===x&&(x!==H||g in ur(P))}}function uC(g){var x=Rf(g,function(L){return P.size===ht&&P.clear(),L}),P=x.cache;return x}function Mf(g,x){var P=g[1],L=x[1],W=P|L,V=W<(wt|Nt|Cn),Z=L==Cn&&P==Le||L==Cn&&P==mn&&g[7].length<=x[8]||L==(Cn|mn)&&x[7].length<=x[8]&&P==Le;if(!(V||Z))return g;L&wt&&(g[2]=x[2],W|=P&wt?0:Re);var rt=x[3];if(rt){var st=g[3];g[3]=st?Ev(st,rt,x[4]):rt,g[4]=st?yl(g[3],pe):x[4]}return rt=x[5],rt&&(st=g[5],g[5]=st?xu(st,rt,x[6]):rt,g[6]=st?yl(g[5],pe):x[6]),rt=x[7],rt&&(g[7]=rt),L&Cn&&(g[8]=g[8]==null?x[8]:Qi(g[8],x[8])),g[9]==null&&(g[9]=x[9]),g[0]=x[0],g[1]=W,g}function sm(g){var x=[];if(g!=null)for(var P in ur(g))x.push(P);return x}function c2(g){return Wd.call(g)}function lh(g,x,P){return x=Ii(x===H?g.length-1:x,0),function(){for(var L=arguments,W=-1,V=Ii(L.length-x,0),Z=yt(V);++W<V;)Z[W]=L[x+W];W=-1;for(var rt=yt(x+1);++W<x;)rt[W]=L[W];return rt[x]=P(Z),Lo(g,this,rt)}}function uh(g,x){return x.length<2?g:xl(g,ra(x,0,-1))}function fC(g,x){for(var P=g.length,L=Qi(x.length,P),W=$n(g);L--;){var V=x[L];g[L]=Qs(V,P)?W[V]:H}return g}function Rv(g,x){if(!(x==="constructor"&&typeof g[x]=="function")&&x!="__proto__")return g[x]}var cm=kt(le),Pf=SA||function(g,x){return Gi.setTimeout(g,x)},fh=kt(X_);function lm(g,x,P){var L=x+"";return fh(g,rm(L,Lv(sC(L),P)))}function kt(g){var x=0,P=0;return function(){var L=ba(),W=bi-(L-P);if(P=L,W>0){if(++x>=Fe)return arguments[0]}else x=0;return g.apply(H,arguments)}}function tc(g,x){var P=-1,L=g.length,W=L-1;for(x=x===H?L:x;++P<x;){var V=mv(P,W),Z=g[V];g[V]=g[P],g[P]=Z}return g.length=x,g}var Ml=uC(function(g){var x=[];return g.charCodeAt(0)===46&&x.push(""),g.replace(Xa,function(P,L,W,V){x.push(W?V.replace(cr,"$1"):L||P)}),x});function ec(g){if(typeof g=="string"||aa(g))return g;var x=g+"";return x=="0"&&1/g==-wr?"-0":x}function Oa(g){if(g!=null){try{return Yn.call(g)}catch(x){}try{return g+""}catch(x){}}return""}function Lv(g,x){return vo(hs,function(P){var L="_."+P[0];x&P[1]&&!Dd(g,L)&&g.push(L)}),g.sort()}function Tf(g){if(g instanceof xn)return g.clone();var x=new Do(g.__wrapped__,g.__chain__);return x.__actions__=$n(g.__actions__),x.__index__=g.__index__,x.__values__=g.__values__,x}function um(g,x,P){(P?Ui(g,x,P):x===H)?x=1:x=Ii(an(x),0);var L=g==null?0:g.length;if(!L||x<1)return[];for(var W=0,V=0,Z=yt(cv(L/x));W<L;)Z[V++]=ra(g,W,W+=x);return Z}function l2(g){for(var x=-1,P=g==null?0:g.length,L=0,W=[];++x<P;){var V=g[x];V&&(W[L++]=V)}return W}function u2(){var g=arguments.length;if(!g)return[];for(var x=yt(g-1),P=arguments[0],L=g;L--;)x[L-1]=arguments[L];return wc($e(P)?$n(P):[P],Wi(x,1))}var _u=on(function(g,x){return Hr(g)?Xs(g,Wi(x,1,Hr,!0)):[]}),mo=on(function(g,x){var P=Bo(x);return Hr(P)&&(P=H),Hr(g)?Xs(g,Wi(x,1,Hr,!0),Te(P,2)):[]}),qn=on(function(g,x){var P=Bo(x);return Hr(P)&&(P=H),Hr(g)?Xs(g,Wi(x,1,Hr,!0),H,P):[]});function Ea(g,x,P){var L=g==null?0:g.length;return L?(x=P||x===H?1:an(x),ra(g,x<0?0:x,L)):[]}function dC(g,x,P){var L=g==null?0:g.length;return L?(x=P||x===H?1:an(x),x=L-x,ra(g,0,x<0?0:x)):[]}function hC(g,x){return g&&g.length?Js(g,Te(x,3),!0,!0):[]}function f2(g,x){return g&&g.length?Js(g,Te(x,3),!0):[]}function d2(g,x,P,L){var W=g==null?0:g.length;return W?(P&&typeof P!="number"&&Ui(g,x,P)&&(P=0,L=W),Ny(g,x,P,L)):[]}function fm(g,x,P){var L=g==null?0:g.length;if(!L)return-1;var W=P==null?0:an(P);return W<0&&(W=Ii(L+W,0)),Qp(g,Te(x,3),W)}function dh(g,x,P){var L=g==null?0:g.length;if(!L)return-1;var W=L-1;return P!==H&&(W=an(P),W=P<0?Ii(L+W,0):Qi(W,L-1)),Qp(g,Te(x,3),W,!0)}function dm(g){var x=g==null?0:g.length;return x?Wi(g,1):[]}function h2(g){var x=g==null?0:g.length;return x?Wi(g,wr):[]}function hm(g,x){var P=g==null?0:g.length;return P?(x=x===H?1:an(x),Wi(g,x)):[]}function ms(g){for(var x=-1,P=g==null?0:g.length,L={};++x<P;){var W=g[x];L[W[0]]=W[1]}return L}function Sa(g){return g&&g.length?g[0]:H}function Af(g,x,P){var L=g==null?0:g.length;if(!L)return-1;var W=P==null?0:an(P);return W<0&&(W=Ii(L+W,0)),ff(g,x,W)}function Ye(g){var x=g==null?0:g.length;return x?ra(g,0,-1):[]}var pm=on(function(g){var x=Or(g,bv);return x.length&&x[0]===g[0]?gs(x):[]}),p2=on(function(g){var x=Bo(g),P=Or(g,bv);return x===Bo(P)?x=H:P.pop(),P.length&&P[0]===g[0]?gs(P,Te(x,2)):[]}),v2=on(function(g){var x=Bo(g),P=Or(g,bv);return x=typeof x=="function"?x:H,x&&P.pop(),P.length&&P[0]===g[0]?gs(P,H,x):[]});function g2(g,x){return g==null?"":PA.call(g,x)}function Bo(g){var x=g==null?0:g.length;return x?g[x-1]:H}function ro(g,x,P){var L=g==null?0:g.length;if(!L)return-1;var W=L;return P!==H&&(W=an(P),W=W<0?Ii(L+W,0):Qi(W,L-1)),x===x?na(g,x,W):Qp(g,b_,W,!0)}function y2(g,x){return g&&g.length?yv(g,an(x)):H}var Bc=on(vm);function vm(g,x){return g&&g.length&&x&&x.length?gu(g,x):g}function Vi(g,x,P){return g&&g.length&&x&&x.length?gu(g,x,Te(P,2)):g}function wu(g,x,P){return g&&g.length&&x&&x.length?gu(g,x,H,P):g}var Kn=Ic(function(g,x){var P=g==null?0:g.length,L=Je(g,x);return Yy(g,Or(x,function(W){return Qs(W,P)?+W:W}).sort(Ov)),L});function Ou(g,x){var P=[];if(!(g&&g.length))return P;var L=-1,W=[],V=g.length;for(x=Te(x,3);++L<V;){var Z=g[L];x(Z,L,g)&&(P.push(Z),W.push(L))}return Yy(g,W),P}function Iv(g){return g==null?g:Vs.call(g)}function Bn(g,x,P){var L=g==null?0:g.length;return L?(P&&typeof P!="number"&&Ui(g,x,P)?(x=0,P=L):(x=x==null?0:an(x),P=P===H?L:an(P)),ra(g,x,P)):[]}function Cf(g,x){return Ks(g,x)}function Fo(g,x,P){return Yi(g,x,Te(P,2))}function gm(g,x){var P=g==null?0:g.length;if(P){var L=Ks(g,x);if(L<P&&es(g[L],x))return L}return-1}function ym(g,x){return Ks(g,x,!0)}function mm(g,x,P){return Yi(g,x,Te(P,2),!0)}function Xi(g,x){var P=g==null?0:g.length;if(P){var L=Ks(g,x,!0)-1;if(es(g[L],x))return L}return-1}function Vt(g){return g&&g.length?Jd(g):[]}function oa(g,x){return g&&g.length?Jd(g,Te(x,2)):[]}function xm(g){var x=g==null?0:g.length;return x?ra(g,1,x):[]}function Dv(g,x,P){return g&&g.length?(x=P||x===H?1:an(x),ra(g,0,x<0?0:x)):[]}function Bv(g,x,P){var L=g==null?0:g.length;return L?(x=P||x===H?1:an(x),x=L-x,ra(g,x<0?0:x,L)):[]}function m2(g,x){return g&&g.length?Js(g,Te(x,3),!1,!0):[]}function Fc(g,x){return g&&g.length?Js(g,Te(x,3)):[]}var x2=on(function(g){return ia(Wi(g,1,Hr,!0))}),b2=on(function(g){var x=Bo(g);return Hr(x)&&(x=H),ia(Wi(g,1,Hr,!0),Te(x,2))}),_2=on(function(g){var x=Bo(g);return x=typeof x=="function"?x:H,ia(Wi(g,1,Hr,!0),H,x)});function w2(g){return g&&g.length?ia(g):[]}function bm(g,x){return g&&g.length?ia(g,Te(x,2)):[]}function Fv(g,x){return x=typeof x=="function"?x:H,g&&g.length?ia(g,H,x):[]}function Eu(g){if(!(g&&g.length))return[];var x=0;return g=_c(g,function(P){if(Hr(P))return x=Ii(P.length,x),!0}),wy(x,function(P){return Or(g,xy(P))})}function _m(g,x){if(!(g&&g.length))return[];var P=Eu(g);return x==null?P:Or(P,function(L){return Lo(x,H,L)})}var jc=on(function(g,x){return Hr(g)?Xs(g,x):[]}),hh=on(function(g){return _a(_c(g,Hr))}),jo=on(function(g){var x=Bo(g);return Hr(x)&&(x=H),_a(_c(g,Hr),Te(x,2))}),O2=on(function(g){var x=Bo(g);return x=typeof x=="function"?x:H,_a(_c(g,Hr),H,x)}),wm=on(Eu);function E2(g,x){return Hy(g||[],x||[],$d)}function Su(g,x){return Hy(g||[],x||[],xf)}var S2=on(function(g){var x=g.length,P=x>1?g[x-1]:H;return P=typeof P=="function"?(g.pop(),P):H,_m(g,P)});function M2(g){var x=U(g);return x.__chain__=!0,x}function P2(g,x){return x(g),g}function Mu(g,x){return x(g)}var T2=Ic(function(g){var x=g.length,P=x?g[0]:0,L=this.__wrapped__,W=function(V){return Je(V,g)};return x>1||this.__actions__.length||!(L instanceof xn)||!Qs(P)?this.thru(W):(L=L.slice(P,+P+(x?1:0)),L.__actions__.push({func:Mu,args:[W],thisArg:H}),new Do(L,this.__chain__).thru(function(V){return x&&!V.length&&V.push(H),V}))});function jv(){return M2(this)}function Zn(){return new Do(this.value(),this.__chain__)}function Yr(){this.__values__===H&&(this.__values__=_h(this.value()));var g=this.__index__>=this.__values__.length,x=g?H:this.__values__[this.__index__++];return{done:g,value:x}}function Ma(){return this}function Gv(g){for(var x,P=this;P instanceof dv;){var L=Tf(P);L.__index__=0,L.__values__=H,x?W.__wrapped__=L:x=L;var W=L;P=P.__wrapped__}return W.__wrapped__=g,x}function vr(){var g=this.__wrapped__;if(g instanceof xn){var x=g;return this.__actions__.length&&(x=new xn(this)),x=x.reverse(),x.__actions__.push({func:Mu,args:[Iv],thisArg:H}),new Do(x,this.__chain__)}return this.thru(Iv)}function A2(){return mu(this.__wrapped__,this.__actions__)}var C2=Ol(function(g,x,P){ir.call(g,P)?++g[P]:Mc(g,P,1)});function zv(g,x,P){var L=$e(g)?my:ky;return P&&Ui(g,x,P)&&(x=H),L(g,Te(x,3))}function Wv(g,x){var P=$e(g)?_c:Ry;return P(g,Te(x,3))}var ph=nh(fm),Om=nh(dh);function k2(g,x){return Wi(vh(g,x),1)}function or(g,x){return Wi(vh(g,x),wr)}function Yv(g,x,P){return P=P===H?1:an(P),Wi(vh(g,x),P)}function Pl(g,x){var P=$e(g)?vo:$s;return P(g,Te(x,3))}function Hv(g,x){var P=$e(g)?Id:pv;return P(g,Te(x,3))}var ee=Ol(function(g,x,P){ir.call(g,P)?g[P].push(x):Mc(g,P,[x])});function N2(g,x,P,L){g=xo(g)?g:bo(g),P=P&&!L?an(P):0;var W=g.length;return P<0&&(P=Ii(W+P,0)),bh(g)?P<=W&&g.indexOf(x,P)>-1:!!W&&ff(g,x,P)>-1}var R2=on(function(g,x,P){var L=-1,W=typeof x=="function",V=xo(g)?yt(g.length):[];return $s(g,function(Z){V[++L]=W?Lo(x,Z,P):hu(Z,x,P)}),V}),L2=Ol(function(g,x,P){Mc(g,P,x)});function vh(g,x){var P=$e(g)?Or:Fy;return P(g,Te(x,3))}function I2(g,x,P,L){return g==null?[]:($e(x)||(x=x==null?[]:[x]),P=L?H:P,$e(P)||(P=P==null?[]:[P]),Gy(g,x,P))}var D2=Ol(function(g,x,P){g[P?0:1].push(x)},function(){return[[],[]]});function B2(g,x,P){var L=$e(g)?Zp:w_,W=arguments.length<3;return L(g,Te(x,4),P,W,$s)}function Em(g,x,P){var L=$e(g)?m_:w_,W=arguments.length<3;return L(g,Te(x,4),P,W,pv)}function F2(g,x){var P=$e(g)?_c:Ry;return P(g,gh(Te(x,3)))}function j2(g){var x=$e(g)?Ty:V_;return x(g)}function G2(g,x,P){(P?Ui(g,x,P):x===H)?x=1:x=an(x);var L=$e(g)?nC:xv;return L(g,x)}function z2(g){var x=$e(g)?rC:$_;return x(g)}function W2(g){if(g==null)return 0;if(xo(g))return bh(g)?au(g):g.length;var x=no(g);return x==so||x==ta?g.size:qs(g).length}function Y2(g,x,P){var L=$e(g)?Jp:q_;return P&&Ui(g,x,P)&&(x=H),L(g,Te(x,3))}var H2=on(function(g,x){if(g==null)return[];var P=x.length;return P>1&&Ui(g,x[0],x[1])?x=[]:P>2&&Ui(x[0],x[1],x[2])&&(x=[x[0]]),Gy(g,Wi(x,1),[])}),Uv=EA||function(){return Gi.Date.now()};function Vv(g,x){if(typeof x!="function")throw new xa(zt);return g=an(g),function(){if(--g<1)return x.apply(this,arguments)}}function kf(g,x,P){return x=P?H:x,x=g&&x==null?g.length:x,ys(g,Cn,H,H,H,H,x)}function xs(g,x){var P;if(typeof x!="function")throw new xa(zt);return g=an(g),function(){return--g>0&&(P=x.apply(this,arguments)),g<=1&&(x=H),P}}var Xv=on(function(g,x,P){var L=wt;if(P.length){var W=yl(P,Of(Xv));L|=un}return ys(g,L,x,P,W)}),Pu=on(function(g,x,P){var L=wt|Nt;if(P.length){var W=yl(P,Of(Pu));L|=un}return ys(x,L,g,P,W)});function $v(g,x,P){x=P?H:x;var L=ys(g,Le,H,H,H,H,H,x);return L.placeholder=$v.placeholder,L}function Sm(g,x,P){x=P?H:x;var L=ys(g,In,H,H,H,H,H,x);return L.placeholder=Sm.placeholder,L}function Mm(g,x,P){var L,W,V,Z,rt,st,Tt=0,At=!1,Mt=!1,ae=!0;if(typeof g!="function")throw new xa(zt);x=sa(x)||0,Ur(P)&&(At=!!P.leading,Mt="maxWait"in P,V=Mt?Ii(sa(P.maxWait)||0,x):V,ae="trailing"in P?!!P.trailing:ae);function Oe(oi){var rs=L,ac=W;return L=W=H,Tt=oi,Z=g.apply(ac,rs),Z}function Ce(oi){return Tt=oi,rt=Pf(vn,x),At?Oe(oi):Z}function ke(oi){var rs=oi-st,ac=oi-Tt,u1=x-rs;return Mt?Qi(u1,V-ac):u1}function Ne(oi){var rs=oi-st,ac=oi-Tt;return st===H||rs>=x||rs<0||Mt&&ac>=V}function vn(){var oi=Uv();if(Ne(oi))return cn(oi);rt=Pf(vn,ke(oi))}function cn(oi){return rt=H,ae&&L?Oe(oi):(L=W=H,Z)}function Gr(){rt!==H&&Uy(rt),Tt=0,L=st=W=rt=H}function wo(){return rt===H?Z:cn(Uv())}function Ho(){var oi=Uv(),rs=Ne(oi);if(L=arguments,W=this,st=oi,rs){if(rt===H)return Ce(st);if(Mt)return Uy(rt),rt=Pf(vn,x),Oe(st)}return rt===H&&(rt=Pf(vn,x)),Z}return Ho.cancel=Gr,Ho.flush=wo,Ho}var Nf=on(function(g,x){return Nn(g,1,x)}),Tu=on(function(g,x,P){return Nn(g,sa(x)||0,P)});function qv(g){return ys(g,hr)}function Rf(g,x){if(typeof g!="function"||x!=null&&typeof x!="function")throw new xa(zt);var P=function(){var L=arguments,W=x?x.apply(this,L):L[0],V=P.cache;if(V.has(W))return V.get(W);var Z=g.apply(this,L);return P.cache=V.set(W,Z)||V,Z};return P.cache=new(Rf.Cache||Sc),P}Rf.Cache=Sc;function gh(g){if(typeof g!="function")throw new xa(zt);return function(){var x=arguments;switch(x.length){case 0:return!g.call(this);case 1:return!g.call(this,x[0]);case 2:return!g.call(this,x[0],x[1]);case 3:return!g.call(this,x[0],x[1],x[2])}return!g.apply(this,x)}}function Go(g){return xs(2,g)}var Pm=K_(function(g,x){x=x.length==1&&$e(x[0])?Or(x[0],ma(Te())):Or(Wi(x,1),ma(Te()));var P=x.length;return on(function(L){for(var W=-1,V=Qi(L.length,P);++W<V;)L[W]=x[W].call(this,L[W]);return Lo(g,this,L)})}),yh=on(function(g,x){var P=yl(x,Of(yh));return ys(g,un,H,x,P)}),zo=on(function(g,x){var P=yl(x,Of(zo));return ys(g,Sn,H,x,P)}),U2=Ic(function(g,x){return ys(g,mn,H,H,H,x)});function V2(g,x){if(typeof g!="function")throw new xa(zt);return x=x===H?x:an(x),on(g,x)}function Tm(g,x){if(typeof g!="function")throw new xa(zt);return x=x==null?0:Ii(an(x),0),on(function(P){var L=P[x],W=Rc(P,0,x);return L&&wc(W,L),Lo(g,this,W)})}function Am(g,x,P){var L=!0,W=!0;if(typeof g!="function")throw new xa(zt);return Ur(P)&&(L="leading"in P?!!P.leading:L,W="trailing"in P?!!P.trailing:W),Mm(g,x,{leading:L,maxWait:x,trailing:W})}function Au(g){return kf(g,1)}function Tl(g,x){return yh(_v(x),g)}function Kv(){if(!arguments.length)return[];var g=arguments[0];return $e(g)?g:[g]}function Zv(g){return Lt(g,ie)}function Cm(g,x){return x=typeof x=="function"?x:H,Lt(g,ie,x)}function Jv(g){return Lt(g,Ht|ie)}function X2(g,x){return x=typeof x=="function"?x:H,Lt(g,Ht|ie,x)}function $2(g,x){return x==null||Cy(g,x,hi(x))}function es(g,x){return g===x||g!==g&&x!==x}var q2=ih(vv),mh=ih(function(g,x){return g>=x}),Al=Dy(function(){return arguments}())?Dy:function(g){return Fr(g)&&ir.call(g,"callee")&&!ze.call(g,"callee")},$e=yt.isArray,km=ou?ma(ou):G_;function xo(g){return g!=null&&Lf(g.length)&&!rc(g)}function Hr(g){return Fr(g)&&xo(g)}function K2(g){return g===!0||g===!1||Fr(g)&&go(g)==va}var nc=MA||g0,xh=py?ma(py):z_;function Qv(g){return Fr(g)&&g.nodeType===1&&!zc(g)}function Nm(g){if(g==null)return!0;if(xo(g)&&($e(g)||typeof g=="string"||typeof g.splice=="function"||nc(g)||Cl(g)||Al(g)))return!g.length;var x=no(g);if(x==so||x==ta)return!g.size;if(ch(g))return!qs(g).length;for(var P in g)if(ir.call(g,P))return!1;return!0}function Z2(g,x){return pu(g,x)}function J2(g,x,P){P=typeof P=="function"?P:H;var L=P?P(g,x):H;return L===H?pu(g,x,H,P):!!L}function t0(g){if(!Fr(g))return!1;var x=go(g);return x==Ys||x==tu||typeof g.message=="string"&&typeof g.name=="string"&&!zc(g)}function Rm(g){return typeof g=="number"&&Ud(g)}function rc(g){if(!Ur(g))return!1;var x=go(g);return x==Qo||x==Fp||x==Ni||x==eu}function Lm(g){return typeof g=="number"&&g==an(g)}function Lf(g){return typeof g=="number"&&g>-1&&g%1==0&&g<=ot}function Ur(g){var x=typeof g;return g!=null&&(x=="object"||x=="function")}function Fr(g){return g!=null&&typeof g=="object"}var Im=qp?ma(qp):Y_;function e0(g,x){return g===x||Kd(g,x,ah(x))}function Q2(g,x,P){return P=typeof P=="function"?P:H,Kd(g,x,ah(x),P)}function Dm(g){return Gc(g)&&g!=+g}function tw(g){if(lC(g))throw new Ze(xe);return Zd(g)}function jr(g){return g===null}function Wo(g){return g==null}function Gc(g){return typeof g=="number"||Fr(g)&&go(g)==xt}function zc(g){if(!Fr(g)||go(g)!=Ge)return!1;var x=av(g);if(x===null)return!0;var P=ir.call(x,"constructor")&&x.constructor;return typeof P=="function"&&P instanceof P&&Yn.call(P)==A_}var If=vy?ma(vy):ri;function Bm(g){return Lm(g)&&g>=-ot&&g<=ot}var Fm=gy?ma(gy):Ac;function bh(g){return typeof g=="string"||!$e(g)&&Fr(g)&&go(g)==ll}function aa(g){return typeof g=="symbol"||Fr(g)&&go(g)==ul}var Cl=yy?ma(yy):Cc;function ew(g){return g===H}function nw(g){return Fr(g)&&no(g)==ti}function n0(g){return Fr(g)&&go(g)==Fi}var rw=ih(kc),iw=ih(function(g,x){return g<=x});function _h(g){if(!g)return[];if(xo(g))return bh(g)?Ja(g):$n(g);if(Yd&&g[Yd])return dA(g[Yd]());var x=no(g),P=x==so?Ey:x==ta?ev:bo;return P(g)}function ns(g){if(!g)return g===0?g:0;if(g=sa(g),g===wr||g===-wr){var x=g<0?-1:1;return x*Wa}return g===g?g:0}function an(g){var x=ns(g),P=x%1;return x===x?P?x-P:x:0}function jm(g){return g?di(an(g),0,_i):0}function sa(g){if(typeof g=="number")return g;if(aa(g))return Zi;if(Ur(g)){var x=typeof g.valueOf=="function"?g.valueOf():g;g=Ur(x)?x+"":x}if(typeof g!="string")return g===0?g:+g;g=O_(g);var P=No.test(g);return P||uf.test(g)?Rd(g.slice(2),P?2:8):Dn.test(g)?Zi:+g}function Gm(g){return ts(g,Yo(g))}function wh(g){return g?di(an(g),-ot,ot):g===0?g:0}function Rn(g){return g==null?"":yo(g)}var zm=wa(function(g,x){if(ch(x)||xo(x)){ts(x,hi(x),g);return}for(var P in x)ir.call(x,P)&&$d(g,P,x[P])}),ic=wa(function(g,x){ts(x,Yo(x),g)}),oc=wa(function(g,x,P,L){ts(x,Yo(x),g,L)}),ow=wa(function(g,x,P,L){ts(x,hi(x),g,L)}),aw=Ic(Je);function sw(g,x){var P=lu(g);return x==null?P:B_(P,x)}var cw=on(function(g,x){g=ur(g);var P=-1,L=x.length,W=L>2?x[2]:H;for(W&&Ui(x[0],x[1],W)&&(L=1);++P<L;)for(var V=x[P],Z=Yo(V),rt=-1,st=Z.length;++rt<st;){var Tt=Z[rt],At=g[Tt];(At===H||es(At,su[Tt])&&!ir.call(g,Tt))&&(g[Tt]=V[Tt])}return g}),lw=on(function(g){return g.push(H,n2),Lo(Ym,H,g)});function uw(g,x){return jd(g,Te(x,3),vs)}function Wm(g,x){return jd(g,Te(x,3),du)}function r0(g,x){return g==null?g:Pc(g,Te(x,3),Yo)}function fw(g,x){return g==null?g:Ly(g,Te(x,3),Yo)}function dw(g,x){return g&&vs(g,Te(x,3))}function hw(g,x){return g&&du(g,Te(x,3))}function pw(g){return g==null?[]:qd(g,hi(g))}function vw(g){return g==null?[]:qd(g,Yo(g))}function i0(g,x,P){var L=g==null?H:xl(g,x);return L===H?P:L}function gw(g,x){return g!=null&&o2(g,x,F_)}function o0(g,x){return g!=null&&o2(g,x,j_)}var yw=Mv(function(g,x,P){x!=null&&typeof x.toString!="function"&&(x=Wd.call(x)),g[x]=P},Cu(sn)),mw=Mv(function(g,x,P){x!=null&&typeof x.toString!="function"&&(x=Wd.call(x)),ir.call(g,x)?g[x].push(P):g[x]=[P]},Te),xw=on(hu);function hi(g){return xo(g)?D_(g):qs(g)}function Yo(g){return xo(g)?D_(g,!0):H_(g)}function bw(g,x){var P={};return x=Te(x,3),vs(g,function(L,W,V){Mc(P,x(L,W,V),L)}),P}function Oh(g,x){var P={};return x=Te(x,3),vs(g,function(L,W,V){Mc(P,W,x(L,W,V))}),P}var _w=wa(function(g,x,P){vu(g,x,P)}),Ym=wa(function(g,x,P,L){vu(g,x,P,L)}),Hm=Ic(function(g,x){var P={};if(g==null)return P;var L=!1;x=Or(x,function(V){return V=Nc(V,g),L||(L=V.length>1),V}),ts(g,eo(g),P),L&&(P=Lt(P,Ht|he|ie,aC));for(var W=x.length;W--;)Zs(P,x[W]);return P});function Um(g,x){return ww(g,gh(Te(x)))}var Vm=Ic(function(g,x){return g==null?{}:bl(g,x)});function ww(g,x){if(g==null)return{};var P=Or(eo(g),function(L){return[L]});return x=Te(x),zy(g,P,function(L,W){return x(L,W[0])})}function Xm(g,x,P){x=Nc(x,g);var L=-1,W=x.length;for(W||(W=1,g=H);++L<W;){var V=g==null?H:g[ec(x[L])];V===H&&(L=W,V=P),g=rc(V)?V.call(g):V}return g}function Ow(g,x,P){return g==null?g:xf(g,x,P)}function Ew(g,x,P,L){return L=typeof L=="function"?L:H,g==null?g:xf(g,x,P,L)}var $m=Av(hi),qm=Av(Yo);function a0(g,x,P){var L=$e(g),W=L||nc(g)||Cl(g);if(x=Te(x,4),P==null){var V=g&&g.constructor;W?P=L?new V:[]:Ur(g)?P=rc(V)?lu(av(g)):{}:P={}}return(W?vo:vs)(g,function(Z,rt,st){return x(P,Z,rt,st)}),P}function kl(g,x){return g==null?!0:Zs(g,x)}function Sw(g,x,P){return g==null?g:_l(g,x,_v(P))}function Mw(g,x,P,L){return L=typeof L=="function"?L:H,g==null?g:_l(g,x,_v(P),L)}function bo(g){return g==null?[]:Oy(g,hi(g))}function Pw(g){return g==null?[]:Oy(g,Yo(g))}function Tw(g,x,P){return P===H&&(P=x,x=H),P!==H&&(P=sa(P),P=P===P?P:0),x!==H&&(x=sa(x),x=x===x?x:0),di(sa(g),x,P)}function Df(g,x,P){return x=ns(x),P===H?(P=x,x=0):P=ns(P),g=sa(g),Tc(g,x,P)}function Km(g,x,P){if(P&&typeof P!="boolean"&&Ui(g,x,P)&&(x=P=H),P===H&&(typeof x=="boolean"?(P=x,x=H):typeof g=="boolean"&&(P=g,g=H)),g===H&&x===H?(g=0,x=1):(g=ns(g),x===H?(x=g,g=0):x=ns(x)),g>x){var L=g;g=x,x=L}if(P||g%1||x%1){var W=N_();return Qi(g+W*(x-g+Nd("1e-"+((W+"").length-1))),x)}return mv(g,x)}var Aw=to(function(g,x,P){return x=x.toLowerCase(),g+(P?Zm(x):x)});function Zm(g){return u0(Rn(g).toLowerCase())}function Jm(g){return g=Rn(g),g&&g.replace(lo,sA).replace(pr,"")}function Qm(g,x,P){g=Rn(g),x=yo(x);var L=g.length;P=P===H?L:di(an(P),0,L);var W=P;return P-=x.length,P>=0&&g.slice(P,W)==x}function Cw(g){return g=Rn(g),g&&zp.test(g)?g.replace(hl,cA):g}function kw(g){return g=Rn(g),g&&er.test(g)?g.replace(Mn,"\\$&"):g}var t1=to(function(g,x,P){return g+(P?"-":"")+x.toLowerCase()}),s0=to(function(g,x,P){return g+(P?" ":"")+x.toLowerCase()}),e1=qy("toLowerCase");function Nw(g,x,P){g=Rn(g),x=an(x);var L=x?au(g):0;if(!x||L>=x)return g;var W=(x-L)/2;return rh(Hd(W),P)+g+rh(cv(W),P)}function Rw(g,x,P){g=Rn(g),x=an(x);var L=x?au(g):0;return x&&L<x?g+rh(x-L,P):g}function _o(g,x,P){g=Rn(g),x=an(x);var L=x?au(g):0;return x&&L<x?rh(x-L,P)+g:g}function c0(g,x,P){return P||x==null?x=0:x&&(x=+x),TA(Rn(g).replace(lf,""),x||0)}function Lw(g,x,P){return(P?Ui(g,x,P):x===H)?x=1:x=an(x),mf(Rn(g),x)}function Iw(){var g=arguments,x=Rn(g[0]);return g.length<3?x:x.replace(g[1],g[2])}var Dw=to(function(g,x,P){return g+(P?"_":"")+x.toLowerCase()});function l0(g,x,P){return P&&typeof P!="number"&&Ui(g,x,P)&&(x=P=H),P=P===H?_i:P>>>0,P?(g=Rn(g),g&&(typeof x=="string"||x!=null&&!If(x))&&(x=yo(x),!x&&df(g))?Rc(Ja(g),0,P):g.split(x,P)):[]}var Bf=to(function(g,x,P){return g+(P?" ":"")+u0(x)});function Bw(g,x,P){return g=Rn(g),P=P==null?0:di(an(P),0,g.length),x=yo(x),g.slice(P,P+x.length)==x}function ii(g,x,P){var L=U.templateSettings;P&&Ui(g,x,P)&&(x=H),g=Rn(g),x=oc({},x,L,oh);var W=oc({},x.imports,L.imports,oh),V=hi(W),Z=Oy(W,V),rt,st,Tt=0,At=x.interpolate||z,Mt="__p += '",ae=My((x.escape||z).source+"|"+At.source+"|"+(At===Td?te:z).source+"|"+(x.evaluate||z).source+"|$","g"),Oe="//# sourceURL="+(ir.call(x,"sourceURL")?(x.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++g_+"]")+`
`;g.replace(ae,function(Ne,vn,cn,Gr,wo,Ho){return cn||(cn=Gr),Mt+=g.slice(Tt,Ho).replace(Y,lA),vn&&(rt=!0,Mt+=`' +
__e(`+vn+`) +
'`),wo&&(st=!0,Mt+=`';
`+wo+`;
__p += '`),cn&&(Mt+=`' +
((__t = (`+cn+`)) == null ? '' : __t) +
'`),Tt=Ho+Ne.length,Ne}),Mt+=`';
`;var Ce=ir.call(x,"variable")&&x.variable;if(!Ce)Mt=`with (obj) {
`+Mt+`
}
`;else if(ea.test(Ce))throw new Ze(fe);Mt=(st?Mt.replace(cf,""):Mt).replace(Sd,"$1").replace(Md,"$1;"),Mt="function("+(Ce||"obj")+`) {
`+(Ce?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(rt?", __e = _.escape":"")+(st?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Mt+`return __p
}`;var ke=i1(function(){return Wn(V,Oe+"return "+Mt).apply(H,Z)});if(ke.source=Mt,t0(ke))throw ke;return ke}function n1(g){return Rn(g).toLowerCase()}function Fw(g){return Rn(g).toUpperCase()}function jw(g,x,P){if(g=Rn(g),g&&(P||x===H))return O_(g);if(!g||!(x=yo(x)))return g;var L=Ja(g),W=Ja(x),V=E_(L,W),Z=S_(L,W)+1;return Rc(L,V,Z).join("")}function Gw(g,x,P){if(g=Rn(g),g&&(P||x===H))return g.slice(0,Sy(g)+1);if(!g||!(x=yo(x)))return g;var L=Ja(g),W=S_(L,Ja(x))+1;return Rc(L,0,W).join("")}function zw(g,x,P){if(g=Rn(g),g&&(P||x===H))return g.replace(lf,"");if(!g||!(x=yo(x)))return g;var L=Ja(g),W=E_(L,Ja(x));return Rc(L,W).join("")}function Ww(g,x){var P=_r,L=We;if(Ur(x)){var W="separator"in x?x.separator:W;P="length"in x?an(x.length):P,L="omission"in x?yo(x.omission):L}g=Rn(g);var V=g.length;if(df(g)){var Z=Ja(g);V=Z.length}if(P>=V)return g;var rt=P-au(L);if(rt<1)return L;var st=Z?Rc(Z,0,rt).join(""):g.slice(0,rt);if(W===H)return st+L;if(Z&&(rt+=st.length-rt),If(W)){if(g.slice(rt).search(W)){var Tt,At=st;for(W.global||(W=My(W.source,Rn(lr.exec(W))+"g")),W.lastIndex=0;Tt=W.exec(At);)var Mt=Tt.index;st=st.slice(0,Mt===H?rt:Mt)}}else if(g.indexOf(yo(W),rt)!=rt){var ae=st.lastIndexOf(W);ae>-1&&(st=st.slice(0,ae))}return st+L}function Yw(g){return g=Rn(g),g&&Gp.test(g)?g.replace(Pd,hA):g}var Hw=to(function(g,x,P){return g+(P?" ":"")+x.toUpperCase()}),u0=qy("toUpperCase");function r1(g,x,P){return g=Rn(g),x=P?H:x,x===H?fA(g)?gA(g):Fd(g):g.match(x)||[]}var i1=on(function(g,x){try{return Lo(g,H,x)}catch(P){return t0(P)?P:new Ze(P)}}),Uw=Ic(function(g,x){return vo(x,function(P){P=ec(P),Mc(g,P,Xv(g[P],g))}),g});function Vw(g){var x=g==null?0:g.length,P=Te();return g=x?Or(g,function(L){if(typeof L[1]!="function")throw new xa(zt);return[P(L[0]),L[1]]}):[],on(function(L){for(var W=-1;++W<x;){var V=g[W];if(Lo(V[0],this,L))return Lo(V[1],this,L)}})}function Xw(g){return Qe(Lt(g,Ht))}function Cu(g){return function(){return g}}function o1(g,x){return g==null||g!==g?x:g}var f0=Hi(),d0=Hi(!0);function sn(g){return g}function Eh(g){return By(typeof g=="function"?g:Lt(g,Ht))}function a1(g){return jy(Lt(g,Ht))}function $i(g,x){return yf(g,Lt(x,Ht))}var $w=on(function(g,x){return function(P){return hu(P,g,x)}}),qw=on(function(g,x){return function(P){return hu(g,P,x)}});function h0(g,x,P){var L=hi(x),W=qd(x,L);P==null&&!(Ur(x)&&(W.length||!L.length))&&(P=x,x=g,g=this,W=qd(x,hi(x)));var V=!(Ur(P)&&"chain"in P)||!!P.chain,Z=rc(g);return vo(W,function(rt){var st=x[rt];g[rt]=st,Z&&(g.prototype[rt]=function(){var Tt=this.__chain__;if(V||Tt){var At=g(this.__wrapped__),Mt=At.__actions__=$n(this.__actions__);return Mt.push({func:st,args:arguments,thisArg:g}),At.__chain__=Tt,At}return st.apply(g,wc([this.value()],arguments))})}),g}function Nl(){return Gi._===this&&(Gi._=_A),this}function p0(){}function Kw(g){return g=an(g),on(function(x){return yv(x,g)})}var Zw=Pv(Or),Wc=Pv(my),He=Pv(Jp);function v0(g){return om(g)?xy(ec(g)):Wy(g)}function Jw(g){return function(x){return g==null?H:xl(g,x)}}var Qw=Ky(),Rl=Ky(!0);function Sh(){return[]}function g0(){return!1}function tO(){return{}}function eO(){return""}function nO(){return!0}function rO(g,x){if(g=an(g),g<1||g>ot)return[];var P=_i,L=Qi(g,_i);x=Te(x),g-=_i;for(var W=wy(L,x);++P<g;)x(P);return W}function iO(g){return $e(g)?Or(g,ec):aa(g)?[g]:$n(Ml(Rn(g)))}function oO(g){var x=++bA;return Rn(g)+x}var aO=_f(function(g,x){return g+x},0),sO=Tv("ceil"),cO=_f(function(g,x){return g/x},1),lO=Tv("floor");function mt(g){return g&&g.length?gf(g,sn,vv):H}function uO(g,x){return g&&g.length?gf(g,Te(x,2),vv):H}function fO(g){return __(g,sn)}function dO(g,x){return __(g,Te(x,2))}function s1(g){return g&&g.length?gf(g,sn,kc):H}function pC(g,x){return g&&g.length?gf(g,Te(x,2),kc):H}var c1=_f(function(g,x){return g*x},1),l1=Tv("round"),hO=_f(function(g,x){return g-x},0);function pO(g){return g&&g.length?_y(g,sn):0}function Tn(g,x){return g&&g.length?_y(g,Te(x,2)):0}return U.after=Vv,U.ary=kf,U.assign=zm,U.assignIn=ic,U.assignInWith=oc,U.assignWith=ow,U.at=aw,U.before=xs,U.bind=Xv,U.bindAll=Uw,U.bindKey=Pu,U.castArray=Kv,U.chain=M2,U.chunk=um,U.compact=l2,U.concat=u2,U.cond=Vw,U.conforms=Xw,U.constant=Cu,U.countBy=C2,U.create=sw,U.curry=$v,U.curryRight=Sm,U.debounce=Mm,U.defaults=cw,U.defaultsDeep=lw,U.defer=Nf,U.delay=Tu,U.difference=_u,U.differenceBy=mo,U.differenceWith=qn,U.drop=Ea,U.dropRight=dC,U.dropRightWhile=hC,U.dropWhile=f2,U.fill=d2,U.filter=Wv,U.flatMap=k2,U.flatMapDeep=or,U.flatMapDepth=Yv,U.flatten=dm,U.flattenDeep=h2,U.flattenDepth=hm,U.flip=qv,U.flow=f0,U.flowRight=d0,U.fromPairs=ms,U.functions=pw,U.functionsIn=vw,U.groupBy=ee,U.initial=Ye,U.intersection=pm,U.intersectionBy=p2,U.intersectionWith=v2,U.invert=yw,U.invertBy=mw,U.invokeMap=R2,U.iteratee=Eh,U.keyBy=L2,U.keys=hi,U.keysIn=Yo,U.map=vh,U.mapKeys=bw,U.mapValues=Oh,U.matches=a1,U.matchesProperty=$i,U.memoize=Rf,U.merge=_w,U.mergeWith=Ym,U.method=$w,U.methodOf=qw,U.mixin=h0,U.negate=gh,U.nthArg=Kw,U.omit=Hm,U.omitBy=Um,U.once=Go,U.orderBy=I2,U.over=Zw,U.overArgs=Pm,U.overEvery=Wc,U.overSome=He,U.partial=yh,U.partialRight=zo,U.partition=D2,U.pick=Vm,U.pickBy=ww,U.property=v0,U.propertyOf=Jw,U.pull=Bc,U.pullAll=vm,U.pullAllBy=Vi,U.pullAllWith=wu,U.pullAt=Kn,U.range=Qw,U.rangeRight=Rl,U.rearg=U2,U.reject=F2,U.remove=Ou,U.rest=V2,U.reverse=Iv,U.sampleSize=G2,U.set=Ow,U.setWith=Ew,U.shuffle=z2,U.slice=Bn,U.sortBy=H2,U.sortedUniq=Vt,U.sortedUniqBy=oa,U.split=l0,U.spread=Tm,U.tail=xm,U.take=Dv,U.takeRight=Bv,U.takeRightWhile=m2,U.takeWhile=Fc,U.tap=P2,U.throttle=Am,U.thru=Mu,U.toArray=_h,U.toPairs=$m,U.toPairsIn=qm,U.toPath=iO,U.toPlainObject=Gm,U.transform=a0,U.unary=Au,U.union=x2,U.unionBy=b2,U.unionWith=_2,U.uniq=w2,U.uniqBy=bm,U.uniqWith=Fv,U.unset=kl,U.unzip=Eu,U.unzipWith=_m,U.update=Sw,U.updateWith=Mw,U.values=bo,U.valuesIn=Pw,U.without=jc,U.words=r1,U.wrap=Tl,U.xor=hh,U.xorBy=jo,U.xorWith=O2,U.zip=wm,U.zipObject=E2,U.zipObjectDeep=Su,U.zipWith=S2,U.entries=$m,U.entriesIn=qm,U.extend=ic,U.extendWith=oc,h0(U,U),U.add=aO,U.attempt=i1,U.camelCase=Aw,U.capitalize=Zm,U.ceil=sO,U.clamp=Tw,U.clone=Zv,U.cloneDeep=Jv,U.cloneDeepWith=X2,U.cloneWith=Cm,U.conformsTo=$2,U.deburr=Jm,U.defaultTo=o1,U.divide=cO,U.endsWith=Qm,U.eq=es,U.escape=Cw,U.escapeRegExp=kw,U.every=zv,U.find=ph,U.findIndex=fm,U.findKey=uw,U.findLast=Om,U.findLastIndex=dh,U.findLastKey=Wm,U.floor=lO,U.forEach=Pl,U.forEachRight=Hv,U.forIn=r0,U.forInRight=fw,U.forOwn=dw,U.forOwnRight=hw,U.get=i0,U.gt=q2,U.gte=mh,U.has=gw,U.hasIn=o0,U.head=Sa,U.identity=sn,U.includes=N2,U.indexOf=Af,U.inRange=Df,U.invoke=xw,U.isArguments=Al,U.isArray=$e,U.isArrayBuffer=km,U.isArrayLike=xo,U.isArrayLikeObject=Hr,U.isBoolean=K2,U.isBuffer=nc,U.isDate=xh,U.isElement=Qv,U.isEmpty=Nm,U.isEqual=Z2,U.isEqualWith=J2,U.isError=t0,U.isFinite=Rm,U.isFunction=rc,U.isInteger=Lm,U.isLength=Lf,U.isMap=Im,U.isMatch=e0,U.isMatchWith=Q2,U.isNaN=Dm,U.isNative=tw,U.isNil=Wo,U.isNull=jr,U.isNumber=Gc,U.isObject=Ur,U.isObjectLike=Fr,U.isPlainObject=zc,U.isRegExp=If,U.isSafeInteger=Bm,U.isSet=Fm,U.isString=bh,U.isSymbol=aa,U.isTypedArray=Cl,U.isUndefined=ew,U.isWeakMap=nw,U.isWeakSet=n0,U.join=g2,U.kebabCase=t1,U.last=Bo,U.lastIndexOf=ro,U.lowerCase=s0,U.lowerFirst=e1,U.lt=rw,U.lte=iw,U.max=mt,U.maxBy=uO,U.mean=fO,U.meanBy=dO,U.min=s1,U.minBy=pC,U.stubArray=Sh,U.stubFalse=g0,U.stubObject=tO,U.stubString=eO,U.stubTrue=nO,U.multiply=c1,U.nth=y2,U.noConflict=Nl,U.noop=p0,U.now=Uv,U.pad=Nw,U.padEnd=Rw,U.padStart=_o,U.parseInt=c0,U.random=Km,U.reduce=B2,U.reduceRight=Em,U.repeat=Lw,U.replace=Iw,U.result=Xm,U.round=l1,U.runInContext=ct,U.sample=j2,U.size=W2,U.snakeCase=Dw,U.some=Y2,U.sortedIndex=Cf,U.sortedIndexBy=Fo,U.sortedIndexOf=gm,U.sortedLastIndex=ym,U.sortedLastIndexBy=mm,U.sortedLastIndexOf=Xi,U.startCase=Bf,U.startsWith=Bw,U.subtract=hO,U.sum=pO,U.sumBy=Tn,U.template=ii,U.times=rO,U.toFinite=ns,U.toInteger=an,U.toLength=jm,U.toLower=n1,U.toNumber=sa,U.toSafeInteger=wh,U.toString=Rn,U.toUpper=Fw,U.trim=jw,U.trimEnd=Gw,U.trimStart=zw,U.truncate=Ww,U.unescape=Yw,U.uniqueId=oO,U.upperCase=Hw,U.upperFirst=u0,U.each=Pl,U.eachRight=Hv,U.first=Sa,h0(U,function(){var g={};return vs(U,function(x,P){ir.call(U.prototype,P)||(g[P]=x)}),g}(),{chain:!1}),U.VERSION=Ee,vo(["bind","bindKey","curry","curryRight","partial","partialRight"],function(g){U[g].placeholder=U}),vo(["drop","take"],function(g,x){xn.prototype[g]=function(P){P=P===H?1:Ii(an(P),0);var L=this.__filtered__&&!x?new xn(this):this.clone();return L.__filtered__?L.__takeCount__=Qi(P,L.__takeCount__):L.__views__.push({size:Qi(P,_i),type:g+(L.__dir__<0?"Right":"")}),L},xn.prototype[g+"Right"]=function(P){return this.reverse()[g](P).reverse()}}),vo(["filter","map","takeWhile"],function(g,x){var P=x+1,L=P==qi||P==Ki;xn.prototype[g]=function(W){var V=this.clone();return V.__iteratees__.push({iteratee:Te(W,3),type:P}),V.__filtered__=V.__filtered__||L,V}}),vo(["head","last"],function(g,x){var P="take"+(x?"Right":"");xn.prototype[g]=function(){return this[P](1).value()[0]}}),vo(["initial","tail"],function(g,x){var P="drop"+(x?"":"Right");xn.prototype[g]=function(){return this.__filtered__?new xn(this):this[P](1)}}),xn.prototype.compact=function(){return this.filter(sn)},xn.prototype.find=function(g){return this.filter(g).head()},xn.prototype.findLast=function(g){return this.reverse().find(g)},xn.prototype.invokeMap=on(function(g,x){return typeof g=="function"?new xn(this):this.map(function(P){return hu(P,g,x)})}),xn.prototype.reject=function(g){return this.filter(gh(Te(g)))},xn.prototype.slice=function(g,x){g=an(g);var P=this;return P.__filtered__&&(g>0||x<0)?new xn(P):(g<0?P=P.takeRight(-g):g&&(P=P.drop(g)),x!==H&&(x=an(x),P=x<0?P.dropRight(-x):P.take(x-g)),P)},xn.prototype.takeRightWhile=function(g){return this.reverse().takeWhile(g).reverse()},xn.prototype.toArray=function(){return this.take(_i)},vs(xn.prototype,function(g,x){var P=/^(?:filter|find|map|reject)|While$/.test(x),L=/^(?:head|last)$/.test(x),W=U[L?"take"+(x=="last"?"Right":""):x],V=L||/^find/.test(x);W&&(U.prototype[x]=function(){var Z=this.__wrapped__,rt=L?[1]:arguments,st=Z instanceof xn,Tt=rt[0],At=st||$e(Z),Mt=function(vn){var cn=W.apply(U,wc([vn],rt));return L&&ae?cn[0]:cn};At&&P&&typeof Tt=="function"&&Tt.length!=1&&(st=At=!1);var ae=this.__chain__,Oe=!!this.__actions__.length,Ce=V&&!ae,ke=st&&!Oe;if(!V&&At){Z=ke?Z:new xn(this);var Ne=g.apply(Z,rt);return Ne.__actions__.push({func:Mu,args:[Mt],thisArg:H}),new Do(Ne,ae)}return Ce&&ke?g.apply(this,rt):(Ne=this.thru(Mt),Ce?L?Ne.value()[0]:Ne.value():Ne)})}),vo(["pop","push","shift","sort","splice","unshift"],function(g){var x=zd[g],P=/^(?:push|sort|unshift)$/.test(g)?"tap":"thru",L=/^(?:pop|shift)$/.test(g);U.prototype[g]=function(){var W=arguments;if(L&&!this.__chain__){var V=this.value();return x.apply($e(V)?V:[],W)}return this[P](function(Z){return x.apply($e(Z)?Z:[],W)})}}),vs(xn.prototype,function(g,x){var P=U[x];if(P){var L=P.name+"";ir.call(vf,L)||(vf[L]=[]),vf[L].push({name:x,func:P})}}),vf[El(H,Nt).name]=[{name:"wrapper",func:H}],xn.prototype.clone=RA,xn.prototype.reverse=LA,xn.prototype.value=IA,U.prototype.at=T2,U.prototype.chain=jv,U.prototype.commit=Zn,U.prototype.next=Yr,U.prototype.plant=Gv,U.prototype.reverse=vr,U.prototype.toJSON=U.prototype.valueOf=U.prototype.value=A2,U.prototype.first=U.prototype.head,Yd&&(U.prototype[Yd]=Ma),U},nv=yA();Gi._=nv,_e=function(){return nv}.call(pn,gt,pn,Be),_e!==H&&(Be.exports=_e)}).call(this)},73807:function(Be){"use strict";var pn=Be.exports;Be.exports.isNumber=function(gt){return typeof gt=="number"},Be.exports.findMin=function(gt){if(gt.length===0)return 1/0;for(var _e=gt[0],H=1;H<gt.length;H++)_e=Math.min(_e,gt[H]);return _e},Be.exports.findMax=function(gt){if(gt.length===0)return-1/0;for(var _e=gt[0],H=1;H<gt.length;H++)_e=Math.max(_e,gt[H]);return _e},Be.exports.findMinMulti=function(gt){for(var _e=pn.findMin(gt[0]),H=1;H<gt.length;H++)_e=Math.min(_e,pn.findMin(gt[H]));return _e},Be.exports.findMaxMulti=function(gt){for(var _e=pn.findMax(gt[0]),H=1;H<gt.length;H++)_e=Math.max(_e,pn.findMax(gt[H]));return _e},Be.exports.inside=function(gt,_e,H){return gt<=H&&H<=_e}},53843:function(Be,pn,gt){"use strict";var _e=50,H=2,Ee=Math.log(2),nn=Be.exports,xe=gt(73807);function zt(Kt){return 1-Math.abs(Kt)}Be.exports.getUnifiedMinMax=function(Kt,ht){return nn.getUnifiedMinMaxMulti([Kt],ht)},Be.exports.getUnifiedMinMaxMulti=function(Kt,ht){ht=ht||{};var pe=!1,Ht=!1,he=xe.isNumber(ht.width)?ht.width:H,ie=xe.isNumber(ht.size)?ht.size:_e,Ct=xe.isNumber(ht.min)?ht.min:(pe=!0,xe.findMinMulti(Kt)),Pt=xe.isNumber(ht.max)?ht.max:(Ht=!0,xe.findMaxMulti(Kt)),wt=Pt-Ct,Nt=wt/(ie-1);return pe&&(Ct=Ct-2*he*Nt),Ht&&(Pt=Pt+2*he*Nt),{min:Ct,max:Pt}},Be.exports.create=function(Kt,ht){if(ht=ht||{},!Kt||Kt.length===0)return[];var pe=xe.isNumber(ht.size)?ht.size:_e,Ht=xe.isNumber(ht.width)?ht.width:H,he=nn.getUnifiedMinMax(Kt,{size:pe,width:Ht,min:ht.min,max:ht.max}),ie=he.min,Ct=he.max,Pt=Ct-ie,wt=Pt/(pe-1);if(Pt===0)return[{x:ie,y:1}];for(var Nt=[],Re=0;Re<pe;Re++)Nt.push({x:ie+Re*wt,y:0});var Le=function(We){return Math.floor((We-ie)/wt)},In=fe(zt,Ht),un=In[Ht],Sn=In[Ht-1]-In[Ht-2],Cn=0;Kt.forEach(function(We){var Fe=Le(We);if(!(Fe+Ht<0||Fe-Ht>=Nt.length)){var bi=Math.max(Fe-Ht,0),qi=Fe,Co=Math.min(Fe+Ht,Nt.length-1),Ki=bi-(Fe-Ht),wr=Fe+Ht-Co,ot=In[-Ht-1+Ki]||0,Wa=In[-Ht-1+wr]||0,Zi=un/(un-ot-Wa);Ki>0&&(Cn+=Zi*(Ki-1)*Sn);var _i=Math.max(0,Fe-Ht+1);xe.inside(0,Nt.length-1,_i)&&(Nt[_i].y+=Zi*1*Sn),xe.inside(0,Nt.length-1,qi+1)&&(Nt[qi+1].y-=Zi*2*Sn),xe.inside(0,Nt.length-1,Co+1)&&(Nt[Co+1].y+=Zi*1*Sn)}});var mn=Cn,hr=0,_r=0;return Nt.forEach(function(We){hr+=We.y,mn+=hr,We.y=mn,_r+=mn}),_r>0&&Nt.forEach(function(We){We.y/=_r}),Nt};function fe(Kt,ht){for(var pe={},Ht=0,he=-ht;he<=ht;he++)Ht+=Kt(he/ht),pe[he]=Ht;return pe}Be.exports.getExpectedValueFromPdf=function(Kt){if(!(!Kt||Kt.length===0)){var ht=0;return Kt.forEach(function(pe){ht+=pe.x*pe.y}),ht}},Be.exports.getXWithLeftTailArea=function(Kt,ht){if(!(!Kt||Kt.length===0)){for(var pe=0,Ht=0,he=0;he<Kt.length&&(Ht=he,pe+=Kt[he].y,!(pe>=ht));he++);return Kt[Ht].x}},Be.exports.getPerplexity=function(Kt){if(!(!Kt||Kt.length===0)){var ht=0;return Kt.forEach(function(pe){var Ht=Math.log(pe.y);isFinite(Ht)&&(ht+=pe.y*Ht)}),ht=-ht/Ee,Math.pow(2,ht)}}},86851:function(Be,pn,gt){"use strict";var _e=gt(35171),H=Array.prototype.concat,Ee=Array.prototype.slice,nn=Be.exports=function(zt){for(var fe=[],Kt=0,ht=zt.length;Kt<ht;Kt++){var pe=zt[Kt];_e(pe)?fe=H.call(fe,Ee.call(pe)):fe.push(pe)}return fe};nn.wrap=function(xe){return function(){return xe(nn(arguments))}}},64599:function(Be,pn,gt){var _e=gt(96263);function H(Ee,nn){var xe=typeof Symbol!="undefined"&&Ee[Symbol.iterator]||Ee["@@iterator"];if(!xe){if(Array.isArray(Ee)||(xe=_e(Ee))||nn&&Ee&&typeof Ee.length=="number"){xe&&(Ee=xe);var zt=0,fe=function(){};return{s:fe,n:function(){return zt>=Ee.length?{done:!0}:{done:!1,value:Ee[zt++]}},e:function(he){throw he},f:fe}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Kt=!0,ht=!1,pe;return{s:function(){xe=xe.call(Ee)},n:function(){var he=xe.next();return Kt=he.done,he},e:function(he){ht=!0,pe=he},f:function(){try{!Kt&&xe.return!=null&&xe.return()}finally{if(ht)throw pe}}}}Be.exports=H,Be.exports.__esModule=!0,Be.exports.default=Be.exports}}]);
}());