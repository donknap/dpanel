"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9013],{52688:function(X,Z,r){var u=r(1413),f=r(45987),A=r(67294),b=r(64203),j=r(85893),E=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],D=A.forwardRef(function(R,O){var C=R.fieldProps,P=R.unCheckedChildren,W=R.checkedChildren,F=R.proFieldProps,g=(0,f.Z)(R,E);return(0,j.jsx)(b.Z,(0,u.Z)({valueType:"switch",fieldProps:(0,u.Z)({unCheckedChildren:P,checkedChildren:W},C),ref:O,valuePropName:"checked",proFieldProps:F,filedConfig:{valuePropName:"checked",ignoreWidth:!0,customLightMode:!0}},g))});Z.Z=D},90672:function(X,Z,r){var u=r(1413),f=r(45987),A=r(67294),b=r(64203),j=r(85893),E=["fieldProps","proFieldProps"],D=function(O,C){var P=O.fieldProps,W=O.proFieldProps,F=(0,f.Z)(O,E);return(0,j.jsx)(b.Z,(0,u.Z)({ref:C,valueType:"textarea",fieldProps:P,proFieldProps:W},F))};Z.Z=A.forwardRef(D)},39900:function(X,Z,r){r.r(Z),r.d(Z,{default:function(){return Q}});var u=r(15009),f=r.n(u),A=r(99289),b=r.n(A),j=r(1699),E=r(75870),D=r(86548),R=r(74453),O=r(63713),C=r(67294),P=r(36146),W=r(5574),F=r.n(W),g=r(3616),M=r(24963),L=r(184),l=r(5966),G=r(52688),Y=r(97462),oe=r(90672),k=r(62370),_=r(83622),q=r(23345),ee=r(25593),re=r(66309),c=r(85893),te=(0,C.forwardRef)(function(B,e){var o=(0,C.useState)(!1),s=F()(o,2),t=s[0],n=s[1],i=(0,C.useRef)(),v=(0,C.useState)(0),h=F()(v,2),y=h[0],d=h[1],N=(0,C.useContext)(M.Z),H=N.message,m=new P.Uo("components.image");return(0,C.useImperativeHandle)(e,function(){return{setEditId:function(p){(0,E.t1)({id:p}).then(function(a){var x;n(!0),d(p),(x=i.current)===null||x===void 0||x.setFieldsValue({title:a.data.info.title,serverAddress:a.data.info.serverAddress,username:a.data.info.setting.username,password:a.data.info.setting.password,proxy:a.data.info.setting.proxy.join(`
`),enableHttp:a.data.info.setting.enableHttp,enableAuth:!!a.data.info.setting.username})})}}}),(0,c.jsxs)(L.a,{drawerProps:{forceRender:!0,width:g.R_},name:"createRegisry",title:m.format("registryCreateTitle"),open:t,onOpenChange:function(p){var a;n(p),(a=B.onFinish)===null||a===void 0||a.call(B)},layout:"horizontal",labelCol:{span:5,offset:0},formRef:i,trigger:(0,c.jsx)(_.ZP,{type:"primary",onClick:function(){var p;(p=i.current)===null||p===void 0||p.resetFields(),d(0)},children:m.format("registryCreateTirggerButton")}),onFinish:function(){var S=b()(f()().mark(function p(a){var x,$,T,I,K;return f()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,(0,E.ZH)({id:y,title:a.title,serverAddress:a.serverAddress,username:(x=a.username)!==null&&x!==void 0?x:"",password:($=a.password)!==null&&$!==void 0?$:"",proxy:a.proxy?a.proxy.split(`
`):[],enableHttp:a.enableHttp});case 2:if(T=U.sent,!(T&&T.data&&T.data.id>0)){U.next=8;break}return H.success(P.FD.format("finish")),(I=B.onFinish)===null||I===void 0||I.call(B),(K=i.current)===null||K===void 0||K.resetFields(),U.abrupt("return",!0);case 8:case"end":return U.stop()}},p)}));return function(p){return S.apply(this,arguments)}}(),children:[(0,c.jsx)(l.Z,{label:m.format("registryCreateFormTitle"),name:"title",placeholder:m.format("registryCreateFormTitleEmpty"),required:!0}),(0,c.jsx)(l.Z,{label:m.format("registryCreateFormServerAddress"),name:"serverAddress",placeholder:"ccr.ccs.tencentyun.com, docker.io, 127.0.0.1:5000",disabled:!!y,required:!0,rules:[{required:!0}]}),(0,c.jsx)(G.Z,{label:m.format("registryCreateFormEnableHttp"),name:"enableHttp"}),(0,c.jsx)(G.Z,{label:m.format("registryCreateFormEnableAuth"),name:"enableAuth"}),(0,c.jsx)(Y.Z,{name:["enableAuth"],children:function(p){var a=p.enableAuth;return a&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(l.Z,{label:m.format("registryCreateFormUsername"),name:"username",placeholder:m.format("registryCreateFormUsernameEmpty"),tooltip:""},"username"),(0,c.jsx)(l.Z.Password,{label:m.format("registryCreateFormPassword"),name:"password",allowClear:!0,placeholder:m.format("registryCreateFormPasswordEmpty")},"password")]})}}),(0,c.jsx)(oe.Z,{label:m.format("registryCreateFormProxy"),name:"proxy",fieldProps:{autoSize:{minRows:10}},placeholder:m.format("registryCreateFormProxyTip")}),(0,c.jsx)(k.Z,{label:m.format("registryCreateFormProxyRecommand"),children:(0,c.jsx)(q.Z,{wrap:!0,children:["docker.1panel.live","docker.m.daocloud.io","docker.1ms.run"].map(function(S,p){return(0,c.jsx)(ee.Z.Link,{onClick:function(){var x,$,T=[];if((x=i.current)!==null&&x!==void 0&&x.getFieldValue("proxy")){var I;T=(I=i.current)===null||I===void 0?void 0:I.getFieldValue("proxy").split(`
`)}else T=[];T.includes(S)||T.push(S),($=i.current)===null||$===void 0||$.setFieldValue("proxy",T.join(`
`))},children:(0,c.jsx)(re.Z,{color:"cyan",children:S})},p)})})},"recommend")]})}),ne=te,se=r(55681);function Q(){var B=(0,C.useRef)(),e=(0,C.useRef)(),o=(0,O.useAccess)();return(0,c.jsx)(R._z,{header:{extra:[(0,c.jsx)(j.u,{access:"canSeeImageRegistryManage",children:(0,c.jsx)(ne,{onFinish:function(){var t,n;!((t=B.current)===null||t===void 0)&&t.reloadAndRest&&((n=B.current)===null||n===void 0||n.reloadAndRest())},ref:e},"create")},"create")]},children:(0,c.jsx)(se.Co,{rowKey:"id",columns:[{title:P.FD.format("listTitle"),ellipsis:!0,dataIndex:"title"},{title:"Url",dataIndex:"serverAddress"},{title:P.FD.format("listUsername"),dataIndex:["setting","username"],search:!1}],request:function(){var s=b()(f()().mark(function t(n,i,v){var h;return f()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,E.Ot)({title:n.title,serverAddress:n.serverAddress});case 2:return h=d.sent,d.abrupt("return",{data:h.data.list,success:!0,total:h.data.list.length});case 4:case"end":return d.stop()}},t)}));return function(t,n,i){return s.apply(this,arguments)}}(),rowSelection:o.canSeeImageRegistryManage?{defaultSelectedRowKeys:[],alwaysShowAlert:!0}:void 0,actionRef:B,actions:[{key:"edit",label:P.FD.format("listManageEdit"),showInContext:"manage",showInOperator:!0,icon:(0,c.jsx)(D.Z,{}),action:function(t){return b()(f()().mark(function n(){var i,v,h;return f()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:v=t.finish,h=t.selectedRow,v(!0),(i=e.current)===null||i===void 0||i.setEditId(h.id);case 3:case"end":return d.stop()}},n)}))()}},{key:"dataPermission"},{key:"delete",action:function(t){return b()(f()().mark(function n(){var i,v,h;return f()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return i=t.finish,v=t.selectedRows,h=t.loading,h(),d.abrupt("return",(0,E.ix)({id:v.map(function(N){return N.id})}).finally(function(){i(!0)}));case 3:case"end":return d.stop()}},n)}))()}}]})})}},75870:function(X,Z,r){r.d(Z,{Ot:function(){return E},ZH:function(){return R},ix:function(){return C},t1:function(){return W}});var u=r(15009),f=r.n(u),A=r(99289),b=r.n(A),j=r(63713);function E(g){return D.apply(this,arguments)}function D(){return D=b()(f()().mark(function g(M){return f()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,j.request)("/dpanel/api/common/registry/get-list",{method:"POST",data:M}));case 1:case"end":return l.stop()}},g)})),D.apply(this,arguments)}function R(g){return O.apply(this,arguments)}function O(){return O=b()(f()().mark(function g(M){return f()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,j.request)("/dpanel/api/common/registry/create",{method:"POST",data:M}));case 1:case"end":return l.stop()}},g)})),O.apply(this,arguments)}function C(g){return P.apply(this,arguments)}function P(){return P=b()(f()().mark(function g(M){return f()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,j.request)("/dpanel/api/common/registry/delete",{method:"POST",data:M}));case 1:case"end":return l.stop()}},g)})),P.apply(this,arguments)}function W(g){return F.apply(this,arguments)}function F(){return F=b()(f()().mark(function g(M){return f()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,j.request)("/dpanel/api/common/registry/get-detail",{method:"POST",data:M}));case 1:case"end":return l.stop()}},g)})),F.apply(this,arguments)}},66309:function(X,Z,r){r.d(Z,{Z:function(){return B}});var u=r(67294),f=r(93967),A=r.n(f),b=r(98423),j=r(98787),E=r(69760),D=r(96159),R=r(45353),O=r(53124),C=r(11568),P=r(15063),W=r(14747),F=r(83262),g=r(83559);const M=e=>{const{paddingXXS:o,lineWidth:s,tagPaddingHorizontal:t,componentCls:n,calc:i}=e,v=i(t).sub(s).equal(),h=i(o).sub(s).equal();return{[n]:Object.assign(Object.assign({},(0,W.Wf)(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:v,fontSize:e.tagFontSize,lineHeight:e.tagLineHeight,whiteSpace:"nowrap",background:e.defaultBg,border:`${(0,C.bf)(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,opacity:1,transition:`all ${e.motionDurationMid}`,textAlign:"start",position:"relative",[`&${n}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:e.defaultColor},[`${n}-close-icon`]:{marginInlineStart:h,fontSize:e.tagIconSize,color:e.colorIcon,cursor:"pointer",transition:`all ${e.motionDurationMid}`,"&:hover":{color:e.colorTextHeading}},[`&${n}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${e.iconCls}-close, ${e.iconCls}-close:hover`]:{color:e.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${n}-checkable-checked):hover`]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},"&-hidden":{display:"none"},[`> ${e.iconCls} + span, > span + ${e.iconCls}`]:{marginInlineStart:v}}),[`${n}-borderless`]:{borderColor:"transparent",background:e.tagBorderlessBg}}},L=e=>{const{lineWidth:o,fontSizeIcon:s,calc:t}=e,n=e.fontSizeSM;return(0,F.IX)(e,{tagFontSize:n,tagLineHeight:(0,C.bf)(t(e.lineHeightSM).mul(n).equal()),tagIconSize:t(s).sub(t(o).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:e.defaultBg})},l=e=>({defaultBg:new P.t(e.colorFillQuaternary).onBackground(e.colorBgContainer).toHexString(),defaultColor:e.colorText});var G=(0,g.I$)("Tag",e=>{const o=L(e);return M(o)},l),Y=function(e,o){var s={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&o.indexOf(t)<0&&(s[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)o.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(s[t[n]]=e[t[n]]);return s},k=u.forwardRef((e,o)=>{const{prefixCls:s,style:t,className:n,checked:i,children:v,icon:h,onChange:y,onClick:d}=e,N=Y(e,["prefixCls","style","className","checked","children","icon","onChange","onClick"]),{getPrefixCls:H,tag:m}=u.useContext(O.E_),S=I=>{y==null||y(!i),d==null||d(I)},p=H("tag",s),[a,x,$]=G(p),T=A()(p,`${p}-checkable`,{[`${p}-checkable-checked`]:i},m==null?void 0:m.className,n,x,$);return a(u.createElement("span",Object.assign({},N,{ref:o,style:Object.assign(Object.assign({},t),m==null?void 0:m.style),className:T,onClick:S}),h,u.createElement("span",null,v)))}),_=r(98719);const q=e=>(0,_.Z)(e,(o,{textColor:s,lightBorderColor:t,lightColor:n,darkColor:i})=>({[`${e.componentCls}${e.componentCls}-${o}`]:{color:s,background:n,borderColor:t,"&-inverse":{color:e.colorTextLightSolid,background:i,borderColor:i},[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}));var ee=(0,g.bk)(["Tag","preset"],e=>{const o=L(e);return q(o)},l);function re(e){return typeof e!="string"?e:e.charAt(0).toUpperCase()+e.slice(1)}const c=(e,o,s)=>{const t=re(s);return{[`${e.componentCls}${e.componentCls}-${o}`]:{color:e[`color${s}`],background:e[`color${t}Bg`],borderColor:e[`color${t}Border`],[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}};var te=(0,g.bk)(["Tag","status"],e=>{const o=L(e);return[c(o,"success","Success"),c(o,"processing","Info"),c(o,"error","Error"),c(o,"warning","Warning")]},l),ne=function(e,o){var s={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&o.indexOf(t)<0&&(s[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)o.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(s[t[n]]=e[t[n]]);return s};const Q=u.forwardRef((e,o)=>{const{prefixCls:s,className:t,rootClassName:n,style:i,children:v,icon:h,color:y,onClose:d,bordered:N=!0,visible:H}=e,m=ne(e,["prefixCls","className","rootClassName","style","children","icon","color","onClose","bordered","visible"]),{getPrefixCls:S,direction:p,tag:a}=u.useContext(O.E_),[x,$]=u.useState(!0),T=(0,b.Z)(m,["closeIcon","closable"]);u.useEffect(()=>{H!==void 0&&$(H)},[H]);const I=(0,j.o2)(y),K=(0,j.yT)(y),J=I||K,U=Object.assign(Object.assign({backgroundColor:y&&!J?y:void 0},a==null?void 0:a.style),i),w=S("tag",s),[ue,me,fe]=G(w),pe=A()(w,a==null?void 0:a.className,{[`${w}-${y}`]:J,[`${w}-has-color`]:y&&!J,[`${w}-hidden`]:!x,[`${w}-rtl`]:p==="rtl",[`${w}-borderless`]:!N},t,n,me,fe),le=V=>{V.stopPropagation(),d==null||d(V),!V.defaultPrevented&&$(!1)},[,ge]=(0,E.b)((0,E.w)(e),(0,E.w)(a),{closable:!1,closeIconRender:V=>{const Ce=u.createElement("span",{className:`${w}-close-icon`,onClick:le},V);return(0,D.wm)(V,Ce,z=>({onClick:de=>{var ae;(ae=z==null?void 0:z.onClick)===null||ae===void 0||ae.call(z,de),le(de)},className:A()(z==null?void 0:z.className,`${w}-close-icon`)}))}}),ve=typeof m.onClick=="function"||v&&v.type==="a",ie=h||null,he=ie?u.createElement(u.Fragment,null,ie,v&&u.createElement("span",null,v)):v,ce=u.createElement("span",Object.assign({},T,{ref:o,className:pe,style:U}),he,ge,I&&u.createElement(ee,{key:"preset",prefixCls:w}),K&&u.createElement(te,{key:"status",prefixCls:w}));return ue(ve?u.createElement(R.Z,{component:"Tag"},ce):ce)});Q.CheckableTag=k;var B=Q}}]);
