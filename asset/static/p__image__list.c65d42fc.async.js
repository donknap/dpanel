"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4214],{44349:function(re,B,e){var L=e(97857),a=e.n(L),F=e(15009),i=e.n(F),f=e(99289),o=e.n(f),O=e(74763),M=e(17186),U=e(5966),b=e(86250),v=e(67294),S=e(85893),K=(0,v.forwardRef)(function(d,y){var m=(0,v.useRef)();(0,v.useImperativeHandle)(y,function(){return{addItem:function(T){function n(w,P,R){return T.apply(this,arguments)}return n.toString=function(){return T.toString()},n}(function(T,n,w){var P,R=(P=m.current)===null||P===void 0?void 0:P.getList(),A;if(R==null||R.forEach(function(h,E){h[T]==n[T]&&(A=E)}),!(0,O.k)(A)&&w){var Y;(Y=m.current)===null||Y===void 0||Y.remove(A),A=void 0}if(!A){var p;(p=m.current)===null||p===void 0||p.add(n)}}),removeItemByKey:function(n,w){return o()(i()().mark(function P(){var R,A;return i()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return A=(R=m.current)===null||R===void 0?void 0:R.getList(),A==null||A.forEach(function(h,E){if(h[n]==w){var z;(z=m.current)===null||z===void 0||z.remove(E);return}}),p.abrupt("return");case 3:case"end":return p.stop()}},P)}))()},clear:function(n){if(!n){var w;n=(w=m.current)===null||w===void 0||(w=w.getList())===null||w===void 0?void 0:w.map(function(R,A){return A})}if(n){var P;(P=m.current)===null||P===void 0||P.remove(n)}},getList:function(){var n;return(n=m.current)===null||n===void 0?void 0:n.getList()}}});var _={};return d.hideCopyButton===!0&&(_.copyIconProps=!1),d.hideDeleteButton===!0&&(_.deleteIconProps=!1),(0,S.jsx)(M.u,a()(a()({initialValue:d.initialValue,label:d.label,name:d.name,actionRef:m,creatorButtonProps:d.showAddButton?{creatorButtonText:d.label?d.label:d.showAddButtonLabel?d.showAddButtonLabel:d.name}:!1,min:d.min?d.min:0},_),{},{children:function(n,w,P){return(0,S.jsx)(b.Z,{justify:d.justify,gap:d.gap,children:d.items.map(function(R){return R.render?(0,S.jsx)("div",{children:R.render&&R.render(n,w,P)},"".concat(d.name,"-").concat(R.name,"-").concat(n.key)):(0,S.jsx)(U.Z,{width:R.width,name:R.name,label:R.label,required:R.required,rules:[{required:R.required}],disabled:R.disabled,placeholder:R.placeholder},"".concat(d.name,"-").concat(R.name,"-").concat(n.key))})})}}))});B.Z=K},47248:function(re,B,e){var L=e(15009),a=e.n(L),F=e(99289),i=e.n(F),f=e(5574),o=e.n(f),O=e(38345),M=e(97269),U=e(5966),b=e(62370),v=e(64317),S=e(83622),K=e(85265),d=e(25593),y=e(42075),m=e(67294),_=e(92754),T=e(82346),n=e(2205),w=e(3616),P=e(36146),R=e(23430),A=e(68297),Y=e(77342),p=e(85893),h=(0,m.forwardRef)(function(E,z){var s=(0,m.useState)(!1),k=o()(s,2),Ee=k[0],N=k[1],ae=(0,m.useRef)(),Q=(0,m.useRef)(),me=(0,m.useState)(!1),I=o()(me,2),oe=I[0],Pe=I[1],r=new P.Uo("components.imagePull");return(0,m.useImperativeHandle)(z,function(){return{upgradeImage:function(C){var Z;return N(!0),(Z=ae.current)===null||Z===void 0||Z.setFieldValue("imageUrl",C),(0,A.Ze)({tag:C,type:"pull"})},setImageName:function(C){var Z;N(!0),(Z=ae.current)===null||Z===void 0||Z.setFieldValue("imageUrl",C)}}}),[(0,p.jsx)(S.ZP,{type:E.buttonType?E.buttonType:"default",icon:(0,p.jsx)(R.Z,{}),onClick:function(){var C,Z;N(!0),(C=ae.current)===null||C===void 0||C.resetFields(),(Z=Q.current)===null||Z===void 0||Z.setStart("")},children:r.format("triggerButton")},"remoteBtn"),(0,p.jsxs)(K.Z,{forceRender:!0,open:Ee,title:r.format("drawerTitle"),width:w.R_,onClose:function(){var C;N(!1),(C=Q.current)===null||C===void 0||C.close()},footer:!1,children:[(0,p.jsx)(O.Z,{children:(0,p.jsx)(d.Z.Text,{children:(0,p.jsxs)("ul",{style:{lineHeight:"30px"},children:[(0,p.jsxs)("li",{children:[r.format("tip.1")," ",(0,p.jsx)("a",{href:"https://hub.docker.com/",target:"_blank",children:P.FD.format("help")})]}),(0,p.jsxs)("li",{children:[r.format("tip.2")," ",(0,p.jsx)("a",{href:"https://hub.docker.com/search?q=",target:"_blank",children:P.FD.format("help")})]}),(0,p.jsxs)("li",{children:[r.format("tip.3")," "]}),(0,p.jsxs)("li",{children:[r.format("tip.4")," ",(0,p.jsx)(T.Link,{to:"/image/registry",children:P.Ob.format("image.registry.create")})]}),(0,p.jsxs)("li",{children:[r.format("tip.5")," ",(0,p.jsx)(T.Link,{to:"/image/registry",children:P.Ob.format("image.registry")})]})]})})}),(0,p.jsx)(O.Z,{title:r.format("triggerButton"),headerBordered:!0,children:(0,p.jsxs)(M.A,{formRef:ae,submitter:!1,isKeyPressSubmit:!0,onFinish:function(){var V=i()(a()().mark(function C(Z){var X,pe,ne,ie,de,je;return a()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return de=(X=Z.imageUrl)!==null&&X!==void 0?X:"",Z.registryUrl&&(de="".concat(Z.registryUrl,"/").concat(de)),Pe(!0),(pe=Q.current)===null||pe===void 0||pe.setStart(de),q.next=6,(0,A.Ze)({tag:(0,Y.Z)(de," "),type:"pull",platform:(ne=Z.platform)!==null&&ne!==void 0?ne:""}).finally(function(){Pe(!1)});case 6:return je=q.sent,(ie=Q.current)===null||ie===void 0||ie.setFinish(),N(!1),E.onFinish&&E.onFinish(je.data.tag),q.abrupt("return",!0);case 11:case"end":return q.stop()}},C)}));return function(C){return V.apply(this,arguments)}}(),children:[(0,p.jsx)(U.Z,{name:"registryUrl",hidden:!0}),(0,p.jsxs)(y.Z.Compact,{children:[(0,p.jsx)(b.Z,{shouldUpdate:!0,children:function(C){return(0,p.jsx)(n.Z,{width:"150px",onChange:function(X){C.setFieldValue("registryUrl",X?X.serverAddress:"")}})}}),(0,p.jsx)(U.Z,{disabled:oe,width:270,name:"imageUrl",placeholder:r.format("imageUrlEmpty"),required:!0,rules:[{required:!0}]}),(0,p.jsx)(v.Z,{name:"platform",style:{width:100},placeholder:r.format("imagePlatformEmpty"),options:A.ii.map(function(V){return{label:V.name,value:V.name}})}),(0,p.jsx)(S.ZP,{loading:oe,onClick:i()(a()().mark(function V(){var C;return a()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:(C=ae.current)===null||C===void 0||C.submit();case 1:case"end":return X.stop()}},V)})),children:r.format("triggerButton")}),(0,p.jsx)(S.ZP,{danger:!0,onClick:function(){var C;(C=Q.current)===null||C===void 0||C.close()},children:P.FD.format("listManageKill")})]}),(0,p.jsx)(b.Z,{label:r.format("progressTitle"),children:(0,p.jsx)(_.Z,{ref:Q})})]})})]},"remoteDrawer")]});B.Z=h},78451:function(re,B,e){e.d(B,{Z:function(){return F}});var L=e(67294),a=e(85893);function F(i){var f;return(0,a.jsx)("span",{style:{width:i.width?i.width:"auto",wordBreak:"break-word"},children:(f=i.content)!==null&&f!==void 0?f:i.children})}},51100:function(re,B,e){e.d(B,{Z:function(){return f}});var L=e(4813),a=e(91604),F=e(1677),i=e(85893);function f(o){return o.showDragger?(0,i.jsx)(a.Z,{max:o.max?o.max:1,title:o.title,label:o.label,required:o.required,rules:[{required:o.required}],fieldProps:{multiple:!!(o.max&&o.max>1),name:"file",accept:o.accept,action:"/dpanel/api/common/attach/upload",headers:{Authorization:"Bearer "+localStorage.getItem("token")},onRemove:function(M){return new Promise(function(U){var b;(0,L._)({path:(b=M.response.data.path)!==null&&b!==void 0?b:""}).then(function(v){U(!0)})})},onChange:function(M){M.file.status=="done"&&o.onFinish&&o.onFinish(M.fileList)}},name:o.name}):(0,i.jsx)(F.Z,{max:o.max?o.max:1,title:o.title,label:o.label,required:o.required,rules:[{required:o.required}],fieldProps:{multiple:!!(o.max&&o.max>1),name:"file",accept:o.accept,action:"/dpanel/api/common/attach/upload",headers:{Authorization:"Bearer "+localStorage.getItem("token")},onRemove:function(M){return new Promise(function(U){var b;(0,L._)({path:(b=M.response.data.path)!==null&&b!==void 0?b:""}).then(function(v){U(!0)})})},onChange:function(M){M.file.status=="done"&&o.onFinish&&o.onFinish(M.fileList)}},name:o.name})}},3616:function(re,B,e){e.d(B,{Ed:function(){return i},FK:function(){return a},R_:function(){return L},ob:function(){return F}});var L=window.innerWidth<=1024?"90vw":"65vw",a="90vw",F="60vw",i="50vh"},65913:function(re,B,e){var L=e(5574),a=e.n(L),F=e(74330),i=e(67294),f=e(85893),o=(0,i.forwardRef)(function(O,M){(0,i.useImperativeHandle)(M,function(){return{show:function(){S(!0)},destroy:function(){S(!1)}}});var U=(0,i.useState)(!1),b=a()(U,2),v=b[0],S=b[1];return(0,f.jsx)(F.Z,{spinning:v,size:"default",children:O.children})});B.Z=o},17550:function(re,B,e){e.r(B),e.d(B,{default:function(){return De}});var L=e(19632),a=e.n(L),F=e(15009),i=e.n(F),f=e(99289),o=e.n(f),O=e(5574),M=e.n(O),U=e(74453),b=e(97269),v=e(62370),S=e(37476),K=e(5966),d=e(42075),y=e(25593),m=e(66309),_=e(84567),T=e(83622),n=e(67294),w=e(82346),P=e(73813),R=e(5251),A=e(80821),Y=e(58638),p=e(1912),h=e(52645),E=e(99611),z=e(82061),s=e(2205),k=e(67255),Ee=e(1584),N=e(1699),ae=e(184),Q=e(44349),me=e(51100),I=e(36146),oe=e(3616),Pe=e(57546),r=e(85893),V=(0,n.forwardRef)(function(q,W){(0,n.useImperativeHandle)(W,function(){return{}});var fe=(0,n.useRef)(),se=new I.Uo("components.image");return(0,r.jsxs)(ae.a,{drawerProps:{width:oe.R_},title:se.format("importTitle"),trigger:(0,r.jsx)(T.ZP,{icon:(0,r.jsx)(Pe.Z,{}),children:se.format("importTitle")},"create"),formRef:fe,onFinish:function(){var Re=o()(i()().mark(function he(ue){var le,te;return i()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.next=2,(0,P.GH)({localUrl:ue.imageTarUpload?ue.imageTarUpload.map(function(ce){return ce.response.data.path}):[],remoteUrl:ue.remoteUrl?ue.remoteUrl.map(function(ce){return ce.url}):[]});case 2:return te=J.sent,!((le=fe.current)===null||le===void 0)&&le.resetFields&&fe.current.resetFields(),q.onFinish&&q.onFinish(),J.abrupt("return",!0);case 6:case"end":return J.stop()}},he)}));return function(he){return Re.apply(this,arguments)}}(),children:[(0,r.jsx)(me.Z,{label:se.format("importLocal"),showDragger:!0,max:10,title:se.format("importLocalTip"),name:"imageTarUpload",accept:".tar"}),(0,r.jsx)(Q.Z,{label:se.format("importRemote"),name:"remoteUrl",showAddButton:!0,hideCopyButton:!0,min:1,items:[{width:"lg",name:"url",placeholder:se.format("importRemoteEmpty")}]})]})}),C=V,Z=e(47248),X=e(96486),pe=e.n(X),ne=e(55375),ie=e(98510),de=e(68297),je=e(97841);function De(){var q=(0,w.useAccess)(),W=(0,n.useRef)(),fe=(0,n.useState)({force:!1}),se=M()(fe,2),Re=se[0],he=se[1],ue=(0,n.useRef)(),le=(0,n.useRef)(),te=(0,n.useRef)(),H=new I.Uo("image"),J=(0,n.useRef)(),ce=(0,n.useRef)(),be=(0,n.useState)(1),Oe=M()(be,2),_e=Oe[0],ge=Oe[1];return(0,n.useEffect)(function(){var $;!(($=W.current)===null||$===void 0)&&$.reloadAndRest&&W.current.reloadAndRest().then(function(){var x,c;!((x=W.current)===null||x===void 0)&&x.setPageInfo&&W.current.setPageInfo({current:(0,k.G$)(ne.CM,(c=W.current)===null||c===void 0?void 0:c.pageInfo)})})},[_e]),(0,r.jsxs)(U._z,{header:{extra:[(0,r.jsx)(N.u,{access:"canSeeImageListPull",children:(0,r.jsx)(Z.Z,{onFinish:function(){ge(_e+1)}},"remote")},"remote"),(0,r.jsx)(N.u,{access:"canSeeImageListManageCreate",children:(0,r.jsx)(C,{onFinish:function(){ge(_e+1)}})},"import")]},children:[(0,r.jsx)(Ee.Z,{ref:le,onClose:function(){ge(_e+1)}}),(0,r.jsx)(ie.C,{rowKey:"Id",onChange:function(x,c,G){!pe().isArray(G)&&(0,k.LX)(ne.CM,G.columnKey,G.order),(0,k.MJ)(ne.CM,x.current)},columns:[{title:"Id",dataIndex:"title",search:!1,render:function(x,c,G,ee,g){var l=c.Id.substring(7,19);return c.Title&&(l=c.Title),(0,r.jsxs)(d.Z,{children:[(0,r.jsx)(y.Z.Link,{copyable:!0,onClick:function(){var t;!((t=le.current)===null||t===void 0)&&t.show&&le.current.show(c.Id)},children:l},"title-".concat(G)),c.Containers==0&&(0,r.jsx)(m.Z,{color:"warning",children:I.FD.format("listNotUse")},"use-".concat(G))]})}},{title:I.FD.format("listTitle"),dataIndex:"tag",render:function(x,c,G,ee){return(0,r.jsx)(d.Z,{direction:"vertical",style:{textAlign:"left"},children:c.RepoTags.map(function(g,l){return(0,r.jsx)(d.Z,{children:(0,r.jsx)(m.Z,{color:"#2db7f5",children:(0,r.jsx)(y.Z.Text,{copyable:!0,title:g,style:{color:"#ffffff"},children:g},"tag-"+l)},"tag-".concat(l))},l)})},c.Id)}},{title:"Digest",search:!1,tooltip:I.FD.format("listDigestTip"),render:function(x,c,G,ee,g){return(0,r.jsx)(d.Z,{direction:"vertical",style:{textAlign:"left"},children:c.RepoTags&&c.RepoTags.map(function(l,u){var t,D=(t=c.RepoDigests)===null||t===void 0?void 0:t.find(function(j){var ve=j.split("@"),Me=M()(ve,2),Te=Me[0],xe=Me[1];return l.includes(Te)});return(0,r.jsx)("span",{children:D?D.substring(D.indexOf("@")+8).substring(0,12):(0,r.jsx)(m.Z,{color:"warning",children:new I.Uo("components.appDetail").format("checkImageUpgradeOption.-3")})},u)})})}},{title:I.FD.format("listArch"),width:200,search:!1,render:function(x,c,G,ee,g){if(c.Manifests)return(0,r.jsx)(d.Z,{wrap:!0,children:c.Manifests.filter(function(l){return l.Kind=="image"&&l.Available&&l.ImageData}).map(function(l){var u,t;return(0,r.jsx)(m.Z,{children:(t=l.ImageData)===null||t===void 0?void 0:t.Platform.architecture},"arch"+((u=l.ImageData)===null||u===void 0?void 0:u.Platform.architecture))})});if(c.Labels&&c.Labels["com.dpanel.image.arch"])return(0,r.jsx)(m.Z,{children:c.Labels["com.dpanel.image.arch"]},"arch"+c.Id)}},{title:I.FD.format("listSize"),dataIndex:"size",ellipsis:!0,width:"120px",search:!1,sorter:function(x,c){return parseFloat(x.Size)-parseFloat(c.Size)},sortDirections:k.h5,defaultSortOrder:(0,k.rj)(ne.CM,"size"),render:function(x,c,G,ee){return(0,r.jsx)("div",{children:(0,R.FI)(parseFloat(c.Size))},c.Id)}},{title:I.FD.format("listCreatedAt"),dataIndex:"Created",key:"created",ellipsis:!0,search:!1,width:"180px",render:function(x,c,G,ee){return(0,r.jsx)("div",{children:(0,R.ZM)(c.Created*1e3)},c.Id)},sorter:function(x,c){return x.Created-c.Created},sortDirections:k.h5,defaultSortOrder:(0,k.rj)(ne.CM,"created")}],request:function(){var $=o()(i()().mark(function x(c,G,ee){var g;return i()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,P.KG)({tag:c.tag,title:c.title,use:c.use?c.use=="1"?1:2:0});case 2:if(g=u.sent,!(!g||!g.data||!g.data.list)){u.next=5;break}return u.abrupt("return",{data:[],success:!0,total:0});case 5:return g.data.list.map(function(t){var D="";t.RepoTags.map(function(j){g.data.title[j]&&(D=g.data.title[j])}),t.Title=D}),u.abrupt("return",{data:g.data.list,success:!0,total:g.data.list.length});case 7:case"end":return u.stop()}},x)}));return function(x,c,G){return $.apply(this,arguments)}}(),rowSelection:q.canSeeImageListManage?{defaultSelectedRowKeys:[],alwaysShowAlert:!0}:void 0,actionRef:W,quickToolbarRender:function(x){var c=x.selectedRows,G=x.finish,ee=x.loading;return(0,r.jsxs)(d.Z,{size:16,children:[(0,r.jsx)(A.Z,{buttonProps:{icon:(0,r.jsx)(Y.Z,{}),disabled:c.length==0},confirmProps:{onOpenChange:function(l,u){var t;!((t=te.current)===null||t===void 0)&&t.resetFields&&te.current.resetFields()},description:(0,r.jsxs)(d.Z,{style:{width:500,marginTop:"10px",paddingRight:"10px"},direction:"vertical",size:20,children:[(0,r.jsx)(y.Z.Text,{children:(0,r.jsx)("ul",{children:H.prefix("listManageExportTipOption",2).map(function(g,l){return(0,r.jsx)("li",{children:g},l)})})}),(0,r.jsx)(b.A,{layout:"horizontal",formRef:te,submitter:!1,children:(0,r.jsx)(v.Z,{valuePropName:"checked",name:"enableExportToPath",children:(0,r.jsx)(_.Z,{children:H.format("listManageExportOptionToHost")})},"enableExportToPath")})]})},onSuccess:function(){var l;!((l=W.current)===null||l===void 0)&&l.reset&&W.current.reset()},action:function(){var l,u,t=[];return c.map(function(D){t.push.apply(t,a()(D.RepoTags))}),(0,P.Rb)({md5:t,enableExportToPath:(l=(u=te.current)===null||u===void 0?void 0:u.getFieldValue("enableExportToPath"))!==null&&l!==void 0?l:!1})},children:I.FD.format("listManageExport")}),(0,r.jsxs)(S.Y,{modalProps:{width:oe.ob},onOpenChange:function(){var l;(l=ue.current)===null||l===void 0||l.resetFields()},formRef:ue,title:H.format("listManagePushTip"),trigger:(0,r.jsx)(T.ZP,{disabled:c.length==0,icon:(0,r.jsx)(p.Z,{}),children:H.format("listManagePush")}),onFinish:function(){var g=o()(i()().mark(function l(u){var t;return i()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,(0,de.fy)({md5:c.map(function(ve){return ve.Id}),registryServerAddress:u.registryServerAddress,newNamespace:u.newNamespace});case 2:return t=j.sent,ge(_e+1),j.abrupt("return",!0);case 5:case"end":return j.stop()}},l)}));return function(l){return g.apply(this,arguments)}}(),children:[(0,r.jsx)(v.Z,{name:"registryServerAddress",hidden:!0}),(0,r.jsx)(v.Z,{label:H.format("listManagePushImageRespo"),name:"imageRespo",tooltip:H.format("listManagePushImageRespoTip"),children:(0,r.jsx)(s.Z,{multiple:!0,top:!0,onChangeList:function(l){var u;l&&((u=ue.current)===null||u===void 0||u.setFieldValue("registryServerAddress",l.map(function(t){return t.serverAddress})))}})}),(0,r.jsx)(K.Z,{tooltip:H.format("listManagePushNewNamespaceTip"),label:H.format("listManagePushNewNamespace"),name:"newNamespace"})]}),(0,r.jsx)(N.u,{access:"canSeeImageListManageDelete",children:(0,r.jsx)(A.Z,{buttonProps:{icon:(0,r.jsx)(h.Z,{})},action:o()(i()().mark(function g(){var l,u,t;return i()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return ee(),t=[],(l=J.current)!==null&&l!==void 0&&l.getFieldValue("enableBuildCache")&&t.push((0,je.c5)()),t.push((0,P.Xz)({enableUnuseTag:(u=J.current)===null||u===void 0?void 0:u.getFieldValue("enableUnuseTag")})),j.abrupt("return",Promise.all(t).finally(function(){G(!0)}));case 5:case"end":return j.stop()}},g)})),onSuccess:function(){var l;return!((l=W.current)===null||l===void 0)&&l.reloadAndRest&&W.current.reloadAndRest(),!0},onError:function(){return ge(_e+1),!0},confirmProps:{onOpenChange:function(l,u){var t;!((t=J.current)===null||t===void 0)&&t.resetFields&&J.current.resetFields()},description:(0,r.jsx)(b.A,{submitter:!1,formRef:J,layout:"inline",children:(0,r.jsxs)(d.Z,{direction:"vertical",style:{width:600},children:[(0,r.jsx)(y.Z.Text,{children:H.format("listManagePruneTip")}),(0,r.jsx)(v.Z,{name:"enableUnuseTag",valuePropName:"checked",children:(0,r.jsxs)(_.Z,{children:[H.format("listManagePruneOption.enableUnuseTag"),"?"]})}),(0,r.jsx)(v.Z,{initialValue:!0,name:"enableBuildCache",valuePropName:"checked",children:(0,r.jsxs)(_.Z,{children:[H.format("listManagePruneOption.enableBuildCache"),"?"]})})]})})},children:I.FD.format("listManagePrune")})},"prune"),(0,r.jsx)(N.u,{access:"canSeeImageListManageDelete",children:(0,r.jsx)(A.Z,{buttonProps:{danger:!0,type:"primary"},action:o()(i()().mark(function g(){return i()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return ee(),u.abrupt("return",(0,P.ao)({md5:c.map(function(t){return t.Id}),force:Re.force}).finally(function(){G(!0)}));case 2:case"end":return u.stop()}},g)})),onSuccess:function(){var l,u;return!((l=W.current)===null||l===void 0)&&l.reloadAndRest&&((u=W.current)===null||u===void 0||u.reloadAndRest()),!0},onError:function(){var l,u;return!((l=W.current)===null||l===void 0)&&l.reloadAndRest&&((u=W.current)===null||u===void 0||u.reloadAndRest()),!0},confirmProps:{description:(0,r.jsx)(b.A,{submitter:!1,formRef:ce,children:(0,r.jsxs)(d.Z,{style:{width:280},direction:"vertical",children:[(0,r.jsx)(y.Z.Text,{children:I.FD.format("confirm.title")}),(0,r.jsxs)(_.Z,{name:"deleteVolume",onChange:function(l){return he({force:l.target.checked})},children:[I.FD.format("listManageDeleteForce"),"?"]})]})})},children:I.FD.format("listManageDeleteBatch")})})]})},contextMenu:function(x){var c=x.loading,G=x.finish,ee=x.isMultiple,g=x.selectedRow,l=x.selectedRows;return{items:[{type:"group",label:I.FD.format("listManage"),key:"operator",children:[{label:(0,r.jsx)(ie.C.ContextMenuItem,{buttonProps:{icon:(0,r.jsx)(E.Z,{}),disabled:ee()},action:o()(i()().mark(function u(){var t;return i()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:G(!0),!((t=le.current)===null||t===void 0)&&t.show&&le.current.show(g.Id);case 2:case"end":return j.stop()}},u)})),children:I.FD.format("listManageEdit")}),key:"view"},{label:(0,r.jsx)(ie.C.ContextMenuItem,{buttonProps:{icon:(0,r.jsx)(Y.Z,{}),disabled:l.length==0},confirmProps:{onOpenChange:function(t,D){var j;!((j=te.current)===null||j===void 0)&&j.resetFields&&te.current.resetFields()},description:(0,r.jsxs)(d.Z,{style:{width:500,marginTop:"10px",paddingRight:"10px"},direction:"vertical",size:20,children:[(0,r.jsx)(y.Z.Text,{children:(0,r.jsx)("ul",{children:H.prefix("listManageExportTipOption",2).map(function(u,t){return(0,r.jsx)("li",{children:u},t)})})}),(0,r.jsx)(b.A,{layout:"horizontal",formRef:te,submitter:!1,children:(0,r.jsx)(v.Z,{valuePropName:"checked",name:"enableExportToPath",children:(0,r.jsx)(_.Z,{children:H.format("listManageExportOptionToHost")})},"enableExportToPath")})]})},onSuccess:function(){var t;!((t=W.current)===null||t===void 0)&&t.reset&&W.current.reset()},action:function(){var t,D,j=[];return l.map(function(ve){j.push.apply(j,a()(ve.RepoTags))}),(0,P.Rb)({md5:j,enableExportToPath:(t=(D=te.current)===null||D===void 0?void 0:D.getFieldValue("enableExportToPath"))!==null&&t!==void 0?t:!1})},children:I.FD.format("listManageExport")}),key:"export"}]},{key:"delete",label:(0,r.jsx)(ie.C.ContextMenuItem,{buttonProps:{icon:(0,r.jsx)(z.Z,{})},type:"danger",action:o()(i()().mark(function u(){return i()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return c(),D.abrupt("return",(0,P.ao)({md5:l.map(function(j){return j.Id}),force:Re.force}).finally(function(){G(!0)}));case 2:case"end":return D.stop()}},u)})),onSuccess:function(){var t,D;return!((t=W.current)===null||t===void 0)&&t.reloadAndRest&&((D=W.current)===null||D===void 0||D.reloadAndRest()),!0},onError:function(){var t,D;return!((t=W.current)===null||t===void 0)&&t.reloadAndRest&&((D=W.current)===null||D===void 0||D.reloadAndRest()),!0},confirmProps:{description:(0,r.jsx)(b.A,{submitter:!1,formRef:ce,children:(0,r.jsxs)(d.Z,{style:{width:280},direction:"vertical",children:[(0,r.jsx)(y.Z.Text,{children:I.FD.format("confirm.title")}),(0,r.jsxs)(_.Z,{name:"deleteVolume",onChange:function(t){return he({force:t.target.checked})},children:[I.FD.format("listManageDeleteForce"),"?"]})]})})},children:I.FD.format("listManageDelete")},"deleteBatch")}]}},columnsState:(0,k.j_)(ne.CM)})]})}},4813:function(re,B,e){e.d(B,{_:function(){return o}});var L=e(15009),a=e.n(L),F=e(99289),i=e.n(F),f=e(82346);function o(M){return O.apply(this,arguments)}function O(){return O=i()(a()().mark(function M(U){return a()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,(0,f.request)("/dpanel/api/common/attach/delete",{method:"POST",data:U});case 2:return v.abrupt("return",v.sent);case 3:case"end":return v.stop()}},M)})),O.apply(this,arguments)}},97841:function(re,B,e){e.d(B,{Xr:function(){return S},bJ:function(){return b},c5:function(){return d},hf:function(){return o},l9:function(){return M}});var L=e(15009),a=e.n(L),F=e(99289),i=e.n(F),f=e(82346);function o(m){return O.apply(this,arguments)}function O(){return O=i()(a()().mark(function m(_){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,f.request)("/dpanel/api/app/image-build/delete",{method:"POST",data:_});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},m)})),O.apply(this,arguments)}function M(m){return U.apply(this,arguments)}function U(){return U=i()(a()().mark(function m(_){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,f.request)("/dpanel/api/app/image-build/create",{method:"POST",data:_}));case 1:case"end":return n.stop()}},m)})),U.apply(this,arguments)}function b(m){return v.apply(this,arguments)}function v(){return v=i()(a()().mark(function m(_){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,f.request)("/dpanel/api/app/image-build/get-list",{method:"POST",data:_}));case 1:case"end":return n.stop()}},m)})),v.apply(this,arguments)}function S(m){return K.apply(this,arguments)}function K(){return K=i()(a()().mark(function m(_){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,f.request)("/dpanel/api/app/image-build/get-detail",{method:"POST",data:_});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},m)})),K.apply(this,arguments)}function d(){return y.apply(this,arguments)}function y(){return y=i()(a()().mark(function m(){return a()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,(0,f.request)("/dpanel/api/app/image-build/prune",{method:"POST"});case 2:return T.abrupt("return",T.sent);case 3:case"end":return T.stop()}},m)})),y.apply(this,arguments)}},73813:function(re,B,e){e.d(B,{Ck:function(){return o},Fj:function(){return m},GH:function(){return M},KG:function(){return S},Rb:function(){return w},Xz:function(){return b},YU:function(){return T},ZQ:function(){return R},ao:function(){return d},cD:function(){return Y}});var L=e(15009),a=e.n(L),F=e(99289),i=e.n(F),f=e(82346);function o(h){return O.apply(this,arguments)}function O(){return O=i()(a()().mark(function h(E){return a()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,f.request)("/dpanel/api/app/image/import-by-container-tar",{method:"POST",data:E}));case 1:case"end":return s.stop()}},h)})),O.apply(this,arguments)}function M(h){return U.apply(this,arguments)}function U(){return U=i()(a()().mark(function h(E){return a()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,f.request)("/dpanel/api/app/image/import-by-image-tar",{method:"POST",data:E}));case 1:case"end":return s.stop()}},h)})),U.apply(this,arguments)}function b(h){return v.apply(this,arguments)}function v(){return v=i()(a()().mark(function h(E){return a()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,f.request)("/dpanel/api/app/image/prune",{method:"POST"});case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},h)})),v.apply(this,arguments)}function S(h){return K.apply(this,arguments)}function K(){return K=i()(a()().mark(function h(E){return a()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,f.request)("/dpanel/api/app/image/get-list",{method:"POST",data:E}));case 1:case"end":return s.stop()}},h)})),K.apply(this,arguments)}function d(h){return y.apply(this,arguments)}function y(){return y=i()(a()().mark(function h(E){return a()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,f.request)("/dpanel/api/app/image/delete",{method:"POST",data:E});case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},h)})),y.apply(this,arguments)}function m(h){return _.apply(this,arguments)}function _(){return _=i()(a()().mark(function h(E){return a()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,f.request)("/dpanel/api/app/image/update-title",{method:"POST",data:E});case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},h)})),_.apply(this,arguments)}function T(h){return n.apply(this,arguments)}function n(){return n=i()(a()().mark(function h(E){return a()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,f.request)("/dpanel/api/app/image/get-detail",{method:"POST",data:E}));case 1:case"end":return s.stop()}},h)})),n.apply(this,arguments)}function w(h){return P.apply(this,arguments)}function P(){return P=i()(a()().mark(function h(E){return a()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!E.enableExportToPath){s.next=2;break}return s.abrupt("return",(0,f.request)("/dpanel/api/app/image/export",{method:"POST",data:E}));case 2:return s.abrupt("return",new Promise(function(k,Ee){var N,ae=localStorage.getItem("token"),Q=new URLSearchParams;Q.append("token",ae||""),E.md5&&E.md5.forEach(function(oe){Q.append("md5",oe)}),Q.append("enableExportToPath",String((N=E.enableExportToPath)!==null&&N!==void 0?N:!1));var me="/dpanel/api/app/image/export?".concat(Q.toString()),I=document.createElement("iframe");I.style.display="none",I.src=me,document.body.appendChild(I),k({code:200,data:"success",error:""})}));case 3:case"end":return s.stop()}},h)})),P.apply(this,arguments)}function R(h){return A.apply(this,arguments)}function A(){return A=i()(a()().mark(function h(E){return a()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,f.request)("/dpanel/api/app/image/check-upgrade",{method:"POST",data:E}));case 1:case"end":return s.stop()}},h)})),A.apply(this,arguments)}function Y(h){return p.apply(this,arguments)}function p(){return p=i()(a()().mark(function h(E){return a()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,f.request)("/dpanel/api/pro/image/get-rootfs",{method:"POST",data:E}));case 1:case"end":return s.stop()}},h)})),p.apply(this,arguments)}},75870:function(re,B,e){e.d(B,{Ot:function(){return o},ZH:function(){return M},ix:function(){return b},t1:function(){return S}});var L=e(15009),a=e.n(L),F=e(99289),i=e.n(F),f=e(82346);function o(d){return O.apply(this,arguments)}function O(){return O=i()(a()().mark(function d(y){return a()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,f.request)("/dpanel/api/common/registry/get-list",{method:"POST",data:y}));case 1:case"end":return _.stop()}},d)})),O.apply(this,arguments)}function M(d){return U.apply(this,arguments)}function U(){return U=i()(a()().mark(function d(y){return a()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,f.request)("/dpanel/api/common/registry/create",{method:"POST",data:y}));case 1:case"end":return _.stop()}},d)})),U.apply(this,arguments)}function b(d){return v.apply(this,arguments)}function v(){return v=i()(a()().mark(function d(y){return a()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,f.request)("/dpanel/api/common/registry/delete",{method:"POST",data:y}));case 1:case"end":return _.stop()}},d)})),v.apply(this,arguments)}function S(d){return K.apply(this,arguments)}function K(){return K=i()(a()().mark(function d(y){return a()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,f.request)("/dpanel/api/common/registry/get-detail",{method:"POST",data:y}));case 1:case"end":return _.stop()}},d)})),K.apply(this,arguments)}}}]);
