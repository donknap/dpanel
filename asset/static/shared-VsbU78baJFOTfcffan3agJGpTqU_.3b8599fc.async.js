"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[352],{26522:function(Ne,pe,t){t.d(pe,{Z:function(){return ve}});var je=t(87462),C=t(67294),xe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908 640H804V488c0-4.4-3.6-8-8-8H548v-96h108c8.8 0 16-7.2 16-16V80c0-8.8-7.2-16-16-16H368c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h108v96H228c-4.4 0-8 3.6-8 8v152H116c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h288c8.8 0 16-7.2 16-16V656c0-8.8-7.2-16-16-16H292v-88h440v88H620c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h288c8.8 0 16-7.2 16-16V656c0-8.8-7.2-16-16-16zm-564 76v168H176V716h168zm84-408V140h168v168H428zm420 576H680V716h168v168z"}}]},name:"apartment",theme:"outlined"},a=xe,ce=t(84089),g=function(N,w){return C.createElement(ce.Z,(0,je.Z)({},N,{ref:w,icon:a}))},o=C.forwardRef(g),ve=o},16596:function(Ne,pe,t){t.d(pe,{Z:function(){return ve}});var je=t(87462),C=t(67294),xe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M518.3 459a8 8 0 00-12.6 0l-112 141.7a7.98 7.98 0 006.3 12.9h73.9V856c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V613.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 459z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-upload",theme:"outlined"},a=xe,ce=t(84089),g=function(N,w){return C.createElement(ce.Z,(0,je.Z)({},N,{ref:w,icon:a}))},o=C.forwardRef(g),ve=o},40666:function(Ne,pe,t){t.d(pe,{Z:function(){return ve}});var je=t(87462),C=t(67294),xe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M938 458.8l-29.6-312.6c-1.5-16.2-14.4-29-30.6-30.6L565.2 86h-.4c-3.2 0-5.7 1-7.6 2.9L88.9 557.2a9.96 9.96 0 000 14.1l363.8 363.8c1.9 1.9 4.4 2.9 7.1 2.9s5.2-1 7.1-2.9l468.3-468.3c2-2.1 3-5 2.8-8zM459.7 834.7L189.3 564.3 589 164.6 836 188l23.4 247-399.7 399.7zM680 256c-48.5 0-88 39.5-88 88s39.5 88 88 88 88-39.5 88-88-39.5-88-88-88zm0 120c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"}}]},name:"tag",theme:"outlined"},a=xe,ce=t(84089),g=function(N,w){return C.createElement(ce.Z,(0,je.Z)({},N,{ref:w,icon:a}))},o=C.forwardRef(g),ve=o},8287:function(Ne,pe,t){var je=t(5574),C=t.n(je),xe=t(15009),a=t.n(xe),ce=t(99289),g=t.n(ce),o=t(13822),ve=t(83622),W=t(85265),N=t(23345),w=t(83062),F=t(67294),fe=t(81146),K=t(1883),Ce=t(58638),Oe=t(62597),S=t(3616),U=t(63713),Re=t(36146),be=t(85893),ie=(0,F.forwardRef)(function(ye,T){(0,F.useImperativeHandle)(T,function(){return{show:function(ae){return g()(a()().mark(function s(){var ee;return a()().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return se.next=2,(0,o.jV)({md5:ae});case 2:ee=se.sent,ee.data&&$e(ee.data.info),le(!0);case 5:case"end":return se.stop()}},s)}))()}}});var y=(0,F.useState)(!1),e=C()(y,2),We=e[0],le=e[1],Te=(0,F.useState)(),_e=C()(Te,2),k=_e[0],$e=_e[1],Ze=(0,F.useRef)(),we=new Re.Uo("components.appDetail");return(0,be.jsxs)(be.Fragment,{children:[ye.showTriggerButton&&(0,be.jsx)(ve.ZP,{icon:(0,be.jsx)(K.Z,{}),onClick:g()(a()().mark(function Ie(){return a()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:$e(ye.containerInfo),le(!0);case 2:case"end":return s.stop()}},Ie)})),children:Re.FD.format("listManageLog")},"log"),(0,be.jsx)(W.Z,{title:we.format("titleLog"),open:We,forceRender:!0,onClose:function(){le(!1)},afterOpenChange:function(ae){if(ae)setTimeout(function(){var ee,me;(ee=Ze.current)===null||ee===void 0||ee.start(),(me=Ze.current)===null||me===void 0||me.fit()},1e3);else{var s;(s=Ze.current)===null||s===void 0||s.close()}},width:S.FK,extra:(0,be.jsx)(N.Z,{children:(0,be.jsx)(U.Link,{to:"/container/log/".concat(k==null?void 0:k.Name),target:"_blank",onClick:function(){var ae;(ae=Ze.current)===null||ae===void 0||ae.close(),le(!1)},children:(0,be.jsx)(w.Z,{title:Re.FD.format("listManageOpenNewWindow"),children:(0,be.jsx)(Ce.Z,{})})})}),children:k&&We&&(0,be.jsx)(fe.Z,{ref:Ze,showInDrawer:!0,id:"container:log:".concat(k==null?void 0:k.Id),request:function(){var Ie=g()(a()().mark(function ae(s){var ee;return a()().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return se.next=2,(0,Oe.Tb)({id:(ee=k.Id)!==null&&ee!==void 0?ee:"",lineTotal:s.lineTotal,download:s.download,showTime:s.showTime});case 2:case"end":return se.stop()}},ae)}));return function(ae){return Ie.apply(this,arguments)}}(),download:function(){var Ie=g()(a()().mark(function ae(s){var ee,me,se,ke;return a()().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:return he.next=2,(0,Oe.XH)({id:(ee=k.Id)!==null&&ee!==void 0?ee:"",lineTotal:s.lineTotal,showTime:s.showTime});case 2:return se=he.sent,he.next=5,(0,o.jV)({md5:(me=k.Id)!==null&&me!==void 0?me:""});case 5:return ke=he.sent,he.abrupt("return",{data:new Blob([se],{type:"text/plain"}),name:ke.data.info.Name.replaceAll("/","")+"_"+new Date().toLocaleDateString()+".log"});case 7:case"end":return he.stop()}},ae)}));return function(ae){return Ie.apply(this,arguments)}}()})})]})});pe.Z=ie},41477:function(Ne,pe,t){t.d(pe,{Z:function(){return pn}});var je=t(5574),C=t.n(je),xe=t(15009),a=t.n(xe),ce=t(99289),g=t.n(ce),o=t(67294),ve=t(45605),W=t(38345),N=t(97269),w=t(26412),F=t(23345),fe=t(96074),K=t(25593),Ce=t(2487),Oe=t(76428),S=t(44771),U=t(13822),Re=t(24963),be=t(89638),ie=t(5251),ye=t(63713),T=t(87662),y=t(36146),e=t(85893);function We(n){var Z,r,i,j,E,p,u,v,h,I,d,b=new y.Uo("components.appDetail"),R=(0,o.useState)(""),x=C()(R,2),Y=x[0],M=x[1],$=(0,ye.useAccess)(),O=(0,o.useContext)(Re.Z),ue=O.message,oe=(0,o.useRef)(),c=[],re=[],Ae=[],ze=(0,o.useState)(""),A=C()(ze,2),f=A[0],P=A[1];return(0,o.useEffect)(function(){n.data&&((0,T.K3)().then(function(l){var m;P((m=l.data.serverUrl)!==null&&m!==void 0?m:"")}),M(n.data.info.Name))},[n.data]),(0,o.useEffect)(function(){var l,m,L;(l=oe.current)===null||l===void 0||l.setFieldValue("restart",{name:(m=n.data.info.HostConfig)===null||m===void 0?void 0:m.RestartPolicy.Name,maxAccept:(L=n.data.info.HostConfig)===null||L===void 0?void 0:L.RestartPolicy.MaximumRetryCount})},[oe.current,n.data]),n.data&&n.data.domain&&n.data.domain.map(function(l){Ae.push(l.setting.enableSSL?"https://"+l.serverName:"http://"+l.serverName)}),n.data.info.NetworkSettings.Ports&&Object.entries(n.data.info.NetworkSettings.Ports).forEach(function(l){var m=C()(l,2),L=m[0],D=m[1];if(D){var Q=L.split("/"),de=C()(Q,2),q=de[0],De=de[1];D.forEach(function(qe){qe.HostPort?c.push({PrivatePort:q,Type:De,IP:qe.HostIp,PublicPort:qe.HostPort}):re.push({PrivatePort:q,Type:De,IP:"",PublicPort:""})})}}),(0,e.jsxs)(e.Fragment,{children:[n.data&&n.data.info.State.Running&&(0,e.jsx)(be.Z,{publicPort:c,privatePort:re,domain:Ae,serverIp:f,showInDetail:!0,ghost:n.ghost,layout:"inline"}),(0,e.jsx)(W.Z,{title:(0,e.jsx)(ve.Z,{}),subTitle:b.format("titleBasic"),ghost:n.ghost,children:(0,e.jsxs)(w.Z,{column:1,bordered:!0,children:[(0,e.jsx)(w.Z.Item,{label:"Hostname",children:(0,e.jsx)(F.Z,{split:(0,e.jsx)(fe.Z,{type:"vertical"}),children:(0,e.jsx)(Oe.Z,{title:(Z=n.data.info)===null||Z===void 0?void 0:Z.Config.Hostname})})}),(0,e.jsx)(w.Z.Item,{label:y.FD.format("listName"),children:(0,e.jsxs)(F.Z,{split:(0,e.jsx)(fe.Z,{type:"vertical"}),children:[(0,e.jsx)(Oe.Z,{title:(r=n.data.info)===null||r===void 0?void 0:r.Id.substring(0,12)}),(0,e.jsx)(K.Z.Text,{copyable:!0,editable:{tooltip:y.FD.format("listManageEdit"),onChange:function(){var l=g()(a()().mark(function L(D){var Q;return a()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:if((Q=n.data.info)!==null&&Q!==void 0&&Q.Id){q.next=2;break}return q.abrupt("return");case 2:return q.next=4,(0,U.eE)({md5:n.data.info.Id,name:D});case 4:M(D),ue.success(y.FD.format("finish"));case 6:case"end":return q.stop()}},L)}));function m(L){return l.apply(this,arguments)}return m}()},children:(0,ie.fi)(Y,"/")})]})}),(0,e.jsx)(w.Z.Item,{label:y.FD.format("listNetwork"),children:((i=n.data.info)===null||i===void 0?void 0:i.State.Running)&&(0,e.jsxs)(w.Z,{column:1,bordered:!0,children:[n.data.info.NetworkSettings.Networks&&Object.keys(n.data.info.NetworkSettings.Networks).map(function(l,m){var L,D,Q;return(0,e.jsx)(w.Z.Item,{label:l,children:l=="host"?y.FD.format("listNetworkUseHost"):(0,e.jsxs)(F.Z,{direction:"vertical",children:[(0,e.jsx)(Oe.Z,{title:(L=n.data.info)===null||L===void 0?void 0:L.NetworkSettings.Networks[l].IPAddress}),(D=n.data.info)===null||D===void 0?void 0:D.NetworkSettings.Networks[l].Gateway,(Q=n.data.info)===null||Q===void 0?void 0:Q.NetworkSettings.Networks[l].MacAddress]})},m)}),((j=n.data.info.HostConfig)===null||j===void 0?void 0:j.ExtraHosts)&&(0,e.jsx)(w.Z.Item,{label:y.FD.format("listNetworkUseHost"),children:(0,e.jsx)(F.Z,{direction:"vertical",children:n.data.info.HostConfig.ExtraHosts.map(function(l,m){if(l.indexOf(":")>-1){var L=l.split(":");return"".concat(L[0]," - ").concat(L.slice(1).join(":"))}})})},"host")]})}),(0,e.jsx)(w.Z.Item,{label:y.FD.format("listRunTime"),children:b.format("runTimeValue",{create:new Date((E=(p=n.data.info)===null||p===void 0?void 0:p.Created)!==null&&E!==void 0?E:"").toLocaleString(),upgrade:new Date((u=(v=n.data.info)===null||v===void 0?void 0:v.State.StartedAt)!==null&&u!==void 0?u:"").toLocaleString()})}),$.canSeeContainerListManage&&(0,e.jsx)(w.Z.Item,{label:y.FD.format("listRestartPolicy"),children:(0,e.jsx)(N.A,{name:"container-restart",submitter:!1,onValuesChange:function(){var l=g()(a()().mark(function m(L,D){var Q,de;return a()().wrap(function(De){for(;;)switch(De.prev=De.next){case 0:if((Q=n.data.info)!==null&&Q!==void 0&&Q.Id){De.next=2;break}return De.abrupt("return");case 2:return De.next=4,(0,U.eE)({md5:n.data.info.Id,restart:D.restart});case 4:return de=De.sent,ue.success(y.FD.format("finish")),De.abrupt("return");case 7:case"end":return De.stop()}},m)}));return function(m,L){return l.apply(this,arguments)}}(),layout:"inline",formRef:oe,children:(0,e.jsx)(S.Z,{ghost:!0,defaultValue:(h=n.data.info)===null||h===void 0||(h=h.HostConfig)===null||h===void 0?void 0:h.RestartPolicy.Name})})}),(0,e.jsx)(w.Z.Item,{label:y.FD.format("listEnv"),children:(0,e.jsx)(Ce.Z,{dataSource:(I=(d=n.data.info)===null||d===void 0?void 0:d.Config.Env)!==null&&I!==void 0?I:[],renderItem:function(m){var L=m.split("=");return(0,e.jsxs)(Ce.Z.Item,{children:[(0,e.jsx)(K.Z.Text,{code:!0,children:L[0]})," = ",(0,e.jsx)(K.Z.Text,{copyable:!0,children:L.slice(1).join("=")})]})}})})]})})]})}var le=t(60433),Te=t(85265),_e=t(86250),k=t(87462),$e=t(97211),Ze=t(84089),we=function(Z,r){return o.createElement(Ze.Z,(0,k.Z)({},Z,{ref:r,icon:$e.Z}))},Ie=o.forwardRef(we),ae=Ie;function s(n){var Z,r=new y.Uo("components.appDetail");return n.data&&n.data.Mounts&&n.data.Mounts.length>0&&(0,e.jsx)(W.Z,{ghost:n.ghost,title:(0,e.jsx)(ae,{}),subTitle:r.format("titleVolume"),children:(0,e.jsx)(w.Z,{column:1,bordered:!0,children:(Z=n.data)===null||Z===void 0?void 0:Z.Mounts.map(function(i,j){return(0,e.jsx)(w.Z.Item,{styles:{label:{width:"50%",wordBreak:"break-word"},content:{width:"50%",wordBreak:"break-word"}},label:i.Type=="volume"?i.Name:i.Source,children:i.Destination},j)})})})}var ee=t(43425),me=t(74842),se=t(33160),ke=t(87784),Le=t(30159),he=t(89035),H=t(95591),Fe=t(83622),X=t(10781),G=t(80821),Pe=t(99922),ge=t(96486),Se=t.n(ge),z=t(69033),V=t(8287),B=(0,o.createContext)({}),te=B,ne=t(19632),J=t.n(ne),_=t(3616),Ee=t(12122),Ue=t(60940),Ve=t(27619);function Qe(n){return et.apply(this,arguments)}function et(){return et=g()(a()().mark(function n(Z){return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,ye.request)("/dpanel/api/app/container/get-stat-info",{method:"POST",data:Z}));case 1:case"end":return i.stop()}},n)})),et.apply(this,arguments)}function mt(n){return tt.apply(this,arguments)}function tt(){return tt=g()(a()().mark(function n(Z){return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,ye.request)("/dpanel/api/app/container/get-process-info",{method:"POST",data:Z}));case 1:case"end":return i.stop()}},n)})),tt.apply(this,arguments)}var nt={total:0,memory:{usage:[{name:"use",data:[]},{name:"all",show:!1,data:[]}],source:{usage:0,limit:0}},cpu:{usage:[{name:"use",data:[]}],source:{usage:0,limit:0}},network:{usage:[{name:"rx",data:[]},{name:"tx",data:[]}],source:{usageIn:0,usageOut:0}},io:{usage:[{name:"read",data:[]},{name:"write",data:[]}],source:{usageRead:0,usageWrite:0}}},vt=function(Z,r){var i,j,E;switch(r.type){case"clear":return nt;case"update":var p=new Date().toLocaleTimeString(),u=JSON.parse(JSON.stringify(nt));return(i=r.payload)!==null&&i!==void 0&&i.memory&&(u.memory.usage=[{name:"use",data:[].concat(J()(Z.memory.usage[0].data.slice(-20)),[{date:p,value:Math.round(r.payload.memory.in)}])},{name:"all",show:!1,data:[].concat(J()(Z.memory.usage[1].data.slice(-20)),[{date:p,value:Math.round(r.payload.memory.out)}])}],u.memory.source={usage:r.payload.memory.in,limit:r.payload.memory.out},u.cpu.usage=[{name:"use",data:[].concat(J()(Z.cpu.usage[0].data.slice(-20)),[{date:p,value:r.payload.cpu.toFixed(2)}])}],u.cpu.source={usage:r.payload.cpu,limit:100}),(j=r.payload)!==null&&j!==void 0&&j.networkIO&&(u.network.source={usageIn:parseFloat(r.payload.networkIO.in.toFixed(2)),usageOut:parseFloat(r.payload.networkIO.out.toFixed(2))},u.network.usage=[{name:"rx",data:[].concat(J()(Z.network.usage[0].data.slice(-20)),[{date:p,value:r.payload.networkIO.out.toFixed(2)}])},{name:"tx",data:[].concat(J()(Z.network.usage[1].data.slice(-20)),[{date:p,value:r.payload.networkIO.in.toFixed(2)}])}]),(E=r.payload)!==null&&E!==void 0&&E.blockIO&&(u.io.source={usageRead:parseFloat(r.payload.blockIO.out.toFixed(2)),usageWrite:parseFloat(r.payload.blockIO.in.toFixed(2))},u.io.usage=[{name:"read",data:[].concat(J()(Z.io.usage[0].data.slice(-20)),[{date:p,value:r.payload.blockIO.out.toFixed(2)}])},{name:"write",data:[].concat(J()(Z.io.usage[1].data.slice(-20)),[{date:p,value:r.payload.blockIO.in.toFixed(2)}])}]),u}},ht=(0,o.forwardRef)(function(n,Z){var r=(0,o.useState)(!1),i=C()(r,2),j=i[0],E=i[1],p=(0,o.useReducer)(vt,nt),u=C()(p,2),v=u[0],h=u[1],I=(0,o.useState)(),d=C()(I,2),b=d[0],R=d[1],x=(0,o.useContext)(Re.Z),Y=x.loading,M=(0,ye.useModel)("subscriber"),$=new y.Uo("components.appDetail");(0,o.useImperativeHandle)(Z,function(){return{}});function O(oe){return ue.apply(this,arguments)}function ue(){return ue=g()(a()().mark(function oe(c){var re,Ae;return a()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return Y.show(),Qe({id:c}),A.next=4,mt({id:c});case 4:re=A.sent,Ae={columns:[],data:[]},re.data.list.Titles.map(function(f){Ae.columns.push({title:f,label:f,dataIndex:f})}),re.data.list.Processes.map(function(f,P){Ae.data.push({UID:f[0],PID:f[1],PPID:f[2],C:f[3],STIME:f[4],TTY:f[5],TIME:f[6],CMD:f[7]})}),R(Ae),Y.destroy();case 10:case"end":return A.stop()}},oe)})),ue.apply(this,arguments)}return(0,o.useEffect)(function(){return function(){M.progress.close("container:stat:"+n.containerInfo.Id),h({type:"clear",payload:{}})}},[n.containerInfo]),(0,e.jsxs)(e.Fragment,{children:[n.showTriggerButton&&(0,e.jsx)(Fe.ZP,{onClick:g()(a()().mark(function oe(){return a()().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:E(!0);case 1:case"end":return re.stop()}},oe)})),icon:(0,e.jsx)(Ee.Z,{}),children:y.FD.format("listManageStat")},"log"),(0,e.jsxs)(Te.Z,{title:$.format("titleStat"),open:j,onClose:function(){E(!1)},afterOpenChange:function(c){c?setTimeout(function(){var re;!((re=n.containerInfo)===null||re===void 0)&&re.Name&&O(n.containerInfo.Id),M.addDataHandler("container:stat:".concat(n.containerInfo.Id),function(Ae){h({type:"update",payload:Ae.data})})},500):(M.progress.close("container:stat:"+n.containerInfo.Id),h({type:"clear"}))},width:_.R_,children:[(0,e.jsxs)(W.Z,{ghost:!0,direction:"row",wrap:!0,gutter:[20,20],children:[v.memory&&v.memory.source&&(0,e.jsx)(W.Z,{colSpan:12,title:(0,e.jsx)(Ee.Z,{}),subTitle:"Memory usage: ".concat((0,ie.FI)(v.memory.source.usage)," / ").concat((0,ie.FI)(v.memory.source.limit)),headerBordered:!0,bordered:!0,children:(0,e.jsx)(Ve.Z,{name:"container-memory",data:v.memory.usage,yLabelFormatter:function(c){return(0,ie.FI)(parseFloat(c))},yValueFormatter:function(c){return(0,ie.FI)(parseFloat(c))},yDomainMaxCallback:function(c){return c.min*2}})}),(0,e.jsx)(W.Z,{colSpan:12,title:(0,e.jsx)(Ee.Z,{}),subTitle:"Cpu usage: ".concat(v.cpu.source.usage.toFixed(2),"%"),headerBordered:!0,bordered:!0,children:(0,e.jsx)(Ve.Z,{name:"container-cpu",data:v.cpu.usage,yDomainMaxCallback:function(c){return c.min*100},yLabelFormatter:function(c){return"".concat(parseFloat(c).toFixed(2),"%")}})}),v.io&&v.io.source&&(0,e.jsx)(W.Z,{colSpan:12,title:(0,e.jsx)(Ee.Z,{}),subTitle:"I/O: ".concat((0,ie.FI)(v.io.source.usageRead)," / ").concat((0,ie.FI)(v.io.source.usageWrite)),headerBordered:!0,bordered:!0,children:(0,e.jsx)(Ve.Z,{name:"container-disk",data:v.io.usage,yDomainMaxCallback:function(c){return c.max*2},yLabelFormatter:function(c){return(0,ie.FI)(parseFloat(c))}})}),v.network&&v.network.source&&(0,e.jsx)(W.Z,{colSpan:12,title:(0,e.jsx)(Ee.Z,{}),subTitle:"Network: ".concat((0,ie.FI)(v.network.source.usageIn)," / ").concat((0,ie.FI)(v.network.source.usageOut)),headerBordered:!0,bordered:!0,children:(0,e.jsx)(Ve.Z,{name:"container-network",data:v.network.usage,yDomainMaxCallback:function(c){return c.max*2},yLabelFormatter:function(c){return(0,ie.FI)(parseFloat(c))}})})]}),(0,e.jsx)(W.Z,{title:(0,e.jsx)(le.Z,{}),subTitle:"Progress",children:(0,e.jsx)(Ue.Z,{scroll:{x:"max-content"},rowKey:"PID",columns:b==null?void 0:b.columns,dataSource:b==null?void 0:b.data,pagination:{pageSize:10}})})]})]})}),gt=ht,pt=(0,o.forwardRef)(function(n,Z){(0,o.useImperativeHandle)(Z,function(){return{showConsole:u}});var r=new y.Uo("components.appDetail"),i=(0,o.useRef)(),j=(0,o.useContext)(te),E=j.reload,p=j.loadingRef;function u(v){var h;(h=i.current)===null||h===void 0||h.show({url:"/console/container/".concat(n.data.Id),title:n.data.Name,workDir:v})}return(0,e.jsx)(W.Z,{title:(0,e.jsx)(ee.Z,{}),ghost:n.ghost,subTitle:(0,e.jsxs)(F.Z,{children:[r.format("titleOp")," - ",function(v){if(v){var h=v.State.Status,I=v.State.Status;if(v.State.Health&&v.State.Health.Status=="unhealthy"){var d,b;h=v.State.Health.Status,I=(d=(b=Se().last(v.State.Health.Log))===null||b===void 0?void 0:b.Output)!==null&&d!==void 0?d:h}return(0,e.jsx)(X.Z,{status:"container.".concat(h),tip:I})}}(n.data)]}),children:(0,e.jsxs)(F.Z,{wrap:!0,children:[n.data&&!n.data.State.Running&&(0,e.jsx)(G.Z,{buttonProps:{icon:(0,e.jsx)(me.Z,{})},action:g()(a()().mark(function v(){var h,I,d;return a()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return(h=p.current)===null||h===void 0||h.show(),R.abrupt("return",(0,U.IW)({md5:(I=(d=n.data)===null||d===void 0?void 0:d.Id)!==null&&I!==void 0?I:"",operate:"start"}).finally(function(){var x;(x=p.current)===null||x===void 0||x.destroy()}));case 2:case"end":return R.stop()}},v)})),onSuccess:function(){return E()},children:y.FD.format("listManageStart")}),n.data&&n.data.State.Running&&(0,e.jsx)(G.Z,{buttonProps:{icon:(0,e.jsx)(se.Z,{})},action:g()(a()().mark(function v(){var h,I,d;return a()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return(h=p.current)===null||h===void 0||h.show(),R.abrupt("return",(0,U.IW)({md5:(I=(d=n.data)===null||d===void 0?void 0:d.Id)!==null&&I!==void 0?I:"",operate:"restart"}).finally(function(){var x;(x=p.current)===null||x===void 0||x.destroy()}));case 2:case"end":return R.stop()}},v)})),onSuccess:function(){return E()},children:y.FD.format("listManageRestart")}),n.data&&n.data.State.Running&&(0,e.jsx)(G.Z,{action:g()(a()().mark(function v(){var h,I,d;return a()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return(h=p.current)===null||h===void 0||h.show(),R.abrupt("return",(0,U.IW)({md5:(I=(d=n.data)===null||d===void 0?void 0:d.Id)!==null&&I!==void 0?I:"",operate:"stop"}).finally(function(){var x;(x=p.current)===null||x===void 0||x.destroy()}));case 2:case"end":return R.stop()}},v)})),buttonProps:{danger:!0,icon:(0,e.jsx)(ke.Z,{})},onSuccess:function(){return E()},children:y.FD.format("listManageStop")}),n.data&&n.data.State.Running&&!n.data.State.Paused&&(0,e.jsx)(G.Z,{action:g()(a()().mark(function v(){var h,I,d;return a()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return(h=p.current)===null||h===void 0||h.show(),R.abrupt("return",(0,U.IW)({md5:(I=(d=n.data)===null||d===void 0?void 0:d.Id)!==null&&I!==void 0?I:"",operate:"pause"}).finally(function(){var x;(x=p.current)===null||x===void 0||x.destroy()}));case 2:case"end":return R.stop()}},v)})),onSuccess:function(){return E()},buttonProps:{icon:(0,e.jsx)(Le.Z,{})},children:y.FD.format("listManagePause")}),n.data&&n.data.State.Paused&&(0,e.jsx)(G.Z,{action:g()(a()().mark(function v(){var h,I,d;return a()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return(h=p.current)===null||h===void 0||h.show(),R.abrupt("return",(0,U.IW)({md5:(I=(d=n.data)===null||d===void 0?void 0:d.Id)!==null&&I!==void 0?I:"",operate:"unpause"}).finally(function(){var x;(x=p.current)===null||x===void 0||x.destroy()}));case 2:case"end":return R.stop()}},v)})),onSuccess:function(){return E()},buttonProps:{icon:(0,e.jsx)(me.Z,{})},children:y.FD.format("listManageUnpause")}),n.data&&n.data.State.Running&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(fe.Z,{type:"vertical"}),(0,e.jsx)(Pe.Z,{showFileExplorer:!0,ref:i}),(0,e.jsx)(Fe.ZP,{type:"primary",onClick:function(){n.data&&u(n.data.Config.WorkingDir)},icon:(0,e.jsx)(he.Z,{}),children:y.FD.format("listManageConsole")}),(0,e.jsx)(z.Z,{showConsole:!0,type:"container",name:(0,ie.fi)(n.data.Name,"/"),title:(0,ie.fi)(n.data.Name,"/"),trigger:(0,e.jsx)(Fe.ZP,{icon:(0,e.jsx)(H.Z,{}),children:y.FD.format("listManageFilePath")})}),(0,e.jsx)(V.Z,{containerInfo:n.data,showTriggerButton:!0}),(0,e.jsx)(gt,{containerInfo:n.data,showTriggerButton:!0})]}),(0,e.jsx)(fe.Z,{type:"vertical"}),(0,e.jsx)(Fe.ZP,{type:"dashed",icon:(0,e.jsx)(se.Z,{}),onClick:function(){E()},children:y.FD.format("listManageRefresh")})]})})}),jt=pt,Je=t(62597),xt=t(86548),It=t(57132),ut=t(82061),dt=t(25035),Ct=t(58638),yt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"},Zt=yt,bt=function(Z,r){return o.createElement(Ze.Z,(0,k.Z)({},Z,{ref:r,icon:Zt}))},Pt=o.forwardRef(bt),ct=Pt,Be=t(62370),ft=t(5966),Rt=t(52688),Dt=t(40411),He=t(84567),Ot=t(85418),Ge=t(83062),St=t(25278),Ke=t(78045),Et=t(24739),wt=t(97462),Ft=t(70146);function Tt(n){var Z=(0,o.useRef)(),r=new y.Uo("components.appDetail");return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(G.Z,{buttonProps:{icon:(0,e.jsx)(ct,{})},confirmProps:{onOpenChange:function(j,E){var p,u;!((p=Z.current)===null||p===void 0)&&p.resetFields&&((u=Z.current)===null||u===void 0||u.resetFields())},description:(0,e.jsxs)(F.Z,{style:{width:650,marginTop:"10px",paddingRight:"10px"},direction:"vertical",size:20,children:[(0,e.jsx)(K.Z.Text,{children:(0,e.jsx)("ul",{children:r.prefix("backupVolumeTipOption",2).map(function(i,j){return(0,e.jsxs)("li",{children:[i," ",j==1&&(0,e.jsx)(ye.Link,{to:"/app/backup",children:y.Ob.format("container.backup")})]},j)})})}),(0,e.jsx)(N.A,{layout:"inline",formRef:Z,submitter:!1,children:(0,e.jsxs)(F.Z,{direction:"vertical",children:[(0,e.jsx)(Be.Z,{name:"backupImage",valuePropName:"value",initialValue:"none",children:(0,e.jsxs)(Ke.ZP.Group,{children:[(0,e.jsx)(Ke.ZP,{value:"none",children:(0,e.jsx)(Ge.Z,{title:r.format("backupVolumeImageTipOption.none"),children:r.format("backupVolumeImageOption.none")})}),(0,e.jsx)(Ke.ZP,{value:"image",children:(0,e.jsx)(Ge.Z,{title:r.format("backupVolumeImageTipOption.image"),children:r.format("backupVolumeImageOption.image")})}),(0,e.jsx)(Ke.ZP,{value:"container",children:(0,e.jsx)(Ge.Z,{title:r.format("backupVolumeImageTipOption.container"),children:r.format("backupVolumeImageOption.container")})})]})}),(0,e.jsx)(Be.Z,{name:"backupVolume",valuePropName:"value",initialValue:"all",children:(0,e.jsxs)(Ke.ZP.Group,{disabled:!n.container.Mounts||n.container.Mounts.length==0,children:[(0,e.jsx)(Ke.ZP,{value:"none",children:r.format("backupVolumePathOption.none")}),(0,e.jsx)(Ke.ZP,{value:"all",children:r.format("backupVolumePathOption.all")}),(0,e.jsx)(Ke.ZP,{value:"select",children:r.format("backupVolumePathOption.select")})]})}),(0,e.jsx)(Et.UW,{children:(0,e.jsx)(wt.Z,{name:["backupVolume"],children:function(j){var E=j.backupVolume;return E=="select"&&(0,e.jsx)(F.Z,{wrap:!0,children:n.container.Mounts&&n.container.Mounts.map(function(p,u){return(0,e.jsx)(Be.Z,{valuePropName:"checked",name:["volume",p.Destination],children:(0,e.jsx)(He.Z,{children:p.Destination})},"volume-".concat(u))})})}})})]})})]})},action:g()(a()().mark(function i(){var j,E,p,u;return a()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,(0,Ft.yB)({id:n.container.Name,backupImage:(j=Z.current)===null||j===void 0?void 0:j.getFieldValue("backupImage"),backupVolume:(E=Z.current)===null||E===void 0?void 0:E.getFieldValue("backupVolume"),backupVolumeList:Object.keys((p=(u=Z.current)===null||u===void 0?void 0:u.getFieldValue("volume"))!==null&&p!==void 0?p:{}).filter(function(I){return I})});case 2:case"end":return h.stop()}},i)})),children:r.format("backupVolumeButton")})})}var _t=t(99861),at=t(73813),Mt=t(50888),$t=t(16596),Ye=t(1699),rt=t(29453),At=t(71965);function Lt(n){return ot.apply(this,arguments)}function ot(){return ot=g()(a()().mark(function n(Z){return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,ye.request)("/dpanel/api/pro/container-rollback/get-list",{data:Z,method:"POST"});case 2:return i.abrupt("return",i.sent);case 3:case"end":return i.stop()}},n)})),ot.apply(this,arguments)}function Ut(n){return it.apply(this,arguments)}function it(){return it=g()(a()().mark(function n(Z){return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,ye.request)("/dpanel/api/pro/container-rollback/restore",{data:Z,method:"POST"});case 2:return i.abrupt("return",i.sent);case 3:case"end":return i.stop()}},n)})),it.apply(this,arguments)}var Nt=t(86615),kt=t(40056),Bt=t(95833);function Wt(n){var Z=(0,ye.useAccess)(),r=(0,o.useState)(),i=C()(r,2),j=i[0],E=i[1],p=(0,o.useRef)(),u=new y.Uo("components.appDetail");return(0,o.useEffect)(function(){Z.canSeeEnableCe||Lt({siteName:(0,Bt.HJ)(n.detail.Name)}).then(function(v){E(v.data.list)})},[n.detail]),(0,e.jsx)(Ye.u,{access:["canSeeEnableCe"],showProTips:!0,showProTipsOffset:Z.canSeeEnableCe?[-15,0]:void 0,children:function(h){var I=h.canSeeEnableCe;return(0,e.jsx)(G.Z,{action:function(){var b;return Ut({id:(b=p.current)===null||b===void 0?void 0:b.getFieldValue("id"),enableForce:!0})},buttonProps:{icon:(0,e.jsx)(At.Z,{}),disabled:I,style:{marginRight:Z.canSeeEnableCe?20:0}},confirmProps:{onOpenChange:function(b,R){var x;!((x=p.current)===null||x===void 0)&&x.resetFields&&p.current.resetFields()},description:(0,e.jsx)(N.A,{formRef:p,submitter:!1,children:(0,e.jsxs)(F.Z,{direction:"vertical",style:{width:500},size:[0,15],children:[(0,e.jsx)(K.Z.Text,{children:u.format("rollbackTip")}),j&&j.length>0?(0,e.jsx)(Nt.Z.Group,{fieldProps:{style:{display:"flex",flexDirection:"column",gap:8}},name:"id",label:"",options:j&&j.map(function(d){return{label:"id: ".concat(d.id," ").concat(y.FD.format("listDeletedAt"),": ").concat((0,ie.NF)(d.deletedAt)),value:d.id}})}):(0,e.jsx)(kt.Z,{message:u.format("rollbackEmptyTip"),style:{marginBottom:10}})]})})},onSuccess:function(){var b;(b=p.current)===null||b===void 0||b.resetFields(),n.onFinish&&n.onFinish()},children:y.FD.format("listManageRollback")})}})}var Vt=t(184),lt=t(14946),Kt=t(40018);function Ht(n){return(0,e.jsxs)(F.Z,{children:[n.title,(0,e.jsx)(Ge.Z,{title:n.help,children:(0,e.jsx)(dt.Z,{})})]})}var Gt=t(36588),zt=t(16970),Qt=t(20743),Jt=t(78451),Yt=(0,o.forwardRef)(function(n,Z){var r;(0,o.useImperativeHandle)(Z,function(){return{}});var i=(0,o.useRef)(),j=(0,o.useRef)(),E=(0,o.useState)(),p=C()(E,2),u=p[0],v=p[1];return(0,o.useEffect)(function(){var h,I;v(n.containerInfo),!((h=i.current)===null||h===void 0)&&h.reloadAndRest&&((I=i.current)===null||I===void 0||I.reloadAndRest())},[n.containerInfo]),(0,e.jsxs)(W.Z,{ghost:n.ghost,children:[(0,e.jsx)(Gt.Z,{ref:j}),(0,e.jsx)(Kt.Z,{scroll:{x:"max-content"},rowKey:"key",actionRef:i,pagination:!1,ghost:!0,columns:[{title:y.FD.format("listContainerNetworkName"),key:"name",dataIndex:"networkName"},{title:y.FD.format("listContainerName"),key:"containerName",dataIndex:"containerName",width:100,render:function(I,d,b,R,x){return(0,e.jsx)(Jt.Z,{content:(0,ie.fi)(d.containerName,"/")})}},{title:(0,e.jsx)(Ht,{title:"hostname",help:y.FD.format("listHostnameTip")}),key:"hostName",render:function(I,d,b){return d.hostName?(0,e.jsx)(F.Z,{direction:"vertical",children:d.hostName.map(function(R,x){if(R)return(0,e.jsx)(K.Z.Text,{copyable:!0,keyboard:!0,children:R},x)})}):(0,e.jsx)(e.Fragment,{})}},{title:"Ip",key:"ip",render:function(I,d,b,R,x){return(0,e.jsxs)(F.Z,{direction:"vertical",children:[(0,e.jsx)("span",{children:d.networkInfo.IPv4Address}),d.networkInfo.IPv6Address&&(0,e.jsx)("span",{children:d.networkInfo.IPv6Address})]})}},{title:y.FD.format("listManage"),key:"option",width:50,fixed:"right",render:function(I,d,b,R,x){return(0,e.jsxs)(F.Z,{children:[d.networkName!=""&&(0,e.jsx)(K.Z.Link,{onClick:function(){var M;(M=j.current)===null||M===void 0||M.show(d.networkName)},children:(0,e.jsx)(Ge.Z,{title:y.FD.format("listManageDetail"),children:(0,e.jsx)(ee.Z,{})})}),d.key!="bridge"&&d.key!="none"&&d.key!="host"&&d.networkName!=""&&(0,e.jsx)(G.Z,{buttonProps:{type:"link",danger:!0},confirmProps:{showCommonConfirm:!0},action:function(){return(0,lt.t9)({name:d.networkName,containerName:n.containerInfo.Name})},onSuccess:function(){var M,$;!((M=i.current)===null||M===void 0)&&M.reloadAndRest&&(($=i.current)===null||$===void 0||$.reloadAndRest())},tips:y.FD.format("listManageExit"),children:(0,e.jsx)(ut.Z,{})})]})}}],request:function(){var h=g()(a()().mark(function I(d,b,R){var x,Y;return a()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,(0,U.jV)({md5:n.containerInfo.Name});case 2:return x=$.sent,v(x.data.info),$.next=6,(0,lt._3)({name:Object.keys(x.data.info.NetworkSettings.Networks)});case 6:return Y=$.sent,$.abrupt("return",{data:Y.data.list,success:!0,total:Y.data.list.length});case 8:case"end":return $.stop()}},I)}));return function(I,d,b){return h.apply(this,arguments)}}(),toolBarRender:function(){return[(0,e.jsx)(Qt.Z,{showTriggerButton:!0,onSelect:function(){var I=g()(a()().mark(function d(b){var R,x;return a()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,(0,lt.HY)({name:b.Name,containerName:n.containerInfo.Name,ipV4:""});case 2:x=M.sent,!((R=i.current)===null||R===void 0)&&R.reloadAndRest&&i.current.reloadAndRest();case 4:case"end":return M.stop()}},d)}));return function(d){return I.apply(this,arguments)}}()},"joinNetwork"),(0,e.jsx)(zt.Z,{onFinish:function(){var d,b;!((d=i.current)===null||d===void 0)&&d.reloadAndRest&&((b=i.current)===null||b===void 0||b.reloadAndRest())}},"create")]},search:!1,expandable:{expandRowByClick:!1,expandedRowKeys:Object.keys((r=u==null?void 0:u.NetworkSettings.Networks)!==null&&r!==void 0?r:{bridge:[]})}})]})}),Xt=Yt,qt=t(26522),en=(0,o.forwardRef)(function(n,Z){(0,o.useImperativeHandle)(Z,function(){return{}});var r=(0,o.useState)(!1),i=C()(r,2),j=i[0],E=i[1],p=new y.Uo("components.appDetail");return(0,e.jsx)(Vt.a,{submitter:!1,title:p.format("titleNetwork"),onOpenChange:function(v){E(v)},drawerProps:{width:_.R_},open:j,trigger:(0,e.jsx)(Fe.ZP,{icon:(0,e.jsx)(qt.Z,{}),children:y.Ob.format("docker.network")}),children:(0,e.jsx)(Xt,{ghost:!0,containerInfo:n.containerInfo})})}),tn=en,nn=t(84941),an=(0,o.forwardRef)(function(n,Z){var r=new y.Uo("components.appDetail"),i=(0,o.useContext)(te),j=i.reload,E=i.loadingRef,p=i.close,u=i.redirect,v=(0,o.useRef)(),h=(0,o.useRef)(),I=(0,o.useRef)(),d=(0,o.useRef)(),b=(0,o.useRef)(),R=(0,o.useRef)(),x=(0,o.useRef)(),Y=(0,o.useState)({status:0,error:""}),M=C()(Y,2),$=M[0],O=M[1],ue=(0,o.useState)(),oe=C()(ue,2),c=oe[0],re=oe[1];(0,o.useImperativeHandle)(Z,function(){return{}});function Ae(A){return ze.apply(this,arguments)}function ze(){return ze=g()(a()().mark(function A(f){var P,l,m;return a()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(l=-2,!f.ignore){D.next=6;break}if(!(f.ignore.indexOf("".concat(f.info.Name,"@*"))>-1)){D.next=4;break}return D.abrupt("return",{status:-2,error:""});case 4:if(!(f.ignore.indexOf("".concat(f.info.Name,"@").concat(f.info.Image))>-1)){D.next=6;break}return D.abrupt("return",{status:-2,error:""});case 6:return D.next=8,(0,at.ZQ)({tag:(P=f.info.Config.Image)!==null&&P!==void 0?P:"",md5:f.info.Image,cacheTime:3600}).catch(function(Q){l=-1});case 8:if(m=D.sent,!(m&&m.data.error&&m.data.error!="")){D.next=11;break}return D.abrupt("return",{status:-1,error:m.data.error});case 11:return m&&(m.data.digestLocal&&m.data.digestLocal.length>0?l=m.data.upgrade?1:2:m.data.error&&m.data.error!=""?l=-1:m.data.digestLocal.length==0?l=-3:l=-2),D.abrupt("return",{status:l,error:""});case 13:case"end":return D.stop()}},A)})),ze.apply(this,arguments)}return(0,o.useEffect)(function(){O({status:0}),Ae(n.data).then(function(A){O(A)}),re(n.data)},[n.data]),(0,e.jsxs)(F.Z,{direction:"vertical",children:[(0,e.jsxs)(W.Z,{ghost:n.ghost,title:(0,e.jsx)(ee.Z,{}),subTitle:r.format("titleManage"),children:[(0,e.jsx)(nn.Z,{onFinish:function(){var A=g()(a()().mark(function f(P){return a()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:P&&u(P);case 1:case"end":return m.stop()}},f)}));return function(f){return A.apply(this,arguments)}}(),ref:v},"createByImage"),(0,e.jsxs)(F.Z,{wrap:!0,children:[(0,e.jsx)(Fe.ZP,{onClick:function(){var f;(f=v.current)===null||f===void 0||f.show(n.data.info.Id)},type:"primary",icon:(0,e.jsx)(xt.Z,{}),children:y.FD.format("listManageEdit")}),c&&(0,e.jsxs)(e.Fragment,{children:[c.info.Config.Image&&(0,e.jsx)(_t.Z,{image:[c.info.Config.Image],ref:R}),(0,e.jsx)(Dt.Z,{style:{zIndex:999},title:$.error,count:r.format("checkImageUpgradeOption."+$.status),color:r.format("checkImageUpgradeColorOption."+$.status),children:(0,e.jsxs)(F.Z.Compact,{children:[(0,e.jsx)(G.Z,{buttonProps:{disabled:$.status===0,icon:$.status===0?(0,e.jsx)(Mt.Z,{}):(0,e.jsx)($t.Z,{})},confirmProps:{forceRender:!0,onOpenChange:function(f,P){if(f){var m;(m=x.current)===null||m===void 0||m.setFieldsValue({imageName:c.info.Config.Image})}else{var l;(l=x.current)===null||l===void 0||l.resetFields()}},description:(0,e.jsxs)(F.Z,{style:{width:600,paddingRight:10,paddingBottom:20},direction:"vertical",children:[(0,e.jsxs)(K.Z.Text,{children:[r.format("upgradeConfirm"),", ",r.format("rebuildConfirmTip")]}),(0,e.jsxs)(N.A,{formRef:x,submitter:!1,layout:"inline",children:[(0,e.jsxs)(F.Z,{style:{marginBottom:10},children:[(0,e.jsx)(Be.Z,{name:"enableBak",valuePropName:"checked",children:(0,e.jsx)(He.Z,{children:r.format("upgradeConfirmEnableBak")})}),(0,e.jsx)(Be.Z,{name:"enableResetImageConfig",valuePropName:"checked",children:(0,e.jsx)(He.Z,{children:r.format("upgradeConfirmEnableResetImageConfig")})})]}),(0,e.jsx)(ft.Z,{tooltip:r.format("upgradeImageNameEmpty"),label:y.FD.format("listImageName"),name:"imageName",width:"lg",required:!0,rules:[{required:!0}]})]})]})},action:g()(a()().mark(function A(){var f,P,l,m,L,D,Q,de,q,De;return a()().wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:return Me.prev=0,q=(f=x.current)===null||f===void 0?void 0:f.getFieldsValue(),De=(P=q.imageName)!==null&&P!==void 0?P:c.info.Config.Image,Me.next=5,(l=R.current)===null||l===void 0?void 0:l.pull([De]);case 5:return(m=E.current)===null||m===void 0||m.show(),(L=R.current)===null||L===void 0||L.finish(),Me.next=9,(0,U.RF)({md5:(D=c.info.Id)!==null&&D!==void 0?D:"",imageTag:De,enableBak:(Q=q.enableBak)!==null&&Q!==void 0?Q:!1,enableResetImageConfig:(de=q.enableResetImageConfig)!==null&&de!==void 0?de:!1}).finally(function(){var st;(st=E.current)===null||st===void 0||st.destroy()});case 9:return Me.abrupt("return",Me.sent);case 12:return Me.prev=12,Me.t0=Me.catch(0),Me.abrupt("return");case 15:case"end":return Me.stop()}},A,null,[[0,12]])})),onSuccess:function(f){p()},children:y.FD.format("listManageUpgrade")},"upgradeButton"),(0,e.jsx)(Ot.Z,{placement:"bottomLeft",menu:{items:[{key:"1",label:(0,e.jsx)(G.Z,{action:g()(a()().mark(function A(){var f,P,l,m,L,D;return a()().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return de.next=2,(0,Je.ze)({md5:(f=(P=c.info)===null||P===void 0?void 0:P.Name)!==null&&f!==void 0?f:"",imageId:""});case 2:return O({status:0}),de.next=5,(0,at.ZQ)({tag:(l=(m=c.info)===null||m===void 0?void 0:m.Config.Image)!==null&&l!==void 0?l:"",md5:(L=(D=c.info)===null||D===void 0?void 0:D.Image)!==null&&L!==void 0?L:"",cacheTime:0}).then(function(q){q.data.error&&q.data.error!=""?O({status:-1,error:q.data.error}):q.data.digestLocal&&q.data.digestLocal.length>0?O({status:q.data.upgrade?1:2}):O({status:-2})}).catch(function(q){O({status:-1})});case 5:return de.abrupt("return",de.sent);case 6:case"end":return de.stop()}},A)})),buttonProps:{type:"link"},children:r.format("upgradeCheckUpgrade")})},{key:"2",label:(0,e.jsx)(G.Z,{action:g()(a()().mark(function A(){var f,P,l,m;return a()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,(0,Je.ze)({md5:(f=(P=c.info)===null||P===void 0?void 0:P.Name)!==null&&f!==void 0?f:"",imageId:(l=(m=c.info)===null||m===void 0?void 0:m.Image)!==null&&l!==void 0?l:""});case 2:return D.abrupt("return",D.sent);case 3:case"end":return D.stop()}},A)})),buttonProps:{type:"link"},children:r.format("upgradeCheckUpgradeIgnoreOnce")})},{key:"3",label:(0,e.jsx)(G.Z,{action:g()(a()().mark(function A(){var f,P;return a()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,Je.ze)({md5:(f=(P=c.info)===null||P===void 0?void 0:P.Name)!==null&&f!==void 0?f:"",imageId:"*"});case 2:return m.abrupt("return",m.sent);case 3:case"end":return m.stop()}},A)})),buttonProps:{type:"link"},children:r.format("upgradeCheckUpgradeIgnore")})}]},children:(0,e.jsx)(Fe.ZP,{icon:(0,e.jsx)(ee.Z,{})})},"upgradeButtonIgnore")]})})]}),(0,e.jsx)(fe.Z,{type:"vertical"}),(0,e.jsx)(G.Z,{buttonProps:{icon:(0,e.jsx)(It.Z,{})},confirmProps:{description:(0,e.jsxs)(F.Z,{style:{width:400,paddingRight:"10px"},direction:"vertical",children:[(0,e.jsx)(K.Z.Text,{children:r.format("copyConfirmTip")}),(0,e.jsxs)(N.A,{formRef:b,submitter:!1,layout:"horizontal",children:[(0,e.jsx)("br",{}),(0,e.jsx)(ft.Z,{label:r.format("copyCopyName"),name:"copyName"}),(0,e.jsx)(Rt.Z,{label:r.format("copyEnableRandomPort"),name:"enableRandomPort"})]})]})},action:g()(a()().mark(function A(){var f,P,l,m,L;return a()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return Q.next=2,(0,U.aF)({md5:(f=c==null?void 0:c.info.Id)!==null&&f!==void 0?f:"",copyName:(P=(l=b.current)===null||l===void 0?void 0:l.getFieldValue("copyName"))!==null&&P!==void 0?P:"",enableRandomPort:(m=(L=b.current)===null||L===void 0?void 0:L.getFieldValue("enableRandomPort"))!==null&&m!==void 0?m:!1});case 2:return Q.abrupt("return",Q.sent);case 3:case"end":return Q.stop()}},A)})),onSuccess:function(f){var P;(P=b.current)===null||P===void 0||P.resetFields()},children:r.format("copyButton")}),c&&(0,e.jsx)(Wt,{detail:c.info,onFinish:function(){p()}},"rollback"),c&&(0,e.jsx)(G.Z,{action:g()(a()().mark(function A(){var f,P,l,m,L,D;return a()().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return(f=E.current)===null||f===void 0||f.show(),de.abrupt("return",Promise.all([(0,Je.Ct)({md5:(P=c==null?void 0:c.info.Id)!==null&&P!==void 0?P:"",deleteImage:(l=(m=I.current)===null||m===void 0?void 0:m.getFieldValue("deleteImage"))!==null&&l!==void 0?l:!1,deleteVolume:(L=(D=I.current)===null||D===void 0?void 0:D.getFieldValue("deleteVolume"))!==null&&L!==void 0?L:!1}),(0,rt.rn)({name:c==null?void 0:c.info.Name})]).finally(function(){var q;(q=E.current)===null||q===void 0||q.destroy()}));case 2:case"end":return de.stop()}},A)})),buttonProps:{danger:!0,type:"primary",icon:(0,e.jsx)(ut.Z,{})},confirmProps:{description:(0,e.jsxs)(F.Z,{style:{width:200},direction:"vertical",children:[(0,e.jsx)(K.Z.Text,{children:y.FD.format("confirm.title")}),(0,e.jsxs)(N.A,{formRef:I,layout:"inline",submitter:!1,children:[(0,e.jsx)(Be.Z,{addonAfter:(0,e.jsx)(Ge.Z,{title:r.format("deleteConfirmTip"),children:(0,e.jsx)(dt.Z,{})}),name:"deleteVolume",valuePropName:"checked",children:(0,e.jsx)(He.Z,{children:r.format("deleteConfirmDeleteVolume")})}),(0,e.jsx)(Be.Z,{name:"deleteImage",valuePropName:"checked",children:(0,e.jsx)(He.Z,{children:r.format("deleteConfirmDeleteImage")})})]})]})},onSuccess:function(){p()},children:y.FD.format("listManageDelete")}),c&&(0,e.jsx)(G.Z,{action:g()(a()().mark(function A(){var f,P,l,m;return a()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return(f=E.current)===null||f===void 0||f.show(),D.abrupt("return",(0,U.RF)({md5:(P=c.info.Id)!==null&&P!==void 0?P:"",imageTag:"",enableBak:(l=(m=x.current)===null||m===void 0?void 0:m.getFieldValue("enableBak"))!==null&&l!==void 0?l:!1}).finally(function(){var Q;p(),(Q=E.current)===null||Q===void 0||Q.destroy()}));case 2:case"end":return D.stop()}},A)})),buttonProps:{danger:!0,icon:(0,e.jsx)(se.Z,{})},confirmProps:{description:(0,e.jsx)(F.Z,{style:{width:300},children:r.format("rebuildConfirmTip")})},children:y.FD.format("listManageDeployForce")}),(0,e.jsx)(fe.Z,{type:"vertical"}),c&&(0,e.jsx)(tn,{containerInfo:c.info})]})]}),(0,e.jsx)(W.Z,{ghost:n.ghost,title:(0,e.jsx)(ee.Z,{}),subTitle:r.format("titleManageExport"),children:(0,e.jsxs)(F.Z,{wrap:!0,children:[c&&(0,e.jsx)(Ye.u,{access:"canSeeContainerBackup",children:(0,e.jsx)(Tt,{container:c.info})}),(0,e.jsx)(fe.Z,{type:"vertical"}),(0,e.jsx)(G.Z,{buttonProps:{icon:(0,e.jsx)(Ct.Z,{})},confirmProps:{onOpenChange:function(f,P){var l;!((l=h.current)===null||l===void 0)&&l.resetFields&&h.current.resetFields()},description:(0,e.jsxs)(F.Z,{style:{width:500,marginTop:"10px",paddingRight:"10px"},direction:"vertical",size:20,children:[(0,e.jsx)(K.Z.Text,{children:r.format("exportConfirm")}),(0,e.jsx)(N.A,{layout:"horizontal",formRef:h,submitter:!1,children:(0,e.jsx)(Be.Z,{valuePropName:"checked",name:"enableExportToPath",children:(0,e.jsx)(He.Z,{children:r.format("exportEnableExportToPath")})},"enableExportToPath")})]})},action:function(){var f,P,l;return(0,U.LJ)({md5:(f=c==null?void 0:c.info.Id)!==null&&f!==void 0?f:"",enableExportToPath:(P=(l=h.current)===null||l===void 0?void 0:l.getFieldValue("enableExportToPath"))!==null&&P!==void 0?P:!1})},children:r.format("exportButton")}),(0,e.jsx)(G.Z,{buttonProps:{icon:(0,e.jsx)(ct,{})},confirmProps:{onOpenChange:function(f,P){var l;!((l=d.current)===null||l===void 0)&&l.resetFields&&d.current.resetFields()},title:r.format("commitConfirmTitle"),description:(0,e.jsx)(F.Z,{style:{width:400,marginTop:"10px",paddingRight:"10px"},direction:"vertical",children:(0,e.jsx)(N.A,{formRef:d,submitter:!1,children:(0,e.jsx)(Be.Z,{name:"saveImageName",children:(0,e.jsx)(St.Z,{addonBefore:r.format("commitConfirmSaveImageName")})})})})},action:function(){var f,P,l;return(0,U.Re)({md5:(f=c==null?void 0:c.info.Id)!==null&&f!==void 0?f:"",name:(P=(l=d.current)===null||l===void 0?void 0:l.getFieldValue("saveImageName"))!==null&&P!==void 0?P:c==null?void 0:c.info.Name})},children:r.format("commitButton")})]})},"extend")]})}),rn=an,on=t(65913);function ln(n){var Z=new y.Uo("components.appDetail"),r=(0,o.useState)(),i=C()(r,2),j=i[0],E=i[1];return(0,o.useEffect)(function(){(0,at.YU)({md5:n.data.Image}).then(function(p){E(p.data)})},[n.data]),(0,e.jsx)(W.Z,{ghost:n.ghost,title:(0,e.jsx)(le.Z,{}),subTitle:Z.format("titleImage"),children:(0,e.jsxs)(w.Z,{styles:{label:{width:200}},column:1,bordered:!0,children:[(0,e.jsx)(w.Z.Item,{label:"Image Tag",children:(0,e.jsx)(K.Z.Text,{copyable:!0,children:n.data.Config.Image})}),(0,e.jsx)(w.Z.Item,{label:"Image",children:n.data.Image}),(0,e.jsx)(w.Z.Item,{label:"CMD",children:(j==null?void 0:j.info.Config.Cmd)&&(j==null?void 0:j.info.Config.Cmd.join(" "))}),(0,e.jsx)(w.Z.Item,{label:"ENTRYPOINT",children:j==null?void 0:j.info.Config.Entrypoint}),(0,e.jsx)(w.Z.Item,{label:"Labels",children:(0,e.jsx)(w.Z,{column:1,bordered:!0,children:(j==null?void 0:j.info.Config.Labels)&&Object.entries(j==null?void 0:j.info.Config.Labels).map(function(p){var u=C()(p,2),v=u[0],h=u[1];return(0,e.jsx)(w.Z.Item,{label:v,children:h},v)})})})]})})}var sn=t(97857),Xe=t.n(sn),un=t(40666),dn=t(64789),cn=t(97937),fn=t(66309),mn=t(86738),vn=t(90127);function hn(n){var Z=(0,o.useState)(0),r=C()(Z,2),i=r[0],j=r[1],E=(0,o.useState)(),p=C()(E,2),u=p[0],v=p[1],h=new y.Uo("components.appDetail"),I=(0,o.useState)(),d=C()(I,2),b=d[0],R=d[1];return(0,o.useEffect)(function(){v([]),(0,rt.e1)().then(function(x){v(x.data.list)})},[i,n.data.info.Name]),(0,e.jsx)(W.Z,{ghost:!0,title:(0,e.jsx)(un.Z,{}),subTitle:h.format("titleTag"),extra:(0,e.jsx)(vn.Z,{trigger:(0,e.jsx)(K.Z.Link,{children:(0,e.jsx)(dn.Z,{})}),containerDetail:n.data,onFinish:function(){j(i+1)}}),children:(0,e.jsx)(F.Z,{wrap:!0,children:u&&(u==null?void 0:u.filter(function(x){return x.item&&x.item.find(function(Y){return Y.name==n.data.info.Name})}).map(function(x,Y){return(0,e.jsx)(fn.Z,{color:x.tagColor,closable:{closeIcon:(0,e.jsx)(mn.Z,{title:y.FD.format("confirm.title"),open:b&&b[Y],onOpenChange:function($){R(Xe()(Xe()({},b),{index:$}))},onConfirm:g()(a()().mark(function M(){return a()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,(0,rt.rn)({name:n.data.info.Name,tag:x.tag});case 2:j(i+1);case 3:case"end":return O.stop()}},M)})),children:(0,e.jsx)(cn.Z,{})})},style:{height:35,display:"flex",borderRadius:20,justifyContent:"center",alignItems:"center"},onClose:g()(a()().mark(function M(){return a()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:R(Xe()(Xe()({},b),{index:!0}));case 1:case"end":return O.stop()}},M)})),children:(0,e.jsx)("span",{style:{paddingLeft:10,paddingRight:3},children:x.tag})},Y)}))})})}var gn=(0,o.forwardRef)(function(n,Z){var r;(0,o.useImperativeHandle)(Z,function(){return{show:function(M){return g()(a()().mark(function $(){return a()().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return b(!0),ue.next=3,R(M);case 3:case"end":return ue.stop()}},$)}))()}}});var i=new y.Uo("components.appDetail"),j=(0,o.useRef)(),E=(0,o.useState)(),p=C()(E,2),u=p[0],v=p[1],h=(0,o.useState)(!1),I=C()(h,2),d=I[0],b=I[1];function R(Y){return x.apply(this,arguments)}function x(){return x=g()(a()().mark(function Y(M){var $,O,ue;return a()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return($=j.current)===null||$===void 0||$.show(),c.next=3,(0,U.jV)({md5:M}).finally(function(){var re;(re=j.current)===null||re===void 0||re.destroy()});case 3:O=c.sent,O.data&&(((ue=O.data.info.HostConfig)===null||ue===void 0?void 0:ue.NetworkMode)=="host"&&O.data.info.Config.ExposedPorts&&Object.keys(O.data.info.Config.ExposedPorts).map(function(re){O.data.info.NetworkSettings.Ports||(O.data.info.NetworkSettings.Ports={}),O.data.info.NetworkSettings.Ports[re]=[{HostIp:"0.0.0.0",HostPort:re.substring(0,re.indexOf("/"))}]}),v(O.data));case 5:case"end":return c.stop()}},Y)})),x.apply(this,arguments)}return(0,e.jsx)(te.Provider,{value:{loadingRef:j,reload:function(){return g()(a()().mark(function M(){return a()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(!u){O.next=3;break}return O.next=3,R(u.info.Id);case 3:case"end":return O.stop()}},M)}))()},close:function(){return g()(a()().mark(function M(){return a()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:b(!1),n.onFinish&&n.onFinish();case 2:case"end":return O.stop()}},M)}))()},redirect:function(M){return g()(a()().mark(function $(){return a()().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return ue.next=2,R(M);case 2:case"end":return ue.stop()}},$)}))()}},children:(0,e.jsx)(Te.Z,{title:i.format("drawerTitle",{name:(0,ie.fi)((r=u==null?void 0:u.info.Name)!==null&&r!==void 0?r:"","/")}),open:d,onClose:function(){b(!1),n.onFinish&&n.onFinish()},width:_.R_,children:(0,e.jsx)(on.Z,{ref:j,children:(0,e.jsxs)(_e.Z,{vertical:!0,gap:20,children:[u&&(0,e.jsx)(Ye.u,{access:"canSeeContainerList",children:(0,e.jsx)(jt,{ghost:!0,data:u==null?void 0:u.info})}),u&&(0,e.jsx)(Ye.u,{access:["canSeeContainerListManage","canSeeContainerListManageOp"],children:(0,e.jsx)(rn,{ghost:!0,data:u})}),u&&(0,e.jsx)(hn,{data:u}),u&&(0,e.jsx)(We,{data:u,ghost:!0}),(0,e.jsx)(s,{data:u==null?void 0:u.info,ghost:!0}),u&&(0,e.jsx)(ln,{data:u.info,ghost:!0}),(u==null?void 0:u.info.Config.Labels)&&(0,e.jsx)(W.Z,{title:(0,e.jsx)(le.Z,{}),ghost:!0,subTitle:i.format("titleLabel"),children:(0,e.jsx)(w.Z,{column:1,bordered:!0,children:u.info.Config.Labels&&Object.entries(u.info.Config.Labels).map(function(Y){var M=C()(Y,2),$=M[0],O=M[1];return(0,e.jsx)(w.Z.Item,{label:$,children:O},$)})})})]})})})})}),pn=gn},90127:function(Ne,pe,t){var je=t(15009),C=t.n(je),xe=t(99289),a=t.n(xe),ce=t(5574),g=t.n(ce),o=t(5251),ve=t(184),W=t(62370),N=t(5966),w=t(24739),F=t(64317),fe=t(52688),K=t(97462),Ce=t(40056),Oe=t(23345),S=t(67294),U=t(1699),Re=t(80821),be=t(2808),ie=t(87662),ye=t(29453),T=t(3616),y=t(36146),e=t(85893),We=(0,S.forwardRef)(function(le,Te){var _e;(0,S.useImperativeHandle)(Te,function(){return{edit:function(V){Pe(!0),Se(V),k.current&&k.current.setFieldsValue({tag:[V.tag],tagColor:V.tagColor,enableShowGroup:V.enableShowGroup})}}});var k=(0,S.useRef)(),$e=(0,S.useState)(0),Ze=g()($e,2),we=Ze[0],Ie=Ze[1],ae=(0,S.useState)([]),s=g()(ae,2),ee=s[0],me=s[1],se=(0,S.useState)(),ke=g()(se,2),Le=ke[0],he=ke[1],H=(_e=le.containerDetail)===null||_e===void 0?void 0:_e.info,Fe=(0,S.useState)(!1),X=g()(Fe,2),G=X[0],Pe=X[1],ge=new y.Uo("components.appDetail");function Se(z){k.current&&k.current.setFieldsValue({title:z.title,description:z.description,url:z.url,icon:z.icon,name:z.name})}return(0,S.useEffect)(function(){he([]),(0,ye.e1)().then(function(z){he(z.data.list)})},[we]),(0,S.useEffect)(function(){H&&(0,ie.K3)().then(function(z){var V=[];H.NetworkSettings&&H.NetworkSettings.Ports&&Object.keys(H.NetworkSettings.Ports).map(function(B){H.NetworkSettings.Ports&&H.NetworkSettings.Ports[B]&&H.NetworkSettings.Ports[B].map(function(te){te.HostPort&&V.push("http://".concat(z.data.serverUrl,":").concat(te.HostPort))})}),me(V)})},[le.containerDetail]),(0,e.jsxs)(ve.a,{drawerProps:{forceRender:!0,width:T.R_},open:G,onFinish:function(){var z=a()(C()().mark(function V(B){var te,ne,J,_;return C()().wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return J="",B.tagColor&&B.tagColor.toHexString?B.tagColor.cleared||(J=B.tagColor.toHexString()):J=B.tagColor,_=(te=B.enableShowGroup)!==null&&te!==void 0?te:le.defaultEnableShowGroup,Ue.next=5,(0,ye.A9)({enableShowGroup:_,tag:B.tag?B.tag[0]:"",tagColor:J,name:(ne=H==null?void 0:H.Name)!==null&&ne!==void 0?ne:B.name,title:_?B.title:"",description:_?B.description:"",url:_?B.url:"",icon:_?B.icon:""});case 5:return Ie(we+1),le.onFinish&&le.onFinish({tag:B.tag,tagColor:B.tagColor,enableShowGroup:_}),Ue.abrupt("return",!0);case 8:case"end":return Ue.stop()}},V)}));return function(V){return z.apply(this,arguments)}}(),formRef:k,title:ge.format("tagCreateTitle"),trigger:le.trigger,onOpenChange:function(V){var B;Pe(V),!V&&(!((B=k.current)===null||B===void 0)&&B.resetFields)&&k.current.resetFields()},children:[le.defaultEnableShowGroup&&(0,e.jsx)(W.Z,{children:(0,e.jsx)(Ce.Z,{message:new y.Uo("system.home.tag").format("emptyTip")})}),(0,e.jsx)(N.Z,{name:"name",hidden:!0}),(0,e.jsxs)(w.UW,{children:[(0,e.jsx)(F.Z,{width:"lg",label:ge.format("tagFormTag"),layout:"vertical",required:!0,rules:[{required:!0}],onChange:function(V){var B=Le&&Le.find(function(Qe){return V&&V.length>=1&&Qe.tag==V[0]});if(B){var te,ne,J,_=B.item.find(function(Qe){return Qe.name==(H==null?void 0:H.Name)});(te=k.current)===null||te===void 0||te.setFieldsValue({tagColor:B.tagColor,enableShowGroup:B.enableShowGroup}),_&&_.name&&Se({name:(ne=H==null?void 0:H.Name)!==null&&ne!==void 0?ne:"",title:_?_.title:(0,o.fi)((J=H==null?void 0:H.Name)!==null&&J!==void 0?J:"","/"),description:_&&_.description,url:_&&_.url,icon:_&&_.icon})}if(!V||V.length==0){var Ee,Ue=(Ee=k.current)===null||Ee===void 0?void 0:Ee.getFieldValue("url");if(!Ue||Ue==""){var Ve;!((Ve=k.current)===null||Ve===void 0)&&Ve.resetFields&&k.current.resetFields()}}},options:Le&&Le.map(function(z){return{lable:z.tag,value:z.tag}}),name:"tag",mode:"tags",fieldProps:{maxCount:1},placeholder:ge.format("tagFormTagEmpty")},"tagSelect".concat(we)),!le.defaultEnableShowGroup&&(0,e.jsx)(be.Z,{label:ge.format("tagFormTagColor"),name:"tagColor"})]}),!le.defaultEnableShowGroup&&(0,e.jsx)(U.u,{access:"canSeeEnableCe",showProRibbonTips:!0,children:function(V){var B=V.canSeeEnableCe;return(0,e.jsx)(fe.Z,{label:ge.format("tagFormEnableShowGroup"),name:"enableShowGroup",disabled:B,fieldProps:{onChange:function(ne){if(ne){var J,_;Se({name:(J=H==null?void 0:H.Name)!==null&&J!==void 0?J:"",title:(0,o.fi)((_=H==null?void 0:H.Name)!==null&&_!==void 0?_:"","/")})}}}})}}),(0,e.jsx)(K.Z,{name:["enableShowGroup"],children:function(V){var B=V.enableShowGroup;return(B||le.defaultEnableShowGroup)&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(Oe.Z.Compact,{children:[le.containerDetail&&(0,e.jsx)(F.Z,{label:ge.format("tagFormSelectUrl"),width:"sm",name:"selectUrl",options:ee.map(function(te){return{label:te,value:te}}),onChange:function(ne){var J;!((J=k.current)===null||J===void 0)&&J.setFieldValue&&k.current.setFieldValue("url",ne)}}),(0,e.jsx)(N.Z,{label:ge.format("tagFormUrl"),name:"url",width:"md"}),(0,e.jsx)(W.Z,{label:" ",children:(0,e.jsx)(Re.Z,{action:function(){var ne;return(0,ye.R3)({url:(ne=k.current)===null||ne===void 0?void 0:ne.getFieldValue("url")})},onSuccess:function(ne){var J,_,Ee;(J=k.current)===null||J===void 0||J.setFieldValue("icon",ne.data.icon),(_=k.current)===null||_===void 0||_.setFieldValue("title",ne.data.title),(Ee=k.current)===null||Ee===void 0||Ee.setFieldValue("description",ne.data.description)},children:ge.format("tagGetUrlDetailButton")})})]}),(0,e.jsxs)(w.UW,{children:[(0,e.jsx)(N.Z,{label:ge.format("tagFormTitle"),name:"title"}),(0,e.jsx)(N.Z,{label:ge.format("tagFormDescription"),name:"description"})]}),(0,e.jsx)(w.UW,{children:(0,e.jsx)(N.Z,{width:"lg",placeholder:ge.format("tagFormIconEmpty"),label:ge.format("tagFormIcon"),name:"icon"})})]})}})]})});pe.Z=We},36588:function(Ne,pe,t){t.d(pe,{Z:function(){return le}});var je=t(15009),C=t.n(je),xe=t(99289),a=t.n(xe),ce=t(5574),g=t.n(ce),o=t(80821),ve=t(3616),W=t(14946),N=t(36146),w=t(82061),F=t(184),fe=t(38345),K=t(60940),Ce=t(23345),Oe=t(25593),S=t(96074),U=t(26412),Re=t(67294),be=t(92067),ie=t(83622),ye=t(85265),T=t(85893);function y(Te){var _e=(0,Re.useState)(!1),k=g()(_e,2),$e=k[0],Ze=k[1],we=new N.Uo("docker");return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(ie.ZP,{type:"primary",onClick:function(){Ze(!0)},children:we.format("networkJoinContainer")}),(0,T.jsx)(ye.Z,{open:$e,onClose:function(){Ze(!1)},width:ve.R_,title:we.format("networkJoinContainer"),children:(0,T.jsx)(be.Z,{onSelect:function(){var Ie=a()(C()().mark(function ae(s){return C()().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return me.next=2,(0,W.HY)({name:Te.detail.Name,containerName:s.Name,ipV4:""});case 2:Ze(!1),Te.onFinish&&Te.onFinish(Te.detail);case 4:case"end":return me.stop()}},ae)}));return function(ae){return Ie.apply(this,arguments)}}()})})]})}var e=t(13822),We=(0,Re.forwardRef)(function(Te,_e){(0,Re.useImperativeHandle)(_e,function(){return{show:H}});var k=(0,Re.useState)(!1),$e=g()(k,2),Ze=$e[0],we=$e[1],Ie=(0,Re.useState)(),ae=g()(Ie,2),s=ae[0],ee=ae[1],me=(0,Re.useState)(),se=g()(me,2),ke=se[0],Le=se[1],he=new N.Uo("components.network");function H(X){return Fe.apply(this,arguments)}function Fe(){return Fe=a()(C()().mark(function X(G){var Pe,ge,Se,z,V,B,te,ne;return C()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,W.IS)({name:G});case 2:if(Pe=_.sent,!Pe.data.info.Containers){_.next=19;break}ge=[],Se=0,z=Object.entries(Pe.data.info.Containers);case 6:if(!(Se<z.length)){_.next=16;break}return V=g()(z[Se],2),B=V[0],te=V[1],_.next=10,(0,e.jV)({md5:te.Name});case 10:ne=_.sent,ne.data.info.NetworkSettings.Networks[G]&&(te.Alias=ne.data.info.NetworkSettings.Networks[G].Aliases),ge.push(te);case 13:Se++,_.next=6;break;case 16:Le(ge),_.next=20;break;case 19:Le([]);case 20:ee(Pe.data.info),we(!0);case 22:case"end":return _.stop()}},X)})),Fe.apply(this,arguments)}return(0,T.jsx)(F.a,{drawerProps:{width:ve.R_},title:he.format("detailTitle"),open:Ze,onOpenChange:function(G){we(G)},submitter:!1,children:(0,T.jsxs)(fe.Z,{ghost:!0,direction:"column",gutter:[10,0],children:[(0,T.jsx)(fe.Z,{title:he.format("detailContainer"),ghost:!0,extra:s&&(0,T.jsx)(y,{detail:s,onFinish:function(G){H(G.Name)}}),children:(0,T.jsx)(K.Z,{rowKey:"Name",columns:[{title:N.FD.format("listContainerName"),dataIndex:"Name"},{title:N.FD.format("listAlias"),dataIndex:"Alias",render:function(G,Pe,ge){return(0,T.jsx)(Ce.Z,{direction:"vertical",children:Pe.Alias&&Pe.Alias.map(function(Se,z){return(0,T.jsx)(Oe.Z.Text,{copyable:!0,keyboard:!0,children:Se},z)})})}},{title:"IPV4",dataIndex:"IPv4Address"},{title:"IPV6",dataIndex:"IPv6Address"},{title:"MacAddress",dataIndex:"MacAddress"},{title:N.FD.format("listManage"),render:function(G,Pe,ge){return(0,T.jsx)(Ce.Z,{split:(0,T.jsx)(S.Z,{type:"vertical"}),children:(0,T.jsx)(o.Z,{buttonProps:{type:"text",icon:(0,T.jsx)(w.Z,{}),danger:!0},confirmProps:{showCommonConfirm:!0},action:function(){var z,V;return(0,W.t9)({name:(z=s==null?void 0:s.Id)!==null&&z!==void 0?z:"",containerName:(V=Pe.Name)!==null&&V!==void 0?V:""})},tips:N.FD.format("listManageExit"),onSuccess:function(){s&&H(s.Name)}},"delete")})}}],dataSource:ke,pagination:!1})}),(0,T.jsx)(fe.Z,{ghost:!0,title:he.format("detailBasic"),children:(0,T.jsxs)(U.Z,{styles:{label:{width:150}},column:2,bordered:!0,children:[(0,T.jsx)(U.Z.Item,{label:he.format("detailName"),children:s==null?void 0:s.Name}),(0,T.jsx)(U.Z.Item,{label:"Id",children:s==null?void 0:s.Id.slice(0,12)}),(0,T.jsx)(U.Z.Item,{label:"Driver",children:s==null?void 0:s.Driver}),(0,T.jsx)(U.Z.Item,{label:"Scope",children:s==null?void 0:s.Scope}),(0,T.jsx)(U.Z.Item,{label:"Attachable",children:he.yesNo(s==null?void 0:s.Attachable)}),(0,T.jsx)(U.Z.Item,{label:"Internal",children:he.yesNo(s==null?void 0:s.Internal)}),(s==null?void 0:s.IPAM.Config)&&(s==null?void 0:s.IPAM.Config.map(function(X,G){return(0,T.jsx)(U.Z.Item,{label:X.Gateway&&X.Gateway.includes(":")?"IPV6":"IPV4",children:(0,T.jsxs)(U.Z,{styles:{label:{width:150}},column:1,bordered:!0,children:[(0,T.jsx)(U.Z.Item,{label:"Subnet",children:X.Subnet}),(0,T.jsx)(U.Z.Item,{label:"Gateway",children:X.Gateway}),(0,T.jsx)(U.Z.Item,{label:"IP Range ",children:X.IPRange}),(0,T.jsx)(U.Z.Item,{label:"Excluded IPs",children:X.AuxiliaryAddresses&&Object.keys(X.AuxiliaryAddresses).map(function(Pe){return X.AuxiliaryAddresses[Pe]+" ,"})})]})},G)})),(s==null?void 0:s.Options)&&Object.keys(s==null?void 0:s.Options).length>0&&(0,T.jsx)(U.Z.Item,{label:"Options",children:(0,T.jsx)(U.Z,{styles:{label:{width:150}},column:1,bordered:!0,children:Object.keys(s==null?void 0:s.Options).map(function(X){return(0,T.jsx)(U.Z.Item,{label:X,children:s.Options[X]},X)})})}),(s==null?void 0:s.Labels)&&Object.keys(s==null?void 0:s.Labels).length>0&&(0,T.jsx)(U.Z.Item,{label:"Lables",children:(0,T.jsx)(U.Z,{styles:{label:{width:150}},column:1,bordered:!0,children:Object.keys(s==null?void 0:s.Labels).map(function(X){return(0,T.jsx)(U.Z.Item,{label:X,children:s.Labels[X]},X)})})})]})})]})})}),le=We},2808:function(Ne,pe,t){t.d(pe,{Z:function(){return o}});var je=t(97857),C=t.n(je),xe=t(62370),a=t(51663),ce=t(67294),g=t(85893);function o(ve){return(0,g.jsx)(xe.Z,C()(C()({},ve),{},{children:(0,g.jsx)(a.Z,{showText:function(N){return N.toHexString()},allowClear:!0,presets:[{label:"Color",colors:["#1677ff","#722ed1","#13c2c2","#52c41a","#eb2f96","#f5222d","#fa8c16","#fadb14","#fa541c","#2f54eb","#faad14","#a0d911","#000000","#5cdbd3","#b37feb","#b7eb8f","#61affe","#9254de","#36cfc9","#ff9c6e","#ff6f00","#ffc069","#28a745","#6610f2","#6f42c1","#007bff","#17a2b8","#20c997","#00cccc","#ff6666"]}]})}))}},65913:function(Ne,pe,t){var je=t(5574),C=t.n(je),xe=t(74330),a=t(67294),ce=t(85893),g=(0,a.forwardRef)(function(o,ve){(0,a.useImperativeHandle)(ve,function(){return{show:function(){F(!0)},destroy:function(){F(!1)}}});var W=(0,a.useState)(!1),N=C()(W,2),w=N[0],F=N[1];return(0,ce.jsx)(xe.Z,{spinning:w,size:"default",children:o.children})});pe.Z=g},29453:function(Ne,pe,t){t.d(pe,{A9:function(){return g},R3:function(){return F},e1:function(){return ve},rn:function(){return N}});var je=t(15009),C=t.n(je),xe=t(99289),a=t.n(xe),ce=t(63713);function g(K){return o.apply(this,arguments)}function o(){return o=a()(C()().mark(function K(Ce){return C()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,(0,ce.request)("/dpanel/api/common/tag/create",{method:"POST",data:Ce});case 2:return S.abrupt("return",S.sent);case 3:case"end":return S.stop()}},K)})),o.apply(this,arguments)}function ve(K){return W.apply(this,arguments)}function W(){return W=a()(C()().mark(function K(Ce){return C()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,(0,ce.request)("/dpanel/api/common/tag/get-list",{method:"POST",data:Ce});case 2:return S.abrupt("return",S.sent);case 3:case"end":return S.stop()}},K)})),W.apply(this,arguments)}function N(K){return w.apply(this,arguments)}function w(){return w=a()(C()().mark(function K(Ce){return C()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,(0,ce.request)("/dpanel/api/common/tag/delete",{method:"POST",data:Ce});case 2:return S.abrupt("return",S.sent);case 3:case"end":return S.stop()}},K)})),w.apply(this,arguments)}function F(K){return fe.apply(this,arguments)}function fe(){return fe=a()(C()().mark(function K(Ce){return C()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,(0,ce.request)("/dpanel/api/pro/tag/get-url-detail",{method:"POST",data:Ce});case 2:return S.abrupt("return",S.sent);case 3:case"end":return S.stop()}},K)})),fe.apply(this,arguments)}}}]);
