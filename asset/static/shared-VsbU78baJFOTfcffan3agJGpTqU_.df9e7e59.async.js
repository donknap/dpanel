"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[352],{26522:function(Ue,pe,t){t.d(pe,{Z:function(){return ve}});var je=t(87462),C=t(67294),xe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908 640H804V488c0-4.4-3.6-8-8-8H548v-96h108c8.8 0 16-7.2 16-16V80c0-8.8-7.2-16-16-16H368c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h108v96H228c-4.4 0-8 3.6-8 8v152H116c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h288c8.8 0 16-7.2 16-16V656c0-8.8-7.2-16-16-16H292v-88h440v88H620c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h288c8.8 0 16-7.2 16-16V656c0-8.8-7.2-16-16-16zm-564 76v168H176V716h168zm84-408V140h168v168H428zm420 576H680V716h168v168z"}}]},name:"apartment",theme:"outlined"},a=xe,de=t(84089),g=function(U,E){return C.createElement(de.Z,(0,je.Z)({},U,{ref:E,icon:a}))},o=C.forwardRef(g),ve=o},16596:function(Ue,pe,t){t.d(pe,{Z:function(){return ve}});var je=t(87462),C=t(67294),xe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M518.3 459a8 8 0 00-12.6 0l-112 141.7a7.98 7.98 0 006.3 12.9h73.9V856c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V613.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 459z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-upload",theme:"outlined"},a=xe,de=t(84089),g=function(U,E){return C.createElement(de.Z,(0,je.Z)({},U,{ref:E,icon:a}))},o=C.forwardRef(g),ve=o},40666:function(Ue,pe,t){t.d(pe,{Z:function(){return ve}});var je=t(87462),C=t(67294),xe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M938 458.8l-29.6-312.6c-1.5-16.2-14.4-29-30.6-30.6L565.2 86h-.4c-3.2 0-5.7 1-7.6 2.9L88.9 557.2a9.96 9.96 0 000 14.1l363.8 363.8c1.9 1.9 4.4 2.9 7.1 2.9s5.2-1 7.1-2.9l468.3-468.3c2-2.1 3-5 2.8-8zM459.7 834.7L189.3 564.3 589 164.6 836 188l23.4 247-399.7 399.7zM680 256c-48.5 0-88 39.5-88 88s39.5 88 88 88 88-39.5 88-88-39.5-88-88-88zm0 120c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"}}]},name:"tag",theme:"outlined"},a=xe,de=t(84089),g=function(U,E){return C.createElement(de.Z,(0,je.Z)({},U,{ref:E,icon:a}))},o=C.forwardRef(g),ve=o},8287:function(Ue,pe,t){var je=t(5574),C=t.n(je),xe=t(15009),a=t.n(xe),de=t(99289),g=t.n(de),o=t(13822),ve=t(83622),W=t(85265),U=t(23345),E=t(83062),M=t(67294),ce=t(81146),K=t(1883),Ce=t(58638),Oe=t(62597),S=t(3616),L=t(63713),Re=t(36146),be=t(85893),le=(0,M.forwardRef)(function(ye,w){(0,M.useImperativeHandle)(w,function(){return{show:function(ae){return g()(a()().mark(function l(){var te;return a()().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return me.next=2,(0,o.jV)({md5:ae});case 2:te=me.sent,te.data&&Te(te.data.info),se(!0);case 5:case"end":return me.stop()}},l)}))()}}});var P=(0,M.useState)(!1),e=C()(P,2),Ne=e[0],se=e[1],we=(0,M.useState)(),Fe=C()(we,2),k=Fe[0],Te=Fe[1],Ze=(0,M.useRef)(),Ee=new Re.Uo("components.appDetail");return(0,be.jsxs)(be.Fragment,{children:[ye.showTriggerButton&&(0,be.jsx)(ve.ZP,{icon:(0,be.jsx)(K.Z,{}),onClick:g()(a()().mark(function Ie(){return a()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:Te(ye.containerInfo),se(!0);case 2:case"end":return l.stop()}},Ie)})),children:Re.FD.format("listManageLog")},"log"),(0,be.jsx)(W.Z,{title:Ee.format("titleLog"),open:Ne,forceRender:!0,onClose:function(){se(!1)},afterOpenChange:function(ae){if(ae)setTimeout(function(){var te,fe;(te=Ze.current)===null||te===void 0||te.start(),(fe=Ze.current)===null||fe===void 0||fe.fit()},1e3);else{var l;(l=Ze.current)===null||l===void 0||l.close()}},width:S.FK,extra:(0,be.jsx)(U.Z,{children:(0,be.jsx)(L.Link,{to:"/container/log/".concat(k==null?void 0:k.Name),target:"_blank",onClick:function(){var ae;(ae=Ze.current)===null||ae===void 0||ae.close(),se(!1)},children:(0,be.jsx)(E.Z,{title:Re.FD.format("listManageOpenNewWindow"),children:(0,be.jsx)(Ce.Z,{})})})}),children:k&&Ne&&(0,be.jsx)(ce.Z,{ref:Ze,showInDrawer:!0,id:"container:log:".concat(k==null?void 0:k.Id),request:function(){var Ie=g()(a()().mark(function ae(l){var te;return a()().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return me.next=2,(0,Oe.Tb)({id:(te=k.Id)!==null&&te!==void 0?te:"",lineTotal:l.lineTotal,download:l.download,showTime:l.showTime});case 2:case"end":return me.stop()}},ae)}));return function(ae){return Ie.apply(this,arguments)}}(),download:function(){var Ie=g()(a()().mark(function ae(l){var te,fe,me,ke;return a()().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:return he.next=2,(0,Oe.XH)({id:(te=k.Id)!==null&&te!==void 0?te:"",lineTotal:l.lineTotal,showTime:l.showTime});case 2:return me=he.sent,he.next=5,(0,o.jV)({md5:(fe=k.Id)!==null&&fe!==void 0?fe:""});case 5:return ke=he.sent,he.abrupt("return",{data:new Blob([me],{type:"text/plain"}),name:ke.data.info.Name.replaceAll("/","")+"_"+new Date().toLocaleDateString()+".log"});case 7:case"end":return he.stop()}},ae)}));return function(ae){return Ie.apply(this,arguments)}}()})})]})});pe.Z=le},41477:function(Ue,pe,t){t.d(pe,{Z:function(){return hn}});var je=t(5574),C=t.n(je),xe=t(15009),a=t.n(xe),de=t(99289),g=t.n(de),o=t(67294),ve=t(45605),W=t(38345),U=t(97269),E=t(26412),M=t(23345),ce=t(96074),K=t(25593),Ce=t(2487),Oe=t(76428),S=t(44771),L=t(13822),Re=t(24963),be=t(89638),le=t(5251),ye=t(63713),w=t(87662),P=t(36146),e=t(85893);function Ne(n){var y,r,i,j,T,p,s,c,m,I,u,Z=new P.Uo("components.appDetail"),b=(0,o.useState)(""),x=C()(b,2),J=x[0],_=x[1],$=(0,ye.useAccess)(),D=(0,o.useContext)(Re.Z),ue=D.message,ie=(0,o.useRef)(),f=[],re=[],Me=[],He=(0,o.useState)(""),N=C()(He,2),v=N[0],R=N[1];return(0,o.useEffect)(function(){n.data&&((0,w.K3)().then(function(d){var h;R((h=d.data.serverUrl)!==null&&h!==void 0?h:"")}),_(n.data.info.Name))},[n.data]),(0,o.useEffect)(function(){var d,h,A;(d=ie.current)===null||d===void 0||d.setFieldValue("restart",{name:(h=n.data.info.HostConfig)===null||h===void 0?void 0:h.RestartPolicy.Name,maxAccept:(A=n.data.info.HostConfig)===null||A===void 0?void 0:A.RestartPolicy.MaximumRetryCount})},[ie.current,n.data]),n.data&&n.data.domain&&n.data.domain.map(function(d){Me.push(d.setting.enableSSL?"https://"+d.serverName:"http://"+d.serverName)}),n.data.info.NetworkSettings.Ports&&Object.entries(n.data.info.NetworkSettings.Ports).forEach(function(d){var h=C()(d,2),A=h[0],O=h[1];if(O){var oe=A.split("/"),q=C()(oe,2),ee=q[0],$e=q[1];O.forEach(function(it){it.HostPort?f.push({PrivatePort:ee,Type:$e,IP:it.HostIp,PublicPort:it.HostPort}):re.push({PrivatePort:ee,Type:$e,IP:"",PublicPort:""})})}}),(0,e.jsxs)(e.Fragment,{children:[n.data&&n.data.info.State.Running&&(0,e.jsx)(be.Z,{publicPort:f,privatePort:re,domain:Me,serverIp:v,showInDetail:!0,ghost:n.ghost,layout:"inline"}),(0,e.jsx)(W.Z,{title:(0,e.jsx)(ve.Z,{}),subTitle:Z.format("titleBasic"),ghost:n.ghost,children:(0,e.jsxs)(E.Z,{column:1,bordered:!0,children:[(0,e.jsx)(E.Z.Item,{label:"Hostname",children:(0,e.jsx)(M.Z,{split:(0,e.jsx)(ce.Z,{type:"vertical"}),children:(0,e.jsx)(Oe.Z,{title:(y=n.data.info)===null||y===void 0?void 0:y.Config.Hostname})})}),(0,e.jsx)(E.Z.Item,{label:P.FD.format("listName"),children:(0,e.jsxs)(M.Z,{split:(0,e.jsx)(ce.Z,{type:"vertical"}),children:[(0,e.jsx)(Oe.Z,{title:(r=n.data.info)===null||r===void 0?void 0:r.Id.substring(0,12)}),(0,e.jsx)(K.Z.Text,{copyable:!0,editable:{tooltip:P.FD.format("listManageEdit"),onChange:function(){var d=g()(a()().mark(function A(O){var oe;return a()().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if((oe=n.data.info)!==null&&oe!==void 0&&oe.Id){ee.next=2;break}return ee.abrupt("return");case 2:return ee.next=4,(0,L.eE)({md5:n.data.info.Id,name:O});case 4:_(O),ue.success(P.FD.format("finish"));case 6:case"end":return ee.stop()}},A)}));function h(A){return d.apply(this,arguments)}return h}()},children:(0,le.fi)(J,"/")})]})}),(0,e.jsx)(E.Z.Item,{label:P.FD.format("listNetwork"),children:((i=n.data.info)===null||i===void 0?void 0:i.State.Running)&&(0,e.jsxs)(E.Z,{column:1,bordered:!0,children:[n.data.info.NetworkSettings.Networks&&Object.keys(n.data.info.NetworkSettings.Networks).map(function(d,h){var A,O,oe;return(0,e.jsx)(E.Z.Item,{label:d,children:d=="host"?P.FD.format("listNetworkUseHost"):(0,e.jsxs)(M.Z,{direction:"vertical",children:[(0,e.jsx)(Oe.Z,{title:(A=n.data.info)===null||A===void 0?void 0:A.NetworkSettings.Networks[d].IPAddress}),(O=n.data.info)===null||O===void 0?void 0:O.NetworkSettings.Networks[d].Gateway,(oe=n.data.info)===null||oe===void 0?void 0:oe.NetworkSettings.Networks[d].MacAddress]})},h)}),((j=n.data.info.HostConfig)===null||j===void 0?void 0:j.ExtraHosts)&&(0,e.jsx)(E.Z.Item,{label:P.FD.format("listNetworkUseHost"),children:(0,e.jsx)(M.Z,{direction:"vertical",children:n.data.info.HostConfig.ExtraHosts.map(function(d,h){if(d.indexOf(":")>-1){var A=d.split(":");return"".concat(A[0]," - ").concat(A.slice(1).join(":"))}})})},"host")]})}),(0,e.jsx)(E.Z.Item,{label:P.FD.format("listRunTime"),children:Z.format("runTimeValue",{create:new Date((T=(p=n.data.info)===null||p===void 0?void 0:p.Created)!==null&&T!==void 0?T:"").toLocaleString(),upgrade:new Date((s=(c=n.data.info)===null||c===void 0?void 0:c.State.StartedAt)!==null&&s!==void 0?s:"").toLocaleString()})}),$.canSeeContainerListManage&&(0,e.jsx)(E.Z.Item,{label:P.FD.format("listRestartPolicy"),children:(0,e.jsx)(U.A,{name:"container-restart",submitter:!1,onValuesChange:function(){var d=g()(a()().mark(function h(A,O){var oe,q;return a()().wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:if((oe=n.data.info)!==null&&oe!==void 0&&oe.Id){$e.next=2;break}return $e.abrupt("return");case 2:return $e.next=4,(0,L.eE)({md5:n.data.info.Id,restart:O.restart});case 4:return q=$e.sent,ue.success(P.FD.format("finish")),$e.abrupt("return");case 7:case"end":return $e.stop()}},h)}));return function(h,A){return d.apply(this,arguments)}}(),layout:"inline",formRef:ie,children:(0,e.jsx)(S.Z,{ghost:!0,defaultValue:(m=n.data.info)===null||m===void 0||(m=m.HostConfig)===null||m===void 0?void 0:m.RestartPolicy.Name})})}),(0,e.jsx)(E.Z.Item,{label:P.FD.format("listEnv"),children:(0,e.jsx)(Ce.Z,{dataSource:(I=(u=n.data.info)===null||u===void 0?void 0:u.Config.Env)!==null&&I!==void 0?I:[],renderItem:function(h){var A=h.split("=");return(0,e.jsxs)(Ce.Z.Item,{children:[(0,e.jsx)(K.Z.Text,{code:!0,children:A[0]})," = ",(0,e.jsx)(K.Z.Text,{copyable:!0,children:A.slice(1).join("=")})]})}})})]})})]})}var se=t(60433),we=t(85265),Fe=t(86250),k=t(87462),Te=t(97211),Ze=t(84089),Ee=function(y,r){return o.createElement(Ze.Z,(0,k.Z)({},y,{ref:r,icon:Te.Z}))},Ie=o.forwardRef(Ee),ae=Ie;function l(n){var y,r=new P.Uo("components.appDetail");return n.data&&n.data.Mounts&&n.data.Mounts.length>0&&(0,e.jsx)(W.Z,{ghost:n.ghost,title:(0,e.jsx)(ae,{}),subTitle:r.format("titleVolume"),children:(0,e.jsx)(E.Z,{column:1,bordered:!0,children:(y=n.data)===null||y===void 0?void 0:y.Mounts.map(function(i,j){return(0,e.jsx)(E.Z.Item,{styles:{label:{width:"50%",wordBreak:"break-word"},content:{width:"50%",wordBreak:"break-word"}},label:i.Type=="volume"?i.Name:i.Source,children:i.Destination},j)})})})}var te=t(43425),fe=t(74842),me=t(33160),ke=t(87784),Ae=t(30159),he=t(89035),H=t(95591),_e=t(83622),Y=t(10781),z=t(80821),Pe=t(99922),ge=t(96486),De=t.n(ge),G=t(69033),V=t(8287),B=(0,o.createContext)({}),X=B,ne=t(19632),Q=t.n(ne),F=t(3616),Se=t(12122),Le=t(60940),Be=t(27619);function Ge(n){return Xe.apply(this,arguments)}function Xe(){return Xe=g()(a()().mark(function n(y){return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,ye.request)("/dpanel/api/app/container/get-stat-info",{method:"POST",data:y}));case 1:case"end":return i.stop()}},n)})),Xe.apply(this,arguments)}function dt(n){return qe.apply(this,arguments)}function qe(){return qe=g()(a()().mark(function n(y){return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,ye.request)("/dpanel/api/app/container/get-process-info",{method:"POST",data:y}));case 1:case"end":return i.stop()}},n)})),qe.apply(this,arguments)}var et={total:0,memory:{usage:[{name:"use",data:[]},{name:"all",show:!1,data:[]}],source:{usage:0,limit:0}},cpu:{usage:[{name:"use",data:[]}],source:{usage:0,limit:0}},network:{usage:[{name:"rx",data:[]},{name:"tx",data:[]}],source:{usageIn:0,usageOut:0}},io:{usage:[{name:"read",data:[]},{name:"write",data:[]}],source:{usageRead:0,usageWrite:0}}},ct=function(y,r){var i,j,T;switch(r.type){case"clear":return et;case"update":var p=new Date().toLocaleTimeString(),s=JSON.parse(JSON.stringify(et));return(i=r.payload)!==null&&i!==void 0&&i.memory&&(s.memory.usage=[{name:"use",data:[].concat(Q()(y.memory.usage[0].data.slice(-20)),[{date:p,value:Math.round(r.payload.memory.in)}])},{name:"all",show:!1,data:[].concat(Q()(y.memory.usage[1].data.slice(-20)),[{date:p,value:Math.round(r.payload.memory.out)}])}],s.memory.source={usage:r.payload.memory.in,limit:r.payload.memory.out},s.cpu.usage=[{name:"use",data:[].concat(Q()(y.cpu.usage[0].data.slice(-20)),[{date:p,value:r.payload.cpu.toFixed(2)}])}],s.cpu.source={usage:r.payload.cpu,limit:100}),(j=r.payload)!==null&&j!==void 0&&j.networkIO&&(s.network.source={usageIn:parseFloat(r.payload.networkIO.in.toFixed(2)),usageOut:parseFloat(r.payload.networkIO.out.toFixed(2))},s.network.usage=[{name:"rx",data:[].concat(Q()(y.network.usage[0].data.slice(-20)),[{date:p,value:r.payload.networkIO.out.toFixed(2)}])},{name:"tx",data:[].concat(Q()(y.network.usage[1].data.slice(-20)),[{date:p,value:r.payload.networkIO.in.toFixed(2)}])}]),(T=r.payload)!==null&&T!==void 0&&T.blockIO&&(s.io.source={usageRead:parseFloat(r.payload.blockIO.out.toFixed(2)),usageWrite:parseFloat(r.payload.blockIO.in.toFixed(2))},s.io.usage=[{name:"read",data:[].concat(Q()(y.io.usage[0].data.slice(-20)),[{date:p,value:r.payload.blockIO.out.toFixed(2)}])},{name:"write",data:[].concat(Q()(y.io.usage[1].data.slice(-20)),[{date:p,value:r.payload.blockIO.in.toFixed(2)}])}]),s}},ft=(0,o.forwardRef)(function(n,y){var r=(0,o.useState)(!1),i=C()(r,2),j=i[0],T=i[1],p=(0,o.useReducer)(ct,et),s=C()(p,2),c=s[0],m=s[1],I=(0,o.useState)(),u=C()(I,2),Z=u[0],b=u[1],x=(0,o.useContext)(Re.Z),J=x.loading,_=(0,ye.useModel)("subscriber"),$=new P.Uo("components.appDetail");(0,o.useImperativeHandle)(y,function(){return{}});function D(ie){return ue.apply(this,arguments)}function ue(){return ue=g()(a()().mark(function ie(f){var re,Me;return a()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return J.show(),Ge({id:f}),N.next=4,dt({id:f});case 4:re=N.sent,Me={columns:[],data:[]},re.data.list.Titles.map(function(v){Me.columns.push({title:v,label:v,dataIndex:v})}),re.data.list.Processes.map(function(v,R){Me.data.push({UID:v[0],PID:v[1],PPID:v[2],C:v[3],STIME:v[4],TTY:v[5],TIME:v[6],CMD:v[7]})}),b(Me),J.destroy();case 10:case"end":return N.stop()}},ie)})),ue.apply(this,arguments)}return(0,o.useEffect)(function(){return function(){_.progress.close("container:stat:"+n.containerInfo.Id),m({type:"clear",payload:{}})}},[n.containerInfo]),(0,e.jsxs)(e.Fragment,{children:[n.showTriggerButton&&(0,e.jsx)(_e.ZP,{onClick:g()(a()().mark(function ie(){return a()().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:T(!0);case 1:case"end":return re.stop()}},ie)})),icon:(0,e.jsx)(Se.Z,{}),children:P.FD.format("listManageStat")},"log"),(0,e.jsxs)(we.Z,{title:$.format("titleStat"),open:j,onClose:function(){T(!1)},afterOpenChange:function(f){f?setTimeout(function(){var re;!((re=n.containerInfo)===null||re===void 0)&&re.Name&&D(n.containerInfo.Id),_.addDataHandler("container:stat:".concat(n.containerInfo.Id),function(Me){m({type:"update",payload:Me.data})})},500):(_.progress.close("container:stat:"+n.containerInfo.Id),m({type:"clear"}))},width:F.R_,children:[(0,e.jsxs)(W.Z,{ghost:!0,direction:"row",wrap:!0,gutter:[20,20],children:[c.memory&&c.memory.source&&(0,e.jsx)(W.Z,{colSpan:12,title:(0,e.jsx)(Se.Z,{}),subTitle:"Memory usage: ".concat((0,le.FI)(c.memory.source.usage)," / ").concat((0,le.FI)(c.memory.source.limit)),headerBordered:!0,bordered:!0,children:(0,e.jsx)(Be.Z,{name:"container-memory",data:c.memory.usage,yLabelFormatter:function(f){return(0,le.FI)(parseFloat(f))},yValueFormatter:function(f){return(0,le.FI)(parseFloat(f))},yDomainMaxCallback:function(f){return f.min*2}})}),(0,e.jsx)(W.Z,{colSpan:12,title:(0,e.jsx)(Se.Z,{}),subTitle:"Cpu usage: ".concat(c.cpu.source.usage.toFixed(2),"%"),headerBordered:!0,bordered:!0,children:(0,e.jsx)(Be.Z,{name:"container-cpu",data:c.cpu.usage,yDomainMaxCallback:function(f){return f.min*100},yLabelFormatter:function(f){return"".concat(parseFloat(f).toFixed(2),"%")}})}),c.io&&c.io.source&&(0,e.jsx)(W.Z,{colSpan:12,title:(0,e.jsx)(Se.Z,{}),subTitle:"I/O: ".concat((0,le.FI)(c.io.source.usageRead)," / ").concat((0,le.FI)(c.io.source.usageWrite)),headerBordered:!0,bordered:!0,children:(0,e.jsx)(Be.Z,{name:"container-disk",data:c.io.usage,yDomainMaxCallback:function(f){return f.max*2},yLabelFormatter:function(f){return(0,le.FI)(parseFloat(f))}})}),c.network&&c.network.source&&(0,e.jsx)(W.Z,{colSpan:12,title:(0,e.jsx)(Se.Z,{}),subTitle:"Network: ".concat((0,le.FI)(c.network.source.usageIn)," / ").concat((0,le.FI)(c.network.source.usageOut)),headerBordered:!0,bordered:!0,children:(0,e.jsx)(Be.Z,{name:"container-network",data:c.network.usage,yDomainMaxCallback:function(f){return f.max*2},yLabelFormatter:function(f){return(0,le.FI)(parseFloat(f))}})})]}),(0,e.jsx)(W.Z,{title:(0,e.jsx)(se.Z,{}),subTitle:"Progress",children:(0,e.jsx)(Le.Z,{scroll:{x:"max-content"},rowKey:"PID",columns:Z==null?void 0:Z.columns,dataSource:Z==null?void 0:Z.data,pagination:{pageSize:10}})})]})]})}),mt=ft,vt=(0,o.forwardRef)(function(n,y){(0,o.useImperativeHandle)(y,function(){return{showConsole:s}});var r=new P.Uo("components.appDetail"),i=(0,o.useRef)(),j=(0,o.useContext)(X),T=j.reload,p=j.loadingRef;function s(c){var m;(m=i.current)===null||m===void 0||m.show({url:"/console/container/".concat(n.data.Id),title:n.data.Name,workDir:c})}return(0,e.jsx)(W.Z,{title:(0,e.jsx)(te.Z,{}),ghost:n.ghost,subTitle:(0,e.jsxs)(M.Z,{children:[r.format("titleOp")," - ",function(c){if(c){var m=c.State.Status,I=c.State.Status;if(c.State.Health&&c.State.Health.Status=="unhealthy"){var u,Z;m=c.State.Health.Status,I=(u=(Z=De().last(c.State.Health.Log))===null||Z===void 0?void 0:Z.Output)!==null&&u!==void 0?u:m}return(0,e.jsx)(Y.Z,{status:"container.".concat(m),tip:I})}}(n.data)]}),children:(0,e.jsxs)(M.Z,{wrap:!0,children:[n.data&&!n.data.State.Running&&(0,e.jsx)(z.Z,{buttonProps:{icon:(0,e.jsx)(fe.Z,{})},action:g()(a()().mark(function c(){var m,I,u;return a()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return(m=p.current)===null||m===void 0||m.show(),b.abrupt("return",(0,L.IW)({md5:(I=(u=n.data)===null||u===void 0?void 0:u.Id)!==null&&I!==void 0?I:"",operate:"start"}).finally(function(){var x;(x=p.current)===null||x===void 0||x.destroy()}));case 2:case"end":return b.stop()}},c)})),onSuccess:function(){return T()},children:P.FD.format("listManageStart")}),n.data&&n.data.State.Running&&(0,e.jsx)(z.Z,{buttonProps:{icon:(0,e.jsx)(me.Z,{})},action:g()(a()().mark(function c(){var m,I,u;return a()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return(m=p.current)===null||m===void 0||m.show(),b.abrupt("return",(0,L.IW)({md5:(I=(u=n.data)===null||u===void 0?void 0:u.Id)!==null&&I!==void 0?I:"",operate:"restart"}).finally(function(){var x;(x=p.current)===null||x===void 0||x.destroy()}));case 2:case"end":return b.stop()}},c)})),onSuccess:function(){return T()},children:P.FD.format("listManageRestart")}),n.data&&n.data.State.Running&&(0,e.jsx)(z.Z,{action:g()(a()().mark(function c(){var m,I,u;return a()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return(m=p.current)===null||m===void 0||m.show(),b.abrupt("return",(0,L.IW)({md5:(I=(u=n.data)===null||u===void 0?void 0:u.Id)!==null&&I!==void 0?I:"",operate:"stop"}).finally(function(){var x;(x=p.current)===null||x===void 0||x.destroy()}));case 2:case"end":return b.stop()}},c)})),buttonProps:{danger:!0,icon:(0,e.jsx)(ke.Z,{})},onSuccess:function(){return T()},children:P.FD.format("listManageStop")}),n.data&&n.data.State.Running&&!n.data.State.Paused&&(0,e.jsx)(z.Z,{action:g()(a()().mark(function c(){var m,I,u;return a()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return(m=p.current)===null||m===void 0||m.show(),b.abrupt("return",(0,L.IW)({md5:(I=(u=n.data)===null||u===void 0?void 0:u.Id)!==null&&I!==void 0?I:"",operate:"pause"}).finally(function(){var x;(x=p.current)===null||x===void 0||x.destroy()}));case 2:case"end":return b.stop()}},c)})),onSuccess:function(){return T()},buttonProps:{icon:(0,e.jsx)(Ae.Z,{})},children:P.FD.format("listManagePause")}),n.data&&n.data.State.Paused&&(0,e.jsx)(z.Z,{action:g()(a()().mark(function c(){var m,I,u;return a()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return(m=p.current)===null||m===void 0||m.show(),b.abrupt("return",(0,L.IW)({md5:(I=(u=n.data)===null||u===void 0?void 0:u.Id)!==null&&I!==void 0?I:"",operate:"unpause"}).finally(function(){var x;(x=p.current)===null||x===void 0||x.destroy()}));case 2:case"end":return b.stop()}},c)})),onSuccess:function(){return T()},buttonProps:{icon:(0,e.jsx)(fe.Z,{})},children:P.FD.format("listManageUnpause")}),n.data&&n.data.State.Running&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(ce.Z,{type:"vertical"}),(0,e.jsx)(Pe.Z,{showFileExplorer:!0,ref:i}),(0,e.jsx)(_e.ZP,{type:"primary",onClick:function(){n.data&&s(n.data.Config.WorkingDir)},icon:(0,e.jsx)(he.Z,{}),children:P.FD.format("listManageConsole")}),(0,e.jsx)(G.Z,{showConsole:!0,type:"container",name:(0,le.fi)(n.data.Name,"/"),title:(0,le.fi)(n.data.Name,"/"),trigger:(0,e.jsx)(_e.ZP,{icon:(0,e.jsx)(H.Z,{}),children:P.FD.format("listManageFilePath")})}),(0,e.jsx)(V.Z,{containerInfo:n.data,showTriggerButton:!0}),(0,e.jsx)(mt,{containerInfo:n.data,showTriggerButton:!0})]}),(0,e.jsx)(ce.Z,{type:"vertical"}),(0,e.jsx)(_e.ZP,{type:"dashed",icon:(0,e.jsx)(me.Z,{}),onClick:function(){T()},children:P.FD.format("listManageRefresh")})]})})}),ht=vt,Qe=t(62597),gt=t(86548),pt=t(57132),lt=t(82061),st=t(25035),jt=t(58638),xt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"},It=xt,Ct=function(y,r){return o.createElement(Ze.Z,(0,k.Z)({},y,{ref:r,icon:It}))},yt=o.forwardRef(Ct),ut=yt,We=t(62370),Zt=t(5966),bt=t(52688),Pt=t(85418),Rt=t(40411),ze=t(84567),Ke=t(83062),Ot=t(25278),Ve=t(78045),Dt=t(24739),St=t(97462),Et=t(70146);function wt(n){var y=(0,o.useRef)(),r=new P.Uo("components.appDetail");return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(z.Z,{buttonProps:{icon:(0,e.jsx)(ut,{})},confirmProps:{onOpenChange:function(j,T){var p,s;!((p=y.current)===null||p===void 0)&&p.resetFields&&((s=y.current)===null||s===void 0||s.resetFields())},description:(0,e.jsxs)(M.Z,{style:{width:650,marginTop:"10px",paddingRight:"10px"},direction:"vertical",size:20,children:[(0,e.jsx)(K.Z.Text,{children:(0,e.jsx)("ul",{children:r.prefix("backupVolumeTipOption",2).map(function(i,j){return(0,e.jsxs)("li",{children:[i," ",j==1&&(0,e.jsx)(ye.Link,{to:"/app/backup",children:P.Ob.format("container.backup")})]},j)})})}),(0,e.jsx)(U.A,{layout:"inline",formRef:y,submitter:!1,children:(0,e.jsxs)(M.Z,{direction:"vertical",children:[(0,e.jsx)(We.Z,{name:"backupImage",valuePropName:"value",initialValue:"none",children:(0,e.jsxs)(Ve.ZP.Group,{children:[(0,e.jsx)(Ve.ZP,{value:"none",children:(0,e.jsx)(Ke.Z,{title:r.format("backupVolumeImageTipOption.none"),children:r.format("backupVolumeImageOption.none")})}),(0,e.jsx)(Ve.ZP,{value:"image",children:(0,e.jsx)(Ke.Z,{title:r.format("backupVolumeImageTipOption.image"),children:r.format("backupVolumeImageOption.image")})}),(0,e.jsx)(Ve.ZP,{value:"container",children:(0,e.jsx)(Ke.Z,{title:r.format("backupVolumeImageTipOption.container"),children:r.format("backupVolumeImageOption.container")})})]})}),(0,e.jsx)(We.Z,{name:"backupVolume",valuePropName:"value",initialValue:"all",children:(0,e.jsxs)(Ve.ZP.Group,{disabled:!n.container.Mounts||n.container.Mounts.length==0,children:[(0,e.jsx)(Ve.ZP,{value:"none",children:r.format("backupVolumePathOption.none")}),(0,e.jsx)(Ve.ZP,{value:"all",children:r.format("backupVolumePathOption.all")}),(0,e.jsx)(Ve.ZP,{value:"select",children:r.format("backupVolumePathOption.select")})]})}),(0,e.jsx)(Dt.UW,{children:(0,e.jsx)(St.Z,{name:["backupVolume"],children:function(j){var T=j.backupVolume;return T=="select"&&(0,e.jsx)(M.Z,{wrap:!0,children:n.container.Mounts&&n.container.Mounts.map(function(p,s){return(0,e.jsx)(We.Z,{valuePropName:"checked",name:["volume",p.Destination],children:(0,e.jsx)(ze.Z,{children:p.Destination})},"volume-".concat(s))})})}})})]})})]})},action:g()(a()().mark(function i(){var j,T,p,s;return a()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,Et.yB)({id:n.container.Name,backupImage:(j=y.current)===null||j===void 0?void 0:j.getFieldValue("backupImage"),backupVolume:(T=y.current)===null||T===void 0?void 0:T.getFieldValue("backupVolume"),backupVolumeList:Object.keys((p=(s=y.current)===null||s===void 0?void 0:s.getFieldValue("volume"))!==null&&p!==void 0?p:{}).filter(function(I){return I})});case 2:case"end":return m.stop()}},i)})),children:r.format("backupVolumeButton")})})}var Ft=t(99861),tt=t(73813),_t=t(50888),Tt=t(16596),Je=t(1699),nt=t(29453),Mt=t(71965);function $t(n){return at.apply(this,arguments)}function at(){return at=g()(a()().mark(function n(y){return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,ye.request)("/dpanel/api/pro/container-rollback/get-list",{data:y,method:"POST"});case 2:return i.abrupt("return",i.sent);case 3:case"end":return i.stop()}},n)})),at.apply(this,arguments)}function At(n){return rt.apply(this,arguments)}function rt(){return rt=g()(a()().mark(function n(y){return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,ye.request)("/dpanel/api/pro/container-rollback/restore",{data:y,method:"POST"});case 2:return i.abrupt("return",i.sent);case 3:case"end":return i.stop()}},n)})),rt.apply(this,arguments)}var Lt=t(86615),Ut=t(40056),kt=t(95833);function Nt(n){var y=(0,ye.useAccess)(),r=(0,o.useState)(),i=C()(r,2),j=i[0],T=i[1],p=(0,o.useRef)(),s=new P.Uo("components.appDetail");return(0,o.useEffect)(function(){y.canSeeEnableCe||$t({siteName:(0,kt.HJ)(n.detail.Name)}).then(function(c){T(c.data.list)})},[n.detail]),(0,e.jsx)(Je.u,{access:["canSeeEnableCe"],showProTips:!0,showProTipsOffset:y.canSeeEnableCe?[-15,0]:void 0,children:function(m){var I=m.canSeeEnableCe;return(0,e.jsx)(z.Z,{action:function(){var Z;return At({id:(Z=p.current)===null||Z===void 0?void 0:Z.getFieldValue("id"),enableForce:!0})},buttonProps:{icon:(0,e.jsx)(Mt.Z,{}),disabled:I,style:{marginRight:y.canSeeEnableCe?20:0}},confirmProps:{onOpenChange:function(Z,b){var x;!((x=p.current)===null||x===void 0)&&x.resetFields&&p.current.resetFields()},description:(0,e.jsx)(U.A,{formRef:p,submitter:!1,children:(0,e.jsxs)(M.Z,{direction:"vertical",style:{width:500},size:[0,15],children:[(0,e.jsx)(K.Z.Text,{children:s.format("rollbackTip")}),j&&j.length>0?(0,e.jsx)(Lt.Z.Group,{fieldProps:{style:{display:"flex",flexDirection:"column",gap:8}},name:"id",label:"",options:j&&j.map(function(u){return{label:"id: ".concat(u.id," ").concat(P.FD.format("listDeletedAt"),": ").concat((0,le.NF)(u.deletedAt)),value:u.id}})}):(0,e.jsx)(Ut.Z,{message:s.format("rollbackEmptyTip"),style:{marginBottom:10}})]})})},onSuccess:function(){var Z;(Z=p.current)===null||Z===void 0||Z.resetFields(),n.onFinish&&n.onFinish()},children:P.FD.format("listManageRollback")})}})}var Bt=t(184),ot=t(14946),Wt=t(40018);function Vt(n){return(0,e.jsxs)(M.Z,{children:[n.title,(0,e.jsx)(Ke.Z,{title:n.help,children:(0,e.jsx)(st.Z,{})})]})}var Kt=t(36588),Ht=t(16970),Gt=t(20743),zt=t(78451),Qt=(0,o.forwardRef)(function(n,y){var r;(0,o.useImperativeHandle)(y,function(){return{}});var i=(0,o.useRef)(),j=(0,o.useRef)(),T=(0,o.useState)(),p=C()(T,2),s=p[0],c=p[1];return(0,o.useEffect)(function(){var m,I;c(n.containerInfo),!((m=i.current)===null||m===void 0)&&m.reloadAndRest&&((I=i.current)===null||I===void 0||I.reloadAndRest())},[n.containerInfo]),(0,e.jsxs)(W.Z,{ghost:n.ghost,children:[(0,e.jsx)(Kt.Z,{ref:j}),(0,e.jsx)(Wt.Z,{scroll:{x:"max-content"},rowKey:"key",actionRef:i,pagination:!1,ghost:!0,columns:[{title:P.FD.format("listContainerNetworkName"),key:"name",dataIndex:"networkName"},{title:P.FD.format("listContainerName"),key:"containerName",dataIndex:"containerName",width:100,render:function(I,u,Z,b,x){return(0,e.jsx)(zt.Z,{content:(0,le.fi)(u.containerName,"/")})}},{title:(0,e.jsx)(Vt,{title:"hostname",help:P.FD.format("listHostnameTip")}),key:"hostName",render:function(I,u,Z){return u.hostName?(0,e.jsx)(M.Z,{direction:"vertical",children:u.hostName.map(function(b,x){if(b)return(0,e.jsx)(K.Z.Text,{copyable:!0,keyboard:!0,children:b},x)})}):(0,e.jsx)(e.Fragment,{})}},{title:"Ip",key:"ip",render:function(I,u,Z,b,x){return(0,e.jsxs)(M.Z,{direction:"vertical",children:[(0,e.jsx)("span",{children:u.networkInfo.IPv4Address}),u.networkInfo.IPv6Address&&(0,e.jsx)("span",{children:u.networkInfo.IPv6Address})]})}},{title:P.FD.format("listManage"),key:"option",width:50,fixed:"right",render:function(I,u,Z,b,x){return(0,e.jsxs)(M.Z,{children:[u.networkName!=""&&(0,e.jsx)(K.Z.Link,{onClick:function(){var _;(_=j.current)===null||_===void 0||_.show(u.networkName)},children:(0,e.jsx)(Ke.Z,{title:P.FD.format("listManageDetail"),children:(0,e.jsx)(te.Z,{})})}),u.key!="bridge"&&u.key!="none"&&u.key!="host"&&u.networkName!=""&&(0,e.jsx)(z.Z,{buttonProps:{type:"link",danger:!0},confirmProps:{showCommonConfirm:!0},action:function(){return(0,ot.t9)({name:u.networkName,containerName:n.containerInfo.Name})},onSuccess:function(){var _,$;!((_=i.current)===null||_===void 0)&&_.reloadAndRest&&(($=i.current)===null||$===void 0||$.reloadAndRest())},tips:P.FD.format("listManageExit"),children:(0,e.jsx)(lt.Z,{})})]})}}],request:function(){var m=g()(a()().mark(function I(u,Z,b){var x,J;return a()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,(0,L.jV)({md5:n.containerInfo.Name});case 2:return x=$.sent,c(x.data.info),$.next=6,(0,ot._3)({name:Object.keys(x.data.info.NetworkSettings.Networks)});case 6:return J=$.sent,$.abrupt("return",{data:J.data.list,success:!0,total:J.data.list.length});case 8:case"end":return $.stop()}},I)}));return function(I,u,Z){return m.apply(this,arguments)}}(),toolBarRender:function(){return[(0,e.jsx)(Gt.Z,{showTriggerButton:!0,onSelect:function(){var I=g()(a()().mark(function u(Z){var b,x;return a()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,ot.HY)({name:Z.Name,containerName:n.containerInfo.Name,ipV4:""});case 2:x=_.sent,!((b=i.current)===null||b===void 0)&&b.reloadAndRest&&i.current.reloadAndRest();case 4:case"end":return _.stop()}},u)}));return function(u){return I.apply(this,arguments)}}()},"joinNetwork"),(0,e.jsx)(Ht.Z,{onFinish:function(){var u,Z;!((u=i.current)===null||u===void 0)&&u.reloadAndRest&&((Z=i.current)===null||Z===void 0||Z.reloadAndRest())}},"create")]},search:!1,expandable:{expandRowByClick:!1,expandedRowKeys:Object.keys((r=s==null?void 0:s.NetworkSettings.Networks)!==null&&r!==void 0?r:{bridge:[]})}})]})}),Jt=Qt,Yt=t(26522),Xt=(0,o.forwardRef)(function(n,y){(0,o.useImperativeHandle)(y,function(){return{}});var r=(0,o.useState)(!1),i=C()(r,2),j=i[0],T=i[1],p=new P.Uo("components.appDetail");return(0,e.jsx)(Bt.a,{submitter:!1,title:p.format("titleNetwork"),onOpenChange:function(c){T(c)},drawerProps:{width:F.R_},open:j,trigger:(0,e.jsx)(_e.ZP,{icon:(0,e.jsx)(Yt.Z,{}),children:P.Ob.format("docker.network")}),children:(0,e.jsx)(Jt,{ghost:!0,containerInfo:n.containerInfo})})}),qt=Xt,en=t(84941),tn=(0,o.forwardRef)(function(n,y){var r=new P.Uo("components.appDetail"),i=(0,o.useContext)(X),j=i.reload,T=i.loadingRef,p=i.close,s=i.redirect,c=(0,o.useRef)(),m=(0,o.useRef)(),I=(0,o.useRef)(),u=(0,o.useRef)(),Z=(0,o.useRef)(),b=(0,o.useRef)(),x=(0,o.useRef)(),J=(0,o.useState)({status:0,error:""}),_=C()(J,2),$=_[0],D=_[1],ue=(0,o.useState)(),ie=C()(ue,2),f=ie[0],re=ie[1];(0,o.useImperativeHandle)(y,function(){return{}});function Me(N){return He.apply(this,arguments)}function He(){return He=g()(a()().mark(function N(v){var R,d,h;return a()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(d=-2,!v.ignore){O.next=6;break}if(!(v.ignore.indexOf("".concat(v.info.Name,"@*"))>-1)){O.next=4;break}return O.abrupt("return",{status:-2,error:""});case 4:if(!(v.ignore.indexOf("".concat(v.info.Name,"@").concat(v.info.Image))>-1)){O.next=6;break}return O.abrupt("return",{status:-2,error:""});case 6:return O.next=8,(0,tt.ZQ)({tag:(R=v.info.Config.Image)!==null&&R!==void 0?R:"",md5:v.info.Image,cacheTime:3600}).catch(function(oe){d=-1});case 8:if(h=O.sent,!(h&&h.data.error&&h.data.error!="")){O.next=11;break}return O.abrupt("return",{status:-1,error:h.data.error});case 11:return h&&(h.data.digestLocal&&h.data.digestLocal.length>0?d=h.data.upgrade?1:2:h.data.error&&h.data.error!=""?d=-1:h.data.digestLocal.length==0?d=-3:d=-2),O.abrupt("return",{status:d,error:""});case 13:case"end":return O.stop()}},N)})),He.apply(this,arguments)}return(0,o.useEffect)(function(){D({status:0}),Me(n.data).then(function(N){D(N)}),re(n.data)},[n.data]),(0,e.jsxs)(M.Z,{direction:"vertical",children:[(0,e.jsxs)(W.Z,{ghost:n.ghost,title:(0,e.jsx)(te.Z,{}),subTitle:r.format("titleManage"),children:[(0,e.jsx)(en.Z,{onFinish:function(){var N=g()(a()().mark(function v(R){return a()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:R&&s(R);case 1:case"end":return h.stop()}},v)}));return function(v){return N.apply(this,arguments)}}(),ref:c},"createByImage"),(0,e.jsxs)(M.Z,{wrap:!0,children:[(0,e.jsx)(_e.ZP,{onClick:function(){var v;(v=c.current)===null||v===void 0||v.show(n.data.info.Id)},type:"primary",icon:(0,e.jsx)(gt.Z,{}),children:P.FD.format("listManageEdit")}),f&&(0,e.jsxs)(e.Fragment,{children:[f.info.Config.Image&&(0,e.jsx)(Ft.Z,{image:[f.info.Config.Image],ref:b}),(0,e.jsx)(Pt.Z,{placement:"bottomLeft",menu:{items:[{key:"1",label:(0,e.jsx)(z.Z,{action:g()(a()().mark(function N(){var v,R,d,h,A,O;return a()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,(0,Qe.ze)({md5:(v=(R=f.info)===null||R===void 0?void 0:R.Name)!==null&&v!==void 0?v:"",imageId:""});case 2:return D({status:0}),q.next=5,(0,tt.ZQ)({tag:(d=(h=f.info)===null||h===void 0?void 0:h.Config.Image)!==null&&d!==void 0?d:"",md5:(A=(O=f.info)===null||O===void 0?void 0:O.Image)!==null&&A!==void 0?A:"",cacheTime:0}).then(function(ee){ee.data.error&&ee.data.error!=""?D({status:-1,error:ee.data.error}):ee.data.digestLocal&&ee.data.digestLocal.length>0?D({status:ee.data.upgrade?1:2}):D({status:-2})}).catch(function(ee){D({status:-1})});case 5:return q.abrupt("return",q.sent);case 6:case"end":return q.stop()}},N)})),buttonProps:{type:"link"},children:r.format("upgradeCheckUpgrade")})},{key:"2",label:(0,e.jsx)(z.Z,{action:g()(a()().mark(function N(){var v,R,d,h;return a()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,(0,Qe.ze)({md5:(v=(R=f.info)===null||R===void 0?void 0:R.Name)!==null&&v!==void 0?v:"",imageId:(d=(h=f.info)===null||h===void 0?void 0:h.Image)!==null&&d!==void 0?d:""});case 2:return O.abrupt("return",O.sent);case 3:case"end":return O.stop()}},N)})),buttonProps:{type:"link"},children:r.format("upgradeCheckUpgradeIgnoreOnce")})},{key:"3",label:(0,e.jsx)(z.Z,{action:g()(a()().mark(function N(){var v,R;return a()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,(0,Qe.ze)({md5:(v=(R=f.info)===null||R===void 0?void 0:R.Name)!==null&&v!==void 0?v:"",imageId:"*"});case 2:return h.abrupt("return",h.sent);case 3:case"end":return h.stop()}},N)})),buttonProps:{type:"link"},children:r.format("upgradeCheckUpgradeIgnore")})}]},children:(0,e.jsx)(Rt.Z,{title:$.error,count:r.format("checkImageUpgradeOption."+$.status),color:r.format("checkImageUpgradeColorOption."+$.status),children:(0,e.jsx)(z.Z,{buttonProps:{disabled:$.status===0,icon:$.status===0?(0,e.jsx)(_t.Z,{}):(0,e.jsx)(Tt.Z,{})},confirmProps:{description:(0,e.jsxs)(M.Z,{style:{width:280,paddingRight:"10px"},direction:"vertical",children:[(0,e.jsx)(K.Z.Text,{children:r.format("upgradeConfirm")}),(0,e.jsx)(U.A,{formRef:x,submitter:!1,layout:"inline",children:(0,e.jsx)(We.Z,{name:"enableBak",valuePropName:"checked",children:(0,e.jsx)(ze.Z,{children:r.format("upgradeConfirmEnableBak")})})})]})},action:g()(a()().mark(function N(){var v,R,d,h,A,O;return a()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,(v=b.current)===null||v===void 0?void 0:v.start();case 2:return(R=T.current)===null||R===void 0||R.show(),(d=b.current)===null||d===void 0||d.finish(),q.next=6,(0,L.RF)({md5:(h=f.info.Id)!==null&&h!==void 0?h:"",imageTag:"",enableBak:(A=(O=x.current)===null||O===void 0?void 0:O.getFieldValue("enableBak"))!==null&&A!==void 0?A:!1}).finally(function(){var ee;(ee=T.current)===null||ee===void 0||ee.destroy()});case 6:return q.abrupt("return",q.sent);case 7:case"end":return q.stop()}},N)})),onSuccess:function(v){p()},children:r.format("upgradeButton")})})})]}),(0,e.jsx)(ce.Z,{type:"vertical"}),(0,e.jsx)(z.Z,{buttonProps:{icon:(0,e.jsx)(pt.Z,{})},confirmProps:{description:(0,e.jsxs)(M.Z,{style:{width:400,paddingRight:"10px"},direction:"vertical",children:[(0,e.jsx)(K.Z.Text,{children:r.format("copyConfirmTip")}),(0,e.jsxs)(U.A,{formRef:Z,submitter:!1,layout:"horizontal",children:[(0,e.jsx)("br",{}),(0,e.jsx)(Zt.Z,{label:r.format("copyCopyName"),name:"copyName"}),(0,e.jsx)(bt.Z,{label:r.format("copyEnableRandomPort"),name:"enableRandomPort"})]})]})},action:g()(a()().mark(function N(){var v,R,d,h,A;return a()().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return oe.next=2,(0,L.aF)({md5:(v=f==null?void 0:f.info.Id)!==null&&v!==void 0?v:"",copyName:(R=(d=Z.current)===null||d===void 0?void 0:d.getFieldValue("copyName"))!==null&&R!==void 0?R:"",enableRandomPort:(h=(A=Z.current)===null||A===void 0?void 0:A.getFieldValue("enableRandomPort"))!==null&&h!==void 0?h:!1});case 2:return oe.abrupt("return",oe.sent);case 3:case"end":return oe.stop()}},N)})),onSuccess:function(v){var R;(R=Z.current)===null||R===void 0||R.resetFields()},children:r.format("copyButton")}),f&&(0,e.jsx)(Nt,{detail:f.info,onFinish:function(){p()}},"rollback"),f&&(0,e.jsx)(z.Z,{action:g()(a()().mark(function N(){var v,R,d,h,A,O;return a()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return(v=T.current)===null||v===void 0||v.show(),q.abrupt("return",Promise.all([(0,Qe.Ct)({md5:(R=f==null?void 0:f.info.Id)!==null&&R!==void 0?R:"",deleteImage:(d=(h=I.current)===null||h===void 0?void 0:h.getFieldValue("deleteImage"))!==null&&d!==void 0?d:!1,deleteVolume:(A=(O=I.current)===null||O===void 0?void 0:O.getFieldValue("deleteVolume"))!==null&&A!==void 0?A:!1}),(0,nt.rn)({name:f==null?void 0:f.info.Name})]).finally(function(){var ee;(ee=T.current)===null||ee===void 0||ee.destroy()}));case 2:case"end":return q.stop()}},N)})),buttonProps:{danger:!0,type:"primary",icon:(0,e.jsx)(lt.Z,{})},confirmProps:{description:(0,e.jsxs)(M.Z,{style:{width:200},direction:"vertical",children:[(0,e.jsx)(K.Z.Text,{children:P.FD.format("confirm.title")}),(0,e.jsxs)(U.A,{formRef:I,layout:"inline",submitter:!1,children:[(0,e.jsx)(We.Z,{addonAfter:(0,e.jsx)(Ke.Z,{title:r.format("deleteConfirmTip"),children:(0,e.jsx)(st.Z,{})}),name:"deleteVolume",valuePropName:"checked",children:(0,e.jsx)(ze.Z,{children:r.format("deleteConfirmDeleteVolume")})}),(0,e.jsx)(We.Z,{name:"deleteImage",valuePropName:"checked",children:(0,e.jsx)(ze.Z,{children:r.format("deleteConfirmDeleteImage")})})]})]})},onSuccess:function(){p()},children:r.format("deleteButton")}),(0,e.jsx)(ce.Z,{type:"vertical"}),f&&(0,e.jsx)(qt,{containerInfo:f.info})]})]}),(0,e.jsx)(W.Z,{ghost:n.ghost,title:(0,e.jsx)(te.Z,{}),subTitle:r.format("titleManageExport"),children:(0,e.jsxs)(M.Z,{wrap:!0,children:[f&&(0,e.jsx)(Je.u,{access:"canSeeContainerBackup",children:(0,e.jsx)(wt,{container:f.info})}),(0,e.jsx)(ce.Z,{type:"vertical"}),(0,e.jsx)(z.Z,{buttonProps:{icon:(0,e.jsx)(jt.Z,{})},confirmProps:{onOpenChange:function(v,R){var d;!((d=m.current)===null||d===void 0)&&d.resetFields&&m.current.resetFields()},description:(0,e.jsxs)(M.Z,{style:{width:500,marginTop:"10px",paddingRight:"10px"},direction:"vertical",size:20,children:[(0,e.jsx)(K.Z.Text,{children:r.format("exportConfirm")}),(0,e.jsx)(U.A,{layout:"horizontal",formRef:m,submitter:!1,children:(0,e.jsx)(We.Z,{valuePropName:"checked",name:"enableExportToPath",children:(0,e.jsx)(ze.Z,{children:r.format("exportEnableExportToPath")})},"enableExportToPath")})]})},action:function(){var v,R,d;return(0,L.LJ)({md5:(v=f==null?void 0:f.info.Id)!==null&&v!==void 0?v:"",enableExportToPath:(R=(d=m.current)===null||d===void 0?void 0:d.getFieldValue("enableExportToPath"))!==null&&R!==void 0?R:!1})},children:r.format("exportButton")}),(0,e.jsx)(z.Z,{buttonProps:{icon:(0,e.jsx)(ut,{})},confirmProps:{onOpenChange:function(v,R){var d;!((d=u.current)===null||d===void 0)&&d.resetFields&&u.current.resetFields()},title:r.format("commitConfirmTitle"),description:(0,e.jsx)(M.Z,{style:{width:400,marginTop:"10px",paddingRight:"10px"},direction:"vertical",children:(0,e.jsx)(U.A,{formRef:u,submitter:!1,children:(0,e.jsx)(We.Z,{name:"saveImageName",children:(0,e.jsx)(Ot.Z,{addonBefore:r.format("commitConfirmSaveImageName")})})})})},action:function(){var v,R,d;return(0,L.Re)({md5:(v=f==null?void 0:f.info.Id)!==null&&v!==void 0?v:"",name:(R=(d=u.current)===null||d===void 0?void 0:d.getFieldValue("saveImageName"))!==null&&R!==void 0?R:f==null?void 0:f.info.Name})},children:r.format("commitButton")})]})},"extend")]})}),nn=tn,an=t(65913);function rn(n){var y=new P.Uo("components.appDetail"),r=(0,o.useState)(),i=C()(r,2),j=i[0],T=i[1];return(0,o.useEffect)(function(){(0,tt.YU)({md5:n.data.Image}).then(function(p){T(p.data)})},[n.data]),(0,e.jsx)(W.Z,{ghost:n.ghost,title:(0,e.jsx)(se.Z,{}),subTitle:y.format("titleImage"),children:(0,e.jsxs)(E.Z,{styles:{label:{width:200}},column:1,bordered:!0,children:[(0,e.jsx)(E.Z.Item,{label:"Image Tag",children:(0,e.jsx)(K.Z.Text,{copyable:!0,children:n.data.Config.Image})}),(0,e.jsx)(E.Z.Item,{label:"Image",children:n.data.Image}),(0,e.jsx)(E.Z.Item,{label:"CMD",children:(j==null?void 0:j.info.Config.Cmd)&&(j==null?void 0:j.info.Config.Cmd.join(" "))}),(0,e.jsx)(E.Z.Item,{label:"ENTRYPOINT",children:j==null?void 0:j.info.Config.Entrypoint}),(0,e.jsx)(E.Z.Item,{label:"Labels",children:(0,e.jsx)(E.Z,{column:1,bordered:!0,children:(j==null?void 0:j.info.Config.Labels)&&Object.entries(j==null?void 0:j.info.Config.Labels).map(function(p){var s=C()(p,2),c=s[0],m=s[1];return(0,e.jsx)(E.Z.Item,{label:c,children:m},c)})})})]})})}var on=t(97857),Ye=t.n(on),ln=t(40666),sn=t(64789),un=t(97937),dn=t(66309),cn=t(86738),fn=t(90127);function mn(n){var y=(0,o.useState)(0),r=C()(y,2),i=r[0],j=r[1],T=(0,o.useState)(),p=C()(T,2),s=p[0],c=p[1],m=new P.Uo("components.appDetail"),I=(0,o.useState)(),u=C()(I,2),Z=u[0],b=u[1];return(0,o.useEffect)(function(){c([]),(0,nt.e1)().then(function(x){c(x.data.list)})},[i,n.data.info.Name]),(0,e.jsx)(W.Z,{ghost:!0,title:(0,e.jsx)(ln.Z,{}),subTitle:m.format("titleTag"),extra:(0,e.jsx)(fn.Z,{trigger:(0,e.jsx)(K.Z.Link,{children:(0,e.jsx)(sn.Z,{})}),containerDetail:n.data,onFinish:function(){j(i+1)}}),children:(0,e.jsx)(M.Z,{wrap:!0,children:s&&(s==null?void 0:s.filter(function(x){return x.item&&x.item.find(function(J){return J.name==n.data.info.Name})}).map(function(x,J){return(0,e.jsx)(dn.Z,{color:x.tagColor,closable:{closeIcon:(0,e.jsx)(cn.Z,{title:P.FD.format("confirm.title"),open:Z&&Z[J],onOpenChange:function($){b(Ye()(Ye()({},Z),{index:$}))},onConfirm:g()(a()().mark(function _(){return a()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,(0,nt.rn)({name:n.data.info.Name,tag:x.tag});case 2:j(i+1);case 3:case"end":return D.stop()}},_)})),children:(0,e.jsx)(un.Z,{})})},style:{height:35,display:"flex",borderRadius:20,justifyContent:"center",alignItems:"center"},onClose:g()(a()().mark(function _(){return a()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:b(Ye()(Ye()({},Z),{index:!0}));case 1:case"end":return D.stop()}},_)})),children:(0,e.jsx)("span",{style:{paddingLeft:10,paddingRight:3},children:x.tag})},J)}))})})}var vn=(0,o.forwardRef)(function(n,y){var r;(0,o.useImperativeHandle)(y,function(){return{show:function(_){return g()(a()().mark(function $(){return a()().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return Z(!0),ue.next=3,b(_);case 3:case"end":return ue.stop()}},$)}))()}}});var i=new P.Uo("components.appDetail"),j=(0,o.useRef)(),T=(0,o.useState)(),p=C()(T,2),s=p[0],c=p[1],m=(0,o.useState)(!1),I=C()(m,2),u=I[0],Z=I[1];function b(J){return x.apply(this,arguments)}function x(){return x=g()(a()().mark(function J(_){var $,D,ue;return a()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return($=j.current)===null||$===void 0||$.show(),f.next=3,(0,L.jV)({md5:_}).finally(function(){var re;(re=j.current)===null||re===void 0||re.destroy()});case 3:D=f.sent,D.data&&(((ue=D.data.info.HostConfig)===null||ue===void 0?void 0:ue.NetworkMode)=="host"&&D.data.info.Config.ExposedPorts&&Object.keys(D.data.info.Config.ExposedPorts).map(function(re){D.data.info.NetworkSettings.Ports||(D.data.info.NetworkSettings.Ports={}),D.data.info.NetworkSettings.Ports[re]=[{HostIp:"0.0.0.0",HostPort:re.substring(0,re.indexOf("/"))}]}),c(D.data));case 5:case"end":return f.stop()}},J)})),x.apply(this,arguments)}return(0,e.jsx)(X.Provider,{value:{loadingRef:j,reload:function(){return g()(a()().mark(function _(){return a()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(!s){D.next=3;break}return D.next=3,b(s.info.Id);case 3:case"end":return D.stop()}},_)}))()},close:function(){return g()(a()().mark(function _(){return a()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:Z(!1),n.onFinish&&n.onFinish();case 2:case"end":return D.stop()}},_)}))()},redirect:function(_){return g()(a()().mark(function $(){return a()().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return ue.next=2,b(_);case 2:case"end":return ue.stop()}},$)}))()}},children:(0,e.jsx)(we.Z,{title:i.format("drawerTitle",{name:(0,le.fi)((r=s==null?void 0:s.info.Name)!==null&&r!==void 0?r:"","/")}),open:u,onClose:function(){Z(!1),n.onFinish&&n.onFinish()},width:F.R_,children:(0,e.jsx)(an.Z,{ref:j,children:(0,e.jsxs)(Fe.Z,{vertical:!0,gap:20,children:[s&&(0,e.jsx)(Je.u,{access:"canSeeContainerList",children:(0,e.jsx)(ht,{ghost:!0,data:s==null?void 0:s.info})}),s&&(0,e.jsx)(Je.u,{access:["canSeeContainerListManage","canSeeContainerListManageOp"],children:(0,e.jsx)(nn,{ghost:!0,data:s})}),s&&(0,e.jsx)(mn,{data:s}),s&&(0,e.jsx)(Ne,{data:s,ghost:!0}),(0,e.jsx)(l,{data:s==null?void 0:s.info,ghost:!0}),s&&(0,e.jsx)(rn,{data:s.info,ghost:!0}),(s==null?void 0:s.info.Config.Labels)&&(0,e.jsx)(W.Z,{title:(0,e.jsx)(se.Z,{}),ghost:!0,subTitle:i.format("titleLabel"),children:(0,e.jsx)(E.Z,{column:1,bordered:!0,children:s.info.Config.Labels&&Object.entries(s.info.Config.Labels).map(function(J){var _=C()(J,2),$=_[0],D=_[1];return(0,e.jsx)(E.Z.Item,{label:$,children:D},$)})})})]})})})})}),hn=vn},90127:function(Ue,pe,t){var je=t(15009),C=t.n(je),xe=t(99289),a=t.n(xe),de=t(5574),g=t.n(de),o=t(5251),ve=t(184),W=t(62370),U=t(5966),E=t(24739),M=t(64317),ce=t(52688),K=t(97462),Ce=t(40056),Oe=t(23345),S=t(67294),L=t(1699),Re=t(80821),be=t(2808),le=t(87662),ye=t(29453),w=t(3616),P=t(36146),e=t(85893),Ne=(0,S.forwardRef)(function(se,we){var Fe;(0,S.useImperativeHandle)(we,function(){return{edit:function(V){Pe(!0),De(V),k.current&&k.current.setFieldsValue({tag:[V.tag],tagColor:V.tagColor,enableShowGroup:V.enableShowGroup})}}});var k=(0,S.useRef)(),Te=(0,S.useState)(0),Ze=g()(Te,2),Ee=Ze[0],Ie=Ze[1],ae=(0,S.useState)([]),l=g()(ae,2),te=l[0],fe=l[1],me=(0,S.useState)(),ke=g()(me,2),Ae=ke[0],he=ke[1],H=(Fe=se.containerDetail)===null||Fe===void 0?void 0:Fe.info,_e=(0,S.useState)(!1),Y=g()(_e,2),z=Y[0],Pe=Y[1],ge=new P.Uo("components.appDetail");function De(G){k.current&&k.current.setFieldsValue({title:G.title,description:G.description,url:G.url,icon:G.icon,name:G.name})}return(0,S.useEffect)(function(){he([]),(0,ye.e1)().then(function(G){he(G.data.list)})},[Ee]),(0,S.useEffect)(function(){H&&(0,le.K3)().then(function(G){var V=[];H.NetworkSettings&&H.NetworkSettings.Ports&&Object.keys(H.NetworkSettings.Ports).map(function(B){H.NetworkSettings.Ports&&H.NetworkSettings.Ports[B]&&H.NetworkSettings.Ports[B].map(function(X){X.HostPort&&V.push("http://".concat(G.data.serverUrl,":").concat(X.HostPort))})}),fe(V)})},[se.containerDetail]),(0,e.jsxs)(ve.a,{drawerProps:{forceRender:!0,width:w.R_},open:z,onFinish:function(){var G=a()(C()().mark(function V(B){var X,ne,Q,F;return C()().wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:return Q="",B.tagColor&&B.tagColor.toHexString?B.tagColor.cleared||(Q=B.tagColor.toHexString()):Q=B.tagColor,F=(X=B.enableShowGroup)!==null&&X!==void 0?X:se.defaultEnableShowGroup,Le.next=5,(0,ye.A9)({enableShowGroup:F,tag:B.tag?B.tag[0]:"",tagColor:Q,name:(ne=H==null?void 0:H.Name)!==null&&ne!==void 0?ne:B.name,title:F?B.title:"",description:F?B.description:"",url:F?B.url:"",icon:F?B.icon:""});case 5:return Ie(Ee+1),se.onFinish&&se.onFinish({tag:B.tag,tagColor:B.tagColor,enableShowGroup:F}),Le.abrupt("return",!0);case 8:case"end":return Le.stop()}},V)}));return function(V){return G.apply(this,arguments)}}(),formRef:k,title:ge.format("tagCreateTitle"),trigger:se.trigger,onOpenChange:function(V){var B;Pe(V),!V&&(!((B=k.current)===null||B===void 0)&&B.resetFields)&&k.current.resetFields()},children:[se.defaultEnableShowGroup&&(0,e.jsx)(W.Z,{children:(0,e.jsx)(Ce.Z,{message:new P.Uo("system.home.tag").format("emptyTip")})}),(0,e.jsx)(U.Z,{name:"name",hidden:!0}),(0,e.jsxs)(E.UW,{children:[(0,e.jsx)(M.Z,{width:"lg",label:ge.format("tagFormTag"),layout:"vertical",required:!0,rules:[{required:!0}],onChange:function(V){var B=Ae&&Ae.find(function(Ge){return V&&V.length>=1&&Ge.tag==V[0]});if(B){var X,ne,Q,F=B.item.find(function(Ge){return Ge.name==(H==null?void 0:H.Name)});(X=k.current)===null||X===void 0||X.setFieldsValue({tagColor:B.tagColor,enableShowGroup:B.enableShowGroup}),F&&F.name&&De({name:(ne=H==null?void 0:H.Name)!==null&&ne!==void 0?ne:"",title:F?F.title:(0,o.fi)((Q=H==null?void 0:H.Name)!==null&&Q!==void 0?Q:"","/"),description:F&&F.description,url:F&&F.url,icon:F&&F.icon})}if(!V||V.length==0){var Se,Le=(Se=k.current)===null||Se===void 0?void 0:Se.getFieldValue("url");if(!Le||Le==""){var Be;!((Be=k.current)===null||Be===void 0)&&Be.resetFields&&k.current.resetFields()}}},options:Ae&&Ae.map(function(G){return{lable:G.tag,value:G.tag}}),name:"tag",mode:"tags",fieldProps:{maxCount:1},placeholder:ge.format("tagFormTagEmpty")},"tagSelect".concat(Ee)),!se.defaultEnableShowGroup&&(0,e.jsx)(be.Z,{label:ge.format("tagFormTagColor"),name:"tagColor"})]}),!se.defaultEnableShowGroup&&(0,e.jsx)(L.u,{access:"canSeeEnableCe",showProRibbonTips:!0,children:function(V){var B=V.canSeeEnableCe;return(0,e.jsx)(ce.Z,{label:ge.format("tagFormEnableShowGroup"),name:"enableShowGroup",disabled:B,fieldProps:{onChange:function(ne){if(ne){var Q,F;De({name:(Q=H==null?void 0:H.Name)!==null&&Q!==void 0?Q:"",title:(0,o.fi)((F=H==null?void 0:H.Name)!==null&&F!==void 0?F:"","/")})}}}})}}),(0,e.jsx)(K.Z,{name:["enableShowGroup"],children:function(V){var B=V.enableShowGroup;return(B||se.defaultEnableShowGroup)&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(Oe.Z.Compact,{children:[se.containerDetail&&(0,e.jsx)(M.Z,{label:ge.format("tagFormSelectUrl"),width:"sm",name:"selectUrl",options:te.map(function(X){return{label:X,value:X}}),onChange:function(ne){var Q;!((Q=k.current)===null||Q===void 0)&&Q.setFieldValue&&k.current.setFieldValue("url",ne)}}),(0,e.jsx)(U.Z,{label:ge.format("tagFormUrl"),name:"url",width:"md"}),(0,e.jsx)(W.Z,{label:" ",children:(0,e.jsx)(Re.Z,{action:function(){var ne;return(0,ye.R3)({url:(ne=k.current)===null||ne===void 0?void 0:ne.getFieldValue("url")})},onSuccess:function(ne){var Q,F,Se;(Q=k.current)===null||Q===void 0||Q.setFieldValue("icon",ne.data.icon),(F=k.current)===null||F===void 0||F.setFieldValue("title",ne.data.title),(Se=k.current)===null||Se===void 0||Se.setFieldValue("description",ne.data.description)},children:ge.format("tagGetUrlDetailButton")})})]}),(0,e.jsxs)(E.UW,{children:[(0,e.jsx)(U.Z,{label:ge.format("tagFormTitle"),name:"title"}),(0,e.jsx)(U.Z,{label:ge.format("tagFormDescription"),name:"description"})]}),(0,e.jsx)(E.UW,{children:(0,e.jsx)(U.Z,{width:"lg",placeholder:ge.format("tagFormIconEmpty"),label:ge.format("tagFormIcon"),name:"icon"})})]})}})]})});pe.Z=Ne},36588:function(Ue,pe,t){t.d(pe,{Z:function(){return se}});var je=t(15009),C=t.n(je),xe=t(99289),a=t.n(xe),de=t(5574),g=t.n(de),o=t(80821),ve=t(3616),W=t(14946),U=t(36146),E=t(82061),M=t(184),ce=t(38345),K=t(60940),Ce=t(23345),Oe=t(25593),S=t(96074),L=t(26412),Re=t(67294),be=t(92067),le=t(83622),ye=t(85265),w=t(85893);function P(we){var Fe=(0,Re.useState)(!1),k=g()(Fe,2),Te=k[0],Ze=k[1],Ee=new U.Uo("docker");return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(le.ZP,{type:"primary",onClick:function(){Ze(!0)},children:Ee.format("networkJoinContainer")}),(0,w.jsx)(ye.Z,{open:Te,onClose:function(){Ze(!1)},width:ve.R_,title:Ee.format("networkJoinContainer"),children:(0,w.jsx)(be.Z,{onSelect:function(){var Ie=a()(C()().mark(function ae(l){return C()().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return fe.next=2,(0,W.HY)({name:we.detail.Name,containerName:l.Name,ipV4:""});case 2:Ze(!1),we.onFinish&&we.onFinish(we.detail);case 4:case"end":return fe.stop()}},ae)}));return function(ae){return Ie.apply(this,arguments)}}()})})]})}var e=t(13822),Ne=(0,Re.forwardRef)(function(we,Fe){(0,Re.useImperativeHandle)(Fe,function(){return{show:H}});var k=(0,Re.useState)(!1),Te=g()(k,2),Ze=Te[0],Ee=Te[1],Ie=(0,Re.useState)(),ae=g()(Ie,2),l=ae[0],te=ae[1],fe=(0,Re.useState)(),me=g()(fe,2),ke=me[0],Ae=me[1],he=new U.Uo("components.network");function H(Y){return _e.apply(this,arguments)}function _e(){return _e=a()(C()().mark(function Y(z){var Pe,ge,De,G,V,B,X,ne;return C()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,(0,W.IS)({name:z});case 2:if(Pe=F.sent,!Pe.data.info.Containers){F.next=19;break}ge=[],De=0,G=Object.entries(Pe.data.info.Containers);case 6:if(!(De<G.length)){F.next=16;break}return V=g()(G[De],2),B=V[0],X=V[1],F.next=10,(0,e.jV)({md5:X.Name});case 10:ne=F.sent,ne.data.info.NetworkSettings.Networks[z]&&(X.Alias=ne.data.info.NetworkSettings.Networks[z].Aliases),ge.push(X);case 13:De++,F.next=6;break;case 16:Ae(ge),F.next=20;break;case 19:Ae([]);case 20:te(Pe.data.info),Ee(!0);case 22:case"end":return F.stop()}},Y)})),_e.apply(this,arguments)}return(0,w.jsx)(M.a,{drawerProps:{width:ve.R_},title:he.format("detailTitle"),open:Ze,onOpenChange:function(z){Ee(z)},submitter:!1,children:(0,w.jsxs)(ce.Z,{ghost:!0,direction:"column",gutter:[10,0],children:[(0,w.jsx)(ce.Z,{title:he.format("detailContainer"),ghost:!0,extra:l&&(0,w.jsx)(P,{detail:l,onFinish:function(z){H(z.Name)}}),children:(0,w.jsx)(K.Z,{rowKey:"Name",columns:[{title:U.FD.format("listContainerName"),dataIndex:"Name"},{title:U.FD.format("listAlias"),dataIndex:"Alias",render:function(z,Pe,ge){return(0,w.jsx)(Ce.Z,{direction:"vertical",children:Pe.Alias&&Pe.Alias.map(function(De,G){return(0,w.jsx)(Oe.Z.Text,{copyable:!0,keyboard:!0,children:De},G)})})}},{title:"IPV4",dataIndex:"IPv4Address"},{title:"IPV6",dataIndex:"IPv6Address"},{title:"MacAddress",dataIndex:"MacAddress"},{title:U.FD.format("listManage"),render:function(z,Pe,ge){return(0,w.jsx)(Ce.Z,{split:(0,w.jsx)(S.Z,{type:"vertical"}),children:(0,w.jsx)(o.Z,{buttonProps:{type:"text",icon:(0,w.jsx)(E.Z,{}),danger:!0},confirmProps:{showCommonConfirm:!0},action:function(){var G,V;return(0,W.t9)({name:(G=l==null?void 0:l.Id)!==null&&G!==void 0?G:"",containerName:(V=Pe.Name)!==null&&V!==void 0?V:""})},tips:U.FD.format("listManageExit"),onSuccess:function(){l&&H(l.Name)}},"delete")})}}],dataSource:ke,pagination:!1})}),(0,w.jsx)(ce.Z,{ghost:!0,title:he.format("detailBasic"),children:(0,w.jsxs)(L.Z,{styles:{label:{width:150}},column:2,bordered:!0,children:[(0,w.jsx)(L.Z.Item,{label:he.format("detailName"),children:l==null?void 0:l.Name}),(0,w.jsx)(L.Z.Item,{label:"Id",children:l==null?void 0:l.Id.slice(0,12)}),(0,w.jsx)(L.Z.Item,{label:"Driver",children:l==null?void 0:l.Driver}),(0,w.jsx)(L.Z.Item,{label:"Scope",children:l==null?void 0:l.Scope}),(0,w.jsx)(L.Z.Item,{label:"Attachable",children:he.yesNo(l==null?void 0:l.Attachable)}),(0,w.jsx)(L.Z.Item,{label:"Internal",children:he.yesNo(l==null?void 0:l.Internal)}),(l==null?void 0:l.IPAM.Config)&&(l==null?void 0:l.IPAM.Config.map(function(Y,z){return(0,w.jsx)(L.Z.Item,{label:Y.Gateway&&Y.Gateway.includes(":")?"IPV6":"IPV4",children:(0,w.jsxs)(L.Z,{styles:{label:{width:150}},column:1,bordered:!0,children:[(0,w.jsx)(L.Z.Item,{label:"Subnet",children:Y.Subnet}),(0,w.jsx)(L.Z.Item,{label:"Gateway",children:Y.Gateway}),(0,w.jsx)(L.Z.Item,{label:"IP Range ",children:Y.IPRange}),(0,w.jsx)(L.Z.Item,{label:"Excluded IPs",children:Y.AuxiliaryAddresses&&Object.keys(Y.AuxiliaryAddresses).map(function(Pe){return Y.AuxiliaryAddresses[Pe]+" ,"})})]})},z)})),(l==null?void 0:l.Options)&&Object.keys(l==null?void 0:l.Options).length>0&&(0,w.jsx)(L.Z.Item,{label:"Options",children:(0,w.jsx)(L.Z,{styles:{label:{width:150}},column:1,bordered:!0,children:Object.keys(l==null?void 0:l.Options).map(function(Y){return(0,w.jsx)(L.Z.Item,{label:Y,children:l.Options[Y]},Y)})})}),(l==null?void 0:l.Labels)&&Object.keys(l==null?void 0:l.Labels).length>0&&(0,w.jsx)(L.Z.Item,{label:"Lables",children:(0,w.jsx)(L.Z,{styles:{label:{width:150}},column:1,bordered:!0,children:Object.keys(l==null?void 0:l.Labels).map(function(Y){return(0,w.jsx)(L.Z.Item,{label:Y,children:l.Labels[Y]},Y)})})})]})})]})})}),se=Ne},2808:function(Ue,pe,t){t.d(pe,{Z:function(){return o}});var je=t(97857),C=t.n(je),xe=t(62370),a=t(51663),de=t(67294),g=t(85893);function o(ve){return(0,g.jsx)(xe.Z,C()(C()({},ve),{},{children:(0,g.jsx)(a.Z,{showText:function(U){return U.toHexString()},allowClear:!0,presets:[{label:"Color",colors:["#1677ff","#722ed1","#13c2c2","#52c41a","#eb2f96","#f5222d","#fa8c16","#fadb14","#fa541c","#2f54eb","#faad14","#a0d911","#000000","#5cdbd3","#b37feb","#b7eb8f","#61affe","#9254de","#36cfc9","#ff9c6e","#ff6f00","#ffc069","#28a745","#6610f2","#6f42c1","#007bff","#17a2b8","#20c997","#00cccc","#ff6666"]}]})}))}},65913:function(Ue,pe,t){var je=t(5574),C=t.n(je),xe=t(74330),a=t(67294),de=t(85893),g=(0,a.forwardRef)(function(o,ve){(0,a.useImperativeHandle)(ve,function(){return{show:function(){M(!0)},destroy:function(){M(!1)}}});var W=(0,a.useState)(!1),U=C()(W,2),E=U[0],M=U[1];return(0,de.jsx)(xe.Z,{spinning:E,size:"default",children:o.children})});pe.Z=g},29453:function(Ue,pe,t){t.d(pe,{A9:function(){return g},R3:function(){return M},e1:function(){return ve},rn:function(){return U}});var je=t(15009),C=t.n(je),xe=t(99289),a=t.n(xe),de=t(63713);function g(K){return o.apply(this,arguments)}function o(){return o=a()(C()().mark(function K(Ce){return C()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,(0,de.request)("/dpanel/api/common/tag/create",{method:"POST",data:Ce});case 2:return S.abrupt("return",S.sent);case 3:case"end":return S.stop()}},K)})),o.apply(this,arguments)}function ve(K){return W.apply(this,arguments)}function W(){return W=a()(C()().mark(function K(Ce){return C()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,(0,de.request)("/dpanel/api/common/tag/get-list",{method:"POST",data:Ce});case 2:return S.abrupt("return",S.sent);case 3:case"end":return S.stop()}},K)})),W.apply(this,arguments)}function U(K){return E.apply(this,arguments)}function E(){return E=a()(C()().mark(function K(Ce){return C()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,(0,de.request)("/dpanel/api/common/tag/delete",{method:"POST",data:Ce});case 2:return S.abrupt("return",S.sent);case 3:case"end":return S.stop()}},K)})),E.apply(this,arguments)}function M(K){return ce.apply(this,arguments)}function ce(){return ce=a()(C()().mark(function K(Ce){return C()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,(0,de.request)("/dpanel/api/pro/tag/get-url-detail",{method:"POST",data:Ce});case 2:return S.abrupt("return",S.sent);case 3:case"end":return S.stop()}},K)})),ce.apply(this,arguments)}}}]);
