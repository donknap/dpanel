"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3905],{8287:function(We,Re,n){var Ze=n(5574),C=n.n(Ze),be=n(15009),a=n.n(be),ve=n(99289),_=n.n(ve),r=n(13822),ne=n(83622),V=n(85265),N=n(42075),U=n(83062),P=n(67294),se=n(81146),M=n(1883),I=n(58638),ge=n(62597),y=n(3616),p=n(82346),ae=n(36146),_e=n(85893),te=(0,P.forwardRef)(function(De,S){(0,P.useImperativeHandle)(S,function(){return{show:function(re){return _()(a()().mark(function o(){var je;return a()().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:return ce.next=2,(0,r.jV)({md5:re});case 2:je=ce.sent,je.data&&Le(je.data.info),pe(!0);case 5:case"end":return ce.stop()}},o)}))()}}});var s=(0,P.useState)(!1),e=C()(s,2),Ie=e[0],pe=e[1],Te=(0,P.useState)(),we=C()(Te,2),J=we[0],Le=we[1],b=(0,P.useRef)(),he=new ae.Uo("components.appDetail");return(0,_e.jsxs)(_e.Fragment,{children:[De.showTriggerButton&&(0,_e.jsx)(ne.ZP,{icon:(0,_e.jsx)(M.Z,{}),onClick:_()(a()().mark(function ue(){return a()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:Le(De.containerInfo),pe(!0);case 2:case"end":return o.stop()}},ue)})),children:ae.FD.format("listManageLog")},"log"),(0,_e.jsx)(V.Z,{title:he.format("titleLog"),open:Ie,forceRender:!0,onClose:function(){pe(!1)},afterOpenChange:function(re){if(re)setTimeout(function(){var je,oe;(je=b.current)===null||je===void 0||je.start(),(oe=b.current)===null||oe===void 0||oe.fit()},1e3);else{var o;(o=b.current)===null||o===void 0||o.close()}},width:y.FK,extra:(0,_e.jsx)(N.Z,{children:(0,_e.jsx)(p.Link,{to:"/container/log/".concat(J==null?void 0:J.Name),target:"_blank",onClick:function(){var re;(re=b.current)===null||re===void 0||re.close(),pe(!1)},children:(0,_e.jsx)(U.Z,{title:ae.FD.format("listManageOpenNewWindow"),children:(0,_e.jsx)(I.Z,{})})})}),children:J&&Ie&&(0,_e.jsx)(se.Z,{ref:b,showInDrawer:!0,id:"container:log:".concat(J==null?void 0:J.Id),request:function(){var ue=_()(a()().mark(function re(o){var je;return a()().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:return ce.next=2,(0,ge.Tb)({id:(je=J.Id)!==null&&je!==void 0?je:"",lineTotal:o.lineTotal,download:o.download,showTime:o.showTime});case 2:case"end":return ce.stop()}},re)}));return function(re){return ue.apply(this,arguments)}}(),download:function(){var ue=_()(a()().mark(function re(o){var je,oe,ce,Me;return a()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,(0,ge.XH)({id:(je=J.Id)!==null&&je!==void 0?je:"",lineTotal:o.lineTotal,showTime:o.showTime});case 2:return ce=q.sent,q.next=5,(0,r.jV)({md5:(oe=J.Id)!==null&&oe!==void 0?oe:""});case 5:return Me=q.sent,q.abrupt("return",{data:new Blob([ce],{type:"text/plain"}),name:Me.data.info.Name.replaceAll("/","")+"_"+new Date().toLocaleDateString()+".log"});case 7:case"end":return q.stop()}},re)}));return function(re){return ue.apply(this,arguments)}}()})})]})});Re.Z=te},3905:function(We,Re,n){n.d(Re,{Z:function(){return ot}});var Ze=n(5574),C=n.n(Ze),be=n(15009),a=n.n(be),ve=n(99289),_=n.n(ve),r=n(67294),ne=n(45605),V=n(38345),N=n(97269),U=n(26412),P=n(42075),se=n(96074),M=n(25593),I=n(2487),ge=n(76428),y=n(44771),p=n(13822),ae=n(24963),_e=n(37413),te=n(5251),De=n(82346),S=n(87662),s=n(36146),e=n(85893);function Ie(t){var Z,i,l,j,$,x,d,m,v,D,u,O=new s.Uo("components.appDetail"),R=(0,r.useState)(""),E=C()(R,2),le=E[0],B=E[1],k=(0,De.useAccess)(),A=(0,r.useContext)(ae.Z),ye=A.message,Oe=(0,r.useRef)(),f=[],Ee=[],Ue=[],Ve=(0,r.useState)(""),Y=C()(Ve,2),h=Y[0],T=Y[1];return(0,r.useEffect)(function(){t.data&&((0,S.K3)().then(function(c){var g;T((g=c.data.serverUrl)!==null&&g!==void 0?g:"")}),B(t.data.info.Name))},[t.data]),(0,r.useEffect)(function(){var c,g,H;(c=Oe.current)===null||c===void 0||c.setFieldValue("restart",{name:(g=t.data.info.HostConfig)===null||g===void 0?void 0:g.RestartPolicy.Name,maxAccept:(H=t.data.info.HostConfig)===null||H===void 0?void 0:H.RestartPolicy.MaximumRetryCount})},[Oe.current,t.data]),t.data&&t.data.domain&&t.data.domain.map(function(c){Ue.push(c.setting.enableSSL?"https://"+c.serverName:"http://"+c.serverName)}),t.data.info.NetworkSettings.Ports&&Object.entries(t.data.info.NetworkSettings.Ports).forEach(function(c){var g=C()(c,2),H=g[0],L=g[1];if(L){var Pe=H.split("/"),me=C()(Pe,2),fe=me[0],$e=me[1];L.forEach(function(tn){tn.HostPort?f.push({PrivatePort:fe,Type:$e,IP:tn.HostIp,PublicPort:tn.HostPort}):Ee.push({PrivatePort:fe,Type:$e,IP:"",PublicPort:""})})}}),(0,e.jsxs)(e.Fragment,{children:[t.data&&t.data.info.State.Running&&(0,e.jsx)(_e.Z,{publicPort:f,privatePort:Ee,domain:Ue,serverIp:h,showInDetail:!0,ghost:t.ghost,layout:"inline"}),(0,e.jsx)(V.Z,{title:(0,e.jsx)(ne.Z,{}),subTitle:O.format("titleBasic"),ghost:t.ghost,children:(0,e.jsxs)(U.Z,{column:1,bordered:!0,children:[(0,e.jsx)(U.Z.Item,{label:"Hostname",children:(0,e.jsx)(P.Z,{split:(0,e.jsx)(se.Z,{type:"vertical"}),children:(0,e.jsx)(ge.Z,{title:(Z=t.data.info)===null||Z===void 0?void 0:Z.Config.Hostname})})}),(0,e.jsx)(U.Z.Item,{label:s.FD.format("listName"),children:(0,e.jsxs)(P.Z,{split:(0,e.jsx)(se.Z,{type:"vertical"}),children:[(0,e.jsx)(ge.Z,{title:(i=t.data.info)===null||i===void 0?void 0:i.Id.substring(0,12)}),(0,e.jsx)(M.Z.Text,{copyable:!0,editable:{tooltip:s.FD.format("listManageEdit"),onChange:function(){var c=_()(a()().mark(function H(L){var Pe;return a()().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:if((Pe=t.data.info)!==null&&Pe!==void 0&&Pe.Id){fe.next=2;break}return fe.abrupt("return");case 2:return fe.next=4,(0,p.eE)({md5:t.data.info.Id,name:L});case 4:B(L),ye.success(s.FD.format("finish"));case 6:case"end":return fe.stop()}},H)}));function g(H){return c.apply(this,arguments)}return g}()},children:(0,te.fi)(le,"/")})]})}),(0,e.jsx)(U.Z.Item,{label:s.FD.format("listNetwork"),children:((l=t.data.info)===null||l===void 0?void 0:l.State.Running)&&(0,e.jsxs)(U.Z,{column:1,bordered:!0,children:[t.data.info.NetworkSettings.Networks&&Object.keys(t.data.info.NetworkSettings.Networks).map(function(c,g){var H,L,Pe;return(0,e.jsx)(U.Z.Item,{label:c,children:c=="host"?s.FD.format("listNetworkUseHost"):(0,e.jsxs)(P.Z,{direction:"vertical",children:[(0,e.jsx)(ge.Z,{title:(H=t.data.info)===null||H===void 0?void 0:H.NetworkSettings.Networks[c].IPAddress}),(L=t.data.info)===null||L===void 0?void 0:L.NetworkSettings.Networks[c].Gateway,(Pe=t.data.info)===null||Pe===void 0?void 0:Pe.NetworkSettings.Networks[c].MacAddress]})},g)}),((j=t.data.info.HostConfig)===null||j===void 0?void 0:j.ExtraHosts)&&(0,e.jsx)(U.Z.Item,{label:s.FD.format("listNetworkUseHost"),children:(0,e.jsx)(P.Z,{direction:"vertical",children:t.data.info.HostConfig.ExtraHosts.map(function(c,g){if(c.indexOf(":")>-1){var H=c.split(":");return"".concat(H[0]," - ").concat(H.slice(1).join(":"))}})})},"host")]})}),(0,e.jsx)(U.Z.Item,{label:s.FD.format("listRunTime"),children:O.format("runTimeValue",{create:new Date(($=(x=t.data.info)===null||x===void 0?void 0:x.Created)!==null&&$!==void 0?$:"").toLocaleString(),upgrade:new Date((d=(m=t.data.info)===null||m===void 0?void 0:m.State.StartedAt)!==null&&d!==void 0?d:"").toLocaleString()})}),k.canSeeContainerListManage&&(0,e.jsx)(U.Z.Item,{label:s.FD.format("listRestartPolicy"),children:(0,e.jsx)(N.A,{name:"container-restart",submitter:!1,onValuesChange:function(){var c=_()(a()().mark(function g(H,L){var Pe,me;return a()().wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:if((Pe=t.data.info)!==null&&Pe!==void 0&&Pe.Id){$e.next=2;break}return $e.abrupt("return");case 2:return $e.next=4,(0,p.eE)({md5:t.data.info.Id,restart:L.restart});case 4:return me=$e.sent,ye.success(s.FD.format("finish")),$e.abrupt("return");case 7:case"end":return $e.stop()}},g)}));return function(g,H){return c.apply(this,arguments)}}(),layout:"inline",formRef:Oe,children:(0,e.jsx)(y.Z,{ghost:!0,defaultValue:(v=t.data.info)===null||v===void 0||(v=v.HostConfig)===null||v===void 0?void 0:v.RestartPolicy.Name})})}),(0,e.jsx)(U.Z.Item,{label:s.FD.format("listEnv"),children:(0,e.jsx)(I.Z,{dataSource:(D=(u=t.data.info)===null||u===void 0?void 0:u.Config.Env)!==null&&D!==void 0?D:[],renderItem:function(g){var H=g.split("=");return(0,e.jsxs)(I.Z.Item,{children:[(0,e.jsx)(M.Z.Text,{code:!0,children:H[0]})," = ",(0,e.jsx)(M.Z.Text,{copyable:!0,children:H.slice(1).join("=")})]})}})})]})})]})}var pe=n(60433),Te=n(85265),we=n(86250),J=n(31574);function Le(t){var Z,i=new s.Uo("components.appDetail");return t.data&&t.data.Mounts&&t.data.Mounts.length>0&&(0,e.jsx)(V.Z,{ghost:t.ghost,title:(0,e.jsx)(J.Z,{}),subTitle:i.format("titleVolume"),children:(0,e.jsx)(U.Z,{column:1,bordered:!0,children:(Z=t.data)===null||Z===void 0?void 0:Z.Mounts.map(function(l,j){return(0,e.jsx)(U.Z.Item,{styles:{label:{width:"50%",wordBreak:"break-word"},content:{width:"50%",wordBreak:"break-word"}},label:l.Type=="volume"?l.Name:l.Source,children:l.Destination},j)})})})}var b=n(43425),he=n(74842),ue=n(33160),re=n(87784),o=n(30159),je=n(89035),oe=n(95591),ce=n(83622),Me=n(94359),ie=n(80821),q=n(99922),ee=n(96486),Ae=n.n(ee),w=n(29463),G=n(8287),z=(0,r.createContext)({}),Q=z,Se=n(19632),F=n.n(Se),X=n(3616),K=n(12122),xe=n(60940),de=n(27619);function Ce(t){return W.apply(this,arguments)}function W(){return W=_()(a()().mark(function t(Z){return a()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,De.request)("/dpanel/api/app/container/get-stat-info",{method:"POST",data:Z}));case 1:case"end":return l.stop()}},t)})),W.apply(this,arguments)}function Be(t){return Fe.apply(this,arguments)}function Fe(){return Fe=_()(a()().mark(function t(Z){return a()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,De.request)("/dpanel/api/app/container/get-process-info",{method:"POST",data:Z}));case 1:case"end":return l.stop()}},t)})),Fe.apply(this,arguments)}var ke={total:0,memory:{usage:[{name:"use",data:[]},{name:"all",show:!1,data:[]}],source:{usage:0,limit:0}},cpu:{usage:[{name:"use",data:[]}],source:{usage:0,limit:0}},network:{usage:[{name:"rx",data:[]},{name:"tx",data:[]}],source:{usageIn:0,usageOut:0}},io:{usage:[{name:"read",data:[]},{name:"write",data:[]}],source:{usageRead:0,usageWrite:0}}},He=function(Z,i){var l,j,$;switch(i.type){case"clear":return ke;case"update":var x=new Date().toLocaleTimeString(),d=JSON.parse(JSON.stringify(ke));return(l=i.payload)!==null&&l!==void 0&&l.memory&&(d.memory.usage=[{name:"use",data:[].concat(F()(Z.memory.usage[0].data.slice(-20)),[{date:x,value:Math.round(i.payload.memory.in)}])},{name:"all",show:!1,data:[].concat(F()(Z.memory.usage[1].data.slice(-20)),[{date:x,value:Math.round(i.payload.memory.out)}])}],d.memory.source={usage:i.payload.memory.in,limit:i.payload.memory.out},d.cpu.usage=[{name:"use",data:[].concat(F()(Z.cpu.usage[0].data.slice(-20)),[{date:x,value:i.payload.cpu.toFixed(2)}])}],d.cpu.source={usage:i.payload.cpu,limit:100}),(j=i.payload)!==null&&j!==void 0&&j.networkIO&&(d.network.source={usageIn:parseFloat(i.payload.networkIO.in.toFixed(2)),usageOut:parseFloat(i.payload.networkIO.out.toFixed(2))},d.network.usage=[{name:"rx",data:[].concat(F()(Z.network.usage[0].data.slice(-20)),[{date:x,value:i.payload.networkIO.out.toFixed(2)}])},{name:"tx",data:[].concat(F()(Z.network.usage[1].data.slice(-20)),[{date:x,value:i.payload.networkIO.in.toFixed(2)}])}]),($=i.payload)!==null&&$!==void 0&&$.blockIO&&(d.io.source={usageRead:parseFloat(i.payload.blockIO.out.toFixed(2)),usageWrite:parseFloat(i.payload.blockIO.in.toFixed(2))},d.io.usage=[{name:"read",data:[].concat(F()(Z.io.usage[0].data.slice(-20)),[{date:x,value:i.payload.blockIO.out.toFixed(2)}])},{name:"write",data:[].concat(F()(Z.io.usage[1].data.slice(-20)),[{date:x,value:i.payload.blockIO.in.toFixed(2)}])}]),d}},sn=(0,r.forwardRef)(function(t,Z){var i=(0,r.useState)(!1),l=C()(i,2),j=l[0],$=l[1],x=(0,r.useReducer)(He,ke),d=C()(x,2),m=d[0],v=d[1],D=(0,r.useState)(),u=C()(D,2),O=u[0],R=u[1],E=(0,r.useContext)(ae.Z),le=E.loading,B=(0,De.useModel)("subscriber"),k=new s.Uo("components.appDetail");(0,r.useImperativeHandle)(Z,function(){return{}});function A(Oe){return ye.apply(this,arguments)}function ye(){return ye=_()(a()().mark(function Oe(f){var Ee,Ue;return a()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return le.show(),Ce({id:f}),Y.next=4,Be({id:f});case 4:Ee=Y.sent,Ue={columns:[],data:[]},Ee.data.list.Titles.map(function(h){Ue.columns.push({title:h,label:h,dataIndex:h})}),Ee.data.list.Processes.map(function(h,T){Ue.data.push({UID:h[0],PID:h[1],PPID:h[2],C:h[3],STIME:h[4],TTY:h[5],TIME:h[6],CMD:h[7]})}),R(Ue),le.destroy();case 10:case"end":return Y.stop()}},Oe)})),ye.apply(this,arguments)}return(0,r.useEffect)(function(){return function(){B.progress.close("container:stat:"+t.containerInfo.Id),v({type:"clear",payload:{}})}},[t.containerInfo]),(0,e.jsxs)(e.Fragment,{children:[t.showTriggerButton&&(0,e.jsx)(ce.ZP,{onClick:_()(a()().mark(function Oe(){return a()().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:$(!0);case 1:case"end":return Ee.stop()}},Oe)})),icon:(0,e.jsx)(K.Z,{}),children:s.FD.format("listManageStat")},"log"),(0,e.jsxs)(Te.Z,{title:k.format("titleStat"),open:j,onClose:function(){$(!1)},afterOpenChange:function(f){f?setTimeout(function(){var Ee;!((Ee=t.containerInfo)===null||Ee===void 0)&&Ee.Name&&A(t.containerInfo.Id),B.addDataHandler("container:stat:".concat(t.containerInfo.Id),function(Ue){v({type:"update",payload:Ue.data})})},500):(B.progress.close("container:stat:"+t.containerInfo.Id),v({type:"clear"}))},width:X.R_,children:[(0,e.jsxs)(V.Z,{ghost:!0,direction:"row",wrap:!0,gutter:[20,20],children:[m.memory&&m.memory.source&&(0,e.jsx)(V.Z,{colSpan:12,title:(0,e.jsx)(K.Z,{}),subTitle:"Memory usage: ".concat((0,te.FI)(m.memory.source.usage)," / ").concat((0,te.FI)(m.memory.source.limit)),headerBordered:!0,bordered:!0,children:(0,e.jsx)(de.Z,{name:"container-memory",data:m.memory.usage,yLabelFormatter:function(f){return(0,te.FI)(parseFloat(f))},yValueFormatter:function(f){return(0,te.FI)(parseFloat(f))},yDomainMaxCallback:function(f){return f.min*2}})}),(0,e.jsx)(V.Z,{colSpan:12,title:(0,e.jsx)(K.Z,{}),subTitle:"Cpu usage: ".concat(m.cpu.source.usage.toFixed(2),"%"),headerBordered:!0,bordered:!0,children:(0,e.jsx)(de.Z,{name:"container-cpu",data:m.cpu.usage,yDomainMaxCallback:function(f){return f.min*100},yLabelFormatter:function(f){return"".concat(parseFloat(f).toFixed(2),"%")}})}),m.io&&m.io.source&&(0,e.jsx)(V.Z,{colSpan:12,title:(0,e.jsx)(K.Z,{}),subTitle:"I/O: ".concat((0,te.FI)(m.io.source.usageRead)," / ").concat((0,te.FI)(m.io.source.usageWrite)),headerBordered:!0,bordered:!0,children:(0,e.jsx)(de.Z,{name:"container-disk",data:m.io.usage,yDomainMaxCallback:function(f){return f.max*2},yLabelFormatter:function(f){return(0,te.FI)(parseFloat(f))}})}),m.network&&m.network.source&&(0,e.jsx)(V.Z,{colSpan:12,title:(0,e.jsx)(K.Z,{}),subTitle:"Network: ".concat((0,te.FI)(m.network.source.usageIn)," / ").concat((0,te.FI)(m.network.source.usageOut)),headerBordered:!0,bordered:!0,children:(0,e.jsx)(de.Z,{name:"container-network",data:m.network.usage,yDomainMaxCallback:function(f){return f.max*2},yLabelFormatter:function(f){return(0,te.FI)(parseFloat(f))}})})]}),(0,e.jsx)(V.Z,{title:(0,e.jsx)(pe.Z,{}),subTitle:"Progress",children:(0,e.jsx)(xe.Z,{scroll:{x:"max-content"},rowKey:"PID",columns:O==null?void 0:O.columns,dataSource:O==null?void 0:O.data,pagination:{pageSize:10}})})]})]})}),dn=sn,un=(0,r.forwardRef)(function(t,Z){(0,r.useImperativeHandle)(Z,function(){return{showConsole:d}});var i=new s.Uo("components.appDetail"),l=(0,r.useRef)(),j=(0,r.useContext)(Q),$=j.reload,x=j.loadingRef;function d(m){var v;(v=l.current)===null||v===void 0||v.show({url:"/console/container/".concat(t.data.Id),title:t.data.Name,workDir:m})}return console.log(t.data.State),(0,e.jsx)(V.Z,{title:(0,e.jsx)(b.Z,{}),ghost:t.ghost,subTitle:(0,e.jsxs)(P.Z,{children:[i.format("titleOp")," - ",function(m){if(m){var v=m.State.Status,D=m.State.Status;if(m.State.Health&&m.State.Health.Status=="unhealthy"){var u,O;v=m.State.Health.Status,D=(u=(O=Ae().last(m.State.Health.Log))===null||O===void 0?void 0:O.Output)!==null&&u!==void 0?u:v}return(0,e.jsx)(Me.Z,{status:"container.".concat(v),tip:D})}}(t.data)]}),children:(0,e.jsxs)(P.Z,{wrap:!0,children:[t.data&&!t.data.State.Running&&(0,e.jsx)(ie.Z,{buttonProps:{icon:(0,e.jsx)(he.Z,{})},action:_()(a()().mark(function m(){var v,D,u;return a()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return(v=x.current)===null||v===void 0||v.show(),R.abrupt("return",(0,p.IW)({md5:(D=(u=t.data)===null||u===void 0?void 0:u.Id)!==null&&D!==void 0?D:"",operate:"start"}).finally(function(){var E;(E=x.current)===null||E===void 0||E.destroy()}));case 2:case"end":return R.stop()}},m)})),onSuccess:function(){return $()},children:s.FD.format("listManageStart")}),t.data&&t.data.State.Running&&(0,e.jsx)(ie.Z,{buttonProps:{icon:(0,e.jsx)(ue.Z,{})},action:_()(a()().mark(function m(){var v,D,u;return a()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return(v=x.current)===null||v===void 0||v.show(),R.abrupt("return",(0,p.IW)({md5:(D=(u=t.data)===null||u===void 0?void 0:u.Id)!==null&&D!==void 0?D:"",operate:"restart"}).finally(function(){var E;(E=x.current)===null||E===void 0||E.destroy()}));case 2:case"end":return R.stop()}},m)})),onSuccess:function(){return $()},children:s.FD.format("listManageRestart")}),t.data&&t.data.State.Running&&(0,e.jsx)(ie.Z,{action:_()(a()().mark(function m(){var v,D,u;return a()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return(v=x.current)===null||v===void 0||v.show(),R.abrupt("return",(0,p.IW)({md5:(D=(u=t.data)===null||u===void 0?void 0:u.Id)!==null&&D!==void 0?D:"",operate:"stop"}).finally(function(){var E;(E=x.current)===null||E===void 0||E.destroy()}));case 2:case"end":return R.stop()}},m)})),buttonProps:{danger:!0,icon:(0,e.jsx)(re.Z,{})},onSuccess:function(){return $()},children:s.FD.format("listManageStop")}),t.data&&t.data.State.Running&&!t.data.State.Paused&&(0,e.jsx)(ie.Z,{action:_()(a()().mark(function m(){var v,D,u;return a()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return(v=x.current)===null||v===void 0||v.show(),R.abrupt("return",(0,p.IW)({md5:(D=(u=t.data)===null||u===void 0?void 0:u.Id)!==null&&D!==void 0?D:"",operate:"pause"}).finally(function(){var E;(E=x.current)===null||E===void 0||E.destroy()}));case 2:case"end":return R.stop()}},m)})),onSuccess:function(){return $()},buttonProps:{icon:(0,e.jsx)(o.Z,{})},children:s.FD.format("listManagePause")}),t.data&&t.data.State.Paused&&(0,e.jsx)(ie.Z,{action:_()(a()().mark(function m(){var v,D,u;return a()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return(v=x.current)===null||v===void 0||v.show(),R.abrupt("return",(0,p.IW)({md5:(D=(u=t.data)===null||u===void 0?void 0:u.Id)!==null&&D!==void 0?D:"",operate:"unpause"}).finally(function(){var E;(E=x.current)===null||E===void 0||E.destroy()}));case 2:case"end":return R.stop()}},m)})),onSuccess:function(){return $()},buttonProps:{icon:(0,e.jsx)(he.Z,{})},children:s.FD.format("listManageUnpause")}),t.data&&t.data.State.Running&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(se.Z,{type:"vertical"}),(0,e.jsx)(q.Z,{showFileExplorer:!0,ref:l}),(0,e.jsx)(ce.ZP,{type:"primary",onClick:function(){t.data&&d(t.data.Config.WorkingDir)},icon:(0,e.jsx)(je.Z,{}),children:s.FD.format("listManageConsole")}),(0,e.jsx)(w.Z,{showConsole:!0,type:"container",name:(0,te.fi)(t.data.Name,"/"),title:(0,te.fi)(t.data.Name,"/"),trigger:(0,e.jsx)(ce.ZP,{icon:(0,e.jsx)(oe.Z,{}),children:s.FD.format("listManageFilePath")})}),(0,e.jsx)(G.Z,{containerInfo:t.data,showTriggerButton:!0}),(0,e.jsx)(dn,{containerInfo:t.data,showTriggerButton:!0})]}),(0,e.jsx)(se.Z,{type:"vertical"}),(0,e.jsx)(ce.ZP,{type:"dashed",icon:(0,e.jsx)(ue.Z,{}),onClick:function(){$()},children:s.FD.format("listManageRefresh")})]})})}),cn=un,Ge=n(62597),mn=n(86548),fn=n(57132),an=n(82061),rn=n(25035),vn=n(58638),on=n(60219),Ne=n(62370),hn=n(5966),gn=n(52688),_n=n(85418),pn=n(40411),Ke=n(84567),Je=n(83062),jn=n(25278),xn=n(24739),ln=n(97462),En=n(70146);function Pn(t){var Z=(0,r.useRef)(),i=new s.Uo("components.appDetail");return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(ie.Z,{buttonProps:{icon:(0,e.jsx)(on.Z,{})},confirmProps:{onOpenChange:function(j,$){var x,d;!((x=Z.current)===null||x===void 0)&&x.resetFields&&((d=Z.current)===null||d===void 0||d.resetFields())},description:(0,e.jsxs)(P.Z,{style:{width:650,marginTop:"10px",paddingRight:"10px"},direction:"vertical",size:20,children:[(0,e.jsx)(M.Z.Text,{children:(0,e.jsx)("ul",{children:i.prefix("backupVolumeTipOption",4).map(function(l,j){return(0,e.jsxs)("li",{children:[l," ",j==3&&(0,e.jsx)(De.Link,{to:"/app/backup",children:s.Ob.format("container.backup")})]},j)})})}),(0,e.jsxs)(N.A,{layout:"horizontal",formRef:Z,submitter:!1,children:[(0,e.jsxs)(xn.UW,{children:[(0,e.jsx)(Ne.Z,{valuePropName:"checked",name:"enableSelectVolume",children:(0,e.jsx)(Ke.Z,{disabled:!t.container.Mounts||t.container.Mounts.length==0,children:i.format("backupVolumeEnableSelectVolume")})}),(0,e.jsx)(Ne.Z,{valuePropName:"checked",name:"enableImage",children:(0,e.jsx)(Ke.Z,{children:i.format("backupVolumeEnableImage")})}),(0,e.jsx)(ln.Z,{name:["enableImage"],children:function(j){var $=j.enableImage;if($)return(0,e.jsx)(Ne.Z,{valuePropName:"checked",name:"enableCommitImage",children:(0,e.jsx)(Ke.Z,{children:i.format("backupVolumeEnableCommitImage")})})}})]}),(0,e.jsx)(ln.Z,{name:["enableSelectVolume"],children:function(j){var $=j.enableSelectVolume;return $&&(0,e.jsx)(P.Z,{wrap:!0,children:t.container.Mounts&&t.container.Mounts.map(function(x,d){return(0,e.jsx)(Ne.Z,{valuePropName:"checked",name:["volume",x.Destination],children:(0,e.jsx)(Ke.Z,{children:x.Destination})},"volume-".concat(d))})})}})]})]})},action:_()(a()().mark(function l(){var j,$,x,d;return a()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,(0,En.yB)({id:t.container.Name,enableImage:(j=Z.current)===null||j===void 0?void 0:j.getFieldValue("enableImage"),volume:Object.keys(($=(x=Z.current)===null||x===void 0?void 0:x.getFieldValue("volume"))!==null&&$!==void 0?$:{}).filter(function(D){return D}),enableCommitImage:(d=Z.current)===null||d===void 0?void 0:d.getFieldValue("enableCommitImage")});case 2:case"end":return v.stop()}},l)})),children:i.format("backupVolumeButton")})})}var Dn=n(99861),Ye=n(73813),In=n(50888),Cn=n(16596),ze=n(1699),Xe=n(29453),On=n(71965);function yn(t){return qe.apply(this,arguments)}function qe(){return qe=_()(a()().mark(function t(Z){return a()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,De.request)("/dpanel/api/pro/container-rollback/get-list",{data:Z,method:"POST"});case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},t)})),qe.apply(this,arguments)}function Rn(t){return en.apply(this,arguments)}function en(){return en=_()(a()().mark(function t(Z){return a()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,De.request)("/dpanel/api/pro/container-rollback/restore",{data:Z,method:"POST"});case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},t)})),en.apply(this,arguments)}var Zn=n(86615),bn=n(40056),Mn=n(89240);function Tn(t){var Z=(0,De.useAccess)(),i=(0,r.useState)(),l=C()(i,2),j=l[0],$=l[1],x=(0,r.useRef)(),d=new s.Uo("components.appDetail");return(0,r.useEffect)(function(){Z.canSeeEnableCe||yn({siteName:(0,Mn.HJ)(t.detail.Name)}).then(function(m){$(m.data.list)})},[t.detail]),(0,e.jsx)(ze.u,{access:["canSeeEnableCe"],showProTips:!0,showProTipsOffset:Z.canSeeEnableCe?[-15,0]:void 0,children:function(v){var D=v.canSeeEnableCe;return(0,e.jsx)(ie.Z,{action:function(){var O;return Rn({id:(O=x.current)===null||O===void 0?void 0:O.getFieldValue("id"),enableForce:!0})},buttonProps:{icon:(0,e.jsx)(On.Z,{}),disabled:D,style:{marginRight:Z.canSeeEnableCe?20:0}},confirmProps:{onOpenChange:function(O,R){var E;!((E=x.current)===null||E===void 0)&&E.resetFields&&x.current.resetFields()},description:(0,e.jsx)(N.A,{formRef:x,submitter:!1,children:(0,e.jsxs)(P.Z,{direction:"vertical",style:{width:500},size:[0,15],children:[(0,e.jsx)(M.Z.Text,{children:d.format("rollbackTip")}),j&&j.length>0?(0,e.jsx)(Zn.Z.Group,{fieldProps:{style:{display:"flex",flexDirection:"column",gap:8}},name:"id",label:"",options:j&&j.map(function(u){return{label:"id: ".concat(u.id," ").concat(s.FD.format("listDeletedAt"),": ").concat((0,te.NF)(u.deletedAt)),value:u.id}})}):(0,e.jsx)(bn.Z,{message:d.format("rollbackEmptyTip"),style:{marginBottom:10}})]})})},onSuccess:function(){var O;(O=x.current)===null||O===void 0||O.resetFields(),t.onFinish&&t.onFinish()},children:s.FD.format("listManageRollback")})}})}var Sn=n(184),nn=n(14946),wn=n(9773);function Ln(t){return(0,e.jsxs)(P.Z,{children:[t.title,(0,e.jsx)(Je.Z,{title:t.help,children:(0,e.jsx)(rn.Z,{})})]})}var Fn=n(36588),An=n(16970),Un=n(20743),$n=n(78451),Wn=(0,r.forwardRef)(function(t,Z){var i;(0,r.useImperativeHandle)(Z,function(){return{}});var l=(0,r.useRef)(),j=(0,r.useRef)(),$=(0,r.useState)(),x=C()($,2),d=x[0],m=x[1];return(0,r.useEffect)(function(){var v,D;m(t.containerInfo),!((v=l.current)===null||v===void 0)&&v.reloadAndRest&&((D=l.current)===null||D===void 0||D.reloadAndRest())},[t.containerInfo]),(0,e.jsxs)(V.Z,{ghost:t.ghost,children:[(0,e.jsx)(Fn.Z,{ref:j}),(0,e.jsx)(wn.Z,{scroll:{x:"max-content"},rowKey:"key",actionRef:l,pagination:!1,ghost:!0,columns:[{title:s.FD.format("listContainerNetworkName"),key:"name",dataIndex:"networkName"},{title:s.FD.format("listContainerName"),key:"containerName",dataIndex:"containerName",width:100,render:function(D,u,O,R,E){return(0,e.jsx)($n.Z,{content:(0,te.fi)(u.containerName,"/")})}},{title:(0,e.jsx)(Ln,{title:"hostname",help:s.FD.format("listHostnameTip")}),key:"hostName",render:function(D,u,O){return u.hostName?(0,e.jsx)(P.Z,{direction:"vertical",children:u.hostName.map(function(R,E){if(R)return(0,e.jsx)(M.Z.Text,{copyable:!0,keyboard:!0,children:R},E)})}):(0,e.jsx)(e.Fragment,{})}},{title:"Ip",key:"ip",render:function(D,u,O,R,E){return(0,e.jsxs)(P.Z,{direction:"vertical",children:[(0,e.jsx)("span",{children:u.networkInfo.IPv4Address}),u.networkInfo.IPv6Address&&(0,e.jsx)("span",{children:u.networkInfo.IPv6Address})]})}},{title:s.FD.format("listManage"),key:"option",width:50,fixed:"right",render:function(D,u,O,R,E){return(0,e.jsxs)(P.Z,{children:[u.networkName!=""&&(0,e.jsx)(M.Z.Link,{onClick:function(){var B;(B=j.current)===null||B===void 0||B.show(u.networkName)},children:(0,e.jsx)(Je.Z,{title:s.FD.format("listManageDetail"),children:(0,e.jsx)(b.Z,{})})}),u.key!="bridge"&&u.key!="none"&&u.key!="host"&&u.networkName!=""&&(0,e.jsx)(ie.Z,{buttonProps:{type:"link",danger:!0},confirmProps:{description:"notification.confirm.title"},action:function(){return(0,nn.t9)({name:u.networkName,containerName:t.containerInfo.Name})},onSuccess:function(){var B,k;!((B=l.current)===null||B===void 0)&&B.reloadAndRest&&((k=l.current)===null||k===void 0||k.reloadAndRest())},tips:s.FD.format("listManageExit"),children:(0,e.jsx)(an.Z,{})})]})}}],request:function(){var v=_()(a()().mark(function D(u,O,R){var E,le;return a()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,(0,p.jV)({md5:t.containerInfo.Name});case 2:return E=k.sent,m(E.data.info),k.next=6,(0,nn._3)({name:Object.keys(E.data.info.NetworkSettings.Networks)});case 6:return le=k.sent,k.abrupt("return",{data:le.data.list,success:!0,total:le.data.list.length});case 8:case"end":return k.stop()}},D)}));return function(D,u,O){return v.apply(this,arguments)}}(),toolBarRender:function(){return[(0,e.jsx)(Un.Z,{showTriggerButton:!0,onSelect:function(){var D=_()(a()().mark(function u(O){var R,E;return a()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,(0,nn.HY)({name:O.Name,containerName:t.containerInfo.Name,ipV4:""});case 2:E=B.sent,!((R=l.current)===null||R===void 0)&&R.reloadAndRest&&l.current.reloadAndRest();case 4:case"end":return B.stop()}},u)}));return function(u){return D.apply(this,arguments)}}()},"joinNetwork"),(0,e.jsx)(An.Z,{onFinish:function(){var u,O;!((u=l.current)===null||u===void 0)&&u.reloadAndRest&&((O=l.current)===null||O===void 0||O.reloadAndRest())}},"create")]},search:!1,expandable:{expandRowByClick:!1,expandedRowKeys:Object.keys((i=d==null?void 0:d.NetworkSettings.Networks)!==null&&i!==void 0?i:{bridge:[]})}})]})}),Bn=Wn,Nn=n(26522),Kn=(0,r.forwardRef)(function(t,Z){(0,r.useImperativeHandle)(Z,function(){return{}});var i=(0,r.useState)(!1),l=C()(i,2),j=l[0],$=l[1],x=new s.Uo("components.appDetail");return(0,e.jsx)(Sn.a,{submitter:!1,title:x.format("titleNetwork"),onOpenChange:function(m){$(m)},drawerProps:{width:X.R_},open:j,trigger:(0,e.jsx)(ce.ZP,{icon:(0,e.jsx)(Nn.Z,{}),children:s.Ob.format("docker.network")}),children:(0,e.jsx)(Bn,{ghost:!0,containerInfo:t.containerInfo})})}),kn=Kn,Vn=n(84941),Hn=(0,r.forwardRef)(function(t,Z){var i=new s.Uo("components.appDetail"),l=(0,r.useContext)(Q),j=l.reload,$=l.loadingRef,x=l.close,d=l.redirect,m=(0,r.useRef)(),v=(0,r.useRef)(),D=(0,r.useRef)(),u=(0,r.useRef)(),O=(0,r.useRef)(),R=(0,r.useRef)(),E=(0,r.useRef)(),le=(0,r.useState)({status:0,error:""}),B=C()(le,2),k=B[0],A=B[1],ye=(0,r.useState)(),Oe=C()(ye,2),f=Oe[0],Ee=Oe[1];(0,r.useImperativeHandle)(Z,function(){return{}});function Ue(Y){return Ve.apply(this,arguments)}function Ve(){return Ve=_()(a()().mark(function Y(h){var T,c,g;return a()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(c=-2,!h.ignore){L.next=6;break}if(!(h.ignore.indexOf("".concat(h.info.Name,"@*"))>-1)){L.next=4;break}return L.abrupt("return",{status:-2,error:""});case 4:if(!(h.ignore.indexOf("".concat(h.info.Name,"@").concat(h.info.Image))>-1)){L.next=6;break}return L.abrupt("return",{status:-2,error:""});case 6:return L.next=8,(0,Ye.ZQ)({tag:(T=h.info.Config.Image)!==null&&T!==void 0?T:"",md5:h.info.Image,cacheTime:3600}).catch(function(Pe){c=-1});case 8:if(g=L.sent,!(g&&g.data.error&&g.data.error!="")){L.next=11;break}return L.abrupt("return",{status:-1,error:g.data.error});case 11:return g&&(g.data.digestLocal&&g.data.digestLocal.length>0?c=g.data.upgrade?1:2:g.data.error&&g.data.error!=""?c=-1:g.data.digestLocal.length==0?c=-3:c=-2),L.abrupt("return",{status:c,error:""});case 13:case"end":return L.stop()}},Y)})),Ve.apply(this,arguments)}return(0,r.useEffect)(function(){A({status:0}),Ue(t.data).then(function(Y){A(Y)}),Ee(t.data)},[t.data]),(0,e.jsxs)(P.Z,{direction:"vertical",children:[(0,e.jsxs)(V.Z,{ghost:t.ghost,title:(0,e.jsx)(b.Z,{}),subTitle:i.format("titleManage"),children:[(0,e.jsx)(Vn.Z,{onFinish:function(){var Y=_()(a()().mark(function h(T){return a()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:T&&d(T);case 1:case"end":return g.stop()}},h)}));return function(h){return Y.apply(this,arguments)}}(),ref:m},"createByImage"),(0,e.jsxs)(P.Z,{wrap:!0,children:[(0,e.jsx)(ce.ZP,{onClick:function(){var h;(h=m.current)===null||h===void 0||h.show(t.data.info.Id)},type:"primary",icon:(0,e.jsx)(mn.Z,{}),children:s.FD.format("listManageEdit")}),f&&(0,e.jsxs)(e.Fragment,{children:[f.info.Config.Image&&(0,e.jsx)(Dn.Z,{image:[f.info.Config.Image],ref:R}),(0,e.jsx)(_n.Z,{placement:"bottomLeft",menu:{items:[{key:"1",label:(0,e.jsx)(ie.Z,{action:_()(a()().mark(function Y(){var h,T,c,g,H,L;return a()().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return me.next=2,(0,Ge.ze)({md5:(h=(T=f.info)===null||T===void 0?void 0:T.Name)!==null&&h!==void 0?h:"",imageId:""});case 2:return A({status:0}),me.next=5,(0,Ye.ZQ)({tag:(c=(g=f.info)===null||g===void 0?void 0:g.Config.Image)!==null&&c!==void 0?c:"",md5:(H=(L=f.info)===null||L===void 0?void 0:L.Image)!==null&&H!==void 0?H:"",cacheTime:0}).then(function(fe){fe.data.error&&fe.data.error!=""?A({status:-1,error:fe.data.error}):fe.data.digestLocal&&fe.data.digestLocal.length>0?A({status:fe.data.upgrade?1:2}):A({status:-2})}).catch(function(fe){A({status:-1})});case 5:return me.abrupt("return",me.sent);case 6:case"end":return me.stop()}},Y)})),buttonProps:{type:"link"},children:i.format("upgradeCheckUpgrade")})},{key:"2",label:(0,e.jsx)(ie.Z,{action:_()(a()().mark(function Y(){var h,T,c,g;return a()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,(0,Ge.ze)({md5:(h=(T=f.info)===null||T===void 0?void 0:T.Name)!==null&&h!==void 0?h:"",imageId:(c=(g=f.info)===null||g===void 0?void 0:g.Image)!==null&&c!==void 0?c:""});case 2:return L.abrupt("return",L.sent);case 3:case"end":return L.stop()}},Y)})),buttonProps:{type:"link"},children:i.format("upgradeCheckUpgradeIgnoreOnce")})},{key:"3",label:(0,e.jsx)(ie.Z,{action:_()(a()().mark(function Y(){var h,T;return a()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,(0,Ge.ze)({md5:(h=(T=f.info)===null||T===void 0?void 0:T.Name)!==null&&h!==void 0?h:"",imageId:"*"});case 2:return g.abrupt("return",g.sent);case 3:case"end":return g.stop()}},Y)})),buttonProps:{type:"link"},children:i.format("upgradeCheckUpgradeIgnore")})}]},children:(0,e.jsx)(pn.Z,{title:k.error,count:i.format("checkImageUpgradeOption."+k.status),color:i.format("checkImageUpgradeColorOption."+k.status),children:(0,e.jsx)(ie.Z,{buttonProps:{disabled:k.status===0,icon:k.status===0?(0,e.jsx)(In.Z,{}):(0,e.jsx)(Cn.Z,{})},confirmProps:{description:(0,e.jsxs)(P.Z,{style:{width:280,paddingRight:"10px"},direction:"vertical",children:[(0,e.jsx)(M.Z.Text,{children:i.format("upgradeConfirm")}),(0,e.jsx)(N.A,{formRef:E,submitter:!1,layout:"inline",children:(0,e.jsx)(Ne.Z,{name:"enableBak",valuePropName:"checked",children:(0,e.jsx)(Ke.Z,{children:i.format("upgradeConfirmEnableBak")})})})]})},action:_()(a()().mark(function Y(){var h,T,c,g,H,L;return a()().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return me.next=2,(h=R.current)===null||h===void 0?void 0:h.start();case 2:return(T=$.current)===null||T===void 0||T.show(),(c=R.current)===null||c===void 0||c.finish(),me.next=6,(0,p.RF)({md5:(g=f.info.Id)!==null&&g!==void 0?g:"",imageTag:"",enableBak:(H=(L=E.current)===null||L===void 0?void 0:L.getFieldValue("enableBak"))!==null&&H!==void 0?H:!1}).finally(function(){var fe;(fe=$.current)===null||fe===void 0||fe.destroy()});case 6:return me.abrupt("return",me.sent);case 7:case"end":return me.stop()}},Y)})),onSuccess:function(h){x()},children:i.format("upgradeButton")})})})]}),(0,e.jsx)(se.Z,{type:"vertical"}),(0,e.jsx)(ie.Z,{buttonProps:{icon:(0,e.jsx)(fn.Z,{})},confirmProps:{description:(0,e.jsxs)(P.Z,{style:{width:400,paddingRight:"10px"},direction:"vertical",children:[(0,e.jsx)(M.Z.Text,{children:i.format("copyConfirmTip")}),(0,e.jsxs)(N.A,{formRef:O,submitter:!1,layout:"horizontal",children:[(0,e.jsx)("br",{}),(0,e.jsx)(hn.Z,{label:i.format("copyCopyName"),name:"copyName"}),(0,e.jsx)(gn.Z,{label:i.format("copyEnableRandomPort"),name:"enableRandomPort"})]})]})},action:_()(a()().mark(function Y(){var h,T,c,g,H;return a()().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return Pe.next=2,(0,p.aF)({md5:(h=f==null?void 0:f.info.Id)!==null&&h!==void 0?h:"",copyName:(T=(c=O.current)===null||c===void 0?void 0:c.getFieldValue("copyName"))!==null&&T!==void 0?T:"",enableRandomPort:(g=(H=O.current)===null||H===void 0?void 0:H.getFieldValue("enableRandomPort"))!==null&&g!==void 0?g:!1});case 2:return Pe.abrupt("return",Pe.sent);case 3:case"end":return Pe.stop()}},Y)})),onSuccess:function(h){var T;(T=O.current)===null||T===void 0||T.resetFields()},children:i.format("copyButton")}),f&&(0,e.jsx)(Tn,{detail:f.info,onFinish:function(){x()}},"rollback"),f&&(0,e.jsx)(ie.Z,{action:_()(a()().mark(function Y(){var h,T,c,g,H,L;return a()().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return(h=$.current)===null||h===void 0||h.show(),me.abrupt("return",Promise.all([(0,Ge.Ct)({md5:(T=f==null?void 0:f.info.Id)!==null&&T!==void 0?T:"",deleteImage:(c=(g=D.current)===null||g===void 0?void 0:g.getFieldValue("deleteImage"))!==null&&c!==void 0?c:!1,deleteVolume:(H=(L=D.current)===null||L===void 0?void 0:L.getFieldValue("deleteVolume"))!==null&&H!==void 0?H:!1}),(0,Xe.rn)({name:f==null?void 0:f.info.Name})]).finally(function(){var fe;(fe=$.current)===null||fe===void 0||fe.destroy()}));case 2:case"end":return me.stop()}},Y)})),buttonProps:{danger:!0,type:"primary",icon:(0,e.jsx)(an.Z,{})},confirmProps:{description:(0,e.jsxs)(P.Z,{style:{width:200},direction:"vertical",children:[(0,e.jsx)(M.Z.Text,{children:s.FD.format("confirm.title")}),(0,e.jsxs)(N.A,{formRef:D,layout:"inline",submitter:!1,children:[(0,e.jsx)(Ne.Z,{addonAfter:(0,e.jsx)(Je.Z,{title:i.format("deleteConfirmTip"),children:(0,e.jsx)(rn.Z,{})}),name:"deleteVolume",valuePropName:"checked",children:(0,e.jsx)(Ke.Z,{children:i.format("deleteConfirmDeleteVolume")})}),(0,e.jsx)(Ne.Z,{name:"deleteImage",valuePropName:"checked",children:(0,e.jsx)(Ke.Z,{children:i.format("deleteConfirmDeleteImage")})})]})]})},onSuccess:function(){x()},children:i.format("deleteButton")}),(0,e.jsx)(se.Z,{type:"vertical"}),f&&(0,e.jsx)(kn,{containerInfo:f.info})]})]}),(0,e.jsx)(V.Z,{ghost:t.ghost,title:(0,e.jsx)(b.Z,{}),subTitle:i.format("titleManageExport"),children:(0,e.jsxs)(P.Z,{wrap:!0,children:[f&&(0,e.jsx)(ze.u,{access:"canSeeContainerBackup",children:(0,e.jsx)(Pn,{container:f.info})}),(0,e.jsx)(se.Z,{type:"vertical"}),(0,e.jsx)(ie.Z,{buttonProps:{icon:(0,e.jsx)(vn.Z,{})},confirmProps:{onOpenChange:function(h,T){var c;!((c=v.current)===null||c===void 0)&&c.resetFields&&v.current.resetFields()},description:(0,e.jsxs)(P.Z,{style:{width:500,marginTop:"10px",paddingRight:"10px"},direction:"vertical",size:20,children:[(0,e.jsx)(M.Z.Text,{children:i.format("exportConfirm")}),(0,e.jsx)(N.A,{layout:"horizontal",formRef:v,submitter:!1,children:(0,e.jsx)(Ne.Z,{valuePropName:"checked",name:"enableExportToPath",children:(0,e.jsx)(Ke.Z,{children:i.format("exportEnableExportToPath")})},"enableExportToPath")})]})},action:function(){var h,T,c;return(0,p.LJ)({md5:(h=f==null?void 0:f.info.Id)!==null&&h!==void 0?h:"",enableExportToPath:(T=(c=v.current)===null||c===void 0?void 0:c.getFieldValue("enableExportToPath"))!==null&&T!==void 0?T:!1})},children:i.format("exportButton")}),(0,e.jsx)(ie.Z,{buttonProps:{icon:(0,e.jsx)(on.Z,{})},confirmProps:{onOpenChange:function(h,T){var c;!((c=u.current)===null||c===void 0)&&c.resetFields&&u.current.resetFields()},title:i.format("commitConfirmTitle"),description:(0,e.jsx)(P.Z,{style:{width:400,marginTop:"10px",paddingRight:"10px"},direction:"vertical",children:(0,e.jsx)(N.A,{formRef:u,submitter:!1,children:(0,e.jsx)(Ne.Z,{name:"saveImageName",children:(0,e.jsx)(jn.Z,{addonBefore:i.format("commitConfirmSaveImageName")})})})})},action:function(){var h,T,c;return(0,p.Re)({md5:(h=f==null?void 0:f.info.Id)!==null&&h!==void 0?h:"",name:(T=(c=u.current)===null||c===void 0?void 0:c.getFieldValue("saveImageName"))!==null&&T!==void 0?T:f==null?void 0:f.info.Name})},children:i.format("commitButton")})]})},"extend")]})}),Gn=Hn,zn=n(65913);function Qn(t){var Z=new s.Uo("components.appDetail"),i=(0,r.useState)(),l=C()(i,2),j=l[0],$=l[1];return(0,r.useEffect)(function(){(0,Ye.YU)({md5:t.data.Image}).then(function(x){$(x.data)})},[t.data]),(0,e.jsx)(V.Z,{ghost:t.ghost,title:(0,e.jsx)(pe.Z,{}),subTitle:Z.format("titleImage"),children:(0,e.jsxs)(U.Z,{styles:{label:{width:200}},column:1,bordered:!0,children:[(0,e.jsx)(U.Z.Item,{label:"Image Tag",children:(0,e.jsx)(M.Z.Text,{copyable:!0,children:t.data.Config.Image})}),(0,e.jsx)(U.Z.Item,{label:"Image",children:t.data.Image}),(0,e.jsx)(U.Z.Item,{label:"CMD",children:(j==null?void 0:j.info.Config.Cmd)&&(j==null?void 0:j.info.Config.Cmd.join(" "))}),(0,e.jsx)(U.Z.Item,{label:"ENTRYPOINT",children:j==null?void 0:j.info.Config.Entrypoint}),(0,e.jsx)(U.Z.Item,{label:"Labels",children:(0,e.jsx)(U.Z,{column:1,bordered:!0,children:(j==null?void 0:j.info.Config.Labels)&&Object.entries(j==null?void 0:j.info.Config.Labels).map(function(x){var d=C()(x,2),m=d[0],v=d[1];return(0,e.jsx)(U.Z.Item,{label:m,children:v},m)})})})]})})}var Jn=n(97857),Qe=n.n(Jn),Yn=n(40666),Xn=n(64789),qn=n(97937),et=n(66309),nt=n(86738),tt=n(90127);function at(t){var Z=(0,r.useState)(0),i=C()(Z,2),l=i[0],j=i[1],$=(0,r.useState)(),x=C()($,2),d=x[0],m=x[1],v=new s.Uo("components.appDetail"),D=(0,r.useState)(),u=C()(D,2),O=u[0],R=u[1];return(0,r.useEffect)(function(){m([]),(0,Xe.e1)().then(function(E){m(E.data.list)})},[l,t.data.info.Name]),(0,e.jsx)(V.Z,{ghost:!0,title:(0,e.jsx)(Yn.Z,{}),subTitle:v.format("titleTag"),extra:(0,e.jsx)(tt.Z,{trigger:(0,e.jsx)(M.Z.Link,{children:(0,e.jsx)(Xn.Z,{})}),containerDetail:t.data,onFinish:function(){j(l+1)}}),children:(0,e.jsx)(P.Z,{wrap:!0,children:d&&(d==null?void 0:d.filter(function(E){return E.item&&E.item.find(function(le){return le.name==t.data.info.Name})}).map(function(E,le){return(0,e.jsx)(et.Z,{color:E.tagColor,closable:{closeIcon:(0,e.jsx)(nt.Z,{title:s.FD.format("confirm.title"),open:O&&O[le],onOpenChange:function(k){R(Qe()(Qe()({},O),{index:k}))},onConfirm:_()(a()().mark(function B(){return a()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,(0,Xe.rn)({name:t.data.info.Name,tag:E.tag});case 2:j(l+1);case 3:case"end":return A.stop()}},B)})),children:(0,e.jsx)(qn.Z,{})})},style:{height:35,display:"flex",borderRadius:20,justifyContent:"center",alignItems:"center"},onClose:_()(a()().mark(function B(){return a()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:R(Qe()(Qe()({},O),{index:!0}));case 1:case"end":return A.stop()}},B)})),children:(0,e.jsx)("span",{style:{paddingLeft:10,paddingRight:3},children:E.tag})},le)}))})})}var rt=(0,r.forwardRef)(function(t,Z){var i;(0,r.useImperativeHandle)(Z,function(){return{show:function(B){return _()(a()().mark(function k(){return a()().wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:return O(!0),ye.next=3,R(B);case 3:case"end":return ye.stop()}},k)}))()}}});var l=new s.Uo("components.appDetail"),j=(0,r.useRef)(),$=(0,r.useState)(),x=C()($,2),d=x[0],m=x[1],v=(0,r.useState)(!1),D=C()(v,2),u=D[0],O=D[1];function R(le){return E.apply(this,arguments)}function E(){return E=_()(a()().mark(function le(B){var k,A,ye;return a()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return(k=j.current)===null||k===void 0||k.show(),f.next=3,(0,p.jV)({md5:B}).finally(function(){var Ee;(Ee=j.current)===null||Ee===void 0||Ee.destroy()});case 3:A=f.sent,A.data&&(((ye=A.data.info.HostConfig)===null||ye===void 0?void 0:ye.NetworkMode)=="host"&&A.data.info.Config.ExposedPorts&&Object.keys(A.data.info.Config.ExposedPorts).map(function(Ee){A.data.info.NetworkSettings.Ports||(A.data.info.NetworkSettings.Ports={}),A.data.info.NetworkSettings.Ports[Ee]=[{HostIp:"0.0.0.0",HostPort:Ee.substring(0,Ee.indexOf("/"))}]}),m(A.data));case 5:case"end":return f.stop()}},le)})),E.apply(this,arguments)}return(0,e.jsx)(Q.Provider,{value:{loadingRef:j,reload:function(){return _()(a()().mark(function B(){return a()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if(!d){A.next=3;break}return A.next=3,R(d.info.Id);case 3:case"end":return A.stop()}},B)}))()},close:function(){return _()(a()().mark(function B(){return a()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:O(!1),t.onFinish&&t.onFinish();case 2:case"end":return A.stop()}},B)}))()},redirect:function(B){return _()(a()().mark(function k(){return a()().wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:return ye.next=2,R(B);case 2:case"end":return ye.stop()}},k)}))()}},children:(0,e.jsx)(Te.Z,{title:l.format("drawerTitle",{name:(0,te.fi)((i=d==null?void 0:d.info.Name)!==null&&i!==void 0?i:"","/")}),open:u,onClose:function(){O(!1),t.onFinish&&t.onFinish()},width:X.R_,children:(0,e.jsx)(zn.Z,{ref:j,children:(0,e.jsxs)(we.Z,{vertical:!0,gap:20,children:[d&&(0,e.jsx)(ze.u,{access:"canSeeContainerList",children:(0,e.jsx)(cn,{ghost:!0,data:d==null?void 0:d.info})}),d&&(0,e.jsx)(ze.u,{access:["canSeeContainerListManage","canSeeContainerListManageOp"],children:(0,e.jsx)(Gn,{ghost:!0,data:d})}),d&&(0,e.jsx)(at,{data:d}),d&&(0,e.jsx)(Ie,{data:d,ghost:!0}),(0,e.jsx)(Le,{data:d==null?void 0:d.info,ghost:!0}),d&&(0,e.jsx)(Qn,{data:d.info,ghost:!0}),(d==null?void 0:d.info.Config.Labels)&&(0,e.jsx)(V.Z,{title:(0,e.jsx)(pe.Z,{}),ghost:!0,subTitle:l.format("titleLabel"),children:(0,e.jsx)(U.Z,{column:1,bordered:!0,children:d.info.Config.Labels&&Object.entries(d.info.Config.Labels).map(function(le){var B=C()(le,2),k=B[0],A=B[1];return(0,e.jsx)(U.Z.Item,{label:k,children:A},k)})})})]})})})})}),ot=rt},90127:function(We,Re,n){var Ze=n(15009),C=n.n(Ze),be=n(99289),a=n.n(be),ve=n(5574),_=n.n(ve),r=n(5251),ne=n(184),V=n(62370),N=n(5966),U=n(24739),P=n(64317),se=n(52688),M=n(97462),I=n(40056),ge=n(42075),y=n(67294),p=n(1699),ae=n(80821),_e=n(2808),te=n(87662),De=n(29453),S=n(3616),s=n(36146),e=n(85893),Ie=(0,y.forwardRef)(function(pe,Te){var we;(0,y.useImperativeHandle)(Te,function(){return{edit:function(X){z(!0),Se(X),J.current&&J.current.setFieldsValue({tag:[X.tag],tagColor:X.tagColor,enableShowGroup:X.enableShowGroup})}}});var J=(0,y.useRef)(),Le=(0,y.useState)(0),b=_()(Le,2),he=b[0],ue=b[1],re=(0,y.useState)([]),o=_()(re,2),je=o[0],oe=o[1],ce=(0,y.useState)(),Me=_()(ce,2),ie=Me[0],q=Me[1],ee=(we=pe.containerDetail)===null||we===void 0?void 0:we.info,Ae=(0,y.useState)(!1),w=_()(Ae,2),G=w[0],z=w[1],Q=new s.Uo("components.appDetail");function Se(F){J.current&&J.current.setFieldsValue({title:F.title,description:F.description,url:F.url,icon:F.icon,name:F.name})}return(0,y.useEffect)(function(){q([]),(0,De.e1)().then(function(F){q(F.data.list)})},[he]),(0,y.useEffect)(function(){ee&&(0,te.K3)().then(function(F){var X=[];ee.NetworkSettings&&ee.NetworkSettings.Ports&&Object.keys(ee.NetworkSettings.Ports).map(function(K){ee.NetworkSettings.Ports&&ee.NetworkSettings.Ports[K]&&ee.NetworkSettings.Ports[K].map(function(xe){xe.HostPort&&X.push("http://".concat(F.data.serverUrl,":").concat(xe.HostPort))})}),oe(X)})},[pe.containerDetail]),(0,e.jsxs)(ne.a,{drawerProps:{forceRender:!0,width:S.R_},open:G,onFinish:function(){var F=a()(C()().mark(function X(K){var xe,de,Ce,W;return C()().wrap(function(Fe){for(;;)switch(Fe.prev=Fe.next){case 0:return Ce="",K.tagColor&&K.tagColor.toHexString?K.tagColor.cleared||(Ce=K.tagColor.toHexString()):Ce=K.tagColor,W=(xe=K.enableShowGroup)!==null&&xe!==void 0?xe:pe.defaultEnableShowGroup,Fe.next=5,(0,De.A9)({enableShowGroup:W,tag:K.tag?K.tag[0]:"",tagColor:Ce,name:(de=ee==null?void 0:ee.Name)!==null&&de!==void 0?de:K.name,title:W?K.title:"",description:W?K.description:"",url:W?K.url:"",icon:W?K.icon:""});case 5:return ue(he+1),pe.onFinish&&pe.onFinish({tag:K.tag,tagColor:K.tagColor,enableShowGroup:W}),Fe.abrupt("return",!0);case 8:case"end":return Fe.stop()}},X)}));return function(X){return F.apply(this,arguments)}}(),formRef:J,title:Q.format("tagCreateTitle"),trigger:pe.trigger,onOpenChange:function(X){var K;z(X),!X&&(!((K=J.current)===null||K===void 0)&&K.resetFields)&&J.current.resetFields()},children:[pe.defaultEnableShowGroup&&(0,e.jsx)(V.Z,{children:(0,e.jsx)(I.Z,{message:new s.Uo("system.home.tag").format("emptyTip")})}),(0,e.jsx)(N.Z,{name:"name",hidden:!0}),(0,e.jsxs)(U.UW,{children:[(0,e.jsx)(P.Z,{width:"lg",label:Q.format("tagFormTag"),layout:"vertical",required:!0,rules:[{required:!0}],onChange:function(X){var K=ie&&ie.find(function(He){return X&&X.length>=1&&He.tag==X[0]});if(K){var xe,de,Ce,W=K.item.find(function(He){return He.name==(ee==null?void 0:ee.Name)});(xe=J.current)===null||xe===void 0||xe.setFieldsValue({tagColor:K.tagColor,enableShowGroup:K.enableShowGroup}),W&&W.name&&Se({name:(de=ee==null?void 0:ee.Name)!==null&&de!==void 0?de:"",title:W?W.title:(0,r.fi)((Ce=ee==null?void 0:ee.Name)!==null&&Ce!==void 0?Ce:"","/"),description:W&&W.description,url:W&&W.url,icon:W&&W.icon})}if(!X||X.length==0){var Be,Fe=(Be=J.current)===null||Be===void 0?void 0:Be.getFieldValue("url");if(!Fe||Fe==""){var ke;!((ke=J.current)===null||ke===void 0)&&ke.resetFields&&J.current.resetFields()}}},options:ie&&ie.map(function(F){return{lable:F.tag,value:F.tag}}),name:"tag",mode:"tags",fieldProps:{maxCount:1},placeholder:Q.format("tagFormTagEmpty")},"tagSelect".concat(he)),!pe.defaultEnableShowGroup&&(0,e.jsx)(_e.Z,{label:Q.format("tagFormTagColor"),name:"tagColor"})]}),!pe.defaultEnableShowGroup&&(0,e.jsx)(p.u,{access:"canSeeEnableCe",showProRibbonTips:!0,children:function(X){var K=X.canSeeEnableCe;return(0,e.jsx)(se.Z,{label:Q.format("tagFormEnableShowGroup"),name:"enableShowGroup",disabled:K,fieldProps:{onChange:function(de){if(de){var Ce,W;Se({name:(Ce=ee==null?void 0:ee.Name)!==null&&Ce!==void 0?Ce:"",title:(0,r.fi)((W=ee==null?void 0:ee.Name)!==null&&W!==void 0?W:"","/")})}}}})}}),(0,e.jsx)(M.Z,{name:["enableShowGroup"],children:function(X){var K=X.enableShowGroup;return(K||pe.defaultEnableShowGroup)&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(ge.Z.Compact,{children:[pe.containerDetail&&(0,e.jsx)(P.Z,{label:Q.format("tagFormSelectUrl"),width:"sm",name:"selectUrl",options:je.map(function(xe){return{label:xe,value:xe}}),onChange:function(de){var Ce;!((Ce=J.current)===null||Ce===void 0)&&Ce.setFieldValue&&J.current.setFieldValue("url",de)}}),(0,e.jsx)(N.Z,{label:Q.format("tagFormUrl"),name:"url",width:"md"}),(0,e.jsx)(V.Z,{label:" ",children:(0,e.jsx)(ae.Z,{action:function(){var de;return(0,De.R3)({url:(de=J.current)===null||de===void 0?void 0:de.getFieldValue("url")})},onSuccess:function(de){var Ce,W,Be;(Ce=J.current)===null||Ce===void 0||Ce.setFieldValue("icon",de.data.icon),(W=J.current)===null||W===void 0||W.setFieldValue("title",de.data.title),(Be=J.current)===null||Be===void 0||Be.setFieldValue("description",de.data.description)},children:Q.format("tagGetUrlDetailButton")})})]}),(0,e.jsxs)(U.UW,{children:[(0,e.jsx)(N.Z,{label:Q.format("tagFormTitle"),name:"title"}),(0,e.jsx)(N.Z,{label:Q.format("tagFormDescription"),name:"description"})]}),(0,e.jsx)(U.UW,{children:(0,e.jsx)(N.Z,{width:"lg",placeholder:Q.format("tagFormIconEmpty"),label:Q.format("tagFormIcon"),name:"icon"})})]})}})]})});Re.Z=Ie},81146:function(We,Re,n){var Ze=n(97857),C=n.n(Ze),be=n(15009),a=n.n(be),ve=n(99289),_=n.n(ve),r=n(67294),ne=n(97269),V=n(62370),N=n(5966),U=n(97462),P=n(82346),se=n(71230),M=n(15746),I=n(34041),ge=n(83622),y=n(84567),p=n(42075),ae=n(80821),_e=n(23430),te=n(93162),De=n.n(te),S=n(78267),s=n.n(S),e=n(75458),Ie=n.n(e),pe=n(12323),Te=n(4244),we=n.n(Te),J=n(24078),Le=n(36146),b=n(85893),he,ue,re,o={decorations:{matchBackground:"",matchBorder:"#FFFF00",activeMatchBackground:"#FFFF0066",matchOverviewRuler:"",activeMatchColorOverviewRuler:""}},je=(0,r.forwardRef)(function(oe,ce){var Me=(0,r.useRef)(),ie=(0,P.useModel)("subscriber"),q=new Le.Uo("components.containerLog");(0,r.useImperativeHandle)(ce,function(){return{fit:function(){he.clear(),re.fit()},start:function(){return _()(a()().mark(function G(){return a()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return Q.next=2,ee({lineTotal:500});case 2:case"end":return Q.stop()}},G)}))()},close:function(){ie.progress.close(oe.id)}}});function ee(w){return Ae.apply(this,arguments)}function Ae(){return Ae=_()(a()().mark(function w(G){return a()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:ie.progress.close(oe.id),he.clear(),G.download=!1,oe.request(G);case 4:case"end":return Q.stop()}},w)})),Ae.apply(this,arguments)}return(0,r.useEffect)(function(){return window.addEventListener("resize",function(){re.fit()}),he=new Te.Terminal(C()(C()({},pe.X),{},{fontSize:12,lineHeight:1.2,allowProposedApi:!0})),re=new S.FitAddon,ue=new e.SearchAddon({}),he.loadAddon(re),he.loadAddon(ue),he.open(document.getElementById("terminal-container-log")),re.fit(),ie.addDataHandler(oe.id,function(w){he.write(w.data)}),function(){he.clear(),he.reset(),ie.progress.close(oe.id)}},[]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(ne.A,{submitter:!1,layout:"horizontal",onFinish:function(G){var z;ee({id:oe.id,lineTotal:parseInt(G.lineTotal),showTime:(z=G.showTime)!==null&&z!==void 0?z:!1})},formRef:Me,children:(0,b.jsxs)(se.Z,{gutter:[10,0],children:[(0,b.jsx)(M.Z,{span:8,children:(0,b.jsx)(V.Z,{name:"lineTotal",initialValue:"500",label:q.format("formLineTotal"),children:(0,b.jsxs)(I.Z,{defaultValue:"500",onChange:function(G){var z;(z=Me.current)===null||z===void 0||z.submit()},children:[(0,b.jsx)(I.Z.Option,{value:"100",children:q.format("formLineTotalOption",{number:"100"})}),(0,b.jsx)(I.Z.Option,{value:"200",children:q.format("formLineTotalOption",{number:"200"})}),(0,b.jsx)(I.Z.Option,{value:"500",children:q.format("formLineTotalOption",{number:"500"})}),(0,b.jsx)(I.Z.Option,{value:"1000",children:q.format("formLineTotalOption",{number:"1000"})}),(0,b.jsx)(I.Z.Option,{value:"-1",children:q.format("formLineTotalOptionAll")})]})})}),(0,b.jsx)(M.Z,{children:(0,b.jsx)(ge.ZP,{onClick:function(){he.clear()},children:q.format("clearButton")})}),(0,b.jsx)(M.Z,{children:(0,b.jsx)(V.Z,{name:"showTime",valuePropName:"checked",children:(0,b.jsx)(y.Z,{onChange:function(G){var z;(z=Me.current)===null||z===void 0||z.submit()},children:q.format("formShowTime")})})}),(0,b.jsx)(M.Z,{children:(0,b.jsx)(N.Z,{label:q.format("formKeywork"),name:"keywork",fieldProps:{onPressEnter:function(){var G;ue.findNext((G=Me.current)===null||G===void 0?void 0:G.getFieldValue("keywork"),o)},onChange:function(G){ue.findNext(G.target.value,o)}},placeholder:q.format("formKeyworkEmpty")})}),(0,b.jsx)(M.Z,{children:(0,b.jsx)(U.Z,{name:["keywork"],children:function(G){var z=G.keywork;return(0,b.jsxs)(p.Z,{size:10,children:[(0,b.jsx)(ge.ZP,{onClick:function(){ue.findNext(z,o)},children:q.format("formKeyworkNext")},"next"),(0,b.jsx)(ge.ZP,{onClick:function(){ue.findPrevious(z,o)},children:q.format("formKeyworkPrev")},"prev")]})}})}),(0,b.jsx)(M.Z,{children:(0,b.jsx)(ae.Z,{buttonProps:{icon:(0,b.jsx)(_e.Z,{})},action:_()(a()().mark(function w(){var G,z,Q;return a()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(!oe.download){F.next=5;break}return F.next=3,oe.download({lineTotal:parseInt((G=Me.current)===null||G===void 0?void 0:G.getFieldValue("lineTotal")),showTime:(z=Me.current)===null||z===void 0?void 0:z.getFieldValue("showTime")});case 3:Q=F.sent,(0,te.saveAs)(Q.data,Q.name);case 5:case"end":return F.stop()}},w)})),children:q.format("downloadButton")})})]})}),(0,b.jsx)("div",{style:{marginTop:"20px",height:oe.showInDrawer?"75vh":"85vh"},id:"terminal-container-log"})]})});Re.Z=je},27619:function(We,Re,n){n.d(Re,{Z:function(){return r}});var Ze=n(5574),C=n.n(Ze),be=n(82346),a=n(67294),ve=n(64389),_=n(85893);function r(ne){var V=(0,be.useModel)("@@initialState"),N=V.initialState,U="chart-area-".concat(ne.name),P=(0,a.useState)(),se=C()(P,2),M=se[0],I=se[1],ge={};ne.data.forEach(function(p){p.show===!1?ge[p.name]=!1:ge[p.name]=!0});var y={tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}},valueFormatter:function(ae){return ne.yValueFormatter?ne.yValueFormatter(ae):ae}},legend:{selected:ge},grid:{left:"0",right:"0",bottom:"0",top:"30",containLabel:!0},xAxis:{type:"category",data:ne.data[0].data.map(function(p){return p.date}),boundaryGap:!1,axisLabel:{rotate:20}},yAxis:{type:"value",axisLabel:{formatter:ne.yLabelFormatter},max:function(ae){if(ne.yDomainMaxCallback)return ne.yDomainMaxCallback(ae)}},series:[]};return(0,a.useEffect)(function(){var p="",ae=window.matchMedia("(prefers-color-scheme: dark)");(N==null?void 0:N.theme.algorithm)=="dark"||ae.matches?p="dark":p="",M&&!M.isDisposed()&&M.dispose();var _e=document.getElementById(U),te=ve.S1(_e,p);te.setOption(y);var De=new ResizeObserver(function(){te.resize()});_e&&De.observe(_e),I(te)},[N]),(0,a.useEffect)(function(){M&&!M.isDisposed()&&M.setOption({legend:{data:ne.data.map(function(p){return p.name})},xAxis:{data:ne.data[0].data.map(function(p){return p.date})},series:ne.data.map(function(p){return{name:p.name,type:"line",stack:"Total",areaStyle:{},emphasis:{focus:"series"},data:p.data.map(function(ae){return ae.value})}})})},[ne.data]),(0,_.jsx)("div",{style:{height:200},id:U})}},94359:function(We,Re,n){n.d(Re,{Z:function(){return ge}});var Ze=n(5574),C=n.n(Ze),be=n(3089),a=n(98165),ve=n(18429),_=n(8751),r=n(66212),ne=n(14313),V=n(30159),N=n(87740),U=n(50888),P=n(66309),se=n(83062),M=n(36146),I=n(85893);function ge(y){var p,ae,_e=new M.Uo("components.containerStatus"),te=y.status.split("."),De=C()(te,2),S=De[0],s=De[1],e="";e=_e.format(y.status,(p=y.statusValue)!==null&&p!==void 0?p:{});var Ie=(0,I.jsx)(I.Fragment,{});return s=="0"&&(Ie=(0,I.jsx)(P.Z,{icon:(0,I.jsx)(be.Z,{}),color:"default",children:e})),s=="10"&&(Ie=(0,I.jsx)(P.Z,{icon:(0,I.jsx)(a.Z,{spin:!0}),color:"processing",children:e})),s=="20"&&(Ie=(0,I.jsx)(P.Z,{icon:(0,I.jsx)(ve.Z,{}),color:"error",children:e})),s=="30"&&(Ie=(0,I.jsx)(P.Z,{icon:(0,I.jsx)(_.Z,{}),color:"success",children:e})),s=="new"&&(Ie=(0,I.jsx)(P.Z,{icon:(0,I.jsx)(r.Z,{}),children:e})),(s=="running"||s=="healthy"||s=="active"||s=="ready")&&(Ie=(0,I.jsx)(P.Z,{icon:(0,I.jsx)(ne.Z,{}),color:"success",children:e})),(s=="paused"||s=="pause"||s=="rollback_paused")&&(Ie=(0,I.jsx)(P.Z,{icon:(0,I.jsx)(V.Z,{}),color:"warning",children:e})),(s=="waiting"||s=="starting"||s=="accepted")&&(Ie=(0,I.jsx)(P.Z,{icon:(0,I.jsx)(N.Z,{}),children:e})),["deploying","pending","allocated","accepted","assigned","preparing","updating","rollback_started"].includes(s)&&(Ie=(0,I.jsx)(P.Z,{icon:(0,I.jsx)(U.Z,{}),color:"processing",children:e})),(s=="error"||s=="down"||s=="failed")&&(Ie=(0,I.jsx)(P.Z,{icon:(0,I.jsx)(ve.Z,{}),color:"error",children:e})),["complete","completed","rollback_completed"].includes(s)&&(Ie=(0,I.jsx)(P.Z,{icon:(0,I.jsx)(_.Z,{}),color:"success",children:e})),["exited","dead","removing","restarting","unhealthy","created","drain","unreachable","shutdown","rejected","remove","orphaned"].includes(s)&&(Ie=(0,I.jsx)(P.Z,{icon:(0,I.jsx)(ve.Z,{}),color:"warning",children:e})),(0,I.jsx)(se.Z,{placement:"top",title:(ae=y.tip)!==null&&ae!==void 0?ae:"",children:Ie})}},36588:function(We,Re,n){n.d(Re,{Z:function(){return pe}});var Ze=n(15009),C=n.n(Ze),be=n(99289),a=n.n(be),ve=n(5574),_=n.n(ve),r=n(80821),ne=n(3616),V=n(14946),N=n(36146),U=n(82061),P=n(184),se=n(38345),M=n(60940),I=n(42075),ge=n(25593),y=n(96074),p=n(26412),ae=n(67294),_e=n(92067),te=n(83622),De=n(85265),S=n(85893);function s(Te){var we=(0,ae.useState)(!1),J=_()(we,2),Le=J[0],b=J[1],he=new N.Uo("docker");return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(te.ZP,{type:"primary",onClick:function(){b(!0)},children:he.format("networkJoinContainer")}),(0,S.jsx)(De.Z,{open:Le,onClose:function(){b(!1)},width:ne.R_,title:he.format("networkJoinContainer"),children:(0,S.jsx)(_e.Z,{onSelect:function(){var ue=a()(C()().mark(function re(o){return C()().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return oe.next=2,(0,V.HY)({name:Te.detail.Name,containerName:o.Name,ipV4:""});case 2:b(!1),Te.onFinish&&Te.onFinish(Te.detail);case 4:case"end":return oe.stop()}},re)}));return function(re){return ue.apply(this,arguments)}}()})})]})}var e=n(13822),Ie=(0,ae.forwardRef)(function(Te,we){(0,ae.useImperativeHandle)(we,function(){return{show:ee}});var J=(0,ae.useState)(!1),Le=_()(J,2),b=Le[0],he=Le[1],ue=(0,ae.useState)(),re=_()(ue,2),o=re[0],je=re[1],oe=(0,ae.useState)(),ce=_()(oe,2),Me=ce[0],ie=ce[1],q=new N.Uo("components.network");function ee(w){return Ae.apply(this,arguments)}function Ae(){return Ae=a()(C()().mark(function w(G){var z,Q,Se,F,X,K,xe,de;return C()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=2,(0,V.IS)({name:G});case 2:if(z=W.sent,!z.data.info.Containers){W.next=19;break}Q=[],Se=0,F=Object.entries(z.data.info.Containers);case 6:if(!(Se<F.length)){W.next=16;break}return X=_()(F[Se],2),K=X[0],xe=X[1],W.next=10,(0,e.jV)({md5:xe.Name});case 10:de=W.sent,de.data.info.NetworkSettings.Networks[G]&&(xe.Alias=de.data.info.NetworkSettings.Networks[G].Aliases),Q.push(xe);case 13:Se++,W.next=6;break;case 16:ie(Q),W.next=20;break;case 19:ie([]);case 20:je(z.data.info),he(!0);case 22:case"end":return W.stop()}},w)})),Ae.apply(this,arguments)}return(0,S.jsx)(P.a,{drawerProps:{width:ne.R_},title:q.format("detailTitle"),open:b,onOpenChange:function(G){he(G)},submitter:!1,children:(0,S.jsxs)(se.Z,{ghost:!0,direction:"column",gutter:[10,0],children:[(0,S.jsx)(se.Z,{title:q.format("detailContainer"),ghost:!0,extra:o&&(0,S.jsx)(s,{detail:o,onFinish:function(G){ee(G.Name)}}),children:(0,S.jsx)(M.Z,{rowKey:"Name",columns:[{title:N.FD.format("listContainerName"),dataIndex:"Name"},{title:N.FD.format("listAlias"),dataIndex:"Alias",render:function(G,z,Q){return(0,S.jsx)(I.Z,{direction:"vertical",children:z.Alias&&z.Alias.map(function(Se,F){return(0,S.jsx)(ge.Z.Text,{copyable:!0,keyboard:!0,children:Se},F)})})}},{title:"IPV4",dataIndex:"IPv4Address"},{title:"IPV6",dataIndex:"IPv6Address"},{title:"MacAddress",dataIndex:"MacAddress"},{title:N.FD.format("listManage"),render:function(G,z,Q){return(0,S.jsx)(I.Z,{split:(0,S.jsx)(y.Z,{type:"vertical"}),children:(0,S.jsx)(r.Z,{buttonProps:{type:"text",icon:(0,S.jsx)(U.Z,{}),danger:!0},confirmProps:{showCommonConfirm:!0},action:function(){var F,X;return(0,V.t9)({name:(F=o==null?void 0:o.Id)!==null&&F!==void 0?F:"",containerName:(X=z.Name)!==null&&X!==void 0?X:""})},tips:N.FD.format("listManageExit"),onSuccess:function(){o&&ee(o.Name)}},"delete")})}}],dataSource:Me,pagination:!1})}),(0,S.jsx)(se.Z,{ghost:!0,title:q.format("detailBasic"),children:(0,S.jsxs)(p.Z,{styles:{label:{width:150}},column:2,bordered:!0,children:[(0,S.jsx)(p.Z.Item,{label:q.format("detailName"),children:o==null?void 0:o.Name}),(0,S.jsx)(p.Z.Item,{label:"Id",children:o==null?void 0:o.Id.slice(0,12)}),(0,S.jsx)(p.Z.Item,{label:"Driver",children:o==null?void 0:o.Driver}),(0,S.jsx)(p.Z.Item,{label:"Scope",children:o==null?void 0:o.Scope}),(0,S.jsx)(p.Z.Item,{label:"Attachable",children:q.yesNo(o==null?void 0:o.Attachable)}),(0,S.jsx)(p.Z.Item,{label:"Internal",children:q.yesNo(o==null?void 0:o.Internal)}),(o==null?void 0:o.IPAM.Config)&&(o==null?void 0:o.IPAM.Config.map(function(w,G){return(0,S.jsx)(p.Z.Item,{label:w.Gateway&&w.Gateway.includes(":")?"IPV6":"IPV4",children:(0,S.jsxs)(p.Z,{styles:{label:{width:150}},column:1,bordered:!0,children:[(0,S.jsx)(p.Z.Item,{label:"Subnet",children:w.Subnet}),(0,S.jsx)(p.Z.Item,{label:"Gateway",children:w.Gateway}),(0,S.jsx)(p.Z.Item,{label:"IP Range ",children:w.IPRange}),(0,S.jsx)(p.Z.Item,{label:"Excluded IPs",children:w.AuxiliaryAddresses&&Object.keys(w.AuxiliaryAddresses).map(function(z){return w.AuxiliaryAddresses[z]+" ,"})})]})},G)})),(o==null?void 0:o.Options)&&Object.keys(o==null?void 0:o.Options).length>0&&(0,S.jsx)(p.Z.Item,{label:"Options",children:(0,S.jsx)(p.Z,{styles:{label:{width:150}},column:1,bordered:!0,children:Object.keys(o==null?void 0:o.Options).map(function(w){return(0,S.jsx)(p.Z.Item,{label:w,children:o.Options[w]},w)})})}),(o==null?void 0:o.Labels)&&Object.keys(o==null?void 0:o.Labels).length>0&&(0,S.jsx)(p.Z.Item,{label:"Lables",children:(0,S.jsx)(p.Z,{styles:{label:{width:150}},column:1,bordered:!0,children:Object.keys(o==null?void 0:o.Labels).map(function(w){return(0,S.jsx)(p.Z.Item,{label:w,children:o.Labels[w]},w)})})})]})})]})})}),pe=Ie},2808:function(We,Re,n){n.d(Re,{Z:function(){return r}});var Ze=n(97857),C=n.n(Ze),be=n(62370),a=n(51663),ve=n(67294),_=n(85893);function r(ne){return(0,_.jsx)(be.Z,C()(C()({},ne),{},{children:(0,_.jsx)(a.Z,{showText:function(N){return N.toHexString()},allowClear:!0,presets:[{label:"Color",colors:["#1677ff","#722ed1","#13c2c2","#52c41a","#eb2f96","#f5222d","#fa8c16","#fadb14","#fa541c","#2f54eb","#faad14","#a0d911","#000000","#5cdbd3","#b37feb","#b7eb8f","#61affe","#9254de","#36cfc9","#ff9c6e","#ff6f00","#ffc069","#28a745","#6610f2","#6f42c1","#007bff","#17a2b8","#20c997","#00cccc","#ff6666"]}]})}))}},76428:function(We,Re,n){n.d(Re,{Z:function(){return a}});var Ze=n(25593),C=n(67294),be=n(85893);function a(ve){return(0,be.jsx)(Ze.Z.Text,{copyable:!0,children:ve.title})}},65913:function(We,Re,n){var Ze=n(5574),C=n.n(Ze),be=n(74330),a=n(67294),ve=n(85893),_=(0,a.forwardRef)(function(r,ne){(0,a.useImperativeHandle)(ne,function(){return{show:function(){P(!0)},destroy:function(){P(!1)}}});var V=(0,a.useState)(!1),N=C()(V,2),U=N[0],P=N[1];return(0,ve.jsx)(be.Z,{spinning:U,size:"default",children:r.children})});Re.Z=_},29453:function(We,Re,n){n.d(Re,{A9:function(){return _},R3:function(){return P},e1:function(){return ne},rn:function(){return N}});var Ze=n(15009),C=n.n(Ze),be=n(99289),a=n.n(be),ve=n(82346);function _(M){return r.apply(this,arguments)}function r(){return r=a()(C()().mark(function M(I){return C()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,(0,ve.request)("/dpanel/api/common/tag/create",{method:"POST",data:I});case 2:return y.abrupt("return",y.sent);case 3:case"end":return y.stop()}},M)})),r.apply(this,arguments)}function ne(M){return V.apply(this,arguments)}function V(){return V=a()(C()().mark(function M(I){return C()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,(0,ve.request)("/dpanel/api/common/tag/get-list",{method:"POST",data:I});case 2:return y.abrupt("return",y.sent);case 3:case"end":return y.stop()}},M)})),V.apply(this,arguments)}function N(M){return U.apply(this,arguments)}function U(){return U=a()(C()().mark(function M(I){return C()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,(0,ve.request)("/dpanel/api/common/tag/delete",{method:"POST",data:I});case 2:return y.abrupt("return",y.sent);case 3:case"end":return y.stop()}},M)})),U.apply(this,arguments)}function P(M){return se.apply(this,arguments)}function se(){return se=a()(C()().mark(function M(I){return C()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,(0,ve.request)("/dpanel/api/pro/tag/get-url-detail",{method:"POST",data:I});case 2:return y.abrupt("return",y.sent);case 3:case"end":return y.stop()}},M)})),se.apply(this,arguments)}}}]);
