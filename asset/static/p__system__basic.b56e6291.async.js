"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1050],{1699:function($,k,n){n.d(k,{u:function(){return O}});var N=n(9783),g=n.n(N),V=n(97857),M=n.n(V),G=n(67294),p=n(82346),W=n(40411),f=n(42075),L=n(85893),O=function(T){var Y=(0,p.useAccess)(),o=Array.isArray(T.access)?T.access:[T.access],R,S=T.fallback;if(typeof T.children=="function"?(R=T.children(o.reduce(function(B,F){return M()(M()({},B),{},g()({},F,Y[F]))},{})),R||(R=S)):o.every(function(B){return Y[B]})?R=T.children:R=S,!S&&R&&T.showProTips&&Y.canSeeEnableCe){if(Y.canSeeEnableHiddenProTips)return null;R=(0,L.jsx)(W.Z,{offset:T.showProTipsOffset,count:"PRO",color:"gold",style:{fontWeight:"bold"},children:R})}if(!S&&R&&T.showProRibbonTips&&Y.canSeeEnableCe){if(Y.canSeeEnableHiddenProTips)return null;R=(0,L.jsx)(W.Z.Ribbon,{text:"PRO",color:"gold",style:{fontWeight:"bold"},children:R})}return T.space?(0,L.jsx)(f.Z,M()(M()({},T.space),{},{children:R})):R}},80821:function($,k,n){n.d(k,{Z:function(){return Y}});var N=n(97857),g=n.n(N),V=n(5574),M=n.n(V),G=n(24963),p=n(36146),W=n(86738),f=n(83062),L=n(96074),O=n(83622),e=n(67294),T=n(85893);function Y(o){var R=(0,e.useState)(!1),S=M()(R,2),B=S[0],F=S[1],A=(0,e.useContext)(G.Z),Q=A.message,I=function(){F(!0);var ce=o.action();ce instanceof Promise?ce.then(function(re){if(F(!1),re){typeof o.onSuccess=="function"&&o.onSuccess(re);var be=p.FD.format("finish");Q.success(be)}}).catch(function(re){F(!1),typeof o.onError=="function"&&o.onError(re)}):F(!1)};if(o.confirmProps){var y,D,E,K,ne,te,H,ae=o.confirmProps.description;return o.confirmProps.showCommonConfirm&&(ae=p.FD.format("confirm.title")),o.confirmProps.showCommonDisabled&&(ae=p.FD.format("confirm.disable")),(0,T.jsx)(W.Z,g()(g()({},o.confirmProps),{},{style:{width:500},title:(y=o.confirmProps)!==null&&y!==void 0&&y.title?(D=o.confirmProps)===null||D===void 0?void 0:D.title:p.FD.format("title.tip"),description:ae,onConfirm:I,okText:"Yes",cancelText:"No",children:(0,T.jsxs)(f.Z,{title:o.tips,children:[o.showDivider&&(0,T.jsx)(L.Z,{type:"vertical",style:{marginRight:15}}),(0,T.jsx)(O.ZP,g()(g()({},o.buttonProps),{},{ghost:((E=o.buttonProps)===null||E===void 0?void 0:E.ghost)&&((K=o.buttonProps)===null||K===void 0?void 0:K.type)!=="link",style:(ne=o.buttonProps)!==null&&ne!==void 0&&ne.ghost?g()(g()({},o.buttonProps.style),{},{padding:0,width:"auto"}):g()({},(te=o.buttonProps)===null||te===void 0?void 0:te.style),icon:!o.children&&B||(H=o.buttonProps)===null||H===void 0?void 0:H.icon,loading:B,children:o.children}))]})}))}else{var q,ee,se,le,de;return(0,T.jsxs)(f.Z,{title:o.tips,children:[o.showDivider&&(0,T.jsx)(L.Z,{type:"vertical",style:{marginRight:15}}),(0,T.jsx)(O.ZP,g()(g()({},o.buttonProps),{},{ghost:((q=o.buttonProps)===null||q===void 0?void 0:q.ghost)&&((ee=o.buttonProps)===null||ee===void 0?void 0:ee.type)!=="link",style:(se=o.buttonProps)!==null&&se!==void 0&&se.ghost?g()(g()({},o.buttonProps.style),{},{padding:0,width:"auto"}):g()({},(le=o.buttonProps)===null||le===void 0?void 0:le.style),icon:!o.children&&B||(de=o.buttonProps)===null||de===void 0?void 0:de.icon,loading:B,onClick:I,children:o.children}))]})}}},44349:function($,k,n){var N=n(97857),g=n.n(N),V=n(15009),M=n.n(V),G=n(99289),p=n.n(G),W=n(74763),f=n(17186),L=n(5966),O=n(86250),e=n(67294),T=n(85893),Y=(0,e.forwardRef)(function(o,R){var S=(0,e.useRef)();(0,e.useImperativeHandle)(R,function(){return{addItem:function(F){function A(Q,I,y){return F.apply(this,arguments)}return A.toString=function(){return F.toString()},A}(function(F,A,Q){var I,y=(I=S.current)===null||I===void 0?void 0:I.getList(),D;if(y==null||y.forEach(function(ne,te){ne[F]==A[F]&&(D=te)}),!(0,W.k)(D)&&Q){var E;(E=S.current)===null||E===void 0||E.remove(D),D=void 0}if(!D){var K;(K=S.current)===null||K===void 0||K.add(A)}}),removeItemByKey:function(A,Q){return p()(M()().mark(function I(){var y,D;return M()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return D=(y=S.current)===null||y===void 0?void 0:y.getList(),D==null||D.forEach(function(ne,te){if(ne[A]==Q){var H;(H=S.current)===null||H===void 0||H.remove(te);return}}),K.abrupt("return");case 3:case"end":return K.stop()}},I)}))()},clear:function(A){if(!A){var Q;A=(Q=S.current)===null||Q===void 0||(Q=Q.getList())===null||Q===void 0?void 0:Q.map(function(y,D){return D})}if(A){var I;(I=S.current)===null||I===void 0||I.remove(A)}},getList:function(){var A;return(A=S.current)===null||A===void 0?void 0:A.getList()}}});var B={};return o.hideCopyButton===!0&&(B.copyIconProps=!1),o.hideDeleteButton===!0&&(B.deleteIconProps=!1),(0,T.jsx)(f.u,g()(g()({initialValue:o.initialValue,label:o.label,name:o.name,actionRef:S,creatorButtonProps:o.showAddButton?{creatorButtonText:o.label?o.label:o.showAddButtonLabel?o.showAddButtonLabel:o.name}:!1,min:o.min?o.min:0},B),{},{children:function(A,Q,I){return(0,T.jsx)(O.Z,{justify:o.justify,gap:o.gap,children:o.items.map(function(y){return y.render?(0,T.jsx)("div",{children:y.render&&y.render(A,Q,I)},"".concat(o.name,"-").concat(y.name,"-").concat(A.key)):(0,T.jsx)(L.Z,{width:y.width,name:y.name,label:y.label,required:y.required,rules:[{required:y.required}],disabled:y.disabled,placeholder:y.placeholder},"".concat(o.name,"-").concat(y.name,"-").concat(A.key))})})}}))});k.Z=Y},2808:function($,k,n){n.d(k,{Z:function(){return W}});var N=n(97857),g=n.n(N),V=n(62370),M=n(51663),G=n(67294),p=n(85893);function W(f){return(0,p.jsx)(V.Z,g()(g()({},f),{},{children:(0,p.jsx)(M.Z,{showText:function(O){return O.toHexString()},allowClear:!0,presets:[{label:"Color",colors:["#1677ff","#722ed1","#13c2c2","#52c41a","#eb2f96","#f5222d","#fa8c16","#fadb14","#fa541c","#2f54eb","#faad14","#a0d911","#000000","#5cdbd3","#b37feb","#b7eb8f","#61affe","#9254de","#36cfc9","#ff9c6e","#ff6f00","#ffc069","#28a745","#6610f2","#6f42c1","#007bff","#17a2b8","#20c997","#00cccc","#ff6666"]}]})}))}},51100:function($,k,n){n.d(k,{Z:function(){return G}});var N=n(4813),g=n(91604),V=n(1677),M=n(85893);function G(p){return p.showDragger?(0,M.jsx)(g.Z,{max:p.max?p.max:1,title:p.title,label:p.label,required:p.required,rules:[{required:p.required}],fieldProps:{multiple:!!(p.max&&p.max>1),name:"file",accept:p.accept,action:"/api/common/attach/upload",headers:{Authorization:"Bearer "+localStorage.getItem("token")},onRemove:function(f){return new Promise(function(L){var O;(0,N._)({path:(O=f.response.data.path)!==null&&O!==void 0?O:""}).then(function(e){L(!0)})})},onChange:function(f){f.file.status=="done"&&p.onFinish&&p.onFinish(f.fileList)}},name:p.name}):(0,M.jsx)(V.Z,{max:p.max?p.max:1,title:p.title,label:p.label,required:p.required,rules:[{required:p.required}],fieldProps:{multiple:!!(p.max&&p.max>1),name:"file",accept:p.accept,action:"/api/common/attach/upload",headers:{Authorization:"Bearer "+localStorage.getItem("token")},onRemove:function(f){return new Promise(function(L){var O;(0,N._)({path:(O=f.response.data.path)!==null&&O!==void 0?O:""}).then(function(e){L(!0)})})},onChange:function(f){f.file.status=="done"&&p.onFinish&&p.onFinish(f.fileList)}},name:p.name})}},3616:function($,k,n){n.d(k,{Ed:function(){return M},FK:function(){return g},R_:function(){return N},ob:function(){return V}});var N=window.innerWidth<=1024?"90vw":"65vw",g="90vw",V="60vw",M="50vh"},12323:function($,k,n){n.d(k,{X:function(){return N},n:function(){return g}});var N={convertEol:!0,fontFamily:'Menlo, Monaco, "Courier New", monospace',fontWeight:400,fontSize:16,lineHeight:1,cursorStyle:"block",cursorInactiveStyle:"outline",cursorBlink:!0,letterSpacing:0,theme:{foreground:"#bfbfbf",cursor:"gray",selectionForeground:"#ffffff"}},g=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"]},24963:function($,k,n){var N=n(67294),g=(0,N.createContext)({});k.Z=g},18568:function($,k,n){n.r(k),n.d(k,{default:function(){return sn}});var N=n(5574),g=n.n(N),V=n(62370),M=n(97462),G=n(42075),p=n(25593),W=n(80821),f=n(36146),L=n(1699),O=n(82346),e=n(85893);function T(r){var t=(0,O.useAccess)(),c=(0,e.jsxs)(G.Z,{style:{display:"block",marginTop:40},direction:"vertical",children:[(0,e.jsx)(V.Z,{name:r.name,hidden:!0}),(0,e.jsx)(M.Z,{name:[r.name],children:function(U){var j,m=U[r.name];return(0,e.jsxs)(V.Z,{label:r.label,children:[(0,e.jsxs)(G.Z.Compact,{children:[r.disable&&(0,e.jsx)(W.Z,{confirmProps:{showCommonDisabled:!0},buttonProps:{danger:r.disable(m),type:r.disable(m)?"primary":"default"},action:function(){return r.onDisable()},onSuccess:function(){r.onFinish&&r.onFinish()},children:(j=r.disableLabel)!==null&&j!==void 0?j:f.FD.format("listManageDisable")}),r.settingComponent&&(0,e.jsx)(r.settingComponent,{data:m,onFinish:r.onFinish})]}),(0,e.jsx)(p.Z.Text,{type:"secondary",style:{marginLeft:30},children:r.tip})]})}})]});return r.isPe?(0,e.jsx)(L.u,{access:["canSeeEnableCe"],showProRibbonTips:!0,children:function(U){var j=U.canSeeEnableCe;return c}}):c}var Y=n(15009),o=n.n(Y),R=n(99289),S=n.n(R),B=n(24963),F=n(87662),A=n(86548),Q=n(97937),I=n(184),y=n(5966),D=n(83622),E=n(67294),K=n(3616),ne=function(t){var c=(0,E.useRef)(),d=(0,O.useModel)("@@initialState"),U=d.refresh,j=(0,E.useContext)(B.Z),m=j.message,b=new f.Uo("components.systemBasic"),Z=(0,E.useState)(!1),v=g()(Z,2),_=v[0],s=v[1];return(0,e.jsxs)(I.a,{trigger:(0,e.jsx)(D.ZP,{type:"primary",children:f.FD.format("listManageSetting")}),onOpenChange:function(l){var i;s(l),l&&((i=c.current)===null||i===void 0||i.setFieldValue("username",t.data.username))},open:_,drawerProps:{width:K.R_,forceRender:!0},title:b.format("founderTitle"),formRef:c,onFinish:function(){var a=S()(o()().mark(function l(i){var u,h;return o()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,(0,F.Jn)({username:i.username,password:i.password,newPassword:i.newPassword});case 2:if(u=P.sent,!(u&&u.data)){P.next=9;break}return(h=c.current)===null||h===void 0||h.resetFields(),m.success(f.FD.format("finish")),localStorage.removeItem("token"),U(),P.abrupt("return",!0);case 9:case"end":return P.stop()}},l)}));return function(l){return a.apply(this,arguments)}}(),children:[(0,e.jsx)(M.Z,{name:["enableUsername"],children:function(l){var i=l.enableUsername;return(0,e.jsx)(y.Z,{label:b.format("founderUsername"),name:"username",width:"lg",disabled:!i,addonAfter:[(0,e.jsx)(D.ZP,{type:"link",hidden:!!i,icon:(0,e.jsx)(A.Z,{}),onClick:function(){var h;(h=c.current)===null||h===void 0||h.setFieldValue("enableUsername",!0)}},"editBtn"),(0,e.jsx)(D.ZP,{type:"link",hidden:!i,icon:(0,e.jsx)(Q.Z,{}),onClick:function(){var h;(h=c.current)===null||h===void 0||h.setFieldValue("enableUsername",!1)}},"closeBtn")]},"username")}}),(0,e.jsx)(y.Z.Password,{label:b.format("founderPassword"),name:"password",placeholder:b.format("founderPasswordEmpty"),rules:[{required:!0}]},"password"),(0,e.jsx)(y.Z.Password,{label:b.format("founderNewPassword"),name:"newPassword"},"newPasword"),(0,e.jsx)(M.Z,{name:["newPassword"],children:function(l){var i=l.newPassword;return(0,e.jsx)(y.Z.Password,{label:b.format("founderNewPassword2"),name:"newPassword2",dependencies:["newPassword"],rules:[{required:typeof i!="undefined"&&i!=""},function(u){var h=u.getFieldValue;return{validator:function(P,w){return!w||h("newPassword")===w?Promise.resolve():Promise.reject(new Error(b.format("founderMessagePasswordNotMatch")))}}}]},"newPasword2")}})]},"drawer")},te=ne,H=n(38345),ae=n(64317),q=n(52688),ee=n(86615),se=n(90672),le=n(40056),de=function(t){var c,d,U=(0,E.useContext)(B.Z),j=U.message,m=(0,E.useRef)(),b=new f.Uo("components.systemBasic"),Z=(0,E.useState)(!1),v=g()(Z,2),_=v[0],s=v[1];return(0,E.useEffect)(function(){if(m.current&&t.data){var a,l;(a=m.current)===null||a===void 0||a.setFieldsValue({loginFailedEnable:t.data.failedEnable,loginFailedTotal:t.data.failedTotal===0?5:t.data.failedTotal,loginFailedLockTime:t.data.failedLockTime?t.data.failedLockTime.toString():"900",loginNoPasswordEnable:t.data.noPasswordEnable,loginNoPasswordUrl:t.data.noPasswordUrl,loginNoPassworkUserAgent:t.data.noPasswordUserAgent,loginNoPasswordIpList:t.data.noPasswordIpList,loginDefaultRedirect:(l=t.data.defaultRedirect)!==null&&l!==void 0?l:"/home/overview"})}},[m.current]),(0,e.jsxs)(I.a,{drawerProps:{width:K.R_,destroyOnHidden:!0},trigger:(0,e.jsx)(D.ZP,{type:(c=t.data)!==null&&c!==void 0&&c.failedEnable?"primary":"default",children:(d=t.data)!==null&&d!==void 0&&d.failedEnable?f.FD.format("listManageSetting"):f.FD.format("listManageEnable")}),onOpenChange:function(l){var i;s(l),!l&&((i=m.current)===null||i===void 0||i.resetFields())},open:_,title:b.format("loginTitle"),onFinish:function(){var a=S()(o()().mark(function l(i){var u;return o()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return u={failedEnable:i.loginFailedEnable,noPasswordEnable:i.loginNoPasswordEnable,defaultRedirect:i.loginDefaultRedirect},u.failedEnable&&(u.failedTotal=parseInt(i.loginFailedTotal),u.failedLockTime=parseInt(i.loginFailedLockTime)),u.noPasswordEnable&&(u=Object.assign(u,{noPasswordUrl:i.loginNoPasswordUrl,noPasswordUserAgent:i.loginNoPasswordUserAgent,noPasswordIplist:i.loginNoPasswordIplist})),x.next=5,(0,F.bv)({login:u,saveCache:!0});case 5:s(!1),j.success(f.FD.format("finish")),t.onFinish&&t.onFinish();case 8:case"end":return x.stop()}},l)}));return function(l){return a.apply(this,arguments)}}(),formRef:m,children:[(0,e.jsx)(H.Z,{title:b.format("loginBasicTitle"),ghost:!0,children:(0,e.jsx)(L.u,{access:["canSeeEnableCe"],showProRibbonTips:!0,children:function(l){var i=l.canSeeEnableCe;return(0,e.jsx)(ae.Z,{disabled:i,label:b.format("loginBasicDefaultRedirect"),name:"loginDefaultRedirect",options:b.option("loginBasicDefaultRedirectOption",["/home/overview","/home/tag","/app/list","/compose/list","/swarm/service"])})}})}),(0,e.jsxs)(H.Z,{title:b.format("loginFailedTitle"),ghost:!0,children:[(0,e.jsx)(q.Z,{name:"loginFailedEnable"}),(0,e.jsx)(y.Z,{name:"loginFailedTotal",label:b.format("loginFailedTotal"),fieldProps:{addonAfter:f.FD.format("unitTimes")}}),(0,e.jsx)(ee.Z.Group,{name:"loginFailedLockTime",label:b.format("loginFailedLockTime"),options:b.option("loginFailedLockTimeOption",["300","900","3600","18000","-1"])})]}),(0,e.jsxs)(H.Z,{title:b.format("loginNoPasswordTitle"),hidden:!0,ghost:!0,children:[(0,e.jsx)(le.Z,{message:"\u5F00\u542F\u514D\u5BC6\u767B\u5F55\u540E\uFF0C\u9762\u677F\u540E\u53F0\u5C06\u4E0D\u9700\u8981\u767B\u5F55\u3002\u6B64\u529F\u80FD\u4EC5\u9650\u4E8E\u5728\u672C\u5730\u6216\u662F\u5185\u7F51\u4E2D\u4F7F\u7528\uFF0C\u8BF7\u8C28\u614E\u5F00\u542F\u3002",type:"warning",style:{marginBottom:15}}),(0,e.jsx)(q.Z,{name:"loginNoPasswordEnable"}),(0,e.jsx)(L.u,{access:["canSeeEnableCe"],showProRibbonTips:!0,children:function(l){var i=l.canSeeEnableCe;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(y.Z,{disabled:i,label:"\u514D\u5BC6\u767B\u5F55\u5730\u5740",name:"loginNoPasswordUrl"}),(0,e.jsx)(y.Z,{disabled:i,label:"\u514D\u5BC6\u767B\u5F55 User-Agent",name:"loginNoPasswordUserAgent"}),(0,e.jsx)(se.Z,{disabled:i,label:"\u514D\u5BC6\u767B\u5F55 IP \u767D\u540D\u5355",name:"loginNoPasswordIpWhitelist"})]})}})]})]})},Ee=de;function ce(r){return re.apply(this,arguments)}function re(){return re=S()(o()().mark(function r(t){return o()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,O.request)("/api/pro/two-fa/enable",{method:"POST",data:t}));case 1:case"end":return d.stop()}},r)})),re.apply(this,arguments)}var be=n(29104),Fe=function(t){var c,d,U=new f.Uo("components.systemBasic"),j=(0,O.useAccess)(),m=(0,E.useRef)(),b=(0,E.useContext)(B.Z),Z=b.message,v=(0,E.useState)(!1),_=g()(v,2),s=_[0],a=_[1],l=(0,O.useModel)("@@initialState"),i=l.initialState;return(0,E.useEffect)(function(){if(m.current&&!j.canSeeEnableCe&&i){var u;if(!t.data||!t.data.enable)var h=ce({email:i==null?void 0:i.user.username,enable:!1}).then(function(w){var C,z;(C=m.current)===null||C===void 0||C.setFieldValue("twoFaEmail",i.user.username),(z=m.current)===null||z===void 0||z.setFieldValue("towFaQrcode",w.data.qrCode)});else{var x,P;(x=m.current)===null||x===void 0||x.setFieldValue("twoFaEmail",t.data.email),(P=m.current)===null||P===void 0||P.setFieldValue("towFaQrcode",t.data.qrCode)}(u=m.current)===null||u===void 0||u.setFieldValue("twoFaCode","")}},[m.current]),(0,e.jsx)(I.a,{drawerProps:{width:K.R_,destroyOnHidden:!0},trigger:(0,e.jsx)(D.ZP,{disabled:j.canSeeEnableCe,style:{width:90},type:(c=t.data)!==null&&c!==void 0&&c.enable?"primary":"default",children:(d=t.data)!==null&&d!==void 0&&d.enable?f.FD.format("listManageSetting"):f.FD.format("listManageEnable")}),onOpenChange:function(){var u=S()(o()().mark(function h(x){var P;return o()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:a(x),!x&&((P=m.current)===null||P===void 0||P.resetFields());case 2:case"end":return C.stop()}},h)}));return function(h){return u.apply(this,arguments)}}(),open:s,title:U.format("twoFaTitle"),onFinish:function(){var u=S()(o()().mark(function h(x){var P;return o()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(j.canSeeEnableCe){C.next=4;break}return C.next=3,ce({email:x.twoFaEmail,enable:!0,code:x.twoFaCode});case 3:P=C.sent;case 4:Z.success(f.FD.format("finish")),a(!1),t.onFinish&&t.onFinish();case 7:case"end":return C.stop()}},h)}));return function(h){return u.apply(this,arguments)}}(),formRef:m,children:(0,e.jsx)(L.u,{access:"canSeeEnableCe",showProRibbonTips:!0,children:function(h){var x=h.canSeeEnableCe;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(y.Z,{label:U.format("twoFaEmail"),name:"twoFaEmail",disabled:!0,placeholder:U.format("twoFaEmailEmpty")}),(0,e.jsx)(y.Z,{label:"\u9A8C\u8BC1\u7801",name:"twoFaCode",required:!0,disabled:x,rules:[{required:!0}]}),(0,e.jsx)(V.Z,{label:U.format("twoFaQrcode"),tooltip:U.format("twoFaQrcodeTip"),shouldUpdate:!0,children:function(w){var C=w.getFieldValue("towFaQrcode");return C&&(0,e.jsx)(be.Z,{style:{border:"#d1d9e0b3 solid 1px",padding:"10px",borderRadius:"10px"},width:200,src:"data:image/png;base64,".concat(C)})}})]})}})})},Te=Fe,Ue=n(29177),we=n(74453),Oe=n(97269),Me=n(86125);function De(r){var t=(0,O.useModel)("@@initialState"),c=t.initialState,d=(0,O.useAccess)(),U=(0,E.useContext)(B.Z),j=U.message,m=(0,O.useAntdConfigSetter)(),b=new f.Uo("components.systemBasic"),Z=(0,E.useState)(!1),v=g()(Z,2),_=v[0],s=v[1],a=(0,E.useRef)();return(0,E.useEffect)(function(){if(a.current){var l,i,u,h,x,P,w,C;(l=a.current)===null||l===void 0||l.setFieldsValue({algorithm:(i=c==null?void 0:c.theme.algorithm)!==null&&i!==void 0?i:"default",mainMenu:(u=c==null?void 0:c.theme.mainMenu)!==null&&u!==void 0?u:"top",compact:(h=c==null?void 0:c.theme.compact)!==null&&h!==void 0?h:"default",fontSize:(x=c==null?void 0:c.theme.fontSize)!==null&&x!==void 0?x:14,fontSizeConsole:(P=c==null?void 0:c.theme.fontSizeConsole)!==null&&P!==void 0?P:12,sideMenu:(w=c==null?void 0:c.theme.sideMenu)!==null&&w!==void 0?w:"default",tablePageSize:(C=c==null?void 0:c.theme.tablePageSize)!==null&&C!==void 0?C:"20"})}},[c,a.current]),(0,e.jsxs)(I.a,{formRef:a,drawerProps:{width:K.R_,destroyOnHidden:!0},onOpenChange:function(i){var u;s(i),!i&&((u=a.current)===null||u===void 0||u.resetFields())},open:_,trigger:(0,e.jsx)(D.ZP,{type:"primary",children:f.FD.format("listManageSetting")}),onFinish:function(){var l=S()(o()().mark(function i(u){var h;return o()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(h={algorithm:u.algorithm,mainMenu:u.mainMenu,sideMenu:u.sideMenu,compact:u.compact,fontSizeConsole:u.fontSizeConsole,fontSize:u.fontSize,tablePageSize:u.tablePageSize},!(u.algorithm!=(c==null?void 0:c.theme.algorithm)&&!d.canSeeEnableCe)){P.next=4;break}return P.next=4,(0,F.GV)({groupName:"setting",name:"themeUserConfig"});case 4:return localStorage.setItem("dpanel-theme",u.algorithm),localStorage.setItem("dpanel-compact",u.compact),localStorage.setItem("dpanel-pagesize",u.tablePageSize),P.next=9,(0,F.bv)({theme:h});case 9:j.success(f.FD.format("finishTheme")),s(!1),r.onFinish&&r.onFinish();case 12:case"end":return P.stop()}},i)}));return function(i){return l.apply(this,arguments)}}(),children:[(0,e.jsx)(ee.Z.Group,{name:"algorithm",label:b.format("themeConfigAlgorithm"),initialValue:"default",radioType:"button",options:b.option("themeConfigAlgorithmOption",["default","dark","system"]),fieldProps:{onChange:function(i){i.target.value=="system"&&j.warning("\u4E3B\u9898\u76AE\u80A4\u914D\u7F6E\u4E3A\u8DDF\u968F\u7CFB\u7EDF\u540E\uFF0C\u5C06\u4F1A\u6E05\u7A7A\u81EA\u5B9A\u4E49\u4E3B\u9898\u98CE\u683C")}}}),(0,e.jsx)(ee.Z.Group,{name:"mainMenu",label:b.format("themeConfigMainMenu"),initialValue:"top",radioType:"button",options:b.option("themeConfigMainMenuOption",["top","side"])}),(0,e.jsx)(ee.Z.Group,{name:"sideMenu",label:b.format("themeConfigSideMenu"),initialValue:"default",radioType:"button",options:b.option("themeConfigSideMenuOption",["default","collapse"])}),(0,e.jsx)(ee.Z.Group,{name:"compact",label:b.format("themeConfigCompact"),initialValue:"default",radioType:"button",options:b.option("themeConfigCompactOption",["default","compact"])}),(0,e.jsx)(V.Z,{name:"fontSize",label:b.format("themeConfigFontSize"),initialValue:14,children:(0,e.jsx)(Me.Z,{step:2,max:30,min:8,marks:{8:"8",10:"10",12:"12",14:"14",16:"16",20:"20",26:"26"}})}),(0,e.jsx)(ae.Z,{initialValue:"20",label:b.format("themeConfigTablePageSize"),name:"tablePageSize",options:b.option("themeConfigTablePageSizeOption",["5","10","20","50","100","all"])})]})}var J=n(24739),Ze=n(25054),oe=n(31199),Le=n(21532),_e=n(86250),Be=n(44349);function Ie(r){return Ce.apply(this,arguments)}function Ce(){return Ce=S()(o()().mark(function r(t){return o()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,O.request)("/api/pro/theme/save-theme-user-config",{method:"POST",data:t});case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},r)})),Ce.apply(this,arguments)}var Re=n(2808),fe=n(51100),Ae=n(96486),We=n.n(Ae),ue={colorPrimary:"",colorTextBase:"",colorLink:"",colorBgContainer:"",colorBorder:"",colorBgElevated:"",colorBorderSecondary:"colorBorder"},pe=["borderRadius","wireframe"],ke=function(t){var c=(0,O.useAccess)(),d=(0,E.useRef)(),U=(0,E.useContext)(B.Z),j=U.message,m=new f.Uo("components.systemBasic"),b=(0,E.useState)(!1),Z=g()(b,2),v=Z[0],_=Z[1],s=function(l){return(0,e.jsx)(Re.Z,{name:l.name,label:m.format("themeUserConfigOption.".concat(l.name)),tooltip:l.tooltip})};return(0,E.useEffect)(function(){if(!c.canSeeEnableCe&&d.current&&t.data){var a,l;if((a=d.current)===null||a===void 0||a.resetFields(["bgImageUpload","siteLogoUpload"]),pe.forEach(function(h){if(t.data&&t.data.token&&t.data.token[h]){var x,P;(x=d.current)===null||x===void 0||x.setFieldValue("enableStyle",!0),(P=d.current)===null||P===void 0||P.setFieldValue(h,t.data.token[h])}}),(l=d.current)===null||l===void 0||l.setFieldsValue({siteLogo:t.data.siteLogo,siteTitle:t.data.siteTitle,siteCopyright:t.data.siteCopyright,siteLink:t.data.siteLink,bgImage:t.data.bgImage,loginLogo:t.data.loginLogo}),!t.data.bgImage||!t.data.bgImage.width||t.data.bgImage.width=="100%"){var i;(i=d.current)===null||i===void 0||i.setFieldValue("bgSize","full")}else{var u;(u=d.current)===null||u===void 0||u.setFieldValue("bgSize","default")}Object.keys(ue).map(function(h){var x=h;ue[h]!=""&&(x=ue[h]),d!=null&&d.current&&t.data&&t.data.token&&!We().isEmpty(t.data.token)&&(d==null||d.current.setFieldValue("enableColor",!0),d==null||d.current.setFieldValue(h,t.data.token[x]))})}},[d.current]),(0,e.jsx)(Le.ZP,{children:(0,e.jsxs)(I.a,{trigger:(0,e.jsx)(D.ZP,{disabled:c.canSeeEnableCe,type:"primary",children:f.FD.format("listManageSetting")}),drawerProps:{width:K.R_},onOpenChange:function(l){var i;_(l),!l&&((i=d.current)===null||i===void 0||i.resetFields())},open:v,title:m.format("themeUserConfigTitle"),formRef:d,onFinish:function(){var a=S()(o()().mark(function l(i){var u,h,x;return o()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(!c.canSeeEnableCe){w.next=2;break}return w.abrupt("return",!1);case 2:return x={token:{},bgImage:i.bgImage,siteLink:i.siteLink,siteTitle:(u=i.siteTitle)!==null&&u!==void 0?u:"",siteCopyright:i.siteCopyright,siteLogo:(h=i.siteLogo)!==null&&h!==void 0?h:"",loginLogo:i.loginLogo},i.siteLogoUpload&&i.siteLogoUpload.length>0&&(x.siteLogo=i.siteLogoUpload[0].response.data.path),x.bgImage||(x.bgImage={}),i.bgImageUpload&&i.bgImageUpload.length>0&&(x.bgImage.src=i.bgImageUpload[0].response.data.path),x.bgImage.width=i.bgSize=="full"?"100%":"",i.loginLogoUpload&&i.loginLogoUpload.length>0&&(x.loginLogo=i.loginLogoUpload[0].response.data.path),Object.keys(ue).map(function(C){x.token||(x.token={});var z=C;ue[C]!=""&&(z=ue[C]);var X=d.current&&d.current.getFieldValue(z);X&&X.toHexString?X.cleared||(x.token[C]=X.toHexString()):x.token[C]=X}),pe.map(function(C){x.token||(x.token={});var z=d.current&&d.current.getFieldValue(C);x.token[C]=z}),w.next=12,Ie(x);case 12:return t.onFinish&&t.onFinish(),j.success(f.FD.format("finishTheme")),w.abrupt("return",!0);case 15:case"end":return w.stop()}},l)}));return function(l){return a.apply(this,arguments)}}(),children:[(0,e.jsx)(J.UW,{title:m.format("themeUserConfigColorTitle"),extra:(0,e.jsx)(q.Z,{name:"enableColor"})}),(0,e.jsx)(M.Z,{name:["enableColor"],children:function(l){var i=l.enableColor;return i&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(J.UW,{children:s({name:"colorPrimary",tooltip:m.format("themeUserConfigColorPrimaryTip")})}),(0,e.jsxs)(J.UW,{children:[s({name:"colorBgContainer"}),s({name:"colorBgElevated"})]}),(0,e.jsxs)(J.UW,{children:[s({name:"colorTextBase"}),s({name:"colorLink"}),s({name:"colorBorder"})]})]})}}),(0,e.jsx)(J.UW,{title:m.format("themeUserConfigStyleTitle"),extra:(0,e.jsx)(q.Z,{name:"enableStyle"})}),(0,e.jsx)(M.Z,{name:["enableStyle"],children:function(l){var i=l.enableStyle;return i&&(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(J.UW,{children:(0,e.jsxs)(_e.Z,{gap:40,children:[(0,e.jsx)(q.Z,{label:m.format("themeUserConfigWireframe"),name:"wireframe"}),(0,e.jsx)(Ze.Z,{min:1,max:16,label:m.format("themeUserConfigBorderRadius"),name:"borderRadius"})]})})})}}),(0,e.jsx)(J.UW,{title:m.format("themeUserConfigUiTitle")}),(0,e.jsx)(y.Z,{label:m.format("themeUserConfigSiteTitle"),name:"siteTitle",placeholder:m.format("themeUserConfigSiteTitleEmpty")}),(0,e.jsxs)(J.UW,{children:[(0,e.jsx)(fe.Z,{label:"Logo",title:m.format("themeUserConfigSiteLogoUploadTitle"),name:"siteLogoUpload",accept:".jpg,.png,.webp,.svg"}),(0,e.jsx)(y.Z,{width:"md",placeholder:m.format("themeUserConfigSiteLogoEmpty"),label:m.format("themeUserConfigSiteLogo"),name:"siteLogo"})]}),(0,e.jsxs)(J.UW,{children:[(0,e.jsx)(fe.Z,{label:m.format("themeUserConfigBgImageUpload"),title:m.format("themeUserConfigBgImageUploadTitle"),name:"bgImageUpload",accept:".jpg,.png,.webp,.svg"}),(0,e.jsx)(y.Z,{width:"md",placeholder:m.format("themeUserConfigSiteLogoEmpty"),label:m.format("themeUserConfigBgImageSrc"),name:["bgImage","src"]}),(0,e.jsx)(ee.Z.Group,{name:"bgSize",label:m.format("themeUserConfigBgImageBgSize"),initialValue:"full",options:m.option("themeUserConfigBgImageBgSizeOption",["full","default"])})]}),(0,e.jsx)(J.UW,{children:(0,e.jsx)(M.Z,{name:["bgSize"],children:function(l){var i=l.bgSize;if(i=="default")return(0,e.jsxs)(J.UW,{children:[(0,e.jsx)(oe.Z,{width:"xs",name:["bgImage","top"],label:m.format("themeUserConfigBgImageTop")}),(0,e.jsx)(oe.Z,{width:"xs",name:["bgImage","bottom"],label:m.format("themeUserConfigBgImageBottom")}),(0,e.jsx)(oe.Z,{width:"xs",name:["bgImage","left"],label:m.format("themeUserConfigBgImageLeft")}),(0,e.jsx)(oe.Z,{width:"xs",name:["bgImage","right"],label:m.format("themeUserConfigBgImageRight")})]})}})}),(0,e.jsx)(Be.Z,{name:"siteLink",label:m.format("themeUserConfigSiteLink"),showAddButton:!0,hideCopyButton:!0,gap:10,items:m.option("themeUserConfigSiteLinkOption",["title","href"]).map(function(a){return{name:a.value,label:a.label}})}),(0,e.jsx)(se.Z,{label:m.format("themeUserConfigSiteCopyright"),name:"siteCopyright"}),(0,e.jsxs)(J.UW,{title:m.format("themeUserConfigUiLoginTitle"),children:[(0,e.jsx)(fe.Z,{label:"Logo",title:"Logo",name:"loginLogoUpload",accept:".jpg,.png,.webp,.svg"}),(0,e.jsx)(y.Z,{width:"md",placeholder:m.format("themeUserConfigSiteLogoEmpty"),label:m.format("themeUserConfigLoginLogo"),name:"loginLogo"})]})]})})},Ne=ke,Ke=n(19400),Se=n(2487),Ve=n(4393),ze=n(71230),He=n(15746),Ge=n(40411),ye=n(12323),Qe=n(64304),he=n.n(Qe);function Ye(r){var t=new f.Uo("components.systemBasic"),c=(0,O.useAccess)(),d=(0,E.useContext)(B.Z),U=d.message,j=(0,E.useState)(),m=g()(j,2),b=m[0],Z=m[1],v=(0,E.useState)(),_=g()(v,2),s=_[0],a=_[1],l=(0,E.useRef)(),i=(0,E.useState)(!1),u=g()(i,2),h=u[0],x=u[1];return(0,E.useEffect)(function(){if(l.current&&r.data){var P,w,C=ye.X;r.data&&Object.assign(C,r.data),!c.canSeeEnableCe&&r.data&&(P=r.data)!==null&&P!==void 0&&P.themeName&&r.data.themeName!=""&&Object.keys(he()).forEach(function(z,X){r.data&&z==r.data.themeName&&(a(Math.ceil((X+1)/36)),Z(r.data.themeName))}),(w=l.current)===null||w===void 0||w.setFieldsValue({fontSize:C.fontSize,lineHeight:C.lineHeight,letterSpacing:C.letterSpacing,fontWeight:C.fontWeight,cursorStyle:C.cursorStyle,cursorInactiveStyle:C.cursorInactiveStyle,cursorBlink:C.cursorBlink})}},[l.current,r.data]),(0,e.jsxs)(I.a,{onOpenChange:function(w){var C;x(w),!w&&((C=l.current)===null||C===void 0||C.resetFields())},open:h,title:t.format("themeConsoleTitle"),formRef:l,drawerProps:{width:K.R_,destroyOnHidden:!0},trigger:(0,e.jsx)(D.ZP,{type:"primary",children:f.FD.format("listManageSetting")}),onFinish:function(){var P=S()(o()().mark(function w(C){var z;return o()().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return z={fontSize:C.fontSize,lineHeight:C.lineHeight,letterSpacing:C.letterSpacing,fontWeight:C.fontWeight,cursorStyle:C.cursorStyle,cursorInactiveStyle:C.cursorInactiveStyle,cursorBlink:C.cursorBlink,theme:{},themeName:""},b!=""&&!c.canSeeEnableCe&&(z.theme=he()[b],z.themeName=b),ie.next=4,(0,F.bv)({console:z});case 4:return U.success(f.FD.format("finishTheme")),x(!1),r.onFinish&&r.onFinish(),ie.abrupt("return",!0);case 8:case"end":return ie.stop()}},w)}));return function(w){return P.apply(this,arguments)}}(),children:[(0,e.jsx)(J.UW,{title:t.format("themeConsoleFont"),children:(0,e.jsxs)(_e.Z,{gap:50,children:[(0,e.jsx)(oe.Z,{label:t.format("themeConsoleFontSize"),name:"fontSize",tooltip:t.format("themeConsoleFontSizeTip"),fieldProps:{addonAfter:"px"}}),(0,e.jsx)(oe.Z,{label:t.format("themeConsoleLineHeight"),name:"lineHeight",tooltip:t.format("themeConsoleLineHeightTip"),fieldProps:{addonAfter:t.format("themeConsoleLineHeightUnit")}}),(0,e.jsx)(oe.Z,{label:t.format("themeConsoleLetterSpacing"),name:"letterSpacing",fieldProps:{addonAfter:"px"},tooltip:t.format("themeConsoleLetterSpacingTip")}),(0,e.jsx)(ae.Z,{label:t.format("themeConsoleFontWeight"),name:"fontWeight",options:[{label:"normal",value:"normal"},{label:"bold",value:"bold"},{label:"100",value:"100"},{label:"200",value:"200"},{label:"300",value:"300"},{label:"400",value:"400"},{label:"500",value:"500"},{label:"600",value:"600"},{label:"700",value:"700"},{label:"800",value:"800"},{label:"900",value:"900"}]})]})}),(0,e.jsx)(J.UW,{title:t.format("themeConsoleCursorStyleTitle"),children:(0,e.jsxs)(_e.Z,{gap:50,children:[(0,e.jsx)(ae.Z,{label:t.format("themeConsoleCursorStyle"),name:"cursorStyle",width:"sm",options:t.option("themeConsoleCursorStyleOption",["bar","underline","block"])}),(0,e.jsx)(ae.Z,{label:t.format("themeConsoleCursorInactiveStyle"),name:"cursorInactiveStyle",width:"sm",options:t.option("themeConsoleCursorStyleOption",["bar","underline","block","outline"])}),(0,e.jsx)(q.Z,{label:t.format("themeConsoleCursorBlink"),name:"cursorBlink"})]})}),(0,e.jsx)(L.u,{showProRibbonTips:!0,access:"canSeeEnableCe",children:function(w){var C=w.canSeeEnableCe;return(0,e.jsx)(H.Z,{ghost:!0,title:(0,e.jsx)(Ke.Z,{}),subTitle:t.format("themeConsoleTheme"),children:(0,e.jsx)(Se.Z,{split:!0,style:{overflow:"hidden"},grid:{column:6},pagination:{pageSize:36,current:s,onChange:function(X,ie){a(X)}},dataSource:Object.keys(he()).map(function(z){return{label:z,value:z,data:he()[z]}}),renderItem:function(X,ie){var ve=X.data,Pe=(0,e.jsxs)(Ve.Z,{style:{backgroundColor:ve.background,color:ve.foreground,textAlign:"center",cursor:C?"not-allowed":"pointer",borderRadius:0},onClick:function(){if(!C){var xe;(xe=l.current)===null||xe===void 0||xe.setFieldValue("theme",X.data),Z(X.label)}},hoverable:!0,children:[(0,e.jsx)(ze.Z,{wrap:!0,gutter:[2,2],justify:"center",align:"middle",children:ye.n.filter(function(me){return ve[me]!=""}).map(function(me){return(0,e.jsx)(He.Z,{style:{backgroundColor:ve[me],padding:8}},me)})}),(0,e.jsx)("div",{style:{paddingTop:5},children:X.label})]});return(0,e.jsx)(Se.Z.Item,{style:{margin:0},children:b==X.label?(0,e.jsx)(Ge.Z.Ribbon,{text:"Checked",children:Pe}):Pe},ie)}})})}})]})}var Xe=n(63434);function Je(r){var t=new f.Uo("components.systemBasic"),c=(0,E.useRef)(),d=(0,E.useState)(!1),U=g()(d,2),j=U[0],m=U[1],b=(0,E.useContext)(B.Z),Z=b.message;return(0,E.useEffect)(function(){if(c.current&&r.data){var v;(v=c.current)===null||v===void 0||v.setFieldsValue(r.data)}},[c.current,r.data]),(0,e.jsxs)(I.a,{drawerProps:{width:K.R_,destroyOnHidden:!0},trigger:(0,e.jsx)(D.ZP,{style:{width:150},type:"primary",children:f.FD.format("listManageSetting")}),onOpenChange:function(_){var s;m(_),!_&&((s=c.current)===null||s===void 0||s.resetFields())},open:j,title:t.format("notificationTitle"),onFinish:function(){var v=S()(o()().mark(function _(s){return o()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,F.bv)({notification:{emailServer:s.emailServer}});case 2:m(!1),Z.success(f.FD.format("finish")),r.onFinish&&r.onFinish();case 5:case"end":return l.stop()}},_)}));return function(_){return v.apply(this,arguments)}}(),formRef:c,children:[(0,e.jsx)(J.UW,{title:t.format("notificationEmailTitle")}),(0,e.jsx)(y.Z,{label:t.format("notificationEmailHost"),name:["emailServer","host"],tooltip:t.format("notificationEmailHostTip"),required:!0,rules:[{required:!0}]}),(0,e.jsx)(oe.Z,{label:t.format("notificationEmailPort"),name:["emailServer","port"],required:!0,rules:[{required:!0}],initialValue:465}),(0,e.jsx)(y.Z,{label:t.format("notificationEmailCode"),name:["emailServer","code"],width:"lg",placeholder:t.format("notificationEmailCodeTip"),required:!0,rules:[{required:!0}],addonAfter:(0,e.jsxs)(G.Z,{children:[(0,e.jsx)("a",{target:"_blank",href:"https://service.mail.qq.com/detail/0/75",children:t.format("notificationEmailCodeHelp.qq")}),(0,e.jsx)("a",{target:"_blank",href:"https://help.mail.163.com/faqDetail.do?code=d7a5dc8471cd0c0e8b4b8f4f8e49998b374173cfe9171305fa1ce630d7f67ac286624f309a1a7089",children:t.format("notificationEmailCodeHelp.163")})]})}),(0,e.jsx)(y.Z,{label:t.format("notificationEmailEmail"),name:["emailServer","email"],required:!0,rules:[{required:!0}],width:"lg",addonAfter:(0,e.jsx)(W.Z,{buttonProps:{type:"primary"},tips:t.format("notificationEmailTestTip"),action:S()(o()().mark(function v(){var _;return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,F.FB)({emailServer:(_=c.current)===null||_===void 0?void 0:_.getFieldValue("emailServer"),subject:t.format("notificationEmailTestSubject"),content:t.format("notificationEmailTestContent",{time:new Date().toISOString()})});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},v)})),children:t.format("notificationEmailTestButton")},"testEmail")}),(0,e.jsx)(L.u,{access:"canSeeEnableEe",children:(0,e.jsx)(Xe.Z.Group,{name:"status",label:t.format("notificationEmailStatus"),options:t.option("notificationEmailStatusOption",["register"])})})]})}var $e=n(19632),qe=n.n($e),ge=n(89035);function en(r){var t=(0,E.useState)([]),c=g()(t,2),d=c[0],U=c[1],j=new f.Uo("components.systemBasic");return(0,E.useEffect)(function(){var m,b,Z;if(r.data){var v;!((m=r.data.info)===null||m===void 0)&&m.Mounts&&r.data.info.Mounts.forEach(function(u){u.Type=="volume"&&u.Name&&(v=u.Name)});var _=((b=r.data.info)===null||b===void 0||(b=b.HostConfig)===null||b===void 0?void 0:b.PortBindings)&&Object.entries(r.data.info.HostConfig.PortBindings).map(function(u){var h=g()(u,2),x=h[0],P=h[1];return P.map(function(w){return"-p ".concat(w.HostPort,":").concat(String(parseInt(x)))})}),s=!1,a=((Z=r.data.info)===null||Z===void 0||(Z=Z.HostConfig)===null||Z===void 0?void 0:Z.Binds)&&r.data.info.HostConfig.Binds.map(function(u){return u.indexOf(":/dpanel")>-1&&(s=!0),"-v ".concat(u)});if(!s){var l,v="";!((l=r.data.info)===null||l===void 0)&&l.Mounts&&r.data.info.Mounts.forEach(function(h){h.Type=="volume"&&h.Name&&(v=h.Name)}),a||(a=[]),a.push("-v "+v+":/dpanel")}if(r.data.info&&r.data.info.Config){var i=["docker stop ".concat(r.data.info.Name," && docker rm ").concat(r.data.info.Name),"docker pull ".concat(r.data.info.Config.Image),"docker run -d --name ".concat(r.data.info.Name," --restart=always ").concat(_&&_.join(" ")," ").concat(a&&a.join(" ")," ").concat(r.data.info.Config.Image)];r.data.info.NetworkSettings.Networks&&r.data.info.NetworkSettings.Networks["dpanel-local"]&&(i=[].concat(qe()(i),["docker network connect --alias dpanel.pod.dpanel.local dpanel-local ".concat(r.data.info.Name)])),U(i)}}},[r.data]),(0,e.jsx)(I.a,{drawerProps:{width:K.R_,destroyOnHidden:!0},title:j.format("upgradeTitle"),trigger:(0,e.jsx)(D.ZP,{style:{width:150},children:f.FD.format("listManageView")}),children:(0,e.jsxs)(H.Z,{direction:"column",ghost:!0,children:[(0,e.jsx)(le.Z,{message:j.format("upgradeAlertTitle"),showIcon:!0,description:(0,e.jsxs)("ol",{style:{marginLeft:"-20px"},children:[(0,e.jsx)("li",{children:j.format("upgradeAlertContent1")}),(0,e.jsx)("li",{children:j.format("upgradeAlertContent2")}),(0,e.jsx)("li",{children:j.format("upgradeAlertContent3")}),(0,e.jsx)("li",{children:(0,e.jsx)(p.Z.Text,{type:"danger",children:j.format("upgradeAlertContent4")})})]}),type:"warning",style:{marginBottom:"20px"}}),(0,e.jsxs)(H.Z,{ghost:!0,style:{paddingBottom:50},direction:"column",gutter:[10,50],children:[(0,e.jsx)(H.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(ge.Z,{}),bodyStyle:{padding:"10px",background:"#24292f"},subTitle:(0,e.jsxs)(e.Fragment,{children:[j.format("upgradeShellRootLessTitle")," ",(0,e.jsx)("a",{href:"https://dpanel.cc/install/shell",target:"_blank",children:f.FD.format("help")})]}),children:(0,e.jsx)(p.Z.Text,{copyable:!0,style:{color:"#ffffff"},children:"sudo curl -sSL https://dpanel.cc/quick.sh -o quick.sh && sudo bash quick.sh"})}),(0,e.jsx)(H.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(ge.Z,{}),bodyStyle:{padding:"10px",background:"#24292f"},subTitle:(0,e.jsxs)(e.Fragment,{children:[j.format("upgradeShellRootTitle")," ",(0,e.jsx)("a",{href:"https://dpanel.cc/install/shell",target:"_blank",children:f.FD.format("help")})]}),children:(0,e.jsx)(p.Z.Text,{copyable:!0,style:{color:"#ffffff"},children:"curl -sSL https://dpanel.cc/quick.sh -o quick.sh && bash quick.sh"})}),(0,e.jsx)(H.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(ge.Z,{}),bodyStyle:{padding:"10px",background:"#24292f"},subTitle:(0,e.jsxs)(e.Fragment,{children:[j.format("upgradeDockerrunTitle")," ",(0,e.jsx)("a",{href:"https://dpanel.cc/manual/system-dpanel-upgrade",target:"_blank",children:f.FD.format("help")})]}),children:d&&d.length>0?(0,e.jsx)(p.Z.Paragraph,{copyable:!0,style:{color:"#ffffff"},children:'sudo sh -c "'.concat(d.join(" && "),'"')}):(0,e.jsx)("span",{style:{color:"#ffffff"},children:f.FD.format("systemUpgradeDPanelNotFound")})}),(0,e.jsx)(H.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(ge.Z,{}),bodyStyle:{padding:"10px",background:"#24292f"},subTitle:(0,e.jsxs)(e.Fragment,{children:[j.format("upgradeBinaryTitle")," ",(0,e.jsx)("a",{href:"https://github.com/donknap/dpanel/releases",target:"_blank",children:f.FD.format("help")})]}),children:(0,e.jsx)("span",{style:{color:"#ffffff"},children:j.format("upgradeBinaryTip")})})]})]})})}var nn=n(96074),je=n(89075),tn=n(93162),an=n(27771),rn=n(5251),on=n(12119);function ln(){var r=new f.Uo("components.systemBasic"),t=(0,E.useState)(!1),c=g()(t,2),d=c[0],U=c[1],j=(0,E.useRef)(),m=(0,O.useAccess)(),b=(0,E.useState)(0),Z=g()(b,2),v=Z[0],_=Z[1];return(0,E.useEffect)(function(){j.current&&(j.current.resetFields(),!m.canSeeEnableCe&&(0,je.YQ)().then(function(s){var a;(a=j.current)===null||a===void 0||a.setFieldValue("expireTime","".concat((0,rn.NF)(s.data.expireTime)))}))},[j.current,v]),(0,e.jsxs)(I.a,{drawerProps:{width:K.R_,destroyOnHidden:!0,extra:(0,e.jsx)("a",{target:"_blank",href:"https://dpanel.cc/pro",children:f.FD.format("help")})},submitter:!1,onFinish:function(){var s=S()(o()().mark(function a(l){var i;return o()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!(l.uploadCertUpload&&(0,an.Z)(l.uploadCertUpload))){h.next=4;break}return h.next=3,(0,je.E1)({fileName:l.uploadCertUpload[0].response.data.path});case 3:i=h.sent;case 4:return _(v+1),h.abrupt("return",!1);case 6:case"end":return h.stop()}},a)}));return function(a){return s.apply(this,arguments)}}(),formRef:j,open:d,onOpenChange:function(a){U(a)},title:r.format("proTitle"),trigger:(0,e.jsx)(D.ZP,{style:{width:150},children:f.FD.format("listManageManage")}),children:[(0,e.jsx)(le.Z,{type:"warning",message:(0,e.jsxs)(e.Fragment,{children:[r.format("proThanks")," ",(0,e.jsx)("a",{target:"_blank",href:"https://dpanel.cc/pro",children:r.format("proBuyButton")})]})}),(0,e.jsx)(nn.Z,{orientation:"center",children:(0,e.jsx)(on.Z,{})}),(0,e.jsx)(y.Z,{name:"expireTime",label:f.FD.format("listExpireAt"),readonly:!0}),(0,e.jsx)(V.Z,{children:(0,e.jsx)(D.ZP,{onClick:S()(o()().mark(function s(){var a,l;return o()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,je.$w)();case 2:a=u.sent,l=new Blob([a.data.code],{type:"text/plain"}),(0,tn.saveAs)(l,"dpanel.code");case 5:case"end":return u.stop()}},s)})),block:!0,children:r.format("getMachineId")},"downloadCode")}),(0,e.jsx)(fe.Z,{showDragger:!0,required:!0,label:r.format("uploadCertUpload"),name:"uploadCertUpload",accept:".lic",onFinish:function(a){var l;(l=j.current)===null||l===void 0||l.submit()}})]})}function sn(){var r=new f.Uo("components.systemBasic"),t=(0,E.useState)(0),c=g()(t,2),d=c[0],U=c[1],j=(0,E.useRef)(),m=(0,E.useContext)(B.Z),b=m.loading,Z=(0,O.useAccess)();return(0,E.useEffect)(function(){var v;b.show(),(v=j.current)===null||v===void 0||v.resetFields(),Promise.all([(0,F.pe)({groupName:"user",name:"founder"}).then(function(_){var s;(s=j.current)===null||s===void 0||s.setFieldsValue({founder:_.data})}),(0,F.pe)({groupName:"setting",name:"login"}).then(function(_){var s,a;(s=j.current)===null||s===void 0||s.setFieldsValue({login:(a=_.data)!==null&&a!==void 0?a:{}})}),!Z.canSeeEnableCe&&(0,F.pe)({groupName:"setting",name:"twoFa"}).then(function(_){var s,a;(s=j.current)===null||s===void 0||s.setFieldsValue({twoFa:(a=_.data)!==null&&a!==void 0?a:{}})}),!Z.canSeeEnableCe&&(0,F.pe)({groupName:"setting",name:"themeUserConfig"}).then(function(_){var s,a;(s=j.current)===null||s===void 0||s.setFieldsValue({themeUserConfig:(a=_.data)!==null&&a!==void 0?a:{}})}),(0,F.pe)({groupName:"setting",name:"themeConsoleConfig"}).then(function(_){var s,a;(s=j.current)===null||s===void 0||s.setFieldsValue({themeConsoleConfig:(a=_.data)!==null&&a!==void 0?a:{}})}),(0,F.pe)({groupName:"setting",name:"themeConfig"}).then(function(_){var s,a;(s=j.current)===null||s===void 0||s.setFieldsValue({themeConfig:(a=_.data)!==null&&a!==void 0?a:{}})}),(0,F.pe)({groupName:"setting",name:"notification"}).then(function(_){var s,a;(s=j.current)===null||s===void 0||s.setFieldsValue({notification:(a=_.data)!==null&&a!==void 0?a:{}})}),(0,F.d6)().then(function(_){var s,a;(s=j.current)===null||s===void 0||s.setFieldValue("upgradeScript",(a=_.data)!==null&&a!==void 0?a:{})})]).finally(function(){b.destroy()})},[d]),(0,e.jsx)(we._z,{children:(0,e.jsx)(H.Z,{children:(0,e.jsxs)(Oe.A,{layout:"horizontal",labelAlign:"left",labelCol:{xs:7,sm:6,md:5,lg:5,xl:4,xxl:3,offset:0},submitter:!1,formRef:j,children:[(0,e.jsx)(M.Z,{name:["founder"],children:function(_){var s=_.founder;return s&&(0,e.jsx)(y.Z,{label:r.format("founderTitle"),disabled:!0,width:"md",fieldProps:{prefix:(0,e.jsx)(Ue.Z,{}),value:s.username},addonAfter:(0,e.jsx)(te,{data:s,onFinish:function(){U(d+1)}}),name:"adminUsername"})}}),(0,e.jsx)(T,{label:r.format("loginTitle"),name:"login",disable:function(_){return!1},disableLabel:f.FD.format("listManageDefault"),onDisable:function(){return(0,F.GV)({groupName:"setting",name:"login"})},settingComponent:Ee,onFinish:function(){U(d+1)},tip:r.format("loginTip")}),(0,e.jsx)(T,{isPe:!0,label:r.format("twoFaTitle"),name:"twoFa",disable:function(_){return!(_!=null&&_.enable)},onDisable:function(){return(0,F.GV)({groupName:"setting",name:"twoFa"})},settingComponent:Te,onFinish:function(){U(d+1)},tip:r.format("twoFaTip")}),(0,e.jsx)(T,{label:r.format("themeConfigTitle"),name:"themeConfig",disable:function(_){return!1},disableLabel:f.FD.format("listManageDefault"),onDisable:function(){return localStorage.removeItem("dpanel-theme"),localStorage.removeItem("dpanel-compact"),localStorage.removeItem("dpanel-pagesize"),(0,F.GV)({groupName:"setting",name:"themeConfig"})},settingComponent:De,onFinish:function(){window.location.reload(),U(d+1)},tip:r.format("themeConfigTip")}),(0,e.jsx)(T,{isPe:!0,label:r.format("themeUserConfigTitle"),name:"themeUserConfig",disable:function(_){return!1},disableLabel:f.FD.format("listManageDefault"),onDisable:function(){return(0,F.GV)({groupName:"setting",name:"themeUserConfig"})},settingComponent:Ne,onFinish:function(){window.location.reload(),U(d+1)},tip:r.format("themeUserConfigTip")}),(0,e.jsx)(T,{label:r.format("themeConsoleTitle"),name:"themeConsoleConfig",disable:function(_){return!1},disableLabel:f.FD.format("listManageDefault"),onDisable:function(){return(0,F.GV)({groupName:"setting",name:"themeConsoleConfig"})},settingComponent:Ye,onFinish:function(){U(d+1)},tip:r.format("themeConsoleTip")}),(0,e.jsx)(T,{label:r.format("notificationTitle"),name:"notification",onDisable:function(){return(0,F.GV)({groupName:"setting",name:"themeConsoleConfig"})},settingComponent:Je,onFinish:function(){U(d+1)},tip:r.format("notificationTip")}),(0,e.jsx)(T,{label:r.format("upgradeTitle"),name:"upgradeScript",onDisable:function(){return new Promise(function(){})},settingComponent:en,tip:r.format("upgradeTip")}),!Z.canSeeEnableCe&&(0,e.jsx)(T,{label:r.format("proTitle"),name:"pro",onDisable:function(){return new Promise(function(){})},settingComponent:ln,tip:r.format("proTip")})]})})})}},4813:function($,k,n){n.d(k,{_:function(){return p}});var N=n(15009),g=n.n(N),V=n(99289),M=n.n(V),G=n(82346);function p(f){return W.apply(this,arguments)}function W(){return W=M()(g()().mark(function f(L){return g()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,G.request)("/api/common/attach/delete",{method:"POST",data:L});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},f)})),W.apply(this,arguments)}},89075:function($,k,n){n.d(k,{$w:function(){return p},E1:function(){return T},YQ:function(){return f},ax:function(){return O}});var N=n(15009),g=n.n(N),V=n(99289),M=n.n(V),G=n(82346);function p(){return W.apply(this,arguments)}function W(){return W=M()(g()().mark(function o(){return g()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.abrupt("return",(0,G.request)("/api/pro/home/get-machine-id",{method:"POST"}));case 1:case"end":return S.stop()}},o)})),W.apply(this,arguments)}function f(){return L.apply(this,arguments)}function L(){return L=M()(g()().mark(function o(){return g()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.abrupt("return",(0,G.request)("/api/pro/home/get-license-info",{method:"POST"}));case 1:case"end":return S.stop()}},o)})),L.apply(this,arguments)}function O(){return e.apply(this,arguments)}function e(){return e=M()(g()().mark(function o(){return g()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.abrupt("return",(0,G.request)("/api/pro/home/login-info",{method:"POST"}));case 1:case"end":return S.stop()}},o)})),e.apply(this,arguments)}function T(o){return Y.apply(this,arguments)}function Y(){return Y=M()(g()().mark(function o(R){return g()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.abrupt("return",(0,G.request)("/api/pro/home/upload-license-file",{method:"POST",data:R}));case 1:case"end":return B.stop()}},o)})),Y.apply(this,arguments)}}}]);
