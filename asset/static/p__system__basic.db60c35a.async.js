"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1050],{1699:function($,k,n){n.d(k,{u:function(){return O}});var K=n(9783),g=n.n(K),V=n(97857),M=n.n(V),G=n(67294),E=n(82346),W=n(40411),m=n(42075),L=n(85893),O=function(T){var Y=(0,E.useAccess)(),o=Array.isArray(T.access)?T.access:[T.access],R,p=T.fallback;if(typeof T.children=="function"?(R=T.children(o.reduce(function(B,P){return M()(M()({},B),{},g()({},P,Y[P]))},{})),R||(R=p)):o.every(function(B){return Y[B]})?R=T.children:R=p,!p&&R&&T.showProTips&&Y.canSeeEnableCe){if(Y.canSeeEnableHiddenProTips)return null;R=(0,L.jsx)(W.Z,{offset:T.showProTipsOffset,count:"PRO",color:"gold",style:{fontWeight:"bold"},children:R})}if(!p&&R&&T.showProRibbonTips&&Y.canSeeEnableCe){if(Y.canSeeEnableHiddenProTips)return null;R=(0,L.jsx)(W.Z.Ribbon,{text:"PRO",color:"gold",style:{fontWeight:"bold"},children:R})}return T.space?(0,L.jsx)(m.Z,M()(M()({},T.space),{},{children:R})):R}},80821:function($,k,n){n.d(k,{Z:function(){return Y}});var K=n(97857),g=n.n(K),V=n(5574),M=n.n(V),G=n(24963),E=n(36146),W=n(86738),m=n(83062),L=n(96074),O=n(83622),e=n(67294),T=n(85893);function Y(o){var R=(0,e.useState)(!1),p=M()(R,2),B=p[0],P=p[1],A=(0,e.useContext)(G.Z),Q=A.message,I=function(){P(!0);var ce=o.action();ce instanceof Promise?ce.then(function(re){if(P(!1),re){typeof o.onSuccess=="function"&&o.onSuccess(re);var be=E.FD.format("finish");Q.success(be)}}).catch(function(re){P(!1),typeof o.onError=="function"&&o.onError(re)}):P(!1)};if(o.confirmProps){var S,Z,x,N,ne,te,H,ae=o.confirmProps.description;return o.confirmProps.showCommonConfirm&&(ae=E.FD.format("confirm.title")),o.confirmProps.showCommonDisabled&&(ae=E.FD.format("confirm.disable")),(0,T.jsx)(W.Z,g()(g()({},o.confirmProps),{},{style:{width:500},title:(S=o.confirmProps)!==null&&S!==void 0&&S.title?(Z=o.confirmProps)===null||Z===void 0?void 0:Z.title:E.FD.format("title.tip"),description:ae,onConfirm:I,okText:"Yes",cancelText:"No",children:(0,T.jsxs)(m.Z,{title:o.tips,children:[o.showDivider&&(0,T.jsx)(L.Z,{type:"vertical",style:{marginRight:15}}),(0,T.jsx)(O.ZP,g()(g()({},o.buttonProps),{},{ghost:((x=o.buttonProps)===null||x===void 0?void 0:x.ghost)&&((N=o.buttonProps)===null||N===void 0?void 0:N.type)!=="link",style:(ne=o.buttonProps)!==null&&ne!==void 0&&ne.ghost?g()(g()({},o.buttonProps.style),{},{padding:0,width:"auto"}):g()({},(te=o.buttonProps)===null||te===void 0?void 0:te.style),icon:!o.children&&B||(H=o.buttonProps)===null||H===void 0?void 0:H.icon,loading:B,children:o.children}))]})}))}else{var q,ee,se,le,de;return(0,T.jsxs)(m.Z,{title:o.tips,children:[o.showDivider&&(0,T.jsx)(L.Z,{type:"vertical",style:{marginRight:15}}),(0,T.jsx)(O.ZP,g()(g()({},o.buttonProps),{},{ghost:((q=o.buttonProps)===null||q===void 0?void 0:q.ghost)&&((ee=o.buttonProps)===null||ee===void 0?void 0:ee.type)!=="link",style:(se=o.buttonProps)!==null&&se!==void 0&&se.ghost?g()(g()({},o.buttonProps.style),{},{padding:0,width:"auto"}):g()({},(le=o.buttonProps)===null||le===void 0?void 0:le.style),icon:!o.children&&B||(de=o.buttonProps)===null||de===void 0?void 0:de.icon,loading:B,onClick:I,children:o.children}))]})}}},44349:function($,k,n){var K=n(97857),g=n.n(K),V=n(15009),M=n.n(V),G=n(99289),E=n.n(G),W=n(74763),m=n(17186),L=n(5966),O=n(86250),e=n(67294),T=n(85893),Y=(0,e.forwardRef)(function(o,R){var p=(0,e.useRef)();(0,e.useImperativeHandle)(R,function(){return{addItem:function(P){function A(Q,I,S){return P.apply(this,arguments)}return A.toString=function(){return P.toString()},A}(function(P,A,Q){var I,S=(I=p.current)===null||I===void 0?void 0:I.getList(),Z;if(S==null||S.forEach(function(ne,te){ne[P]==A[P]&&(Z=te)}),!(0,W.k)(Z)&&Q){var x;(x=p.current)===null||x===void 0||x.remove(Z),Z=void 0}if(!Z){var N;(N=p.current)===null||N===void 0||N.add(A)}}),removeItemByKey:function(A,Q){return E()(M()().mark(function I(){var S,Z;return M()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return Z=(S=p.current)===null||S===void 0?void 0:S.getList(),Z==null||Z.forEach(function(ne,te){if(ne[A]==Q){var H;(H=p.current)===null||H===void 0||H.remove(te);return}}),N.abrupt("return");case 3:case"end":return N.stop()}},I)}))()},clear:function(A){if(!A){var Q;A=(Q=p.current)===null||Q===void 0||(Q=Q.getList())===null||Q===void 0?void 0:Q.map(function(S,Z){return Z})}if(A){var I;(I=p.current)===null||I===void 0||I.remove(A)}},getList:function(){var A;return(A=p.current)===null||A===void 0?void 0:A.getList()}}});var B={};return o.hideCopyButton===!0&&(B.copyIconProps=!1),o.hideDeleteButton===!0&&(B.deleteIconProps=!1),(0,T.jsx)(m.u,g()(g()({initialValue:o.initialValue,label:o.label,name:o.name,actionRef:p,creatorButtonProps:o.showAddButton?{creatorButtonText:o.label?o.label:o.showAddButtonLabel?o.showAddButtonLabel:o.name}:!1,min:o.min?o.min:0},B),{},{children:function(A,Q,I){return(0,T.jsx)(O.Z,{justify:o.justify,gap:o.gap,children:o.items.map(function(S){return S.render?(0,T.jsx)("div",{children:S.render&&S.render(A,Q,I)},"".concat(o.name,"-").concat(S.name,"-").concat(A.key)):(0,T.jsx)(L.Z,{width:S.width,name:S.name,label:S.label,required:S.required,rules:[{required:S.required}],disabled:S.disabled,placeholder:S.placeholder},"".concat(o.name,"-").concat(S.name,"-").concat(A.key))})})}}))});k.Z=Y},2808:function($,k,n){n.d(k,{Z:function(){return W}});var K=n(97857),g=n.n(K),V=n(62370),M=n(51663),G=n(67294),E=n(85893);function W(m){return(0,E.jsx)(V.Z,g()(g()({},m),{},{children:(0,E.jsx)(M.Z,{showText:function(O){return O.toHexString()},allowClear:!0,presets:[{label:"Color",colors:["#1677ff","#722ed1","#13c2c2","#52c41a","#eb2f96","#f5222d","#fa8c16","#fadb14","#fa541c","#2f54eb","#faad14","#a0d911","#000000","#5cdbd3","#b37feb","#b7eb8f","#61affe","#9254de","#36cfc9","#ff9c6e","#ff6f00","#ffc069","#28a745","#6610f2","#6f42c1","#007bff","#17a2b8","#20c997","#00cccc","#ff6666"]}]})}))}},51100:function($,k,n){n.d(k,{Z:function(){return G}});var K=n(4813),g=n(91604),V=n(1677),M=n(85893);function G(E){return E.showDragger?(0,M.jsx)(g.Z,{max:E.max?E.max:1,title:E.title,label:E.label,required:E.required,rules:[{required:E.required}],fieldProps:{multiple:!!(E.max&&E.max>1),name:"file",accept:E.accept,action:"/api/common/attach/upload",headers:{Authorization:"Bearer "+localStorage.getItem("token")},onRemove:function(m){return new Promise(function(L){var O;(0,K._)({path:(O=m.response.data.path)!==null&&O!==void 0?O:""}).then(function(e){L(!0)})})},onChange:function(m){m.file.status=="done"&&E.onFinish&&E.onFinish(m.fileList)}},name:E.name}):(0,M.jsx)(V.Z,{max:E.max?E.max:1,title:E.title,label:E.label,required:E.required,rules:[{required:E.required}],fieldProps:{multiple:!!(E.max&&E.max>1),name:"file",accept:E.accept,action:"/api/common/attach/upload",headers:{Authorization:"Bearer "+localStorage.getItem("token")},onRemove:function(m){return new Promise(function(L){var O;(0,K._)({path:(O=m.response.data.path)!==null&&O!==void 0?O:""}).then(function(e){L(!0)})})},onChange:function(m){m.file.status=="done"&&E.onFinish&&E.onFinish(m.fileList)}},name:E.name})}},3616:function($,k,n){n.d(k,{Ed:function(){return M},FK:function(){return g},R_:function(){return K},ob:function(){return V}});var K=window.innerWidth<=1024?"90vw":"65vw",g="90vw",V="60vw",M="50vh"},12323:function($,k,n){n.d(k,{X:function(){return K},n:function(){return g}});var K={convertEol:!0,fontFamily:'Menlo, Monaco, "Courier New", monospace',fontWeight:400,fontSize:16,lineHeight:1,cursorStyle:"block",cursorInactiveStyle:"outline",cursorBlink:!0,letterSpacing:0,theme:{foreground:"#bfbfbf",cursor:"gray",selectionForeground:"#ffffff"}},g=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"]},24963:function($,k,n){var K=n(67294),g=(0,K.createContext)({});k.Z=g},18568:function($,k,n){n.r(k),n.d(k,{default:function(){return sn}});var K=n(5574),g=n.n(K),V=n(62370),M=n(97462),G=n(42075),E=n(25593),W=n(80821),m=n(36146),L=n(1699),O=n(82346),e=n(85893);function T(i){var r=(0,O.useAccess)(),c=(0,e.jsxs)(G.Z,{style:{display:"block",marginTop:40},direction:"vertical",children:[(0,e.jsx)(V.Z,{name:i.name,hidden:!0}),(0,e.jsx)(M.Z,{name:[i.name],children:function(U){var j,s=U[i.name];return(0,e.jsxs)(V.Z,{label:i.label,children:[(0,e.jsxs)(G.Z.Compact,{children:[i.disable&&(0,e.jsx)(W.Z,{confirmProps:{showCommonDisabled:!0},buttonProps:{danger:i.disable(s),type:i.disable(s)?"primary":"default"},action:function(){return i.onDisable()},onSuccess:function(){i.onFinish&&i.onFinish()},children:(j=i.disableLabel)!==null&&j!==void 0?j:m.FD.format("listManageDisable")}),i.settingComponent&&(0,e.jsx)(i.settingComponent,{data:s,onFinish:i.onFinish})]}),(0,e.jsx)(E.Z.Text,{type:"secondary",style:{marginLeft:30},children:i.tip})]})}})]});return i.isPe?(0,e.jsx)(L.u,{access:["canSeeEnableCe"],showProRibbonTips:!0,children:function(U){var j=U.canSeeEnableCe;return c}}):c}var Y=n(15009),o=n.n(Y),R=n(99289),p=n.n(R),B=n(24963),P=n(87662),A=n(86548),Q=n(97937),I=n(184),S=n(5966),Z=n(83622),x=n(67294),N=n(3616),ne=function(r){var c=(0,x.useRef)(),d=(0,O.useModel)("@@initialState"),U=d.refresh,j=(0,x.useContext)(B.Z),s=j.message,y=new m.Uo("components.systemBasic"),D=(0,x.useState)(!1),b=g()(D,2),v=b[0],u=b[1];return(0,e.jsxs)(I.a,{trigger:(0,e.jsx)(Z.ZP,{type:"primary",children:m.FD.format("listManageSetting")}),onOpenChange:function(l){var t;u(l),l&&((t=c.current)===null||t===void 0||t.setFieldValue("username",r.data.username))},open:v,drawerProps:{width:N.R_,forceRender:!0},title:y.format("founderTitle"),formRef:c,onFinish:function(){var a=p()(o()().mark(function l(t){var _,h;return o()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,(0,P.Jn)({username:t.username,password:t.password,newPassword:t.newPassword});case 2:if(_=F.sent,!(_&&_.data)){F.next=9;break}return(h=c.current)===null||h===void 0||h.resetFields(),s.success(m.FD.format("finish")),localStorage.removeItem("token"),U(),F.abrupt("return",!0);case 9:case"end":return F.stop()}},l)}));return function(l){return a.apply(this,arguments)}}(),children:[(0,e.jsx)(M.Z,{name:["enableUsername"],children:function(l){var t=l.enableUsername;return(0,e.jsx)(S.Z,{label:y.format("founderUsername"),name:"username",width:"lg",disabled:!t,addonAfter:[(0,e.jsx)(Z.ZP,{type:"link",hidden:!!t,icon:(0,e.jsx)(A.Z,{}),onClick:function(){var h;(h=c.current)===null||h===void 0||h.setFieldValue("enableUsername",!0)}},"editBtn"),(0,e.jsx)(Z.ZP,{type:"link",hidden:!t,icon:(0,e.jsx)(Q.Z,{}),onClick:function(){var h;(h=c.current)===null||h===void 0||h.setFieldValue("enableUsername",!1)}},"closeBtn")]},"username")}}),(0,e.jsx)(S.Z.Password,{label:y.format("founderPassword"),name:"password",placeholder:y.format("founderPasswordEmpty"),rules:[{required:!0}]},"password"),(0,e.jsx)(S.Z.Password,{label:y.format("founderNewPassword"),name:"newPassword"},"newPasword"),(0,e.jsx)(M.Z,{name:["newPassword"],children:function(l){var t=l.newPassword;return(0,e.jsx)(S.Z.Password,{label:y.format("founderNewPassword2"),name:"newPassword2",dependencies:["newPassword"],rules:[{required:typeof t!="undefined"&&t!=""},function(_){var h=_.getFieldValue;return{validator:function(F,w){return!w||h("newPassword")===w?Promise.resolve():Promise.reject(new Error(y.format("founderMessagePasswordNotMatch")))}}}]},"newPasword2")}})]},"drawer")},te=ne,H=n(38345),ae=n(64317),q=n(52688),ee=n(86615),se=n(90672),le=n(40056),de=function(r){var c,d,U=(0,x.useContext)(B.Z),j=U.message,s=(0,x.useRef)(),y=new m.Uo("components.systemBasic"),D=(0,x.useState)(!1),b=g()(D,2),v=b[0],u=b[1];return(0,x.useEffect)(function(){if(s.current&&r.data){var a,l;(a=s.current)===null||a===void 0||a.setFieldsValue({loginFailedEnable:r.data.failedEnable,loginFailedTotal:r.data.failedTotal===0?5:r.data.failedTotal,loginFailedLockTime:r.data.failedLockTime?r.data.failedLockTime.toString():"900",loginNoPasswordEnable:r.data.noPasswordEnable,loginNoPasswordUrl:r.data.noPasswordUrl,loginNoPassworkUserAgent:r.data.noPasswordUserAgent,loginNoPasswordIpList:r.data.noPasswordIpList,loginDefaultRedirect:(l=r.data.defaultRedirect)!==null&&l!==void 0?l:"/home/overview"})}},[s.current]),(0,e.jsxs)(I.a,{drawerProps:{width:N.R_,destroyOnHidden:!0},trigger:(0,e.jsx)(Z.ZP,{type:(c=r.data)!==null&&c!==void 0&&c.failedEnable?"primary":"default",children:(d=r.data)!==null&&d!==void 0&&d.failedEnable?m.FD.format("listManageSetting"):m.FD.format("listManageEnable")}),onOpenChange:function(l){var t;u(l),!l&&((t=s.current)===null||t===void 0||t.resetFields())},open:v,title:y.format("loginTitle"),onFinish:function(){var a=p()(o()().mark(function l(t){var _;return o()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return _={failedEnable:t.loginFailedEnable,noPasswordEnable:t.loginNoPasswordEnable,defaultRedirect:t.loginDefaultRedirect},_.failedEnable&&(_.failedTotal=parseInt(t.loginFailedTotal),_.failedLockTime=parseInt(t.loginFailedLockTime)),_.noPasswordEnable&&(_=Object.assign(_,{noPasswordUrl:t.loginNoPasswordUrl,noPasswordUserAgent:t.loginNoPasswordUserAgent,noPasswordIplist:t.loginNoPasswordIplist})),f.next=5,(0,P.bv)({login:_,saveCache:!0});case 5:u(!1),j.success(m.FD.format("finish")),r.onFinish&&r.onFinish();case 8:case"end":return f.stop()}},l)}));return function(l){return a.apply(this,arguments)}}(),formRef:s,children:[(0,e.jsx)(H.Z,{title:y.format("loginBasicTitle"),ghost:!0,children:(0,e.jsx)(L.u,{access:["canSeeEnableCe"],showProRibbonTips:!0,children:function(l){var t=l.canSeeEnableCe;return(0,e.jsx)(ae.Z,{disabled:t,label:y.format("loginBasicDefaultRedirect"),name:"loginDefaultRedirect",options:y.option("loginBasicDefaultRedirectOption",["/home/overview","/home/tag","/app/list","/compose/list","/swarm/service"])})}})}),(0,e.jsxs)(H.Z,{title:y.format("loginFailedTitle"),ghost:!0,children:[(0,e.jsx)(q.Z,{name:"loginFailedEnable"}),(0,e.jsx)(S.Z,{name:"loginFailedTotal",label:y.format("loginFailedTotal"),fieldProps:{addonAfter:m.FD.format("unitTimes")}}),(0,e.jsx)(ee.Z.Group,{name:"loginFailedLockTime",label:y.format("loginFailedLockTime"),options:y.option("loginFailedLockTimeOption",["300","900","3600","18000","-1"])})]}),(0,e.jsxs)(H.Z,{title:y.format("loginNoPasswordTitle"),hidden:!0,ghost:!0,children:[(0,e.jsx)(le.Z,{message:"\u5F00\u542F\u514D\u5BC6\u767B\u5F55\u540E\uFF0C\u9762\u677F\u540E\u53F0\u5C06\u4E0D\u9700\u8981\u767B\u5F55\u3002\u6B64\u529F\u80FD\u4EC5\u9650\u4E8E\u5728\u672C\u5730\u6216\u662F\u5185\u7F51\u4E2D\u4F7F\u7528\uFF0C\u8BF7\u8C28\u614E\u5F00\u542F\u3002",type:"warning",style:{marginBottom:15}}),(0,e.jsx)(q.Z,{name:"loginNoPasswordEnable"}),(0,e.jsx)(L.u,{access:["canSeeEnableCe"],showProRibbonTips:!0,children:function(l){var t=l.canSeeEnableCe;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(S.Z,{disabled:t,label:"\u514D\u5BC6\u767B\u5F55\u5730\u5740",name:"loginNoPasswordUrl"}),(0,e.jsx)(S.Z,{disabled:t,label:"\u514D\u5BC6\u767B\u5F55 User-Agent",name:"loginNoPasswordUserAgent"}),(0,e.jsx)(se.Z,{disabled:t,label:"\u514D\u5BC6\u767B\u5F55 IP \u767D\u540D\u5355",name:"loginNoPasswordIpWhitelist"})]})}})]})]})},Ee=de;function ce(i){return re.apply(this,arguments)}function re(){return re=p()(o()().mark(function i(r){return o()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,O.request)("/api/pro/two-fa/enable",{method:"POST",data:r}));case 1:case"end":return d.stop()}},i)})),re.apply(this,arguments)}var be=n(29104),Te=function(r){var c,d,U=new m.Uo("components.systemBasic"),j=(0,O.useAccess)(),s=(0,x.useRef)(),y=(0,x.useContext)(B.Z),D=y.message,b=(0,x.useState)(!1),v=g()(b,2),u=v[0],a=v[1],l=(0,O.useModel)("@@initialState"),t=l.initialState;return(0,x.useEffect)(function(){if(s.current&&!j.canSeeEnableCe&&t){var _;if(!r.data||!r.data.enable)var h=ce({email:t==null?void 0:t.user.username,enable:!1}).then(function(w){var C,z;(C=s.current)===null||C===void 0||C.setFieldValue("twoFaEmail",t.user.username),(z=s.current)===null||z===void 0||z.setFieldValue("towFaQrcode",w.data.qrCode)});else{var f,F;(f=s.current)===null||f===void 0||f.setFieldValue("twoFaEmail",r.data.email),(F=s.current)===null||F===void 0||F.setFieldValue("towFaQrcode",r.data.qrCode)}(_=s.current)===null||_===void 0||_.setFieldValue("twoFaCode","")}},[s.current]),(0,e.jsx)(I.a,{drawerProps:{width:N.R_,destroyOnHidden:!0},trigger:(0,e.jsx)(Z.ZP,{disabled:j.canSeeEnableCe,style:{width:90},type:(c=r.data)!==null&&c!==void 0&&c.enable?"primary":"default",children:(d=r.data)!==null&&d!==void 0&&d.enable?m.FD.format("listManageSetting"):m.FD.format("listManageEnable")}),onOpenChange:function(){var _=p()(o()().mark(function h(f){var F;return o()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:a(f),!f&&((F=s.current)===null||F===void 0||F.resetFields());case 2:case"end":return C.stop()}},h)}));return function(h){return _.apply(this,arguments)}}(),open:u,title:U.format("twoFaTitle"),onFinish:function(){var _=p()(o()().mark(function h(f){var F;return o()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(j.canSeeEnableCe){C.next=4;break}return C.next=3,ce({email:f.twoFaEmail,enable:!0,code:f.twoFaCode});case 3:F=C.sent;case 4:D.success(m.FD.format("finish")),a(!1),r.onFinish&&r.onFinish();case 7:case"end":return C.stop()}},h)}));return function(h){return _.apply(this,arguments)}}(),formRef:s,children:(0,e.jsx)(L.u,{access:"canSeeEnableCe",showProRibbonTips:!0,children:function(h){var f=h.canSeeEnableCe;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(S.Z,{label:U.format("twoFaEmail"),name:"twoFaEmail",disabled:!0,placeholder:U.format("twoFaEmailEmpty")}),(0,e.jsx)(S.Z,{label:"\u9A8C\u8BC1\u7801",name:"twoFaCode",required:!0,disabled:f,rules:[{required:!0}]}),(0,e.jsx)(V.Z,{label:U.format("twoFaQrcode"),tooltip:U.format("twoFaQrcodeTip"),shouldUpdate:!0,children:function(w){var C=w.getFieldValue("towFaQrcode");return C&&(0,e.jsx)(be.Z,{style:{border:"#d1d9e0b3 solid 1px",padding:"10px",borderRadius:"10px"},width:200,src:"data:image/png;base64,".concat(C)})}})]})}})})},Ue=Te,we=n(29177),Oe=n(74453),Me=n(97269),De=n(86125);function Ze(i){var r=(0,O.useModel)("@@initialState"),c=r.initialState,d=(0,O.useAccess)(),U=(0,x.useContext)(B.Z),j=U.message,s=new m.Uo("components.systemBasic"),y=(0,x.useState)(!1),D=g()(y,2),b=D[0],v=D[1],u=(0,x.useRef)();return(0,x.useEffect)(function(){if(u.current){var a,l,t,_,h,f,F,w;(a=u.current)===null||a===void 0||a.setFieldsValue({algorithm:(l=c==null?void 0:c.theme.algorithm)!==null&&l!==void 0?l:"default",mainMenu:(t=c==null?void 0:c.theme.mainMenu)!==null&&t!==void 0?t:"top",compact:(_=c==null?void 0:c.theme.compact)!==null&&_!==void 0?_:"default",fontSize:(h=c==null?void 0:c.theme.fontSize)!==null&&h!==void 0?h:14,fontSizeConsole:(f=c==null?void 0:c.theme.fontSizeConsole)!==null&&f!==void 0?f:12,sideMenu:(F=c==null?void 0:c.theme.sideMenu)!==null&&F!==void 0?F:"default",tablePageSize:(w=c==null?void 0:c.theme.tablePageSize)!==null&&w!==void 0?w:"20"})}},[c,u.current]),(0,e.jsxs)(I.a,{formRef:u,drawerProps:{width:N.R_,destroyOnHidden:!0},onOpenChange:function(l){var t;v(l),!l&&((t=u.current)===null||t===void 0||t.resetFields())},open:b,trigger:(0,e.jsx)(Z.ZP,{type:"primary",children:m.FD.format("listManageSetting")}),onFinish:function(){var a=p()(o()().mark(function l(t){var _;return o()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(_={algorithm:t.algorithm,mainMenu:t.mainMenu,sideMenu:t.sideMenu,compact:t.compact,fontSizeConsole:t.fontSizeConsole,fontSize:t.fontSize,tablePageSize:t.tablePageSize},!(t.algorithm!=(c==null?void 0:c.theme.algorithm)&&!d.canSeeEnableCe)){f.next=4;break}return f.next=4,(0,P.GV)({groupName:"setting",name:"themeUserConfig"});case 4:return localStorage.setItem("dpanel-theme",t.algorithm),localStorage.setItem("dpanel-compact",t.compact),localStorage.setItem("dpanel-pagesize",t.tablePageSize),f.next=9,(0,P.bv)({theme:_});case 9:j.success(m.FD.format("finishTheme")),v(!1),i.onFinish&&i.onFinish();case 12:case"end":return f.stop()}},l)}));return function(l){return a.apply(this,arguments)}}(),children:[(0,e.jsx)(ee.Z.Group,{name:"algorithm",label:s.format("themeConfigAlgorithm"),initialValue:"default",radioType:"button",options:s.option("themeConfigAlgorithmOption",["default","dark","system"]),fieldProps:{onChange:function(l){l.target.value=="system"&&j.warning("\u4E3B\u9898\u76AE\u80A4\u914D\u7F6E\u4E3A\u8DDF\u968F\u7CFB\u7EDF\u540E\uFF0C\u5C06\u4F1A\u6E05\u7A7A\u81EA\u5B9A\u4E49\u4E3B\u9898\u98CE\u683C")}}}),(0,e.jsx)(ee.Z.Group,{name:"mainMenu",label:s.format("themeConfigMainMenu"),initialValue:"top",radioType:"button",options:s.option("themeConfigMainMenuOption",["top","side"])}),(0,e.jsx)(ee.Z.Group,{name:"sideMenu",label:s.format("themeConfigSideMenu"),initialValue:"default",radioType:"button",options:s.option("themeConfigSideMenuOption",["default","collapse"])}),(0,e.jsx)(ee.Z.Group,{name:"compact",label:s.format("themeConfigCompact"),initialValue:"default",radioType:"button",options:s.option("themeConfigCompactOption",["default","compact"])}),(0,e.jsx)(V.Z,{name:"fontSize",label:s.format("themeConfigFontSize"),initialValue:14,children:(0,e.jsx)(De.Z,{step:2,max:30,min:8,marks:{8:"8",10:"10",12:"12",14:"14",16:"16",20:"20",26:"26"}})}),(0,e.jsx)(ae.Z,{initialValue:"20",label:s.format("themeConfigTablePageSize"),name:"tablePageSize",options:s.option("themeConfigTablePageSizeOption",["5","10","20","50","100","all"])})]})}var J=n(24739),Le=n(25054),oe=n(31199),Be=n(21532),_e=n(86250),Ie=n(44349);function Re(i){return Ce.apply(this,arguments)}function Ce(){return Ce=p()(o()().mark(function i(r){return o()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,O.request)("/api/pro/theme/save-theme-user-config",{method:"POST",data:r});case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},i)})),Ce.apply(this,arguments)}var Ae=n(2808),fe=n(51100),We=n(96486),ke=n.n(We),ue={colorPrimary:"",colorTextBase:"",colorLink:"",colorBgContainer:"",colorBorder:"",colorBgElevated:"",colorBorderSecondary:"colorBorder"},pe=["borderRadius","wireframe"],Ke=function(r){var c=(0,O.useAccess)(),d=(0,x.useRef)(),U=(0,x.useContext)(B.Z),j=U.message,s=new m.Uo("components.systemBasic"),y=(0,x.useState)(!1),D=g()(y,2),b=D[0],v=D[1],u=function(l){return(0,e.jsx)(Ae.Z,{name:l.name,label:s.format("themeUserConfigOption.".concat(l.name)),tooltip:l.tooltip})};return(0,x.useEffect)(function(){if(!c.canSeeEnableCe&&d.current&&r.data){var a,l;if((a=d.current)===null||a===void 0||a.resetFields(["bgImageUpload","siteLogoUpload"]),pe.forEach(function(h){if(r.data&&r.data.token&&r.data.token[h]){var f,F;(f=d.current)===null||f===void 0||f.setFieldValue("enableStyle",!0),(F=d.current)===null||F===void 0||F.setFieldValue(h,r.data.token[h])}}),(l=d.current)===null||l===void 0||l.setFieldsValue({siteLogo:r.data.siteLogo,siteTitle:r.data.siteTitle,siteCopyright:r.data.siteCopyright,siteLink:r.data.siteLink,bgImage:r.data.bgImage,loginLogo:r.data.loginLogo}),!r.data.bgImage||!r.data.bgImage.width||r.data.bgImage.width=="100%"){var t;(t=d.current)===null||t===void 0||t.setFieldValue("bgSize","full")}else{var _;(_=d.current)===null||_===void 0||_.setFieldValue("bgSize","default")}Object.keys(ue).map(function(h){var f=h;ue[h]!=""&&(f=ue[h]),d!=null&&d.current&&r.data&&r.data.token&&!ke().isEmpty(r.data.token)&&(d==null||d.current.setFieldValue("enableColor",!0),d==null||d.current.setFieldValue(h,r.data.token[f]))})}},[d.current]),(0,e.jsx)(Be.ZP,{children:(0,e.jsxs)(I.a,{trigger:(0,e.jsx)(Z.ZP,{disabled:c.canSeeEnableCe,type:"primary",children:m.FD.format("listManageSetting")}),drawerProps:{width:N.R_},onOpenChange:function(l){var t;v(l),!l&&((t=d.current)===null||t===void 0||t.resetFields())},open:b,title:s.format("themeUserConfigTitle"),formRef:d,onFinish:function(){var a=p()(o()().mark(function l(t){var _,h,f;return o()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(!c.canSeeEnableCe){w.next=2;break}return w.abrupt("return",!1);case 2:return f={token:{},bgImage:t.bgImage,siteLink:t.siteLink,siteTitle:(_=t.siteTitle)!==null&&_!==void 0?_:"",siteCopyright:t.siteCopyright,siteLogo:(h=t.siteLogo)!==null&&h!==void 0?h:"",loginLogo:t.loginLogo},t.siteLogoUpload&&t.siteLogoUpload.length>0&&(f.siteLogo=t.siteLogoUpload[0].response.data.path),f.bgImage||(f.bgImage={}),t.bgImageUpload&&t.bgImageUpload.length>0&&(f.bgImage.src=t.bgImageUpload[0].response.data.path),f.bgImage.width=t.bgSize=="full"?"100%":"",t.loginLogoUpload&&t.loginLogoUpload.length>0&&(f.loginLogo=t.loginLogoUpload[0].response.data.path),Object.keys(ue).map(function(C){f.token||(f.token={});var z=C;ue[C]!=""&&(z=ue[C]);var X=d.current&&d.current.getFieldValue(z);X&&X.toHexString?X.cleared||(f.token[C]=X.toHexString()):f.token[C]=X}),pe.map(function(C){f.token||(f.token={});var z=d.current&&d.current.getFieldValue(C);f.token[C]=z}),w.next=12,Re(f);case 12:return r.onFinish&&r.onFinish(),j.success(m.FD.format("finishTheme")),w.abrupt("return",!0);case 15:case"end":return w.stop()}},l)}));return function(l){return a.apply(this,arguments)}}(),children:[(0,e.jsx)(J.UW,{title:s.format("themeUserConfigColorTitle"),extra:(0,e.jsx)(q.Z,{name:"enableColor"})}),(0,e.jsx)(M.Z,{name:["enableColor"],children:function(l){var t=l.enableColor;return t&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(J.UW,{children:u({name:"colorPrimary",tooltip:s.format("themeUserConfigColorPrimaryTip")})}),(0,e.jsxs)(J.UW,{children:[u({name:"colorBgContainer"}),u({name:"colorBgElevated"})]}),(0,e.jsxs)(J.UW,{children:[u({name:"colorTextBase"}),u({name:"colorLink"}),u({name:"colorBorder"})]})]})}}),(0,e.jsx)(J.UW,{title:s.format("themeUserConfigStyleTitle"),extra:(0,e.jsx)(q.Z,{name:"enableStyle"})}),(0,e.jsx)(M.Z,{name:["enableStyle"],children:function(l){var t=l.enableStyle;return t&&(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(J.UW,{children:(0,e.jsxs)(_e.Z,{gap:40,children:[(0,e.jsx)(q.Z,{label:s.format("themeUserConfigWireframe"),name:"wireframe"}),(0,e.jsx)(Le.Z,{min:1,max:16,label:s.format("themeUserConfigBorderRadius"),name:"borderRadius"})]})})})}}),(0,e.jsx)(J.UW,{title:s.format("themeUserConfigUiTitle")}),(0,e.jsx)(S.Z,{label:s.format("themeUserConfigSiteTitle"),name:"siteTitle",placeholder:s.format("themeUserConfigSiteTitleEmpty")}),(0,e.jsxs)(J.UW,{children:[(0,e.jsx)(fe.Z,{label:"Logo",title:s.format("themeUserConfigSiteLogoUploadTitle"),name:"siteLogoUpload",accept:".jpg,.png,.webp,.svg"}),(0,e.jsx)(S.Z,{width:"md",placeholder:s.format("themeUserConfigSiteLogoEmpty"),label:s.format("themeUserConfigSiteLogo"),name:"siteLogo"})]}),(0,e.jsxs)(J.UW,{children:[(0,e.jsx)(fe.Z,{label:s.format("themeUserConfigBgImageUpload"),title:s.format("themeUserConfigBgImageUploadTitle"),name:"bgImageUpload",accept:".jpg,.png,.webp,.svg"}),(0,e.jsx)(S.Z,{width:"md",placeholder:s.format("themeUserConfigSiteLogoEmpty"),label:s.format("themeUserConfigBgImageSrc"),name:["bgImage","src"]}),(0,e.jsx)(ee.Z.Group,{name:"bgSize",label:s.format("themeUserConfigBgImageBgSize"),initialValue:"full",options:s.option("themeUserConfigBgImageBgSizeOption",["full","default"])})]}),(0,e.jsx)(J.UW,{children:(0,e.jsx)(M.Z,{name:["bgSize"],children:function(l){var t=l.bgSize;if(t=="default")return(0,e.jsxs)(J.UW,{children:[(0,e.jsx)(oe.Z,{width:"xs",name:["bgImage","top"],label:s.format("themeUserConfigBgImageTop")}),(0,e.jsx)(oe.Z,{width:"xs",name:["bgImage","bottom"],label:s.format("themeUserConfigBgImageBottom")}),(0,e.jsx)(oe.Z,{width:"xs",name:["bgImage","left"],label:s.format("themeUserConfigBgImageLeft")}),(0,e.jsx)(oe.Z,{width:"xs",name:["bgImage","right"],label:s.format("themeUserConfigBgImageRight")})]})}})}),(0,e.jsx)(Ie.Z,{name:"siteLink",label:s.format("themeUserConfigSiteLink"),showAddButton:!0,hideCopyButton:!0,gap:10,items:s.option("themeUserConfigSiteLinkOption",["title","href"]).map(function(a){return{name:a.value,label:a.label}})}),(0,e.jsx)(se.Z,{label:s.format("themeUserConfigSiteCopyright"),name:"siteCopyright"}),(0,e.jsxs)(J.UW,{title:s.format("themeUserConfigUiLoginTitle"),children:[(0,e.jsx)(fe.Z,{label:"Logo",title:"Logo",name:"loginLogoUpload",accept:".jpg,.png,.webp,.svg"}),(0,e.jsx)(S.Z,{width:"md",placeholder:s.format("themeUserConfigSiteLogoEmpty"),label:s.format("themeUserConfigLoginLogo"),name:"loginLogo"})]})]})})},Ne=Ke,Ve=n(19400),Se=n(2487),ze=n(4393),He=n(71230),Ge=n(15746),Qe=n(40411),ye=n(12323),Ye=n(64304),he=n.n(Ye);function Xe(i){var r=new m.Uo("components.systemBasic"),c=(0,O.useAccess)(),d=(0,x.useContext)(B.Z),U=d.message,j=(0,x.useState)(),s=g()(j,2),y=s[0],D=s[1],b=(0,x.useState)(),v=g()(b,2),u=v[0],a=v[1],l=(0,x.useRef)(),t=(0,x.useState)(!1),_=g()(t,2),h=_[0],f=_[1];return(0,x.useEffect)(function(){if(l.current&&i.data){var F,w,C=ye.X;i.data&&Object.assign(C,i.data),!c.canSeeEnableCe&&i.data&&(F=i.data)!==null&&F!==void 0&&F.themeName&&i.data.themeName!=""&&Object.keys(he()).forEach(function(z,X){i.data&&z==i.data.themeName&&(a(Math.ceil((X+1)/36)),D(i.data.themeName))}),(w=l.current)===null||w===void 0||w.setFieldsValue({fontSize:C.fontSize,lineHeight:C.lineHeight,letterSpacing:C.letterSpacing,fontWeight:C.fontWeight,cursorStyle:C.cursorStyle,cursorInactiveStyle:C.cursorInactiveStyle,cursorBlink:C.cursorBlink})}},[l.current,i.data]),(0,e.jsxs)(I.a,{onOpenChange:function(w){var C;f(w),!w&&((C=l.current)===null||C===void 0||C.resetFields())},open:h,title:r.format("themeConsoleTitle"),formRef:l,drawerProps:{width:N.R_,destroyOnHidden:!0},trigger:(0,e.jsx)(Z.ZP,{type:"primary",children:m.FD.format("listManageSetting")}),onFinish:function(){var F=p()(o()().mark(function w(C){var z;return o()().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return z={fontSize:C.fontSize,lineHeight:C.lineHeight,letterSpacing:C.letterSpacing,fontWeight:C.fontWeight,cursorStyle:C.cursorStyle,cursorInactiveStyle:C.cursorInactiveStyle,cursorBlink:C.cursorBlink,theme:{},themeName:""},y!=""&&!c.canSeeEnableCe&&(z.theme=he()[y],z.themeName=y),ie.next=4,(0,P.bv)({console:z});case 4:return U.success(m.FD.format("finishTheme")),f(!1),i.onFinish&&i.onFinish(),ie.abrupt("return",!0);case 8:case"end":return ie.stop()}},w)}));return function(w){return F.apply(this,arguments)}}(),children:[(0,e.jsx)(J.UW,{title:r.format("themeConsoleFont"),children:(0,e.jsxs)(_e.Z,{gap:50,children:[(0,e.jsx)(oe.Z,{label:r.format("themeConsoleFontSize"),name:"fontSize",tooltip:r.format("themeConsoleFontSizeTip"),fieldProps:{addonAfter:"px"}}),(0,e.jsx)(oe.Z,{label:r.format("themeConsoleLineHeight"),name:"lineHeight",tooltip:r.format("themeConsoleLineHeightTip"),fieldProps:{addonAfter:r.format("themeConsoleLineHeightUnit")}}),(0,e.jsx)(oe.Z,{label:r.format("themeConsoleLetterSpacing"),name:"letterSpacing",fieldProps:{addonAfter:"px"},tooltip:r.format("themeConsoleLetterSpacingTip")}),(0,e.jsx)(ae.Z,{label:r.format("themeConsoleFontWeight"),name:"fontWeight",options:[{label:"normal",value:"normal"},{label:"bold",value:"bold"},{label:"100",value:"100"},{label:"200",value:"200"},{label:"300",value:"300"},{label:"400",value:"400"},{label:"500",value:"500"},{label:"600",value:"600"},{label:"700",value:"700"},{label:"800",value:"800"},{label:"900",value:"900"}]})]})}),(0,e.jsx)(J.UW,{title:r.format("themeConsoleCursorStyleTitle"),children:(0,e.jsxs)(_e.Z,{gap:50,children:[(0,e.jsx)(ae.Z,{label:r.format("themeConsoleCursorStyle"),name:"cursorStyle",width:"sm",options:r.option("themeConsoleCursorStyleOption",["bar","underline","block"])}),(0,e.jsx)(ae.Z,{label:r.format("themeConsoleCursorInactiveStyle"),name:"cursorInactiveStyle",width:"sm",options:r.option("themeConsoleCursorStyleOption",["bar","underline","block","outline"])}),(0,e.jsx)(q.Z,{label:r.format("themeConsoleCursorBlink"),name:"cursorBlink"})]})}),(0,e.jsx)(L.u,{showProRibbonTips:!0,access:"canSeeEnableCe",children:function(w){var C=w.canSeeEnableCe;return(0,e.jsx)(H.Z,{ghost:!0,title:(0,e.jsx)(Ve.Z,{}),subTitle:r.format("themeConsoleTheme"),children:(0,e.jsx)(Se.Z,{split:!0,style:{overflow:"hidden"},grid:{column:6},pagination:{pageSize:36,current:u,onChange:function(X,ie){a(X)}},dataSource:Object.keys(he()).map(function(z){return{label:z,value:z,data:he()[z]}}),renderItem:function(X,ie){var ve=X.data,Fe=(0,e.jsxs)(ze.Z,{style:{backgroundColor:ve.background,color:ve.foreground,textAlign:"center",cursor:C?"not-allowed":"pointer",borderRadius:0},onClick:function(){if(!C){var xe;(xe=l.current)===null||xe===void 0||xe.setFieldValue("theme",X.data),D(X.label)}},hoverable:!0,children:[(0,e.jsx)(He.Z,{wrap:!0,gutter:[2,2],justify:"center",align:"middle",children:ye.n.filter(function(me){return ve[me]!=""}).map(function(me){return(0,e.jsx)(Ge.Z,{style:{backgroundColor:ve[me],padding:8}},me)})}),(0,e.jsx)("div",{style:{paddingTop:5},children:X.label})]});return(0,e.jsx)(Se.Z.Item,{style:{margin:0},children:y==X.label?(0,e.jsx)(Qe.Z.Ribbon,{text:"Checked",children:Fe}):Fe},ie)}})})}})]})}var Je=n(63434);function $e(i){var r=new m.Uo("components.systemBasic"),c=(0,x.useRef)(),d=(0,x.useState)(!1),U=g()(d,2),j=U[0],s=U[1],y=(0,x.useContext)(B.Z),D=y.message;return(0,x.useEffect)(function(){if(c.current&&i.data){var b;(b=c.current)===null||b===void 0||b.setFieldsValue(i.data)}},[c.current,i.data]),(0,e.jsxs)(I.a,{drawerProps:{width:N.R_,destroyOnHidden:!0},trigger:(0,e.jsx)(Z.ZP,{style:{width:150},type:"primary",children:m.FD.format("listManageSetting")}),onOpenChange:function(v){var u;s(v),!v&&((u=c.current)===null||u===void 0||u.resetFields())},open:j,title:r.format("notificationTitle"),onFinish:function(){var b=p()(o()().mark(function v(u){return o()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,P.bv)({notification:{emailServer:u.emailServer}});case 2:s(!1),D.success(m.FD.format("finish")),i.onFinish&&i.onFinish();case 5:case"end":return l.stop()}},v)}));return function(v){return b.apply(this,arguments)}}(),formRef:c,children:[(0,e.jsx)(J.UW,{title:r.format("notificationEmailTitle")}),(0,e.jsx)(S.Z,{label:r.format("notificationEmailHost"),name:["emailServer","host"],tooltip:r.format("notificationEmailHostTip"),required:!0,rules:[{required:!0}]}),(0,e.jsx)(oe.Z,{label:r.format("notificationEmailPort"),name:["emailServer","port"],required:!0,rules:[{required:!0}],initialValue:465}),(0,e.jsx)(S.Z,{label:r.format("notificationEmailCode"),name:["emailServer","code"],width:"lg",placeholder:r.format("notificationEmailCodeTip"),required:!0,rules:[{required:!0}],addonAfter:(0,e.jsxs)(G.Z,{children:[(0,e.jsx)("a",{target:"_blank",href:"https://service.mail.qq.com/detail/0/75",children:r.format("notificationEmailCodeHelp.qq")}),(0,e.jsx)("a",{target:"_blank",href:"https://help.mail.163.com/faqDetail.do?code=d7a5dc8471cd0c0e8b4b8f4f8e49998b374173cfe9171305fa1ce630d7f67ac286624f309a1a7089",children:r.format("notificationEmailCodeHelp.163")})]})}),(0,e.jsx)(S.Z,{label:r.format("notificationEmailEmail"),name:["emailServer","email"],required:!0,rules:[{required:!0}],width:"lg",addonAfter:(0,e.jsx)(W.Z,{buttonProps:{type:"primary"},tips:r.format("notificationEmailTestTip"),action:p()(o()().mark(function b(){var v;return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,P.FB)({emailServer:(v=c.current)===null||v===void 0?void 0:v.getFieldValue("emailServer"),subject:r.format("notificationEmailTestSubject"),content:r.format("notificationEmailTestContent",{time:new Date().toISOString()})});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},b)})),children:r.format("notificationEmailTestButton")},"testEmail")}),(0,e.jsx)(L.u,{access:"canSeeEnableEe",children:(0,e.jsx)(Je.Z.Group,{name:"status",label:r.format("notificationEmailStatus"),options:r.option("notificationEmailStatusOption",["register"])})})]})}var qe=n(19632),en=n.n(qe),Pe=n(5251),ge=n(89035);function nn(i){var r=(0,x.useState)([]),c=g()(r,2),d=c[0],U=c[1],j=new m.Uo("components.systemBasic");return(0,x.useEffect)(function(){var s,y,D;if(i.data){var b;!((s=i.data.info)===null||s===void 0)&&s.Mounts&&i.data.info.Mounts.forEach(function(h){h.Type=="volume"&&h.Name&&(b=h.Name)});var v=((y=i.data.info)===null||y===void 0||(y=y.HostConfig)===null||y===void 0?void 0:y.PortBindings)&&Object.entries(i.data.info.HostConfig.PortBindings).map(function(h){var f=g()(h,2),F=f[0],w=f[1];return w.map(function(C){return"-p ".concat(C.HostPort,":").concat(String(parseInt(F)))})}),u=!1,a=((D=i.data.info)===null||D===void 0||(D=D.HostConfig)===null||D===void 0?void 0:D.Binds)&&i.data.info.HostConfig.Binds.map(function(h){return h.indexOf(":/dpanel")>-1&&(u=!0),"-v ".concat(h)});if(!u){var l,b="";!((l=i.data.info)===null||l===void 0)&&l.Mounts&&i.data.info.Mounts.forEach(function(f){f.Type=="volume"&&f.Name&&(b=f.Name)}),a||(a=[]),a.push("-v "+b+":/dpanel")}if(i.data.info&&i.data.info.Config){var t=(0,Pe.fi)(i.data.info.Name,"/"),_=["docker stop ".concat(t," && docker rm ").concat(t),"docker pull ".concat(i.data.info.Config.Image),"docker run -d --name ".concat(t," -e APP_NAME=").concat(t," --restart=always ").concat(v&&v.join(" ")," ").concat(a&&a.join(" ")," ").concat(i.data.info.Config.Image)];i.data.info.NetworkSettings.Networks&&i.data.info.NetworkSettings.Networks["dpanel-local"]&&(_=[].concat(en()(_),["docker network connect --alias dpanel.pod.dpanel.local dpanel-local ".concat(t)])),U(_)}}},[i.data]),(0,e.jsx)(I.a,{drawerProps:{width:N.R_,destroyOnHidden:!0},title:j.format("upgradeTitle"),trigger:(0,e.jsx)(Z.ZP,{style:{width:150},children:m.FD.format("listManageView")}),children:(0,e.jsxs)(H.Z,{direction:"column",ghost:!0,children:[(0,e.jsx)(le.Z,{message:j.format("upgradeAlertTitle"),showIcon:!0,description:(0,e.jsxs)("ol",{style:{marginLeft:"-20px"},children:[(0,e.jsx)("li",{children:j.format("upgradeAlertContent1")}),(0,e.jsx)("li",{children:j.format("upgradeAlertContent2")}),(0,e.jsx)("li",{children:j.format("upgradeAlertContent3")}),(0,e.jsx)("li",{children:(0,e.jsx)(E.Z.Text,{type:"danger",children:j.format("upgradeAlertContent4")})})]}),type:"warning",style:{marginBottom:"20px"}}),(0,e.jsxs)(H.Z,{ghost:!0,style:{paddingBottom:50},direction:"column",gutter:[10,50],children:[(0,e.jsx)(H.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(ge.Z,{}),bodyStyle:{padding:"10px",background:"#24292f"},subTitle:(0,e.jsxs)(e.Fragment,{children:[j.format("upgradeShellRootLessTitle")," ",(0,e.jsx)("a",{href:"https://dpanel.cc/install/shell",target:"_blank",children:m.FD.format("help")})]}),children:(0,e.jsx)(E.Z.Text,{copyable:!0,style:{color:"#ffffff"},children:"sudo curl -sSL https://dpanel.cc/quick.sh -o quick.sh && sudo bash quick.sh"})}),(0,e.jsx)(H.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(ge.Z,{}),bodyStyle:{padding:"10px",background:"#24292f"},subTitle:(0,e.jsxs)(e.Fragment,{children:[j.format("upgradeShellRootTitle")," ",(0,e.jsx)("a",{href:"https://dpanel.cc/install/shell",target:"_blank",children:m.FD.format("help")})]}),children:(0,e.jsx)(E.Z.Text,{copyable:!0,style:{color:"#ffffff"},children:"curl -sSL https://dpanel.cc/quick.sh -o quick.sh && bash quick.sh"})}),(0,e.jsx)(H.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(ge.Z,{}),bodyStyle:{padding:"10px",background:"#24292f"},subTitle:(0,e.jsxs)(e.Fragment,{children:[j.format("upgradeDockerrunTitle")," ",(0,e.jsx)("a",{href:"https://dpanel.cc/manual/system-dpanel-upgrade",target:"_blank",children:m.FD.format("help")})]}),children:d&&d.length>0?(0,e.jsx)(E.Z.Paragraph,{copyable:!0,style:{color:"#ffffff"},children:'sudo sh -c "'.concat(d.join(" && "),'"')}):(0,e.jsx)("span",{style:{color:"#ffffff"},children:m.FD.format("systemUpgradeDPanelNotFound")})}),(0,e.jsx)(H.Z,{bordered:!0,headerBordered:!0,title:(0,e.jsx)(ge.Z,{}),bodyStyle:{padding:"10px",background:"#24292f"},subTitle:(0,e.jsxs)(e.Fragment,{children:[j.format("upgradeBinaryTitle")," ",(0,e.jsx)("a",{href:"https://github.com/donknap/dpanel/releases",target:"_blank",children:m.FD.format("help")})]}),children:(0,e.jsx)("span",{style:{color:"#ffffff"},children:j.format("upgradeBinaryTip")})})]})]})})}var tn=n(96074),je=n(89075),an=n(93162),rn=n(27771),on=n(12119);function ln(){var i=new m.Uo("components.systemBasic"),r=(0,x.useState)(!1),c=g()(r,2),d=c[0],U=c[1],j=(0,x.useRef)(),s=(0,O.useAccess)(),y=(0,x.useState)(0),D=g()(y,2),b=D[0],v=D[1];return(0,x.useEffect)(function(){j.current&&(j.current.resetFields(),!s.canSeeEnableCe&&(0,je.YQ)().then(function(u){var a;(a=j.current)===null||a===void 0||a.setFieldValue("expireTime","".concat((0,Pe.NF)(u.data.expireTime)))}))},[j.current,b]),(0,e.jsxs)(I.a,{drawerProps:{width:N.R_,destroyOnHidden:!0,extra:(0,e.jsx)("a",{target:"_blank",href:"https://dpanel.cc/pro",children:m.FD.format("help")})},submitter:!1,onFinish:function(){var u=p()(o()().mark(function a(l){var t;return o()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!(l.uploadCertUpload&&(0,rn.Z)(l.uploadCertUpload))){h.next=4;break}return h.next=3,(0,je.E1)({fileName:l.uploadCertUpload[0].response.data.path});case 3:t=h.sent;case 4:return v(b+1),h.abrupt("return",!1);case 6:case"end":return h.stop()}},a)}));return function(a){return u.apply(this,arguments)}}(),formRef:j,open:d,onOpenChange:function(a){U(a)},title:i.format("proTitle"),trigger:(0,e.jsx)(Z.ZP,{style:{width:150},children:m.FD.format("listManageManage")}),children:[(0,e.jsx)(le.Z,{type:"warning",message:(0,e.jsxs)(e.Fragment,{children:[i.format("proThanks")," ",(0,e.jsx)("a",{target:"_blank",href:"https://dpanel.cc/pro",children:i.format("proBuyButton")})]})}),(0,e.jsx)(tn.Z,{orientation:"center",children:(0,e.jsx)(on.Z,{})}),(0,e.jsx)(S.Z,{name:"expireTime",label:m.FD.format("listExpireAt"),readonly:!0}),(0,e.jsx)(V.Z,{children:(0,e.jsx)(Z.ZP,{onClick:p()(o()().mark(function u(){var a,l;return o()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,je.$w)();case 2:a=_.sent,l=new Blob([a.data.code],{type:"text/plain"}),(0,an.saveAs)(l,"dpanel.code");case 5:case"end":return _.stop()}},u)})),block:!0,children:i.format("getMachineId")},"downloadCode")}),(0,e.jsx)(fe.Z,{showDragger:!0,required:!0,label:i.format("uploadCertUpload"),name:"uploadCertUpload",accept:".lic",onFinish:function(a){var l;(l=j.current)===null||l===void 0||l.submit()}})]})}function sn(){var i=new m.Uo("components.systemBasic"),r=(0,x.useState)(0),c=g()(r,2),d=c[0],U=c[1],j=(0,x.useRef)(),s=(0,x.useContext)(B.Z),y=s.loading,D=(0,O.useAccess)();return(0,x.useEffect)(function(){var b;y.show(),(b=j.current)===null||b===void 0||b.resetFields(),Promise.all([(0,P.pe)({groupName:"user",name:"founder"}).then(function(v){var u;(u=j.current)===null||u===void 0||u.setFieldsValue({founder:v.data})}),(0,P.pe)({groupName:"setting",name:"login"}).then(function(v){var u,a;(u=j.current)===null||u===void 0||u.setFieldsValue({login:(a=v.data)!==null&&a!==void 0?a:{}})}),!D.canSeeEnableCe&&(0,P.pe)({groupName:"setting",name:"twoFa"}).then(function(v){var u,a;(u=j.current)===null||u===void 0||u.setFieldsValue({twoFa:(a=v.data)!==null&&a!==void 0?a:{}})}),!D.canSeeEnableCe&&(0,P.pe)({groupName:"setting",name:"themeUserConfig"}).then(function(v){var u,a;(u=j.current)===null||u===void 0||u.setFieldsValue({themeUserConfig:(a=v.data)!==null&&a!==void 0?a:{}})}),(0,P.pe)({groupName:"setting",name:"themeConsoleConfig"}).then(function(v){var u,a;(u=j.current)===null||u===void 0||u.setFieldsValue({themeConsoleConfig:(a=v.data)!==null&&a!==void 0?a:{}})}),(0,P.pe)({groupName:"setting",name:"themeConfig"}).then(function(v){var u,a;(u=j.current)===null||u===void 0||u.setFieldsValue({themeConfig:(a=v.data)!==null&&a!==void 0?a:{}})}),(0,P.pe)({groupName:"setting",name:"notification"}).then(function(v){var u,a;(u=j.current)===null||u===void 0||u.setFieldsValue({notification:(a=v.data)!==null&&a!==void 0?a:{}})}),(0,P.d6)().then(function(v){var u,a;(u=j.current)===null||u===void 0||u.setFieldValue("upgradeScript",(a=v.data)!==null&&a!==void 0?a:{})})]).finally(function(){y.destroy()})},[d]),(0,e.jsx)(Oe._z,{children:(0,e.jsx)(H.Z,{children:(0,e.jsxs)(Me.A,{layout:"horizontal",labelAlign:"left",labelCol:{xs:7,sm:6,md:5,lg:5,xl:4,xxl:3,offset:0},submitter:!1,formRef:j,children:[(0,e.jsx)(M.Z,{name:["founder"],children:function(v){var u=v.founder;return u&&(0,e.jsx)(S.Z,{label:i.format("founderTitle"),disabled:!0,width:"md",fieldProps:{prefix:(0,e.jsx)(we.Z,{}),value:u.username},addonAfter:(0,e.jsx)(te,{data:u,onFinish:function(){U(d+1)}}),name:"adminUsername"})}}),(0,e.jsx)(T,{label:i.format("loginTitle"),name:"login",disable:function(v){return!1},disableLabel:m.FD.format("listManageDefault"),onDisable:function(){return(0,P.GV)({groupName:"setting",name:"login"})},settingComponent:Ee,onFinish:function(){U(d+1)},tip:i.format("loginTip")}),(0,e.jsx)(T,{isPe:!0,label:i.format("twoFaTitle"),name:"twoFa",disable:function(v){return!(v!=null&&v.enable)},onDisable:function(){return(0,P.GV)({groupName:"setting",name:"twoFa"})},settingComponent:Ue,onFinish:function(){U(d+1)},tip:i.format("twoFaTip")}),(0,e.jsx)(T,{label:i.format("themeConfigTitle"),name:"themeConfig",disable:function(v){return!1},disableLabel:m.FD.format("listManageDefault"),onDisable:function(){return localStorage.removeItem("dpanel-theme"),localStorage.removeItem("dpanel-compact"),localStorage.removeItem("dpanel-pagesize"),(0,P.GV)({groupName:"setting",name:"themeConfig"})},settingComponent:Ze,onFinish:function(){window.location.reload(),U(d+1)},tip:i.format("themeConfigTip")}),(0,e.jsx)(T,{isPe:!0,label:i.format("themeUserConfigTitle"),name:"themeUserConfig",disable:function(v){return!1},disableLabel:m.FD.format("listManageDefault"),onDisable:function(){return(0,P.GV)({groupName:"setting",name:"themeUserConfig"})},settingComponent:Ne,onFinish:function(){window.location.reload(),U(d+1)},tip:i.format("themeUserConfigTip")}),(0,e.jsx)(T,{label:i.format("themeConsoleTitle"),name:"themeConsoleConfig",disable:function(v){return!1},disableLabel:m.FD.format("listManageDefault"),onDisable:function(){return(0,P.GV)({groupName:"setting",name:"themeConsoleConfig"})},settingComponent:Xe,onFinish:function(){U(d+1)},tip:i.format("themeConsoleTip")}),(0,e.jsx)(T,{label:i.format("notificationTitle"),name:"notification",onDisable:function(){return(0,P.GV)({groupName:"setting",name:"themeConsoleConfig"})},settingComponent:$e,onFinish:function(){U(d+1)},tip:i.format("notificationTip")}),(0,e.jsx)(T,{label:i.format("upgradeTitle"),name:"upgradeScript",onDisable:function(){return new Promise(function(){})},settingComponent:nn,tip:i.format("upgradeTip")}),!D.canSeeEnableCe&&(0,e.jsx)(T,{label:i.format("proTitle"),name:"pro",onDisable:function(){return new Promise(function(){})},settingComponent:ln,tip:i.format("proTip")})]})})})}},4813:function($,k,n){n.d(k,{_:function(){return E}});var K=n(15009),g=n.n(K),V=n(99289),M=n.n(V),G=n(82346);function E(m){return W.apply(this,arguments)}function W(){return W=M()(g()().mark(function m(L){return g()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,G.request)("/api/common/attach/delete",{method:"POST",data:L});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},m)})),W.apply(this,arguments)}},89075:function($,k,n){n.d(k,{$w:function(){return E},E1:function(){return T},YQ:function(){return m},ax:function(){return O}});var K=n(15009),g=n.n(K),V=n(99289),M=n.n(V),G=n(82346);function E(){return W.apply(this,arguments)}function W(){return W=M()(g()().mark(function o(){return g()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",(0,G.request)("/api/pro/home/get-machine-id",{method:"POST"}));case 1:case"end":return p.stop()}},o)})),W.apply(this,arguments)}function m(){return L.apply(this,arguments)}function L(){return L=M()(g()().mark(function o(){return g()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",(0,G.request)("/api/pro/home/get-license-info",{method:"POST"}));case 1:case"end":return p.stop()}},o)})),L.apply(this,arguments)}function O(){return e.apply(this,arguments)}function e(){return e=M()(g()().mark(function o(){return g()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",(0,G.request)("/api/pro/home/login-info",{method:"POST"}));case 1:case"end":return p.stop()}},o)})),e.apply(this,arguments)}function T(o){return Y.apply(this,arguments)}function Y(){return Y=M()(g()().mark(function o(R){return g()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.abrupt("return",(0,G.request)("/api/pro/home/upload-license-file",{method:"POST",data:R}));case 1:case"end":return B.stop()}},o)})),Y.apply(this,arguments)}}}]);
