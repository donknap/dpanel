"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9013],{52688:function(G,B,r){var d=r(1413),m=r(45987),A=r(67294),y=r(40284),T=r(85893),E=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],D=A.forwardRef(function(S,O){var C=S.fieldProps,b=S.unCheckedChildren,L=S.checkedChildren,R=S.proFieldProps,v=(0,m.Z)(S,E);return(0,T.jsx)(y.Z,(0,d.Z)({valueType:"switch",fieldProps:(0,d.Z)({unCheckedChildren:b,checkedChildren:L},C),ref:O,valuePropName:"checked",proFieldProps:R,filedConfig:{valuePropName:"checked",ignoreWidth:!0,customLightMode:!0}},v))});B.Z=D},90672:function(G,B,r){var d=r(1413),m=r(45987),A=r(67294),y=r(40284),T=r(85893),E=["fieldProps","proFieldProps"],D=function(O,C){var b=O.fieldProps,L=O.proFieldProps,R=(0,m.Z)(O,E);return(0,T.jsx)(y.Z,(0,d.Z)({ref:C,valueType:"textarea",fieldProps:b,proFieldProps:L},R))};B.Z=A.forwardRef(D)},39900:function(G,B,r){r.r(B),r.d(B,{default:function(){return X}});var d=r(15009),m=r.n(d),A=r(99289),y=r.n(A),T=r(1699),E=r(75870),D=r(86548),S=r(74453),O=r(82346),C=r(67294),b=r(36146),L=r(5574),R=r.n(L),v=r(3616),M=r(24963),U=r(184),s=r(5966),V=r(52688),Q=r(97462),ae=r(90672),J=r(62370),Y=r(83622),k=r(42075),_=r(25593),q=r(66309),c=r(85893),ee=(0,C.forwardRef)(function(H,e){var a=(0,C.useState)(!1),o=R()(a,2),t=o[0],n=o[1],l=(0,C.useRef)(),p=(0,C.useState)(0),g=R()(p,2),P=g[0],u=g[1],F=(0,C.useContext)(M.Z),N=F.message,f=new b.Uo("components.image");return(0,C.useImperativeHandle)(e,function(){return{setEditId:function(h){(0,E.t1)({id:h}).then(function(i){var x;n(!0),u(h),(x=l.current)===null||x===void 0||x.setFieldsValue({title:i.data.info.title,serverAddress:i.data.info.serverAddress,username:i.data.info.setting.username,password:i.data.info.setting.password,proxy:i.data.info.setting.proxy.join(`
`),enableHttp:i.data.info.setting.enableHttp,enableAuth:!!i.data.info.setting.username})})}}}),(0,c.jsxs)(U.a,{drawerProps:{forceRender:!0,width:v.R_},name:"createRegisry",title:f.format("registryCreateTitle"),open:t,onOpenChange:function(h){n(h)},layout:"horizontal",labelCol:{span:5,offset:0},formRef:l,trigger:(0,c.jsx)(Y.ZP,{type:"primary",onClick:function(){var h;(h=l.current)===null||h===void 0||h.resetFields(),u(0)},children:f.format("registryCreateTirggerButton")}),onFinish:function(){var j=y()(m()().mark(function h(i){var x,I,$,W;return m()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,(0,E.ZH)({id:P,title:i.title,serverAddress:i.serverAddress,username:(x=i.username)!==null&&x!==void 0?x:"",password:(I=i.password)!==null&&I!==void 0?I:"",proxy:i.proxy?i.proxy.split(`
`):[],enableHttp:i.enableHttp});case 2:if($=Z.sent,!($&&$.data&&$.data.id>0)){Z.next=8;break}return N.success(b.FD.format("finish")),H.onFinish&&H.onFinish(),(W=l.current)===null||W===void 0||W.resetFields(),Z.abrupt("return",!0);case 8:case"end":return Z.stop()}},h)}));return function(h){return j.apply(this,arguments)}}(),children:[(0,c.jsx)(s.Z,{label:f.format("registryCreateFormTitle"),name:"title",placeholder:f.format("registryCreateFormTitleEmpty"),disabled:P==-1,required:!0}),(0,c.jsx)(s.Z,{label:f.format("registryCreateFormServerAddress"),name:"serverAddress",placeholder:"ccr.ccs.tencentyun.com, docker.io, 127.0.0.1:5000",disabled:P==-1,required:!0,rules:[{required:!0}]}),(0,c.jsx)(V.Z,{tooltip:f.format("registryCreateFormEnableHttpTip"),label:f.format("registryCreateFormEnableHttp"),name:"enableHttp"}),(0,c.jsx)(V.Z,{label:f.format("registryCreateFormEnableAuth"),name:"enableAuth"}),(0,c.jsx)(Q.Z,{name:["enableAuth"],children:function(h){var i=h.enableAuth;return i&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(s.Z,{label:f.format("registryCreateFormUsername"),name:"username",placeholder:f.format("registryCreateFormUsernameEmpty"),tooltip:""},"username"),(0,c.jsx)(s.Z.Password,{label:f.format("registryCreateFormPassword"),name:"password",allowClear:!0,placeholder:f.format("registryCreateFormPasswordEmpty")},"password")]})}}),(0,c.jsx)(ae.Z,{label:f.format("registryCreateFormProxy"),name:"proxy",fieldProps:{autoSize:{minRows:10}},placeholder:f.format("registryCreateFormProxyTip")}),(0,c.jsx)(J.Z,{label:f.format("registryCreateFormProxyRecommand"),children:(0,c.jsx)(k.Z,{wrap:!0,children:["docker.1panel.live","docker.m.daocloud.io","docker.1ms.run"].map(function(j,h){return(0,c.jsx)(_.Z.Link,{onClick:function(){var x,I,$=[];if((x=l.current)!==null&&x!==void 0&&x.getFieldValue("proxy")){var W;$=(W=l.current)===null||W===void 0?void 0:W.getFieldValue("proxy").split(`
`)}else $=[];$.includes(j)||$.push(j),(I=l.current)===null||I===void 0||I.setFieldValue("proxy",$.join(`
`))},children:(0,c.jsx)(q.Z,{color:"cyan",children:j})},h)})})},"recommend")]})}),re=ee,oe=r(55681);function X(){var H=(0,C.useRef)(),e=(0,C.useRef)(),a=(0,O.useAccess)();return(0,c.jsx)(S._z,{header:{extra:[(0,c.jsx)(T.u,{access:"canSeeImageRegistryManage",children:(0,c.jsx)(re,{onFinish:function(){var t,n;!((t=H.current)===null||t===void 0)&&t.reloadAndRest&&((n=H.current)===null||n===void 0||n.reloadAndRest())},ref:e},"create")},"create")]},children:(0,c.jsx)(oe.Co,{rowKey:"id",columns:[{title:b.FD.format("listTitle"),ellipsis:!0,dataIndex:"title"},{title:"Url",dataIndex:"serverAddress"},{title:b.FD.format("listUsername"),dataIndex:["setting","username"],search:!1}],request:function(){var o=y()(m()().mark(function t(n,l,p){var g;return m()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,E.Ot)({title:n.title,serverAddress:n.serverAddress});case 2:return g=u.sent,u.abrupt("return",{data:g.data.list,success:!0,total:g.data.list.length});case 4:case"end":return u.stop()}},t)}));return function(t,n,l){return o.apply(this,arguments)}}(),rowSelection:a.canSeeImageRegistryManage?{defaultSelectedRowKeys:[],alwaysShowAlert:!0}:void 0,actionRef:H,actions:[{key:"edit",label:b.FD.format("listManageEdit"),showInContext:"manage",showInOperator:!0,icon:(0,c.jsx)(D.Z,{}),action:function(t){return y()(m()().mark(function n(){var l,p,g;return m()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:p=t.finish,g=t.selectedRow,p(!0),(l=e.current)===null||l===void 0||l.setEditId(g.id);case 3:case"end":return u.stop()}},n)}))()}},{key:"dataPermission"},{key:"delete",action:function(t){return y()(m()().mark(function n(){var l,p,g;return m()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return l=t.finish,p=t.selectedRows,g=t.loading,g(),u.abrupt("return",(0,E.ix)({id:p.map(function(F){return F.id})}).finally(function(){l(!0)}));case 3:case"end":return u.stop()}},n)}))()}}]})})}},75870:function(G,B,r){r.d(B,{Ot:function(){return E},ZH:function(){return S},ix:function(){return C},t1:function(){return L}});var d=r(15009),m=r.n(d),A=r(99289),y=r.n(A),T=r(82346);function E(v){return D.apply(this,arguments)}function D(){return D=y()(m()().mark(function v(M){return m()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,T.request)("/dpanel/api/common/registry/get-list",{method:"POST",data:M}));case 1:case"end":return s.stop()}},v)})),D.apply(this,arguments)}function S(v){return O.apply(this,arguments)}function O(){return O=y()(m()().mark(function v(M){return m()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,T.request)("/dpanel/api/common/registry/create",{method:"POST",data:M}));case 1:case"end":return s.stop()}},v)})),O.apply(this,arguments)}function C(v){return b.apply(this,arguments)}function b(){return b=y()(m()().mark(function v(M){return m()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,T.request)("/dpanel/api/common/registry/delete",{method:"POST",data:M}));case 1:case"end":return s.stop()}},v)})),b.apply(this,arguments)}function L(v){return R.apply(this,arguments)}function R(){return R=y()(m()().mark(function v(M){return m()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,T.request)("/dpanel/api/common/registry/get-detail",{method:"POST",data:M}));case 1:case"end":return s.stop()}},v)})),R.apply(this,arguments)}},66309:function(G,B,r){r.d(B,{Z:function(){return H}});var d=r(67294),m=r(93967),A=r.n(m),y=r(98423),T=r(98787),E=r(69760),D=r(96159),S=r(45353),O=r(53124),C=r(11568),b=r(15063),L=r(14747),R=r(83262),v=r(83559);const M=e=>{const{paddingXXS:a,lineWidth:o,tagPaddingHorizontal:t,componentCls:n,calc:l}=e,p=l(t).sub(o).equal(),g=l(a).sub(o).equal();return{[n]:Object.assign(Object.assign({},(0,L.Wf)(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:p,fontSize:e.tagFontSize,lineHeight:e.tagLineHeight,whiteSpace:"nowrap",background:e.defaultBg,border:`${(0,C.bf)(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,opacity:1,transition:`all ${e.motionDurationMid}`,textAlign:"start",position:"relative",[`&${n}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:e.defaultColor},[`${n}-close-icon`]:{marginInlineStart:g,fontSize:e.tagIconSize,color:e.colorIcon,cursor:"pointer",transition:`all ${e.motionDurationMid}`,"&:hover":{color:e.colorTextHeading}},[`&${n}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${e.iconCls}-close, ${e.iconCls}-close:hover`]:{color:e.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${n}-checkable-checked):hover`]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},"&-hidden":{display:"none"},[`> ${e.iconCls} + span, > span + ${e.iconCls}`]:{marginInlineStart:p}}),[`${n}-borderless`]:{borderColor:"transparent",background:e.tagBorderlessBg}}},U=e=>{const{lineWidth:a,fontSizeIcon:o,calc:t}=e,n=e.fontSizeSM;return(0,R.IX)(e,{tagFontSize:n,tagLineHeight:(0,C.bf)(t(e.lineHeightSM).mul(n).equal()),tagIconSize:t(o).sub(t(a).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:e.defaultBg})},s=e=>({defaultBg:new b.t(e.colorFillQuaternary).onBackground(e.colorBgContainer).toHexString(),defaultColor:e.colorText});var V=(0,v.I$)("Tag",e=>{const a=U(e);return M(a)},s),Q=function(e,a){var o={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&a.indexOf(t)<0&&(o[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)a.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(o[t[n]]=e[t[n]]);return o},J=d.forwardRef((e,a)=>{const{prefixCls:o,style:t,className:n,checked:l,onChange:p,onClick:g}=e,P=Q(e,["prefixCls","style","className","checked","onChange","onClick"]),{getPrefixCls:u,tag:F}=d.useContext(O.E_),N=I=>{p==null||p(!l),g==null||g(I)},f=u("tag",o),[j,h,i]=V(f),x=A()(f,`${f}-checkable`,{[`${f}-checkable-checked`]:l},F==null?void 0:F.className,n,h,i);return j(d.createElement("span",Object.assign({},P,{ref:a,style:Object.assign(Object.assign({},t),F==null?void 0:F.style),className:x,onClick:N})))}),Y=r(98719);const k=e=>(0,Y.Z)(e,(a,{textColor:o,lightBorderColor:t,lightColor:n,darkColor:l})=>({[`${e.componentCls}${e.componentCls}-${a}`]:{color:o,background:n,borderColor:t,"&-inverse":{color:e.colorTextLightSolid,background:l,borderColor:l},[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}));var _=(0,v.bk)(["Tag","preset"],e=>{const a=U(e);return k(a)},s);function q(e){return typeof e!="string"?e:e.charAt(0).toUpperCase()+e.slice(1)}const c=(e,a,o)=>{const t=q(o);return{[`${e.componentCls}${e.componentCls}-${a}`]:{color:e[`color${o}`],background:e[`color${t}Bg`],borderColor:e[`color${t}Border`],[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}};var ee=(0,v.bk)(["Tag","status"],e=>{const a=U(e);return[c(a,"success","Success"),c(a,"processing","Info"),c(a,"error","Error"),c(a,"warning","Warning")]},s),re=function(e,a){var o={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&a.indexOf(t)<0&&(o[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)a.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(o[t[n]]=e[t[n]]);return o};const X=d.forwardRef((e,a)=>{const{prefixCls:o,className:t,rootClassName:n,style:l,children:p,icon:g,color:P,onClose:u,bordered:F=!0,visible:N}=e,f=re(e,["prefixCls","className","rootClassName","style","children","icon","color","onClose","bordered","visible"]),{getPrefixCls:j,direction:h,tag:i}=d.useContext(O.E_),[x,I]=d.useState(!0),$=(0,y.Z)(f,["closeIcon","closable"]);d.useEffect(()=>{N!==void 0&&I(N)},[N]);const W=(0,T.o2)(P),te=(0,T.yT)(P),Z=W||te,de=Object.assign(Object.assign({backgroundColor:P&&!Z?P:void 0},i==null?void 0:i.style),l),w=j("tag",o),[ue,me,fe]=V(w),pe=A()(w,i==null?void 0:i.className,{[`${w}-${P}`]:Z,[`${w}-has-color`]:P&&!Z,[`${w}-hidden`]:!x,[`${w}-rtl`]:h==="rtl",[`${w}-borderless`]:!F},t,n,me,fe),se=K=>{K.stopPropagation(),u==null||u(K),!K.defaultPrevented&&I(!1)},[,ge]=(0,E.Z)((0,E.w)(e),(0,E.w)(i),{closable:!1,closeIconRender:K=>{const Ce=d.createElement("span",{className:`${w}-close-icon`,onClick:se},K);return(0,D.wm)(K,Ce,z=>({onClick:ce=>{var ne;(ne=z==null?void 0:z.onClick)===null||ne===void 0||ne.call(z,ce),se(ce)},className:A()(z==null?void 0:z.className,`${w}-close-icon`)}))}}),ve=typeof f.onClick=="function"||p&&p.type==="a",le=g||null,he=le?d.createElement(d.Fragment,null,le,p&&d.createElement("span",null,p)):p,ie=d.createElement("span",Object.assign({},$,{ref:a,className:pe,style:de}),he,ge,W&&d.createElement(_,{key:"preset",prefixCls:w}),te&&d.createElement(ee,{key:"status",prefixCls:w}));return ue(ve?d.createElement(S.Z,{component:"Tag"},ie):ie)});X.CheckableTag=J;var H=X}}]);
