"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4250],{1699:function(ne,b,e){e.d(b,{u:function(){return E}});var m=e(9783),h=e.n(m),F=e(97857),U=e.n(F),J=e(67294),R=e(82346),$=e(40411),N=e(42075),x=e(85893),E=function(_){var M=(0,R.useAccess)(),t=Array.isArray(_.access)?_.access:[_.access],g,S=_.fallback;if(typeof _.children=="function"?(g=_.children(t.reduce(function(W,I){return U()(U()({},W),{},h()({},I,M[I]))},{})),g||(g=S)):t.every(function(W){return M[W]})?g=_.children:g=S,!S&&g&&_.showProTips&&M.canSeeEnableCe){if(M.canSeeEnableHiddenProTips)return null;g=(0,x.jsx)($.Z,{offset:_.showProTipsOffset,count:"PRO",color:"gold",style:{fontWeight:"bold"},children:g})}if(!S&&g&&_.showProRibbonTips&&M.canSeeEnableCe){if(M.canSeeEnableHiddenProTips)return null;g=(0,x.jsx)($.Z.Ribbon,{text:"PRO",color:"gold",style:{fontWeight:"bold"},children:g})}return _.space?(0,x.jsx)(N.Z,U()(U()({},_.space),{},{children:g})):g}},80821:function(ne,b,e){e.d(b,{Z:function(){return M}});var m=e(97857),h=e.n(m),F=e(5574),U=e.n(F),J=e(24963),R=e(36146),$=e(86738),N=e(83062),x=e(96074),E=e(83622),o=e(67294),_=e(85893);function M(t){var g=(0,o.useState)(!1),S=U()(g,2),W=S[0],I=S[1],re=(0,o.useContext)(J.Z),z=re.message,ee=function(){I(!0);var r=t.action();r instanceof Promise?r.then(function(P){if(I(!1),P){typeof t.onSuccess=="function"&&t.onSuccess(P);var f=R.FD.format("finish");z.success(f)}}).catch(function(P){I(!1),typeof t.onError=="function"&&t.onError(P)}):I(!1)};if(t.confirmProps){var Y,V,k,w,te,H,L,i=t.confirmProps.description;return t.confirmProps.showCommonConfirm&&(i=R.FD.format("confirm.title")),t.confirmProps.showCommonDisabled&&(i=R.FD.format("confirm.disable")),(0,_.jsx)($.Z,h()(h()({},t.confirmProps),{},{style:{width:500},title:(Y=t.confirmProps)!==null&&Y!==void 0&&Y.title?(V=t.confirmProps)===null||V===void 0?void 0:V.title:R.FD.format("title.tip"),description:i,onConfirm:ee,okText:"Yes",cancelText:"No",children:(0,_.jsxs)(N.Z,{title:t.tips,children:[t.showDivider&&(0,_.jsx)(x.Z,{type:"vertical",style:{marginRight:15}}),(0,_.jsx)(E.ZP,h()(h()({},t.buttonProps),{},{ghost:((k=t.buttonProps)===null||k===void 0?void 0:k.ghost)&&((w=t.buttonProps)===null||w===void 0?void 0:w.type)!=="link",style:(te=t.buttonProps)!==null&&te!==void 0&&te.ghost?h()(h()({},t.buttonProps.style),{},{padding:0,width:"auto"}):h()({},(H=t.buttonProps)===null||H===void 0?void 0:H.style),icon:!t.children&&W||(L=t.buttonProps)===null||L===void 0?void 0:L.icon,loading:W,children:t.children}))]})}))}else{var q,n,l,c,a;return(0,_.jsxs)(N.Z,{title:t.tips,children:[t.showDivider&&(0,_.jsx)(x.Z,{type:"vertical",style:{marginRight:15}}),(0,_.jsx)(E.ZP,h()(h()({},t.buttonProps),{},{ghost:((q=t.buttonProps)===null||q===void 0?void 0:q.ghost)&&((n=t.buttonProps)===null||n===void 0?void 0:n.type)!=="link",style:(l=t.buttonProps)!==null&&l!==void 0&&l.ghost?h()(h()({},t.buttonProps.style),{},{padding:0,width:"auto"}):h()({},(c=t.buttonProps)===null||c===void 0?void 0:c.style),icon:!t.children&&W||(a=t.buttonProps)===null||a===void 0?void 0:a.icon,loading:W,onClick:ee,children:t.children}))]})}}},24963:function(ne,b,e){var m=e(67294),h=(0,m.createContext)({});b.Z=h},6812:function(ne,b,e){e.r(b),e.d(b,{default:function(){return q}});var m=e(15009),h=e.n(m),F=e(99289),U=e.n(F),J=e(5574),R=e.n(J),$=e(1699),N=e(22191),x=e(80821),E=e(83727),o=e(36146),_=e(67255),M=e(43425),t=e(74453),g=e(38345),S=e(9773),W=e(95213),I=e(11106),re=e(82346),z=e(42075),ee=e(66309),Y=e(96074),V=e(83622),k=e(25593),w=e(40411),te=e(86250),H=e(53531),L=e(67294),i=e(85893);function q(){var n,l,c=(0,re.useParams)(),a=(0,L.useState)(),u=R()(a,2),r=u[0],P=u[1],f=(0,L.useRef)(),D=(0,L.useState)(),T=R()(D,2),v=T[0],y=T[1],j=(0,L.useRef)(),C=(0,L.useState)(0),B=R()(C,2),p=B[0],ae=B[1];return(0,L.useEffect)(function(){var O;(0,E.Ih)({id:parseInt((O=c.id)!==null&&O!==void 0?O:"")}).then(function(s){y(s.data.detail)})},[p]),(0,i.jsx)(t._z,{children:(0,i.jsxs)(g.Z,{ghost:!0,direction:"column",gutter:[0,10],children:[(0,i.jsx)(g.Z,{title:(0,i.jsx)(M.Z,{}),subTitle:v==null?void 0:v.title,extra:(0,i.jsxs)(z.Z,{children:[(0,i.jsxs)("span",{children:[o.FD.format("listNextAt"),":"]}),v&&v.setting.nextRunTime&&v.setting.nextRunTime.map(function(O,s){return(0,i.jsx)(ee.Z,{children:new Date(O).toLocaleString()},"runNextTime-".concat(s))})]}),children:(0,i.jsxs)(z.Z,{children:[(0,i.jsx)(x.Z,{action:function(){var s;return(0,E.yh)({id:parseInt((s=c.id)!==null&&s!==void 0?s:"")})},onSuccess:function(){var s,d;return!((s=f.current)===null||s===void 0)&&s.reloadAndRest&&((d=f.current)===null||d===void 0||d.reloadAndRest()),!0},onError:function(){var s,d;return!((s=f.current)===null||s===void 0)&&s.reloadAndRest&&((d=f.current)===null||d===void 0||d.reloadAndRest()),!0},buttonProps:{type:"primary"},children:o.FD.format("listManageStart")},"runOnce"),v&&(0,i.jsx)(x.Z,{action:function(){var s,d,X,G,K,A,Z={id:v.id,title:v.title,expression:(s=v.setting.expression)!==null&&s!==void 0?s:[],containerName:(d=v.setting.containerName)!==null&&d!==void 0?d:"",script:(X=v.setting.script)!==null&&X!==void 0?X:"",enableRunBlock:(G=v.setting.enableRunBlock)!==null&&G!==void 0?G:!1,environment:(K=v.setting.environment)!==null&&K!==void 0?K:[],keepLogTotal:(A=v.setting.keepLogTotal)!==null&&A!==void 0?A:10,disable:!v.setting.disable};return(0,E.FS)(Z)},onSuccess:function(){return ae(p+1),!0},onError:function(){return ae(p+1),!0},children:v.setting.disable?o.FD.format("listManageUnpause"):o.FD.format("listManagePause")},"pause"),(0,i.jsx)(Y.Z,{type:"vertical"}),(0,i.jsx)(x.Z,{action:function(){var s;return P({}),(0,E.wb)({id:parseInt((s=c.id)!==null&&s!==void 0?s:"")})},onSuccess:function(){var s,d;return!((s=f.current)===null||s===void 0)&&s.reloadAndRest&&((d=f.current)===null||d===void 0||d.reloadAndRest()),!0},onError:function(){var s,d;return!((s=f.current)===null||s===void 0)&&s.reloadAndRest&&((d=f.current)===null||d===void 0||d.reloadAndRest()),!0},buttonProps:{type:"primary",danger:!0},confirmProps:{showCommonConfirm:!0},children:o.FD.format("listManageClear")},"clear"),(0,i.jsx)(Y.Z,{type:"vertical"}),(0,i.jsx)(N.Z,{ref:j,onFinish:function(){ae(p+1)}},"create"),(0,i.jsx)($.u,{access:"canSeeContainerCronManage",children:(0,i.jsx)(V.ZP,{onClick:function(){var s;!((s=j.current)===null||s===void 0)&&s.edit&&v&&j.current.edit(v)},children:o.FD.format("listManageEdit")})})]})}),(0,i.jsxs)(g.Z,{split:"vertical",children:[(0,i.jsx)(g.Z,{ghost:!0,colSpan:"30%",children:(0,i.jsx)(S.Z,{actionRef:f,rowKey:"id",pagination:(0,_.Oh)(),columns:[{title:"Id",dataIndex:"id",render:function(s,d,X,G,K){return(0,i.jsxs)(z.Z,{children:[(0,i.jsx)(k.Z.Link,{onClick:function(){P(d)},children:d.id}),r!=null&&r.id&&r.id==d.id?(0,i.jsx)(w.Z,{status:"processing"}):""]})}},{title:o.FD.format("listCreatedAt"),render:function(s,d,X,G,K){return new Date(d.value.runTime).toLocaleString()}},{title:o.FD.format("listUseTime"),render:function(s,d,X,G,K){return"".concat(d.value.useTime?d.value.useTime.toFixed(2)+"s":"-")}}],search:!1,request:function(){var O=U()(h()().mark(function s(d,X,G){var K,A;return h()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return Q.next=2,(0,E.bk)({id:parseInt((K=c.id)!==null&&K!==void 0?K:""),page:d.current,pageSize:d.pageSize});case 2:return A=Q.sent,A.data.list&&A.data.list.length>0&&P(A.data.list[0]),Q.abrupt("return",{data:A.data.list,success:!0,total:A.data.total});case 5:case"end":return Q.stop()}},s)}));return function(s,d,X){return O.apply(this,arguments)}}()})}),(0,i.jsxs)(g.Z,{ghost:!0,colSpan:"70%",split:"horizontal",children:[(0,i.jsx)(g.Z,{children:(0,i.jsxs)(te.Z,{gap:50,align:"center",justify:"space-evenly",children:[(0,i.jsx)(H.Z,{title:"Id",value:(r==null?void 0:r.id)&&(r==null?void 0:r.id)}),(0,i.jsx)(H.Z,{title:o.FD.format("listCreatedAt"),value:(r==null?void 0:r.value)&&new Date((n=r==null?void 0:r.value.runTime)!==null&&n!==void 0?n:"").toLocaleString()}),(0,i.jsx)(H.Z,{title:o.FD.format("listUseTime"),value:(r==null?void 0:r.value)&&"".concat(r!=null&&r.value.useTime?r.value.useTime.toFixed(2)+"s":"-")})]})}),(0,i.jsx)(g.Z,{children:(0,i.jsx)(I.ZP,{theme:"dark",height:"100vh",value:(r==null?void 0:r.value)&&((l=r.value.message)!==null&&l!==void 0?l:r==null?void 0:r.value.error),extensions:[W.RI.shell(),I.tk.lineWrapping]})})]})]})]})})}},67255:function(ne,b,e){e.d(b,{G$:function(){return J},LX:function(){return x},MJ:function(){return U},Oh:function(){return F},h5:function(){return $},j_:function(){return R},rj:function(){return N}});var m=e(5574),h=e.n(m);function F(E){var o=localStorage.getItem("dpanel-pagesize");return o=="all"?!1:{defaultCurrent:E==null?void 0:E.page,showSizeChanger:!0,defaultPageSize:parseInt(o!=null?o:"20"),showQuickJumper:!0}}function U(E,o){o?localStorage.setItem("dpanel-page-"+E,"".concat(o)):localStorage.removeItem("dpanel-page-"+E)}function J(E,o){var _=o?Math.ceil((o==null?void 0:o.total)/(o==null?void 0:o.pageSize)):void 0,M=localStorage.getItem("dpanel-page-"+E),t=1;return M&&(t=parseInt(M)),_&&t>_?1:t}function R(E){return{persistenceKey:E,persistenceType:"localStorage"}}var $=["descend","ascend"];function N(E,o){var _=localStorage.getItem("dpanel-table-sort-".concat(E));if(_){var M=_.split("|"),t=h()(M,2),g=t[0],S=t[1];if(g==o)return S}}function x(E,o,_){!o||!_?localStorage.removeItem("dpanel-table-sort-".concat(E)):localStorage.setItem("dpanel-table-sort-".concat(E),"".concat(o,"|").concat(_))}},53531:function(ne,b,e){e.d(b,{Z:function(){return q}});var m=e(67294),h=e(56790),F=e(75164),U=e(96159),J=e(93967),R=e.n(J),$=e(64217),N=e(53124),x=e(48054),o=n=>{const{value:l,formatter:c,precision:a,decimalSeparator:u,groupSeparator:r="",prefixCls:P}=n;let f;if(typeof c=="function")f=c(l);else{const D=String(l),T=D.match(/^(-?)(\d*)(\.(\d+))?$/);if(!T||D==="-")f=D;else{const v=T[1];let y=T[2]||"0",j=T[4]||"";y=y.replace(/\B(?=(\d{3})+(?!\d))/g,r),typeof a=="number"&&(j=j.padEnd(a,"0").slice(0,a>0?a:0)),j&&(j=`${u}${j}`),f=[m.createElement("span",{key:"int",className:`${P}-content-value-int`},v,y),j&&m.createElement("span",{key:"decimal",className:`${P}-content-value-decimal`},j)]}}return m.createElement("span",{className:`${P}-content-value`},f)},_=e(14747),M=e(83559),t=e(83262);const g=n=>{const{componentCls:l,marginXXS:c,padding:a,colorTextDescription:u,titleFontSize:r,colorTextHeading:P,contentFontSize:f,fontFamily:D}=n;return{[l]:Object.assign(Object.assign({},(0,_.Wf)(n)),{[`${l}-title`]:{marginBottom:c,color:u,fontSize:r},[`${l}-skeleton`]:{paddingTop:a},[`${l}-content`]:{color:P,fontSize:f,fontFamily:D,[`${l}-content-value`]:{display:"inline-block",direction:"ltr"},[`${l}-content-prefix, ${l}-content-suffix`]:{display:"inline-block"},[`${l}-content-prefix`]:{marginInlineEnd:c},[`${l}-content-suffix`]:{marginInlineStart:c}}})}},S=n=>{const{fontSizeHeading3:l,fontSize:c}=n;return{titleFontSize:c,contentFontSize:l}};var W=(0,M.I$)("Statistic",n=>{const l=(0,t.IX)(n,{});return[g(l)]},S),I=function(n,l){var c={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&l.indexOf(a)<0&&(c[a]=n[a]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,a=Object.getOwnPropertySymbols(n);u<a.length;u++)l.indexOf(a[u])<0&&Object.prototype.propertyIsEnumerable.call(n,a[u])&&(c[a[u]]=n[a[u]]);return c},z=m.forwardRef((n,l)=>{const{prefixCls:c,className:a,rootClassName:u,style:r,valueStyle:P,value:f=0,title:D,valueRender:T,prefix:v,suffix:y,loading:j=!1,formatter:C,precision:B,decimalSeparator:p=".",groupSeparator:ae=",",onMouseEnter:O,onMouseLeave:s}=n,d=I(n,["prefixCls","className","rootClassName","style","valueStyle","value","title","valueRender","prefix","suffix","loading","formatter","precision","decimalSeparator","groupSeparator","onMouseEnter","onMouseLeave"]),{getPrefixCls:X,direction:G,className:K,style:A}=(0,N.dj)("statistic"),Z=X("statistic",c),[Q,oe,ie]=W(Z),se=m.createElement(o,{decimalSeparator:p,groupSeparator:ae,prefixCls:Z,formatter:C,precision:B,value:f}),ce=R()(Z,{[`${Z}-rtl`]:G==="rtl"},K,a,u,oe,ie),le=m.useRef(null);m.useImperativeHandle(l,()=>({nativeElement:le.current}));const de=(0,$.Z)(d,{aria:!0,data:!0});return Q(m.createElement("div",Object.assign({},de,{ref:le,className:ce,style:Object.assign(Object.assign({},A),r),onMouseEnter:O,onMouseLeave:s}),D&&m.createElement("div",{className:`${Z}-title`},D),m.createElement(x.Z,{paragraph:!1,loading:j,className:`${Z}-skeleton`},m.createElement("div",{style:P,className:`${Z}-content`},v&&m.createElement("span",{className:`${Z}-content-prefix`},v),T?T(se):se,y&&m.createElement("span",{className:`${Z}-content-suffix`},y)))))});const ee=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]];function Y(n,l){let c=n;const a=/\[[^\]]*]/g,u=(l.match(a)||[]).map(D=>D.slice(1,-1)),r=l.replace(a,"[]"),P=ee.reduce((D,[T,v])=>{if(D.includes(T)){const y=Math.floor(c/v);return c-=y*v,D.replace(new RegExp(`${T}+`,"g"),j=>{const C=j.length;return y.toString().padStart(C,"0")})}return D},r);let f=0;return P.replace(a,()=>{const D=u[f];return f+=1,D})}function V(n,l,c){const{format:a=""}=l,u=new Date(n).getTime(),r=Date.now(),P=Math.max(c?u-r:r-u,0);return Y(P,a)}var k=function(n,l){var c={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&l.indexOf(a)<0&&(c[a]=n[a]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,a=Object.getOwnPropertySymbols(n);u<a.length;u++)l.indexOf(a[u])<0&&Object.prototype.propertyIsEnumerable.call(n,a[u])&&(c[a[u]]=n[a[u]]);return c};function w(n){return new Date(n).getTime()}var H=n=>{const{value:l,format:c="HH:mm:ss",onChange:a,onFinish:u,type:r}=n,P=k(n,["value","format","onChange","onFinish","type"]),f=r==="countdown",[D,T]=m.useState(null),v=(0,h.zX)(()=>{const C=Date.now(),B=w(l);T({});const p=f?B-C:C-B;return a==null||a(p),f&&B<C?(u==null||u(),!1):!0});m.useEffect(()=>{let C;const B=()=>F.Z.cancel(C),p=()=>{C=(0,F.Z)(()=>{v()&&p()})};return p(),B},[l,f]),m.useEffect(()=>{T({})},[]);const y=(C,B)=>D?V(C,Object.assign(Object.assign({},B),{format:c}),f):"-",j=C=>(0,U.Tm)(C,{title:void 0});return m.createElement(z,Object.assign({},P,{value:l,valueRender:j,formatter:y}))};const L=n=>m.createElement(H,Object.assign({},n,{type:"countdown"}));var i=m.memo(L);z.Timer=H,z.Countdown=i;var q=z}}]);
