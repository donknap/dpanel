"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7750],{58638:function(ve,F,e){e.d(F,{Z:function(){return P}});var c=e(87462),a=e(67294),B={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z"}}]},name:"export",theme:"outlined"},o=B,A=e(84089),x=function(T,I){return a.createElement(A.Z,(0,c.Z)({},T,{ref:I,icon:o}))},D=a.forwardRef(x),P=D},35995:function(ve,F,e){e.d(F,{Z:function(){return P}});var c=e(87462),a=e(67294),B={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M508 624a112 112 0 00112-112c0-3.28-.15-6.53-.43-9.74L498.26 623.57c3.21.28 6.45.43 9.74.43zm370.72-458.44L836 122.88a8 8 0 00-11.31 0L715.37 232.23Q624.91 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.7 119.43 136.55 191.45L112.56 835a8 8 0 000 11.31L155.25 889a8 8 0 0011.31 0l712.16-712.12a8 8 0 000-11.32zM332 512a176 176 0 01258.88-155.28l-48.62 48.62a112.08 112.08 0 00-140.92 140.92l-48.62 48.62A175.09 175.09 0 01332 512z"}},{tag:"path",attrs:{d:"M942.2 486.2Q889.4 375 816.51 304.85L672.37 449A176.08 176.08 0 01445 676.37L322.74 798.63Q407.82 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5z"}}]},name:"eye-invisible",theme:"filled"},o=B,A=e(84089),x=function(T,I){return a.createElement(A.Z,(0,c.Z)({},T,{ref:I,icon:o}))},D=a.forwardRef(x),P=D},36693:function(ve,F,e){var c=e(87462),a=e(67294),B=e(80111),o=e(84089),A=function(P,w){return a.createElement(o.Z,(0,c.Z)({},P,{ref:w,icon:B.Z}))},x=a.forwardRef(A);F.Z=x},64789:function(ve,F,e){e.d(F,{Z:function(){return P}});var c=e(87462),a=e(67294),B={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},o=B,A=e(84089),x=function(T,I){return a.createElement(A.Z,(0,c.Z)({},T,{ref:I,icon:o}))},D=a.forwardRef(x),P=D},85577:function(ve,F,e){var c=e(87462),a=e(67294),B=e(11721),o=e(84089),A=function(P,w){return a.createElement(o.Z,(0,c.Z)({},P,{ref:w,icon:B.Z}))},x=a.forwardRef(A);F.Z=x},31199:function(ve,F,e){var c=e(1413),a=e(45987),B=e(67294),o=e(40284),A=e(85893),x=["fieldProps","min","proFieldProps","max"],D=function(T,I){var ie=T.fieldProps,m=T.min,le=T.proFieldProps,u=T.max,ce=(0,a.Z)(T,x);return(0,A.jsx)(o.Z,(0,c.Z)({valueType:"digit",fieldProps:(0,c.Z)({min:m,max:u},ie),ref:I,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:le},ce))},P=B.forwardRef(D);F.Z=P},92067:function(ve,F,e){e.d(F,{Z:function(){return ce}});var c=e(15009),a=e.n(c),B=e(99289),o=e.n(B),A=e(13822),x=e(64789),D=e(9773),P=e(42075),w=e(83062),T=e(83622),I=e(37413),ie=e(5251),m=e(36146),le=e(67255),u=e(85893);function ce($){return(0,u.jsx)(D.Z,{columns:[{title:m.FD.format("listContainerName"),dataIndex:"name",render:function(y,M,re,j){return(0,u.jsx)(P.Z,{direction:"vertical",style:{textAlign:"left"},children:M==null?void 0:M.Names.map(function(S){return(0,ie.fi)(S,"/")})},M.Id)}},{title:m.FD.format("listPort"),dataIndex:"ports",search:!1,width:150,render:function(y,M,re,j){var S=[],J=[];return M!=null&&M.Ports&&M.Ports.map(function(N,E){N.PublicPort?S.push(N):J.push(N)}),(0,u.jsx)(I.Z,{publicPort:S,privatePort:J,domain:[]})}},{title:m.FD.format("listImageName"),dataIndex:"image",search:!1,render:function(y,M,re,j,S){return M.Image}},{title:m.FD.format("listManage"),valueType:"option",key:"option",ellipsis:!0,width:100,render:function(y,M,re,j){return[(0,u.jsx)(w.Z,{title:m.FD.format("listManageUse"),children:(0,u.jsx)(T.ZP,{type:"link",onClick:o()(a()().mark(function S(){var J;return a()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,(0,A.jV)({md5:M.Id});case 2:J=E.sent,$.onSelect&&$.onSelect(J.data.info);case 4:case"end":return E.stop()}},S)})),children:(0,u.jsx)(x.Z,{})},M.Id)},M.Id)]}}],rowKey:"Id",request:function(){var X=o()(a()().mark(function y(M,re,j){var S;return a()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,(0,A.IE)({siteTitle:M.name});case 2:return S=N.sent,N.abrupt("return",{data:S.data.list,success:!0,total:S.data.list.length});case 4:case"end":return N.stop()}},y)}));return function(y,M,re){return X.apply(this,arguments)}}(),pagination:(0,le.Oh)()})}},37413:function(ve,F,e){e.d(F,{Z:function(){return le}});var c=e(19632),a=e.n(c),B=e(36146),o=e(85577),A=e(58638),x=e(36693),D=e(35995),P=e(99611),w=e(38345),T=e(42075),I=e(66309),ie=e(55241),m=e(85893);function le(u){var ce,$=new B.Uo("components.containerPort"),X=[];u.publicPort&&(X=a()(u.publicPort)),u.privatePort&&(X=[].concat(a()(X),a()(u.privatePort)));var y=(ce=u.serverIp)!==null&&ce!==void 0?ce:"localhost";if(y!=""&&y.indexOf("http")===-1&&y.indexOf(":")>-1&&(y="[".concat(y,"]")),y==""||y=="127.0.0.1"){var M=document.location.protocol+"//"+document.location.hostname;y=M}var re=(0,m.jsxs)(w.Z,{direction:u.layout=="inline"?"row":"column",style:{width:u.layout!="inline"?600:"auto"},ghost:!0,children:[X.length>0&&(0,m.jsx)(w.Z,{title:(0,m.jsx)(o.Z,{}),subTitle:$.format("cardPortTitle"),ghost:u.ghost,bodyStyle:{maxHeight:300,overflow:"auto",margin:"10px 0"},children:X.map(function(j,S){var J;return y==""&&j.IP&&(y=j.IP),(0,m.jsx)(T.Z,{size:"large",wrap:!0,children:(0,m.jsx)(I.Z,{color:j.PublicPort?"blue":"yellow",icon:j.PublicPort?(0,m.jsx)(A.Z,{}):"",style:{marginBottom:10,marginRight:15},children:j.PublicPort?(0,m.jsx)("a",{href:"".concat(y.indexOf("http")===0?y:"http://"+y,":").concat(j.PublicPort),target:"_blank",children:"".concat(j.PublicPort?((J=j.IP)!==null&&J!==void 0?J:"0.0.0.0")+":"+j.PublicPort+" -> ":"").concat(j.PrivatePort,"/").concat(j.Type)},"link".concat(S)):"".concat(j.PrivatePort,"/").concat(j.Type)})},"space".concat(S))})}),u.domain&&u.domain.length>0&&(0,m.jsx)(w.Z,{title:(0,m.jsx)(x.Z,{}),subTitle:$.format("cardDomainTitle"),ghost:u.ghost,children:(0,m.jsx)(T.Z,{wrap:!0,style:{textAlign:"left"},children:u.domain&&u.domain.map(function(j,S){return(0,m.jsx)(I.Z,{color:"blue",icon:(0,m.jsx)(A.Z,{}),children:(0,m.jsx)("a",{href:j,target:"_blank",children:j})},"domain".concat(S))})})})]});return u.showInDetail?re:(0,m.jsx)(ie.Z,{placement:"right",content:re,children:(0,m.jsxs)(T.Z,{direction:"vertical",children:[u.privatePort&&u.privatePort.length>0&&(0,m.jsxs)(I.Z,{color:"yellow",icon:(0,m.jsx)(D.Z,{}),children:[$.format("portPrivate"),": ",u.privatePort.length]}),u.publicPort&&u.publicPort.length>0&&(0,m.jsxs)(I.Z,{color:"blue",icon:(0,m.jsx)(P.Z,{}),children:[$.format("protPublic"),": ",u.publicPort.length]}),u.domain&&u.domain.length>0&&(0,m.jsx)(I.Z,{color:"geekblue",icon:(0,m.jsx)(x.Z,{}),children:u.domainTitle?u.domainTitle:"".concat($.format("domain"),": ").concat(u.domain.length)})]})})}},7463:function(ve,F,e){e.r(F),e.d(F,{default:function(){return ge}});var c=e(15009),a=e.n(c),B=e(99289),o=e.n(B),A=e(5574),x=e.n(A),D=e(1699),P=e(66554),w=e(184),T=e(24739),I=e(97462),ie=e(5966),m=e(62370),le=e(64317),u=e(86615),ce=e(31199),$=e(52688),X=e(11106),y=e(83622),M=e(92398),re=e(84567),j=e(42075),S=e(66309),J=e(71230),N=e(15746),E=e(40056),O=e(67294),Y=e(74026),l=e(3616),z=e(36146),_e=e(92067),n=e(85893);function Pe(b){var Q=(0,O.useState)(!1),q=x()(Q,2),R=q[0],ee=q[1],oe=new z.Uo("components.appDomain");return(0,n.jsx)(w.a,{drawerProps:{width:l.R_},trigger:(0,n.jsx)(y.ZP,{type:"primary",onClick:function(){ee(!0)},children:oe.format("createSelectContainer")}),onOpenChange:function(me){ee(me)},open:R,children:(0,n.jsx)(_e.Z,{onSelect:function(me){ee(!1),b.onSelect&&b.onSelect(me)}})})}var De=(0,O.forwardRef)(function(b,Q){var q=(0,O.useState)(!1),R=x()(q,2),ee=R[0],oe=R[1],Z=(0,O.useRef)(),me=(0,O.useState)(),H=x()(me,2),v=H[0],d=H[1],ne=(0,O.useState)(1),G=x()(ne,2),W=G[0],C=G[1],i=new z.Uo("components.appDomain");return(0,O.useImperativeHandle)(Q,function(){return{showEdit:function(f){return o()(a()().mark(function t(){var L,te,p;return a()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,(0,P.lQ)({id:f});case 2:te=K.sent,p=te.data,(L=Z.current)===null||L===void 0||L.setFieldsValue({containerId:p.domain.containerId,serverName:p.domain.serverName,serverNameAlias:p.domain.setting.serverNameAlias,serverAddress:p.domain.setting.serverAddress,serverProtocol:p.domain.setting.serverProtocol,port:p.domain.setting.port,enableBlockCommonExploits:p.domain.setting.enableBlockCommonExploits,enableAssetCache:p.domain.setting.enableAssetCache,enableWs:p.domain.setting.enableWs,extraNginx:p.domain.setting.extraNginx,enableSSL:p.domain.setting.enableSSL,certName:p.domain.setting.certName,vhost:p.vhost,type:p.domain.setting.type,wwwRoot:p.domain.setting.wwwRoot,fpmRoot:p.domain.setting.fpmRoot}),d(p),oe(!0);case 7:case"end":return K.stop()}},t)}))()}}}),(0,n.jsx)(w.a,{drawerProps:{forceRender:!0,width:l.R_},open:ee,onOpenChange:function(f){var t;oe(f),!f&&((t=Z.current)===null||t===void 0||t.resetFields())},title:i.format("createTitle"),trigger:(0,n.jsx)(y.ZP,{onClick:function(){var f;d(void 0),(f=Z.current)===null||f===void 0||f.resetFields()},type:"primary",children:i.format("createTriggerButton")}),formRef:Z,onFinish:function(){var U=o()(a()().mark(function f(t){var L,te,p,se,K;return a()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:if(!t.vhost){V.next=8;break}return V.next=3,(0,P.Ss)({id:v&&(v==null?void 0:v.domain.id)>0?v.domain.id:0,vhost:t.vhost});case 3:return te=V.sent,V.next=6,(0,P.hZ)();case 6:V.next=11;break;case 8:return V.next=10,(0,P.Fj)({id:v&&(v==null?void 0:v.domain.id)>0?v.domain.id:0,containerId:t.containerId,serverName:t.serverName,serverNameAlias:t.serverNameAlias,serverAddress:t.serverAddress,serverProtocol:(p=t.serverProtocol)!==null&&p!==void 0?p:"http",port:parseInt((se=t.port)!==null&&se!==void 0?se:"80"),enableBlockCommonExploits:t.enableBlockCommonExploits,enableAssetCache:t.enableAssetCache,enableWs:t.enableWs,enableSSL:t.enableSSL,extraNginx:t.extraNginx,certName:t.certName,wwwRoot:t.wwwRoot,fpmRoot:t.fpmRoot,type:t.type});case 10:K=V.sent;case 11:return(L=Z.current)===null||L===void 0||L.resetFields(),b.onFinish(),V.abrupt("return",!0);case 14:case"end":return V.stop()}},f)}));return function(f){return U.apply(this,arguments)}}(),children:(0,n.jsx)(M.Z,{items:[{key:"1",label:i.format("createTabDomain"),destroyOnHidden:!0,children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(T.UW,{children:[(0,n.jsx)(I.Z,{name:["enableSSL"],children:function(f){var t=f.enableSSL;return(0,n.jsx)(ie.Z,{width:"lg",label:i.format("createFormServerName"),tooltip:i.format("createFormServerNameTip"),name:"serverName",placeholder:"www.explame.com, demo.com:8807",rules:[{required:!0}],fieldProps:{addonBefore:t?"https://":"http://"},disabled:v&&v.domain.id>0})}}),(0,n.jsx)(m.Z,{label:" ",valuePropName:"checked",name:"enableSSL",children:(0,n.jsx)(re.Z,{children:"Https?"})})]}),(0,n.jsx)(le.Z,{label:i.format("createFormServerNameAlises"),name:"serverNameAlias",mode:"tags",placeholder:i.format("createFormServerNameAlisesEmpty")}),(0,n.jsx)(I.Z,{name:["enableSSL","serverName"],children:function(f){var t=f.enableSSL,L=f.serverName;if(t)return(0,n.jsxs)(j.Z.Compact,{children:[(0,n.jsx)(le.Z,{label:i.format("createFormCertName"),width:"lg",name:"certName",fieldProps:{labelRender:function(p){return p.value}},required:!0,rules:[{required:!0}],request:o()(a()().mark(function te(){var p;return a()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,(0,P.dZ)();case 2:return p=K.sent,K.abrupt("return",p.data&&p.data.list.map(function(Ee,V){return{label:(0,n.jsx)(j.Z,{wrap:!0,children:Ee.domain.map(function(xe,ye){return(0,n.jsx)(S.Z,{children:xe})})},V),value:"".concat(Ee.domain[0])}}));case 4:case"end":return K.stop()}},te)}))},W),(0,n.jsx)(m.Z,{label:" ",children:(0,n.jsx)(Y.Z,{domain:L?[L]:[],onFinish:function(){C(W+1)}})})]})}}),(0,n.jsx)(u.Z.Group,{label:i.format("createFormType"),name:"type",initialValue:"proxy",options:i.option("createFormTypeOption",["proxy","redirect","fpm"]),fieldProps:{onChange:function(f){var t,L;(t=Z.current)===null||t===void 0||t.setFieldValue("containerId",""),(L=Z.current)===null||L===void 0||L.setFieldValue("serverAddress","")}}}),(0,n.jsxs)(j.Z.Compact,{children:[(0,n.jsx)(le.Z,{label:i.format("createFormProtocol"),tooltip:i.format("createFormProtocolTip"),initialValue:"http",name:"serverProtocol",fieldProps:{allowClear:!1},valueEnum:{http:"http",https:"https"}}),(0,n.jsx)(I.Z,{name:["containerId","type"],children:function(f){var t=f.containerId,L=f.type;return[(0,n.jsx)(ie.Z,{width:"lg",label:" ",name:"serverAddress",placeholder:i.format("createFormServerAddressEmpty"),required:!0,disabled:t,rules:[{required:!0}]},"serverAddress"),L!="redirect"&&(0,n.jsxs)(j.Z.Compact,{children:[(0,n.jsx)(m.Z,{label:" ",name:"containerId",children:(0,n.jsx)(Pe,{onSelect:function(){var te=o()(a()().mark(function p(se){var K,Ee,V,xe,ye,Re;return a()().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:(K=Z.current)===null||K===void 0||K.setFieldValue("serverAddress",se.Name),(Ee=Z.current)===null||Ee===void 0||Ee.setFieldValue("containerId",se.Id),L=="fpm"&&(V=se.Config.Labels)!==null&&V!==void 0&&V["com.docker.compose.project"]&&((xe=Z.current)===null||xe===void 0||xe.setFieldValue("wwwRoot","/dpanel/compose/".concat((ye=se.Config.Labels)===null||ye===void 0?void 0:ye["com.docker.compose.project"],"/wwwroot")),(Re=Z.current)===null||Re===void 0||Re.setFieldValue("fpmRoot","/www"));case 3:case"end":return fe.stop()}},p)}));return function(p){return te.apply(this,arguments)}}()})}),(0,n.jsx)(m.Z,{label:" ",children:(0,n.jsx)(y.ZP,{onClick:function(){var p,se;(p=Z.current)===null||p===void 0||p.setFieldValue("containerId",""),(se=Z.current)===null||se===void 0||se.setFieldValue("serverAddress","")},children:i.format("createUser")})})]},"selectContainer")]}})]}),(0,n.jsx)(ce.Z,{label:i.format("createFormPort"),name:"port",placeholder:i.format("createFormPortEmpty")}),(0,n.jsx)(I.Z,{name:["type"],children:function(f){var t=f.type;if(t=="fpm")return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ie.Z,{name:"wwwRoot",label:"\u7F51\u7AD9\u6839\u76EE\u5F55",tooltip:"\u5FC5\u987B\u4F7F\u7528 DPanel \u5BB9\u5668\u5185\u7684\u8DEF\u5F84\u914D\u7F6E\u7F51\u7AD9\u6839\u76EE\u5F55",placeholder:"/dpanel/wwwroot"}),(0,n.jsx)(ie.Z,{name:"fpmRoot",label:"FPM \u6839\u76EE\u5F55",tooltip:"\u76F8\u5BF9\u4E8E FPM \u5BB9\u5668\u4E2D\u7684\u6587\u4EF6\u76EE\u5F55"})]})}}),(0,n.jsx)(I.Z,{name:["type"],children:function(f){var t=f.type;return t!="redirect"&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(J.Z,{children:[(0,n.jsx)(N.Z,{span:12,children:(0,n.jsx)($.Z,{label:i.format("createFormEnableBlockCommonExploits"),name:"enableBlockCommonExploits"})}),(0,n.jsx)(N.Z,{children:(0,n.jsx)($.Z,{width:"md",label:i.format("createFormEnableAssetCache"),name:"enableAssetCache"})})]}),(0,n.jsx)(J.Z,{children:(0,n.jsx)(N.Z,{span:12,children:(0,n.jsx)($.Z,{label:i.format("createFormEnableWs"),name:"enableWs",initialValue:!0})})})]})}})]})},{key:"3",label:"vhost.conf",destroyOnHidden:!0,children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(E.Z,{message:i.format("createVhostTip"),showIcon:!0}),(0,n.jsx)(m.Z,{name:"vhost",label:" ",children:(0,n.jsx)(X.ZP,{height:"600px",theme:"dark",style:{backgroundColor:"#282c34"},onChange:function(){}})})]})}]})})}),he=De,be=e(5251),Ce=e(83062),je=e(38703);function Ie(b){var Q,q=0;if(b.sslCrtCreatedAt&&b.sslCrtRenewAt){var R,ee,oe=new Date,Z=new Date((R=b.sslCrtRenewAt)!==null&&R!==void 0?R:""),me=new Date((ee=b.sslCrtCreatedAt)!==null&&ee!==void 0?ee:""),H=Math.ceil((Z.getTime()-me.getTime())/86400/1e3),v=Math.ceil((oe.getTime()-me.getTime())/86400/1e3);q=Math.min(Math.ceil(v/H*100),100)}return b.certName?(0,n.jsx)(Ce.Z,{placement:"right",title:"".concat(z.FD.format("listExpireAt"),": ").concat((0,be.NF)((Q=b.sslCrtRenewAt)!==null&&Q!==void 0?Q:"")),children:(0,n.jsx)(S.Z,{icon:(0,n.jsxs)(j.Z,{children:[(0,n.jsx)(je.Z,{type:"circle",percent:q,status:q==100?"exception":"active",strokeWidth:20,size:14}),(0,n.jsx)("span",{})]}),children:b.certName})}):"-"}var r=e(80821),s=e(37413),h=e(98510),g=e(86548),_=e(82061),k=e(74453),ae=e(82346),de=e(96074),pe=e(25593),ue=e(50136);function ge(){var b=(0,O.useRef)(),Q=(0,O.useRef)(),q=(0,O.useState)({}),R=x()(q,2),ee=R[0],oe=R[1],Z=(0,ae.useAccess)(),me=new z.Uo("app");return(0,n.jsx)(k._z,{extra:[(0,n.jsx)(D.u,{access:"canSeeContainerDomainManage",children:(0,n.jsx)(he,{ref:Q,onFinish:o()(a()().mark(function H(){var v,d;return a()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return!((v=b.current)===null||v===void 0)&&v.reloadAndRest&&((d=b.current)===null||d===void 0||d.reloadAndRest()),G.next=3,(0,P.hZ)();case 3:case"end":return G.stop()}},H)}))},"addDomain")},"addDomain"),(0,n.jsx)(D.u,{access:"canSeeContainerDomainManage",children:(0,n.jsx)(r.Z,{tips:me.format("domainRestartNginxTip"),action:o()(a()().mark(function H(){return a()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,(0,P.hZ)();case 2:return d.abrupt("return",d.sent);case 3:case"end":return d.stop()}},H)})),children:me.format("domainRestartNginx")},"nginx")},"nginx")],children:(0,n.jsx)(h.C,{rowKey:"id",actionRef:b,columns:[{title:z.FD.format("listDomain"),dataIndex:"serverName",render:function(v,d,ne,G,W){var C=[];return d.serverName&&C.push(d.setting.enableSSL?"https://"+d.serverName:"http://"+d.serverName),d.setting.serverNameAlias&&d.setting.serverNameAlias.map(function(i){C.push(d.setting.enableSSL?"https://"+i:"http://"+i)}),(0,n.jsx)(s.Z,{domain:C,domainTitle:"".concat(d.serverName," (").concat(C.length,")")})}},{title:z.FD.format("listTargetAddress"),search:!1,render:function(v,d,ne,G,W){return"".concat(d.setting.serverAddress,":").concat(d.setting.port)}},{title:z.FD.format("listCert"),search:!0,dataIndex:"certName",width:300,valueEnum:ee,render:function(v,d,ne,G,W){return d.setting.enableSSL?(0,n.jsx)(Ie,{certName:d.setting.certName,sslCrtRenewAt:d.setting.sslCrtRenewAt,sslCrtCreatedAt:d.setting.sslCrtCreatedAt}):"-"}},{title:z.FD.format("listCreatedAt"),search:!1,width:180,ellipsis:!0,dataIndex:"createdAt",render:function(v,d,ne,G,W){return(0,be.NF)(d.createdAt)}},{title:z.FD.format("listManage"),key:"option",width:50,search:!1,fixed:"right",hidden:!Z.canSeeContainerDomainManage,render:function(v,d,ne,G){return(0,n.jsx)(j.Z,{split:(0,n.jsx)(de.Z,{type:"vertical"}),children:(0,n.jsx)(pe.Z.Link,{onClick:function(){var C;return(C=Q.current)===null||C===void 0||C.showEdit(d.id),!0},children:(0,n.jsx)(Ce.Z,{title:z.FD.format("listManageEdit"),children:(0,n.jsx)(g.Z,{})})},"edit")})}}],request:function(){var H=o()(a()().mark(function v(d,ne,G){var W,C,i;return a()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,(0,P.i7)({serverName:d.serverName,certName:d.certName});case 2:return W=f.sent,f.next=5,(0,P.dZ)();case 5:return C=f.sent,i={},W.data.list.map(function(t){t.setting.certName&&typeof t.setting.certName=="string"&&(i[t.setting.certName]=t.setting.certName)}),oe(i),f.abrupt("return",{data:W.data.list&&W.data.list.map(function(t){if(C&&C.data.list){var L,te;t.setting.sslCrtCreatedAt=(L=C.data.list.find(function(p){return p.domain[0]==t.setting.certName}))===null||L===void 0?void 0:L.createdAt,t.setting.sslCrtRenewAt=(te=C.data.list.find(function(p){return p.domain[0]==t.setting.certName}))===null||te===void 0?void 0:te.renewAt}return t}),success:!0,total:W.data.list.length});case 10:case"end":return f.stop()}},v)}));return function(v,d,ne){return H.apply(this,arguments)}}(),rowSelection:Z.canSeeContainerDomainManage?{defaultSelectedRowKeys:[],alwaysShowAlert:!0}:void 0,quickToolbarRender:function(v){var d=v.selectedRows,ne=v.finish,G=v.loading;return[(0,n.jsx)(r.Z,{buttonProps:{danger:!0,type:"primary"},confirmProps:{showCommonConfirm:!0},action:o()(a()().mark(function W(){return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return G(),i.abrupt("return",Promise.all([(0,P.dj)({id:d.map(function(U){return U.id})}),(0,P.hZ)()]).finally(function(){ne(!0)}));case 2:case"end":return i.stop()}},W)})),onSuccess:function(){var C,i;return!((C=b.current)===null||C===void 0)&&C.reloadAndRest&&((i=b.current)===null||i===void 0||i.reloadAndRest()),!0},onError:function(){var C,i;return!((C=b.current)===null||C===void 0)&&C.reset&&((i=b.current)===null||i===void 0||i.reset()),!0},children:z.FD.format("listManageDeleteBatch")},"batchDelete")]},contextMenu:function(v){var d=v.loading,ne=v.finish,G=v.isMultiple,W=v.selectedRow,C=v.selectedRows;return{items:[{type:"group",label:z.FD.format("listManage"),key:"operator",children:[{label:(0,n.jsx)(h.C.ContextMenuItem,{buttonProps:{icon:(0,n.jsx)(g.Z,{}),disabled:G()},action:o()(a()().mark(function i(){var U;return a()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:ne(!0),(U=Q.current)===null||U===void 0||U.showEdit(W.id);case 2:case"end":return t.stop()}},i)})),children:z.FD.format("listManageEdit")}),key:"edit"}]},{key:"delete",label:(0,n.jsx)(h.C.ContextMenuItem,{buttonProps:{icon:(0,n.jsx)(_.Z,{})},type:"danger",confirmProps:{showCommonConfirm:!0},action:o()(a()().mark(function i(){return a()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return d(),f.abrupt("return",Promise.all([(0,P.dj)({id:C.map(function(t){return t.id})}),(0,P.hZ)()]).finally(function(){ne(!0)}));case 2:case"end":return f.stop()}},i)})),children:z.FD.format("listManageDelete")},"deleteBatch")}]}},tableExtraRender:function(){return(0,n.jsx)(ue.Z,{mode:"horizontal",selectedKeys:["domain"],items:[{label:(0,n.jsx)(ae.Link,{to:"/app/domain/list",replace:!0,children:z.Ob.format("container.domain.list")}),key:"domain"},{label:(0,n.jsx)(ae.Link,{to:"/app/domain/cert",replace:!0,children:z.Ob.format("container.domain.cert")}),key:"cert"}]})}},"domain-list")})}},13822:function(ve,F,e){e.d(F,{IE:function(){return T},IW:function(){return P},KK:function(){return ce},LJ:function(){return X},RF:function(){return j},Re:function(){return M},aF:function(){return J},eE:function(){return le},jV:function(){return ie}});var c=e(5574),a=e.n(c),B=e(15009),o=e.n(B),A=e(99289),x=e.n(A),D=e(82346);function P(E){return w.apply(this,arguments)}function w(){return w=x()(o()().mark(function E(O){return o()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,D.request)("/dpanel/api/app/container/status",{method:"POST",data:O}));case 1:case"end":return l.stop()}},E)})),w.apply(this,arguments)}function T(E){return I.apply(this,arguments)}function I(){return I=x()(o()().mark(function E(O){return o()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,D.request)("/dpanel/api/app/container/get-list",{data:O,method:"POST"}));case 1:case"end":return l.stop()}},E)})),I.apply(this,arguments)}function ie(E){return m.apply(this,arguments)}function m(){return m=x()(o()().mark(function E(O){return o()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,D.request)("/dpanel/api/app/container/get-detail",{data:O,method:"POST"}));case 1:case"end":return l.stop()}},E)})),m.apply(this,arguments)}function le(E){return u.apply(this,arguments)}function u(){return u=x()(o()().mark(function E(O){return o()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,D.request)("/dpanel/api/app/container/update",{data:O,method:"POST"}));case 1:case"end":return l.stop()}},E)})),u.apply(this,arguments)}function ce(){return $.apply(this,arguments)}function $(){return $=x()(o()().mark(function E(){return o()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.abrupt("return",(0,D.request)("/dpanel/api/app/container/prune",{method:"POST"}));case 1:case"end":return Y.stop()}},E)})),$.apply(this,arguments)}function X(E){return y.apply(this,arguments)}function y(){return y=x()(o()().mark(function E(O){return o()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!O.enableExportToPath){l.next=2;break}return l.abrupt("return",(0,D.request)("/dpanel/api/app/container/export",{method:"GET",params:O}));case 2:return l.abrupt("return",new Promise(function(z,_e){var n=localStorage.getItem("token"),Pe=new URLSearchParams;Pe.append("token",n||""),Object.entries(O).forEach(function(be){var Ce=a()(be,2),je=Ce[0],Ie=Ce[1];Pe.append(je,String(Ie))});var De="/dpanel/api/app/container/export?".concat(Pe.toString()),he=document.createElement("iframe");he.style.display="none",he.src=De,document.body.appendChild(he),setTimeout(function(){he.parentElement&&document.body.removeChild(he)},5e3),z({code:200,data:"success",error:""})}));case 3:case"end":return l.stop()}},E)})),y.apply(this,arguments)}function M(E){return re.apply(this,arguments)}function re(){return re=x()(o()().mark(function E(O){return o()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,D.request)("/dpanel/api/app/container/commit",{method:"POST",data:O}));case 1:case"end":return l.stop()}},E)})),re.apply(this,arguments)}function j(E){return S.apply(this,arguments)}function S(){return S=x()(o()().mark(function E(O){return o()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,D.request)("/dpanel/api/app/container/upgrade",{method:"POST",data:O}));case 1:case"end":return l.stop()}},E)})),S.apply(this,arguments)}function J(E){return N.apply(this,arguments)}function N(){return N=x()(o()().mark(function E(O){return o()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,D.request)("/dpanel/api/app/container/copy",{method:"POST",data:O}));case 1:case"end":return l.stop()}},E)})),N.apply(this,arguments)}},40056:function(ve,F,e){e.d(F,{Z:function(){return Ie}});var c=e(67294),a=e(89739),B=e(4340),o=e(97937),A=e(21640),x=e(78860),D=e(93967),P=e.n(D),w=e(29372),T=e(64217),I=e(42550),ie=e(96159),m=e(53124),le=e(11568),u=e(14747),ce=e(83559);const $=(r,s,h,g,_)=>({background:r,border:`${(0,le.bf)(g.lineWidth)} ${g.lineType} ${s}`,[`${_}-icon`]:{color:h}}),X=r=>{const{componentCls:s,motionDurationSlow:h,marginXS:g,marginSM:_,fontSize:k,fontSizeLG:ae,lineHeight:de,borderRadiusLG:pe,motionEaseInOutCirc:ue,withDescriptionIconSize:ge,colorText:b,colorTextHeading:Q,withDescriptionPadding:q,defaultPadding:R}=r;return{[s]:Object.assign(Object.assign({},(0,u.Wf)(r)),{position:"relative",display:"flex",alignItems:"center",padding:R,wordWrap:"break-word",borderRadius:pe,[`&${s}-rtl`]:{direction:"rtl"},[`${s}-content`]:{flex:1,minWidth:0},[`${s}-icon`]:{marginInlineEnd:g,lineHeight:0},"&-description":{display:"none",fontSize:k,lineHeight:de},"&-message":{color:Q},[`&${s}-motion-leave`]:{overflow:"hidden",opacity:1,transition:`max-height ${h} ${ue}, opacity ${h} ${ue},
        padding-top ${h} ${ue}, padding-bottom ${h} ${ue},
        margin-bottom ${h} ${ue}`},[`&${s}-motion-leave-active`]:{maxHeight:0,marginBottom:"0 !important",paddingTop:0,paddingBottom:0,opacity:0}}),[`${s}-with-description`]:{alignItems:"flex-start",padding:q,[`${s}-icon`]:{marginInlineEnd:_,fontSize:ge,lineHeight:0},[`${s}-message`]:{display:"block",marginBottom:g,color:Q,fontSize:ae},[`${s}-description`]:{display:"block",color:b}},[`${s}-banner`]:{marginBottom:0,border:"0 !important",borderRadius:0}}},y=r=>{const{componentCls:s,colorSuccess:h,colorSuccessBorder:g,colorSuccessBg:_,colorWarning:k,colorWarningBorder:ae,colorWarningBg:de,colorError:pe,colorErrorBorder:ue,colorErrorBg:ge,colorInfo:b,colorInfoBorder:Q,colorInfoBg:q}=r;return{[s]:{"&-success":$(_,g,h,r,s),"&-info":$(q,Q,b,r,s),"&-warning":$(de,ae,k,r,s),"&-error":Object.assign(Object.assign({},$(ge,ue,pe,r,s)),{[`${s}-description > pre`]:{margin:0,padding:0}})}}},M=r=>{const{componentCls:s,iconCls:h,motionDurationMid:g,marginXS:_,fontSizeIcon:k,colorIcon:ae,colorIconHover:de}=r;return{[s]:{"&-action":{marginInlineStart:_},[`${s}-close-icon`]:{marginInlineStart:_,padding:0,overflow:"hidden",fontSize:k,lineHeight:(0,le.bf)(k),backgroundColor:"transparent",border:"none",outline:"none",cursor:"pointer",[`${h}-close`]:{color:ae,transition:`color ${g}`,"&:hover":{color:de}}},"&-close-text":{color:ae,transition:`color ${g}`,"&:hover":{color:de}}}}},re=r=>({withDescriptionIconSize:r.fontSizeHeading3,defaultPadding:`${r.paddingContentVerticalSM}px 12px`,withDescriptionPadding:`${r.paddingMD}px ${r.paddingContentHorizontalLG}px`});var j=(0,ce.I$)("Alert",r=>[X(r),y(r),M(r)],re),S=function(r,s){var h={};for(var g in r)Object.prototype.hasOwnProperty.call(r,g)&&s.indexOf(g)<0&&(h[g]=r[g]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var _=0,g=Object.getOwnPropertySymbols(r);_<g.length;_++)s.indexOf(g[_])<0&&Object.prototype.propertyIsEnumerable.call(r,g[_])&&(h[g[_]]=r[g[_]]);return h};const J={success:a.Z,info:x.Z,error:B.Z,warning:A.Z},N=r=>{const{icon:s,prefixCls:h,type:g}=r,_=J[g]||null;return s?(0,ie.wm)(s,c.createElement("span",{className:`${h}-icon`},s),()=>({className:P()(`${h}-icon`,s.props.className)})):c.createElement(_,{className:`${h}-icon`})},E=r=>{const{isClosable:s,prefixCls:h,closeIcon:g,handleClose:_,ariaProps:k}=r,ae=g===!0||g===void 0?c.createElement(o.Z,null):g;return s?c.createElement("button",Object.assign({type:"button",onClick:_,className:`${h}-close-icon`,tabIndex:0},k),ae):null};var Y=c.forwardRef((r,s)=>{const{description:h,prefixCls:g,message:_,banner:k,className:ae,rootClassName:de,style:pe,onMouseEnter:ue,onMouseLeave:ge,onClick:b,afterClose:Q,showIcon:q,closable:R,closeText:ee,closeIcon:oe,action:Z,id:me}=r,H=S(r,["description","prefixCls","message","banner","className","rootClassName","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action","id"]),[v,d]=c.useState(!1),ne=c.useRef(null);c.useImperativeHandle(s,()=>({nativeElement:ne.current}));const{getPrefixCls:G,direction:W,closable:C,closeIcon:i,className:U,style:f}=(0,m.dj)("alert"),t=G("alert",g),[L,te,p]=j(t),se=fe=>{var Oe;d(!0),(Oe=r.onClose)===null||Oe===void 0||Oe.call(r,fe)},K=c.useMemo(()=>r.type!==void 0?r.type:k?"warning":"info",[r.type,k]),Ee=c.useMemo(()=>typeof R=="object"&&R.closeIcon||ee?!0:typeof R=="boolean"?R:oe!==!1&&oe!==null&&oe!==void 0?!0:!!C,[ee,oe,R,C]),V=k&&q===void 0?!0:q,xe=P()(t,`${t}-${K}`,{[`${t}-with-description`]:!!h,[`${t}-no-icon`]:!V,[`${t}-banner`]:!!k,[`${t}-rtl`]:W==="rtl"},U,ae,de,p,te),ye=(0,T.Z)(H,{aria:!0,data:!0}),Re=c.useMemo(()=>typeof R=="object"&&R.closeIcon?R.closeIcon:ee||(oe!==void 0?oe:typeof C=="object"&&C.closeIcon?C.closeIcon:i),[oe,R,ee,i]),Me=c.useMemo(()=>{const fe=R!=null?R:C;if(typeof fe=="object"){const{closeIcon:Oe}=fe;return S(fe,["closeIcon"])}return{}},[R,C]);return L(c.createElement(w.ZP,{visible:!v,motionName:`${t}-motion`,motionAppear:!1,motionEnter:!1,onLeaveStart:fe=>({maxHeight:fe.offsetHeight}),onLeaveEnd:Q},({className:fe,style:Oe},Se)=>c.createElement("div",Object.assign({id:me,ref:(0,I.sQ)(ne,Se),"data-show":!v,className:P()(xe,fe),style:Object.assign(Object.assign(Object.assign({},f),pe),Oe),onMouseEnter:ue,onMouseLeave:ge,onClick:b,role:"alert"},ye),V?c.createElement(N,{description:h,icon:r.icon,prefixCls:t,type:K}):null,c.createElement("div",{className:`${t}-content`},_?c.createElement("div",{className:`${t}-message`},_):null,h?c.createElement("div",{className:`${t}-description`},h):null),Z?c.createElement("div",{className:`${t}-action`},Z):null,c.createElement(E,{isClosable:Ee,prefixCls:t,closeIcon:Re,handleClose:se,ariaProps:Me}))))}),l=e(15671),z=e(43144),_e=e(61120),n=e(78814),Pe=e(82963);function De(r,s,h){return s=(0,_e.Z)(s),(0,Pe.Z)(r,(0,n.Z)()?Reflect.construct(s,h||[],(0,_e.Z)(r).constructor):s.apply(r,h))}var he=e(60136),Ce=function(r){function s(){var h;return(0,l.Z)(this,s),h=De(this,s,arguments),h.state={error:void 0,info:{componentStack:""}},h}return(0,he.Z)(s,r),(0,z.Z)(s,[{key:"componentDidCatch",value:function(g,_){this.setState({error:g,info:_})}},{key:"render",value:function(){const{message:g,description:_,id:k,children:ae}=this.props,{error:de,info:pe}=this.state,ue=(pe==null?void 0:pe.componentStack)||null,ge=typeof g=="undefined"?(de||"").toString():g,b=typeof _=="undefined"?ue:_;return de?c.createElement(Y,{id:k,type:"error",message:ge,description:c.createElement("pre",{style:{fontSize:"0.9em",overflowX:"auto"}},b)}):ae}}])}(c.Component);const je=Y;je.ErrorBoundary=Ce;var Ie=je}}]);
