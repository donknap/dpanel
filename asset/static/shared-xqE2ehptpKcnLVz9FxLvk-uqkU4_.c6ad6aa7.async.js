"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1596],{31199:function(z,C,r){var T=r(1413),o=r(45987),j=r(67294),c=r(64203),s=r(85893),d=["fieldProps","min","proFieldProps","max"],R=function(p,b){var S=p.fieldProps,I=p.min,F=p.proFieldProps,L=p.max,V=(0,o.Z)(p,d);return(0,s.jsx)(c.Z,(0,T.Z)({valueType:"digit",fieldProps:(0,T.Z)({min:I,max:L},S),ref:b,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:F},V))},h=j.forwardRef(R);C.Z=h},91058:function(z,C,r){var T=r(9783),o=r.n(T),j=r(19632),c=r.n(j),s=r(97857),d=r.n(s),R=r(5574),h=r.n(R),B=r(89035),p=r(45605),b=r(64317),S=r(31199),I=r(5966),F=r(38345),L=r(17186),V=r(24739),x=r(23345),H=r(83622),Z=r(83062),X=r(85576),g=r(67294),Y=r(11106),N=r(12491),D=r(62597),P=r(79245),$=r(3616),K=r(36146),n=r(85893),i="docker-image",v=(0,g.forwardRef)(function(e,ne){var re=(0,g.useState)(i),Q=h()(re,2),J=Q[0],G=Q[1],E=(0,g.useRef)(),te=(0,g.useState)(""),k=h()(te,2),ae=k[0],ue=k[1],M=new K.Uo("components.appForm");(0,g.useImperativeHandle)(ne,function(){return{addEnvItem:function(a){var l,_=(l=E.current)===null||l===void 0?void 0:l.getList(),u=!1;if(_==null||_.map(function(f){if(f.name==a.name){u=!0;return}}),!u){var m;(m=E.current)===null||m===void 0||m.add(a)}},addEnvNameValue:function(a,l){this.addEnvItem({name:a,value:l})},clear:function(){var a;(a=E.current)===null||a===void 0||(a=a.getList())===null||a===void 0||a.map(function(l,_){var u;(u=E.current)===null||u===void 0||u.remove(_)})}}});function q(t){try{var a,l;t==""&&(t=ee());for(var _=(a=(l=E.current)===null||l===void 0||(l=l.getList())===null||l===void 0?void 0:l.length)!==null&&a!==void 0?a:0,u=_;u>=0;u--){var m,f,y=(m=E.current)===null||m===void 0?void 0:m.get(u);_-=1,(f=E.current)===null||f===void 0||f.remove(u)}var A=t.split(`
`),w=_+1;A.map(function(U){var O,W=U.split("=");W.length<2||((O=E.current)===null||O===void 0||O.add({name:W[0],value:W.slice(1).join("=")},w),w++)})}catch(U){console.log(U)}}function le(){J!="code"?G("code"):G(i)}function ee(){if(E&&E.current&&E.current.getList){var t,a=(t=E.current)===null||t===void 0?void 0:t.getList();if(a){var l=[];return a.forEach(function(_){l.push("".concat(_.name,"=").concat(_.value))}),l.join(`
`)}else return""}else return""}function oe(t){var a,l,_,u,m,f,y={},A={help:(0,P.y)((a=t.rule)===null||a===void 0?void 0:a.kind,D.fp.EnvValueTypeOnePanel)?M.formatOnePanel(t.name):M.formatUser(t.labels),name:"value",label:M.format("createEnvFormValue"),rules:[{required:e.requireValue?!0:(0,P.y)((l=t.rule)===null||l===void 0?void 0:l.kind,D.fp.EnvValueRuleRequired)}],addonAfter:!0,disabled:e.showDisableValue||(0,P.y)((_=t.rule)===null||_===void 0?void 0:_.kind,D.fp.EnvValueRuleDisabled),placeholder:t.label};if((0,P.y)((u=t.rule)===null||u===void 0?void 0:u.kind,D.fp.EnvValueTypeSelect)){var w;return(0,n.jsx)(b.Z,d()(d()({fieldProps:y},A),{},{initialValue:t.value,width:e.showInDrawer?"sm":"md",options:((w=t.rule)===null||w===void 0?void 0:w.option)&&t.rule.option.map(function(O){return{label:O.name,value:O.value}})}),t.name)}else if((0,P.y)((m=t.rule)===null||m===void 0?void 0:m.kind,D.fp.EnvValueTypeSelectMultiple)){var U;return(0,n.jsx)(b.Z,d()(d()({mode:"tags"},A),{},{fieldProps:y,convertValue:function(W){return Array.isArray(W)?W:W.split(",")},width:e.showInDrawer?"sm":"md",options:((U=t.rule)===null||U===void 0?void 0:U.option)&&t.rule.option.map(function(O){return{label:O.name,value:O.value}})}),t.name)}else return(0,P.y)((f=t.rule)===null||f===void 0?void 0:f.kind,D.fp.EnvValueTypeNumber)?(0,n.jsx)(S.Z,d()(d()({fieldProps:y},A),{},{width:e.showInDrawer?"sm":"md",rules:[].concat(c()(A.rules),[{pattern:new RegExp("^[0-9]*$")}])}),t.name):(0,n.jsx)(I.Z,d()(d()({fieldProps:y},A),{},{width:e.showInDrawer?"sm":"md"}),t.name)}return(0,n.jsxs)(F.Z,d()(d()({headerBordered:!0,extra:e.showCodeMode||e.showImportButton?(0,n.jsxs)(x.Z,{children:[e.showImportButton&&(0,n.jsx)("div",{style:{marginBottom:"-25px"},children:(0,n.jsx)(N.Z,{title:M.format("createEnvFormEnvImport"),onImport:function(a){return q(a),!0},onLoad:function(a){if(a.indexOf("=")<0)throw new Error(K.FD.format("commonFileIncorrectFormat",{name:"env"}));return!0}})}),e.showCodeMode?(0,n.jsx)(H.ZP,{icon:(0,n.jsx)(B.Z,{}),type:J=="code"?"primary":"default",onClick:le,children:M.format("createEnvFormEnvCode")},"code"):""]}):(0,n.jsx)(n.Fragment,{})},e.drawerProps),{},{children:[(0,n.jsx)(L.u,{style:{marginTop:10},name:e.name?e.name:"environment",actionRef:E,creatorButtonProps:e.showAddButton?{creatorButtonText:e.addButtonLabel?e.addButtonLabel:M.format("createEnvFormListAddButton")}:!1,copyIconProps:!1,deleteIconProps:e.showDeleteButton,actionRender:function(a,l,_,u){var m,f,y=(m=E.current)===null||m===void 0?void 0:m.get(a.key);return y&&(0,P.y)((f=y.rule)===null||f===void 0?void 0:f.kind,D.fp.EnvValueRuleInEnvFile)?[(0,n.jsx)(Z.Z,{title:M.format("createEnvFormListInEnvFile"),children:(0,n.jsx)(H.ZP,{type:"text",icon:(0,n.jsx)(p.Z,{})})},"inEnvFile")]:[_[0]]},min:100,label:e.listLabel,transform:function(a,l,_){return o()({},l,a.map(function(u){return Array.isArray(u.value)?u.value=u.value.filter(function(m){return m!=""}).join(","):u.value=u.value.toString(),u}))},tooltip:e.tooltip,children:function(a,l,_){var u,m=_.getCurrentRowData();return(0,n.jsxs)(V.UW,{style:{marginBottom:"5px"},children:[(0,n.jsx)(I.Z,{width:e.showInDrawer?"sm":"md",name:"name",label:M.format("createEnvFormName"),required:!0,rules:[{required:!0}],disabled:e.showDisableName||(0,P.y)((u=m.rule)===null||u===void 0?void 0:u.kind,D.fp.EnvValueRuleInEnvFile),placeholder:M.format("createEnvFormName")},l),oe(m)]})}}),e.showCodeMode&&(0,n.jsx)(X.Z,{width:$.ob,open:J=="code",onCancel:function(){return G("docker-image")},onOk:function(){q(ae),G("docker-image")},children:(0,n.jsx)(Y.ZP,{onChange:function(a){return ue(a)},value:ee(),height:$.Ed,theme:"dark"})})]}))});C.Z=v},62597:function(z,C,r){r.d(C,{$G:function(){return B},Ct:function(){return X},Tb:function(){return F},XH:function(){return V},cl:function(){return S},fp:function(){return b},fu:function(){return R},iE:function(){return H},nL:function(){return h},xU:function(){return $},xb:function(){return Y},ze:function(){return D}});var T=r(15009),o=r.n(T),j=r(99289),c=r.n(j),s=r(63713),d="com.dpanel.container.description",R="com.dpanel.container.title",h={Nanosecond:1,Microsecond:1e3,Millisecond:1e3*1e3,Second:1e3*1e3*1e3,Minute:60*1e3*1e3*1e3,Hour:3600*1e3*1e3*1e3};function B(n){return p.apply(this,arguments)}function p(){return p=c()(o()().mark(function n(i){return o()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.request)("/dpanel/api/app/site/create-by-image",{method:"POST",data:i}));case 1:case"end":return e.stop()}},n)})),p.apply(this,arguments)}var b={EnvValueRuleRequired:1,EnvValueRuleDisabled:2,EnvValueRuleInEnvFile:4,EnvValueTypeNumber:1024,EnvValueTypeText:2048,EnvValueTypeSelect:4096,EnvValueTypeSelectMultiple:8192,EnvValueTypeOnePanel:16384};function S(n){return I.apply(this,arguments)}function I(){return I=c()(o()().mark(function n(i){return o()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.request)("/dpanel/api/app/site/get-list",{method:"POST",data:i}));case 1:case"end":return e.stop()}},n)})),I.apply(this,arguments)}function F(n){return L.apply(this,arguments)}function L(){return L=c()(o()().mark(function n(i){return o()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i.download=!1,e.next=3,(0,s.request)("/dpanel/api/app/log/run",{method:"POST",data:i});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},n)})),L.apply(this,arguments)}function V(n){return x.apply(this,arguments)}function x(){return x=c()(o()().mark(function n(i){return o()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i.download=!0,e.next=3,(0,s.request)("/dpanel/api/app/log/run",{method:"POST",data:i,responseType:"blob"});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},n)})),x.apply(this,arguments)}function H(n){return Z.apply(this,arguments)}function Z(){return Z=c()(o()().mark(function n(i){return o()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i.id=String(i.id),e.next=3,(0,s.request)("/dpanel/api/app/site/get-detail",{data:i,method:"POST"});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},n)})),Z.apply(this,arguments)}function X(n){return g.apply(this,arguments)}function g(){return g=c()(o()().mark(function n(i){return o()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.request)("/dpanel/api/app/container/delete",{method:"POST",data:i}));case 1:case"end":return e.stop()}},n)})),g.apply(this,arguments)}function Y(n){return N.apply(this,arguments)}function N(){return N=c()(o()().mark(function n(i){return o()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.request)("/dpanel/api/app/site/delete",{method:"POST",data:i}));case 1:case"end":return e.stop()}},n)})),N.apply(this,arguments)}function D(n){return P.apply(this,arguments)}function P(){return P=c()(o()().mark(function n(i){return o()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.request)("/dpanel/api/app/container/ignore",{method:"POST",data:i}));case 1:case"end":return e.stop()}},n)})),P.apply(this,arguments)}function $(){return K.apply(this,arguments)}function K(){return K=c()(o()().mark(function n(){return o()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,s.request)("/dpanel/api/app/site/prune",{method:"POST"}));case 1:case"end":return v.stop()}},n)})),K.apply(this,arguments)}},79245:function(z,C,r){r.d(C,{m:function(){return j},y:function(){return c}});var T=r(64599),o=r.n(T);function j(s){var d=[];if(!s||s=="")return d;var R=s.matchAll(/\$\{(\w+)[:-?=]*(.*?)\}/g),h=o()(R),B;try{for(h.s();!(B=h.n()).done;){var p=B.value;d.push({name:p[1],value:p[2]?p[2].indexOf("-")==0?p[2].substring(1):p[2]:""})}}catch(b){h.e(b)}finally{h.f()}return d}function c(s,d){return!s||!d?!1:(s&d)!==0}}}]);
