"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9850],{27166:function(Z,v,e){var j=e(97857),n=e.n(j),f=e(5574),E=e.n(f),P=e(13769),h=e.n(P),p=e(184),g=e(74330),d=e(67294),l=e(85893),m=["requestLoading"],r=(0,d.forwardRef)(function(D,i){var T=D.requestLoading,c=h()(D,m),a=(0,d.useState)(!1),o=E()(a,2),t=o[0],_=o[1];return(0,d.useImperativeHandle)(i,function(){return{loading:function(){_(!0)},finish:function(){_(!1)}}}),(0,l.jsx)(p.a,n()(n()({},c),{},{children:(0,l.jsx)(g.Z,{spinning:t!=null?t:D.requestLoading,size:"default",style:{marginTop:"30%"},children:D.children})}))});v.Z=r},81366:function(Z,v,e){var j=e(97857),n=e.n(j),f=e(19632),E=e.n(f),P=e(5574),h=e.n(P),p=e(27254),g=e(42075),d=e(85418),l=e(25593),m=e(83622),r=e(67294),D=e(31112),i=e(85893),T={title:"/",path:"/"},c=(0,r.forwardRef)(function(a,o){var t=(0,r.useContext)(D.Z),_=t.showPath,U=t.redirectPath,w=(0,r.useState)([T]),y=h()(w,2),R=y[0],s=y[1];(0,r.useImperativeHandle)(o,function(){return{addHistory:function(O,I){I=="/"?s([T]):s([].concat(E()(R),[{title:O,path:I}]))},initHistory:function(O,I){s([n()(n()({},T),{},{children:I})].concat(E()(O)))}}});var N=function(O){_?_(R[O].title,R[O].path):a.showPath&&a.showPath(R[O].title,R[O].path);var I=R.filter(function(S,$){return $<=O});s(E()(I))};return(0,i.jsxs)(g.Z,{children:[(0,i.jsx)(g.Z.Compact,{children:R.map(function(B,O){return B.children?(0,i.jsxs)(d.Z.Button,{menu:{items:B.children.map(function(I,S){return{key:S,label:(0,i.jsx)(l.Z.Link,{onClick:function(){U(I)},children:I},S)}})},type:"dashed",onClick:function(S){N(O)},children:[(0,i.jsx)(p.Z,{})," ",B.title]},O):(0,i.jsx)(m.ZP,{icon:(0,i.jsx)(p.Z,{}),type:"dashed",onClick:function(){N(O)},children:B.title},O)})}),R.length>=2&&(0,i.jsx)(l.Z.Text,{copyable:{text:R[R.length-1].path}})]})});v.Z=c},31112:function(Z,v,e){var j=e(67294),n=(0,j.createContext)({});v.Z=n},68536:function(Z,v,e){e.d(v,{Z:function(){return m}});var j=e(24963),n=e(36146),f=e(93613),E=e(36693),P=e(2741),h=e(25593),p=e(42075),g=e(67294),d=e(85893),l=0;function m(r){var D=(0,g.useContext)(j.Z),i=D.message,T=new n.Uo("components.explorer");return r.isDir?(0,d.jsx)(h.Z.Link,{onClick:function(){r.onClick&&r.onClick()},children:(0,d.jsxs)(p.Z,{children:[(0,d.jsx)(f.Z,{}),r.showName]})}):r.isLink?(0,d.jsx)(h.Z.Link,{onClick:function(){r.onClick&&r.onClick()},children:(0,d.jsxs)(p.Z,{children:[(0,d.jsx)(E.Z,{}),r.showName]})}):(0,d.jsx)(h.Z.Text,{onClick:function(){if(l++,l==2){l=0,r.onClick&&r.onClick();return}setTimeout(function(){l==1&&i.info(T.format("fileNameMessageViewDetail")),l=0},400)},style:{cursor:"pointer"},children:(0,d.jsxs)(p.Z,{children:[(0,d.jsx)(P.Z,{}),r.showName]})})}},92754:function(Z,v,e){var j=e(5574),n=e.n(j),f=e(67294),E=e(82346),P=e(38703),h=e(85893),p=(0,f.forwardRef)(function(g,d){var l=(0,f.useState)(""),m=n()(l,2),r=m[0],D=m[1];(0,f.useImperativeHandle)(d,function(){return{setFinish:function(){o({finish:{downloading:100,extracting:100}})},setStart:function(_){_&&D(_),o({start:{downloading:0,extracting:0}})},close:function(){i.progress.close("image:pull:"+r),o({start:{downloading:0,extracting:0}})}}});var i=(0,E.useModel)("subscriber");i.addDataHandler("image:pull:"+r,function(t){o(t.data)});var T=(0,f.useState)(),c=n()(T,2),a=c[0],o=c[1];return(0,f.useEffect)(function(){return o({start:{downloading:0,extracting:0}}),function(){i.progress.close("image:pull:"+r)}},[]),(0,h.jsx)(h.Fragment,{children:a&&Object.keys(a).map(function(t){return(0,h.jsx)(P.Z,{format:function(U){return"".concat(U,"%")},percent:a[t].downloading,success:{percent:a[t].extracting}},t)})})});v.Z=p},47248:function(Z,v,e){var j=e(15009),n=e.n(j),f=e(99289),E=e.n(f),P=e(5574),h=e.n(P),p=e(38345),g=e(97269),d=e(62370),l=e(5966),m=e(64317),r=e(83622),D=e(85265),i=e(25593),T=e(42075),c=e(67294),a=e(92754),o=e(82346),t=e(2205),_=e(3616),U=e(36146),w=e(23430),y=e(68297),R=e(77342),s=e(85893),N=(0,c.forwardRef)(function(B,O){var I=(0,c.useState)(!1),S=h()(I,2),$=S[0],x=S[1],F=(0,c.useRef)(),L=(0,c.useRef)(),K=(0,c.useState)(!1),W=h()(K,2),b=W[0],G=W[1],A=new U.Uo("components.imagePull");return(0,c.useImperativeHandle)(O,function(){return{upgradeImage:function(u){var M;return x(!0),(M=F.current)===null||M===void 0||M.setFieldValue("imageUrl",u),(0,y.Ze)({tag:u,type:"pull"})},setImageName:function(u){var M;x(!0),(M=F.current)===null||M===void 0||M.setFieldValue("imageUrl",u)}}}),[(0,s.jsx)(r.ZP,{type:B.buttonType?B.buttonType:"default",icon:(0,s.jsx)(w.Z,{}),onClick:function(){var u,M;x(!0),(u=F.current)===null||u===void 0||u.resetFields(),(M=L.current)===null||M===void 0||M.setStart("")},children:A.format("triggerButton")},"remoteBtn"),(0,s.jsxs)(D.Z,{forceRender:!0,open:$,title:A.format("drawerTitle"),width:_.R_,onClose:function(){var u;x(!1),(u=L.current)===null||u===void 0||u.close()},footer:!1,children:[(0,s.jsx)(p.Z,{children:(0,s.jsx)(i.Z.Text,{children:(0,s.jsxs)("ul",{style:{lineHeight:"30px"},children:[(0,s.jsxs)("li",{children:[A.format("tip.1")," ",(0,s.jsx)("a",{href:"https://hub.docker.com/",target:"_blank",children:U.FD.format("help")})]}),(0,s.jsxs)("li",{children:[A.format("tip.2")," ",(0,s.jsx)("a",{href:"https://hub.docker.com/search?q=",target:"_blank",children:U.FD.format("help")})]}),(0,s.jsxs)("li",{children:[A.format("tip.3")," "]}),(0,s.jsxs)("li",{children:[A.format("tip.4")," ",(0,s.jsx)(o.Link,{to:"/image/registry",children:U.Ob.format("image.registry.create")})]}),(0,s.jsxs)("li",{children:[A.format("tip.5")," ",(0,s.jsx)(o.Link,{to:"/image/registry",children:U.Ob.format("image.registry")})]})]})})}),(0,s.jsx)(p.Z,{title:A.format("triggerButton"),headerBordered:!0,children:(0,s.jsxs)(g.A,{formRef:F,submitter:!1,isKeyPressSubmit:!0,onFinish:function(){var C=E()(n()().mark(function u(M){var H,V,Q,J,z,X;return n()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return z=(H=M.imageUrl)!==null&&H!==void 0?H:"",M.registry&&(z=M.registry.serverAddress+"/"+z),G(!0),(V=L.current)===null||V===void 0||V.setStart(z),k.next=6,(0,y.Ze)({tag:(0,R.Z)(z," "),type:"pull",platform:(Q=M.platform)!==null&&Q!==void 0?Q:""}).finally(function(){G(!1)});case 6:return X=k.sent,(J=L.current)===null||J===void 0||J.setFinish(),x(!1),B.onFinish&&B.onFinish(X.data.tag),k.abrupt("return",!0);case 11:case"end":return k.stop()}},u)}));return function(u){return C.apply(this,arguments)}}(),children:[(0,s.jsxs)(T.Z.Compact,{children:[(0,s.jsx)(d.Z,{name:"registry",children:(0,s.jsx)(t.Z,{width:"150px"})}),(0,s.jsx)(l.Z,{disabled:b,width:270,name:"imageUrl",placeholder:A.format("imageUrlEmpty"),required:!0,rules:[{required:!0}]}),(0,s.jsx)(m.Z,{name:"platform",style:{width:100},placeholder:A.format("imagePlatformEmpty"),options:y.ii.map(function(C){return{label:C.name,value:C.name}})}),(0,s.jsx)(r.ZP,{loading:b,onClick:E()(n()().mark(function C(){var u;return n()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:(u=F.current)===null||u===void 0||u.submit();case 1:case"end":return H.stop()}},C)})),children:A.format("triggerButton")}),(0,s.jsx)(r.ZP,{danger:!0,onClick:function(){var u;(u=L.current)===null||u===void 0||u.close()},children:U.FD.format("listManageKill")})]}),(0,s.jsx)(d.Z,{label:A.format("progressTitle"),children:(0,s.jsx)(a.Z,{ref:L})})]})})]},"remoteDrawer")]});v.Z=N},80271:function(Z,v,e){var j=e(15009),n=e.n(j),f=e(99289),E=e.n(f),P=e(5574),h=e.n(P),p=e(184),g=e(9773),d=e(83062),l=e(67294),m=e(68536),r=e(5251),D=e(81366),i=e(3616),T=e(36146),c=e(73813),a=e(85893),o=(0,l.forwardRef)(function(t,_){(0,l.useImperativeHandle)(_,function(){return{show:function(){}}});var U=(0,l.useState)(""),w=h()(U,2),y=w[0],R=w[1],s=(0,l.useState)(!1),N=h()(s,2),B=N[0],O=N[1],I=(0,l.useRef)(),S=(0,l.useRef)(),$=function(K,W){R(W)},x=new T.Uo("components.explorer"),F=new T.Uo("image");return(0,a.jsx)(p.a,{drawerProps:{width:i.R_},open:B,submitter:!1,title:F.format("fileTitle"),onOpenChange:function(K){O(K),R(K?"/":"")},trigger:(0,a.jsx)(d.Z,{title:F.format("fileTitle"),children:t.trigger}),children:(0,a.jsx)(g.Z,{headerTitle:(0,a.jsx)(D.Z,{ref:S,showPath:$}),scroll:{x:"max-content"},search:!1,rowKey:"name",pagination:{pageSize:500,position:["topRight","bottomRight"]},actionRef:I,request:E()(n()().mark(function L(){var K;return n()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(y!=""){b.next=2;break}return b.abrupt("return",{data:[],total:0,success:!0});case 2:return b.next=4,(0,c.cD)({md5:t.imageId,path:y});case 4:return K=b.sent,b.abrupt("return",{data:K.data.info,total:K.data.info.length,success:!0});case 6:case"end":return b.stop()}},L)})),columns:[{title:x.format("listName"),dataIndex:"showName",key:"name",render:function(C,W,b,G,A){var C,u=W.name.replace(y,"");return W.isDir?C=(0,a.jsx)(m.Z,{isDir:!0,onClick:function(){return $(u,W.path)},showName:u}):W.isSymlink?C=(0,a.jsx)(m.Z,{isLink:!0,showName:u}):C=(0,a.jsx)(m.Z,{showName:u}),C}},{title:x.format("listModStr"),dataIndex:"modStr",key:"modStr"},{title:x.format("listUser"),dataIndex:"user"},{title:x.format("listGroup"),dataIndex:"group"},{title:x.format("listSize"),dataIndex:"size",key:"size",render:function(K,W,b,G,A){return(0,r.FI)(W.size)}},{title:x.format("listModTime"),dataIndex:"modTime",key:"modTime",render:function(K,W,b,G,A){return(0,r.NF)(W.modTime)},sorter:function(K,W){return new Date(K.modTime).getTime()-new Date(W.modTime).getTime()}}],cardProps:{ghost:!0}},"".concat(t.imageId,"-").concat(y))})});v.Z=o},2205:function(Z,v,e){e.d(v,{Z:function(){return l}});var j=e(97857),n=e.n(j),f=e(5574),E=e.n(f),P=e(75870),h=e(36146),p=e(34041),g=e(67294),d=e(85893);function l(m){var r=(0,g.useState)([]),D=E()(r,2),i=D[0],T=D[1],c=new h.Uo("components.selectRegistry");(0,g.useEffect)(function(){(0,P.Ot)().then(function(o){o&&T(o.data.list)})},[]);var a={};return m.multiple&&(a.mode="multiple"),m.top&&(a.placement="topLeft"),(0,d.jsx)(p.Z,n()({popupMatchSelectWidth:!m.width,style:m.width?{width:m.width}:{},onChange:function(t){if(t)if(Array.isArray(t)){var _=t.map(function(U){return i[U]});m.onChangeList&&m.onChangeList(_)}else m.onChange&&m.onChange(i[t])},placeholder:c.format("nameEmpty"),options:i.map(function(o,t){return{value:t,label:o.title+"("+o.serverAddress+")"}}),allowClear:!0},a))}},68297:function(Z,v,e){e.d(v,{Qd:function(){return d},Ze:function(){return p},aw:function(){return T},cV:function(){return m},fy:function(){return D},ii:function(){return h}});var j=e(15009),n=e.n(j),f=e(99289),E=e.n(f),P=e(82346),h=[{name:"amd64",arch:"amd64",search:["amd64","x86_64","86_64"]},{name:"arm64",arch:"arm64",search:["arm64","arrch64"]},{name:"i386",arch:"386",search:[]},{name:"arm/v6",arch:"arm",search:[]},{name:"arm/v7",arch:"arm",search:[]},{name:"arm/v8",arch:"arm64",search:[]},{name:"ppc64le",arch:"ppc64le",search:[]},{name:"riscv64",arch:"riscv64",search:[]}];function p(a){return g.apply(this,arguments)}function g(){return g=E()(n()().mark(function a(o){return n()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,P.request)("/api/app/image/tag-sync",{method:"POST",data:o}));case 1:case"end":return _.stop()}},a)})),g.apply(this,arguments)}function d(a){return l.apply(this,arguments)}function l(){return l=E()(n()().mark(function a(o){return n()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,P.request)("/api/app/image/tag-add",{method:"POST",data:o}));case 1:case"end":return _.stop()}},a)})),l.apply(this,arguments)}function m(a){return r.apply(this,arguments)}function r(){return r=E()(n()().mark(function a(o){return n()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,P.request)("/api/app/image/tag-delete",{method:"POST",data:o}));case 1:case"end":return _.stop()}},a)})),r.apply(this,arguments)}function D(a){return i.apply(this,arguments)}function i(){return i=E()(n()().mark(function a(o){return n()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,P.request)("/api/app/image/tag-push-batch",{method:"POST",data:o}));case 1:case"end":return _.stop()}},a)})),i.apply(this,arguments)}function T(a){return c.apply(this,arguments)}function c(){return c=E()(n()().mark(function a(o){return n()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,P.request)("/api/pro/image/get-remote-tag",{method:"POST",data:o}));case 1:case"end":return _.stop()}},a)})),c.apply(this,arguments)}}}]);
