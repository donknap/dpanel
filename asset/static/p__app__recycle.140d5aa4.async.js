"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1610],{67108:function(S,h,e){e.r(h),e.d(h,{default:function(){return Z}});var j=e(15009),m=e.n(j),x=e(99289),v=e.n(x),T=e(74453),p=e(62597),U=e(42075),L=e(96074),b=e(25593),y=e(83062),W=e(82346),P=e(86548),O=e(87740),C=e(82061),M=e(67294),B=e(96974),I=e(80821),K=e(78451),i=e(36146),D=e(98510),F=e(84941),g=e(70146),r=e(85893);function Z(){var $=(0,B.UO)(),l=(0,M.useRef)(),w=(0,W.useAccess)(),A=new i.Uo("app"),R=(0,M.useRef)();return(0,M.useEffect)(function(){var _;(_=l.current)===null||_===void 0||_.reload()},[$]),(0,r.jsxs)(T._z,{header:{extra:[]},children:[(0,r.jsx)(F.Z,{ref:R,onFinish:function(){var a;!((a=l.current)===null||a===void 0)&&a.reloadAndRest&&l.current.reloadAndRest()}}),(0,r.jsx)(D.C,{rowKey:"id",actionRef:l,columns:[{title:i.FD.format("listTitle"),dataIndex:"siteTitle",width:200},{title:i.FD.format("listName"),dataIndex:"siteName",width:200},{title:i.FD.format("listLastError"),dataIndex:"message",search:!1,width:250,render:function(a,s,u,f,o){return(0,r.jsx)(K.Z,{content:s.message})}},{title:i.FD.format("listDeletedAt"),ellipsis:!0,dataIndex:"deletedAt",search:!1,width:180,render:function(a,s,u,f,o){return new Date(s.deletedAt).toLocaleString()}},{title:i.FD.format("listManage"),valueType:"option",key:"option",width:80,fixed:"right",render:function(a,s,u,f){return(0,r.jsxs)(U.Z,{split:(0,r.jsx)(L.Z,{type:"vertical"}),children:[(0,r.jsx)(b.Z.Link,{onClick:function(){var t;(t=R.current)===null||t===void 0||t.show(s.id)},children:(0,r.jsx)(y.Z,{title:i.FD.format("listManageEdit"),children:(0,r.jsx)(P.Z,{})})},"rebuild"),s.containerInfo&&s.containerInfo.Info&&s.containerInfo.Info.Name&&(0,r.jsx)(I.Z,{buttonProps:{ghost:!0,type:"link",icon:(0,r.jsx)(O.Z,{})},action:function(){return(0,g.vG)({name:s.siteName})},confirmProps:{description:A.format("recycleRestoreConfirm")},tips:i.FD.format("listManageUnpause"),onSuccess:function(){var t;!((t=l.current)===null||t===void 0)&&t.reloadAndRest&&l.current.reloadAndRest()}})]})}}],request:function(){var _=v()(m()().mark(function a(s,u,f){var o;return m()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,p.cl)({isDelete:!0,siteTitle:s.siteTitle,siteName:s.siteName});case 2:return o=n.sent,n.abrupt("return",{data:o.data.list,success:!0,total:o.data.list.length});case 4:case"end":return n.stop()}},a)}));return function(a,s,u){return _.apply(this,arguments)}}(),rowSelection:w.canSeeContainerListManageDelete?{alwaysShowAlert:!0}:void 0,quickToolbarRender:function(a){var s=a.selectedRows,u=a.finish,f=a.loading;return[(0,r.jsx)(I.Z,{buttonProps:{danger:!0,type:"primary",icon:(0,r.jsx)(C.Z,{})},confirmProps:{showCommonConfirm:!0},action:function(){return f(),(0,p.xb)({id:s.map(function(t){return t.id})}).finally(function(){u(!0)})},onSuccess:function(){var t,n;return!((t=l.current)===null||t===void 0)&&t.reloadAndRest&&((n=l.current)===null||n===void 0||n.reloadAndRest()),!0},onError:function(){var t,n;return!((t=l.current)===null||t===void 0)&&t.reset&&((n=l.current)===null||n===void 0||n.reset()),!0},children:i.FD.format("listManageDeleteBatch")},"batchDelete")]},contextMenu:function(a){var s=a.loading,u=a.finish,f=a.isMultiple,o=a.selectedRow,t=a.selectedRows;return{items:[{type:"group",label:i.FD.format("listManage"),key:"operator",children:[{label:(0,r.jsx)(D.C.ContextMenuItem,{buttonProps:{icon:(0,r.jsx)(P.Z,{}),disabled:f()},action:v()(m()().mark(function n(){var E;return m()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:u(!0),(E=R.current)===null||E===void 0||E.show(o.id);case 2:case"end":return d.stop()}},n)})),children:i.FD.format("listManageEdit")}),key:"edit"},{label:(0,r.jsx)(D.C.ContextMenuItem,{buttonProps:{icon:(0,r.jsx)(O.Z,{}),disabled:f()},action:v()(m()().mark(function n(){return m()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return u(!0),c.abrupt("return",(0,g.vG)({name:o.siteName}).then(function(){var d;!((d=l.current)===null||d===void 0)&&d.reloadAndRest&&l.current.reloadAndRest()}).finally(function(){u()}));case 2:case"end":return c.stop()}},n)})),confirmProps:{description:A.format("recycleRestoreConfirm")},children:i.FD.format("listManageUnpause")}),key:"recover"}]},{key:"delete",label:(0,r.jsx)(D.C.ContextMenuItem,{buttonProps:{icon:(0,r.jsx)(C.Z,{})},type:"danger",confirmProps:{showCommonConfirm:!0},action:v()(m()().mark(function n(){return m()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return s(),c.abrupt("return",(0,p.xb)({id:t.map(function(d){return d.id})}).finally(function(){u(!0)}));case 2:case"end":return c.stop()}},n)})),children:i.FD.format("listManageDelete")},"deleteBatch")}]}}},"recycle-list")]})}}}]);
