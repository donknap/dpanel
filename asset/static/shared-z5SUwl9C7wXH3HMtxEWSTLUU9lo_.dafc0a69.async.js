"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4788],{85060:function(ze,Ce,e){e.d(Ce,{Z:function(){return w}});var F=e(87462),C=e(67294),ce={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M624 706.3h-74.1V464c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v242.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.7a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-download",theme:"outlined"},p=ce,W=e(84089),ie=function(D,h){return C.createElement(W.Z,(0,F.Z)({},D,{ref:h,icon:p}))},y=C.forwardRef(ie),w=y},63434:function(ze,Ce,e){var F=e(1413),C=e(45987),ce=e(22270),p=e(84567),W=e(67294),ie=e(90789),y=e(64203),w=e(85893),T=["options","fieldProps","proFieldProps","valueEnum"],D=W.forwardRef(function(A,O){var ne=A.options,H=A.fieldProps,j=A.proFieldProps,f=A.valueEnum,o=(0,C.Z)(A,T);return(0,w.jsx)(y.Z,(0,F.Z)({ref:O,valueType:"checkbox",valueEnum:(0,ce.h)(f,void 0),fieldProps:(0,F.Z)({options:ne},H),lightProps:(0,F.Z)({labelFormatter:function(){return(0,w.jsx)(y.Z,(0,F.Z)({ref:O,valueType:"checkbox",mode:"read",valueEnum:(0,ce.h)(f,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,F.Z)({options:ne},H),proFieldProps:j},o))}},o.lightProps),proFieldProps:j},o))}),h=W.forwardRef(function(A,O){var ne=A.fieldProps,H=A.children;return(0,w.jsx)(p.Z,(0,F.Z)((0,F.Z)({ref:O},ne),{},{children:H}))}),X=(0,ie.G)(h,{valuePropName:"checked"}),g=X;g.Group=D,Ce.Z=g},99861:function(ze,Ce,e){var F=e(64599),C=e.n(F),ce=e(15009),p=e.n(ce),W=e(99289),ie=e.n(W),y=e(5574),w=e.n(y),T=e(42119),D=e(83062),h=e(67294),X=e(92754),g=e(184),A=e(38345),O=e(3616),ne=e(36146),H=e(68297),j=e(85893),f=(0,h.forwardRef)(function(o,s){(0,h.useImperativeHandle)(s,function(){return{start:function(){var v;return V(!0),u((v=o.image)!==null&&v!==void 0?v:[])},finish:function(){V(!1)},pull:function(v){return V(!0),u(v)}}});var Ye=(0,h.useState)(0),Ve=w()(Ye,2),Oe=Ve[0],ke=Ve[1],se=(0,h.useRef)(),ye=(0,h.useState)(!1),be=w()(ye,2),le=be[0],V=be[1],d=(0,h.useState)([]),Ie=w()(d,2),P=Ie[0],te=Ie[1],r=new ne.Uo("components.appCompose");function u(ae){return Je.apply(this,arguments)}function Je(){return Je=ie()(p()().mark(function ae(v){var z,Z,$,Ne,Y,xe,Le;return p()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:Z=0,te(v),$=C()(v),J.prev=3,$.s();case 5:if((Ne=$.n()).done){J.next=15;break}return xe=Ne.value,ke(Z),(Y=se.current)===null||Y===void 0||Y.setStart(xe),J.next=11,(0,H.Ze)({tag:xe,type:"pull"});case 11:Le=J.sent,Z++;case 13:J.next=5;break;case 15:J.next=20;break;case 17:J.prev=17,J.t0=J.catch(3),$.e(J.t0);case 20:return J.prev=20,$.f(),J.finish(20);case 23:(z=se.current)===null||z===void 0||z.setFinish(),ke(Z),o.finishAutoHide&&V(!1);case 26:case"end":return J.stop()}},ae,null,[[3,17,20,23]])})),Je.apply(this,arguments)}return(0,j.jsxs)(g.a,{trigger:o.trigger,open:le,submitter:!1,title:r.format("pullImageTitle"),onOpenChange:function(){var ae=ie()(p()().mark(function v(z){var Z,$;return p()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:V(z),z&&o.trigger&&u((Z=o.image)!==null&&Z!==void 0?Z:[]),z||($=se.current)===null||$===void 0||$.close();case 3:case"end":return Y.stop()}},v)}));return function(v){return ae.apply(this,arguments)}}(),drawerProps:{forceRender:!0,width:O.R_},children:[(0,j.jsx)(A.Z,{children:P&&(0,j.jsx)(T.Z,{current:Oe,items:P.map(function(ae,v){return{title:(0,j.jsx)(D.Z,{title:ae,children:ae.length>15?ae.substring(0,6)+" ... "+ae.substring(ae.length-6):ae}),key:v}})})}),(0,j.jsx)(A.Z,{children:(0,j.jsx)(X.Z,{ref:se})})]})});Ce.Z=f},44771:function(ze,Ce,e){e.d(Ce,{Z:function(){return w}});var F=e(36146),C=e(38345),ce=e(64317),p=e(97462),W=e(31199),ie=e(86250),y=e(85893);function w(T){var D=new F.Uo("components.appForm");return(0,y.jsx)(C.Z,{ghost:T.ghost,children:(0,y.jsxs)(ie.Z,{gap:50,children:[(0,y.jsx)(ce.Z,{tooltip:"".concat(D.format("createParamsDemo",{params:"--restart always"})),label:T.showLabel&&D.format("createAdvRestart"),name:["restart","name"],width:"md",initialValue:T.defaultValue?T.defaultValue:"on-failure",options:D.option("createAdvRestartOption",["no","on-failure","unless-stopped","always"])}),(0,y.jsx)(p.Z,{name:["restart"],children:function(X){var g=X.restart;return g&&g.name=="on-failure"&&(0,y.jsx)(W.Z,{width:"md",label:D.format("createAdvRestartMax"),name:["restart","maxAttempt"],initialValue:5})}})]})})}},84941:function(ze,Ce,e){e.d(Ce,{Z:function(){return dn}});var F=e(97857),C=e.n(F),ce=e(15009),p=e.n(ce),W=e(19632),ie=e.n(W),y=e(99289),w=e.n(y),T=e(5574),D=e.n(T),h=e(38345),X=e(62370),g=e(5966),A=e(24739),O=e(97462),ne=e(83622),H=e(30291),j=e(92398),f=e(40056),o=e(67294),s=e(42963),Ye=e(51042),Ve=e(63434),Oe=e(17186),ke=e(71230),se=e(15746),ye=e(23345),be=e(25593),le=e(85265),V=e(92067),d=e(5251),Ie=e(3616),P=e(36146),te=e(95833),r=e(85893),u=(0,o.forwardRef)(function(I,ee){var i=(0,o.useState)(!1),b=D()(i,2),N=b[0],me=b[1],Ae=(0,o.useRef)(),l=new P.Uo("components.appForm"),U=function(x){return(0,r.jsxs)(h.Z,{bordered:!0,extra:x.action,style:{marginBottom:10},children:[(0,r.jsx)(h.Z,{title:l.format("createLinkItemTitle"),ghost:!0,children:(0,r.jsxs)(ke.Z,{children:[(0,r.jsx)(se.Z,{span:6,children:(0,r.jsx)(g.Z,{label:l.format("createLinkItemName"),name:"name",width:"md",readonly:!0})}),(0,r.jsxs)(se.Z,{span:14,children:[(0,r.jsx)(g.Z,{label:l.format("createLinkItemAlise"),name:"alise",width:"md",readonly:!0,tooltip:l.format("createLinkItemAliseTip"),hidden:!0}),(0,r.jsx)(X.Z,{label:l.format("createLinkItemAlise"),tooltip:l.format("createLinkItemAliseTip"),children:(0,r.jsx)(ye.Z,{direction:"vertical",children:[x.name,x.record.alise].map(function(_){return(0,r.jsx)(be.Z.Text,{copyable:!0,children:_})})})})]}),(0,r.jsx)(se.Z,{span:4,children:(0,r.jsx)(Ve.Z,{label:l.format("createLinkItemVolume"),name:"volume"})})]})}),(0,r.jsx)(h.Z,{ghost:!0,title:l.format("createLinkItemEnv"),children:(0,r.jsx)(ye.Z,{direction:"vertical",children:x.record.env&&(0,d.oZ)(x.record.env).map(function(_,_e){return(0,r.jsx)(be.Z.Text,{copyable:{icon:(0,r.jsx)(Ye.Z,{}),onCopy:function(){I.onAddEnv(_.name,_.value)},tooltips:[l.format("createLinkAddToEnv"),"success"]},code:!0,ellipsis:{tooltip:"".concat(_.name,"=").concat(_.value)},children:"".concat(_.name,"=").concat(_.value)},_e)})},"linkEnv")})]})},K=function(x){var _,_e,S=!1,M=(_=(_e=Ae.current)===null||_e===void 0?void 0:_e.getList())!==null&&_!==void 0?_:[];if(M.map(function(fe){fe.name==x.name&&(S=!0)}),!S){var E;(E=Ae.current)===null||E===void 0||E.add(x)}};return(0,o.useImperativeHandle)(ee,function(){return{setDefaultLink:function(x){x&&x.map(function(_){_.name!=""&&K(_)})}}}),(0,r.jsxs)(h.Z,{title:l.format("createLinkTitle"),headerBordered:!0,tooltip:"".concat(l.format("createParamsDemo",{params:"--link list"})),ghost:!0,children:[(0,r.jsx)(Oe.u,{name:"links",actionRef:Ae,creatorButtonProps:{creatorButtonText:l.format("createLinkAddButton")},actionGuard:{beforeAddRow:function(x,_){return me(!0),!1}},copyIconProps:!1,min:0,itemRender:function(x,_){return(0,r.jsx)(U,{action:x.action,name:_.record.name,record:_.record})}}),(0,r.jsx)(le.Z,{title:l.format("createLinkSelectContainer"),width:Ie.R_,footer:!1,open:N,onClose:function(){return me(!1)},children:(0,r.jsx)(V.Z,{onSelect:function(x){K({name:(0,d.fi)(x.Name,"/"),volume:!1,env:x.Config.Env,alise:(0,te.zY)(x.Name)}),me(!1)}})})]})}),Je=u,ae=e(91058),v=e(10523),z=e(24796),Z=e(52688),$=e(24963);function Ne(){var I=(0,o.useContext)($.Z),ee=I.message,i=new P.Uo("components.appForm");return(0,r.jsx)(h.Z,{ghost:!0,children:(0,r.jsxs)(A.UW,{children:[(0,r.jsx)(Z.Z,{fieldProps:{onChange:function(N){N&&ee.warning(i.format("createAdvRunCommandPrivilegedNotice"))}},name:"privileged",tooltip:"".concat(i.format("createParamsDemo",{params:"--privileged"})),label:i.format("createAdvRunCommandPrivileged"),initialValue:!1}),(0,r.jsx)(Z.Z,{name:"autoRemove",tooltip:"".concat(i.format("createParamsDemo",{params:"--rm"})),label:i.format("createAdvRunCommandAutoRemove"),initialValue:!1}),(0,r.jsx)(Z.Z,{fieldProps:{onChange:function(N){N&&ee.warning(i.format("createAdvRunCommandHostPidNotice"))}},tooltip:"".concat(i.format("createParamsDemo",{params:"--pid host"})),name:"hostPid",label:i.format("createAdvRunCommandHostPid"),initialValue:!1}),(0,r.jsx)(Z.Z,{name:"init",tooltip:"".concat(i.format("createParamsDemo",{params:"--init"})),label:i.format("createAdvRunCommandInit"),initialValue:!1})]})})}var Y=e(62597),xe=e(63713),Le=e(20743),hr=(0,o.forwardRef)(function(I,ee){var i=(0,o.useRef)(),b=(0,o.useRef)(),N=new P.Uo("components.appForm");(0,o.useImperativeHandle)(ee,function(){return{}});var me=function(l){var U,K,de=!1,x=(U=(K=i.current)===null||K===void 0?void 0:K.getList())!==null&&U!==void 0?U:[];if(x.map(function(_e){_e.name==l.name&&(de=!0)}),!de){var _;(_=i.current)===null||_===void 0||_.add(l)}};return(0,r.jsxs)(h.Z,{ghost:!0,title:N.format("createNetworkTitle"),tooltip:"".concat(N.format("createParamsDemo",{params:"--network list"})),headerBordered:!0,extra:(0,r.jsx)(ye.Z,{children:I.showUseBridgeNetwork&&(0,r.jsx)(Z.Z,{name:"useBridgeNetwork",initialValue:!0,fieldProps:{checkedChildren:N.format("createNetworkUseBridgeNetwork"),unCheckedChildren:N.format("createNetworkUseBridgeNetwork")}},"useBridgeNetwork")}),children:[(0,r.jsx)(Oe.u,{name:"network",actionRef:i,creatorButtonProps:{creatorButtonText:N.format("createNetworkAddButton")},actionGuard:{beforeAddRow:function(l,U){var K;return(K=b.current)===null||K===void 0||K.show(),!1}},copyIconProps:!1,min:0,itemRender:function(l,U){return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(A.UW,{children:[(0,r.jsx)(g.Z,{label:N.format("createNetworkName"),name:"name",width:"md",disabled:!0,fieldProps:{value:U.record.name}}),(0,r.jsx)(g.Z,{label:N.format("createNetworkAlise"),name:"alise",tooltip:N.format("createNetworkAliseTip"),placeholder:N.format("createNetworkAliseEmpty"),disabled:U.record.name=="bridge"}),(0,r.jsx)(g.Z,{label:"IpV4",name:"ipV4",width:"md",disabled:U.record.name=="bridge",fieldProps:{addonAfter:U.record.subnet}}),U.record.subnetV6&&(0,r.jsx)(g.Z,{label:"IpV6",name:"ipV6",width:"md",disabled:U.record.name=="bridge",fieldProps:{addonAfter:U.record.subnetV6}}),(0,r.jsx)(X.Z,{label:" ",children:l.action})]})})}}),(0,r.jsx)(Le.Z,{ref:b,onSelect:function(l){me({name:l.Name,alise:[""],subnet:l.IPAM.Config&&l.IPAM.Config[0].Subnet,subnetV6:l.IPAM.Config&&l.IPAM.Config[1]&&l.IPAM.Config[1].Subnet})}})]})}),J=hr,gr=e(82034),$e=e(52255),Re=e(59252),nr=e(73813),dr=function(ee){var i=new P.Uo("components.appForm");return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(h.Z,{title:i.format("createSelfNetworkTitle"),subTitle:i.format("createSelfNetworkTitleTip"),tooltip:"".concat(i.format("createParamsDemo",{params:"--network string --ip string --ip6 string"})),ghost:!0,children:[(0,r.jsxs)(A.UW,{children:[(0,r.jsx)(g.Z,{label:i.format("createSelfNetworkIp",{ip:"ipv4"}),name:["ipV4","address"],width:"md",tooltip:i.format("createSelfNetworkIpTip",{ip:"ipv4",example:"192.168.1.5"}),placeholder:"192.168.1.5"}),(0,r.jsx)(O.Z,{name:["ipV4"],children:function(N){var me=N.ipV4;return(0,r.jsx)(g.Z,{label:i.format("createSelfNetworkIpSubnet",{ip:"ipv4"}),name:["ipV4","subnet"],width:"md",required:me&&me.address,tooltip:i.format("createSelfNetworkIpSubnetTip",{ip:"ipv4",example:"192.168.1.0/24"}),placeholder:"192.168.1.0/24",rules:[{required:me&&me.address}]})}}),(0,r.jsx)(g.Z,{label:i.format("createSelfNetworkIpGateway",{ip:"ipv4"}),name:["ipV4","gateway"],width:"md",tooltip:i.format("createSelfNetworkIpGatewayTip",{ip:"ipv4",example:"192.168.1.1"}),placeholder:"192.168.1.1"}),(0,r.jsx)(Z.Z,{label:i.format("createSelfNetworkIpV6Enable"),name:"enableIpV6Address"})]}),(0,r.jsx)(O.Z,{name:["enableIpV6Address"],children:function(N){var me=N.enableIpV6Address;if(me)return(0,r.jsxs)(A.UW,{children:[(0,r.jsx)(g.Z,{label:i.format("createSelfNetworkIp",{ip:"ipv6"}),name:["ipV6","address"],width:"md",tooltip:i.format("createSelfNetworkIpTip",{ip:"ipv6",example:"2001:db8::5"}),placeholder:"2001:db8::5"}),(0,r.jsx)(O.Z,{name:["ipV6"],children:function(l){var U=l.ipV6;return(0,r.jsx)(g.Z,{label:i.format("createSelfNetworkIpSubnet",{ip:"ipv6"}),name:["ipV6","subnet"],width:"md",required:U&&U.address,tooltip:i.format("createSelfNetworkIpSubnetTip",{ip:"ipv6",example:"2001:db8::/48"}),placeholder:"2001:db8::/48",rules:[{required:U&&U.address}]})}}),(0,r.jsx)(g.Z,{label:i.format("createSelfNetworkIpGateway",{ip:"ipv6"}),name:["ipV6","gateway"],width:"md",tooltip:i.format("createSelfNetworkIpGatewayTip",{ip:"ipv6",example:"2001:db8::1"}),placeholder:"2001:db8::1"})]})}})]})})},je=dr,R=e(90672);function q(){var I=new P.Uo("components.appForm");return(0,r.jsx)(h.Z,{ghost:!0,title:I.format("createHookTitle"),subTitle:"",children:(0,r.jsx)(R.Z,{label:I.format("createHookContainerCreate"),name:["hook","containerCreate"],placeholder:I.format("createHookContainerCreateTip")})})}var Q=e(93529),Fe=e(66309),Ue=e(96074),ur=e(83062),cr=e(64789),Cr=e(85060),Pr=e(78451),Ke=e(99861),Hr=e(80821),Vr=e(1699),$r=e(80271),Kr=e(6764),Gr=e(55681);function zr(I){var ee=new P.Uo("components.appForm"),i=(0,o.useContext)(s.Z),b=i.createFormRef,N=i.volumeListRef,me=i.createEnvRef,Ae=i.domainRef,l=i.containerInfo,U=(0,o.useState)(!1),K=D()(U,2),de=K[0],x=K[1];function _(S){return _e.apply(this,arguments)}function _e(){return _e=w()(p()().mark(function S(M){var E,fe,Me,ve,pe,Se,Qe,B,Te,ue,L,t;return p()().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if((E=b.current)===null||E===void 0||E.setFieldValue("imageName",M),!(l&&l.Id!="")){re.next=3;break}return re.abrupt("return",!0);case 3:return re.next=5,(0,nr.YU)({md5:M});case 5:return B=re.sent,Te=(fe=b.current)===null||fe===void 0?void 0:fe.getFieldsValue(),(Me=b.current)===null||Me===void 0||Me.resetFields(),(ve=b.current)===null||ve===void 0||ve.setFieldsValue({siteName:Te.siteName,siteTitle:Te.siteTitle,imageName:M}),B.data.info.Config.Env&&B.data.info.Config.Env.map(function(he){var ge,Pe=he.split("=");(ge=me.current)===null||ge===void 0||ge.addEnvNameValue(Pe[0],Pe.slice(1).join("="))}),(pe=b.current)===null||pe===void 0||pe.setFieldValue("workDir",B.data.info.Config.WorkingDir),(Se=Ae.current)===null||Se===void 0||Se.setExposePort(B.data.info.Config.ExposedPorts),B.data.info.Config.Volumes?(L=[],Object.keys(B.data.info.Config.Volumes).map(function(he,ge){L.push(he)}),(ue=N.current)===null||ue===void 0||ue.setDefaultDestPath(L)):(t=N.current)===null||t===void 0||t.setDefaultDestPath([]),(Qe=b.current)===null||Qe===void 0||Qe.setFieldsValue({workDir:{value:"",useDefault:!0,default:B.data.info.Config.WorkingDir},user:{value:"",useDefault:!0,default:B.data.info.Config.User},command:{value:"",useDefault:!0,default:B.data.info.Config.Cmd&&B.data.info.Config.Cmd.join(" ")},entrypoint:{value:"",useDefault:!0,default:B.data.info.Config.Entrypoint&&B.data.info.Config.Entrypoint.join(" ")}}),re.abrupt("return",!0);case 15:case"end":return re.stop()}},S)})),_e.apply(this,arguments)}return(0,o.useEffect)(function(){I.fromImageId&&_(I.fromImageId)},[I.fromImageId]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(le.Z,{destroyOnHidden:!0,open:de,width:Ie.R_,title:ee.format("dockerImageTitle"),footer:!1,onClose:function(){x(!1)},children:(0,r.jsx)(Gr.Co,{columns:[{title:"Id",dataIndex:"Id",search:!1,width:120,render:function(M,E,fe,Me,ve){return(0,r.jsx)(Pr.Z,{content:E.Id.slice(7,19)})}},{title:P.FD.format("listImageName"),dataIndex:"tag",render:function(M,E,fe,Me){return(0,r.jsx)(Pr.Z,{content:E.RepoTags[0]})}},{title:"Digest",width:120,render:function(M,E,fe,Me,ve){var pe=E.RepoDigests&&E.RepoDigests[0];return pe?pe.substring(pe.indexOf("@")+8).substring(0,12):(0,r.jsx)(Fe.Z,{color:"warning",children:new P.Uo("components.appDetail").format("checkImageUpgradeOption.-3")})}},{title:P.FD.format("listCreatedAt"),dataIndex:"Created",search:!1,width:180,render:function(M,E,fe,Me){return(0,r.jsx)("div",{children:(0,d.ZM)(E.Created*1e3)},E.Id)},sorter:function(M,E){return M.Created-E.Created}},{title:P.FD.format("listManage"),valueType:"option",key:"option",width:50,render:function(M,E,fe,Me){return(0,r.jsx)(ye.Z,{split:(0,r.jsx)(Ue.Z,{type:"vertical"}),children:(0,r.jsx)(Hr.Z,{buttonProps:{icon:(0,r.jsx)(cr.Z,{}),type:"link"},tips:P.FD.format("listManageUse"),action:function(){return _(E.RepoTags[0])},onSuccess:function(){x(!1)}},"addImage")})}}],request:function(){var S=w()(p()().mark(function M(E,fe,Me){var ve,pe,Se;return p()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return l&&l.Id!="",B.next=3,(0,nr.KG)({tag:E.tag});case 3:return ve=B.sent,pe=0,Se=[],ve.data.list&&(Se=ve.data.list.flatMap(function(Te){return Te.RepoTags.map(function(ue){var L,t=(L=Te.RepoDigests)===null||L===void 0?void 0:L.find(function(Ze){var re=Ze.split("@"),he=D()(re,2),ge=he[0],Pe=he[1];return ue.includes(ge)});return{Key:pe++,Id:Te.Id,Created:Te.Created,RepoTags:[ue],RepoDigests:[t]}})})),B.abrupt("return",{data:Se,success:!0,total:Se.length});case 8:case"end":return B.stop()}},M)}));return function(M,E,fe){return S.apply(this,arguments)}}(),rowKey:"Key"})},"imageTableList"),(0,r.jsxs)(ye.Z.Compact,{children:[(0,r.jsx)(g.Z,{width:"lg",label:ee.format("dockerImageImageName"),name:"imageName",disabled:!0,placeholder:ee.format("dockerImageImageNameEmpty"),rules:[{required:!0}],required:!0}),(0,r.jsx)(X.Z,{label:" ",children:(0,r.jsx)(ne.ZP,{type:"primary",onClick:function(){return x(!0)},children:ee.format("dockerImageTitle")},"showBtn")}),(0,r.jsx)(O.Z,{name:["imageName"],children:function(M){var E=M.imageName;if(E)return(0,r.jsx)(X.Z,{label:" ",children:(0,r.jsx)(Ke.Z,{finishAutoHide:!0,image:E?[E]:[],trigger:(0,r.jsx)(ur.Z,{title:ee.format("dockerImageUpgradeImageTip"),children:(0,r.jsx)(ne.ZP,{icon:(0,r.jsx)(Cr.Z,{}),children:ee.format("dockerImageUpgradeImageButton")})})})})}}),(0,r.jsx)(X.Z,{label:" ",children:(0,r.jsx)(Kr.Z,{onFinish:function(M){_(M)},imageUrl:l&&l.Config.Image},"remote")}),(0,r.jsx)(X.Z,{label:" ",children:(0,r.jsx)(O.Z,{name:["imageName"],children:function(M){var E=M.imageName;if(E)return(0,r.jsx)(Vr.u,{access:"canSeeEnableCe",showProTips:!0,children:function(Me){var ve=Me.canSeeEnableCe;return(0,r.jsx)($r.Z,{imageId:E,trigger:(0,r.jsx)(ne.ZP,{disabled:ve,children:ee.format("dockerImageFileExplorer")})})}})}})})]})]})}var Yr=e(44349);function Jr(){var I=new P.Uo("components.appForm");return(0,r.jsx)(h.Z,{ghost:!0,title:I.format("createDevice"),headerBordered:!0,tooltip:"".concat(I.format("createParamsDemo",{params:"--device list"})),children:(0,r.jsx)(Yr.Z,{name:"device",showAddButtonLabel:"".concat(P.FD.format("listManageAdd")).concat(I.format("createDevice")),hideCopyButton:!0,showAddButton:!0,gap:10,items:[{label:I.format("createDeviceHost"),name:"host",width:"md",placeholder:"/dev/tty0"},{label:I.format("createDeviceDest"),name:"dest",width:"md",placeholder:"/dev/tty0"}]})})}var Nr=e(64317);function Qr(){var I=new P.Uo("components.appForm");return(0,r.jsxs)(h.Z,{ghost:!0,children:[(0,r.jsxs)(ke.Z,{children:[(0,r.jsx)(se.Z,{span:4,children:(0,r.jsx)(Z.Z,{label:I.format("createGpus"),name:["gpus","enable"]})}),(0,r.jsx)(se.Z,{span:20,children:(0,r.jsx)(O.Z,{name:["gpus"],children:function(i){var b=i.gpus;if(b&&b.enable)return(0,r.jsx)(Nr.Z,{tooltip:"".concat(I.format("createParamsDemo",{params:"--gpus 'device=0'"})),mode:"tags",label:I.format("createGpusDevice"),name:["gpus","device"],placeholder:I.format("createGpusDeviceEmpty")})}})})]}),(0,r.jsx)(O.Z,{name:["gpus"],children:function(i){var b=i.gpus;if(b&&b.enable)return(0,r.jsx)(Nr.Z,{tooltip:"".concat(I.format("createParamsDemo",{params:"--gpus 'capabilities=compute,utility'"})),label:I.format("createGpusCap"),name:["gpus","capabilities"],mode:"multiple",fieldProps:{allowClear:!0},options:I.option("createGpusCapOption",["compute","compat32","graphics","utility","video","display"])})}})]})}var Xr=e(55730),qr=e(27323),en=e(44771),rn=e(33879),nn=e(96486),mr=e.n(nn),tn=e(73396),Lr=e(14946),an=e(13822),on=e(64412),sn=e(27166),ln=(0,o.forwardRef)(function(I,ee){var i=(0,o.useContext)($.Z),b=i.notice,N=(0,xe.useAccess)(),me=(0,o.useState)("basic"),Ae=D()(me,2),l=Ae[0],U=Ae[1],K=new P.Uo("app"),de=new P.Uo("components.appForm"),x=(0,o.useRef)(),_=(0,o.useRef)(),_e=(0,o.useRef)(),S=(0,o.useRef)(),M=(0,o.useRef)(),E=(0,o.useState)(!1),fe=D()(E,2),Me=fe[0],ve=fe[1],pe=(0,o.useRef)(),Se=(0,o.useState)(),Qe=D()(Se,2),B=Qe[0],Te=Qe[1];return(0,o.useImperativeHandle)(ee,function(){return{show:function(L){return w()(p()().mark(function t(){var Ze,re,he,ge,Pe,Xe,Be,tr,jr,Ee,De,Er,Ir,xr,Rr,_r,Zr,Dr,ar,wr,yr,Ar,Mr,or,qe,n,we,Ur,ir,Sr,Br,sr,kr,Tr;return p()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(Te(void 0),(Ze=x.current)===null||Ze===void 0||Ze.resetFields(),L){k.next=4;break}return k.abrupt("return");case 4:return ve(!0),(re=pe.current)===null||re===void 0||re.loading(),k.prev=6,k.next=9,(0,Y.iE)({id:L});case 9:if(qe=k.sent,n=(he=qe.data.containerInfo)===null||he===void 0?void 0:he.Info,Te(n),we={info:{Id:n==null?void 0:n.Image,Config:{WorkingDir:"",User:"",Entrypoint:[],Cmd:[]}}},!n){k.next=23;break}return k.prev=14,k.next=17,(0,nr.YU)({md5:n.Image});case 17:Ur=k.sent,we=Ur.data,k.next=23;break;case 21:k.prev=21,k.t0=k.catch(14);case 23:return ir=[],k.next=26,(0,Lr.jR)();case 26:return Sr=k.sent,ir=Sr.data.list,Br=function(a){if(!a)return{};var c=a[qe.data.siteName];if(!c)return{};var m=ir&&ir.find(function(G){return G.Id==c.NetworkID});return{ipV4:{address:c.IPAddress,gateway:c.Gateway,subnet:m&&m.IPAM.Config&&m.IPAM.Config[0]&&m.IPAM.Config[0].Subnet},ipV6:{address:c.GlobalIPv6Address,gateway:c.IPv6Gateway,subnet:m&&m.IPAM.Config&&m.IPAM.Config[1]&&m.IPAM.Config[1].Subnet},enableIpV6Address:m&&m.IPAM.Config&&m.IPAM.Config[1],bindIpV6:!!(m&&m.IPAM.Config&&m.IPAM.Config[1])}}(n==null?void 0:n.NetworkSettings.Networks),sr=[],k.next=32,function(){var a=w()(p()().mark(function c(m,G){var We;return p()().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:if(!(!(G!=null&&G.NetworkSettings)||!(G!=null&&G.NetworkSettings.Networks)||!(G!=null&&G.NetworkSettings.Networks[m]))){oe.next=2;break}return oe.abrupt("return",[]);case 2:return oe.next=4,(0,Lr.IS)({name:m});case 4:if(We=oe.sent,oe.t0=We.data.info.Containers,!oe.t0){oe.next=10;break}return oe.next=9,Promise.all(Object.entries(We.data.info.Containers).filter(function(Ge){var fr=D()(Ge,2),Fr=fr[0],vr=fr[1];return vr.Name!=m}).map(function(){var Ge=w()(p()().mark(function fr(Fr){var vr,un,pr,lr,Wr,er,Or;return p()().wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:if(vr=D()(Fr,2),un=vr[0],pr=vr[1],pr.Name==m){rr.next=9;break}return rr.next=4,(0,an.jV)({md5:pr.Name});case 4:return Wr=rr.sent,er=Wr.data.info,Or=(lr=G.HostConfig)===null||lr===void 0||(lr=lr.VolumesFrom)===null||lr===void 0?void 0:lr.includes(pr.Name),Or&&er.Mounts&&sr.push.apply(sr,ie()(er.Mounts.map(function(cn){var br;return(br=cn.Destination)!==null&&br!==void 0?br:""}))),rr.abrupt("return",{name:pr.Name,alise:er&&(0,te.zY)(er.Name),env:er&&er.Config.Env,volume:Or});case 9:case"end":return rr.stop()}},fr)}));return function(fr){return Ge.apply(this,arguments)}}()));case 9:oe.t0=oe.sent;case 10:return oe.abrupt("return",oe.t0);case 11:case"end":return oe.stop()}},c)}));return function(c,m){return a.apply(this,arguments)}}()(qe.data.siteName,n);case 32:kr=k.sent,(ge=x.current)===null||ge===void 0||ge.setFieldsValue(C()({id:n==null?void 0:n.Id,siteTitle:qe.data.siteTitle,siteName:qe.data.siteName,hook:qe.data.env.hook,imageName:n==null?void 0:n.Config.Image,hostname:n==null?void 0:n.Config.Hostname,privileged:n==null||(Pe=n.HostConfig)===null||Pe===void 0?void 0:Pe.Privileged,useHostNetwork:(n==null||(Xe=n.HostConfig)===null||Xe===void 0?void 0:Xe.NetworkMode)=="host",publishAllPorts:n==null||(Be=n.HostConfig)===null||Be===void 0?void 0:Be.PublishAllPorts,groupAdd:n==null||(tr=n.HostConfig)===null||tr===void 0?void 0:tr.GroupAdd,workDir:{value:n==null?void 0:n.Config.WorkingDir,useDefault:we.info.Config.WorkingDir==(n==null?void 0:n.Config.WorkingDir),default:we&&we.info.Config&&we.info.Config.WorkingDir},user:{value:n==null?void 0:n.Config.User,useDefault:we.info.Config.User==(n==null?void 0:n.Config.User),default:we.info.Config.User},command:{value:(0,d.PK)(n==null?void 0:n.Config.Cmd),useDefault:mr().isEmpty(n==null?void 0:n.Config.Cmd)||mr().isEqual(we.info.Config.Cmd,n==null?void 0:n.Config.Cmd),default:((jr=we.info.Config)===null||jr===void 0?void 0:jr.Cmd)&&(0,d.PK)(we.info.Config.Cmd)},entrypoint:{value:(0,d.PK)(n==null?void 0:n.Config.Entrypoint),useDefault:mr().isEmpty(n==null?void 0:n.Config.Entrypoint)||mr().isEqual(we.info.Config.Entrypoint,n==null?void 0:n.Config.Entrypoint),default:((Ee=we.info)===null||Ee===void 0||(Ee=Ee.Config)===null||Ee===void 0?void 0:Ee.Entrypoint)&&(0,d.PK)(we.info.Config.Entrypoint)},shmsize:(0,te.Rk)(n==null||(De=n.HostConfig)===null||De===void 0?void 0:De.ShmSize),cpus:(0,te.PD)(n==null||(Er=n.HostConfig)===null||Er===void 0?void 0:Er.NanoCpus),memory:(0,te.pM)(n==null||(Ir=n.HostConfig)===null||Ir===void 0?void 0:Ir.Memory),environment:(n==null?void 0:n.Config.Env)&&(0,d.oZ)(n.Config.Env,"="),label:function(a){return a&&Object.entries(a).map(function(c){var m=D()(c,2),G=m[0],We=m[1];return{name:G,value:We}})}(n==null?void 0:n.Config.Labels),volumes:function(a){return a==null?void 0:a.filter(function(c){var m;return!sr||sr.length==0||!sr.includes((m=c.Destination)!==null&&m!==void 0?m:"")}).map(function(c){return{host:c.Type=="bind"?c.Source:c.Name,dest:c.Destination,type:c.Type,permission:c.RW?"write":"readonly"}})}(n==null?void 0:n.Mounts),ports:(0,te.yi)(n),links:kr,network:function(a){return a&&Object.entries(a).map(function(c){var m=D()(c,2),G=m[0],We=m[1],He=ir&&ir.find(function(Ge){return Ge.Name==G}),oe="";return We.Aliases&&We.Aliases.forEach(function(Ge){if(!Ge.includes("pod.dpanel.local")){oe=Ge;return}}),{name:G,alise:oe,ipV4:We.IPAddress,subnet:"".concat(He&&He.IPAM.Config&&He!==null&&He!==void 0&&He.IPAM.Config[0]?He==null?void 0:He.IPAM.Config[0].Subnet:"-")}})}(n==null?void 0:n.NetworkSettings.Networks),restart:function(a){return a?{name:a==null?void 0:a.Name,maxAttempt:a==null?void 0:a.MaximumRetryCount}:{name:"no"}}(n==null||(xr=n.HostConfig)===null||xr===void 0?void 0:xr.RestartPolicy),extraHosts:(0,d.oZ)(n==null||(Rr=n.HostConfig)===null||Rr===void 0?void 0:Rr.ExtraHosts,":"),autoRemove:n==null||(_r=n.HostConfig)===null||_r===void 0?void 0:_r.AutoRemove,init:n==null||(Zr=n.HostConfig)===null||Zr===void 0?void 0:Zr.Init,log:function(a,c){return{driver:(c=a==null?void 0:a.Type)!==null&&c!==void 0?c:"json-file",maxFile:(a==null?void 0:a.Config)&&a.Config["max-file"],maxSize:(a==null?void 0:a.Config)&&a.Config["max-size"]}}(n==null||(Dr=n.HostConfig)===null||Dr===void 0?void 0:Dr.LogConfig),dns:n==null||(ar=n.HostConfig)===null||ar===void 0||(ar=ar.Dns)===null||ar===void 0?void 0:ar.join(`
`),gpus:function(a){var c=a==null?void 0:a.find(function(G){return G.Driver=="nvidia"});if(!c)return{enable:!1};var m=c.Capabilities&&c.Capabilities[0];return{device:c.DeviceIDs,capabilities:m&&m.includes("gpu")?[]:m,enable:!0}}(n==null||(wr=n.HostConfig)===null||wr===void 0?void 0:wr.DeviceRequests),device:function(a){return a==null?void 0:a.map(function(c){return{host:c.PathOnHost,dest:c.PathInContainer}})}(n==null||(yr=n.HostConfig)===null||yr===void 0?void 0:yr.Devices),hostPid:(n==null||(Ar=n.HostConfig)===null||Ar===void 0?void 0:Ar.PidMode)=="host",capAdd:n==null||(Mr=n.HostConfig)===null||Mr===void 0?void 0:Mr.CapAdd,healthcheck:function(a,c,m){if(!a)return{};var G=a!=null&&(c=a.Test)!==null&&c!==void 0&&c.includes("CMD-SHELL")?"CMD-SHELL":"CMD";return{interval:(a==null?void 0:a.Interval)&&a.Interval/Y.nL.Second,timeout:(a==null?void 0:a.Timeout)&&a.Timeout/Y.nL.Second,retries:a==null?void 0:a.Retries,cmd:a!=null&&a.Test?a==null||(m=a.Test)===null||m===void 0?void 0:m.slice(1).join(" "):"",shellType:G}}(n==null?void 0:n.Config.Healthcheck),useBridgeNetwork:function(a){return!!(a&&a.bridge)}(n==null?void 0:n.NetworkSettings.Networks),enableBindHost:n==null||(or=n.HostConfig)===null||or===void 0||(or=or.ExtraHosts)===null||or===void 0?void 0:or.some(function(a){return a.includes(":host-gateway")})},Br));case 34:return k.prev=34,(Tr=pe.current)===null||Tr===void 0||Tr.finish(),k.finish(34);case 37:case"end":return k.stop()}},t,null,[[6,,34,37],[14,21]])}))()}}}),(0,r.jsx)(s.Z.Provider,{value:{createFormRef:x,volumeListRef:_,domainRef:_e,createEnvRef:M,createLinkRef:S,containerInfo:B},children:(0,r.jsx)(sn.Z,{title:P.Ob.format("container.create"),trigger:I.showTrigger?(0,r.jsx)(ne.ZP,{type:"primary",disabled:!N.canSeeContainerListManageCreate,children:P.Ob.format("container.create")}):void 0,drawerProps:{width:Ie.FK,rootClassName:"createAppWapper"},ref:pe,formRef:x,onFinish:function(){var ue=w()(p()().mark(function L(t){var Ze,re,he,ge,Pe,Xe,Be,tr;return p()().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:if((Ze=pe.current)===null||Ze===void 0||Ze.loading(),Be={id:t.id,siteTitle:t.siteTitle,siteName:t.siteName,hostname:t.hostname,imageName:t.imageName,environment:t.environment,links:t.links,ports:t.ports,volumes:t.volumes,network:t.network&&t.network.map(function(De){return mr().isArray(De.alise)||(De.alise=[De.alise]),De}),privileged:(re=t.privileged)!==null&&re!==void 0?re:!1,autoRemove:(he=t.autoRemove)!==null&&he!==void 0?he:!1,init:(ge=t.init)!==null&&ge!==void 0?ge:!1,restartPolicy:t.restart,cpus:t.cpus,memory:t.memory,shmsize:(Pe=t.shmsize)!==null&&Pe!==void 0?Pe:"0",workDir:t.workDir&&!t.workDir.useDefault?t.workDir.value:"",user:t.user&&!t.user.useDefault?t.user.value:"",groupAdd:t.groupAdd,command:t.command&&!t.command.useDefault?t.command.value:"",entrypoint:t.entrypoint&&!t.entrypoint.useDefault?t.entrypoint.value:"",useHostNetwork:t.useHostNetwork,bindIpV6:t.bindIpV6,log:t.log,dns:t.dns,label:t.label,publishAllPorts:t.publishAllPorts,extraHosts:t.extraHosts,ipV4:t.ipV4,ipV6:t.ipV6,device:t.device,gpus:t.gpus,hook:t.hook,hostPid:t.hostPid,capAdd:t.capAdd,useBridgeNetwork:(Xe=t.useBridgeNetwork)!==null&&Xe!==void 0?Xe:!0},!(!t.useBridgeNetwork&&!t.useHostNetwork&&(!t.network||t.network.length==0))){Ee.next=5;break}return b.error(K.format("createMessageNoBridgeNetworkMustHasUseNetwork")),Ee.abrupt("return",!1);case 5:return t.useBridgeNetwork&&Be.network&&!Be.network.find(function(De){return De.name=="bridge"})&&Be.network.push({name:"bridge",alise:[],ipV4:""}),t.healthcheck&&t.healthcheck.cmd&&t.healthcheck.cmd!=""&&(Be.healthcheck=t.healthcheck),Ee.next=9,(0,Y.$G)(Be).finally(function(){var De;(De=pe.current)===null||De===void 0||De.finish()});case 9:return tr=Ee.sent,I.onFinish&&I.onFinish(tr.data.containerId),Ee.abrupt("return",!0);case 12:case"end":return Ee.stop()}},L)}));return function(L){return ue.apply(this,arguments)}}(),open:Me,onOpenChange:function(L){if(ve(L),!L){var t;(t=x.current)===null||t===void 0||t.resetFields(),Te(void 0)}},children:(0,r.jsxs)(h.Z,{direction:"column",gutter:[0,10],ghost:!0,children:[(0,r.jsxs)(h.Z,{ghost:!0,title:K.format("createTitle"),children:[(0,r.jsx)(X.Z,{hidden:!0,name:"id"}),(0,r.jsx)(g.Z,{name:"siteTitle",label:K.format("createSiteTitle"),placeholder:K.format("createSiteTitleEmpty")}),(0,r.jsxs)(A.UW,{children:[(0,r.jsx)(g.Z,{width:"md",name:"siteName",label:K.format("createSiteName"),required:!0,rules:[{required:!0}],tooltip:"".concat(de.format("createParamsDemo",{params:"--name string"})),placeholder:K.format("createSiteNameEmpty")}),(0,r.jsx)(g.Z,{label:"Hostname",name:"hostname",width:"md",tooltip:"".concat(de.format("createParamsDemo",{params:"--hostname string"}))})]}),(0,r.jsx)(zr,{fromImageId:""})]}),(0,r.jsx)(H.Z,{offsetTop:10,target:function(){return document.querySelector(".createAppWapper .ant-drawer-body")},children:(0,r.jsx)(h.Z,{style:{margin:-20},children:(0,r.jsx)(j.Z,{activeKey:l,onChange:function(L){U(L)},items:de.option("createTabOption",["basic","link","run-command","resource","cap"]).map(function(ue){return{label:ue.label,key:ue.value}})})})}),(0,r.jsxs)($e.Z,{show:l=="basic",children:[(0,r.jsx)(gr.Z,{ref:_e,showBindHost:!0,showBindIpV6:!0,showBindAll:!0}),(0,r.jsx)(ae.Z,{showAddButton:!0,showImportButton:!0,showCodeMode:!0,ref:M,drawerProps:{title:de.format("createEnvTitle"),tooltip:"".concat(de.format("createParamsDemo",{params:"-e, --env list"})),ghost:!0}}),(0,r.jsx)(v.Z,{showDefault:!0,ref:_}),(0,r.jsx)(O.Z,{name:["siteName","useHostNetwork"],children:function(L){var t=L.siteName,Ze=L.useHostNetwork;if(!Ze)return(0,r.jsx)(je,{})}}),(0,r.jsx)(on.Z,{}),(0,r.jsx)(z.Z,{})]}),(0,r.jsxs)($e.Z,{show:l=="link",children:[(0,r.jsx)(O.Z,{name:["siteName","useHostNetwork"],children:function(L){var t=L.siteName,Ze=L.useHostNetwork;return Ze?(0,r.jsx)(h.Z,{children:(0,r.jsx)(f.Z,{showIcon:!0,description:K.format("createNetworkDesc")})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Je,{onAddEnv:function(he,ge){var Pe;(Pe=M.current)===null||Pe===void 0||Pe.addEnvNameValue(he,ge)},ref:S}),(0,r.jsx)(J,{showUseBridgeNetwork:!0,siteName:t}),(0,r.jsx)(Re.Z,{})]})}}),(0,r.jsx)(Jr,{})]}),(0,r.jsxs)($e.Z,{show:l=="run-command",children:[(0,r.jsxs)(A.UW,{children:[(0,r.jsx)(en.Z,{ghost:!0,defaultValue:"always",showLabel:!0}),(0,r.jsx)(Ne,{})]}),(0,r.jsx)(rn.Z,{showCommand:!0,showEntrypoint:!0,showWorkDir:!0,showUser:!0}),(0,r.jsx)(qr.Z,{}),(0,r.jsx)(q,{})]}),(0,r.jsxs)($e.Z,{show:l=="resource",children:[(0,r.jsx)(tn.Z,{}),(0,r.jsx)(Xr.Z,{showShmsize:!0}),(0,r.jsx)(Qr,{})]}),(0,r.jsx)($e.Z,{show:l=="cap",children:x&&x.current&&(0,r.jsx)(Q.Z,{})})]})})})}),dn=ln},6764:function(ze,Ce,e){e.d(Ce,{Z:function(){return ae}});var F=e(15009),C=e.n(F),ce=e(99289),p=e.n(ce),W=e(5574),ie=e.n(W),y=e(3616),w=e(68297),T=e(36146),D=e(23430),h=e(38345),X=e(97269),g=e(5966),A=e(62370),O=e(64317),ne=e(63713),H=e(83622),j=e(85265),f=e(25593),o=e(23345),s=e(42845),Ye=e(43461),Ve=e(52062),Oe=e(8111);function ke(v,z){for(var Z=v.length;Z--&&(0,Oe.Z)(z,v[Z],0)>-1;);return Z}var se=ke;function ye(v,z){for(var Z=-1,$=v.length;++Z<$&&(0,Oe.Z)(z,v[Z],0)>-1;);return Z}var be=ye,le=e(70394),V=e(77338);function d(v,z,Z){if(v=(0,V.Z)(v),v&&(Z||z===void 0))return(0,Ye.Z)(v);if(!v||!(z=(0,s.Z)(z)))return v;var $=(0,le.Z)(v),Ne=(0,le.Z)(z),Y=be($,Ne),xe=se($,Ne)+1;return(0,Ve.Z)($,Y,xe).join("")}var Ie=d,P=e(67294),te=e(92754),r=e(2205),u=e(85893),Je=(0,P.forwardRef)(function(v,z){var Z=(0,P.useState)(!1),$=ie()(Z,2),Ne=$[0],Y=$[1],xe=(0,P.useRef)(),Le=(0,P.useRef)(),hr=(0,P.useState)(!1),J=ie()(hr,2),gr=J[0],$e=J[1],Re=new T.Uo("components.imagePull");function nr(){return dr.apply(this,arguments)}function dr(){return dr=p()(C()().mark(function je(){var R,q,Q;return C()().wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:Y(!0),(R=xe.current)===null||R===void 0||R.resetFields(),v.imageUrl&&((Q=xe.current)===null||Q===void 0||Q.setFieldValue("imageUrl",v.imageUrl)),(q=Le.current)===null||q===void 0||q.setStart("");case 4:case"end":return Ue.stop()}},je)})),dr.apply(this,arguments)}return(0,P.useImperativeHandle)(z,function(){return{upgradeImage:function(R){var q;return Y(!0),(q=xe.current)===null||q===void 0||q.setFieldValue("imageUrl",R),(0,w.Ze)({tag:R,type:"pull"})},setImageName:function(R){var q;Y(!0),(q=xe.current)===null||q===void 0||q.setFieldValue("imageUrl",R)},show:nr}}),[(0,u.jsx)(H.ZP,{type:v.buttonType?v.buttonType:"default",icon:(0,u.jsx)(D.Z,{}),onClick:nr,children:Re.format("triggerButton")},"remoteBtn"),(0,u.jsxs)(j.Z,{forceRender:!0,open:Ne,title:Re.format("drawerTitle"),width:y.R_,onClose:function(){var R;Y(!1),(R=Le.current)===null||R===void 0||R.close()},footer:!1,children:[(0,u.jsx)(h.Z,{children:(0,u.jsx)(f.Z.Text,{children:(0,u.jsxs)("ul",{style:{lineHeight:"30px"},children:[(0,u.jsxs)("li",{children:[Re.format("tip.1")," ",(0,u.jsx)("a",{href:"https://hub.docker.com/",target:"_blank",children:T.FD.format("help")})]}),(0,u.jsxs)("li",{children:[Re.format("tip.2")," ",(0,u.jsx)("a",{href:"https://hub.docker.com/search?q=",target:"_blank",children:T.FD.format("help")})]}),(0,u.jsxs)("li",{children:[Re.format("tip.3")," "]}),(0,u.jsxs)("li",{children:[Re.format("tip.4")," ",(0,u.jsx)(ne.Link,{to:"/image/registry",children:T.Ob.format("image.registry.create")})]}),(0,u.jsxs)("li",{children:[Re.format("tip.5")," ",(0,u.jsx)(ne.Link,{to:"/image/registry",children:T.Ob.format("image.registry")})]})]})})}),(0,u.jsx)(h.Z,{title:Re.format("triggerButton"),headerBordered:!0,children:(0,u.jsxs)(X.A,{formRef:xe,submitter:!1,isKeyPressSubmit:!0,onFinish:function(){var je=p()(C()().mark(function R(q){var Q,Fe,Ue,ur,cr,Cr;return C()().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:return cr=(Q=q.imageUrl)!==null&&Q!==void 0?Q:"",q.registryUrl,$e(!0),(Fe=Le.current)===null||Fe===void 0||Fe.setStart(cr),Ke.next=6,(0,w.Ze)({tag:Ie(cr," "),type:"pull",platform:(Ue=q.platform)!==null&&Ue!==void 0?Ue:""}).finally(function(){$e(!1)});case 6:return Cr=Ke.sent,(ur=Le.current)===null||ur===void 0||ur.setFinish(),Y(!1),v.onFinish&&v.onFinish(Cr.data.tag),Ke.abrupt("return",!0);case 11:case"end":return Ke.stop()}},R)}));return function(R){return je.apply(this,arguments)}}(),children:[(0,u.jsx)(g.Z,{name:"registryUrl",hidden:!0}),(0,u.jsxs)(o.Z.Compact,{children:[(0,u.jsx)(A.Z,{shouldUpdate:!0,children:function(R){return(0,u.jsx)(r.Z,{width:"20vw",onChange:function(Q){if(R.setFieldValue("registryUrl",Q?Q.serverAddress:""),!Q){R.setFieldValue("imageUrl",v.imageUrl);return}try{var Fe=new URL("http://".concat(R.getFieldValue("imageUrl")));Fe.host&&R.setFieldValue("imageUrl","".concat(Q==null?void 0:Q.serverAddress).concat(Fe.pathname))}catch(Ue){}}})}}),(0,u.jsx)(O.Z,{name:"platform",width:"md",placeholder:Re.format("imagePlatformEmpty"),options:w.ii.map(function(je){return{label:je.name,value:je.name}})})]}),(0,u.jsxs)(o.Z.Compact,{children:[(0,u.jsx)(g.Z,{disabled:gr,name:"imageUrl",width:"xl",placeholder:Re.format("imageUrlEmpty"),required:!0,rules:[{required:!0}]}),(0,u.jsx)(H.ZP,{loading:gr,onClick:p()(C()().mark(function je(){var R;return C()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:(R=xe.current)===null||R===void 0||R.submit();case 1:case"end":return Q.stop()}},je)})),children:Re.format("triggerButton")}),(0,u.jsx)(H.ZP,{danger:!0,onClick:function(){var R;(R=Le.current)===null||R===void 0||R.close()},children:T.FD.format("listManageKill")})]}),(0,u.jsx)(A.Z,{label:Re.format("progressTitle"),children:(0,u.jsx)(te.Z,{ref:Le})})]})})]},"remoteDrawer")]}),ae=Je},20743:function(ze,Ce,e){var F=e(15009),C=e.n(F),ce=e(99289),p=e.n(ce),W=e(5574),ie=e.n(W),y=e(67294),w=e(14946),T=e(64789),D=e(40018),h=e(83622),X=e(85265),g=e(23345),A=e(66309),O=e(16970),ne=e(3616),H=e(36146),j=e(67255),f=e(85893),o=(0,y.forwardRef)(function(s,Ye){(0,y.useImperativeHandle)(Ye,function(){return{show:function(){se(!0)}}});var Ve=(0,y.useState)(!1),Oe=ie()(Ve,2),ke=Oe[0],se=Oe[1],ye=(0,y.useRef)(),be=new H.Uo("components.network");return(0,f.jsxs)(f.Fragment,{children:[s.showTriggerButton&&(0,f.jsx)(h.ZP,{onClick:function(){se(!0)},children:be.format("selectTriggerButton")}),(0,f.jsx)(X.Z,{title:be.format("selectDrawerTitle"),width:ne.R_,footer:!1,open:ke,onClose:function(){return se(!1)},extra:(0,f.jsx)(g.Z,{children:(0,f.jsx)(O.Z,{onFinish:function(){var V,d;!((V=ye.current)===null||V===void 0)&&V.reloadAndRest&&((d=ye.current)===null||d===void 0||d.reloadAndRest())}},"create")}),children:(0,f.jsx)(D.Z,{rowKey:"Name",actionRef:ye,columns:[{title:H.FD.format("listTitle"),dataIndex:"Name",render:function(V,d,Ie,P,te){return d.Name=="none"||d.Name=="bridge"||d.Name=="host"?(0,f.jsxs)(f.Fragment,{children:[d.Name," ",(0,f.jsx)(A.Z,{color:"blue",children:"System"})]}):(0,f.jsx)(f.Fragment,{children:V})}},{title:H.FD.format("listType"),ellipsis:!0,width:80,dataIndex:"Driver",search:!1},{title:"Driver",ellipsis:!0,width:100,search:!1,dataIndex:["IPAM","Driver"]},{title:"IPV4",search:!1,width:120,render:function(V,d,Ie,P,te){return d.IPAM.Config&&d.IPAM.Config[0]&&(0,f.jsxs)(g.Z,{direction:"vertical",children:[d.IPAM.Config[0].Subnet,d.IPAM.Config[0].Gateway]})}},{title:"IPV6",search:!1,render:function(V,d,Ie,P,te){return d.IPAM.Config&&d.IPAM.Config[1]&&(0,f.jsxs)(g.Z,{direction:"vertical",children:[d.IPAM.Config[1].Subnet,d.IPAM.Config[1].Gateway]})}},{title:H.FD.format("listManage"),width:100,search:!1,render:function(V,d,Ie,P,te){return[d.Name!="none"&&d.Name!="bridge"&&d.Name!="host"&&(0,f.jsx)(h.ZP,{type:"link",onClick:function(){s.onSelect(d),se(!1)},children:(0,f.jsx)(T.Z,{})},d.Id)]}}],request:function(){var le=p()(C()().mark(function V(d,Ie,P){var te;return C()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,w.jR)({name:d.Name});case 2:return te=u.sent,u.abrupt("return",{data:te.data.list,success:!0,total:te.data.list.length});case 4:case"end":return u.stop()}},V)}));return function(V,d,Ie){return le.apply(this,arguments)}}(),pagination:(0,j.Oh)()})})]})});Ce.Z=o},70146:function(ze,Ce,e){e.d(Ce,{SR:function(){return X},VE:function(){return D},Zy:function(){return w},iD:function(){return A},vG:function(){return ne},yB:function(){return ie}});var F=e(15009),C=e.n(F),ce=e(99289),p=e.n(ce),W=e(63713);function ie(j){return y.apply(this,arguments)}function y(){return y=p()(C()().mark(function j(f){return C()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,W.request)("/dpanel/api/app/container-backup/create",{data:f,method:"POST"});case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},j)})),y.apply(this,arguments)}function w(j){return T.apply(this,arguments)}function T(){return T=p()(C()().mark(function j(f){return C()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,W.request)("/dpanel/api/app/container-backup/get-list",{method:"POST",data:f}));case 1:case"end":return s.stop()}},j)})),T.apply(this,arguments)}function D(j){return h.apply(this,arguments)}function h(){return h=p()(C()().mark(function j(f){return C()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,W.request)("/dpanel/api/app/container-backup/delete",{method:"POST",data:f}));case 1:case"end":return s.stop()}},j)})),h.apply(this,arguments)}function X(j){return g.apply(this,arguments)}function g(){return g=p()(C()().mark(function j(f){return C()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,W.request)("/dpanel/api/app/container-backup/restore",{method:"POST",data:f}));case 1:case"end":return s.stop()}},j)})),g.apply(this,arguments)}function A(j){return O.apply(this,arguments)}function O(){return O=p()(C()().mark(function j(f){return C()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,W.request)("/dpanel/api/app/container-backup/get-detail",{method:"POST",data:f}));case 1:case"end":return s.stop()}},j)})),O.apply(this,arguments)}function ne(j){return H.apply(this,arguments)}function H(){return H=p()(C()().mark(function j(f){return C()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,W.request)("/dpanel/api/app/site/restore",{data:f,method:"POST"});case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},j)})),H.apply(this,arguments)}}}]);
