"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1596],{31199:function(G,y,n){var T=n(1413),u=n(45987),C=n(67294),p=n(40284),i=n(85893),d=["fieldProps","min","proFieldProps","max"],U=function(c,j){var S=c.fieldProps,b=c.min,F=c.proFieldProps,R=c.max,V=(0,u.Z)(c,d);return(0,i.jsx)(p.Z,(0,T.Z)({valueType:"digit",fieldProps:(0,T.Z)({min:b,max:R},S),ref:j,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:F},V))},P=C.forwardRef(U);y.Z=P},91058:function(G,y,n){var T=n(9783),u=n.n(T),C=n(19632),p=n.n(C),i=n(97857),d=n.n(i),U=n(5574),P=n.n(U),W=n(89035),c=n(45605),j=n(64317),S=n(31199),b=n(5966),F=n(38345),R=n(17186),V=n(24739),x=n(42075),N=n(83622),Z=n(83062),z=n(85576),M=n(67294),X=n(11106),k=n(12491),D=n(62597),h=n(79245),H=n(3616),K=n(36146),r=n(85893),l="docker-image",v=(0,M.forwardRef)(function(e,ne){var re=(0,M.useState)(l),J=P()(re,2),Y=J[0],$=J[1],E=(0,M.useRef)(),ae=(0,M.useState)(""),Q=P()(ae,2),te=Q[0],oe=Q[1],g=new K.Uo("components.appForm");(0,M.useImperativeHandle)(ne,function(){return{addEnvItem:function(t){var _,s=(_=E.current)===null||_===void 0?void 0:_.getList(),o=!1;if(s==null||s.map(function(f){if(f.name==t.name){o=!0;return}}),!o){var m;(m=E.current)===null||m===void 0||m.add(t)}},addEnvNameValue:function(t,_){this.addEnvItem({name:t,value:_})},clear:function(){var t;(t=E.current)===null||t===void 0||(t=t.getList())===null||t===void 0||t.map(function(_,s){var o;(o=E.current)===null||o===void 0||o.remove(s)})}}});function q(a){try{var t,_;a==""&&(a=ee());for(var s=(t=(_=E.current)===null||_===void 0||(_=_.getList())===null||_===void 0?void 0:_.length)!==null&&t!==void 0?t:0,o=s;o>=0;o--){var m,f,I=(m=E.current)===null||m===void 0?void 0:m.get(o);s-=1,(f=E.current)===null||f===void 0||f.remove(o)}var B=a.split(`
`),w=s+1;B.map(function(L){var O,A=L.split("=");A.length<2||((O=E.current)===null||O===void 0||O.add({name:A[0],value:A.slice(1).join("=")},w),w++)})}catch(L){console.log(L)}}function _e(){Y!="code"?$("code"):$(l)}function ee(){if(E&&E.current&&E.current.getList){var a,t=(a=E.current)===null||a===void 0?void 0:a.getList();if(t){var _=[];return t.forEach(function(s){_.push("".concat(s.name,"=").concat(s.value))}),_.join(`
`)}else return""}else return""}function ue(a){var t,_,s,o,m,f,I={},B={help:(0,h.y)((t=a.rule)===null||t===void 0?void 0:t.kind,D.fp.EnvValueTypeOnePanel)?g.formatOnePanel(a.name):g.formatUser(a.labels),name:"value",label:g.format("createEnvFormValue"),rules:[{required:e.requireValue?!0:(0,h.y)((_=a.rule)===null||_===void 0?void 0:_.kind,D.fp.EnvValueRuleRequired)}],addonAfter:!0,disabled:e.showDisableValue||(0,h.y)((s=a.rule)===null||s===void 0?void 0:s.kind,D.fp.EnvValueRuleDisabled),placeholder:a.label};if((0,h.y)((o=a.rule)===null||o===void 0?void 0:o.kind,D.fp.EnvValueTypeSelect)){var w;return(0,r.jsx)(j.Z,d()(d()({fieldProps:I},B),{},{initialValue:a.value,width:e.showInDrawer?"sm":"md",options:((w=a.rule)===null||w===void 0?void 0:w.option)&&a.rule.option.map(function(O){return{label:O.name,value:O.value}})}),a.name)}else if((0,h.y)((m=a.rule)===null||m===void 0?void 0:m.kind,D.fp.EnvValueTypeSelectMultiple)){var L;return(0,r.jsx)(j.Z,d()(d()({mode:"tags"},B),{},{fieldProps:I,convertValue:function(A){return Array.isArray(A)?A:A.split(",")},width:e.showInDrawer?"sm":"md",options:((L=a.rule)===null||L===void 0?void 0:L.option)&&a.rule.option.map(function(O){return{label:O.name,value:O.value}})}),a.name)}else return(0,h.y)((f=a.rule)===null||f===void 0?void 0:f.kind,D.fp.EnvValueTypeNumber)?(0,r.jsx)(S.Z,d()(d()({fieldProps:I},B),{},{width:e.showInDrawer?"sm":"md",rules:[].concat(p()(B.rules),[{pattern:new RegExp("^[0-9]*$")}])}),a.name):(0,r.jsx)(b.Z,d()(d()({fieldProps:I},B),{},{width:e.showInDrawer?"sm":"md"}),a.name)}return(0,r.jsxs)(F.Z,d()(d()({headerBordered:!0,extra:(e.showCodeMode||e.showImportButton)&&(0,r.jsxs)(x.Z,{children:[e.showImportButton&&(0,r.jsx)("div",{style:{marginBottom:"-25px"},children:(0,r.jsx)(k.Z,{title:g.format("createEnvFormEnvImport"),onImport:function(t){return q(t),!0},onLoad:function(t){if(t.indexOf("=")<0)throw new Error(K.FD.format("commonFileIncorrectFormat",{name:"env"}));return!0}})}),e.showCodeMode?(0,r.jsx)(N.ZP,{icon:(0,r.jsx)(W.Z,{}),type:Y=="code"?"primary":"default",onClick:_e,children:g.format("createEnvFormEnvCode")},"code"):""]})},e.drawerProps),{},{children:[(0,r.jsx)(R.u,{style:{marginTop:10},name:e.name?e.name:"environment",actionRef:E,creatorButtonProps:e.showAddButton?{creatorButtonText:e.addButtonLabel?e.addButtonLabel:g.format("createEnvFormListAddButton")}:!1,copyIconProps:!1,deleteIconProps:e.showDeleteButton,actionRender:function(t,_,s,o){var m,f,I=(m=E.current)===null||m===void 0?void 0:m.get(t.key);return I&&(0,h.y)((f=I.rule)===null||f===void 0?void 0:f.kind,D.fp.EnvValueRuleInEnvFile)?[(0,r.jsx)(Z.Z,{title:g.format("createEnvFormListInEnvFile"),children:(0,r.jsx)(N.ZP,{type:"text",icon:(0,r.jsx)(c.Z,{})})},"inEnvFile")]:[s[0]]},min:100,label:e.listLabel,transform:function(t,_,s){return u()({},_,t.map(function(o){return Array.isArray(o.value)?o.value=o.value.filter(function(m){return m!=""}).join(","):o.value=o.value.toString(),o}))},children:function(t,_,s){var o,m=s.getCurrentRowData();return(0,r.jsxs)(V.UW,{style:{marginBottom:"5px"},children:[(0,r.jsx)(b.Z,{width:e.showInDrawer?"sm":"md",name:"name",label:g.format("createEnvFormName"),required:!0,rules:[{required:!0}],disabled:e.showDisableName||(0,h.y)((o=m.rule)===null||o===void 0?void 0:o.kind,D.fp.EnvValueRuleInEnvFile),placeholder:g.format("createEnvFormName")},_),ue(m)]})}}),e.showCodeMode&&(0,r.jsx)(z.Z,{width:H.ob,open:Y=="code",onCancel:function(){return $("docker-image")},onOk:function(){q(te),$("docker-image")},children:(0,r.jsx)(X.ZP,{onChange:function(t){return oe(t)},value:ee(),height:H.Ed,theme:"dark"})})]}))});y.Z=v},62597:function(G,y,n){n.d(y,{$G:function(){return W},Ct:function(){return z},Tb:function(){return F},XH:function(){return V},cl:function(){return S},fp:function(){return j},fu:function(){return U},iE:function(){return N},nL:function(){return P},xU:function(){return H},xb:function(){return X},ze:function(){return D}});var T=n(15009),u=n.n(T),C=n(99289),p=n.n(C),i=n(63713),d="com.dpanel.container.description",U="com.dpanel.container.title",P={Nanosecond:1,Microsecond:1e3,Millisecond:1e3*1e3,Second:1e3*1e3*1e3,Minute:60*1e3*1e3*1e3,Hour:3600*1e3*1e3*1e3};function W(r){return c.apply(this,arguments)}function c(){return c=p()(u()().mark(function r(l){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/dpanel/api/app/site/create-by-image",{method:"POST",data:l}));case 1:case"end":return e.stop()}},r)})),c.apply(this,arguments)}var j={EnvValueRuleRequired:1,EnvValueRuleDisabled:2,EnvValueRuleInEnvFile:4,EnvValueTypeNumber:1024,EnvValueTypeText:2048,EnvValueTypeSelect:4096,EnvValueTypeSelectMultiple:8192,EnvValueTypeOnePanel:16384};function S(r){return b.apply(this,arguments)}function b(){return b=p()(u()().mark(function r(l){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/dpanel/api/app/site/get-list",{method:"POST",data:l}));case 1:case"end":return e.stop()}},r)})),b.apply(this,arguments)}function F(r){return R.apply(this,arguments)}function R(){return R=p()(u()().mark(function r(l){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.download=!1,e.next=3,(0,i.request)("/dpanel/api/app/log/run",{method:"POST",data:l});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},r)})),R.apply(this,arguments)}function V(r){return x.apply(this,arguments)}function x(){return x=p()(u()().mark(function r(l){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.download=!0,e.next=3,(0,i.request)("/dpanel/api/app/log/run",{method:"POST",data:l,responseType:"blob"});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},r)})),x.apply(this,arguments)}function N(r){return Z.apply(this,arguments)}function Z(){return Z=p()(u()().mark(function r(l){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.id=String(l.id),e.next=3,(0,i.request)("/dpanel/api/app/site/get-detail",{data:l,method:"POST"});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},r)})),Z.apply(this,arguments)}function z(r){return M.apply(this,arguments)}function M(){return M=p()(u()().mark(function r(l){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/dpanel/api/app/container/delete",{method:"POST",data:l}));case 1:case"end":return e.stop()}},r)})),M.apply(this,arguments)}function X(r){return k.apply(this,arguments)}function k(){return k=p()(u()().mark(function r(l){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/dpanel/api/app/site/delete",{method:"POST",data:l}));case 1:case"end":return e.stop()}},r)})),k.apply(this,arguments)}function D(r){return h.apply(this,arguments)}function h(){return h=p()(u()().mark(function r(l){return u()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.request)("/dpanel/api/app/container/ignore",{method:"POST",data:l}));case 1:case"end":return e.stop()}},r)})),h.apply(this,arguments)}function H(){return K.apply(this,arguments)}function K(){return K=p()(u()().mark(function r(){return u()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,i.request)("/dpanel/api/app/site/prune",{method:"POST"}));case 1:case"end":return v.stop()}},r)})),K.apply(this,arguments)}},79245:function(G,y,n){n.d(y,{m:function(){return C},y:function(){return p}});var T=n(64599),u=n.n(T);function C(i){var d=[];if(!i||i=="")return d;var U=i.matchAll(/\$\{(\w+)[:-?=]*(.*?)\}/g),P=u()(U),W;try{for(P.s();!(W=P.n()).done;){var c=W.value;d.push({name:c[1],value:c[2]?c[2].indexOf("-")==0?c[2].substring(1):c[2]:""})}}catch(j){P.e(j)}finally{P.f()}return d}function p(i,d){return!i||!d?!1:(i&d)!==0}}}]);
