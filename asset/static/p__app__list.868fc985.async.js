"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4316],{52645:function(Ie,Q,e){e.d(Q,{Z:function(){return f}});var q=e(87462),L=e(67294),ee={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M899.1 869.6l-53-305.6H864c14.4 0 26-11.6 26-26V346c0-14.4-11.6-26-26-26H618V138c0-14.4-11.6-26-26-26H432c-14.4 0-26 11.6-26 26v182H160c-14.4 0-26 11.6-26 26v192c0 14.4 11.6 26 26 26h17.9l-53 305.6a25.95 25.95 0 0025.6 30.4h723c1.5 0 3-.1 4.4-.4a25.88 25.88 0 0021.2-30zM204 390h272V182h72v208h272v104H204V390zm468 440V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H416V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H202.8l45.1-260H776l45.1 260H672z"}}]},name:"clear",theme:"outlined"},c=ee,te=e(84089),G=function(x,K){return L.createElement(te.Z,(0,q.Z)({},x,{ref:K,icon:c}))},z=L.forwardRef(G),f=z},36435:function(Ie,Q,e){var q=e(15009),L=e.n(q),ee=e(64599),c=e.n(ee),te=e(99289),G=e.n(te),z=e(9783),f=e.n(z),ue=e(5574),x=e.n(ue),K=e(67294),Se=e(184),ge=e(38345),be=e(97269),Ee=e(97321),ne=e(97462),V=e(64317),Te=e(5966),Le=e(86615),w=e(68602),Ze=e(83622),Z=e(83403),Ue=e(24963),Ce=e(1699),je=e(29177),De=e(1883),Fe=e(43425),We=e(44349),ye=e(3616),de=e(36146),M=e(85893),Oe=(0,K.forwardRef)(function(A,Ye){var Ae=(0,K.useState)(!1),N=x()(Ae,2),ae=N[0],P=N[1],U=(0,K.useRef)(),Me=(0,K.useContext)(Ue.Z),ce=Me.message,k=(0,K.useState)([]),t=x()(k,2),me=t[0],Pe=t[1],S=new de.Uo("components.permissionButton"),H=f()(f()(f()(f()(f()({},Z.W6.CONTAINER,"Id"),Z.W6.APPSTORE,"name"),Z.W6.COMPOSE,"name"),Z.W6.REGISTRY,"serverAddress"),Z.W6.DOCKER_ENV,"name"),Be=f()(f()(f()(f()(f()({},Z.W6.CONTAINER,"name"),Z.W6.APPSTORE,"name"),Z.W6.COMPOSE,"name"),Z.W6.REGISTRY,"title"),Z.W6.DOCKER_ENV,"title"),_e=H[A.type],Ke=Be[A.type],we=A.selected.map(function(j){return j[H[A.type]]});return K.useEffect(function(){if(ae){if(!A.selected||A.selected.length==0){ce.error(de.FD.format("title.noDataSelect")),P(!1);return}(0,w.dP)({permission:{uri:A.type,key:_e,value:we}}).then(function(j){var p;(p=U.current)===null||p===void 0||p.setFieldValue("list",Object.keys(j.data.list).map(function(D){return{name:D,type:j.data.list[D].type,users:j.data.list[D].users}}))}),(0,w.lE)().then(function(j){var p,D=(p=j.data)===null||p===void 0||(p=p.list)===null||p===void 0?void 0:p.map(function(E){return{label:E.username,value:E.username}});Pe(D)})}},[ae]),(0,M.jsx)(Ce.u,{access:["canSeeEnableEe","canSeeFounder","canSeeManage"],children:(0,M.jsxs)(Se.a,{name:"create",title:S.format("drawerTitle"),open:ae,onOpenChange:function(p){if(!p){var D;(D=U.current)===null||D===void 0||D.resetFields()}P(p)},drawerProps:{forceRender:!0,width:ye.R_},formRef:U,trigger:(0,M.jsx)(Ze.ZP,{icon:(0,M.jsx)(je.Z,{}),children:S.format("drawerTriggerButton")}),onFinish:function(){var j=G()(L()().mark(function p(D){var E,R,O;return L()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:E=c()(D.list),i.prev=1,E.s();case 3:if((R=E.n()).done){i.next=9;break}return O=R.value,i.next=7,(0,w.Db)({usernames:O.users,permissionType:O.type,permission:{uri:A.type,key:_e,showKey:Ke,value:[O.name]}});case 7:i.next=3;break;case 9:i.next=14;break;case 11:i.prev=11,i.t0=i.catch(1),E.e(i.t0);case 14:return i.prev=14,E.f(),i.finish(14);case 17:ce.success(de.FD.format("finish")),P(!1),A.onSuccess();case 20:case"end":return i.stop()}},p,null,[[1,11,14,17]])}));return function(p){return j.apply(this,arguments)}}(),children:[(0,M.jsxs)(ge.Z,{ghost:!0,title:(0,M.jsx)(De.Z,{}),subTitle:S.format("batchTitle"),children:[(0,M.jsx)(be.A.Item,{name:"type",style:{marginBottom:0},children:(0,M.jsx)(Ee.Z.Group,{defaultValue:"admin",onChange:function(p){var D,E,R=(D=U.current)===null||D===void 0?void 0:D.getFieldValue("list");R.forEach(function(O){O.type=p,O.users=[]}),(E=U.current)===null||E===void 0||E.setFieldValue("list",R)},children:["admin","restricted","public"].map(function(j){return(0,M.jsx)(Ee.Z,{style:{width:240},title:S.format("dataTypeOption.".concat(j)),description:S.format("dataTypeDescOption.".concat(j)),value:j},j)})})}),(0,M.jsx)(ne.Z,{name:["type"],children:function(p){var D=p.type;if(D==="restricted")return(0,M.jsx)(V.Z,{mode:"multiple",name:"usernames",label:S.format("formUsernames"),onChange:function(R){var O,F,i=(O=U.current)===null||O===void 0?void 0:O.getFieldValue("list");i.forEach(function(W){W.users=R}),(F=U.current)===null||F===void 0||F.setFieldValue("list",i)},rules:[{required:!0}],request:G()(L()().mark(function E(){var R,O,F;return L()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:if(!(me.length>0)){W.next=2;break}return W.abrupt("return",me);case 2:return W.next=4,(0,w.lE)();case 4:return O=W.sent,F=(R=O.data)===null||R===void 0||(R=R.list)===null||R===void 0?void 0:R.map(function(ie){return{label:ie.username,value:ie.username}}),Pe(F),W.abrupt("return",F);case 8:case"end":return W.stop()}},E)}))})}})]}),(0,M.jsx)(ge.Z,{ghost:!0,title:(0,M.jsx)(Fe.Z,{}),subTitle:S.format("dataTitle"),children:(0,M.jsx)(We.Z,{name:"list",hideCopyButton:!0,gap:10,items:[{name:"name",label:S.format("dataName"),render:function(p,D,E){var R=E.getCurrentRowData();return(0,M.jsx)(Te.Z,{disabled:!0,label:S.format("dataName"),width:"sm",name:"name"})}},{name:"type",label:S.format("dataType"),render:function(p,D,E){var R=E.getCurrentRowData();return(0,M.jsx)(Le.Z.Group,{label:S.format("dataType"),name:"type",radioType:"button",options:["admin","public","restricted"].map(function(O){return{label:S.format("dataTypeOption.".concat(O)),value:O}})})}},{name:"users",label:S.format("dataUsers"),render:function(p,D,E){return(0,M.jsx)(ne.Z,{name:["type"],children:function(O){var F=O.type;if(F=="restricted")return(0,M.jsx)(V.Z,{width:"sm",mode:"tags",name:"users",label:S.format("dataUsers"),options:me})}})}}]})})]})})});Q.Z=Oe},14668:function(Ie,Q,e){e.r(Q),e.d(Q,{default:function(){return it}});var q=e(64599),L=e.n(q),ee=e(15009),c=e.n(ee),te=e(19632),G=e.n(te),z=e(99289),f=e.n(z),ue=e(5574),x=e.n(ue),K=e(74453),Se=e(34041),ge=e(74330),be=e(97269),Ee=e(62370),ne=e(42075),V=e(25593),Te=e(40411),Le=e(96074),w=e(83062),Ze=e(84567),Z=e(82346),Ue=e(50888),Ce=e(1883),je=e(89035),De=e(95591),Fe=e(16596),We=e(52645),ye=e(82061),de=e(33160),M=e(87784),Oe=e(30159),A=e(99611),Ye=e(86548),Ae=e(94359),N=e(13822),ae=e(80821),P=e(67294),U=e(62597),Me=e(87662),ce=e(16165),k=e(5251),t=e(85893),me=function(){return(0,t.jsx)("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"18403",children:(0,t.jsx)("path",{d:"M224 192v64H96v576h128v64h64v-64h64v64h64v-64h64v64h64v-64h64v64h64v-64h64v64h64v-64h128V256h-128V192h-64v64h-64V192h-64v64h-64V192h-64v64h-64V192h-64v64H288V192z m-64 128h704v448H160z m96 64c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32zM256 512c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m512 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32zM256 640c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z m128 0c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z","p-id":"18404"})})},Pe=function(){return(0,t.jsx)("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"18546",children:(0,t.jsx)("path",{d:"M64 224v576h416v-32c0-17.76 14.24-32 32-32 17.76 0 32 14.24 32 32v32h416V224z m64 64h768v288H128z m64 64v160h192v-160z m224 0v160h192v-160z m224 0v160h192v-160zM256 416h64v32H256z m224 0h64v32h-64z m224 0h64v32h-64zM128 640h768v96h-300.992c-14.144-35.52-42.752-64-83.008-64-40.256 0-68.864 28.48-83.008 64H128z","p-id":"18547"})})};function S(b){var fe,J,ve,oe,he,pe;return(0,t.jsx)(t.Fragment,{children:b.value&&b.value.memory&&b.value.memory.out>0?(0,t.jsxs)(ne.Z,{children:[(0,t.jsxs)(w.Z,{title:"Cpu: ".concat((fe=b.value)===null||fe===void 0?void 0:fe.cpu.toFixed(2),"%"),children:[(0,t.jsx)(ce.Z,{component:me,style:{width:15,lineHeight:20}})," ","".concat((J=b.value)===null||J===void 0?void 0:J.cpu.toFixed(2),"%")]}),(0,t.jsxs)(w.Z,{title:"Memory: ".concat((0,k.FI)((ve=b.value)===null||ve===void 0?void 0:ve.memory.in)," / ").concat((0,k.FI)((oe=b.value)===null||oe===void 0?void 0:oe.memory.out)),children:[(0,t.jsx)(ce.Z,{component:Pe,style:{width:15,lineHeight:20}})," ","".concat((((he=b.value)===null||he===void 0?void 0:he.memory.in)/((pe=b.value)===null||pe===void 0?void 0:pe.memory.out)*100).toFixed(2),"%")]})]}):"-"})}var H=e(67255),Be=e(37413),_e=e(3905),Ke=e(99922),we=e(83403),j=e(20578),p=e(99861),D=e(1584),E=e(29453),R=e(8287),O=e(29463),F=e(78451),i=e(36146),W=e(36435),ie=e(1699),Re=e(55375),B=e(98510),lt=e(84941);function it(){var b=new i.Uo("components.appDetail"),fe=new i.Uo("app"),J=(0,Z.useAccess)(),ve=(0,P.useState)(""),oe=x()(ve,2),he=oe[0],pe=oe[1],ot=(0,P.useState)(1),Xe=x()(ot,2),Y=Xe[0],re=Xe[1],ut=(0,P.useState)([]),qe=x()(ut,2),X=qe[0],Ne=qe[1],dt=(0,P.useState)(),et=x()(dt,2),$e=et[0],ct=et[1],mt=(0,P.useState)([]),tt=x()(mt,2),nt=tt[0],ft=tt[1],se=(0,P.useRef)(),ze=(0,P.useRef)(),Ve=(0,P.useRef)(),ke=(0,P.useRef)(),He=(0,P.useRef)(),at=(0,P.useRef)(),Qe=(0,P.useRef)(),rt=(0,P.useRef)(),st=(0,P.useRef)();return(0,P.useEffect)(function(){(0,Me.K3)().then(function(g){var m;pe((m=g.data.serverUrl)!==null&&m!==void 0?m:"")}),!J.canSeeEnableCe&&(0,j.q)().then(function(g){ct(g.data)})},[]),(0,P.useEffect)(function(){var g;!((g=se.current)===null||g===void 0)&&g.reload&&se.current.reload(!1),Ne([])},[Y]),(0,t.jsxs)(K._z,{header:{extra:[(0,t.jsx)(lt.Z,{showTrigger:!0,onFinish:function(){re(Y+1)},ref:st},"createByImage")]},children:[(0,t.jsx)(_e.Z,{ref:ze,onFinish:function(){re(Y+1)},onUpgradeFinish:function(){re(Y+1)}}),(0,t.jsx)(Ke.Z,{showFileExplorer:!0,ref:Ve}),(0,t.jsx)(R.Z,{ref:ke}),(0,t.jsx)(p.Z,{ref:Qe,finishAutoHide:!0}),(0,t.jsx)(D.Z,{ref:rt}),(0,t.jsx)(O.Z,{showConsole:!0,ref:He}),(0,t.jsx)(B.C,{actionRef:se,tableKey:Re.Dc,columns:[{key:"title",title:i.FD.format("listName"),width:300,dataIndex:"siteTitle",sorter:function(m,n){return m.Names[0].localeCompare(n.Names[0])},defaultSortOrder:(0,H.rj)(Re.Dc,"title"),sortDirections:H.h5,render:function(m,n,h,_,l){var s=(0,k.fi)(n.Names[0],"/");return(0,t.jsxs)(ne.Z,{direction:"vertical",children:[(0,t.jsx)(V.Z.Link,{onClick:function(){var r;(r=ze.current)===null||r===void 0||r.show(n.Id)},children:(0,t.jsx)(F.Z,{content:s})}),!J.canSeeEnableCe&&$e&&$e.container&&$e.container.find(function(a){return a.id==n.Id})&&(0,t.jsx)(Te.Z,{count:"new"})]})}},{title:i.FD.format("listTag"),hidden:!0,dataIndex:"tag",renderFormItem:function(m,n,h,_){return(0,t.jsx)(Se.Z,{onSelect:function(s){h.submit()},onDeselect:function(){h.submit()},onClear:function(){h.submit()},allowClear:!0,popupMatchSelectWidth:!1,options:nt&&Object.entries(nt.reduce(function(l,s){var a=s.group||"tag";return l[a]||(l[a]=[]),l[a].push(s),l},{})).map(function(l){var s=x()(l,2),a=s[0],r=s[1];return{label:a,title:a,options:r.map(function(u){return{label:u.tag,value:u.tag}})}})})}},{key:"ports",title:i.FD.format("listAccess"),tooltip:i.FD.format("listAccessTip"),width:150,dataIndex:"ports",search:!1,render:function(m,n,h,_){var l,s=[],a=[];return n!=null&&n.Ports&&n.Ports.map(function(r,u){r.PublicPort?s.push(r):a.push(r)}),(0,t.jsx)(Be.Z,{publicPort:s,privatePort:a,domain:(l=n.DPExtend)===null||l===void 0?void 0:l.domainList,serverIp:he})}},{title:(0,t.jsx)(ge.Z,{spinning:!X||X.length==0,indicator:(0,t.jsx)(Ue.Z,{spin:!0}),size:"small",children:i.FD.format("listUsage")}),width:150,search:!1,key:"usage",sorter:function(m,n){var h={},_={};if(X){var l,s;h=(l=X.find(function(a){return m.Id.startsWith(a.container)}))!==null&&l!==void 0?l:{},_=(s=X.find(function(a){return n.Id.startsWith(a.container)}))!==null&&s!==void 0?s:{}}return JSON.stringify(h).localeCompare(JSON.stringify(_))},defaultSortOrder:(0,H.rj)(Re.Dc,"usage"),sortDirections:H.h5,render:function(m,n,h,_,l){var s={};return X&&X.length>0&&X.filter(function(a){n.Id.indexOf(a.container)==0&&(s=a)}),(0,t.jsx)(S,{value:s})}},{title:i.FD.format("listRunStatus"),key:"status",dataIndex:["container","status"],search:!1,width:130,render:function(m,n,h,_){var l="",s={};if(n.State.includes("(")){var a=n.State.indexOf("(");a>-1&&(l="compose.".concat(n.State.slice(0,a))),s={count:n.State.slice(a+1,n.State.length-1)}}else l="container.".concat(n.State),n.Status.indexOf("(healthy)")>-1?l="container.healthy":n.Status.indexOf("(unhealthy)")>-1&&(l="container.unhealthy");return(0,t.jsx)(Ae.Z,{statusValue:s,status:l,tip:"".concat(n.State," ").concat(n.Status)})}},{title:i.FD.format("listImageName"),key:"image",width:150,dataIndex:"image",render:function(m,n,h,_){return(0,t.jsx)("span",{style:{wordBreak:"break-word"},children:(0,t.jsx)(V.Z.Link,{onClick:function(){var s;(s=rt.current)===null||s===void 0||s.show(n.Image)},children:n.Image.includes("sha256:")?n.Image.substring(7,19):n.Image})})}},{key:"created",search:!1,title:i.FD.format("listCreatedAt"),width:170,dataIndex:["Created"],render:function(m,n,h,_,l){return(0,k.ZM)(n.Created*1e3)},sorter:function(m,n){return new Date(m.Created*1e3).toISOString().localeCompare(new Date(n.Created*1e3).toISOString())},defaultSortOrder:(0,H.rj)(Re.Dc,"created"),sortDirections:H.h5},{title:i.FD.format("listManage"),valueType:"option",key:"option",width:130,fixed:"right",hidden:!J.canSeeContainerListManage,render:function(m,n,h,_){return(0,t.jsxs)(ne.Z,{split:(0,t.jsx)(Le.Z,{type:"vertical"}),children:[(0,t.jsx)(V.Z.Link,{onClick:function(){var s;(s=ke.current)===null||s===void 0||s.show(n.Id)},children:(0,t.jsx)(w.Z,{title:i.FD.format("listManageLog"),children:(0,t.jsx)(Ce.Z,{})})},"log"),(n.State=="running"||n.State=="healthy"||n.State=="unhealthy")&&(0,t.jsx)(V.Z.Link,{onClick:function(){var s;(s=Ve.current)===null||s===void 0||s.show({url:"/console/container/".concat(n.Id),title:(0,k.fi)(n.Names[0],"/")})},children:(0,t.jsx)(w.Z,{title:i.FD.format("listManageConsole"),children:(0,t.jsx)(je.Z,{})})},"console"),(n.State=="running"||n.State=="healthy"||n.State=="unhealthy")&&(0,t.jsx)(V.Z.Link,{onClick:function(){var s,a=n.Names.find(function(r){if(r.indexOf("/")===0)return r});(s=He.current)===null||s===void 0||s.showContainer(a!=null?a:n.Names[0])},children:(0,t.jsx)(w.Z,{title:i.FD.format("listManageFileExplorer"),children:(0,t.jsx)(De.Z,{})})},"file")]})}}],rowKey:"Id",request:function(){var g=f()(c()().mark(function m(n,h,_){var l,s,a,r,u,d;return c()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return Ne([]),C.next=3,(0,N.IE)({siteTitle:n.title,image:n.image});case 3:return s=C.sent,a="",r=[],C.next=8,(0,E.e1)({showCompose:!0,showSwarm:!0});case 8:if(u=C.sent,ft(u.data.list),d=[],d=s.data.list.map(function(o){var v=s.data.siteList.find(function(y){return y.containerInfo&&y.containerInfo.Id==o.Id&&y.siteTitle!=""});if(v&&o.Names.unshift(v.siteTitle),o.Labels&&o.Labels[U.fu]&&o.Names.unshift(o.Labels[U.fu]),o.DPExtend={domainList:s.data.domainList.filter(function(y,$){return o.Names.includes(y.containerId)}).map(function(y){return y.setting.enableSSL?"https://"+y.serverName:"http://"+y.serverName}),tag:[]},o.Labels&&o.Labels["com.docker.compose.project"]){var T;(T=o.DPExtend.tag)===null||T===void 0||T.push((0,k.fi)(o.Labels["com.docker.compose.project"],"dpanel-c-"))}if(o.Labels&&o.Labels["com.docker.swarm.service.name"]){var xe;(xe=o.DPExtend.tag)===null||xe===void 0||xe.push(o.Labels["com.docker.swarm.service.name"])}return u.data.list.forEach(function(y){y.item&&y.item.forEach(function($){if(o.Names.includes($.name)&&o.DPExtend){var le;(le=o.DPExtend.tag)===null||le===void 0||le.push(y.tag)}})}),o}),!n.tag){C.next=16;break}if(d.forEach(function(o){var v;!((v=o.DPExtend)===null||v===void 0)&&v.tag&&o.DPExtend.tag.forEach(function(T){n.tag.includes(T)&&r.push.apply(r,G()(o.Names))})}),r.length!=0){C.next=16;break}return C.abrupt("return",{data:[],success:!0,total:0});case 16:return a!=""?d=d.filter(function(o){var v=!1;return o.Names.forEach(function(T){T.startsWith("/"+a)&&(v=!0)}),v}):r&&r.length>0&&(d=d.filter(function(o){var v=!1;return o.Names.forEach(function(T){r.includes(T)&&(v=!0)}),v})),(0,Me.Cz)({follow:!1}).then(function(o){Ne(o.data.list)}),C.abrupt("return",{data:(l=d)!==null&&l!==void 0?l:[],success:!0,total:s.data.list.length});case 19:case"end":return C.stop()}},m)}));return function(m,n,h){return g.apply(this,arguments)}}(),rowSelection:J.canSeeContainerListManage&&{defaultSelectedRowKeys:[],alwaysShowAlert:!0},quickToolbarRender:function(m){var n=m.selectedRows,h=m.loading,_=m.finish,l=m.isMultiple;return[(0,t.jsx)(W.Z,{type:we.W6.CONTAINER,selected:n!=null?n:[],onSuccess:function(){return re(Y+1),!0}},"dataPermission"),(0,t.jsx)(ie.u,{showProTips:!0,access:["canSeeEnableCe","canSeeContainerListManageOp"],children:function(a){var r=a.canSeeEnableCe,u=a.canSeeContainerListManageOp;return u&&(0,t.jsx)(ae.Z,{buttonProps:{disabled:r,type:"primary",icon:(0,t.jsx)(Fe.Z,{})},action:f()(c()().mark(function d(){var I,C,o,v,T;return c()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(n){y.next=2;break}return y.abrupt("return",!1);case 2:h(),I=[],C=L()(n);try{for(C.s();!(o=C.n()).done;)v=o.value,v&&!I.includes(v.Image)&&I.push(v.Image)}catch($){C.e($)}finally{C.f()}if(!I){y.next=9;break}return y.next=9,(T=Qe.current)===null||T===void 0?void 0:T.pull(I).finally(function(){var $;($=Qe.current)===null||$===void 0||$.finish()});case 9:return y.abrupt("return",Promise.all(n.map(function($){var le,Ge,Je;return(0,N.RF)({md5:(le=$.Id)!==null&&le!==void 0?le:"",imageTag:"",enableBak:(Ge=(Je=at.current)===null||Je===void 0?void 0:Je.getFieldValue("enableBak"))!==null&&Ge!==void 0?Ge:!1}).finally(function(){_(!0)})})));case 10:case"end":return y.stop()}},d)})),onSuccess:function(){return re(Y+1),!0},confirmProps:{description:(0,t.jsxs)(ne.Z,{style:{width:280,paddingRight:"10px"},direction:"vertical",children:[(0,t.jsx)(V.Z.Text,{children:b.format("upgradeConfirm")}),(0,t.jsx)(be.A,{formRef:at,submitter:!1,layout:"inline",children:(0,t.jsx)(Ee.Z,{name:"enableBak",valuePropName:"checked",children:(0,t.jsx)(Ze.Z,{children:b.format("upgradeConfirmEnableBak")})})})]})},children:i.FD.format("listManageUpgradeBatch")})}},"batchUpgrade"),(0,t.jsx)(ie.u,{access:"canSeeContainerListManageDelete",children:(0,t.jsx)(ae.Z,{action:function(){return(0,N.KK)()},buttonProps:{icon:(0,t.jsx)(We.Z,{})},onSuccess:function(){return re(Y+1),!0},onError:function(){var a,r;return!((a=se.current)===null||a===void 0)&&a.reloadAndRest&&((r=se.current)===null||r===void 0||r.reloadAndRest()),!0},confirmProps:{description:fe.format("listManagePruneTip")},children:i.FD.format("listManagePrune")})},"clear"),(0,t.jsx)(ie.u,{access:"canSeeContainerListManageDelete",children:(0,t.jsx)(ae.Z,{buttonProps:{danger:!0,type:"primary",icon:(0,t.jsx)(ye.Z,{})},action:f()(c()().mark(function s(){return c()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return h(),r.abrupt("return",Promise.all(n.map(function(){var u=f()(c()().mark(function d(I){return c()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,U.Ct)({md5:I.Id,deleteImage:!1,deleteVolume:!1});case 2:return o.t0=o.sent,o.next=5,(0,E.rn)({name:I.Names[0]});case 5:return o.t1=o.sent,o.abrupt("return",[o.t0,o.t1]);case 7:case"end":return o.stop()}},d)}));return function(d){return u.apply(this,arguments)}}())).finally(function(){_(!0)}));case 2:case"end":return r.stop()}},s)})),onSuccess:function(){return re(Y+1),!0},onError:function(){var a,r;return!((a=se.current)===null||a===void 0)&&a.reloadAndRest&&((r=se.current)===null||r===void 0||r.reloadAndRest()),!0},confirmProps:{showCommonConfirm:!0},children:i.FD.format("listManageDeleteBatch")})},"batchDelete")]},contextMenu:function(m){var n=m.loading,h=m.finish,_=m.isMultiple,l=m.selectedRow,s=m.selectedRows;return{items:[{type:"group",label:i.FD.format("listManageManage"),key:"manage",children:[{access:"canSeeContainerList",label:(0,t.jsx)(B.C.ContextMenuItem,{buttonProps:{icon:(0,t.jsx)(de.Z,{})},action:f()(c()().mark(function a(){return c()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return n(),u.abrupt("return",Promise.all(s.map(function(d){return(0,N.IW)({md5:d.Id,operate:"restart"})})).finally(function(){h(!0)}));case 2:case"end":return u.stop()}},a)})),children:i.FD.format("listManageRestart")}),key:"restart"},{label:(0,t.jsx)(B.C.ContextMenuItem,{action:f()(c()().mark(function a(){return c()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return n(),u.abrupt("return",Promise.all(s.map(function(d){return(0,N.IW)({md5:d.Id,operate:"stop"})})).finally(function(){h(!0)}));case 2:case"end":return u.stop()}},a)})),buttonProps:{icon:(0,t.jsx)(M.Z,{})},children:i.FD.format("listManageStop")}),key:"stop"},{label:(0,t.jsx)(B.C.ContextMenuItem,{action:f()(c()().mark(function a(){return c()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return n(),u.abrupt("return",Promise.all(s.map(function(d){return(0,N.IW)({md5:d.Id,operate:"pause"})})).finally(function(){h(!0)}));case 2:case"end":return u.stop()}},a)})),buttonProps:{icon:(0,t.jsx)(Oe.Z,{})},children:i.FD.format("listManagePause")}),key:"pause"},{label:(0,t.jsx)(B.C.ContextMenuItem,{action:f()(c()().mark(function a(){return c()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return n(),u.abrupt("return",Promise.all(s.map(function(d){return(0,N.IW)({md5:d.Id,operate:"unpause"})})).finally(function(){h(!0)}));case 2:case"end":return u.stop()}},a)})),buttonProps:{icon:(0,t.jsx)(Oe.Z,{})},children:i.FD.format("listManageUnpause")}),key:"unpause"}]},{type:"group",label:i.FD.format("listManage"),key:"operator",children:[{label:(0,t.jsx)(B.C.ContextMenuItem,{buttonProps:{icon:(0,t.jsx)(A.Z,{}),disabled:_()},action:f()(c()().mark(function a(){var r;return c()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:h(!0),l&&((r=ze.current)===null||r===void 0||r.show(l.Id));case 2:case"end":return d.stop()}},a)})),children:i.FD.format("listManageView")}),key:"view"},{label:(0,t.jsx)(B.C.ContextMenuItem,{buttonProps:{icon:(0,t.jsx)(Ye.Z,{}),disabled:_()},action:f()(c()().mark(function a(){var r;return c()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:h(!0),l&&((r=st.current)===null||r===void 0||r.show(l.Id));case 2:case"end":return d.stop()}},a)})),children:i.FD.format("listManageEdit")}),key:"edit"},{label:(0,t.jsx)(B.C.ContextMenuItem,{buttonProps:{icon:(0,t.jsx)(Ce.Z,{}),disabled:_()},action:f()(c()().mark(function a(){var r;return c()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:l&&((r=ke.current)===null||r===void 0||r.show(l.Id)),h(!0);case 2:case"end":return d.stop()}},a)})),children:i.FD.format("listManageLog")}),key:"log"},{label:(0,t.jsx)(B.C.ContextMenuItem,{buttonProps:{icon:(0,t.jsx)(je.Z,{}),disabled:_()||l&&!["running","healthy","unhealthy"].includes(l.State)},action:f()(c()().mark(function a(){var r;return c()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:l&&((r=Ve.current)===null||r===void 0||r.show({url:"/console/container/".concat(l.Id),title:(0,k.fi)(l.Names[0],"/")})),h(!0);case 2:case"end":return d.stop()}},a)})),children:i.FD.format("listManageConsole")}),key:"console"},{label:(0,t.jsx)(B.C.ContextMenuItem,{buttonProps:{icon:(0,t.jsx)(De.Z,{}),disabled:_()||l&&!["running","healthy","unhealthy"].includes(l.State)},action:f()(c()().mark(function a(){var r,u;return c()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(l){I.next=2;break}return I.abrupt("return");case 2:u=l.Names.find(function(C){if(C.indexOf("/")===0)return C}),(r=He.current)===null||r===void 0||r.showContainer(u!=null?u:l.Names[0]),h(!0);case 5:case"end":return I.stop()}},a)})),children:i.FD.format("listManageFilePath")}),key:"file"}]},{key:"delete",label:(0,t.jsx)(B.C.ContextMenuItem,{buttonProps:{icon:(0,t.jsx)(ye.Z,{})},type:"danger",confirmProps:{showCommonConfirm:!0},action:f()(c()().mark(function a(){return c()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return n(),u.abrupt("return",Promise.all(s.map(function(){var d=f()(c()().mark(function I(C){return c()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,(0,U.Ct)({md5:C.Id,deleteImage:!1,deleteVolume:!1});case 2:return v.t0=v.sent,v.next=5,(0,E.rn)({name:C.Names[0]});case 5:return v.t1=v.sent,v.abrupt("return",[v.t0,v.t1]);case 7:case"end":return v.stop()}},I)}));return function(I){return d.apply(this,arguments)}}())).finally(function(){h(!0)}));case 2:case"end":return u.stop()}},a)})),children:i.FD.format("listManageDelete")},"deleteBatch")}]}}},"app-list")]})}},20578:function(Ie,Q,e){e.d(Q,{q:function(){return G}});var q=e(15009),L=e.n(q),ee=e(99289),c=e.n(ee),te=e(82346);function G(){return z.apply(this,arguments)}function z(){return z=c()(L()().mark(function f(){return L()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,(0,te.request)("/dpanel/api/pro/container-upgrade/get-all-list",{method:"POST"});case 2:return x.abrupt("return",x.sent);case 3:case"end":return x.stop()}},f)})),z.apply(this,arguments)}}}]);
