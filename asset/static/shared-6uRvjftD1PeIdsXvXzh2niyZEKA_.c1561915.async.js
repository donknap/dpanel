!(function(){"use strict";var Hs=Object.defineProperty,Ks=Object.defineProperties;var Gs=Object.getOwnPropertyDescriptors;var Or=Object.getOwnPropertySymbols;var Qs=Object.prototype.hasOwnProperty,qs=Object.prototype.propertyIsEnumerable;var Dr=(Wt,Xe,ne)=>Xe in Wt?Hs(Wt,Xe,{enumerable:!0,configurable:!0,writable:!0,value:ne}):Wt[Xe]=ne,mn=(Wt,Xe)=>{for(var ne in Xe||(Xe={}))Qs.call(Xe,ne)&&Dr(Wt,ne,Xe[ne]);if(Or)for(var ne of Or(Xe))qs.call(Xe,ne)&&Dr(Wt,ne,Xe[ne]);return Wt},Rn=(Wt,Xe)=>Ks(Wt,Gs(Xe));(self.webpackChunk=self.webpackChunk||[]).push([[9806],{57546:function(Wt,Xe,ne){ne.d(Xe,{Z:function(){return qe}});var J=ne(87462),ie=ne(67294),Q={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM653.3 424.6l52.2 52.2a8.01 8.01 0 01-4.7 13.6l-179.4 21c-5.1.6-9.5-3.7-8.9-8.9l21-179.4c.8-6.6 8.9-9.4 13.6-4.7l52.4 52.4 256.2-256.2c3.1-3.1 8.2-3.1 11.3 0l42.4 42.4c3.1 3.1 3.1 8.2 0 11.3L653.3 424.6z"}}]},name:"import",theme:"outlined"},D=Q,K=ne(84089),xe=function(ce,de){return ie.createElement(K.Z,(0,J.Z)({},ce,{ref:de,icon:D}))},_e=ie.forwardRef(xe),qe=_e},88484:function(Wt,Xe,ne){ne.d(Xe,{Z:function(){return qe}});var J=ne(87462),ie=ne(67294),Q={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},D=Q,K=ne(84089),xe=function(ce,de){return ie.createElement(K.Z,(0,J.Z)({},ce,{ref:de,icon:D}))},_e=ie.forwardRef(xe),qe=_e},12491:function(Wt,Xe,ne){ne.d(Xe,{Z:function(){return Oe}});var J=ne(5574),ie=ne.n(J),Q=ne(3616),D=ne(24963),K=ne(36146),xe=ne(88484),_e=ne(57546),qe=ne(62370),Pe=ne(11106),ce=ne(23345),de=ne(83622),Le=ne(85576),Se=ne(67294),he=ne(85893);function Oe(Ce){var q=(0,Se.useContext)(D.Z),Ie=q.message,rt=q.notice,st=(0,Se.useRef)(null),Ve=(0,Se.useState)(!1),je=ie()(Ve,2),gt=je[0],ut=je[1],ct=(0,Se.useState)(""),et=ie()(ct,2),pt=et[0],yt=et[1];(0,Se.useEffect)(function(){Ce.data&&yt(Ce.data)},[Ce.data]);var Ut=function(){st.current&&(st.current.click(),st.current.onchange=function(tt){if(!tt||!tt.target)return"";var j=new FileReader;j.onload=function(W){var G,le,ee=(G=W.target)===null||G===void 0?void 0:G.result;if(Ce.onLoad)try{Ce.onLoad&&Ce.onLoad(ee)}catch(pe){rt.error(pe);return}yt(ee),typeof Ce.onImport=="function"&&(Ie.success(K.FD.format("finish")),Ce.onImport(ee)),(le=st.current)!==null&&le!==void 0&&le.value&&(st.current.value="")};var ke=tt.target;if(ke.files&&ke.files[0]){var re=ke.files[0];try{j.readAsText(re)}catch(W){rt.error(K.FD.format("commonContentIncorrectFormat",{name:ke.files[0].name}))}}})};return(0,he.jsxs)(he.Fragment,{children:[(0,he.jsx)(qe.Z,{children:(0,he.jsxs)(ce.Z.Compact,{block:!0,children:[(0,he.jsx)(de.ZP,{icon:(0,he.jsx)(xe.Z,{}),block:!0,onClick:Ut,children:Ce.title}),Ce.showPaset&&(0,he.jsx)(de.ZP,{icon:(0,he.jsx)(_e.Z,{}),onClick:function(){ut(!0)}})]})}),(0,he.jsx)("input",{style:{display:"none"},type:"file",ref:st,name:"importFileInput"}),(0,he.jsx)(Le.Z,{width:Q.ob,open:gt,onCancel:function(){ut(!1)},onOk:function(){typeof Ce.onImport=="function"&&(Ie.success(K.FD.format("finish")),Ce.onImport(pt)),ut(!1)},children:(0,he.jsx)(Pe.ZP,{height:Q.Ed,theme:"dark",value:pt,onChange:function(tt){yt(tt)}})})]})}},66309:function(Wt,Xe,ne){ne.d(Xe,{Z:function(){return tt}});var J=ne(67294),ie=ne(93967),Q=ne.n(ie),D=ne(98423),K=ne(98787),xe=ne(69760),_e=ne(96159),qe=ne(45353),Pe=ne(53124),ce=ne(11568),de=ne(15063),Le=ne(14747),Se=ne(83262),he=ne(83559);const Oe=j=>{const{paddingXXS:ke,lineWidth:re,tagPaddingHorizontal:W,componentCls:G,calc:le}=j,ee=le(W).sub(re).equal(),pe=le(ke).sub(re).equal();return{[G]:Object.assign(Object.assign({},(0,Le.Wf)(j)),{display:"inline-block",height:"auto",marginInlineEnd:j.marginXS,paddingInline:ee,fontSize:j.tagFontSize,lineHeight:j.tagLineHeight,whiteSpace:"nowrap",background:j.defaultBg,border:`${(0,ce.bf)(j.lineWidth)} ${j.lineType} ${j.colorBorder}`,borderRadius:j.borderRadiusSM,opacity:1,transition:`all ${j.motionDurationMid}`,textAlign:"start",position:"relative",[`&${G}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:j.defaultColor},[`${G}-close-icon`]:{marginInlineStart:pe,fontSize:j.tagIconSize,color:j.colorIcon,cursor:"pointer",transition:`all ${j.motionDurationMid}`,"&:hover":{color:j.colorTextHeading}},[`&${G}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${j.iconCls}-close, ${j.iconCls}-close:hover`]:{color:j.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${G}-checkable-checked):hover`]:{color:j.colorPrimary,backgroundColor:j.colorFillSecondary},"&:active, &-checked":{color:j.colorTextLightSolid},"&-checked":{backgroundColor:j.colorPrimary,"&:hover":{backgroundColor:j.colorPrimaryHover}},"&:active":{backgroundColor:j.colorPrimaryActive}},"&-hidden":{display:"none"},[`> ${j.iconCls} + span, > span + ${j.iconCls}`]:{marginInlineStart:ee}}),[`${G}-borderless`]:{borderColor:"transparent",background:j.tagBorderlessBg}}},Ce=j=>{const{lineWidth:ke,fontSizeIcon:re,calc:W}=j,G=j.fontSizeSM;return(0,Se.IX)(j,{tagFontSize:G,tagLineHeight:(0,ce.bf)(W(j.lineHeightSM).mul(G).equal()),tagIconSize:W(re).sub(W(ke).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:j.defaultBg})},q=j=>({defaultBg:new de.t(j.colorFillQuaternary).onBackground(j.colorBgContainer).toHexString(),defaultColor:j.colorText});var Ie=(0,he.I$)("Tag",j=>{const ke=Ce(j);return Oe(ke)},q),rt=function(j,ke){var re={};for(var W in j)Object.prototype.hasOwnProperty.call(j,W)&&ke.indexOf(W)<0&&(re[W]=j[W]);if(j!=null&&typeof Object.getOwnPropertySymbols=="function")for(var G=0,W=Object.getOwnPropertySymbols(j);G<W.length;G++)ke.indexOf(W[G])<0&&Object.prototype.propertyIsEnumerable.call(j,W[G])&&(re[W[G]]=j[W[G]]);return re},Ve=J.forwardRef((j,ke)=>{const{prefixCls:re,style:W,className:G,checked:le,children:ee,icon:pe,onChange:Be,onClick:De}=j,ve=rt(j,["prefixCls","style","className","checked","children","icon","onChange","onClick"]),{getPrefixCls:Te,tag:Re}=J.useContext(Pe.E_),Ne=d=>{Be==null||Be(!le),De==null||De(d)},Ge=Te("tag",re),[He,Jt,Rt]=Ie(Ge),$=Q()(Ge,`${Ge}-checkable`,{[`${Ge}-checkable-checked`]:le},Re==null?void 0:Re.className,G,Jt,Rt);return He(J.createElement("span",Object.assign({},ve,{ref:ke,style:Object.assign(Object.assign({},W),Re==null?void 0:Re.style),className:$,onClick:Ne}),pe,J.createElement("span",null,ee)))}),je=ne(98719);const gt=j=>(0,je.Z)(j,(ke,{textColor:re,lightBorderColor:W,lightColor:G,darkColor:le})=>({[`${j.componentCls}${j.componentCls}-${ke}`]:{color:re,background:G,borderColor:W,"&-inverse":{color:j.colorTextLightSolid,background:le,borderColor:le},[`&${j.componentCls}-borderless`]:{borderColor:"transparent"}}}));var ut=(0,he.bk)(["Tag","preset"],j=>{const ke=Ce(j);return gt(ke)},q);function ct(j){return typeof j!="string"?j:j.charAt(0).toUpperCase()+j.slice(1)}const et=(j,ke,re)=>{const W=ct(re);return{[`${j.componentCls}${j.componentCls}-${ke}`]:{color:j[`color${re}`],background:j[`color${W}Bg`],borderColor:j[`color${W}Border`],[`&${j.componentCls}-borderless`]:{borderColor:"transparent"}}}};var pt=(0,he.bk)(["Tag","status"],j=>{const ke=Ce(j);return[et(ke,"success","Success"),et(ke,"processing","Info"),et(ke,"error","Error"),et(ke,"warning","Warning")]},q),yt=function(j,ke){var re={};for(var W in j)Object.prototype.hasOwnProperty.call(j,W)&&ke.indexOf(W)<0&&(re[W]=j[W]);if(j!=null&&typeof Object.getOwnPropertySymbols=="function")for(var G=0,W=Object.getOwnPropertySymbols(j);G<W.length;G++)ke.indexOf(W[G])<0&&Object.prototype.propertyIsEnumerable.call(j,W[G])&&(re[W[G]]=j[W[G]]);return re};const ht=J.forwardRef((j,ke)=>{const{prefixCls:re,className:W,rootClassName:G,style:le,children:ee,icon:pe,color:Be,onClose:De,bordered:ve=!0,visible:Te}=j,Re=yt(j,["prefixCls","className","rootClassName","style","children","icon","color","onClose","bordered","visible"]),{getPrefixCls:Ne,direction:Ge,tag:He}=J.useContext(Pe.E_),[Jt,Rt]=J.useState(!0),$=(0,D.Z)(Re,["closeIcon","closable"]);J.useEffect(()=>{Te!==void 0&&Rt(Te)},[Te]);const d=(0,K.o2)(Be),x=(0,K.yT)(Be),A=d||x,I=Object.assign(Object.assign({backgroundColor:Be&&!A?Be:void 0},He==null?void 0:He.style),le),E=Ne("tag",re),[_,U,Y]=Ie(E),ue=Q()(E,He==null?void 0:He.className,{[`${E}-${Be}`]:A,[`${E}-has-color`]:Be&&!A,[`${E}-hidden`]:!Jt,[`${E}-rtl`]:Ge==="rtl",[`${E}-borderless`]:!ve},W,G,U,Y),ye=Ze=>{Ze.stopPropagation(),De==null||De(Ze),!Ze.defaultPrevented&&Rt(!1)},[,me]=(0,xe.b)((0,xe.w)(j),(0,xe.w)(He),{closable:!1,closeIconRender:Ze=>{const Bt=J.createElement("span",{className:`${E}-close-icon`,onClick:ye},Ze);return(0,_e.wm)(Ze,Bt,mt=>({onClick:ot=>{var It;(It=mt==null?void 0:mt.onClick)===null||It===void 0||It.call(mt,ot),ye(ot)},className:Q()(mt==null?void 0:mt.className,`${E}-close-icon`)}))}}),be=typeof Re.onClick=="function"||ee&&ee.type==="a",Je=pe||null,ze=Je?J.createElement(J.Fragment,null,Je,ee&&J.createElement("span",null,ee)):ee,vt=J.createElement("span",Object.assign({},$,{ref:ke,className:ue,style:I}),ze,me,d&&J.createElement(ut,{key:"preset",prefixCls:E}),x&&J.createElement(pt,{key:"status",prefixCls:E}));return _(be?J.createElement(qe.Z,{component:"Tag"},vt):vt)});ht.CheckableTag=Ve;var tt=ht},34790:function(Wt,Xe,ne){ne.d(Xe,{B1:function(){return S},GA:function(){return An},Gn:function(){return Ae},Mb:function(){return _e},TK:function(){return D},eC:function(){return Pe},vQ:function(){return Vt},ys:function(){return In}});var J=ne(37205),ie=ne(47421),Q=ne(59119);class D{constructor(s,f,g,w){this.state=s,this.pos=f,this.explicit=g,this.view=w,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(s){let f=(0,Q.qz)(this.state).resolveInner(this.pos,-1);for(;f&&s.indexOf(f.name)<0;)f=f.parent;return f?{from:f.from,to:this.pos,text:this.state.sliceDoc(f.from,this.pos),type:f.type}:null}matchBefore(s){let f=this.state.doc.lineAt(this.pos),g=Math.max(f.from,this.pos-250),w=f.text.slice(g-f.from,this.pos-f.from),T=w.search(Le(s,!1));return T<0?null:{from:g+T,to:this.pos,text:w.slice(T)}}get aborted(){return this.abortListeners==null}addEventListener(s,f,g){s=="abort"&&this.abortListeners&&(this.abortListeners.push(f),g&&g.onDocChange&&(this.abortOnDocChange=!0))}}function K(c){let s=Object.keys(c).join(""),f=/\w/.test(s);return f&&(s=s.replace(/\w/g,"")),`[${f?"\\w":""}${s.replace(/[^\w\s]/g,"\\$&")}]`}function xe(c){let s=Object.create(null),f=Object.create(null);for(let{label:w}of c){s[w[0]]=!0;for(let T=1;T<w.length;T++)f[w[T]]=!0}let g=K(s)+K(f)+"*$";return[new RegExp("^"+g),new RegExp(g)]}function _e(c){let s=c.map(w=>typeof w=="string"?{label:w}:w),[f,g]=s.every(w=>/^\w+$/.test(w.label))?[/\w*$/,/\w+$/]:xe(s);return w=>{let T=w.matchBefore(g);return T||w.explicit?{from:T?T.from:w.pos,options:s,validFor:f}:null}}function qe(c,s){return f=>{for(let g=syntaxTree(f.state).resolveInner(f.pos,-1);g;g=g.parent){if(c.indexOf(g.name)>-1)return s(f);if(g.type.isTop)break}return null}}function Pe(c,s){return f=>{for(let g=(0,Q.qz)(f.state).resolveInner(f.pos,-1);g;g=g.parent){if(c.indexOf(g.name)>-1)return null;if(g.type.isTop)break}return s(f)}}class ce{constructor(s,f,g,w){this.completion=s,this.source=f,this.match=g,this.score=w}}function de(c){return c.selection.main.from}function Le(c,s){var f;let{source:g}=c,w=s&&g[0]!="^",T=g[g.length-1]!="$";return!w&&!T?c:new RegExp(`${w?"^":""}(?:${g})${T?"$":""}`,(f=c.flags)!==null&&f!==void 0?f:c.ignoreCase?"i":"")}const Se=J.q6.define();function he(c,s,f,g){let{main:w}=c.selection,T=f-w.from,R=g-w.from;return Rn(mn({},c.changeByRange(z=>{if(z!=w&&f!=g&&c.sliceDoc(z.from+T,z.from+R)!=c.sliceDoc(f,g))return{range:z};let F=c.toText(s);return{changes:{from:z.from+T,to:g==w.from?z.to:z.from+R,insert:F},range:J.jT.cursor(z.from+T+F.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}const Oe=new WeakMap;function Ce(c){if(!Array.isArray(c))return c;let s=Oe.get(c);return s||Oe.set(c,s=_e(c)),s}const q=J.Py.define(),Ie=J.Py.define();class rt{constructor(s){this.pattern=s,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let f=0;f<s.length;){let g=(0,J.gm)(s,f),w=(0,J.nZ)(g);this.chars.push(g);let T=s.slice(f,f+w),R=T.toUpperCase();this.folded.push((0,J.gm)(R==T?T.toLowerCase():R,0)),f+=w}this.astral=s.length!=this.chars.length}ret(s,f){return this.score=s,this.matched=f,this}match(s){if(this.pattern.length==0)return this.ret(-100,[]);if(s.length<this.pattern.length)return null;let{chars:f,folded:g,any:w,precise:T,byWord:R}=this;if(f.length==1){let Tt=(0,J.gm)(s,0),fn=(0,J.nZ)(Tt),Yt=fn==s.length?0:-100;if(Tt!=f[0])if(Tt==g[0])Yt+=-200;else return null;return this.ret(Yt,[0,fn])}let z=s.indexOf(this.pattern);if(z==0)return this.ret(s.length==this.pattern.length?0:-100,[0,this.pattern.length]);let F=f.length,se=0;if(z<0){for(let Tt=0,fn=Math.min(s.length,200);Tt<fn&&se<F;){let Yt=(0,J.gm)(s,Tt);(Yt==f[se]||Yt==g[se])&&(w[se++]=Tt),Tt+=(0,J.nZ)(Yt)}if(se<F)return null}let X=0,oe=0,We=!1,Ke=0,At=-1,Ft=-1,xn=/[a-z]/.test(s),Zt=!0;for(let Tt=0,fn=Math.min(s.length,200),Yt=0;Tt<fn&&oe<F;){let zt=(0,J.gm)(s,Tt);z<0&&(X<F&&zt==f[X]&&(T[X++]=Tt),Ke<F&&(zt==f[Ke]||zt==g[Ke]?(Ke==0&&(At=Tt),Ft=Tt+1,Ke++):Ke=0));let bn,y=zt<255?zt>=48&&zt<=57||zt>=97&&zt<=122?2:zt>=65&&zt<=90?1:0:(bn=(0,J.bg)(zt))!=bn.toLowerCase()?1:bn!=bn.toUpperCase()?2:0;(!Tt||y==1&&xn||Yt==0&&y!=0)&&(f[oe]==zt||g[oe]==zt&&(We=!0)?R[oe++]=Tt:R.length&&(Zt=!1)),Yt=y,Tt+=(0,J.nZ)(zt)}return oe==F&&R[0]==0&&Zt?this.result(-100+(We?-200:0),R,s):Ke==F&&At==0?this.ret(-200-s.length+(Ft==s.length?0:-100),[0,Ft]):z>-1?this.ret(-700-s.length,[z,z+this.pattern.length]):Ke==F?this.ret(-900-s.length,[At,Ft]):oe==F?this.result(-100+(We?-200:0)+-700+(Zt?0:-1100),R,s):f.length==2?null:this.result((w[0]?-700:0)+-200+-1100,w,s)}result(s,f,g){let w=[],T=0;for(let R of f){let z=R+(this.astral?(0,J.nZ)((0,J.gm)(g,R)):1);T&&w[T-1]==R?w[T-1]=z:(w[T++]=R,w[T++]=z)}return this.ret(s-g.length,w)}}class st{constructor(s){this.pattern=s,this.matched=[],this.score=0,this.folded=s.toLowerCase()}match(s){if(s.length<this.pattern.length)return null;let f=s.slice(0,this.pattern.length),g=f==this.pattern?0:f.toLowerCase()==this.folded?-200:null;return g==null?null:(this.matched=[0,f.length],this.score=g+(s.length==this.pattern.length?0:-100),this)}}const Ve=J.r$.define({combine(c){return(0,J.BO)(c,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:gt,filterStrict:!1,compareCompletions:(s,f)=>(s.sortText||s.label).localeCompare(f.sortText||f.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(s,f)=>s&&f,closeOnBlur:(s,f)=>s&&f,icons:(s,f)=>s&&f,tooltipClass:(s,f)=>g=>je(s(g),f(g)),optionClass:(s,f)=>g=>je(s(g),f(g)),addToOptions:(s,f)=>s.concat(f),filterStrict:(s,f)=>s||f})}});function je(c,s){return c?s?c+" "+s:c:s}function gt(c,s,f,g,w,T){let R=c.textDirection==ie.Nm.RTL,z=R,F=!1,se="top",X,oe,We=s.left-w.left,Ke=w.right-s.right,At=g.right-g.left,Ft=g.bottom-g.top;if(z&&We<Math.min(At,Ke)?z=!1:!z&&Ke<Math.min(At,We)&&(z=!0),At<=(z?We:Ke))X=Math.max(w.top,Math.min(f.top,w.bottom-Ft))-s.top,oe=Math.min(400,z?We:Ke);else{F=!0,oe=Math.min(400,(R?s.right:w.right-s.left)-30);let Tt=w.bottom-s.bottom;Tt>=Ft||Tt>s.top?X=f.bottom-s.top:(se="bottom",X=s.bottom-f.top)}let xn=(s.bottom-s.top)/T.offsetHeight,Zt=(s.right-s.left)/T.offsetWidth;return{style:`${se}: ${X/xn}px; max-width: ${oe/Zt}px`,class:"cm-completionInfo-"+(F?R?"left-narrow":"right-narrow":z?"left":"right")}}function ut(c){let s=c.addToOptions.slice();return c.icons&&s.push({render(f){let g=document.createElement("div");return g.classList.add("cm-completionIcon"),f.type&&g.classList.add(...f.type.split(/\s+/g).map(w=>"cm-completionIcon-"+w)),g.setAttribute("aria-hidden","true"),g},position:20}),s.push({render(f,g,w,T){let R=document.createElement("span");R.className="cm-completionLabel";let z=f.displayLabel||f.label,F=0;for(let se=0;se<T.length;){let X=T[se++],oe=T[se++];X>F&&R.appendChild(document.createTextNode(z.slice(F,X)));let We=R.appendChild(document.createElement("span"));We.appendChild(document.createTextNode(z.slice(X,oe))),We.className="cm-completionMatchedText",F=oe}return F<z.length&&R.appendChild(document.createTextNode(z.slice(F))),R},position:50},{render(f){if(!f.detail)return null;let g=document.createElement("span");return g.className="cm-completionDetail",g.textContent=f.detail,g},position:80}),s.sort((f,g)=>f.position-g.position).map(f=>f.render)}function ct(c,s,f){if(c<=f)return{from:0,to:c};if(s<0&&(s=0),s<=c>>1){let w=Math.floor(s/f);return{from:w*f,to:(w+1)*f}}let g=Math.floor((c-s)/f);return{from:c-(g+1)*f,to:c-g*f}}class et{constructor(s,f,g){this.view=s,this.stateField=f,this.applyCompletion=g,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:F=>this.placeInfo(F),key:this},this.space=null,this.currentClass="";let w=s.state.field(f),{options:T,selected:R}=w.open,z=s.state.facet(Ve);this.optionContent=ut(z),this.optionClass=z.optionClass,this.tooltipClass=z.tooltipClass,this.range=ct(T.length,R,z.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(s.state),this.dom.addEventListener("mousedown",F=>{let{options:se}=s.state.field(f).open;for(let X=F.target,oe;X&&X!=this.dom;X=X.parentNode)if(X.nodeName=="LI"&&(oe=/-(\d+)$/.exec(X.id))&&+oe[1]<se.length){this.applyCompletion(s,se[+oe[1]]),F.preventDefault();return}}),this.dom.addEventListener("focusout",F=>{let se=s.state.field(this.stateField,!1);se&&se.tooltip&&s.state.facet(Ve).closeOnBlur&&F.relatedTarget!=s.contentDOM&&s.dispatch({effects:Ie.of(null)})}),this.showOptions(T,w.id)}mount(){this.updateSel()}showOptions(s,f){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(s,f,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(s){var f;let g=s.state.field(this.stateField),w=s.startState.field(this.stateField);if(this.updateTooltipClass(s.state),g!=w){let{options:T,selected:R,disabled:z}=g.open;(!w.open||w.open.options!=T)&&(this.range=ct(T.length,R,s.state.facet(Ve).maxRenderedOptions),this.showOptions(T,g.id)),this.updateSel(),z!=((f=w.open)===null||f===void 0?void 0:f.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!z)}}updateTooltipClass(s){let f=this.tooltipClass(s);if(f!=this.currentClass){for(let g of this.currentClass.split(" "))g&&this.dom.classList.remove(g);for(let g of f.split(" "))g&&this.dom.classList.add(g);this.currentClass=f}}positioned(s){this.space=s,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let s=this.view.state.field(this.stateField),f=s.open;(f.selected>-1&&f.selected<this.range.from||f.selected>=this.range.to)&&(this.range=ct(f.options.length,f.selected,this.view.state.facet(Ve).maxRenderedOptions),this.showOptions(f.options,s.id));let g=this.updateSelectedOption(f.selected);if(g){this.destroyInfo();let{completion:w}=f.options[f.selected],{info:T}=w;if(!T)return;let R=typeof T=="string"?document.createTextNode(T):T(w);if(!R)return;"then"in R?R.then(z=>{z&&this.view.state.field(this.stateField,!1)==s&&this.addInfoPane(z,w)}).catch(z=>(0,ie.OO)(this.view.state,z,"completion info")):(this.addInfoPane(R,w),g.setAttribute("aria-describedby",this.info.id))}}addInfoPane(s,f){this.destroyInfo();let g=this.info=document.createElement("div");if(g.className="cm-tooltip cm-completionInfo",g.id="cm-completionInfo-"+Math.floor(Math.random()*65535).toString(16),s.nodeType!=null)g.appendChild(s),this.infoDestroy=null;else{let{dom:w,destroy:T}=s;g.appendChild(w),this.infoDestroy=T||null}this.dom.appendChild(g),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(s){let f=null;for(let g=this.list.firstChild,w=this.range.from;g;g=g.nextSibling,w++)g.nodeName!="LI"||!g.id?w--:w==s?g.hasAttribute("aria-selected")||(g.setAttribute("aria-selected","true"),f=g):g.hasAttribute("aria-selected")&&(g.removeAttribute("aria-selected"),g.removeAttribute("aria-describedby"));return f&&yt(this.list,f),f}measureInfo(){let s=this.dom.querySelector("[aria-selected]");if(!s||!this.info)return null;let f=this.dom.getBoundingClientRect(),g=this.info.getBoundingClientRect(),w=s.getBoundingClientRect(),T=this.space;if(!T){let R=this.dom.ownerDocument.documentElement;T={left:0,top:0,right:R.clientWidth,bottom:R.clientHeight}}return w.top>Math.min(T.bottom,f.bottom)-10||w.bottom<Math.max(T.top,f.top)+10?null:this.view.state.facet(Ve).positionInfo(this.view,f,w,g,T,this.dom)}placeInfo(s){this.info&&(s?(s.style&&(this.info.style.cssText=s.style),this.info.className="cm-tooltip cm-completionInfo "+(s.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(s,f,g){const w=document.createElement("ul");w.id=f,w.setAttribute("role","listbox"),w.setAttribute("aria-expanded","true"),w.setAttribute("aria-label",this.view.state.phrase("Completions")),w.addEventListener("mousedown",R=>{R.target==w&&R.preventDefault()});let T=null;for(let R=g.from;R<g.to;R++){let{completion:z,match:F}=s[R],{section:se}=z;if(se){let We=typeof se=="string"?se:se.name;if(We!=T&&(R>g.from||g.from==0))if(T=We,typeof se!="string"&&se.header)w.appendChild(se.header(se));else{let Ke=w.appendChild(document.createElement("completion-section"));Ke.textContent=We}}const X=w.appendChild(document.createElement("li"));X.id=f+"-"+R,X.setAttribute("role","option");let oe=this.optionClass(z);oe&&(X.className=oe);for(let We of this.optionContent){let Ke=We(z,this.view.state,this.view,F);Ke&&X.appendChild(Ke)}}return g.from&&w.classList.add("cm-completionListIncompleteTop"),g.to<s.length&&w.classList.add("cm-completionListIncompleteBottom"),w}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function pt(c,s){return f=>new et(f,c,s)}function yt(c,s){let f=c.getBoundingClientRect(),g=s.getBoundingClientRect(),w=f.height/c.offsetHeight;g.top<f.top?c.scrollTop-=(f.top-g.top)/w:g.bottom>f.bottom&&(c.scrollTop+=(g.bottom-f.bottom)/w)}function Ut(c){return(c.boost||0)*100+(c.apply?10:0)+(c.info?5:0)+(c.type?1:0)}function ht(c,s){let f=[],g=null,w=null,T=X=>{f.push(X);let{section:oe}=X.completion;if(oe){g||(g=[]);let We=typeof oe=="string"?oe:oe.name;g.some(Ke=>Ke.name==We)||g.push(typeof oe=="string"?{name:We}:oe)}},R=s.facet(Ve);for(let X of c)if(X.hasResult()){let oe=X.result.getMatch;if(X.result.filter===!1)for(let We of X.result.options)T(new ce(We,X.source,oe?oe(We):[],1e9-f.length));else{let We=s.sliceDoc(X.from,X.to),Ke,At=R.filterStrict?new st(We):new rt(We);for(let Ft of X.result.options)if(Ke=At.match(Ft.label)){let xn=Ft.displayLabel?oe?oe(Ft,Ke.matched):[]:Ke.matched,Zt=Ke.score+(Ft.boost||0);if(T(new ce(Ft,X.source,xn,Zt)),typeof Ft.section=="object"&&Ft.section.rank==="dynamic"){let{name:Tt}=Ft.section;w||(w=Object.create(null)),w[Tt]=Math.max(Zt,w[Tt]||-1e9)}}}}if(g){let X=Object.create(null),oe=0,We=(Ke,At)=>(Ke.rank==="dynamic"&&At.rank==="dynamic"?w[At.name]-w[Ke.name]:0)||(typeof Ke.rank=="number"?Ke.rank:1e9)-(typeof At.rank=="number"?At.rank:1e9)||(Ke.name<At.name?-1:1);for(let Ke of g.sort(We))oe-=1e5,X[Ke.name]=oe;for(let Ke of f){let{section:At}=Ke.completion;At&&(Ke.score+=X[typeof At=="string"?At:At.name])}}let z=[],F=null,se=R.compareCompletions;for(let X of f.sort((oe,We)=>We.score-oe.score||se(oe.completion,We.completion))){let oe=X.completion;!F||F.label!=oe.label||F.detail!=oe.detail||F.type!=null&&oe.type!=null&&F.type!=oe.type||F.apply!=oe.apply||F.boost!=oe.boost?z.push(X):Ut(X.completion)>Ut(F)&&(z[z.length-1]=X),F=X.completion}return z}class tt{constructor(s,f,g,w,T,R){this.options=s,this.attrs=f,this.tooltip=g,this.timestamp=w,this.selected=T,this.disabled=R}setSelected(s,f){return s==this.selected||s>=this.options.length?this:new tt(this.options,G(f,s),this.tooltip,this.timestamp,s,this.disabled)}static build(s,f,g,w,T,R){if(w&&!R&&s.some(se=>se.isPending))return w.setDisabled();let z=ht(s,f);if(!z.length)return w&&s.some(se=>se.isPending)?w.setDisabled():null;let F=f.facet(Ve).selectOnOpen?0:-1;if(w&&w.selected!=F&&w.selected!=-1){let se=w.options[w.selected].completion;for(let X=0;X<z.length;X++)if(z[X].completion==se){F=X;break}}return new tt(z,G(g,F),{pos:s.reduce((se,X)=>X.hasResult()?Math.min(se,X.from):se,1e8),create:Ge,above:T.aboveCursor},w?w.timestamp:Date.now(),F,!1)}map(s){return new tt(this.options,this.attrs,Rn(mn({},this.tooltip),{pos:s.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new tt(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class j{constructor(s,f,g){this.active=s,this.id=f,this.open=g}static start(){return new j(le,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(s){let{state:f}=s,g=f.facet(Ve),T=(g.override||f.languageDataAt("autocomplete",de(f)).map(Ce)).map(F=>(this.active.find(X=>X.source==F)||new pe(F,this.active.some(X=>X.state!=0)?1:0)).update(s,g));T.length==this.active.length&&T.every((F,se)=>F==this.active[se])&&(T=this.active);let R=this.open,z=s.effects.some(F=>F.is(ve));R&&s.docChanged&&(R=R.map(s.changes)),s.selection||T.some(F=>F.hasResult()&&s.changes.touchesRange(F.from,F.to))||!ke(T,this.active)||z?R=tt.build(T,f,this.id,R,g,z):R&&R.disabled&&!T.some(F=>F.isPending)&&(R=null),!R&&T.every(F=>!F.isPending)&&T.some(F=>F.hasResult())&&(T=T.map(F=>F.hasResult()?new pe(F.source,0):F));for(let F of s.effects)F.is(Te)&&(R=R&&R.setSelected(F.value,this.id));return T==this.active&&R==this.open?this:new j(T,this.id,R)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?re:W}}function ke(c,s){if(c==s)return!0;for(let f=0,g=0;;){for(;f<c.length&&!c[f].hasResult();)f++;for(;g<s.length&&!s[g].hasResult();)g++;let w=f==c.length,T=g==s.length;if(w||T)return w==T;if(c[f++].result!=s[g++].result)return!1}}const re={"aria-autocomplete":"list"},W={};function G(c,s){let f={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":c};return s>-1&&(f["aria-activedescendant"]=c+"-"+s),f}const le=[];function ee(c,s){if(c.isUserEvent("input.complete")){let g=c.annotation(Se);if(g&&s.activateOnCompletion(g))return 12}let f=c.isUserEvent("input.type");return f&&s.activateOnTyping?5:f?1:c.isUserEvent("delete.backward")?2:c.selection?8:c.docChanged?16:0}class pe{constructor(s,f,g=!1){this.source=s,this.state=f,this.explicit=g}hasResult(){return!1}get isPending(){return this.state==1}update(s,f){let g=ee(s,f),w=this;(g&8||g&16&&this.touches(s))&&(w=new pe(w.source,0)),g&4&&w.state==0&&(w=new pe(this.source,1)),w=w.updateFor(s,g);for(let T of s.effects)if(T.is(q))w=new pe(w.source,1,T.value);else if(T.is(Ie))w=new pe(w.source,0);else if(T.is(ve))for(let R of T.value)R.source==w.source&&(w=R);return w}updateFor(s,f){return this.map(s.changes)}map(s){return this}touches(s){return s.changes.touchesRange(de(s.state))}}class Be extends pe{constructor(s,f,g,w,T,R){super(s,3,f),this.limit=g,this.result=w,this.from=T,this.to=R}hasResult(){return!0}updateFor(s,f){var g;if(!(f&3))return this.map(s.changes);let w=this.result;w.map&&!s.changes.empty&&(w=w.map(w,s.changes));let T=s.changes.mapPos(this.from),R=s.changes.mapPos(this.to,1),z=de(s.state);if(z>R||!w||f&2&&(de(s.startState)==this.from||z<this.limit))return new pe(this.source,f&4?1:0);let F=s.changes.mapPos(this.limit);return De(w.validFor,s.state,T,R)?new Be(this.source,this.explicit,F,w,T,R):w.update&&(w=w.update(w,T,R,new D(s.state,z,!1)))?new Be(this.source,this.explicit,F,w,w.from,(g=w.to)!==null&&g!==void 0?g:de(s.state)):new pe(this.source,1,this.explicit)}map(s){return s.empty?this:(this.result.map?this.result.map(this.result,s):this.result)?new Be(this.source,this.explicit,s.mapPos(this.limit),this.result,s.mapPos(this.from),s.mapPos(this.to,1)):new pe(this.source,0)}touches(s){return s.changes.touchesRange(this.from,this.to)}}function De(c,s,f,g){if(!c)return!1;let w=s.sliceDoc(f,g);return typeof c=="function"?c(w,f,g,s):Le(c,!0).test(w)}const ve=J.Py.define({map(c,s){return c.map(f=>f.map(s))}}),Te=J.Py.define(),Re=J.QQ.define({create(){return j.start()},update(c,s){return c.update(s)},provide:c=>[ie.hJ.from(c,s=>s.tooltip),ie.tk.contentAttributes.from(c,s=>s.attrs)]});function Ne(c,s){const f=s.completion.apply||s.completion.label;let g=c.state.field(Re).active.find(w=>w.source==s.source);return g instanceof Be?(typeof f=="string"?c.dispatch(Rn(mn({},he(c.state,f,g.from,g.to)),{annotations:Se.of(s.completion)})):f(c,s.completion,g.from,g.to),!0):!1}const Ge=pt(Re,Ne);function He(c,s="option"){return f=>{let g=f.state.field(Re,!1);if(!g||!g.open||g.open.disabled||Date.now()-g.open.timestamp<f.state.facet(Ve).interactionDelay)return!1;let w=1,T;s=="page"&&(T=(0,ie.gB)(f,g.open.tooltip))&&(w=Math.max(2,Math.floor(T.dom.offsetHeight/T.dom.querySelector("li").offsetHeight)-1));let{length:R}=g.open.options,z=g.open.selected>-1?g.open.selected+w*(c?1:-1):c?0:R-1;return z<0?z=s=="page"?0:R-1:z>=R&&(z=s=="page"?R-1:0),f.dispatch({effects:Te.of(z)}),!0}}const Jt=c=>{let s=c.state.field(Re,!1);return c.state.readOnly||!s||!s.open||s.open.selected<0||s.open.disabled||Date.now()-s.open.timestamp<c.state.facet(Ve).interactionDelay?!1:Ne(c,s.open.options[s.open.selected])},Rt=c=>c.state.field(Re,!1)?(c.dispatch({effects:q.of(!0)}),!0):!1,$=c=>{let s=c.state.field(Re,!1);return!s||!s.active.some(f=>f.state!=0)?!1:(c.dispatch({effects:Ie.of(null)}),!0)};class d{constructor(s,f){this.active=s,this.context=f,this.time=Date.now(),this.updates=[],this.done=void 0}}const x=50,A=1e3,I=ie.lg.fromClass(class{constructor(c){this.view=c,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let s of c.state.field(Re).active)s.isPending&&this.startQuery(s)}update(c){let s=c.state.field(Re),f=c.state.facet(Ve);if(!c.selectionSet&&!c.docChanged&&c.startState.field(Re)==s)return;let g=c.transactions.some(T=>{let R=ee(T,f);return R&8||(T.selection||T.docChanged)&&!(R&3)});for(let T=0;T<this.running.length;T++){let R=this.running[T];if(g||R.context.abortOnDocChange&&c.docChanged||R.updates.length+c.transactions.length>x&&Date.now()-R.time>A){for(let z of R.context.abortListeners)try{z()}catch(F){(0,ie.OO)(this.view.state,F)}R.context.abortListeners=null,this.running.splice(T--,1)}else R.updates.push(...c.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),c.transactions.some(T=>T.effects.some(R=>R.is(q)))&&(this.pendingStart=!0);let w=this.pendingStart?50:f.activateOnTypingDelay;if(this.debounceUpdate=s.active.some(T=>T.isPending&&!this.running.some(R=>R.active.source==T.source))?setTimeout(()=>this.startUpdate(),w):-1,this.composing!=0)for(let T of c.transactions)T.isUserEvent("input.type")?this.composing=2:this.composing==2&&T.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:c}=this.view,s=c.field(Re);for(let f of s.active)f.isPending&&!this.running.some(g=>g.active.source==f.source)&&this.startQuery(f);this.running.length&&s.open&&s.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Ve).updateSyncTime))}startQuery(c){let{state:s}=this.view,f=de(s),g=new D(s,f,c.explicit,this.view),w=new d(c,g);this.running.push(w),Promise.resolve(c.source(g)).then(T=>{w.context.aborted||(w.done=T||null,this.scheduleAccept())},T=>{this.view.dispatch({effects:Ie.of(null)}),(0,ie.OO)(this.view.state,T)})}scheduleAccept(){this.running.every(c=>c.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Ve).updateSyncTime))}accept(){var c;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let s=[],f=this.view.state.facet(Ve),g=this.view.state.field(Re);for(let w=0;w<this.running.length;w++){let T=this.running[w];if(T.done===void 0)continue;if(this.running.splice(w--,1),T.done){let z=de(T.updates.length?T.updates[0].startState:this.view.state),F=Math.min(z,T.done.from+(T.active.explicit?0:1)),se=new Be(T.active.source,T.active.explicit,F,T.done,T.done.from,(c=T.done.to)!==null&&c!==void 0?c:z);for(let X of T.updates)se=se.update(X,f);if(se.hasResult()){s.push(se);continue}}let R=g.active.find(z=>z.source==T.active.source);if(R&&R.isPending)if(T.done==null){let z=new pe(T.active.source,0);for(let F of T.updates)z=z.update(F,f);z.isPending||s.push(z)}else this.startQuery(R)}(s.length||g.open&&g.open.disabled)&&this.view.dispatch({effects:ve.of(s)})}},{eventHandlers:{blur(c){let s=this.view.state.field(Re,!1);if(s&&s.tooltip&&this.view.state.facet(Ve).closeOnBlur){let f=s.open&&(0,ie.gB)(this.view,s.open.tooltip);(!f||!f.dom.contains(c.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:Ie.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:q.of(!1)}),20),this.composing=0}}}),E=typeof navigator=="object"&&/Win/.test(navigator.platform),_=J.Wl.highest(ie.tk.domEventHandlers({keydown(c,s){let f=s.state.field(Re,!1);if(!f||!f.open||f.open.disabled||f.open.selected<0||c.key.length>1||c.ctrlKey&&!(E&&c.altKey)||c.metaKey)return!1;let g=f.open.options[f.open.selected],w=f.active.find(R=>R.source==g.source),T=g.completion.commitCharacters||w.result.commitCharacters;return T&&T.indexOf(c.key)>-1&&Ne(s,g),!1}})),U=ie.tk.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xB7\xB7\xB7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25CB'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25CC'"}},".cm-completionIcon-variable":{"&:after":{content:"'\u{1D465}'"}},".cm-completionIcon-constant":{"&:after":{content:"'\u{1D436}'"}},".cm-completionIcon-type":{"&:after":{content:"'\u{1D461}'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222A'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25A1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\u{1F511}\uFE0E'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25A2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class Y{constructor(s,f,g,w){this.field=s,this.line=f,this.from=g,this.to=w}}class ue{constructor(s,f,g){this.field=s,this.from=f,this.to=g}map(s){let f=s.mapPos(this.from,-1,J.gc.TrackDel),g=s.mapPos(this.to,1,J.gc.TrackDel);return f==null||g==null?null:new ue(this.field,f,g)}}class ye{constructor(s,f){this.lines=s,this.fieldPositions=f}instantiate(s,f){let g=[],w=[f],T=s.doc.lineAt(f),R=/^\s*/.exec(T.text)[0];for(let F of this.lines){if(g.length){let se=R,X=/^\t*/.exec(F)[0].length;for(let oe=0;oe<X;oe++)se+=s.facet(Q.c);w.push(f+se.length-X),F=se+F.slice(X)}g.push(F),f+=F.length+1}let z=this.fieldPositions.map(F=>new ue(F.field,w[F.line]+F.from,w[F.line]+F.to));return{text:g,ranges:z}}static parse(s){let f=[],g=[],w=[],T;for(let R of s.split(/\r\n?|\n/)){for(;T=/[#$]\{(?:(\d+)(?::([^{}]*))?|((?:\\[{}]|[^{}])*))\}/.exec(R);){let z=T[1]?+T[1]:null,F=T[2]||T[3]||"",se=-1,X=F.replace(/\\[{}]/g,oe=>oe[1]);for(let oe=0;oe<f.length;oe++)(z!=null?f[oe].seq==z:X&&f[oe].name==X)&&(se=oe);if(se<0){let oe=0;for(;oe<f.length&&(z==null||f[oe].seq!=null&&f[oe].seq<z);)oe++;f.splice(oe,0,{seq:z,name:X}),se=oe;for(let We of w)We.field>=se&&We.field++}for(let oe of w)if(oe.line==g.length&&oe.from>T.index){let We=T[2]?3+(T[1]||"").length:2;oe.from-=We,oe.to-=We}w.push(new Y(se,g.length,T.index,T.index+X.length)),R=R.slice(0,T.index)+F+R.slice(T.index+T[0].length)}R=R.replace(/\\([{}])/g,(z,F,se)=>{for(let X of w)X.line==g.length&&X.from>se&&(X.from--,X.to--);return F}),g.push(R)}return new ye(g,w)}}let me=ie.p.widget({widget:new class extends ie.l9{toDOM(){let c=document.createElement("span");return c.className="cm-snippetFieldPosition",c}ignoreEvent(){return!1}}}),be=ie.p.mark({class:"cm-snippetField"});class Je{constructor(s,f){this.ranges=s,this.active=f,this.deco=ie.p.set(s.map(g=>(g.from==g.to?me:be).range(g.from,g.to)),!0)}map(s){let f=[];for(let g of this.ranges){let w=g.map(s);if(!w)return null;f.push(w)}return new Je(f,this.active)}selectionInsideField(s){return s.ranges.every(f=>this.ranges.some(g=>g.field==this.active&&g.from<=f.from&&g.to>=f.to))}}const ze=J.Py.define({map(c,s){return c&&c.map(s)}}),vt=J.Py.define(),Ze=J.QQ.define({create(){return null},update(c,s){for(let f of s.effects){if(f.is(ze))return f.value;if(f.is(vt)&&c)return new Je(c.ranges,f.value)}return c&&s.docChanged&&(c=c.map(s.changes)),c&&s.selection&&!c.selectionInsideField(s.selection)&&(c=null),c},provide:c=>ie.tk.decorations.from(c,s=>s?s.deco:ie.p.none)});function Bt(c,s){return J.jT.create(c.filter(f=>f.field==s).map(f=>J.jT.range(f.from,f.to)))}function mt(c){let s=ye.parse(c);return(f,g,w,T)=>{let{text:R,ranges:z}=s.instantiate(f.state,w),{main:F}=f.state.selection,se={changes:{from:w,to:T==F.from?F.to:T,insert:J.xv.of(R)},scrollIntoView:!0,annotations:g?[Se.of(g),J.YW.userEvent.of("input.complete")]:void 0};if(z.length&&(se.selection=Bt(z,0)),z.some(X=>X.field>0)){let X=new Je(z,0),oe=se.effects=[ze.of(X)];f.state.field(Ze,!1)===void 0&&oe.push(J.Py.appendConfig.of([Ze,Ue,nt,U]))}f.dispatch(f.state.update(se))}}function ot(c){return({state:s,dispatch:f})=>{let g=s.field(Ze,!1);if(!g||c<0&&g.active==0)return!1;let w=g.active+c,T=c>0&&!g.ranges.some(R=>R.field==w+c);return f(s.update({selection:Bt(g.ranges,w),effects:ze.of(T?null:new Je(g.ranges,w)),scrollIntoView:!0})),!0}}const It=({state:c,dispatch:s})=>c.field(Ze,!1)?(s(c.update({effects:ze.of(null)})),!0):!1,Ye=ot(1),dt=ot(-1);function fe(c){let s=c.field(Ze,!1);return!!(s&&s.ranges.some(f=>f.field==s.active+1))}function $e(c){let s=c.field(Ze,!1);return!!(s&&s.active>0)}const lt=[{key:"Tab",run:Ye,shift:dt},{key:"Escape",run:It}],at=J.r$.define({combine(c){return c.length?c[0]:lt}}),Ue=J.Wl.highest(ie.$f.compute([at],c=>c.facet(at)));function Ae(c,s){return Rn(mn({},s),{apply:mt(c)})}const nt=ie.tk.domEventHandlers({mousedown(c,s){let f=s.state.field(Ze,!1),g;if(!f||(g=s.posAtCoords({x:c.clientX,y:c.clientY}))==null)return!1;let w=f.ranges.find(T=>T.from<=g&&T.to>=g);return!w||w.field==f.active?!1:(s.dispatch({selection:Bt(f.ranges,w.field),effects:ze.of(f.ranges.some(T=>T.field>w.field)?new Je(f.ranges,w.field):null),scrollIntoView:!0}),!0)}});function ft(c){let s=c.replace(/[\]\-\\]/g,"\\$&");try{return new RegExp(`[\\p{Alphabetic}\\p{Number}_${s}]+`,"ug")}catch(f){return new RegExp(`[w${s}]`,"g")}}function Ct(c,s){return new RegExp(s(c.source),c.unicode?"u":"")}const Mt=null;function Nt(c){return Mt[c]||(Mt[c]=new WeakMap)}function qt(c,s,f,g,w){for(let T=c.iterLines(),R=0;!T.next().done;){let{value:z}=T,F;for(s.lastIndex=0;F=s.exec(z);)if(!g[F[0]]&&R+F.index!=w&&(f.push({type:"text",label:F[0]}),g[F[0]]=!0,f.length>=2e3))return;R+=z.length+1}}function Et(c,s,f,g,w){let T=c.length>=1e3,R=T&&s.get(c);if(R)return R;let z=[],F=Object.create(null);if(c.children){let se=0;for(let X of c.children){if(X.length>=1e3)for(let oe of Et(X,s,f,g-se,w-se))F[oe.label]||(F[oe.label]=!0,z.push(oe));else qt(X,f,z,F,w-se);se+=X.length+1}}else qt(c,f,z,F,w);return T&&z.length<2e3&&s.set(c,z),z}const rn=c=>{let s=c.state.languageDataAt("wordChars",c.pos).join(""),f=ft(s),g=c.matchBefore(Ct(f,R=>R+"$"));if(!g&&!c.explicit)return null;let w=g?g.from:c.pos,T=Et(c.state.doc,Nt(s),f,5e4,w);return{from:w,options:T,validFor:Ct(f,R=>"^"+R)}},Ot={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Me=J.Py.define({map(c,s){let f=s.mapPos(c,-1,J.gc.TrackAfter);return f==null?void 0:f}}),bt=new class extends J.uU{};bt.startSide=1,bt.endSide=-1;const $t=J.QQ.define({create(){return J.Xs.empty},update(c,s){if(c=c.map(s.changes),s.selection){let f=s.state.doc.lineAt(s.selection.main.head);c=c.update({filter:g=>g>=f.from&&g<=f.to})}for(let f of s.effects)f.is(Me)&&(c=c.update({add:[bt.range(f.value,f.value+1)]}));return c}});function Vt(){return[gn,$t]}const _t="()[]{}<>\xAB\xBB\xBB\xAB\uFF3B\uFF3D\uFF5B\uFF5D";function en(c){for(let s=0;s<_t.length;s+=2)if(_t.charCodeAt(s)==c)return _t.charAt(s+1);return(0,J.bg)(c<128?c:c+1)}function un(c,s){return c.languageDataAt("closeBrackets",s)[0]||Ot}const Dt=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),gn=ie.tk.inputHandler.of((c,s,f,g)=>{if((Dt?c.composing:c.compositionStarted)||c.state.readOnly)return!1;let w=c.state.selection.main;if(g.length>2||g.length==2&&(0,J.nZ)((0,J.gm)(g,0))==1||s!=w.from||f!=w.to)return!1;let T=Lt(c.state,g);return T?(c.dispatch(T),!0):!1}),An=[{key:"Backspace",run:({state:c,dispatch:s})=>{if(c.readOnly)return!1;let g=un(c,c.selection.main.head).brackets||Ot.brackets,w=null,T=c.changeByRange(R=>{if(R.empty){let z=on(c.doc,R.head);for(let F of g)if(F==z&&sn(c.doc,R.head)==en((0,J.gm)(F,0)))return{changes:{from:R.head-F.length,to:R.head+F.length},range:J.jT.cursor(R.head-F.length)}}return{range:w=R}});return w||s(c.update(T,{scrollIntoView:!0,userEvent:"delete.backward"})),!w}}];function Lt(c,s){let f=un(c,c.selection.main.head),g=f.brackets||Ot.brackets;for(let w of g){let T=en((0,J.gm)(w,0));if(s==w)return T==w?hn(c,w,g.indexOf(w+w+w)>-1,f):Tn(c,w,T,f.before||Ot.before);if(s==T&&Kt(c,c.selection.main.from))return yn(c,w,T)}return null}function Kt(c,s){let f=!1;return c.field($t).between(0,c.doc.length,g=>{g==s&&(f=!0)}),f}function sn(c,s){let f=c.sliceString(s,s+2);return f.slice(0,(0,J.nZ)((0,J.gm)(f,0)))}function on(c,s){let f=c.sliceString(s-2,s);return(0,J.nZ)((0,J.gm)(f,0))==f.length?f:f.slice(1)}function Tn(c,s,f,g){let w=null,T=c.changeByRange(R=>{if(!R.empty)return{changes:[{insert:s,from:R.from},{insert:f,from:R.to}],effects:Me.of(R.to+s.length),range:J.jT.range(R.anchor+s.length,R.head+s.length)};let z=sn(c.doc,R.head);return!z||/\s/.test(z)||g.indexOf(z)>-1?{changes:{insert:s+f,from:R.head},effects:Me.of(R.head+s.length),range:J.jT.cursor(R.head+s.length)}:{range:w=R}});return w?null:c.update(T,{scrollIntoView:!0,userEvent:"input.type"})}function yn(c,s,f){let g=null,w=c.changeByRange(T=>T.empty&&sn(c.doc,T.head)==f?{changes:{from:T.head,to:T.head+f.length,insert:f},range:J.jT.cursor(T.head+f.length)}:g={range:T});return g?null:c.update(w,{scrollIntoView:!0,userEvent:"input.type"})}function hn(c,s,f,g){let w=g.stringPrefixes||Ot.stringPrefixes,T=null,R=c.changeByRange(z=>{if(!z.empty)return{changes:[{insert:s,from:z.from},{insert:s,from:z.to}],effects:Me.of(z.to+s.length),range:J.jT.range(z.anchor+s.length,z.head+s.length)};let F=z.head,se=sn(c.doc,F),X;if(se==s){if(ln(c,F))return{changes:{insert:s+s,from:F},effects:Me.of(F+s.length),range:J.jT.cursor(F+s.length)};if(Kt(c,F)){let We=f&&c.sliceDoc(F,F+s.length*3)==s+s+s?s+s+s:s;return{changes:{from:F,to:F+We.length,insert:We},range:J.jT.cursor(F+We.length)}}}else{if(f&&c.sliceDoc(F-2*s.length,F)==s+s&&(X=vn(c,F-2*s.length,w))>-1&&ln(c,X))return{changes:{insert:s+s+s+s,from:F},effects:Me.of(F+s.length),range:J.jT.cursor(F+s.length)};if(c.charCategorizer(F)(se)!=J.D0.Word&&vn(c,F,w)>-1&&!Gt(c,F,s,w))return{changes:{insert:s+s,from:F},effects:Me.of(F+s.length),range:J.jT.cursor(F+s.length)}}return{range:T=z}});return T?null:c.update(R,{scrollIntoView:!0,userEvent:"input.type"})}function ln(c,s){let f=(0,Q.qz)(c).resolveInner(s+1);return f.parent&&f.from==s}function Gt(c,s,f,g){let w=(0,Q.qz)(c).resolveInner(s,-1),T=g.reduce((R,z)=>Math.max(R,z.length),0);for(let R=0;R<5;R++){let z=c.sliceDoc(w.from,Math.min(w.to,w.from+f.length+T)),F=z.indexOf(f);if(!F||F>-1&&g.indexOf(z.slice(0,F))>-1){let X=w.firstChild;for(;X&&X.from==w.from&&X.to-X.from>f.length+F;){if(c.sliceDoc(X.to-f.length,X.to)==f)return!1;X=X.firstChild}return!0}let se=w.to==s&&w.parent;if(!se)break;w=se}return!1}function vn(c,s,f){let g=c.charCategorizer(s);if(g(c.sliceDoc(s-1,s))!=J.D0.Word)return s;for(let w of f){let T=s-w.length;if(c.sliceDoc(T,s)==w&&g(c.sliceDoc(T-1,T))!=J.D0.Word)return T}return-1}function In(c={}){return[_,Re,Ve.of(c),I,n,U]}const S=[{key:"Ctrl-Space",run:Rt},{mac:"Alt-`",run:Rt},{mac:"Alt-i",run:Rt},{key:"Escape",run:$},{key:"ArrowDown",run:He(!0)},{key:"ArrowUp",run:He(!1)},{key:"PageDown",run:He(!0,"page")},{key:"PageUp",run:He(!1,"page")},{key:"Enter",run:Jt}],n=J.Wl.highest(ie.$f.computeN([Ve],c=>c.facet(Ve).defaultKeymap?[S]:[]));function i(c){let s=c.field(Re,!1);return s&&s.active.some(f=>f.isPending)?"pending":s&&s.active.some(f=>f.state!=0)?"active":null}const a=new WeakMap;function p(c){var s;let f=(s=c.field(Re,!1))===null||s===void 0?void 0:s.open;if(!f||f.disabled)return[];let g=a.get(f.options);return g||a.set(f.options,g=f.options.map(w=>w.completion)),g}function k(c){var s;let f=(s=c.field(Re,!1))===null||s===void 0?void 0:s.open;return f&&!f.disabled&&f.selected>=0?f.options[f.selected].completion:null}function v(c){var s;let f=(s=c.field(Re,!1))===null||s===void 0?void 0:s.open;return f&&!f.disabled&&f.selected>=0?f.selected:null}function P(c){return Te.of(c)}},59119:function(Wt,Xe,ne){ne.d(Xe,{Be:function(){return st},Dv:function(){return A},Gn:function(){return W},K0:function(){return ke},KC:function(){return Pe},Qf:function(){return Et},R_:function(){return en},SQ:function(){return ce},SS:function(){return j},Um:function(){return Gt},a0:function(){return yn},c:function(){return ht},c6:function(){return yt},e7:function(){return $e},il:function(){return k},kU:function(){return qe},mi:function(){return Nt},n$:function(){return Tn},nF:function(){return bt},nY:function(){return $},pp:function(){return _e},qp:function(){return Le},qz:function(){return Se},ri:function(){return pt},rs:function(){return d},tC:function(){return Jt},uj:function(){return G},vw:function(){return Ne},x0:function(){return x},y1:function(){return tt},ze:function(){return He}});var J=ne(41113),ie=ne(37205),Q=ne(47421),D=ne(35524),K=ne(28699),xe;const _e=new J.md;function qe(y){return ie.r$.define({combine:y?l=>l.concat(y):void 0})}const Pe=new J.md;class ce{constructor(l,u,b=[],M=""){this.data=l,this.name=M,ie.yy.prototype.hasOwnProperty("tree")||Object.defineProperty(ie.yy.prototype,"tree",{get(){return Se(this)}}),this.parser=u,this.extension=[et.of(this),ie.yy.languageData.of((O,L,H)=>{let V=de(O,L,H),ae=V.type.prop(_e);if(!ae)return[];let we=O.facet(ae),xt=V.type.prop(Pe);if(xt){let tn=V.resolve(L-V.from,H);for(let Xt of xt)if(Xt.test(tn,O)){let Mn=O.facet(Xt.facet);return Xt.type=="replace"?Mn:Mn.concat(we)}}return we})].concat(b)}isActiveAt(l,u,b=-1){return de(l,u,b).type.prop(_e)==this.data}findRegions(l){let u=l.facet(et);if((u==null?void 0:u.data)==this.data)return[{from:0,to:l.doc.length}];if(!u||!u.allowsNesting)return[];let b=[],M=(O,L)=>{if(O.prop(_e)==this.data){b.push({from:L,to:L+O.length});return}let H=O.prop(J.md.mounted);if(H){if(H.tree.prop(_e)==this.data){if(H.overlay)for(let V of H.overlay)b.push({from:V.from+L,to:V.to+L});else b.push({from:L,to:L+O.length});return}else if(H.overlay){let V=b.length;if(M(H.tree,H.overlay[0].from+L),b.length>V)return}}for(let V=0;V<O.children.length;V++){let ae=O.children[V];ae instanceof J.mp&&M(ae,O.positions[V]+L)}};return M(Se(l),0),b}get allowsNesting(){return!0}}ce.setState=ie.Py.define();function de(y,l,u){let b=y.facet(et),M=Se(y).topNode;if(!b||b.allowsNesting)for(let O=M;O;O=O.enter(l,u,J.vj.ExcludeBuffers|J.vj.EnterBracketed))O.type.isTop&&(M=O);return M}class Le extends ce{constructor(l,u,b){super(l,u,[],b),this.parser=u}static define(l){let u=qe(l.languageData);return new Le(u,l.parser.configure({props:[_e.add(b=>b.isTop?u:void 0)]}),l.name)}configure(l,u){return new Le(this.data,this.parser.configure(l),u||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function Se(y){let l=y.field(ce.state,!1);return l?l.tree:J.mp.empty}function he(y,l,u=50){var b;let M=(b=y.field(ce.state,!1))===null||b===void 0?void 0:b.context;if(!M)return null;let O=M.viewport;M.updateViewport({from:0,to:l});let L=M.isDone(l)||M.work(u,l)?M.tree:null;return M.updateViewport(O),L}function Oe(y,l=y.doc.length){var u;return((u=y.field(ce.state,!1))===null||u===void 0?void 0:u.context.isDone(l))||!1}function Ce(y,l=y.viewport.to,u=100){let b=he(y.state,l,u);return b!=Se(y.state)&&y.dispatch({}),!!b}function q(y){var l;return((l=y.plugin(ct))===null||l===void 0?void 0:l.isWorking())||!1}class Ie{constructor(l){this.doc=l,this.cursorPos=0,this.string="",this.cursor=l.iter()}get length(){return this.doc.length}syncTo(l){return this.string=this.cursor.next(l-this.cursorPos).value,this.cursorPos=l+this.string.length,this.cursorPos-this.string.length}chunk(l){return this.syncTo(l),this.string}get lineChunks(){return!0}read(l,u){let b=this.cursorPos-this.string.length;return l<b||u>=this.cursorPos?this.doc.sliceString(l,u):this.string.slice(l-b,u-b)}}let rt=null;class st{constructor(l,u,b=[],M,O,L,H,V){this.parser=l,this.state=u,this.fragments=b,this.tree=M,this.treeLen=O,this.viewport=L,this.skipped=H,this.scheduleOn=V,this.parse=null,this.tempSkipped=[]}static create(l,u,b){return new st(l,u,[],J.mp.empty,0,b,[],null)}startParse(){return this.parser.startParse(new Ie(this.state.doc),this.fragments)}work(l,u){return u!=null&&u>=this.state.doc.length&&(u=void 0),this.tree!=J.mp.empty&&this.isDone(u!=null?u:this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var b;if(typeof l=="number"){let M=Date.now()+l;l=()=>Date.now()>M}for(this.parse||(this.parse=this.startParse()),u!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>u)&&u<this.state.doc.length&&this.parse.stopAt(u);;){let M=this.parse.advance();if(M)if(this.fragments=this.withoutTempSkipped(J.i9.addTree(M,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(b=this.parse.stoppedAt)!==null&&b!==void 0?b:this.state.doc.length,this.tree=M,this.parse=null,this.treeLen<(u!=null?u:this.state.doc.length))this.parse=this.startParse();else return!0;if(l())return!1}})}takeTree(){let l,u;this.parse&&(l=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>l)&&this.parse.stopAt(l),this.withContext(()=>{for(;!(u=this.parse.advance()););}),this.treeLen=l,this.tree=u,this.fragments=this.withoutTempSkipped(J.i9.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(l){let u=rt;rt=this;try{return l()}finally{rt=u}}withoutTempSkipped(l){for(let u;u=this.tempSkipped.pop();)l=Ve(l,u.from,u.to);return l}changes(l,u){let{fragments:b,tree:M,treeLen:O,viewport:L,skipped:H}=this;if(this.takeTree(),!l.empty){let V=[];if(l.iterChangedRanges((ae,we,xt,tn)=>V.push({fromA:ae,toA:we,fromB:xt,toB:tn})),b=J.i9.applyChanges(b,V),M=J.mp.empty,O=0,L={from:l.mapPos(L.from,-1),to:l.mapPos(L.to,1)},this.skipped.length){H=[];for(let ae of this.skipped){let we=l.mapPos(ae.from,1),xt=l.mapPos(ae.to,-1);we<xt&&H.push({from:we,to:xt})}}}return new st(this.parser,u,b,M,O,L,H,this.scheduleOn)}updateViewport(l){if(this.viewport.from==l.from&&this.viewport.to==l.to)return!1;this.viewport=l;let u=this.skipped.length;for(let b=0;b<this.skipped.length;b++){let{from:M,to:O}=this.skipped[b];M<l.to&&O>l.from&&(this.fragments=Ve(this.fragments,M,O),this.skipped.splice(b--,1))}return this.skipped.length>=u?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(l,u){this.skipped.push({from:l,to:u})}static getSkippingParser(l){return new class extends J._b{createParse(u,b,M){let O=M[0].from,L=M[M.length-1].to;return{parsedPos:O,advance(){let V=rt;if(V){for(let ae of M)V.tempSkipped.push(ae);l&&(V.scheduleOn=V.scheduleOn?Promise.all([V.scheduleOn,l]):l)}return this.parsedPos=L,new J.mp(J.Jq.none,[],[],L-O)},stoppedAt:null,stopAt(){}}}}}isDone(l){l=Math.min(l,this.state.doc.length);let u=this.fragments;return this.treeLen>=l&&u.length&&u[0].from==0&&u[0].to>=l}static get(){return rt}}function Ve(y,l,u){return J.i9.applyChanges(y,[{fromA:l,toA:u,fromB:l,toB:u}])}class je{constructor(l){this.context=l,this.tree=l.tree}apply(l){if(!l.docChanged&&this.tree==this.context.tree)return this;let u=this.context.changes(l.changes,l.state),b=this.context.treeLen==l.startState.doc.length?void 0:Math.max(l.changes.mapPos(this.context.treeLen),u.viewport.to);return u.work(20,b)||u.takeTree(),new je(u)}static init(l){let u=Math.min(3e3,l.doc.length),b=st.create(l.facet(et).parser,l,{from:0,to:u});return b.work(20,u)||b.takeTree(),new je(b)}}ce.state=ie.QQ.define({create:je.init,update(y,l){for(let u of l.effects)if(u.is(ce.setState))return u.value;return l.startState.facet(et)!=l.state.facet(et)?je.init(l.state):y.apply(l)}});let gt=y=>{let l=setTimeout(()=>y(),500);return()=>clearTimeout(l)};typeof requestIdleCallback!="undefined"&&(gt=y=>{let l=-1,u=setTimeout(()=>{l=requestIdleCallback(y,{timeout:400})},100);return()=>l<0?clearTimeout(u):cancelIdleCallback(l)});const ut=typeof navigator!="undefined"&&(!((xe=navigator.scheduling)===null||xe===void 0)&&xe.isInputPending)?()=>navigator.scheduling.isInputPending():null,ct=Q.lg.fromClass(class{constructor(l){this.view=l,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(l){let u=this.view.state.field(ce.state).context;(u.updateViewport(l.view.viewport)||this.view.viewport.to>u.treeLen)&&this.scheduleWork(),(l.docChanged||l.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(u)}scheduleWork(){if(this.working)return;let{state:l}=this.view,u=l.field(ce.state);(u.tree!=u.context.tree||!u.context.isDone(l.doc.length))&&(this.working=gt(this.work))}work(l){this.working=null;let u=Date.now();if(this.chunkEnd<u&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=u+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:b,viewport:{to:M}}=this.view,O=b.field(ce.state);if(O.tree==O.context.tree&&O.context.isDone(M+1e5))return;let L=Date.now()+Math.min(this.chunkBudget,100,l&&!ut?Math.max(25,l.timeRemaining()-5):1e9),H=O.context.treeLen<M&&b.doc.length>M+1e3,V=O.context.work(()=>ut&&ut()||Date.now()>L,M+(H?0:1e5));this.chunkBudget-=Date.now()-u,(V||this.chunkBudget<=0)&&(O.context.takeTree(),this.view.dispatch({effects:ce.setState.of(new je(O.context))})),this.chunkBudget>0&&!(V&&!H)&&this.scheduleWork(),this.checkAsyncSchedule(O.context)}checkAsyncSchedule(l){l.scheduleOn&&(this.workScheduled++,l.scheduleOn.then(()=>this.scheduleWork()).catch(u=>(0,Q.OO)(this.view.state,u)).then(()=>this.workScheduled--),l.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),et=ie.r$.define({combine(y){return y.length?y[0]:null},enables:y=>[ce.state,ct,Q.tk.contentAttributes.compute([y],l=>{let u=l.facet(y);return u&&u.name?{"data-language":u.name}:{}})]});class pt{constructor(l,u=[]){this.language=l,this.support=u,this.extension=[l,u]}}class yt{constructor(l,u,b,M,O,L=void 0){this.name=l,this.alias=u,this.extensions=b,this.filename=M,this.loadFunc=O,this.support=L,this.loading=null}load(){return this.loading||(this.loading=this.loadFunc().then(l=>this.support=l,l=>{throw this.loading=null,l}))}static of(l){let{load:u,support:b}=l;if(!u){if(!b)throw new RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");u=()=>Promise.resolve(b)}return new yt(l.name,(l.alias||[]).concat(l.name).map(M=>M.toLowerCase()),l.extensions||[],l.filename,u,b)}static matchFilename(l,u){for(let M of l)if(M.filename&&M.filename.test(u))return M;let b=/\.([^.]+)$/.exec(u);if(b){for(let M of l)if(M.extensions.indexOf(b[1])>-1)return M}return null}static matchLanguageName(l,u,b=!0){u=u.toLowerCase();for(let M of l)if(M.alias.some(O=>O==u))return M;if(b)for(let M of l)for(let O of M.alias){let L=u.indexOf(O);if(L>-1&&(O.length>2||!/\w/.test(u[L-1])&&!/\w/.test(u[L+O.length])))return M}return null}}const Ut=ie.r$.define(),ht=ie.r$.define({combine:y=>{if(!y.length)return"  ";let l=y[0];if(!l||/\S/.test(l)||Array.from(l).some(u=>u!=l[0]))throw new Error("Invalid indent unit: "+JSON.stringify(y[0]));return l}});function tt(y){let l=y.facet(ht);return l.charCodeAt(0)==9?y.tabSize*l.length:l.length}function j(y,l){let u="",b=y.tabSize,M=y.facet(ht)[0];if(M=="	"){for(;l>=b;)u+="	",l-=b;M=" "}for(let O=0;O<l;O++)u+=M;return u}function ke(y,l){y instanceof ie.yy&&(y=new W(y));for(let b of y.state.facet(Ut)){let M=b(y,l);if(M!==void 0)return M}let u=Se(y.state);return u.length>=l?le(y,u,l):null}function re(y,l,u){let b=Object.create(null),M=new W(y,{overrideIndentation:L=>{var H;return(H=b[L])!==null&&H!==void 0?H:-1}}),O=[];for(let L=l;L<=u;){let H=y.doc.lineAt(L);L=H.to+1;let V=ke(M,H.from);if(V==null)continue;/\S/.test(H.text)||(V=0);let ae=/^\s*/.exec(H.text)[0],we=j(y,V);ae!=we&&(b[H.from]=V,O.push({from:H.from,to:H.from+ae.length,insert:we}))}return y.changes(O)}class W{constructor(l,u={}){this.state=l,this.options=u,this.unit=tt(l)}lineAt(l,u=1){let b=this.state.doc.lineAt(l),{simulateBreak:M,simulateDoubleBreak:O}=this.options;return M!=null&&M>=b.from&&M<=b.to?O&&M==l?{text:"",from:l}:(u<0?M<l:M<=l)?{text:b.text.slice(M-b.from),from:M}:{text:b.text.slice(0,M-b.from),from:b.from}:b}textAfterPos(l,u=1){if(this.options.simulateDoubleBreak&&l==this.options.simulateBreak)return"";let{text:b,from:M}=this.lineAt(l,u);return b.slice(l-M,Math.min(b.length,l+100-M))}column(l,u=1){let{text:b,from:M}=this.lineAt(l,u),O=this.countColumn(b,l-M),L=this.options.overrideIndentation?this.options.overrideIndentation(M):-1;return L>-1&&(O+=L-this.countColumn(b,b.search(/\S|$/))),O}countColumn(l,u=l.length){return(0,ie.IS)(l,this.state.tabSize,u)}lineIndent(l,u=1){let{text:b,from:M}=this.lineAt(l,u),O=this.options.overrideIndentation;if(O){let L=O(M);if(L>-1)return L}return this.countColumn(b,b.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const G=new J.md;function le(y,l,u){let b=l.resolveStack(u),M=l.resolveInner(u,-1).resolve(u,0).enterUnfinishedNodesBefore(u);if(M!=b.node){let O=[];for(let L=M;L&&!(L.from<b.node.from||L.to>b.node.to||L.from==b.node.from&&L.type==b.node.type);L=L.parent)O.push(L);for(let L=O.length-1;L>=0;L--)b={node:O[L],next:b}}return ee(b,y,u)}function ee(y,l,u){for(let b=y;b;b=b.next){let M=Be(b.node);if(M)return M(ve.create(l,u,b))}return 0}function pe(y){return y.pos==y.options.simulateBreak&&y.options.simulateDoubleBreak}function Be(y){let l=y.type.prop(G);if(l)return l;let u=y.firstChild,b;if(u&&(b=u.type.prop(J.md.closedBy))){let M=y.lastChild,O=M&&b.indexOf(M.name)>-1;return L=>Ge(L,!0,1,void 0,O&&!pe(L)?M.from:void 0)}return y.parent==null?De:null}function De(){return 0}class ve extends W{constructor(l,u,b){super(l.state,l.options),this.base=l,this.pos=u,this.context=b}get node(){return this.context.node}static create(l,u,b){return new ve(l,u,b)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(l){let u=this.state.doc.lineAt(l.from);for(;;){let b=l.resolve(u.from);for(;b.parent&&b.parent.from==b.from;)b=b.parent;if(Te(b,l))break;u=this.state.doc.lineAt(b.from)}return this.lineIndent(u.from)}continue(){return ee(this.context.next,this.base,this.pos)}}function Te(y,l){for(let u=l;u;u=u.parent)if(y==u)return!0;return!1}function Re(y){let l=y.node,u=l.childAfter(l.from),b=l.lastChild;if(!u)return null;let M=y.options.simulateBreak,O=y.state.doc.lineAt(u.from),L=M==null||M<=O.from?O.to:Math.min(O.to,M);for(let H=u.to;;){let V=l.childAfter(H);if(!V||V==b)return null;if(!V.type.isSkipped){if(V.from>=L)return null;let ae=/^ */.exec(O.text.slice(u.to-O.from))[0].length;return{from:u.from,to:u.to+ae}}H=V.to}}function Ne({closing:y,align:l=!0,units:u=1}){return b=>Ge(b,l,u,y)}function Ge(y,l,u,b,M){let O=y.textAfter,L=O.match(/^\s*/)[0].length,H=b&&O.slice(L,L+b.length)==b||M==y.pos+L,V=l?Re(y):null;return V?H?y.column(V.from):y.column(V.to):y.baseIndent+(H?0:y.unit*u)}const He=y=>y.baseIndent;function Jt({except:y,units:l=1}={}){return u=>{let b=y&&y.test(u.textAfter);return u.baseIndent+(b?0:l*u.unit)}}const Rt=200;function $(){return ie.yy.transactionFilter.of(y=>{if(!y.docChanged||!y.isUserEvent("input.type")&&!y.isUserEvent("input.complete"))return y;let l=y.startState.languageDataAt("indentOnInput",y.startState.selection.main.head);if(!l.length)return y;let u=y.newDoc,{head:b}=y.newSelection.main,M=u.lineAt(b);if(b>M.from+Rt)return y;let O=u.sliceString(M.from,b);if(!l.some(ae=>ae.test(O)))return y;let{state:L}=y,H=-1,V=[];for(let{head:ae}of L.selection.ranges){let we=L.doc.lineAt(ae);if(we.from==H)continue;H=we.from;let xt=ke(L,we.from);if(xt==null)continue;let tn=/^\s*/.exec(we.text)[0],Xt=j(L,xt);tn!=Xt&&V.push({from:we.from,to:we.from+tn.length,insert:Xt})}return V.length?[y,{changes:V,sequential:!0}]:y})}const d=ie.r$.define(),x=new J.md;function A(y){let l=y.firstChild,u=y.lastChild;return l&&l.to<u.from?{from:l.to,to:u.type.isError?y.to:u.from}:null}function I(y,l,u){let b=Se(y);if(b.length<u)return null;let M=b.resolveStack(u,1),O=null;for(let L=M;L;L=L.next){let H=L.node;if(H.to<=u||H.from>u)continue;if(O&&H.from<l)break;let V=H.type.prop(x);if(V&&(H.to<b.length-50||b.length==y.doc.length||!E(H))){let ae=V(H,y);ae&&ae.from<=u&&ae.from>=l&&ae.to>u&&(O=ae)}}return O}function E(y){let l=y.lastChild;return l&&l.to==y.to&&l.type.isError}function _(y,l,u){for(let b of y.facet(d)){let M=b(y,l,u);if(M)return M}return I(y,l,u)}function U(y,l){let u=l.mapPos(y.from,1),b=l.mapPos(y.to,-1);return u>=b?void 0:{from:u,to:b}}const Y=ie.Py.define({map:U}),ue=ie.Py.define({map:U});function ye(y){let l=[];for(let{head:u}of y.state.selection.ranges)l.some(b=>b.from<=u&&b.to>=u)||l.push(y.lineBlockAt(u));return l}const me=ie.QQ.define({create(){return Q.p.none},update(y,l){l.isUserEvent("delete")&&l.changes.iterChangedRanges((u,b)=>y=be(y,u,b)),y=y.map(l.changes);for(let u of l.effects)if(u.is(Y)&&!vt(y,u.value.from,u.value.to)){let{preparePlaceholder:b}=l.state.facet(at),M=b?Q.p.replace({widget:new ft(b(l.state,u.value))}):nt;y=y.update({add:[M.range(u.value.from,u.value.to)]})}else u.is(ue)&&(y=y.update({filter:(b,M)=>u.value.from!=b||u.value.to!=M,filterFrom:u.value.from,filterTo:u.value.to}));return l.selection&&(y=be(y,l.selection.main.head)),y},provide:y=>Q.tk.decorations.from(y),toJSON(y,l){let u=[];return y.between(0,l.doc.length,(b,M)=>{u.push(b,M)}),u},fromJSON(y){if(!Array.isArray(y)||y.length%2)throw new RangeError("Invalid JSON for fold state");let l=[];for(let u=0;u<y.length;){let b=y[u++],M=y[u++];if(typeof b!="number"||typeof M!="number")throw new RangeError("Invalid JSON for fold state");l.push(nt.range(b,M))}return Q.p.set(l,!0)}});function be(y,l,u=l){let b=!1;return y.between(l,u,(M,O)=>{M<u&&O>l&&(b=!0)}),b?y.update({filterFrom:l,filterTo:u,filter:(M,O)=>M>=u||O<=l}):y}function Je(y){return y.field(me,!1)||RangeSet.empty}function ze(y,l,u){var b;let M=null;return(b=y.field(me,!1))===null||b===void 0||b.between(l,u,(O,L)=>{(!M||M.from>O)&&(M={from:O,to:L})}),M}function vt(y,l,u){let b=!1;return y.between(l,l,(M,O)=>{M==l&&O==u&&(b=!0)}),b}function Ze(y,l){return y.field(me,!1)?l:l.concat(ie.Py.appendConfig.of(Ue()))}const Bt=y=>{for(let l of ye(y)){let u=_(y.state,l.from,l.to);if(u)return y.dispatch({effects:Ze(y.state,[Y.of(u),ot(y,u)])}),!0}return!1},mt=y=>{if(!y.state.field(me,!1))return!1;let l=[];for(let u of ye(y)){let b=ze(y.state,u.from,u.to);b&&l.push(ue.of(b),ot(y,b,!1))}return l.length&&y.dispatch({effects:l}),l.length>0};function ot(y,l,u=!0){let b=y.state.doc.lineAt(l.from).number,M=y.state.doc.lineAt(l.to).number;return Q.tk.announce.of(`${y.state.phrase(u?"Folded lines":"Unfolded lines")} ${b} ${y.state.phrase("to")} ${M}.`)}const It=y=>{let{state:l}=y,u=[];for(let b=0;b<l.doc.length;){let M=y.lineBlockAt(b),O=_(l,M.from,M.to);O&&u.push(Y.of(O)),b=(O?y.lineBlockAt(O.to):M).to+1}return u.length&&y.dispatch({effects:Ze(y.state,u)}),!!u.length},Ye=y=>{let l=y.state.field(me,!1);if(!l||!l.size)return!1;let u=[];return l.between(0,y.state.doc.length,(b,M)=>{u.push(ue.of({from:b,to:M}))}),y.dispatch({effects:u}),!0};function dt(y,l){for(let u=l;;){let b=_(y.state,u.from,u.to);if(b&&b.to>l.from)return b;if(!u.from)return null;u=y.lineBlockAt(u.from-1)}}const fe=y=>{let l=[];for(let u of ye(y)){let b=ze(y.state,u.from,u.to);if(b)l.push(ue.of(b),ot(y,b,!1));else{let M=dt(y,u);M&&l.push(Y.of(M),ot(y,M))}}return l.length>0&&y.dispatch({effects:Ze(y.state,l)}),!!l.length},$e=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:Bt},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:mt},{key:"Ctrl-Alt-[",run:It},{key:"Ctrl-Alt-]",run:Ye}],lt={placeholderDOM:null,preparePlaceholder:null,placeholderText:"\u2026"},at=ie.r$.define({combine(y){return(0,ie.BO)(y,lt)}});function Ue(y){let l=[me,qt];return y&&l.push(at.of(y)),l}function Ae(y,l){let{state:u}=y,b=u.facet(at),M=L=>{let H=y.lineBlockAt(y.posAtDOM(L.target)),V=ze(y.state,H.from,H.to);V&&y.dispatch({effects:ue.of(V)}),L.preventDefault()};if(b.placeholderDOM)return b.placeholderDOM(y,M,l);let O=document.createElement("span");return O.textContent=b.placeholderText,O.setAttribute("aria-label",u.phrase("folded code")),O.title=u.phrase("unfold"),O.className="cm-foldPlaceholder",O.onclick=M,O}const nt=Q.p.replace({widget:new class extends Q.l9{toDOM(y){return Ae(y,null)}}});class ft extends Q.l9{constructor(l){super(),this.value=l}eq(l){return this.value==l.value}toDOM(l){return Ae(l,this.value)}}const Ct={openText:"\u2304",closedText:"\u203A",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class Mt extends Q.SJ{constructor(l,u){super(),this.config=l,this.open=u}eq(l){return this.config==l.config&&this.open==l.open}toDOM(l){if(this.config.markerDOM)return this.config.markerDOM(this.open);let u=document.createElement("span");return u.textContent=this.open?this.config.openText:this.config.closedText,u.title=l.state.phrase(this.open?"Fold line":"Unfold line"),u}}function Nt(y={}){let l=mn(mn({},Ct),y),u=new Mt(l,!0),b=new Mt(l,!1),M=Q.lg.fromClass(class{constructor(L){this.from=L.viewport.from,this.markers=this.buildMarkers(L)}update(L){(L.docChanged||L.viewportChanged||L.startState.facet(et)!=L.state.facet(et)||L.startState.field(me,!1)!=L.state.field(me,!1)||Se(L.startState)!=Se(L.state)||l.foldingChanged(L))&&(this.markers=this.buildMarkers(L.view))}buildMarkers(L){let H=new ie.f_;for(let V of L.viewportLineBlocks){let ae=ze(L.state,V.from,V.to)?b:_(L.state,V.from,V.to)?u:null;ae&&H.add(V.from,V.from,ae)}return H.finish()}}),{domEventHandlers:O}=l;return[M,(0,Q.v5)({class:"cm-foldGutter",markers(L){var H;return((H=L.plugin(M))===null||H===void 0?void 0:H.markers)||ie.Xs.empty},initialSpacer(){return new Mt(l,!1)},domEventHandlers:Rn(mn({},O),{click:(L,H,V)=>{if(O.click&&O.click(L,H,V))return!0;let ae=ze(L.state,H.from,H.to);if(ae)return L.dispatch({effects:ue.of(ae)}),!0;let we=_(L.state,H.from,H.to);return we?(L.dispatch({effects:Y.of(we)}),!0):!1}})}),Ue()]}const qt=Q.tk.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Et{constructor(l,u){this.specs=l;let b;function M(H){let V=K.V.newName();return(b||(b=Object.create(null)))["."+V]=H,V}const O=typeof u.all=="string"?u.all:u.all?M(u.all):void 0,L=u.scope;this.scope=L instanceof ce?H=>H.prop(_e)==L.data:L?H=>H==L:void 0,this.style=(0,D.QR)(l.map(H=>({tag:H.tag,class:H.class||M(Object.assign({},H,{tag:null}))})),{all:O}).style,this.module=b?new K.V(b):null,this.themeType=u.themeType}static define(l,u){return new Et(l,u||{})}}const rn=ie.r$.define(),Ot=ie.r$.define({combine(y){return y.length?[y[0]]:null}});function Me(y){let l=y.facet(rn);return l.length?l:y.facet(Ot)}function bt(y,l){let u=[_t],b;return y instanceof Et&&(y.module&&u.push(Q.tk.styleModule.of(y.module)),b=y.themeType),l!=null&&l.fallback?u.push(Ot.of(y)):b?u.push(rn.computeN([Q.tk.darkTheme],M=>M.facet(Q.tk.darkTheme)==(b=="dark")?[y]:[])):u.push(rn.of(y)),u}function $t(y,l,u){let b=Me(y),M=null;if(b){for(let O of b)if(!O.scope||u&&O.scope(u)){let L=O.style(l);L&&(M=M?M+" "+L:L)}}return M}class Vt{constructor(l){this.markCache=Object.create(null),this.tree=Se(l.state),this.decorations=this.buildDeco(l,Me(l.state)),this.decoratedTo=l.viewport.to}update(l){let u=Se(l.state),b=Me(l.state),M=b!=Me(l.startState),{viewport:O}=l.view,L=l.changes.mapPos(this.decoratedTo,1);u.length<O.to&&!M&&u.type==this.tree.type&&L>=O.to?(this.decorations=this.decorations.map(l.changes),this.decoratedTo=L):(u!=this.tree||l.viewportChanged||M)&&(this.tree=u,this.decorations=this.buildDeco(l.view,b),this.decoratedTo=O.to)}buildDeco(l,u){if(!u||!this.tree.length)return Q.p.none;let b=new ie.f_;for(let{from:M,to:O}of l.visibleRanges)(0,D.bW)(this.tree,u,(L,H,V)=>{b.add(L,H,this.markCache[V]||(this.markCache[V]=Q.p.mark({class:V})))},M,O);return b.finish()}}const _t=ie.Wl.high(Q.lg.fromClass(Vt,{decorations:y=>y.decorations})),en=Et.define([{tag:D.pJ.meta,color:"#404740"},{tag:D.pJ.link,textDecoration:"underline"},{tag:D.pJ.heading,textDecoration:"underline",fontWeight:"bold"},{tag:D.pJ.emphasis,fontStyle:"italic"},{tag:D.pJ.strong,fontWeight:"bold"},{tag:D.pJ.strikethrough,textDecoration:"line-through"},{tag:D.pJ.keyword,color:"#708"},{tag:[D.pJ.atom,D.pJ.bool,D.pJ.url,D.pJ.contentSeparator,D.pJ.labelName],color:"#219"},{tag:[D.pJ.literal,D.pJ.inserted],color:"#164"},{tag:[D.pJ.string,D.pJ.deleted],color:"#a11"},{tag:[D.pJ.regexp,D.pJ.escape,D.pJ.special(D.pJ.string)],color:"#e40"},{tag:D.pJ.definition(D.pJ.variableName),color:"#00f"},{tag:D.pJ.local(D.pJ.variableName),color:"#30a"},{tag:[D.pJ.typeName,D.pJ.namespace],color:"#085"},{tag:D.pJ.className,color:"#167"},{tag:[D.pJ.special(D.pJ.variableName),D.pJ.macroName],color:"#256"},{tag:D.pJ.definition(D.pJ.propertyName),color:"#00c"},{tag:D.pJ.comment,color:"#940"},{tag:D.pJ.invalid,color:"#f00"}]),un=Q.tk.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),Dt=1e4,gn="()[]{}",cn=ie.r$.define({combine(y){return(0,ie.BO)(y,{afterCursor:!0,brackets:gn,maxScanDistance:Dt,renderMatch:Kt})}}),An=Q.p.mark({class:"cm-matchingBracket"}),Lt=Q.p.mark({class:"cm-nonmatchingBracket"});function Kt(y){let l=[],u=y.matched?An:Lt;return l.push(u.range(y.start.from,y.start.to)),y.end&&l.push(u.range(y.end.from,y.end.to)),l}const on=[ie.QQ.define({create(){return Q.p.none},update(y,l){if(!l.docChanged&&!l.selection)return y;let u=[],b=l.state.facet(cn);for(let M of l.state.selection.ranges){if(!M.empty)continue;let O=Gt(l.state,M.head,-1,b)||M.head>0&&Gt(l.state,M.head-1,1,b)||b.afterCursor&&(Gt(l.state,M.head,1,b)||M.head<l.state.doc.length&&Gt(l.state,M.head+1,-1,b));O&&(u=u.concat(b.renderMatch(O,l.state)))}return Q.p.set(u,!0)},provide:y=>Q.tk.decorations.from(y)}),un];function Tn(y={}){return[cn.of(y),on]}const yn=new J.md;function hn(y,l,u){let b=y.prop(l<0?J.md.openedBy:J.md.closedBy);if(b)return b;if(y.name.length==1){let M=u.indexOf(y.name);if(M>-1&&M%2==(l<0?1:0))return[u[M+l]]}return null}function ln(y){let l=y.type.prop(yn);return l?l(y.node):y}function Gt(y,l,u,b={}){let M=b.maxScanDistance||Dt,O=b.brackets||gn,L=Se(y),H=L.resolveInner(l,u);for(let V=H;V;V=V.parent){let ae=hn(V.type,u,O);if(ae&&V.from<V.to){let we=ln(V);if(we&&(u>0?l>=we.from&&l<we.to:l>we.from&&l<=we.to))return vn(y,l,u,V,we,ae,O)}}return In(y,l,u,L,H.type,M,O)}function vn(y,l,u,b,M,O,L){let H=b.parent,V={from:M.from,to:M.to},ae=0,we=H==null?void 0:H.cursor();if(we&&(u<0?we.childBefore(b.from):we.childAfter(b.to)))do if(u<0?we.to<=b.from:we.from>=b.to){if(ae==0&&O.indexOf(we.type.name)>-1&&we.from<we.to){let xt=ln(we);return{start:V,end:xt?{from:xt.from,to:xt.to}:void 0,matched:!0}}else if(hn(we.type,u,L))ae++;else if(hn(we.type,-u,L)){if(ae==0){let xt=ln(we);return{start:V,end:xt&&xt.from<xt.to?{from:xt.from,to:xt.to}:void 0,matched:!1}}ae--}}while(u<0?we.prevSibling():we.nextSibling());return{start:V,matched:!1}}function In(y,l,u,b,M,O,L){let H=u<0?y.sliceDoc(l-1,l):y.sliceDoc(l,l+1),V=L.indexOf(H);if(V<0||V%2==0!=u>0)return null;let ae={from:u<0?l-1:l,to:u>0?l+1:l},we=y.doc.iterRange(l,u>0?y.doc.length:0),xt=0;for(let tn=0;!we.next().done&&tn<=O;){let Xt=we.value;u<0&&(tn+=Xt.length);let Mn=l+tn*u;for(let wn=u>0?0:Xt.length-1,gi=u>0?Xt.length:-1;wn!=gi;wn+=u){let Sn=L.indexOf(Xt[wn]);if(!(Sn<0||b.resolveInner(Mn+wn,1).type!=M))if(Sn%2==0==u>0)xt++;else{if(xt==1)return{start:ae,end:{from:Mn+wn,to:Mn+wn+1},matched:Sn>>1==V>>1};xt--}}u>0&&(tn+=Xt.length)}return we.done?{start:ae,matched:!1}:null}function S(y,l,u,b=0,M=0){l==null&&(l=y.search(/[^\s\u00a0]/),l==-1&&(l=y.length));let O=M;for(let L=b;L<l;L++)y.charCodeAt(L)==9?O+=u-O%u:O++;return O}class n{constructor(l,u,b,M){this.string=l,this.tabSize=u,this.indentUnit=b,this.overrideIndent=M,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(l){let u=this.string.charAt(this.pos),b;if(typeof l=="string"?b=u==l:b=u&&(l instanceof RegExp?l.test(u):l(u)),b)return++this.pos,u}eatWhile(l){let u=this.pos;for(;this.eat(l););return this.pos>u}eatSpace(){let l=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>l}skipToEnd(){this.pos=this.string.length}skipTo(l){let u=this.string.indexOf(l,this.pos);if(u>-1)return this.pos=u,!0}backUp(l){this.pos-=l}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=S(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var l;return(l=this.overrideIndent)!==null&&l!==void 0?l:S(this.string,null,this.tabSize)}match(l,u,b){if(typeof l=="string"){let M=L=>b?L.toLowerCase():L,O=this.string.substr(this.pos,l.length);return M(O)==M(l)?(u!==!1&&(this.pos+=l.length),!0):null}else{let M=this.string.slice(this.pos).match(l);return M&&M.index>0?null:(M&&u!==!1&&(this.pos+=M[0].length),M)}}current(){return this.string.slice(this.start,this.pos)}}function i(y){return{name:y.name||"",token:y.token,blankLine:y.blankLine||(()=>{}),startState:y.startState||(()=>!0),copyState:y.copyState||a,indent:y.indent||(()=>null),languageData:y.languageData||{},tokenTable:y.tokenTable||g,mergeTokens:y.mergeTokens!==!1}}function a(y){if(typeof y!="object")return y;let l={};for(let u in y){let b=y[u];l[u]=b instanceof Array?b.slice():b}return l}const p=new WeakMap;class k extends ce{constructor(l){let u=qe(l.languageData),b=i(l),M,O=new class extends J._b{createParse(L,H,V){return new s(M,L,H,V)}};super(u,O,[],l.name),this.topNode=Ke(u,this),M=this,this.streamParser=b,this.stateAfter=new J.md({perNode:!0}),this.tokenTable=l.tokenTable?new se(b.tokenTable):X}static define(l){return new k(l)}getIndent(l){let u,{overrideIndentation:b}=l.options;b&&(u=p.get(l.state),u!=null&&u<l.pos-1e4&&(u=void 0));let M=v(this,l.node.tree,l.node.from,l.node.from,u!=null?u:l.pos),O,L;if(M?(L=M.state,O=M.pos+1):(L=this.streamParser.startState(l.unit),O=l.node.from),l.pos-O>1e4)return null;for(;O<l.pos;){let V=l.state.doc.lineAt(O),ae=Math.min(l.pos,V.to);if(V.length){let we=b?b(V.from):-1,xt=new n(V.text,l.state.tabSize,l.unit,we<0?void 0:we);for(;xt.pos<ae-V.from;)f(this.streamParser.token,xt,L)}else this.streamParser.blankLine(L,l.unit);if(ae==l.pos)break;O=V.to+1}let H=l.lineAt(l.pos);return b&&u==null&&p.set(l.state,H.from),this.streamParser.indent(L,/^\s*(.*)/.exec(H.text)[1],l)}get allowsNesting(){return!1}}function v(y,l,u,b,M){let O=u>=b&&u+l.length<=M&&l.prop(y.stateAfter);if(O)return{state:y.streamParser.copyState(O),pos:u+l.length};for(let L=l.children.length-1;L>=0;L--){let H=l.children[L],V=u+l.positions[L],ae=H instanceof J.mp&&V<M&&v(y,H,V,b,M);if(ae)return ae}return null}function P(y,l,u,b,M){if(M&&u<=0&&b>=l.length)return l;!M&&u==0&&l.type==y.topNode&&(M=!0);for(let O=l.children.length-1;O>=0;O--){let L=l.positions[O],H=l.children[O],V;if(L<b&&H instanceof J.mp){if(!(V=P(y,H,u-L,b-L,M)))break;return M?new J.mp(l.type,l.children.slice(0,O).concat(V),l.positions.slice(0,O+1),L+V.length):V}}return null}function c(y,l,u,b,M){for(let O of l){let L=O.from+(O.openStart?25:0),H=O.to-(O.openEnd?25:0),V=L<=u&&H>u&&v(y,O.tree,0-O.offset,u,H),ae;if(V&&V.pos<=b&&(ae=P(y,O.tree,u+O.offset,V.pos+O.offset,!1)))return{state:V.state,tree:ae}}return{state:y.streamParser.startState(M?tt(M):4),tree:J.mp.empty}}class s{constructor(l,u,b,M){this.lang=l,this.input=u,this.fragments=b,this.ranges=M,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=M[M.length-1].to;let O=st.get(),L=M[0].from,{state:H,tree:V}=c(l,b,L,this.to,O==null?void 0:O.state);this.state=H,this.parsedPos=this.chunkStart=L+V.length;for(let ae=0;ae<V.children.length;ae++)this.chunks.push(V.children[ae]),this.chunkPos.push(V.positions[ae]);O&&this.parsedPos<O.viewport.from-1e5&&M.some(ae=>ae.from<=O.viewport.from&&ae.to>=O.viewport.from)&&(this.state=this.lang.streamParser.startState(tt(O.state)),O.skipUntilInView(this.parsedPos,O.viewport.from),this.parsedPos=O.viewport.from),this.moveRangeIndex()}advance(){let l=st.get(),u=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),b=Math.min(u,this.chunkStart+512);for(l&&(b=Math.min(b,l.viewport.to));this.parsedPos<b;)this.parseLine(l);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=u?this.finish():l&&this.parsedPos>=l.viewport.to?(l.skipUntilInView(this.parsedPos,u),this.finish()):null}stopAt(l){this.stoppedAt=l}lineAfter(l){let u=this.input.chunk(l);if(this.input.lineChunks)u==`
`&&(u="");else{let b=u.indexOf(`
`);b>-1&&(u=u.slice(0,b))}return l+u.length<=this.to?u:u.slice(0,this.to-l)}nextLine(){let l=this.parsedPos,u=this.lineAfter(l),b=l+u.length;for(let M=this.rangeIndex;;){let O=this.ranges[M].to;if(O>=b||(u=u.slice(0,O-(b-u.length)),M++,M==this.ranges.length))break;let L=this.ranges[M].from,H=this.lineAfter(L);u+=H,b=L+H.length}return{line:u,end:b}}skipGapsTo(l,u,b){for(;;){let M=this.ranges[this.rangeIndex].to,O=l+u;if(b>0?M>O:M>=O)break;let L=this.ranges[++this.rangeIndex].from;u+=L-M}return u}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(l,u,b,M){let O=4;if(this.ranges.length>1){M=this.skipGapsTo(u,M,1),u+=M;let H=this.chunk.length;M=this.skipGapsTo(b,M,-1),b+=M,O+=this.chunk.length-H}let L=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&O==4&&L>=0&&this.chunk[L]==l&&this.chunk[L+2]==u?this.chunk[L+2]=b:this.chunk.push(l,u,b,O),M}parseLine(l){let{line:u,end:b}=this.nextLine(),M=0,{streamParser:O}=this.lang,L=new n(u,l?l.state.tabSize:4,l?tt(l.state):2);if(L.eol())O.blankLine(this.state,L.indentUnit);else for(;!L.eol();){let H=f(O.token,L,this.state);if(H&&(M=this.emitToken(this.lang.tokenTable.resolve(H),this.parsedPos+L.start,this.parsedPos+L.pos,M)),L.start>1e4)break}this.parsedPos=b,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let l=J.mp.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:T,topID:0,maxBufferLength:512,reused:this.chunkReused});l=new J.mp(l.type,l.children,l.positions,l.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(l),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new J.mp(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function f(y,l,u){l.start=l.pos;for(let b=0;b<10;b++){let M=y(l,u);if(l.pos>l.start)return M}throw new Error("Stream parser failed to advance stream.")}const g=Object.create(null),w=[J.Jq.none],T=new J.Lj(w),R=[],z=Object.create(null),F=Object.create(null);for(let[y,l]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])F[y]=We(g,l);class se{constructor(l){this.extra=l,this.table=Object.assign(Object.create(null),F)}resolve(l){return l?this.table[l]||(this.table[l]=We(this.extra,l)):0}}const X=new se(g);function oe(y,l){R.indexOf(y)>-1||(R.push(y),console.warn(l))}function We(y,l){let u=[];for(let H of l.split(" ")){let V=[];for(let ae of H.split(".")){let we=y[ae]||D.pJ[ae];we?typeof we=="function"?V.length?V=V.map(we):oe(ae,`Modifier ${ae} used at start of tag`):V.length?oe(ae,`Tag ${ae} used as modifier`):V=Array.isArray(we)?we:[we]:oe(ae,`Unknown highlighting tag ${ae}`)}for(let ae of V)u.push(ae)}if(!u.length)return 0;let b=l.replace(/ /g,"_"),M=b+" "+u.map(H=>H.id),O=z[M];if(O)return O.id;let L=z[M]=J.Jq.define({id:w.length,name:b,props:[(0,D.Gv)({[b]:u})]});return w.push(L),L.id}function Ke(y,l){let u=J.Jq.define({id:w.length,name:"Document",props:[_e.add(()=>y),G.add(()=>b=>l.getIndent(b))],top:!0});return w.push(u),u}function At(y){return y.length<=4096&&/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/.test(y)}function Ft(y){for(let l=y.iter();!l.next().done;)if(At(l.value))return!0;return!1}function xn(y){let l=!1;return y.iterChanges((u,b,M,O,L)=>{!l&&Ft(L)&&(l=!0)}),l}const Zt=ie.r$.define({combine:y=>y.some(l=>l)});function Tt(y={}){let l=[fn];return y.alwaysIsolate&&l.push(Zt.of(!0)),l}const fn=Q.lg.fromClass(class{constructor(y){this.always=y.state.facet(Zt)||y.textDirection!=Q.Nm.LTR||y.state.facet(Q.tk.perLineTextDirection),this.hasRTL=!this.always&&Ft(y.state.doc),this.tree=Se(y.state),this.decorations=this.always||this.hasRTL?Yt(y,this.tree,this.always):Q.p.none}update(y){let l=y.state.facet(Zt)||y.view.textDirection!=Q.Nm.LTR||y.state.facet(Q.tk.perLineTextDirection);if(!l&&!this.hasRTL&&xn(y.changes)&&(this.hasRTL=!0),!l&&!this.hasRTL)return;let u=Se(y.state);(l!=this.always||u!=this.tree||y.docChanged||y.viewportChanged)&&(this.tree=u,this.always=l,this.decorations=Yt(y.view,u,l))}},{provide:y=>{function l(u){var b,M;return(M=(b=u.plugin(y))===null||b===void 0?void 0:b.decorations)!==null&&M!==void 0?M:Q.p.none}return[Q.tk.outerDecorations.of(l),ie.Wl.lowest(Q.tk.bidiIsolatedRanges.of(l))]}});function Yt(y,l,u){let b=new ie.f_,M=y.visibleRanges;u||(M=zt(M,y.state.doc));for(let{from:O,to:L}of M)l.iterate({enter:H=>{let V=H.type.prop(J.md.isolate);V&&b.add(H.from,H.to,bn[V])},from:O,to:L});return b.finish()}function zt(y,l){let u=l.iter(),b=0,M=[],O=null;for(let{from:L,to:H}of y)if(!(O&&O.to>L&&(L=O.to,L>=H)))for(b+u.value.length<L&&(u.next(L-(b+u.value.length)),b=L);;){let V=b,ae=b+u.value.length;if(!u.lineBreak&&At(u.value)&&(O&&O.to>V-10?O.to=Math.min(H,ae):M.push(O={from:V,to:Math.min(H,ae)})),ae>=H)break;b=ae,u.next()}return M}const bn={rtl:Q.p.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"rtl"},bidiIsolate:Q.Nm.RTL}),ltr:Q.p.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"ltr"},bidiIsolate:Q.Nm.LTR}),auto:Q.p.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"auto"},bidiIsolate:null})}},37205:function(Wt,Xe,ne){ne.d(Xe,{q6:function(){return It},n0:function(){return ke},as:function(){return re},D0:function(){return Nt},jT:function(){return ve},yy:function(){return Me},r$:function(){return Ne},gc:function(){return j},Wl:function(){return E},Xs:function(){return Dt},f_:function(){return cn},uU:function(){return $t},Py:function(){return fe},QQ:function(){return x},xv:function(){return he},YW:function(){return $e},gm:function(){return yt},nZ:function(){return ht},BO:function(){return bt},IS:function(){return vn},cp:function(){return ct},Gz:function(){return In},bg:function(){return Ut}});let J=[],ie=[];(()=>{let S="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(n=>n?parseInt(n,36):1);for(let n=0,i=0;n<S.length;n++)(n%2?ie:J).push(i=i+S[n])})();function Q(S){if(S<768)return!1;for(let n=0,i=J.length;;){let a=n+i>>1;if(S<J[a])i=a;else if(S>=ie[a])n=a+1;else return!0;if(n==i)return!1}}function D(S){return S>=127462&&S<=127487}function K(S){for(let n=0;n<J.length;n++)if(ie[n]>S)return J[n]<=S;return!1}const xe=8205;function _e(S,n,i=!0,a=!0){return(i?qe:Pe)(S,n,a)}function qe(S,n,i){if(n==S.length)return n;n&&de(S.charCodeAt(n))&&Le(S.charCodeAt(n-1))&&n--;let a=ce(S,n);for(n+=Se(a);n<S.length;){let p=ce(S,n);if(a==xe||p==xe||i&&Q(p))n+=Se(p),a=p;else if(D(p)){let k=0,v=n-2;for(;v>=0&&D(ce(S,v));)k++,v-=2;if(k%2==0)break;n+=2}else break}return n}function Pe(S,n,i){for(;n>0;){let a=qe(S,n-2,i);if(a<n)return a;n--}return 0}function ce(S,n){let i=S.charCodeAt(n);if(!Le(i)||n+1==S.length)return i;let a=S.charCodeAt(n+1);return de(a)?(i-55296<<10)+(a-56320)+65536:i}function de(S){return S>=56320&&S<57344}function Le(S){return S>=55296&&S<56320}function Se(S){return S<65536?1:2}class he{lineAt(n){if(n<0||n>this.length)throw new RangeError(`Invalid position ${n} in document of length ${this.length}`);return this.lineInner(n,!1,1,0)}line(n){if(n<1||n>this.lines)throw new RangeError(`Invalid line number ${n} in ${this.lines}-line document`);return this.lineInner(n,!0,1,0)}replace(n,i,a){[n,i]=ut(this,n,i);let p=[];return this.decompose(0,n,p,2),a.length&&a.decompose(0,a.length,p,3),this.decompose(i,this.length,p,1),Ce.from(p,this.length-(i-n)+a.length)}append(n){return this.replace(this.length,this.length,n)}slice(n,i=this.length){[n,i]=ut(this,n,i);let a=[];return this.decompose(n,i,a,0),Ce.from(a,i-n)}eq(n){if(n==this)return!0;if(n.length!=this.length||n.lines!=this.lines)return!1;let i=this.scanIdentical(n,1),a=this.length-this.scanIdentical(n,-1),p=new st(this),k=new st(n);for(let v=i,P=i;;){if(p.next(v),k.next(v),v=0,p.lineBreak!=k.lineBreak||p.done!=k.done||p.value!=k.value)return!1;if(P+=p.value.length,p.done||P>=a)return!0}}iter(n=1){return new st(this,n)}iterRange(n,i=this.length){return new Ve(this,n,i)}iterLines(n,i){let a;if(n==null)a=this.iter();else{i==null&&(i=this.lines+1);let p=this.line(n).from;a=this.iterRange(p,Math.max(p,i==this.lines+1?this.length:i<=1?0:this.line(i-1).to))}return new je(a)}toString(){return this.sliceString(0)}toJSON(){let n=[];return this.flatten(n),n}constructor(){}static of(n){if(n.length==0)throw new RangeError("A document must have at least one line");return n.length==1&&!n[0]?he.empty:n.length<=32?new Oe(n):Ce.from(Oe.split(n,[]))}}class Oe extends he{constructor(n,i=q(n)){super(),this.text=n,this.length=i}get lines(){return this.text.length}get children(){return null}lineInner(n,i,a,p){for(let k=0;;k++){let v=this.text[k],P=p+v.length;if((i?a:P)>=n)return new gt(p,P,a,v);p=P+1,a++}}decompose(n,i,a,p){let k=n<=0&&i>=this.length?this:new Oe(rt(this.text,n,i),Math.min(i,this.length)-Math.max(0,n));if(p&1){let v=a.pop(),P=Ie(k.text,v.text.slice(),0,k.length);if(P.length<=32)a.push(new Oe(P,v.length+k.length));else{let c=P.length>>1;a.push(new Oe(P.slice(0,c)),new Oe(P.slice(c)))}}else a.push(k)}replace(n,i,a){if(!(a instanceof Oe))return super.replace(n,i,a);[n,i]=ut(this,n,i);let p=Ie(this.text,Ie(a.text,rt(this.text,0,n)),i),k=this.length+a.length-(i-n);return p.length<=32?new Oe(p,k):Ce.from(Oe.split(p,[]),k)}sliceString(n,i=this.length,a=`
`){[n,i]=ut(this,n,i);let p="";for(let k=0,v=0;k<=i&&v<this.text.length;v++){let P=this.text[v],c=k+P.length;k>n&&v&&(p+=a),n<c&&i>k&&(p+=P.slice(Math.max(0,n-k),i-k)),k=c+1}return p}flatten(n){for(let i of this.text)n.push(i)}scanIdentical(){return 0}static split(n,i){let a=[],p=-1;for(let k of n)a.push(k),p+=k.length+1,a.length==32&&(i.push(new Oe(a,p)),a=[],p=-1);return p>-1&&i.push(new Oe(a,p)),i}}class Ce extends he{constructor(n,i){super(),this.children=n,this.length=i,this.lines=0;for(let a of n)this.lines+=a.lines}lineInner(n,i,a,p){for(let k=0;;k++){let v=this.children[k],P=p+v.length,c=a+v.lines-1;if((i?c:P)>=n)return v.lineInner(n,i,a,p);p=P+1,a=c+1}}decompose(n,i,a,p){for(let k=0,v=0;v<=i&&k<this.children.length;k++){let P=this.children[k],c=v+P.length;if(n<=c&&i>=v){let s=p&((v<=n?1:0)|(c>=i?2:0));v>=n&&c<=i&&!s?a.push(P):P.decompose(n-v,i-v,a,s)}v=c+1}}replace(n,i,a){if([n,i]=ut(this,n,i),a.lines<this.lines)for(let p=0,k=0;p<this.children.length;p++){let v=this.children[p],P=k+v.length;if(n>=k&&i<=P){let c=v.replace(n-k,i-k,a),s=this.lines-v.lines+c.lines;if(c.lines<s>>4&&c.lines>s>>6){let f=this.children.slice();return f[p]=c,new Ce(f,this.length-(i-n)+a.length)}return super.replace(k,P,c)}k=P+1}return super.replace(n,i,a)}sliceString(n,i=this.length,a=`
`){[n,i]=ut(this,n,i);let p="";for(let k=0,v=0;k<this.children.length&&v<=i;k++){let P=this.children[k],c=v+P.length;v>n&&k&&(p+=a),n<c&&i>v&&(p+=P.sliceString(n-v,i-v,a)),v=c+1}return p}flatten(n){for(let i of this.children)i.flatten(n)}scanIdentical(n,i){if(!(n instanceof Ce))return 0;let a=0,[p,k,v,P]=i>0?[0,0,this.children.length,n.children.length]:[this.children.length-1,n.children.length-1,-1,-1];for(;;p+=i,k+=i){if(p==v||k==P)return a;let c=this.children[p],s=n.children[k];if(c!=s)return a+c.scanIdentical(s,i);a+=c.length+1}}static from(n,i=n.reduce((a,p)=>a+p.length+1,-1)){let a=0;for(let T of n)a+=T.lines;if(a<32){let T=[];for(let R of n)R.flatten(T);return new Oe(T,i)}let p=Math.max(32,a>>5),k=p<<1,v=p>>1,P=[],c=0,s=-1,f=[];function g(T){let R;if(T.lines>k&&T instanceof Ce)for(let z of T.children)g(z);else T.lines>v&&(c>v||!c)?(w(),P.push(T)):T instanceof Oe&&c&&(R=f[f.length-1])instanceof Oe&&T.lines+R.lines<=32?(c+=T.lines,s+=T.length+1,f[f.length-1]=new Oe(R.text.concat(T.text),R.length+1+T.length)):(c+T.lines>p&&w(),c+=T.lines,s+=T.length+1,f.push(T))}function w(){c!=0&&(P.push(f.length==1?f[0]:Ce.from(f,s)),s=-1,c=f.length=0)}for(let T of n)g(T);return w(),P.length==1?P[0]:new Ce(P,i)}}he.empty=new Oe([""],0);function q(S){let n=-1;for(let i of S)n+=i.length+1;return n}function Ie(S,n,i=0,a=1e9){for(let p=0,k=0,v=!0;k<S.length&&p<=a;k++){let P=S[k],c=p+P.length;c>=i&&(c>a&&(P=P.slice(0,a-p)),p<i&&(P=P.slice(i-p)),v?(n[n.length-1]+=P,v=!1):n.push(P)),p=c+1}return n}function rt(S,n,i){return Ie(S,[""],n,i)}class st{constructor(n,i=1){this.dir=i,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[n],this.offsets=[i>0?1:(n instanceof Oe?n.text.length:n.children.length)<<1]}nextInner(n,i){for(this.done=this.lineBreak=!1;;){let a=this.nodes.length-1,p=this.nodes[a],k=this.offsets[a],v=k>>1,P=p instanceof Oe?p.text.length:p.children.length;if(v==(i>0?P:0)){if(a==0)return this.done=!0,this.value="",this;i>0&&this.offsets[a-1]++,this.nodes.pop(),this.offsets.pop()}else if((k&1)==(i>0?0:1)){if(this.offsets[a]+=i,n==0)return this.lineBreak=!0,this.value=`
`,this;n--}else if(p instanceof Oe){let c=p.text[v+(i<0?-1:0)];if(this.offsets[a]+=i,c.length>Math.max(0,n))return this.value=n==0?c:i>0?c.slice(n):c.slice(0,c.length-n),this;n-=c.length}else{let c=p.children[v+(i<0?-1:0)];n>c.length?(n-=c.length,this.offsets[a]+=i):(i<0&&this.offsets[a]--,this.nodes.push(c),this.offsets.push(i>0?1:(c instanceof Oe?c.text.length:c.children.length)<<1))}}}next(n=0){return n<0&&(this.nextInner(-n,-this.dir),n=this.value.length),this.nextInner(n,this.dir)}}class Ve{constructor(n,i,a){this.value="",this.done=!1,this.cursor=new st(n,i>a?-1:1),this.pos=i>a?n.length:0,this.from=Math.min(i,a),this.to=Math.max(i,a)}nextInner(n,i){if(i<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;n+=Math.max(0,i<0?this.pos-this.to:this.from-this.pos);let a=i<0?this.pos-this.from:this.to-this.pos;n>a&&(n=a),a-=n;let{value:p}=this.cursor.next(n);return this.pos+=(p.length+n)*i,this.value=p.length<=a?p:i<0?p.slice(p.length-a):p.slice(0,a),this.done=!this.value,this}next(n=0){return n<0?n=Math.max(n,this.from-this.pos):n>0&&(n=Math.min(n,this.to-this.pos)),this.nextInner(n,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class je{constructor(n){this.inner=n,this.afterBreak=!0,this.value="",this.done=!1}next(n=0){let{done:i,lineBreak:a,value:p}=this.inner.next(n);return i&&this.afterBreak?(this.value="",this.afterBreak=!1):i?(this.done=!0,this.value=""):a?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=p,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol!="undefined"&&(he.prototype[Symbol.iterator]=function(){return this.iter()},st.prototype[Symbol.iterator]=Ve.prototype[Symbol.iterator]=je.prototype[Symbol.iterator]=function(){return this});class gt{constructor(n,i,a,p){this.from=n,this.to=i,this.number=a,this.text=p}get length(){return this.to-this.from}}function ut(S,n,i){return n=Math.max(0,Math.min(S.length,n)),[n,Math.max(n,Math.min(S.length,i))]}function ct(S,n,i=!0,a=!0){return _e(S,n,i,a)}function et(S){return S>=56320&&S<57344}function pt(S){return S>=55296&&S<56320}function yt(S,n){let i=S.charCodeAt(n);if(!pt(i)||n+1==S.length)return i;let a=S.charCodeAt(n+1);return et(a)?(i-55296<<10)+(a-56320)+65536:i}function Ut(S){return S<=65535?String.fromCharCode(S):(S-=65536,String.fromCharCode((S>>10)+55296,(S&1023)+56320))}function ht(S){return S<65536?1:2}const tt=/\r\n?|\n/;var j=function(S){return S[S.Simple=0]="Simple",S[S.TrackDel=1]="TrackDel",S[S.TrackBefore=2]="TrackBefore",S[S.TrackAfter=3]="TrackAfter",S}(j||(j={}));class ke{constructor(n){this.sections=n}get length(){let n=0;for(let i=0;i<this.sections.length;i+=2)n+=this.sections[i];return n}get newLength(){let n=0;for(let i=0;i<this.sections.length;i+=2){let a=this.sections[i+1];n+=a<0?this.sections[i]:a}return n}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(n){for(let i=0,a=0,p=0;i<this.sections.length;){let k=this.sections[i++],v=this.sections[i++];v<0?(n(a,p,k),p+=k):p+=v,a+=k}}iterChangedRanges(n,i=!1){le(this,n,i)}get invertedDesc(){let n=[];for(let i=0;i<this.sections.length;){let a=this.sections[i++],p=this.sections[i++];p<0?n.push(a,p):n.push(p,a)}return new ke(n)}composeDesc(n){return this.empty?n:n.empty?this:pe(this,n)}mapDesc(n,i=!1){return n.empty?this:ee(this,n,i)}mapPos(n,i=-1,a=j.Simple){let p=0,k=0;for(let v=0;v<this.sections.length;){let P=this.sections[v++],c=this.sections[v++],s=p+P;if(c<0){if(s>n)return k+(n-p);k+=P}else{if(a!=j.Simple&&s>=n&&(a==j.TrackDel&&p<n&&s>n||a==j.TrackBefore&&p<n||a==j.TrackAfter&&s>n))return null;if(s>n||s==n&&i<0&&!P)return n==p||i<0?k:k+c;k+=c}p=s}if(n>p)throw new RangeError(`Position ${n} is out of range for changeset of length ${p}`);return k}touchesRange(n,i=n){for(let a=0,p=0;a<this.sections.length&&p<=i;){let k=this.sections[a++],v=this.sections[a++],P=p+k;if(v>=0&&p<=i&&P>=n)return p<n&&P>i?"cover":!0;p=P}return!1}toString(){let n="";for(let i=0;i<this.sections.length;){let a=this.sections[i++],p=this.sections[i++];n+=(n?" ":"")+a+(p>=0?":"+p:"")}return n}toJSON(){return this.sections}static fromJSON(n){if(!Array.isArray(n)||n.length%2||n.some(i=>typeof i!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new ke(n)}static create(n){return new ke(n)}}class re extends ke{constructor(n,i){super(n),this.inserted=i}apply(n){if(this.length!=n.length)throw new RangeError("Applying change set to a document with the wrong length");return le(this,(i,a,p,k,v)=>n=n.replace(p,p+(a-i),v),!1),n}mapDesc(n,i=!1){return ee(this,n,i,!0)}invert(n){let i=this.sections.slice(),a=[];for(let p=0,k=0;p<i.length;p+=2){let v=i[p],P=i[p+1];if(P>=0){i[p]=P,i[p+1]=v;let c=p>>1;for(;a.length<c;)a.push(he.empty);a.push(v?n.slice(k,k+v):he.empty)}k+=v}return new re(i,a)}compose(n){return this.empty?n:n.empty?this:pe(this,n,!0)}map(n,i=!1){return n.empty?this:ee(this,n,i,!0)}iterChanges(n,i=!1){le(this,n,i)}get desc(){return ke.create(this.sections)}filter(n){let i=[],a=[],p=[],k=new Be(this);e:for(let v=0,P=0;;){let c=v==n.length?1e9:n[v++];for(;P<c||P==c&&k.len==0;){if(k.done)break e;let f=Math.min(k.len,c-P);W(p,f,-1);let g=k.ins==-1?-1:k.off==0?k.ins:0;W(i,f,g),g>0&&G(a,i,k.text),k.forward(f),P+=f}let s=n[v++];for(;P<s;){if(k.done)break e;let f=Math.min(k.len,s-P);W(i,f,-1),W(p,f,k.ins==-1?-1:k.off==0?k.ins:0),k.forward(f),P+=f}}return{changes:new re(i,a),filtered:ke.create(p)}}toJSON(){let n=[];for(let i=0;i<this.sections.length;i+=2){let a=this.sections[i],p=this.sections[i+1];p<0?n.push(a):p==0?n.push([a]):n.push([a].concat(this.inserted[i>>1].toJSON()))}return n}static of(n,i,a){let p=[],k=[],v=0,P=null;function c(f=!1){if(!f&&!p.length)return;v<i&&W(p,i-v,-1);let g=new re(p,k);P=P?P.compose(g.map(P)):g,p=[],k=[],v=0}function s(f){if(Array.isArray(f))for(let g of f)s(g);else if(f instanceof re){if(f.length!=i)throw new RangeError(`Mismatched change set length (got ${f.length}, expected ${i})`);c(),P=P?P.compose(f.map(P)):f}else{let{from:g,to:w=g,insert:T}=f;if(g>w||g<0||w>i)throw new RangeError(`Invalid change range ${g} to ${w} (in doc of length ${i})`);let R=T?typeof T=="string"?he.of(T.split(a||tt)):T:he.empty,z=R.length;if(g==w&&z==0)return;g<v&&c(),g>v&&W(p,g-v,-1),W(p,w-g,z),G(k,p,R),v=w}}return s(n),c(!P),P}static empty(n){return new re(n?[n,-1]:[],[])}static fromJSON(n){if(!Array.isArray(n))throw new RangeError("Invalid JSON representation of ChangeSet");let i=[],a=[];for(let p=0;p<n.length;p++){let k=n[p];if(typeof k=="number")i.push(k,-1);else{if(!Array.isArray(k)||typeof k[0]!="number"||k.some((v,P)=>P&&typeof v!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(k.length==1)i.push(k[0],0);else{for(;a.length<p;)a.push(he.empty);a[p]=he.of(k.slice(1)),i.push(k[0],a[p].length)}}}return new re(i,a)}static createSet(n,i){return new re(n,i)}}function W(S,n,i,a=!1){if(n==0&&i<=0)return;let p=S.length-2;p>=0&&i<=0&&i==S[p+1]?S[p]+=n:p>=0&&n==0&&S[p]==0?S[p+1]+=i:a?(S[p]+=n,S[p+1]+=i):S.push(n,i)}function G(S,n,i){if(i.length==0)return;let a=n.length-2>>1;if(a<S.length)S[S.length-1]=S[S.length-1].append(i);else{for(;S.length<a;)S.push(he.empty);S.push(i)}}function le(S,n,i){let a=S.inserted;for(let p=0,k=0,v=0;v<S.sections.length;){let P=S.sections[v++],c=S.sections[v++];if(c<0)p+=P,k+=P;else{let s=p,f=k,g=he.empty;for(;s+=P,f+=c,c&&a&&(g=g.append(a[v-2>>1])),!(i||v==S.sections.length||S.sections[v+1]<0);)P=S.sections[v++],c=S.sections[v++];n(p,s,k,f,g),p=s,k=f}}}function ee(S,n,i,a=!1){let p=[],k=a?[]:null,v=new Be(S),P=new Be(n);for(let c=-1;;){if(v.done&&P.len||P.done&&v.len)throw new Error("Mismatched change set lengths");if(v.ins==-1&&P.ins==-1){let s=Math.min(v.len,P.len);W(p,s,-1),v.forward(s),P.forward(s)}else if(P.ins>=0&&(v.ins<0||c==v.i||v.off==0&&(P.len<v.len||P.len==v.len&&!i))){let s=P.len;for(W(p,P.ins,-1);s;){let f=Math.min(v.len,s);v.ins>=0&&c<v.i&&v.len<=f&&(W(p,0,v.ins),k&&G(k,p,v.text),c=v.i),v.forward(f),s-=f}P.next()}else if(v.ins>=0){let s=0,f=v.len;for(;f;)if(P.ins==-1){let g=Math.min(f,P.len);s+=g,f-=g,P.forward(g)}else if(P.ins==0&&P.len<f)f-=P.len,P.next();else break;W(p,s,c<v.i?v.ins:0),k&&c<v.i&&G(k,p,v.text),c=v.i,v.forward(v.len-f)}else{if(v.done&&P.done)return k?re.createSet(p,k):ke.create(p);throw new Error("Mismatched change set lengths")}}}function pe(S,n,i=!1){let a=[],p=i?[]:null,k=new Be(S),v=new Be(n);for(let P=!1;;){if(k.done&&v.done)return p?re.createSet(a,p):ke.create(a);if(k.ins==0)W(a,k.len,0,P),k.next();else if(v.len==0&&!v.done)W(a,0,v.ins,P),p&&G(p,a,v.text),v.next();else{if(k.done||v.done)throw new Error("Mismatched change set lengths");{let c=Math.min(k.len2,v.len),s=a.length;if(k.ins==-1){let f=v.ins==-1?-1:v.off?0:v.ins;W(a,c,f,P),p&&f&&G(p,a,v.text)}else v.ins==-1?(W(a,k.off?0:k.len,c,P),p&&G(p,a,k.textBit(c))):(W(a,k.off?0:k.len,v.off?0:v.ins,P),p&&!v.off&&G(p,a,v.text));P=(k.ins>c||v.ins>=0&&v.len>c)&&(P||a.length>s),k.forward2(c),v.forward(c)}}}}class Be{constructor(n){this.set=n,this.i=0,this.next()}next(){let{sections:n}=this.set;this.i<n.length?(this.len=n[this.i++],this.ins=n[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:n}=this.set,i=this.i-2>>1;return i>=n.length?he.empty:n[i]}textBit(n){let{inserted:i}=this.set,a=this.i-2>>1;return a>=i.length&&!n?he.empty:i[a].slice(this.off,n==null?void 0:this.off+n)}forward(n){n==this.len?this.next():(this.len-=n,this.off+=n)}forward2(n){this.ins==-1?this.forward(n):n==this.ins?this.next():(this.ins-=n,this.off+=n)}}class De{constructor(n,i,a){this.from=n,this.to=i,this.flags=a}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let n=this.flags&7;return n==7?null:n}get goalColumn(){let n=this.flags>>6;return n==16777215?void 0:n}map(n,i=-1){let a,p;return this.empty?a=p=n.mapPos(this.from,i):(a=n.mapPos(this.from,1),p=n.mapPos(this.to,-1)),a==this.from&&p==this.to?this:new De(a,p,this.flags)}extend(n,i=n){if(n<=this.anchor&&i>=this.anchor)return ve.range(n,i);let a=Math.abs(n-this.anchor)>Math.abs(i-this.anchor)?n:i;return ve.range(this.anchor,a)}eq(n,i=!1){return this.anchor==n.anchor&&this.head==n.head&&(!i||!this.empty||this.assoc==n.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(n){if(!n||typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return ve.range(n.anchor,n.head)}static create(n,i,a){return new De(n,i,a)}}class ve{constructor(n,i){this.ranges=n,this.mainIndex=i}map(n,i=-1){return n.empty?this:ve.create(this.ranges.map(a=>a.map(n,i)),this.mainIndex)}eq(n,i=!1){if(this.ranges.length!=n.ranges.length||this.mainIndex!=n.mainIndex)return!1;for(let a=0;a<this.ranges.length;a++)if(!this.ranges[a].eq(n.ranges[a],i))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new ve([this.main],0)}addRange(n,i=!0){return ve.create([n].concat(this.ranges),i?0:this.mainIndex+1)}replaceRange(n,i=this.mainIndex){let a=this.ranges.slice();return a[i]=n,ve.create(a,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(n=>n.toJSON()),main:this.mainIndex}}static fromJSON(n){if(!n||!Array.isArray(n.ranges)||typeof n.main!="number"||n.main>=n.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new ve(n.ranges.map(i=>De.fromJSON(i)),n.main)}static single(n,i=n){return new ve([ve.range(n,i)],0)}static create(n,i=0){if(n.length==0)throw new RangeError("A selection needs at least one range");for(let a=0,p=0;p<n.length;p++){let k=n[p];if(k.empty?k.from<=a:k.from<a)return ve.normalized(n.slice(),i);a=k.to}return new ve(n,i)}static cursor(n,i=0,a,p){return De.create(n,n,(i==0?0:i<0?8:16)|(a==null?7:Math.min(6,a))|(p!=null?p:16777215)<<6)}static range(n,i,a,p){let k=(a!=null?a:16777215)<<6|(p==null?7:Math.min(6,p));return i<n?De.create(i,n,48|k):De.create(n,i,(i>n?8:0)|k)}static normalized(n,i=0){let a=n[i];n.sort((p,k)=>p.from-k.from),i=n.indexOf(a);for(let p=1;p<n.length;p++){let k=n[p],v=n[p-1];if(k.empty?k.from<=v.to:k.from<v.to){let P=v.from,c=Math.max(k.to,v.to);p<=i&&i--,n.splice(--p,2,k.anchor>k.head?ve.range(c,P):ve.range(P,c))}}return new ve(n,i)}}function Te(S,n){for(let i of S.ranges)if(i.to>n)throw new RangeError("Selection points outside of document")}let Re=0;class Ne{constructor(n,i,a,p,k){this.combine=n,this.compareInput=i,this.compare=a,this.isStatic=p,this.id=Re++,this.default=n([]),this.extensions=typeof k=="function"?k(this):k}get reader(){return this}static define(n={}){return new Ne(n.combine||(i=>i),n.compareInput||((i,a)=>i===a),n.compare||(n.combine?(i,a)=>i===a:Ge),!!n.static,n.enables)}of(n){return new He([],this,0,n)}compute(n,i){if(this.isStatic)throw new Error("Can't compute a static facet");return new He(n,this,1,i)}computeN(n,i){if(this.isStatic)throw new Error("Can't compute a static facet");return new He(n,this,2,i)}from(n,i){return i||(i=a=>a),this.compute([n],a=>i(a.field(n)))}}function Ge(S,n){return S==n||S.length==n.length&&S.every((i,a)=>i===n[a])}class He{constructor(n,i,a,p){this.dependencies=n,this.facet=i,this.type=a,this.value=p,this.id=Re++}dynamicSlot(n){var i;let a=this.value,p=this.facet.compareInput,k=this.id,v=n[k]>>1,P=this.type==2,c=!1,s=!1,f=[];for(let g of this.dependencies)g=="doc"?c=!0:g=="selection"?s=!0:((i=n[g.id])!==null&&i!==void 0?i:1)&1||f.push(n[g.id]);return{create(g){return g.values[v]=a(g),1},update(g,w){if(c&&w.docChanged||s&&(w.docChanged||w.selection)||Rt(g,f)){let T=a(g);if(P?!Jt(T,g.values[v],p):!p(T,g.values[v]))return g.values[v]=T,1}return 0},reconfigure:(g,w)=>{let T,R=w.config.address[k];if(R!=null){let z=be(w,R);if(this.dependencies.every(F=>F instanceof Ne?w.facet(F)===g.facet(F):F instanceof x?w.field(F,!1)==g.field(F,!1):!0)||(P?Jt(T=a(g),z,p):p(T=a(g),z)))return g.values[v]=z,0}else T=a(g);return g.values[v]=T,1}}}}function Jt(S,n,i){if(S.length!=n.length)return!1;for(let a=0;a<S.length;a++)if(!i(S[a],n[a]))return!1;return!0}function Rt(S,n){let i=!1;for(let a of n)me(S,a)&1&&(i=!0);return i}function $(S,n,i){let a=i.map(c=>S[c.id]),p=i.map(c=>c.type),k=a.filter(c=>!(c&1)),v=S[n.id]>>1;function P(c){let s=[];for(let f=0;f<a.length;f++){let g=be(c,a[f]);if(p[f]==2)for(let w of g)s.push(w);else s.push(g)}return n.combine(s)}return{create(c){for(let s of a)me(c,s);return c.values[v]=P(c),1},update(c,s){if(!Rt(c,k))return 0;let f=P(c);return n.compare(f,c.values[v])?0:(c.values[v]=f,1)},reconfigure(c,s){let f=Rt(c,a),g=s.config.facets[n.id],w=s.facet(n);if(g&&!f&&Ge(i,g))return c.values[v]=w,0;let T=P(c);return n.compare(T,w)?(c.values[v]=w,0):(c.values[v]=T,1)}}}const d=Ne.define({static:!0});class x{constructor(n,i,a,p,k){this.id=n,this.createF=i,this.updateF=a,this.compareF=p,this.spec=k,this.provides=void 0}static define(n){let i=new x(Re++,n.create,n.update,n.compare||((a,p)=>a===p),n);return n.provide&&(i.provides=n.provide(i)),i}create(n){let i=n.facet(d).find(a=>a.field==this);return((i==null?void 0:i.create)||this.createF)(n)}slot(n){let i=n[this.id]>>1;return{create:a=>(a.values[i]=this.create(a),1),update:(a,p)=>{let k=a.values[i],v=this.updateF(k,p);return this.compareF(k,v)?0:(a.values[i]=v,1)},reconfigure:(a,p)=>{let k=a.facet(d),v=p.facet(d),P;return(P=k.find(c=>c.field==this))&&P!=v.find(c=>c.field==this)?(a.values[i]=P.create(a),1):p.config.address[this.id]!=null?(a.values[i]=p.field(this),0):(a.values[i]=this.create(a),1)}}}init(n){return[this,d.of({field:this,create:n})]}get extension(){return this}}const A={lowest:4,low:3,default:2,high:1,highest:0};function I(S){return n=>new _(n,S)}const E={highest:I(A.highest),high:I(A.high),default:I(A.default),low:I(A.low),lowest:I(A.lowest)};class _{constructor(n,i){this.inner=n,this.prec=i}}class U{of(n){return new Y(this,n)}reconfigure(n){return U.reconfigure.of({compartment:this,extension:n})}get(n){return n.config.compartments.get(this)}}class Y{constructor(n,i){this.compartment=n,this.inner=i}}class ue{constructor(n,i,a,p,k,v){for(this.base=n,this.compartments=i,this.dynamicSlots=a,this.address=p,this.staticValues=k,this.facets=v,this.statusTemplate=[];this.statusTemplate.length<a.length;)this.statusTemplate.push(0)}staticFacet(n){let i=this.address[n.id];return i==null?n.default:this.staticValues[i>>1]}static resolve(n,i,a){let p=[],k=Object.create(null),v=new Map;for(let w of ye(n,i,v))w instanceof x?p.push(w):(k[w.facet.id]||(k[w.facet.id]=[])).push(w);let P=Object.create(null),c=[],s=[];for(let w of p)P[w.id]=s.length<<1,s.push(T=>w.slot(T));let f=a==null?void 0:a.config.facets;for(let w in k){let T=k[w],R=T[0].facet,z=f&&f[w]||[];if(T.every(F=>F.type==0))if(P[R.id]=c.length<<1|1,Ge(z,T))c.push(a.facet(R));else{let F=R.combine(T.map(se=>se.value));c.push(a&&R.compare(F,a.facet(R))?a.facet(R):F)}else{for(let F of T)F.type==0?(P[F.id]=c.length<<1|1,c.push(F.value)):(P[F.id]=s.length<<1,s.push(se=>F.dynamicSlot(se)));P[R.id]=s.length<<1,s.push(F=>$(F,R,T))}}let g=s.map(w=>w(P));return new ue(n,v,g,P,c,k)}}function ye(S,n,i){let a=[[],[],[],[],[]],p=new Map;function k(v,P){let c=p.get(v);if(c!=null){if(c<=P)return;let s=a[c].indexOf(v);s>-1&&a[c].splice(s,1),v instanceof Y&&i.delete(v.compartment)}if(p.set(v,P),Array.isArray(v))for(let s of v)k(s,P);else if(v instanceof Y){if(i.has(v.compartment))throw new RangeError("Duplicate use of compartment in extensions");let s=n.get(v.compartment)||v.inner;i.set(v.compartment,s),k(s,P)}else if(v instanceof _)k(v.inner,v.prec);else if(v instanceof x)a[P].push(v),v.provides&&k(v.provides,P);else if(v instanceof He)a[P].push(v),v.facet.extensions&&k(v.facet.extensions,A.default);else{let s=v.extension;if(!s)throw new Error(`Unrecognized extension value in extension set (${v}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);k(s,P)}}return k(S,A.default),a.reduce((v,P)=>v.concat(P))}function me(S,n){if(n&1)return 2;let i=n>>1,a=S.status[i];if(a==4)throw new Error("Cyclic dependency between fields and/or facets");if(a&2)return a;S.status[i]=4;let p=S.computeSlot(S,S.config.dynamicSlots[i]);return S.status[i]=2|p}function be(S,n){return n&1?S.config.staticValues[n>>1]:S.values[n>>1]}const Je=Ne.define(),ze=Ne.define({combine:S=>S.some(n=>n),static:!0}),vt=Ne.define({combine:S=>S.length?S[0]:void 0,static:!0}),Ze=Ne.define(),Bt=Ne.define(),mt=Ne.define(),ot=Ne.define({combine:S=>S.length?S[0]:!1});class It{constructor(n,i){this.type=n,this.value=i}static define(){return new Ye}}class Ye{of(n){return new It(this,n)}}class dt{constructor(n){this.map=n}of(n){return new fe(this,n)}}class fe{constructor(n,i){this.type=n,this.value=i}map(n){let i=this.type.map(this.value,n);return i===void 0?void 0:i==this.value?this:new fe(this.type,i)}is(n){return this.type==n}static define(n={}){return new dt(n.map||(i=>i))}static mapEffects(n,i){if(!n.length)return n;let a=[];for(let p of n){let k=p.map(i);k&&a.push(k)}return a}}fe.reconfigure=fe.define(),fe.appendConfig=fe.define();class $e{constructor(n,i,a,p,k,v){this.startState=n,this.changes=i,this.selection=a,this.effects=p,this.annotations=k,this.scrollIntoView=v,this._doc=null,this._state=null,a&&Te(a,i.newLength),k.some(P=>P.type==$e.time)||(this.annotations=k.concat($e.time.of(Date.now())))}static create(n,i,a,p,k,v){return new $e(n,i,a,p,k,v)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(n){for(let i of this.annotations)if(i.type==n)return i.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(n){let i=this.annotation($e.userEvent);return!!(i&&(i==n||i.length>n.length&&i.slice(0,n.length)==n&&i[n.length]=="."))}}$e.time=It.define(),$e.userEvent=It.define(),$e.addToHistory=It.define(),$e.remote=It.define();function lt(S,n){let i=[];for(let a=0,p=0;;){let k,v;if(a<S.length&&(p==n.length||n[p]>=S[a]))k=S[a++],v=S[a++];else if(p<n.length)k=n[p++],v=n[p++];else return i;!i.length||i[i.length-1]<k?i.push(k,v):i[i.length-1]<v&&(i[i.length-1]=v)}}function at(S,n,i){var a;let p,k,v;return i?(p=n.changes,k=re.empty(n.changes.length),v=S.changes.compose(n.changes)):(p=n.changes.map(S.changes),k=S.changes.mapDesc(n.changes,!0),v=S.changes.compose(p)),{changes:v,selection:n.selection?n.selection.map(k):(a=S.selection)===null||a===void 0?void 0:a.map(p),effects:fe.mapEffects(S.effects,p).concat(fe.mapEffects(n.effects,k)),annotations:S.annotations.length?S.annotations.concat(n.annotations):n.annotations,scrollIntoView:S.scrollIntoView||n.scrollIntoView}}function Ue(S,n,i){let a=n.selection,p=Mt(n.annotations);return n.userEvent&&(p=p.concat($e.userEvent.of(n.userEvent))),{changes:n.changes instanceof re?n.changes:re.of(n.changes||[],i,S.facet(vt)),selection:a&&(a instanceof ve?a:ve.single(a.anchor,a.head)),effects:Mt(n.effects),annotations:p,scrollIntoView:!!n.scrollIntoView}}function Ae(S,n,i){let a=Ue(S,n.length?n[0]:{},S.doc.length);n.length&&n[0].filter===!1&&(i=!1);for(let k=1;k<n.length;k++){n[k].filter===!1&&(i=!1);let v=!!n[k].sequential;a=at(a,Ue(S,n[k],v?a.changes.newLength:S.doc.length),v)}let p=$e.create(S,a.changes,a.selection,a.effects,a.annotations,a.scrollIntoView);return ft(i?nt(p):p)}function nt(S){let n=S.startState,i=!0;for(let p of n.facet(Ze)){let k=p(S);if(k===!1){i=!1;break}Array.isArray(k)&&(i=i===!0?k:lt(i,k))}if(i!==!0){let p,k;if(i===!1)k=S.changes.invertedDesc,p=re.empty(n.doc.length);else{let v=S.changes.filter(i);p=v.changes,k=v.filtered.mapDesc(v.changes).invertedDesc}S=$e.create(n,p,S.selection&&S.selection.map(k),fe.mapEffects(S.effects,k),S.annotations,S.scrollIntoView)}let a=n.facet(Bt);for(let p=a.length-1;p>=0;p--){let k=a[p](S);k instanceof $e?S=k:Array.isArray(k)&&k.length==1&&k[0]instanceof $e?S=k[0]:S=Ae(n,Mt(k),!1)}return S}function ft(S){let n=S.startState,i=n.facet(mt),a=S;for(let p=i.length-1;p>=0;p--){let k=i[p](S);k&&Object.keys(k).length&&(a=at(a,Ue(n,k,S.changes.newLength),!0))}return a==S?S:$e.create(n,S.changes,S.selection,a.effects,a.annotations,a.scrollIntoView)}const Ct=[];function Mt(S){return S==null?Ct:Array.isArray(S)?S:[S]}var Nt=function(S){return S[S.Word=0]="Word",S[S.Space=1]="Space",S[S.Other=2]="Other",S}(Nt||(Nt={}));const qt=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Et;try{Et=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(S){}function rn(S){if(Et)return Et.test(S);for(let n=0;n<S.length;n++){let i=S[n];if(/\w/.test(i)||i>"\x80"&&(i.toUpperCase()!=i.toLowerCase()||qt.test(i)))return!0}return!1}function Ot(S){return n=>{if(!/\S/.test(n))return Nt.Space;if(rn(n))return Nt.Word;for(let i=0;i<S.length;i++)if(n.indexOf(S[i])>-1)return Nt.Word;return Nt.Other}}class Me{constructor(n,i,a,p,k,v){this.config=n,this.doc=i,this.selection=a,this.values=p,this.status=n.statusTemplate.slice(),this.computeSlot=k,v&&(v._state=this);for(let P=0;P<this.config.dynamicSlots.length;P++)me(this,P<<1);this.computeSlot=null}field(n,i=!0){let a=this.config.address[n.id];if(a==null){if(i)throw new RangeError("Field is not present in this state");return}return me(this,a),be(this,a)}update(...n){return Ae(this,n,!0)}applyTransaction(n){let i=this.config,{base:a,compartments:p}=i;for(let P of n.effects)P.is(U.reconfigure)?(i&&(p=new Map,i.compartments.forEach((c,s)=>p.set(s,c)),i=null),p.set(P.value.compartment,P.value.extension)):P.is(fe.reconfigure)?(i=null,a=P.value):P.is(fe.appendConfig)&&(i=null,a=Mt(a).concat(P.value));let k;i?k=n.startState.values.slice():(i=ue.resolve(a,p,this),k=new Me(i,this.doc,this.selection,i.dynamicSlots.map(()=>null),(c,s)=>s.reconfigure(c,this),null).values);let v=n.startState.facet(ze)?n.newSelection:n.newSelection.asSingle();new Me(i,n.newDoc,v,k,(P,c)=>c.update(P,n),n)}replaceSelection(n){return typeof n=="string"&&(n=this.toText(n)),this.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:n},range:ve.cursor(i.from+n.length)}))}changeByRange(n){let i=this.selection,a=n(i.ranges[0]),p=this.changes(a.changes),k=[a.range],v=Mt(a.effects);for(let P=1;P<i.ranges.length;P++){let c=n(i.ranges[P]),s=this.changes(c.changes),f=s.map(p);for(let w=0;w<P;w++)k[w]=k[w].map(f);let g=p.mapDesc(s,!0);k.push(c.range.map(g)),p=p.compose(f),v=fe.mapEffects(v,f).concat(fe.mapEffects(Mt(c.effects),g))}return{changes:p,selection:ve.create(k,i.mainIndex),effects:v}}changes(n=[]){return n instanceof re?n:re.of(n,this.doc.length,this.facet(Me.lineSeparator))}toText(n){return he.of(n.split(this.facet(Me.lineSeparator)||tt))}sliceDoc(n=0,i=this.doc.length){return this.doc.sliceString(n,i,this.lineBreak)}facet(n){let i=this.config.address[n.id];return i==null?n.default:(me(this,i),be(this,i))}toJSON(n){let i={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(n)for(let a in n){let p=n[a];p instanceof x&&this.config.address[p.id]!=null&&(i[a]=p.spec.toJSON(this.field(n[a]),this))}return i}static fromJSON(n,i={},a){if(!n||typeof n.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let p=[];if(a){for(let k in a)if(Object.prototype.hasOwnProperty.call(n,k)){let v=a[k],P=n[k];p.push(v.init(c=>v.spec.fromJSON(P,c)))}}return Me.create({doc:n.doc,selection:ve.fromJSON(n.selection),extensions:i.extensions?p.concat([i.extensions]):p})}static create(n={}){let i=ue.resolve(n.extensions||[],new Map),a=n.doc instanceof he?n.doc:he.of((n.doc||"").split(i.staticFacet(Me.lineSeparator)||tt)),p=n.selection?n.selection instanceof ve?n.selection:ve.single(n.selection.anchor,n.selection.head):ve.single(0);return Te(p,a.length),i.staticFacet(ze)||(p=p.asSingle()),new Me(i,a,p,i.dynamicSlots.map(()=>null),(k,v)=>v.create(k),null)}get tabSize(){return this.facet(Me.tabSize)}get lineBreak(){return this.facet(Me.lineSeparator)||`
`}get readOnly(){return this.facet(ot)}phrase(n,...i){for(let a of this.facet(Me.phrases))if(Object.prototype.hasOwnProperty.call(a,n)){n=a[n];break}return i.length&&(n=n.replace(/\$(\$|\d*)/g,(a,p)=>{if(p=="$")return"$";let k=+(p||1);return!k||k>i.length?a:i[k-1]})),n}languageDataAt(n,i,a=-1){let p=[];for(let k of this.facet(Je))for(let v of k(this,i,a))Object.prototype.hasOwnProperty.call(v,n)&&p.push(v[n]);return p}charCategorizer(n){let i=this.languageDataAt("wordChars",n);return Ot(i.length?i[0]:"")}wordAt(n){let{text:i,from:a,length:p}=this.doc.lineAt(n),k=this.charCategorizer(n),v=n-a,P=n-a;for(;v>0;){let c=ct(i,v,!1);if(k(i.slice(c,v))!=Nt.Word)break;v=c}for(;P<p;){let c=ct(i,P);if(k(i.slice(P,c))!=Nt.Word)break;P=c}return v==P?null:ve.range(v+a,P+a)}}Me.allowMultipleSelections=ze,Me.tabSize=Ne.define({combine:S=>S.length?S[0]:4}),Me.lineSeparator=vt,Me.readOnly=ot,Me.phrases=Ne.define({compare(S,n){let i=Object.keys(S),a=Object.keys(n);return i.length==a.length&&i.every(p=>S[p]==n[p])}}),Me.languageData=Je,Me.changeFilter=Ze,Me.transactionFilter=Bt,Me.transactionExtender=mt,U.reconfigure=fe.define();function bt(S,n,i={}){let a={};for(let p of S)for(let k of Object.keys(p)){let v=p[k],P=a[k];if(P===void 0)a[k]=v;else if(!(P===v||v===void 0))if(Object.hasOwnProperty.call(i,k))a[k]=i[k](P,v);else throw new Error("Config merge conflict for field "+k)}for(let p in n)a[p]===void 0&&(a[p]=n[p]);return a}class $t{eq(n){return this==n}range(n,i=n){return _t.create(n,i,this)}}$t.prototype.startSide=$t.prototype.endSide=0,$t.prototype.point=!1,$t.prototype.mapMode=j.TrackDel;function Vt(S,n){return S==n||S.constructor==n.constructor&&S.eq(n)}class _t{constructor(n,i,a){this.from=n,this.to=i,this.value=a}static create(n,i,a){return new _t(n,i,a)}}function en(S,n){return S.from-n.from||S.value.startSide-n.value.startSide}class un{constructor(n,i,a,p){this.from=n,this.to=i,this.value=a,this.maxPoint=p}get length(){return this.to[this.to.length-1]}findIndex(n,i,a,p=0){let k=a?this.to:this.from;for(let v=p,P=k.length;;){if(v==P)return v;let c=v+P>>1,s=k[c]-n||(a?this.value[c].endSide:this.value[c].startSide)-i;if(c==v)return s>=0?v:P;s>=0?P=c:v=c+1}}between(n,i,a,p){for(let k=this.findIndex(i,-1e9,!0),v=this.findIndex(a,1e9,!1,k);k<v;k++)if(p(this.from[k]+n,this.to[k]+n,this.value[k])===!1)return!1}map(n,i){let a=[],p=[],k=[],v=-1,P=-1;for(let c=0;c<this.value.length;c++){let s=this.value[c],f=this.from[c]+n,g=this.to[c]+n,w,T;if(f==g){let R=i.mapPos(f,s.startSide,s.mapMode);if(R==null||(w=T=R,s.startSide!=s.endSide&&(T=i.mapPos(f,s.endSide),T<w)))continue}else if(w=i.mapPos(f,s.startSide),T=i.mapPos(g,s.endSide),w>T||w==T&&s.startSide>0&&s.endSide<=0)continue;(T-w||s.endSide-s.startSide)<0||(v<0&&(v=w),s.point&&(P=Math.max(P,T-w)),a.push(s),p.push(w-v),k.push(T-v))}return{mapped:a.length?new un(p,k,a,P):null,pos:v}}}class Dt{constructor(n,i,a,p){this.chunkPos=n,this.chunk=i,this.nextLayer=a,this.maxPoint=p}static create(n,i,a,p){return new Dt(n,i,a,p)}get length(){let n=this.chunk.length-1;return n<0?0:Math.max(this.chunkEnd(n),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let n=this.nextLayer.size;for(let i of this.chunk)n+=i.value.length;return n}chunkEnd(n){return this.chunkPos[n]+this.chunk[n].length}update(n){let{add:i=[],sort:a=!1,filterFrom:p=0,filterTo:k=this.length}=n,v=n.filter;if(i.length==0&&!v)return this;if(a&&(i=i.slice().sort(en)),this.isEmpty)return i.length?Dt.of(i):this;let P=new Lt(this,null,-1).goto(0),c=0,s=[],f=new cn;for(;P.value||c<i.length;)if(c<i.length&&(P.from-i[c].from||P.startSide-i[c].value.startSide)>=0){let g=i[c++];f.addInner(g.from,g.to,g.value)||s.push(g)}else P.rangeIndex==1&&P.chunkIndex<this.chunk.length&&(c==i.length||this.chunkEnd(P.chunkIndex)<i[c].from)&&(!v||p>this.chunkEnd(P.chunkIndex)||k<this.chunkPos[P.chunkIndex])&&f.addChunk(this.chunkPos[P.chunkIndex],this.chunk[P.chunkIndex])?P.nextChunk():((!v||p>P.to||k<P.from||v(P.from,P.to,P.value))&&(f.addInner(P.from,P.to,P.value)||s.push(_t.create(P.from,P.to,P.value))),P.next());return f.finishInner(this.nextLayer.isEmpty&&!s.length?Dt.empty:this.nextLayer.update({add:s,filter:v,filterFrom:p,filterTo:k}))}map(n){if(n.empty||this.isEmpty)return this;let i=[],a=[],p=-1;for(let v=0;v<this.chunk.length;v++){let P=this.chunkPos[v],c=this.chunk[v],s=n.touchesRange(P,P+c.length);if(s===!1)p=Math.max(p,c.maxPoint),i.push(c),a.push(n.mapPos(P));else if(s===!0){let{mapped:f,pos:g}=c.map(P,n);f&&(p=Math.max(p,f.maxPoint),i.push(f),a.push(g))}}let k=this.nextLayer.map(n);return i.length==0?k:new Dt(a,i,k||Dt.empty,p)}between(n,i,a){if(!this.isEmpty){for(let p=0;p<this.chunk.length;p++){let k=this.chunkPos[p],v=this.chunk[p];if(i>=k&&n<=k+v.length&&v.between(k,n-k,i-k,a)===!1)return}this.nextLayer.between(n,i,a)}}iter(n=0){return Kt.from([this]).goto(n)}get isEmpty(){return this.nextLayer==this}static iter(n,i=0){return Kt.from(n).goto(i)}static compare(n,i,a,p,k=-1){let v=n.filter(g=>g.maxPoint>0||!g.isEmpty&&g.maxPoint>=k),P=i.filter(g=>g.maxPoint>0||!g.isEmpty&&g.maxPoint>=k),c=An(v,P,a),s=new on(v,c,k),f=new on(P,c,k);a.iterGaps((g,w,T)=>Tn(s,g,f,w,T,p)),a.empty&&a.length==0&&Tn(s,0,f,0,0,p)}static eq(n,i,a=0,p){p==null&&(p=999999999);let k=n.filter(f=>!f.isEmpty&&i.indexOf(f)<0),v=i.filter(f=>!f.isEmpty&&n.indexOf(f)<0);if(k.length!=v.length)return!1;if(!k.length)return!0;let P=An(k,v),c=new on(k,P,0).goto(a),s=new on(v,P,0).goto(a);for(;;){if(c.to!=s.to||!yn(c.active,s.active)||c.point&&(!s.point||!Vt(c.point,s.point)))return!1;if(c.to>p)return!0;c.next(),s.next()}}static spans(n,i,a,p,k=-1){let v=new on(n,null,k).goto(i),P=i,c=v.openStart;for(;;){let s=Math.min(v.to,a);if(v.point){let f=v.activeForPoint(v.to),g=v.pointFrom<i?f.length+1:v.point.startSide<0?f.length:Math.min(f.length,c);p.point(P,s,v.point,f,g,v.pointRank),c=Math.min(v.openEnd(s),f.length)}else s>P&&(p.span(P,s,v.active,c),c=v.openEnd(s));if(v.to>a)return c+(v.point&&v.to>a?1:0);P=v.to,v.next()}}static of(n,i=!1){let a=new cn;for(let p of n instanceof _t?[n]:i?gn(n):n)a.add(p.from,p.to,p.value);return a.finish()}static join(n){if(!n.length)return Dt.empty;let i=n[n.length-1];for(let a=n.length-2;a>=0;a--)for(let p=n[a];p!=Dt.empty;p=p.nextLayer)i=new Dt(p.chunkPos,p.chunk,i,Math.max(p.maxPoint,i.maxPoint));return i}}Dt.empty=new Dt([],[],null,-1);function gn(S){if(S.length>1)for(let n=S[0],i=1;i<S.length;i++){let a=S[i];if(en(n,a)>0)return S.slice().sort(en);n=a}return S}Dt.empty.nextLayer=Dt.empty;class cn{finishChunk(n){this.chunks.push(new un(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,n&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(n,i,a){this.addInner(n,i,a)||(this.nextLayer||(this.nextLayer=new cn)).add(n,i,a)}addInner(n,i,a){let p=n-this.lastTo||a.startSide-this.last.endSide;if(p<=0&&(n-this.lastFrom||a.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return p<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=n),this.from.push(n-this.chunkStart),this.to.push(i-this.chunkStart),this.last=a,this.lastFrom=n,this.lastTo=i,this.value.push(a),a.point&&(this.maxPoint=Math.max(this.maxPoint,i-n)),!0)}addChunk(n,i){if((n-this.lastTo||i.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,i.maxPoint),this.chunks.push(i),this.chunkPos.push(n);let a=i.value.length-1;return this.last=i.value[a],this.lastFrom=i.from[a]+n,this.lastTo=i.to[a]+n,!0}finish(){return this.finishInner(Dt.empty)}finishInner(n){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return n;let i=Dt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(n):n,this.setMaxPoint);return this.from=null,i}}function An(S,n,i){let a=new Map;for(let k of S)for(let v=0;v<k.chunk.length;v++)k.chunk[v].maxPoint<=0&&a.set(k.chunk[v],k.chunkPos[v]);let p=new Set;for(let k of n)for(let v=0;v<k.chunk.length;v++){let P=a.get(k.chunk[v]);P!=null&&(i?i.mapPos(P):P)==k.chunkPos[v]&&!(i!=null&&i.touchesRange(P,P+k.chunk[v].length))&&p.add(k.chunk[v])}return p}class Lt{constructor(n,i,a,p=0){this.layer=n,this.skip=i,this.minPoint=a,this.rank=p}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(n,i=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(n,i,!1),this}gotoInner(n,i,a){for(;this.chunkIndex<this.layer.chunk.length;){let p=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(p)||this.layer.chunkEnd(this.chunkIndex)<n||p.maxPoint<this.minPoint))break;this.chunkIndex++,a=!1}if(this.chunkIndex<this.layer.chunk.length){let p=this.layer.chunk[this.chunkIndex].findIndex(n-this.layer.chunkPos[this.chunkIndex],i,!0);(!a||this.rangeIndex<p)&&this.setRangeIndex(p)}this.next()}forward(n,i){(this.to-n||this.endSide-i)<0&&this.gotoInner(n,i,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let n=this.layer.chunkPos[this.chunkIndex],i=this.layer.chunk[this.chunkIndex],a=n+i.from[this.rangeIndex];if(this.from=a,this.to=n+i.to[this.rangeIndex],this.value=i.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(n){if(n==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=n}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(n){return this.from-n.from||this.startSide-n.startSide||this.rank-n.rank||this.to-n.to||this.endSide-n.endSide}}class Kt{constructor(n){this.heap=n}static from(n,i=null,a=-1){let p=[];for(let k=0;k<n.length;k++)for(let v=n[k];!v.isEmpty;v=v.nextLayer)v.maxPoint>=a&&p.push(new Lt(v,i,a,k));return p.length==1?p[0]:new Kt(p)}get startSide(){return this.value?this.value.startSide:0}goto(n,i=-1e9){for(let a of this.heap)a.goto(n,i);for(let a=this.heap.length>>1;a>=0;a--)sn(this.heap,a);return this.next(),this}forward(n,i){for(let a of this.heap)a.forward(n,i);for(let a=this.heap.length>>1;a>=0;a--)sn(this.heap,a);(this.to-n||this.value.endSide-i)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let n=this.heap[0];this.from=n.from,this.to=n.to,this.value=n.value,this.rank=n.rank,n.value&&n.next(),sn(this.heap,0)}}}function sn(S,n){for(let i=S[n];;){let a=(n<<1)+1;if(a>=S.length)break;let p=S[a];if(a+1<S.length&&p.compare(S[a+1])>=0&&(p=S[a+1],a++),i.compare(p)<0)break;S[a]=i,S[n]=p,n=a}}class on{constructor(n,i,a){this.minPoint=a,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Kt.from(n,i,a)}goto(n,i=-1e9){return this.cursor.goto(n,i),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=n,this.endSide=i,this.openStart=-1,this.next(),this}forward(n,i){for(;this.minActive>-1&&(this.activeTo[this.minActive]-n||this.active[this.minActive].endSide-i)<0;)this.removeActive(this.minActive);this.cursor.forward(n,i)}removeActive(n){hn(this.active,n),hn(this.activeTo,n),hn(this.activeRank,n),this.minActive=Gt(this.active,this.activeTo)}addActive(n){let i=0,{value:a,to:p,rank:k}=this.cursor;for(;i<this.activeRank.length&&(k-this.activeRank[i]||p-this.activeTo[i])>0;)i++;ln(this.active,i,a),ln(this.activeTo,i,p),ln(this.activeRank,i,k),n&&ln(n,i,this.cursor.from),this.minActive=Gt(this.active,this.activeTo)}next(){let n=this.to,i=this.point;this.point=null;let a=this.openStart<0?[]:null;for(;;){let p=this.minActive;if(p>-1&&(this.activeTo[p]-this.cursor.from||this.active[p].endSide-this.cursor.startSide)<0){if(this.activeTo[p]>n){this.to=this.activeTo[p],this.endSide=this.active[p].endSide;break}this.removeActive(p),a&&hn(a,p)}else if(this.cursor.value)if(this.cursor.from>n){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let k=this.cursor.value;if(!k.point)this.addActive(a),this.cursor.next();else if(i&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=k,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=k.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(a){this.openStart=0;for(let p=a.length-1;p>=0&&a[p]<n;p--)this.openStart++}}activeForPoint(n){if(!this.active.length)return this.active;let i=[];for(let a=this.active.length-1;a>=0&&!(this.activeRank[a]<this.pointRank);a--)(this.activeTo[a]>n||this.activeTo[a]==n&&this.active[a].endSide>=this.point.endSide)&&i.push(this.active[a]);return i.reverse()}openEnd(n){let i=0;for(let a=this.activeTo.length-1;a>=0&&this.activeTo[a]>n;a--)i++;return i}}function Tn(S,n,i,a,p,k){S.goto(n),i.goto(a);let v=a+p,P=a,c=a-n,s=!!k.boundChange;for(let f=!1;;){let g=S.to+c-i.to,w=g||S.endSide-i.endSide,T=w<0?S.to+c:i.to,R=Math.min(T,v);if(S.point||i.point?(S.point&&i.point&&Vt(S.point,i.point)&&yn(S.activeForPoint(S.to),i.activeForPoint(i.to))||k.comparePoint(P,R,S.point,i.point),f=!1):(f&&k.boundChange(P),R>P&&!yn(S.active,i.active)&&k.compareRange(P,R,S.active,i.active),s&&R<v&&(g||S.openEnd(T)!=i.openEnd(T))&&(f=!0)),T>v)break;P=T,w<=0&&S.next(),w>=0&&i.next()}}function yn(S,n){if(S.length!=n.length)return!1;for(let i=0;i<S.length;i++)if(S[i]!=n[i]&&!Vt(S[i],n[i]))return!1;return!0}function hn(S,n){for(let i=n,a=S.length-1;i<a;i++)S[i]=S[i+1];S.pop()}function ln(S,n,i){for(let a=S.length-1;a>=n;a--)S[a+1]=S[a];S[n]=i}function Gt(S,n){let i=-1,a=1e9;for(let p=0;p<n.length;p++)(n[p]-a||S[p].endSide-S[i].endSide)<0&&(i=p,a=n[p]);return i}function vn(S,n,i=S.length){let a=0;for(let p=0;p<i&&p<S.length;)S.charCodeAt(p)==9?(a+=n-a%n,p++):(a++,p=ct(S,p));return a}function In(S,n,i,a){for(let p=0,k=0;;){if(k>=n)return p;if(p==S.length)break;k+=S.charCodeAt(p)==9?i-k%i:1,p=ct(S,p)}return a===!0?-1:S.length}},41113:function(Wt,Xe,ne){ne.d(Xe,{FE:function(){return G},Jq:function(){return _e},L3:function(){return J},Lj:function(){return qe},_b:function(){return re},hr:function(){return j},i9:function(){return ke},md:function(){return D},mp:function(){return Le},vj:function(){return de}});const J=1024;let ie=0;class Q{constructor(d,x){this.from=d,this.to=x}}class D{constructor(d={}){this.id=ie++,this.perNode=!!d.perNode,this.deserialize=d.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=d.combine||null}add(d){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof d!="function"&&(d=_e.match(d)),x=>{let A=d(x);return A===void 0?null:[this,A]}}}D.closedBy=new D({deserialize:$=>$.split(" ")}),D.openedBy=new D({deserialize:$=>$.split(" ")}),D.group=new D({deserialize:$=>$.split(" ")}),D.isolate=new D({deserialize:$=>{if($&&$!="rtl"&&$!="ltr"&&$!="auto")throw new RangeError("Invalid value for isolate: "+$);return $||"auto"}}),D.contextHash=new D({perNode:!0}),D.lookAhead=new D({perNode:!0}),D.mounted=new D({perNode:!0});class K{constructor(d,x,A,I=!1){this.tree=d,this.overlay=x,this.parser=A,this.bracketed=I}static get(d){return d&&d.props&&d.props[D.mounted.id]}}const xe=Object.create(null);class _e{constructor(d,x,A,I=0){this.name=d,this.props=x,this.id=A,this.flags=I}static define(d){let x=d.props&&d.props.length?Object.create(null):xe,A=(d.top?1:0)|(d.skipped?2:0)|(d.error?4:0)|(d.name==null?8:0),I=new _e(d.name||"",x,d.id,A);if(d.props){for(let E of d.props)if(Array.isArray(E)||(E=E(I)),E){if(E[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");x[E[0].id]=E[1]}}return I}prop(d){return this.props[d.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(d){if(typeof d=="string"){if(this.name==d)return!0;let x=this.prop(D.group);return x?x.indexOf(d)>-1:!1}return this.id==d}static match(d){let x=Object.create(null);for(let A in d)for(let I of A.split(" "))x[I]=d[A];return A=>{for(let I=A.prop(D.group),E=-1;E<(I?I.length:0);E++){let _=x[E<0?A.name:I[E]];if(_)return _}}}}_e.none=new _e("",Object.create(null),0,8);class qe{constructor(d){this.types=d;for(let x=0;x<d.length;x++)if(d[x].id!=x)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...d){let x=[];for(let A of this.types){let I=null;for(let E of d){let _=E(A);if(_){I||(I=Object.assign({},A.props));let U=_[1],Y=_[0];Y.combine&&Y.id in I&&(U=Y.combine(I[Y.id],U)),I[Y.id]=U}}x.push(I?new _e(A.name,I,A.id,A.flags):A)}return new qe(x)}}const Pe=new WeakMap,ce=new WeakMap;var de;(function($){$[$.ExcludeBuffers=1]="ExcludeBuffers",$[$.IncludeAnonymous=2]="IncludeAnonymous",$[$.IgnoreMounts=4]="IgnoreMounts",$[$.IgnoreOverlays=8]="IgnoreOverlays",$[$.EnterBracketed=16]="EnterBracketed"})(de||(de={}));class Le{constructor(d,x,A,I,E){if(this.type=d,this.children=x,this.positions=A,this.length=I,this.props=null,E&&E.length){this.props=Object.create(null);for(let[_,U]of E)this.props[typeof _=="number"?_:_.id]=U}}toString(){let d=K.get(this);if(d&&!d.overlay)return d.tree.toString();let x="";for(let A of this.children){let I=A.toString();I&&(x&&(x+=","),x+=I)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(x.length?"("+x+")":""):x}cursor(d=0){return new et(this.topNode,d)}cursorAt(d,x=0,A=0){let I=Pe.get(this)||this.topNode,E=new et(I);return E.moveTo(d,x),Pe.set(this,E._tree),E}get topNode(){return new Ie(this,0,0,null)}resolve(d,x=0){let A=Ce(Pe.get(this)||this.topNode,d,x,!1);return Pe.set(this,A),A}resolveInner(d,x=0){let A=Ce(ce.get(this)||this.topNode,d,x,!0);return ce.set(this,A),A}resolveStack(d,x=0){return ct(this,d,x)}iterate(d){let{enter:x,leave:A,from:I=0,to:E=this.length}=d,_=d.mode||0,U=(_&de.IncludeAnonymous)>0;for(let Y=this.cursor(_|de.IncludeAnonymous);;){let ue=!1;if(Y.from<=E&&Y.to>=I&&(!U&&Y.type.isAnonymous||x(Y)!==!1)){if(Y.firstChild())continue;ue=!0}for(;ue&&A&&(U||!Y.type.isAnonymous)&&A(Y),!Y.nextSibling();){if(!Y.parent())return;ue=!0}}}prop(d){return d.perNode?this.props?this.props[d.id]:void 0:this.type.prop(d)}get propValues(){let d=[];if(this.props)for(let x in this.props)d.push([+x,this.props[x]]);return d}balance(d={}){return this.children.length<=8?this:tt(_e.none,this.children,this.positions,0,this.children.length,0,this.length,(x,A,I)=>new Le(this.type,x,A,I,this.propValues),d.makeTree||((x,A,I)=>new Le(_e.none,x,A,I)))}static build(d){return yt(d)}}Le.empty=new Le(_e.none,[],[],0);class Se{constructor(d,x){this.buffer=d,this.index=x}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Se(this.buffer,this.index)}}class he{constructor(d,x,A){this.buffer=d,this.length=x,this.set=A}get type(){return _e.none}toString(){let d=[];for(let x=0;x<this.buffer.length;)d.push(this.childString(x)),x=this.buffer[x+3];return d.join(",")}childString(d){let x=this.buffer[d],A=this.buffer[d+3],I=this.set.types[x],E=I.name;if(/\W/.test(E)&&!I.isError&&(E=JSON.stringify(E)),d+=4,A==d)return E;let _=[];for(;d<A;)_.push(this.childString(d)),d=this.buffer[d+3];return E+"("+_.join(",")+")"}findChild(d,x,A,I,E){let{buffer:_}=this,U=-1;for(let Y=d;Y!=x&&!(Oe(E,I,_[Y+1],_[Y+2])&&(U=Y,A>0));Y=_[Y+3]);return U}slice(d,x,A){let I=this.buffer,E=new Uint16Array(x-d),_=0;for(let U=d,Y=0;U<x;){E[Y++]=I[U++],E[Y++]=I[U++]-A;let ue=E[Y++]=I[U++]-A;E[Y++]=I[U++]-d,_=Math.max(_,ue)}return new he(E,_,this.set)}}function Oe($,d,x,A){switch($){case-2:return x<d;case-1:return A>=d&&x<d;case 0:return x<d&&A>d;case 1:return x<=d&&A>d;case 2:return A>d;case 4:return!0}}function Ce($,d,x,A){for(var I;$.from==$.to||(x<1?$.from>=d:$.from>d)||(x>-1?$.to<=d:$.to<d);){let _=!A&&$ instanceof Ie&&$.index<0?null:$.parent;if(!_)return $;$=_}let E=A?0:de.IgnoreOverlays;if(A)for(let _=$,U=_.parent;U;_=U,U=_.parent)_ instanceof Ie&&_.index<0&&((I=U.enter(d,x,E))===null||I===void 0?void 0:I.from)!=_.from&&($=U);for(;;){let _=$.enter(d,x,E);if(!_)return $;$=_}}class q{cursor(d=0){return new et(this,d)}getChild(d,x=null,A=null){let I=rt(this,d,x,A);return I.length?I[0]:null}getChildren(d,x=null,A=null){return rt(this,d,x,A)}resolve(d,x=0){return Ce(this,d,x,!1)}resolveInner(d,x=0){return Ce(this,d,x,!0)}matchContext(d){return st(this.parent,d)}enterUnfinishedNodesBefore(d){let x=this.childBefore(d),A=this;for(;x;){let I=x.lastChild;if(!I||I.to!=x.to)break;I.type.isError&&I.from==I.to?(A=x,x=I.prevSibling):x=I}return A}get node(){return this}get next(){return this.parent}}class Ie extends q{constructor(d,x,A,I){super(),this._tree=d,this.from=x,this.index=A,this._parent=I}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(d,x,A,I,E=0){var _;for(let U=this;;){for(let{children:Y,positions:ue}=U._tree,ye=x>0?Y.length:-1;d!=ye;d+=x){let me=Y[d],be=ue[d]+U.from;if(!(!(E&de.EnterBracketed&&me instanceof Le&&((_=K.get(me))===null||_===void 0?void 0:_.overlay)===null&&(be>=A||be+me.length<=A))&&!Oe(I,A,be,be+me.length))){if(me instanceof he){if(E&de.ExcludeBuffers)continue;let Je=me.findChild(0,me.buffer.length,x,A-be,I);if(Je>-1)return new je(new Ve(U,me,d,be),null,Je)}else if(E&de.IncludeAnonymous||!me.type.isAnonymous||pt(me)){let Je;if(!(E&de.IgnoreMounts)&&(Je=K.get(me))&&!Je.overlay)return new Ie(Je.tree,be,d,U);let ze=new Ie(me,be,d,U);return E&de.IncludeAnonymous||!ze.type.isAnonymous?ze:ze.nextChild(x<0?me.children.length-1:0,x,A,I,E)}}}if(E&de.IncludeAnonymous||!U.type.isAnonymous||(U.index>=0?d=U.index+x:d=x<0?-1:U._parent._tree.children.length,U=U._parent,!U))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(d){return this.nextChild(0,1,d,2)}childBefore(d){return this.nextChild(this._tree.children.length-1,-1,d,-2)}prop(d){return this._tree.prop(d)}enter(d,x,A=0){let I;if(!(A&de.IgnoreOverlays)&&(I=K.get(this._tree))&&I.overlay){let E=d-this.from,_=A&de.EnterBracketed&&I.bracketed;for(let{from:U,to:Y}of I.overlay)if((x>0||_?U<=E:U<E)&&(x<0||_?Y>=E:Y>E))return new Ie(I.tree,I.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,d,x,A)}nextSignificantParent(){let d=this;for(;d.type.isAnonymous&&d._parent;)d=d._parent;return d}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function rt($,d,x,A){let I=$.cursor(),E=[];if(!I.firstChild())return E;if(x!=null){for(let _=!1;!_;)if(_=I.type.is(x),!I.nextSibling())return E}for(;;){if(A!=null&&I.type.is(A))return E;if(I.type.is(d)&&E.push(I.node),!I.nextSibling())return A==null?E:[]}}function st($,d,x=d.length-1){for(let A=$;x>=0;A=A.parent){if(!A)return!1;if(!A.type.isAnonymous){if(d[x]&&d[x]!=A.name)return!1;x--}}return!0}class Ve{constructor(d,x,A,I){this.parent=d,this.buffer=x,this.index=A,this.start=I}}class je extends q{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(d,x,A){super(),this.context=d,this._parent=x,this.index=A,this.type=d.buffer.set.types[d.buffer.buffer[A]]}child(d,x,A){let{buffer:I}=this.context,E=I.findChild(this.index+4,I.buffer[this.index+3],d,x-this.context.start,A);return E<0?null:new je(this.context,this,E)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(d){return this.child(1,d,2)}childBefore(d){return this.child(-1,d,-2)}prop(d){return this.type.prop(d)}enter(d,x,A=0){if(A&de.ExcludeBuffers)return null;let{buffer:I}=this.context,E=I.findChild(this.index+4,I.buffer[this.index+3],x>0?1:-1,d-this.context.start,x);return E<0?null:new je(this.context,this,E)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(d){return this._parent?null:this.context.parent.nextChild(this.context.index+d,d,0,4)}get nextSibling(){let{buffer:d}=this.context,x=d.buffer[this.index+3];return x<(this._parent?d.buffer[this._parent.index+3]:d.buffer.length)?new je(this.context,this._parent,x):this.externalSibling(1)}get prevSibling(){let{buffer:d}=this.context,x=this._parent?this._parent.index+4:0;return this.index==x?this.externalSibling(-1):new je(this.context,this._parent,d.findChild(x,this.index,-1,0,4))}get tree(){return null}toTree(){let d=[],x=[],{buffer:A}=this.context,I=this.index+4,E=A.buffer[this.index+3];if(E>I){let _=A.buffer[this.index+1];d.push(A.slice(I,E,_)),x.push(0)}return new Le(this.type,d,x,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function gt($){if(!$.length)return null;let d=0,x=$[0];for(let E=1;E<$.length;E++){let _=$[E];(_.from>x.from||_.to<x.to)&&(x=_,d=E)}let A=x instanceof Ie&&x.index<0?null:x.parent,I=$.slice();return A?I[d]=A:I.splice(d,1),new ut(I,x)}class ut{constructor(d,x){this.heads=d,this.node=x}get next(){return gt(this.heads)}}function ct($,d,x){let A=$.resolveInner(d,x),I=null;for(let E=A instanceof Ie?A:A.context.parent;E;E=E.parent)if(E.index<0){let _=E.parent;(I||(I=[A])).push(_.resolve(d,x)),E=_}else{let _=K.get(E.tree);if(_&&_.overlay&&_.overlay[0].from<=d&&_.overlay[_.overlay.length-1].to>=d){let U=new Ie(_.tree,_.overlay[0].from+E.from,-1,E);(I||(I=[A])).push(Ce(U,d,x,!1))}}return I?gt(I):A}class et{get name(){return this.type.name}constructor(d,x=0){if(this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,this.mode=x&~de.EnterBracketed,d instanceof Ie)this.yieldNode(d);else{this._tree=d.context.parent,this.buffer=d.context;for(let A=d._parent;A;A=A._parent)this.stack.unshift(A.index);this.bufferNode=d,this.yieldBuf(d.index)}}yieldNode(d){return d?(this._tree=d,this.type=d.type,this.from=d.from,this.to=d.to,!0):!1}yieldBuf(d,x){this.index=d;let{start:A,buffer:I}=this.buffer;return this.type=x||I.set.types[I.buffer[d]],this.from=A+I.buffer[d+1],this.to=A+I.buffer[d+2],!0}yield(d){return d?d instanceof Ie?(this.buffer=null,this.yieldNode(d)):(this.buffer=d.context,this.yieldBuf(d.index,d.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(d,x,A){if(!this.buffer)return this.yield(this._tree.nextChild(d<0?this._tree._tree.children.length-1:0,d,x,A,this.mode));let{buffer:I}=this.buffer,E=I.findChild(this.index+4,I.buffer[this.index+3],d,x-this.buffer.start,A);return E<0?!1:(this.stack.push(this.index),this.yieldBuf(E))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(d){return this.enterChild(1,d,2)}childBefore(d){return this.enterChild(-1,d,-2)}enter(d,x,A=this.mode){return this.buffer?A&de.ExcludeBuffers?!1:this.enterChild(1,d,x):this.yield(this._tree.enter(d,x,A))}parent(){if(!this.buffer)return this.yieldNode(this.mode&de.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let d=this.mode&de.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(d)}sibling(d){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+d,d,0,4,this.mode)):!1;let{buffer:x}=this.buffer,A=this.stack.length-1;if(d<0){let I=A<0?0:this.stack[A]+4;if(this.index!=I)return this.yieldBuf(x.findChild(I,this.index,-1,0,4))}else{let I=x.buffer[this.index+3];if(I<(A<0?x.buffer.length:x.buffer[this.stack[A]+3]))return this.yieldBuf(I)}return A<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+d,d,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(d){let x,A,{buffer:I}=this;if(I){if(d>0){if(this.index<I.buffer.buffer.length)return!1}else for(let E=0;E<this.index;E++)if(I.buffer.buffer[E+3]<this.index)return!1;({index:x,parent:A}=I)}else({index:x,_parent:A}=this._tree);for(;A;{index:x,_parent:A}=A)if(x>-1)for(let E=x+d,_=d<0?-1:A._tree.children.length;E!=_;E+=d){let U=A._tree.children[E];if(this.mode&de.IncludeAnonymous||U instanceof he||!U.type.isAnonymous||pt(U))return!1}return!0}move(d,x){if(x&&this.enterChild(d,0,4))return!0;for(;;){if(this.sibling(d))return!0;if(this.atLastNode(d)||!this.parent())return!1}}next(d=!0){return this.move(1,d)}prev(d=!0){return this.move(-1,d)}moveTo(d,x=0){for(;(this.from==this.to||(x<1?this.from>=d:this.from>d)||(x>-1?this.to<=d:this.to<d))&&this.parent(););for(;this.enterChild(1,d,x););return this}get node(){if(!this.buffer)return this._tree;let d=this.bufferNode,x=null,A=0;if(d&&d.context==this.buffer)e:for(let I=this.index,E=this.stack.length;E>=0;){for(let _=d;_;_=_._parent)if(_.index==I){if(I==this.index)return _;x=_,A=E+1;break e}I=this.stack[--E]}for(let I=A;I<this.stack.length;I++)x=new je(this.buffer,x,this.stack[I]);return this.bufferNode=new je(this.buffer,x,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(d,x){for(let A=0;;){let I=!1;if(this.type.isAnonymous||d(this)!==!1){if(this.firstChild()){A++;continue}this.type.isAnonymous||(I=!0)}for(;;){if(I&&x&&x(this),I=this.type.isAnonymous,!A)return;if(this.nextSibling())break;this.parent(),A--,I=!0}}}matchContext(d){if(!this.buffer)return st(this.node.parent,d);let{buffer:x}=this.buffer,{types:A}=x.set;for(let I=d.length-1,E=this.stack.length-1;I>=0;E--){if(E<0)return st(this._tree,d,I);let _=A[x.buffer[this.stack[E]]];if(!_.isAnonymous){if(d[I]&&d[I]!=_.name)return!1;I--}}return!0}}function pt($){return $.children.some(d=>d instanceof he||!d.type.isAnonymous||pt(d))}function yt($){var d;let{buffer:x,nodeSet:A,maxBufferLength:I=J,reused:E=[],minRepeatType:_=A.types.length}=$,U=Array.isArray(x)?new Se(x,x.length):x,Y=A.types,ue=0,ye=0;function me(Ye,dt,fe,$e,lt,at){let{id:Ue,start:Ae,end:nt,size:ft}=U,Ct=ye,Mt=ue;if(ft<0)if(U.next(),ft==-1){let Ot=E[Ue];fe.push(Ot),$e.push(Ae-Ye);return}else if(ft==-3){ue=Ue;return}else if(ft==-4){ye=Ue;return}else throw new RangeError(`Unrecognized record size: ${ft}`);let Nt=Y[Ue],qt,Et,rn=Ae-Ye;if(nt-Ae<=I&&(Et=Ze(U.pos-dt,lt))){let Ot=new Uint16Array(Et.size-Et.skip),Me=U.pos-Et.size,bt=Ot.length;for(;U.pos>Me;)bt=Bt(Et.start,Ot,bt);qt=new he(Ot,nt-Et.start,A),rn=Et.start-Ye}else{let Ot=U.pos-ft;U.next();let Me=[],bt=[],$t=Ue>=_?Ue:-1,Vt=0,_t=nt;for(;U.pos>Ot;)$t>=0&&U.id==$t&&U.size>=0?(U.end<=_t-I&&(ze(Me,bt,Ae,Vt,U.end,_t,$t,Ct,Mt),Vt=Me.length,_t=U.end),U.next()):at>2500?be(Ae,Ot,Me,bt):me(Ae,Ot,Me,bt,$t,at+1);if($t>=0&&Vt>0&&Vt<Me.length&&ze(Me,bt,Ae,Vt,Ae,_t,$t,Ct,Mt),Me.reverse(),bt.reverse(),$t>-1&&Vt>0){let en=Je(Nt,Mt);qt=tt(Nt,Me,bt,0,Me.length,0,nt-Ae,en,en)}else qt=vt(Nt,Me,bt,nt-Ae,Ct-nt,Mt)}fe.push(qt),$e.push(rn)}function be(Ye,dt,fe,$e){let lt=[],at=0,Ue=-1;for(;U.pos>dt;){let{id:Ae,start:nt,end:ft,size:Ct}=U;if(Ct>4)U.next();else{if(Ue>-1&&nt<Ue)break;Ue<0&&(Ue=ft-I),lt.push(Ae,nt,ft),at++,U.next()}}if(at){let Ae=new Uint16Array(at*4),nt=lt[lt.length-2];for(let ft=lt.length-3,Ct=0;ft>=0;ft-=3)Ae[Ct++]=lt[ft],Ae[Ct++]=lt[ft+1]-nt,Ae[Ct++]=lt[ft+2]-nt,Ae[Ct++]=Ct;fe.push(new he(Ae,lt[2]-nt,A)),$e.push(nt-Ye)}}function Je(Ye,dt){return(fe,$e,lt)=>{let at=0,Ue=fe.length-1,Ae,nt;if(Ue>=0&&(Ae=fe[Ue])instanceof Le){if(!Ue&&Ae.type==Ye&&Ae.length==lt)return Ae;(nt=Ae.prop(D.lookAhead))&&(at=$e[Ue]+Ae.length+nt)}return vt(Ye,fe,$e,lt,at,dt)}}function ze(Ye,dt,fe,$e,lt,at,Ue,Ae,nt){let ft=[],Ct=[];for(;Ye.length>$e;)ft.push(Ye.pop()),Ct.push(dt.pop()+fe-lt);Ye.push(vt(A.types[Ue],ft,Ct,at-lt,Ae-at,nt)),dt.push(lt-fe)}function vt(Ye,dt,fe,$e,lt,at,Ue){if(at){let Ae=[D.contextHash,at];Ue=Ue?[Ae].concat(Ue):[Ae]}if(lt>25){let Ae=[D.lookAhead,lt];Ue=Ue?[Ae].concat(Ue):[Ae]}return new Le(Ye,dt,fe,$e,Ue)}function Ze(Ye,dt){let fe=U.fork(),$e=0,lt=0,at=0,Ue=fe.end-I,Ae={size:0,start:0,skip:0};e:for(let nt=fe.pos-Ye;fe.pos>nt;){let ft=fe.size;if(fe.id==dt&&ft>=0){Ae.size=$e,Ae.start=lt,Ae.skip=at,at+=4,$e+=4,fe.next();continue}let Ct=fe.pos-ft;if(ft<0||Ct<nt||fe.start<Ue)break;let Mt=fe.id>=_?4:0,Nt=fe.start;for(fe.next();fe.pos>Ct;){if(fe.size<0)if(fe.size==-3||fe.size==-4)Mt+=4;else break e;else fe.id>=_&&(Mt+=4);fe.next()}lt=Nt,$e+=ft,at+=Mt}return(dt<0||$e==Ye)&&(Ae.size=$e,Ae.start=lt,Ae.skip=at),Ae.size>4?Ae:void 0}function Bt(Ye,dt,fe){let{id:$e,start:lt,end:at,size:Ue}=U;if(U.next(),Ue>=0&&$e<_){let Ae=fe;if(Ue>4){let nt=U.pos-(Ue-4);for(;U.pos>nt;)fe=Bt(Ye,dt,fe)}dt[--fe]=Ae,dt[--fe]=at-Ye,dt[--fe]=lt-Ye,dt[--fe]=$e}else Ue==-3?ue=$e:Ue==-4&&(ye=$e);return fe}let mt=[],ot=[];for(;U.pos>0;)me($.start||0,$.bufferStart||0,mt,ot,-1,0);let It=(d=$.length)!==null&&d!==void 0?d:mt.length?ot[0]+mt[0].length:0;return new Le(Y[$.topID],mt.reverse(),ot.reverse(),It)}const Ut=new WeakMap;function ht($,d){if(!$.isAnonymous||d instanceof he||d.type!=$)return 1;let x=Ut.get(d);if(x==null){x=1;for(let A of d.children){if(A.type!=$||!(A instanceof Le)){x=1;break}x+=ht($,A)}Ut.set(d,x)}return x}function tt($,d,x,A,I,E,_,U,Y){let ue=0;for(let ze=A;ze<I;ze++)ue+=ht($,d[ze]);let ye=Math.ceil(ue*1.5/8),me=[],be=[];function Je(ze,vt,Ze,Bt,mt){for(let ot=Ze;ot<Bt;){let It=ot,Ye=vt[ot],dt=ht($,ze[ot]);for(ot++;ot<Bt;ot++){let fe=ht($,ze[ot]);if(dt+fe>=ye)break;dt+=fe}if(ot==It+1){if(dt>ye){let fe=ze[It];Je(fe.children,fe.positions,0,fe.children.length,vt[It]+mt);continue}me.push(ze[It])}else{let fe=vt[ot-1]+ze[ot-1].length-Ye;me.push(tt($,ze,vt,It,ot,Ye,fe,null,Y))}be.push(Ye+mt-E)}}return Je(d,x,A,I,0),(U||Y)(me,be,_)}class j{constructor(){this.map=new WeakMap}setBuffer(d,x,A){let I=this.map.get(d);I||this.map.set(d,I=new Map),I.set(x,A)}getBuffer(d,x){let A=this.map.get(d);return A&&A.get(x)}set(d,x){d instanceof je?this.setBuffer(d.context.buffer,d.index,x):d instanceof Ie&&this.map.set(d.tree,x)}get(d){return d instanceof je?this.getBuffer(d.context.buffer,d.index):d instanceof Ie?this.map.get(d.tree):void 0}cursorSet(d,x){d.buffer?this.setBuffer(d.buffer.buffer,d.index,x):this.map.set(d.tree,x)}cursorGet(d){return d.buffer?this.getBuffer(d.buffer.buffer,d.index):this.map.get(d.tree)}}class ke{constructor(d,x,A,I,E=!1,_=!1){this.from=d,this.to=x,this.tree=A,this.offset=I,this.open=(E?1:0)|(_?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(d,x=[],A=!1){let I=[new ke(0,d.length,d,0,!1,A)];for(let E of x)E.to>d.length&&I.push(E);return I}static applyChanges(d,x,A=128){if(!x.length)return d;let I=[],E=1,_=d.length?d[0]:null;for(let U=0,Y=0,ue=0;;U++){let ye=U<x.length?x[U]:null,me=ye?ye.fromA:1e9;if(me-Y>=A)for(;_&&_.from<me;){let be=_;if(Y>=be.from||me<=be.to||ue){let Je=Math.max(be.from,Y)-ue,ze=Math.min(be.to,me)-ue;be=Je>=ze?null:new ke(Je,ze,be.tree,be.offset+ue,U>0,!!ye)}if(be&&I.push(be),_.to>me)break;_=E<d.length?d[E++]:null}if(!ye)break;Y=ye.toA,ue=ye.toA-ye.toB}return I}}class re{startParse(d,x,A){return typeof d=="string"&&(d=new W(d)),A=A?A.length?A.map(I=>new Q(I.from,I.to)):[new Q(0,0)]:[new Q(0,d.length)],this.createParse(d,x||[],A)}parse(d,x,A){let I=this.startParse(d,x,A);for(;;){let E=I.advance();if(E)return E}}}class W{constructor(d){this.string=d}get length(){return this.string.length}chunk(d){return this.string.slice(d)}get lineChunks(){return!1}read(d,x){return this.string.slice(d,x)}}function G($){return(d,x,A,I)=>new De(d,$,x,A,I)}class le{constructor(d,x,A,I,E,_){this.parser=d,this.parse=x,this.overlay=A,this.bracketed=I,this.target=E,this.from=_}}function ee($){if(!$.length||$.some(d=>d.from>=d.to))throw new RangeError("Invalid inner parse ranges given: "+JSON.stringify($))}class pe{constructor(d,x,A,I,E,_,U,Y){this.parser=d,this.predicate=x,this.mounts=A,this.index=I,this.start=E,this.bracketed=_,this.target=U,this.prev=Y,this.depth=0,this.ranges=[]}}const Be=new D({perNode:!0});class De{constructor(d,x,A,I,E){this.nest=x,this.input=A,this.fragments=I,this.ranges=E,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=d}advance(){if(this.baseParse){let A=this.baseParse.advance();if(!A)return null;if(this.baseParse=null,this.baseTree=A,this.startInner(),this.stoppedAt!=null)for(let I of this.inner)I.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let A=this.baseTree;return this.stoppedAt!=null&&(A=new Le(A.type,A.children,A.positions,A.length,A.propValues.concat([[Be,this.stoppedAt]]))),A}let d=this.inner[this.innerDone],x=d.parse.advance();if(x){this.innerDone++;let A=Object.assign(Object.create(null),d.target.props);A[D.mounted.id]=new K(x,d.overlay,d.parser,d.bracketed),d.target.props=A}return null}get parsedPos(){if(this.baseParse)return 0;let d=this.input.length;for(let x=this.innerDone;x<this.inner.length;x++)this.inner[x].from<d&&(d=Math.min(d,this.inner[x].parse.parsedPos));return d}stopAt(d){if(this.stoppedAt=d,this.baseParse)this.baseParse.stopAt(d);else for(let x=this.innerDone;x<this.inner.length;x++)this.inner[x].parse.stopAt(d)}startInner(){let d=new Ge(this.fragments),x=null,A=null,I=new et(new Ie(this.baseTree,this.ranges[0].from,0,null),de.IncludeAnonymous|de.IgnoreMounts);e:for(let E,_;;){let U=!0,Y;if(this.stoppedAt!=null&&I.from>=this.stoppedAt)U=!1;else if(d.hasNode(I)){if(x){let ue=x.mounts.find(ye=>ye.frag.from<=I.from&&ye.frag.to>=I.to&&ye.mount.overlay);if(ue)for(let ye of ue.mount.overlay){let me=ye.from+ue.pos,be=ye.to+ue.pos;me>=I.from&&be<=I.to&&!x.ranges.some(Je=>Je.from<be&&Je.to>me)&&x.ranges.push({from:me,to:be})}}U=!1}else if(A&&(_=ve(A.ranges,I.from,I.to)))U=_!=2;else if(!I.type.isAnonymous&&(E=this.nest(I,this.input))&&(I.from<I.to||!E.overlay)){I.tree||(Re(I),x&&x.depth++,A&&A.depth++);let ue=d.findMounts(I.from,E.parser);if(typeof E.overlay=="function")x=new pe(E.parser,E.overlay,ue,this.inner.length,I.from,!!E.bracketed,I.tree,x);else{let ye=He(this.ranges,E.overlay||(I.from<I.to?[new Q(I.from,I.to)]:[]));ye.length&&ee(ye),(ye.length||!E.overlay)&&this.inner.push(new le(E.parser,ye.length?E.parser.startParse(this.input,Rt(ue,ye),ye):E.parser.startParse(""),E.overlay?E.overlay.map(me=>new Q(me.from-I.from,me.to-I.from)):null,!!E.bracketed,I.tree,ye.length?ye[0].from:I.from)),E.overlay?ye.length&&(A={ranges:ye,depth:0,prev:A}):U=!1}}else if(x&&(Y=x.predicate(I))&&(Y===!0&&(Y=new Q(I.from,I.to)),Y.from<Y.to)){let ue=x.ranges.length-1;ue>=0&&x.ranges[ue].to==Y.from?x.ranges[ue]={from:x.ranges[ue].from,to:Y.to}:x.ranges.push(Y)}if(U&&I.firstChild())x&&x.depth++,A&&A.depth++;else for(;!I.nextSibling();){if(!I.parent())break e;if(x&&!--x.depth){let ue=He(this.ranges,x.ranges);ue.length&&(ee(ue),this.inner.splice(x.index,0,new le(x.parser,x.parser.startParse(this.input,Rt(x.mounts,ue),ue),x.ranges.map(ye=>new Q(ye.from-x.start,ye.to-x.start)),x.bracketed,x.target,ue[0].from))),x=x.prev}A&&!--A.depth&&(A=A.prev)}}}}function ve($,d,x){for(let A of $){if(A.from>=x)break;if(A.to>d)return A.from<=d&&A.to>=x?2:1}return 0}function Te($,d,x,A,I,E){if(d<x){let _=$.buffer[d+1];A.push($.slice(d,x,_)),I.push(_-E)}}function Re($){let{node:d}=$,x=[],A=d.context.buffer;do x.push($.index),$.parent();while(!$.tree);let I=$.tree,E=I.children.indexOf(A),_=I.children[E],U=_.buffer,Y=[E];function ue(ye,me,be,Je,ze,vt){let Ze=x[vt],Bt=[],mt=[];Te(_,ye,Ze,Bt,mt,Je);let ot=U[Ze+1],It=U[Ze+2];Y.push(Bt.length);let Ye=vt?ue(Ze+4,U[Ze+3],_.set.types[U[Ze]],ot,It-ot,vt-1):d.toTree();return Bt.push(Ye),mt.push(ot-Je),Te(_,U[Ze+3],me,Bt,mt,Je),new Le(be,Bt,mt,ze)}I.children[E]=ue(0,U.length,_e.none,0,_.length,x.length-1);for(let ye of Y){let me=$.tree.children[ye],be=$.tree.positions[ye];$.yield(new Ie(me,be+$.from,ye,$._tree))}}class Ne{constructor(d,x){this.offset=x,this.done=!1,this.cursor=d.cursor(de.IncludeAnonymous|de.IgnoreMounts)}moveTo(d){let{cursor:x}=this,A=d-this.offset;for(;!this.done&&x.from<A;)x.to>=d&&x.enter(A,1,de.IgnoreOverlays|de.ExcludeBuffers)||x.next(!1)||(this.done=!0)}hasNode(d){if(this.moveTo(d.from),!this.done&&this.cursor.from+this.offset==d.from&&this.cursor.tree)for(let x=this.cursor.tree;;){if(x==d.tree)return!0;if(x.children.length&&x.positions[0]==0&&x.children[0]instanceof Le)x=x.children[0];else break}return!1}}class Ge{constructor(d){var x;if(this.fragments=d,this.curTo=0,this.fragI=0,d.length){let A=this.curFrag=d[0];this.curTo=(x=A.tree.prop(Be))!==null&&x!==void 0?x:A.to,this.inner=new Ne(A.tree,-A.offset)}else this.curFrag=this.inner=null}hasNode(d){for(;this.curFrag&&d.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=d.from&&this.curTo>=d.to&&this.inner.hasNode(d)}nextFrag(){var d;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let x=this.curFrag=this.fragments[this.fragI];this.curTo=(d=x.tree.prop(Be))!==null&&d!==void 0?d:x.to,this.inner=new Ne(x.tree,-x.offset)}}findMounts(d,x){var A;let I=[];if(this.inner){this.inner.cursor.moveTo(d,1);for(let E=this.inner.cursor.node;E;E=E.parent){let _=(A=E.tree)===null||A===void 0?void 0:A.prop(D.mounted);if(_&&_.parser==x)for(let U=this.fragI;U<this.fragments.length;U++){let Y=this.fragments[U];if(Y.from>=E.to)break;Y.tree==this.curFrag.tree&&I.push({frag:Y,pos:E.from-Y.offset,mount:_})}}}return I}}function He($,d){let x=null,A=d;for(let I=1,E=0;I<$.length;I++){let _=$[I-1].to,U=$[I].from;for(;E<A.length;E++){let Y=A[E];if(Y.from>=U)break;Y.to<=_||(x||(A=x=d.slice()),Y.from<_?(x[E]=new Q(Y.from,_),Y.to>U&&x.splice(E+1,0,new Q(U,Y.to))):Y.to>U?x[E--]=new Q(U,Y.to):x.splice(E--,1))}}return A}function Jt($,d,x,A){let I=0,E=0,_=!1,U=!1,Y=-1e9,ue=[];for(;;){let ye=I==$.length?1e9:_?$[I].to:$[I].from,me=E==d.length?1e9:U?d[E].to:d[E].from;if(_!=U){let be=Math.max(Y,x),Je=Math.min(ye,me,A);be<Je&&ue.push(new Q(be,Je))}if(Y=Math.min(ye,me),Y==1e9)break;ye==Y&&(_?(_=!1,I++):_=!0),me==Y&&(U?(U=!1,E++):U=!0)}return ue}function Rt($,d){let x=[];for(let{pos:A,mount:I,frag:E}of $){let _=A+(I.overlay?I.overlay[0].from:0),U=_+I.tree.length,Y=Math.max(E.from,_),ue=Math.min(E.to,U);if(I.overlay){let ye=I.overlay.map(be=>new Q(be.from+A,be.to+A)),me=Jt(d,ye,Y,ue);for(let be=0,Je=Y;;be++){let ze=be==me.length,vt=ze?ue:me[be].from;if(vt>Je&&x.push(new ke(Je,vt,I.tree,-_,E.from>=Je||E.openStart,E.to<=vt||E.openEnd)),ze)break;Je=me[be].to}}else x.push(new ke(Y,ue,I.tree,-_,E.from>=_||E.openStart,E.to<=U||E.openEnd))}return x}},35524:function(Wt,Xe,ne){ne.d(Xe,{Gv:function(){return qe},QR:function(){return de},Vp:function(){return Q},bW:function(){return Se},pJ:function(){return j}});var J=ne(41113);let ie=0;class Q{constructor(W,G,le,ee){this.name=W,this.set=G,this.base=le,this.modified=ee,this.id=ie++}toString(){let{name:W}=this;for(let G of this.modified)G.name&&(W=`${G.name}(${W})`);return W}static define(W,G){let le=typeof W=="string"?W:"?";if(W instanceof Q&&(G=W),G!=null&&G.base)throw new Error("Can not derive from a modified tag");let ee=new Q(le,[],null,[]);if(ee.set.push(ee),G)for(let pe of G.set)ee.set.push(pe);return ee}static defineModifier(W){let G=new K(W);return le=>le.modified.indexOf(G)>-1?le:K.get(le.base||le,le.modified.concat(G).sort((ee,pe)=>ee.id-pe.id))}}let D=0;class K{constructor(W){this.name=W,this.instances=[],this.id=D++}static get(W,G){if(!G.length)return W;let le=G[0].instances.find(De=>De.base==W&&xe(G,De.modified));if(le)return le;let ee=[],pe=new Q(W.name,ee,W,G);for(let De of G)De.instances.push(pe);let Be=_e(G);for(let De of W.set)if(!De.modified.length)for(let ve of Be)ee.push(K.get(De,ve));return pe}}function xe(re,W){return re.length==W.length&&re.every((G,le)=>G==W[le])}function _e(re){let W=[[]];for(let G=0;G<re.length;G++)for(let le=0,ee=W.length;le<ee;le++)W.push(W[le].concat(re[G]));return W.sort((G,le)=>le.length-G.length)}function qe(re){let W=Object.create(null);for(let G in re){let le=re[G];Array.isArray(le)||(le=[le]);for(let ee of G.split(" "))if(ee){let pe=[],Be=2,De=ee;for(let Ne=0;;){if(De=="..."&&Ne>0&&Ne+3==ee.length){Be=1;break}let Ge=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(De);if(!Ge)throw new RangeError("Invalid path: "+ee);if(pe.push(Ge[0]=="*"?"":Ge[0][0]=='"'?JSON.parse(Ge[0]):Ge[0]),Ne+=Ge[0].length,Ne==ee.length)break;let He=ee[Ne++];if(Ne==ee.length&&He=="!"){Be=0;break}if(He!="/")throw new RangeError("Invalid path: "+ee);De=ee.slice(Ne)}let ve=pe.length-1,Te=pe[ve];if(!Te)throw new RangeError("Invalid path: "+ee);let Re=new ce(le,Be,ve>0?pe.slice(0,ve):null);W[Te]=Re.sort(W[Te])}}return Pe.add(W)}const Pe=new J.md({combine(re,W){let G,le,ee;for(;re||W;){if(!re||W&&re.depth>=W.depth?(ee=W,W=W.next):(ee=re,re=re.next),G&&G.mode==ee.mode&&!ee.context&&!G.context)continue;let pe=new ce(ee.tags,ee.mode,ee.context);G?G.next=pe:le=pe,G=pe}return le}});class ce{constructor(W,G,le,ee){this.tags=W,this.mode=G,this.context=le,this.next=ee}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(W){return!W||W.depth<this.depth?(this.next=W,this):(W.next=this.sort(W.next),W)}get depth(){return this.context?this.context.length:0}}ce.empty=new ce([],2,null);function de(re,W){let G=Object.create(null);for(let pe of re)if(!Array.isArray(pe.tag))G[pe.tag.id]=pe.class;else for(let Be of pe.tag)G[Be.id]=pe.class;let{scope:le,all:ee=null}=W||{};return{style:pe=>{let Be=ee;for(let De of pe)for(let ve of De.set){let Te=G[ve.id];if(Te){Be=Be?Be+" "+Te:Te;break}}return Be},scope:le}}function Le(re,W){let G=null;for(let le of re){let ee=le.style(W);ee&&(G=G?G+" "+ee:ee)}return G}function Se(re,W,G,le=0,ee=re.length){let pe=new Oe(le,Array.isArray(W)?W:[W],G);pe.highlightRange(re.cursor(),le,ee,"",pe.highlighters),pe.flush(ee)}function he(re,W,G,le,ee,pe=0,Be=re.length){let De=pe;function ve(Te,Re){if(!(Te<=De)){for(let Ne=re.slice(De,Te),Ge=0;;){let He=Ne.indexOf(`
`,Ge),Jt=He<0?Ne.length:He;if(Jt>Ge&&le(Ne.slice(Ge,Jt),Re),He<0)break;ee(),Ge=He+1}De=Te}}Se(W,G,(Te,Re,Ne)=>{ve(Te,""),ve(Re,Ne)},pe,Be),ve(Be,"")}class Oe{constructor(W,G,le){this.at=W,this.highlighters=G,this.span=le,this.class=""}startSpan(W,G){G!=this.class&&(this.flush(W),W>this.at&&(this.at=W),this.class=G)}flush(W){W>this.at&&this.class&&this.span(this.at,W,this.class)}highlightRange(W,G,le,ee,pe){let{type:Be,from:De,to:ve}=W;if(De>=le||ve<=G)return;Be.isTop&&(pe=this.highlighters.filter(He=>!He.scope||He.scope(Be)));let Te=ee,Re=Ce(W)||ce.empty,Ne=Le(pe,Re.tags);if(Ne&&(Te&&(Te+=" "),Te+=Ne,Re.mode==1&&(ee+=(ee?" ":"")+Ne)),this.startSpan(Math.max(G,De),Te),Re.opaque)return;let Ge=W.tree&&W.tree.prop(J.md.mounted);if(Ge&&Ge.overlay){let He=W.node.enter(Ge.overlay[0].from+De,1),Jt=this.highlighters.filter($=>!$.scope||$.scope(Ge.tree.type)),Rt=W.firstChild();for(let $=0,d=De;;$++){let x=$<Ge.overlay.length?Ge.overlay[$]:null,A=x?x.from+De:ve,I=Math.max(G,d),E=Math.min(le,A);if(I<E&&Rt)for(;W.from<E&&(this.highlightRange(W,I,E,ee,pe),this.startSpan(Math.min(E,W.to),Te),!(W.to>=A||!W.nextSibling())););if(!x||A>le)break;d=x.to+De,d>G&&(this.highlightRange(He.cursor(),Math.max(G,x.from+De),Math.min(le,d),"",Jt),this.startSpan(Math.min(le,d),Te))}Rt&&W.parent()}else if(W.firstChild()){Ge&&(ee="");do if(!(W.to<=G)){if(W.from>=le)break;this.highlightRange(W,G,le,ee,pe),this.startSpan(Math.min(le,W.to),Te)}while(W.nextSibling());W.parent()}}}function Ce(re){let W=re.type.prop(Pe);for(;W&&W.context&&!re.matchContext(W.context);)W=W.next;return W||null}const q=Q.define,Ie=q(),rt=q(),st=q(rt),Ve=q(rt),je=q(),gt=q(je),ut=q(je),ct=q(),et=q(ct),pt=q(),yt=q(),Ut=q(),ht=q(Ut),tt=q(),j={comment:Ie,lineComment:q(Ie),blockComment:q(Ie),docComment:q(Ie),name:rt,variableName:q(rt),typeName:st,tagName:q(st),propertyName:Ve,attributeName:q(Ve),className:q(rt),labelName:q(rt),namespace:q(rt),macroName:q(rt),literal:je,string:gt,docString:q(gt),character:q(gt),attributeValue:q(gt),number:ut,integer:q(ut),float:q(ut),bool:q(je),regexp:q(je),escape:q(je),color:q(je),url:q(je),keyword:pt,self:q(pt),null:q(pt),atom:q(pt),unit:q(pt),modifier:q(pt),operatorKeyword:q(pt),controlKeyword:q(pt),definitionKeyword:q(pt),moduleKeyword:q(pt),operator:yt,derefOperator:q(yt),arithmeticOperator:q(yt),logicOperator:q(yt),bitwiseOperator:q(yt),compareOperator:q(yt),updateOperator:q(yt),definitionOperator:q(yt),typeOperator:q(yt),controlOperator:q(yt),punctuation:Ut,separator:q(Ut),bracket:ht,angleBracket:q(ht),squareBracket:q(ht),paren:q(ht),brace:q(ht),content:ct,heading:et,heading1:q(et),heading2:q(et),heading3:q(et),heading4:q(et),heading5:q(et),heading6:q(et),contentSeparator:q(ct),list:q(ct),quote:q(ct),emphasis:q(ct),strong:q(ct),link:q(ct),monospace:q(ct),strikethrough:q(ct),inserted:q(),deleted:q(),changed:q(),invalid:q(),meta:tt,documentMeta:q(tt),annotation:q(tt),processingInstruction:q(tt),definition:Q.defineModifier("definition"),constant:Q.defineModifier("constant"),function:Q.defineModifier("function"),standard:Q.defineModifier("standard"),local:Q.defineModifier("local"),special:Q.defineModifier("special")};for(let re in j){let W=j[re];W instanceof Q&&(W.name=re)}const ke=de([{tag:j.link,class:"tok-link"},{tag:j.heading,class:"tok-heading"},{tag:j.emphasis,class:"tok-emphasis"},{tag:j.strong,class:"tok-strong"},{tag:j.keyword,class:"tok-keyword"},{tag:j.atom,class:"tok-atom"},{tag:j.bool,class:"tok-bool"},{tag:j.url,class:"tok-url"},{tag:j.labelName,class:"tok-labelName"},{tag:j.inserted,class:"tok-inserted"},{tag:j.deleted,class:"tok-deleted"},{tag:j.literal,class:"tok-literal"},{tag:j.string,class:"tok-string"},{tag:j.number,class:"tok-number"},{tag:[j.regexp,j.escape,j.special(j.string)],class:"tok-string2"},{tag:j.variableName,class:"tok-variableName"},{tag:j.local(j.variableName),class:"tok-variableName tok-local"},{tag:j.definition(j.variableName),class:"tok-variableName tok-definition"},{tag:j.special(j.variableName),class:"tok-variableName2"},{tag:j.definition(j.propertyName),class:"tok-propertyName tok-definition"},{tag:j.typeName,class:"tok-typeName"},{tag:j.namespace,class:"tok-namespace"},{tag:j.className,class:"tok-className"},{tag:j.macroName,class:"tok-macroName"},{tag:j.propertyName,class:"tok-propertyName"},{tag:j.operator,class:"tok-operator"},{tag:j.comment,class:"tok-comment"},{tag:j.meta,class:"tok-meta"},{tag:j.invalid,class:"tok-invalid"},{tag:j.punctuation,class:"tok-punctuation"}])},11106:function(Wt,Xe,ne){ne.d(Xe,{tk:function(){return K.tk},ZP:function(){return Vs}});var J=ne(87462),ie=ne(63366),Q=ne(67294),D=ne(37205),K=ne(47421),xe=ne(59119),_e=ne(41113);const qe=t=>{let{state:e}=t,r=e.doc.lineAt(e.selection.main.from),o=q(t.state,r.from);return o.line?ce(t):o.block?Ce(t):!1};function Pe(t,e){return({state:r,dispatch:o})=>{if(r.readOnly)return!1;let h=t(e,r);return h?(o(r.update(h)),!0):!1}}const ce=Pe(je,0),de=null,Le=null,Se=Pe(Ve,0),he=null,Oe=null,Ce=Pe((t,e)=>Ve(t,e,st(e)),0);function q(t,e){let r=t.languageDataAt("commentTokens",e,1);return r.length?r[0]:{}}const Ie=50;function rt(t,{open:e,close:r},o,h){let m=t.sliceDoc(o-Ie,o),C=t.sliceDoc(h,h+Ie),B=/\s*$/.exec(m)[0].length,N=/^\s*/.exec(C)[0].length,Z=m.length-B;if(m.slice(Z-e.length,Z)==e&&C.slice(N,N+r.length)==r)return{open:{pos:o-B,margin:B&&1},close:{pos:h+N,margin:N&&1}};let te,ge;h-o<=2*Ie?te=ge=t.sliceDoc(o,h):(te=t.sliceDoc(o,o+Ie),ge=t.sliceDoc(h-Ie,h));let Ee=/^\s*/.exec(te)[0].length,Qe=/\s*$/.exec(ge)[0].length,it=ge.length-Qe-r.length;return te.slice(Ee,Ee+e.length)==e&&ge.slice(it,it+r.length)==r?{open:{pos:o+Ee+e.length,margin:/\s/.test(te.charAt(Ee+e.length))?1:0},close:{pos:h-Qe-r.length,margin:/\s/.test(ge.charAt(it-1))?1:0}}:null}function st(t){let e=[];for(let r of t.selection.ranges){let o=t.doc.lineAt(r.from),h=r.to<=o.to?o:t.doc.lineAt(r.to);h.from>o.from&&h.from==r.to&&(h=r.to==o.to+1?o:t.doc.lineAt(r.to-1));let m=e.length-1;m>=0&&e[m].to>o.from?e[m].to=h.to:e.push({from:o.from+/^\s*/.exec(o.text)[0].length,to:h.to})}return e}function Ve(t,e,r=e.selection.ranges){let o=r.map(m=>q(e,m.from).block);if(!o.every(m=>m))return null;let h=r.map((m,C)=>rt(e,o[C],m.from,m.to));if(t!=2&&!h.every(m=>m))return{changes:e.changes(r.map((m,C)=>h[C]?[]:[{from:m.from,insert:o[C].open+" "},{from:m.to,insert:" "+o[C].close}]))};if(t!=1&&h.some(m=>m)){let m=[];for(let C=0,B;C<h.length;C++)if(B=h[C]){let N=o[C],{open:Z,close:te}=B;m.push({from:Z.pos-N.open.length,to:Z.pos+Z.margin},{from:te.pos-te.margin,to:te.pos+N.close.length})}return{changes:m}}return null}function je(t,e,r=e.selection.ranges){let o=[],h=-1;for(let{from:m,to:C}of r){let B=o.length,N=1e9,Z=q(e,m).line;if(Z){for(let te=m;te<=C;){let ge=e.doc.lineAt(te);if(ge.from>h&&(m==C||C>ge.from)){h=ge.from;let Ee=/^\s*/.exec(ge.text)[0].length,Qe=Ee==ge.length,it=ge.text.slice(Ee,Ee+Z.length)==Z?Ee:-1;Ee<ge.text.length&&Ee<N&&(N=Ee),o.push({line:ge,comment:it,token:Z,indent:Ee,empty:Qe,single:!1})}te=ge.to+1}if(N<1e9)for(let te=B;te<o.length;te++)o[te].indent<o[te].line.text.length&&(o[te].indent=N);o.length==B+1&&(o[B].single=!0)}}if(t!=2&&o.some(m=>m.comment<0&&(!m.empty||m.single))){let m=[];for(let{line:B,token:N,indent:Z,empty:te,single:ge}of o)(ge||!te)&&m.push({from:B.from+Z,insert:N+" "});let C=e.changes(m);return{changes:C,selection:e.selection.map(C,1)}}else if(t!=1&&o.some(m=>m.comment>=0)){let m=[];for(let{line:C,comment:B,token:N}of o)if(B>=0){let Z=C.from+B,te=Z+N.length;C.text[te-C.from]==" "&&te++,m.push({from:Z,to:te})}return{changes:m}}return null}const gt=D.q6.define(),ut=D.q6.define(),ct=D.r$.define(),et=D.r$.define({combine(t){return(0,D.BO)(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,r)=>r},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,r)=>(o,h)=>e(o,h)||r(o,h)})}}),pt=D.QQ.define({create(){return $.empty},update(t,e){let r=e.state.facet(et),o=e.annotation(gt);if(o){let N=ee.fromTransaction(e,o.selection),Z=o.side,te=Z==0?t.undone:t.done;return N?te=pe(te,te.length,r.minDepth,N):te=Ne(te,e.startState.selection),new $(Z==0?o.rest:te,Z==0?te:o.rest)}let h=e.annotation(ut);if((h=="full"||h=="before")&&(t=t.isolate()),e.annotation(D.YW.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let m=ee.fromTransaction(e),C=e.annotation(D.YW.time),B=e.annotation(D.YW.userEvent);return m?t=t.addChanges(m,C,B,r,e):e.selection&&(t=t.addSelection(e.startState.selection,C,B,r.newGroupDelay)),(h=="full"||h=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new $(t.done.map(ee.fromJSON),t.undone.map(ee.fromJSON))}});function yt(t={}){return[pt,et.of(t),K.tk.domEventHandlers({beforeinput(e,r){let o=e.inputType=="historyUndo"?tt:e.inputType=="historyRedo"?j:null;return o?(e.preventDefault(),o(r)):!1}})]}const Ut=null;function ht(t,e){return function({state:r,dispatch:o}){if(!e&&r.readOnly)return!1;let h=r.field(pt,!1);if(!h)return!1;let m=h.pop(t,r,e);return m?(o(m),!0):!1}}const tt=ht(0,!1),j=ht(1,!1),ke=ht(0,!0),re=ht(1,!0);function W(t){return function(e){let r=e.field(pt,!1);if(!r)return 0;let o=t==0?r.done:r.undone;return o.length-(o.length&&!o[0].changes?1:0)}}const G=null,le=null;class ee{constructor(e,r,o,h,m){this.changes=e,this.effects=r,this.mapped=o,this.startSelection=h,this.selectionsAfter=m}setSelAfter(e){return new ee(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,r,o;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(r=this.mapped)===null||r===void 0?void 0:r.toJSON(),startSelection:(o=this.startSelection)===null||o===void 0?void 0:o.toJSON(),selectionsAfter:this.selectionsAfter.map(h=>h.toJSON())}}static fromJSON(e){return new ee(e.changes&&D.as.fromJSON(e.changes),[],e.mapped&&D.n0.fromJSON(e.mapped),e.startSelection&&D.jT.fromJSON(e.startSelection),e.selectionsAfter.map(D.jT.fromJSON))}static fromTransaction(e,r){let o=Te;for(let h of e.startState.facet(ct)){let m=h(e);m.length&&(o=o.concat(m))}return!o.length&&e.changes.empty?null:new ee(e.changes.invert(e.startState.doc),o,void 0,r||e.startState.selection,Te)}static selection(e){return new ee(void 0,Te,void 0,void 0,e)}}function pe(t,e,r,o){let h=e+1>r+20?e-r-1:0,m=t.slice(h,e);return m.push(o),m}function Be(t,e){let r=[],o=!1;return t.iterChangedRanges((h,m)=>r.push(h,m)),e.iterChangedRanges((h,m,C,B)=>{for(let N=0;N<r.length;){let Z=r[N++],te=r[N++];B>=Z&&C<=te&&(o=!0)}}),o}function De(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((r,o)=>r.empty!=e.ranges[o].empty).length===0}function ve(t,e){return t.length?e.length?t.concat(e):t:e}const Te=[],Re=200;function Ne(t,e){if(t.length){let r=t[t.length-1],o=r.selectionsAfter.slice(Math.max(0,r.selectionsAfter.length-Re));return o.length&&o[o.length-1].eq(e)?t:(o.push(e),pe(t,t.length-1,1e9,r.setSelAfter(o)))}else return[ee.selection([e])]}function Ge(t){let e=t[t.length-1],r=t.slice();return r[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),r}function He(t,e){if(!t.length)return t;let r=t.length,o=Te;for(;r;){let h=Jt(t[r-1],e,o);if(h.changes&&!h.changes.empty||h.effects.length){let m=t.slice(0,r);return m[r-1]=h,m}else e=h.mapped,r--,o=h.selectionsAfter}return o.length?[ee.selection(o)]:Te}function Jt(t,e,r){let o=ve(t.selectionsAfter.length?t.selectionsAfter.map(B=>B.map(e)):Te,r);if(!t.changes)return ee.selection(o);let h=t.changes.map(e),m=e.mapDesc(t.changes,!0),C=t.mapped?t.mapped.composeDesc(m):m;return new ee(h,D.Py.mapEffects(t.effects,e),C,t.startSelection.map(m),o)}const Rt=/^(input\.type|delete)($|\.)/;class ${constructor(e,r,o=0,h=void 0){this.done=e,this.undone=r,this.prevTime=o,this.prevUserEvent=h}isolate(){return this.prevTime?new $(this.done,this.undone):this}addChanges(e,r,o,h,m){let C=this.done,B=C[C.length-1];return B&&B.changes&&!B.changes.empty&&e.changes&&(!o||Rt.test(o))&&(!B.selectionsAfter.length&&r-this.prevTime<h.newGroupDelay&&h.joinToEvent(m,Be(B.changes,e.changes))||o=="input.type.compose")?C=pe(C,C.length-1,h.minDepth,new ee(e.changes.compose(B.changes),ve(D.Py.mapEffects(e.effects,B.changes),B.effects),B.mapped,B.startSelection,Te)):C=pe(C,C.length,h.minDepth,e),new $(C,Te,r,o)}addSelection(e,r,o,h){let m=this.done.length?this.done[this.done.length-1].selectionsAfter:Te;return m.length>0&&r-this.prevTime<h&&o==this.prevUserEvent&&o&&/^select($|\.)/.test(o)&&De(m[m.length-1],e)?this:new $(Ne(this.done,e),this.undone,r,o)}addMapping(e){return new $(He(this.done,e),He(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,r,o){let h=e==0?this.done:this.undone;if(h.length==0)return null;let m=h[h.length-1],C=m.selectionsAfter[0]||r.selection;if(o&&m.selectionsAfter.length)return r.update({selection:m.selectionsAfter[m.selectionsAfter.length-1],annotations:gt.of({side:e,rest:Ge(h),selection:C}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(m.changes){let B=h.length==1?Te:h.slice(0,h.length-1);return m.mapped&&(B=He(B,m.mapped)),r.update({changes:m.changes,selection:m.startSelection,effects:m.effects,annotations:gt.of({side:e,rest:B,selection:C}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}$.empty=new $(Te,Te);const d=[{key:"Mod-z",run:tt,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:j,preventDefault:!0},{linux:"Ctrl-Shift-z",run:j,preventDefault:!0},{key:"Mod-u",run:ke,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:re,preventDefault:!0}];function x(t,e){return D.jT.create(t.ranges.map(e),t.mainIndex)}function A(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function I({state:t,dispatch:e},r){let o=x(t.selection,r);return o.eq(t.selection,!0)?!1:(e(A(t,o)),!0)}function E(t,e){return D.jT.cursor(e?t.to:t.from)}function _(t,e){return I(t,r=>r.empty?t.moveByChar(r,e):E(r,e))}function U(t){return t.textDirectionAt(t.state.selection.main.head)==K.Nm.LTR}const Y=t=>_(t,!U(t)),ue=t=>_(t,U(t)),ye=t=>_(t,!0),me=t=>_(t,!1);function be(t,e,r){let o=e.head,h=t.doc.lineAt(o);return o==(r?h.to:h.from)?o=r?Math.min(t.doc.length,h.to+1):Math.max(0,h.from-1):o=h.from+findClusterBreak(h.text,o-h.from,r),EditorSelection.cursor(o,r?-1:1)}function Je(t,e){return I(t,r=>r.empty?be(t.state,r,e):E(r,e))}const ze=t=>Je(t,!0),vt=t=>Je(t,!1);function Ze(t,e){return I(t,r=>r.empty?t.moveByGroup(r,e):E(r,e))}const Bt=t=>Ze(t,!U(t)),mt=t=>Ze(t,U(t)),ot=t=>Ze(t,!0),It=t=>Ze(t,!1);function Ye(t,e,r){let o=t.state.charCategorizer(e),h=o(r),m=h!=CharCategory.Space;return C=>{let B=o(C);return B!=CharCategory.Space?m&&B==h:(m=!1,!0)}}const dt=t=>I(t,e=>e.empty?t.moveByChar(e,!0,r=>Ye(t,e.head,r)):E(e,!0)),fe=typeof Intl!="undefined"&&Intl.Segmenter?new Intl.Segmenter(void 0,{granularity:"word"}):null;function $e(t,e,r){let o=t.state.charCategorizer(e.from),h=CharCategory.Space,m=e.from,C=0,B=!1,N=!1,Z=!1,te=Ee=>{if(B)return!1;m+=r?Ee.length:-Ee.length;let Qe=o(Ee),it;if(Qe==CharCategory.Word&&Ee.charCodeAt(0)<128&&/[\W_]/.test(Ee)&&(Qe=-1),h==CharCategory.Space&&(h=Qe),h!=Qe)return!1;if(h==CharCategory.Word)if(Ee.toLowerCase()==Ee){if(!r&&N)return!1;Z=!0}else if(Z){if(r)return!1;B=!0}else{if(N&&r&&o(it=t.state.sliceDoc(m,m+1))==CharCategory.Word&&it.toLowerCase()==it)return!1;N=!0}return C++,!0},ge=t.moveByChar(e,r,Ee=>(te(Ee),te));if(fe&&h==CharCategory.Word&&ge.from==e.from+C*(r?1:-1)){let Ee=Math.min(e.head,ge.head),Qe=Math.max(e.head,ge.head),it=t.state.sliceDoc(Ee,Qe);if(it.length>1&&/[\u4E00-\uffff]/.test(it)){let kt=Array.from(fe.segment(it));if(kt.length>1)return r?EditorSelection.cursor(e.head+kt[1].index,-1):EditorSelection.cursor(ge.head+kt[kt.length-1].index,1)}}return ge}function lt(t,e){return I(t,r=>r.empty?$e(t,r,e):E(r,e))}const at=t=>lt(t,!0),Ue=t=>lt(t,!1);function Ae(t,e,r){if(e.type.prop(r))return!0;let o=e.to-e.from;return o&&(o>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function nt(t,e,r){let o=(0,xe.qz)(t).resolveInner(e.head),h=r?_e.md.closedBy:_e.md.openedBy;for(let N=e.head;;){let Z=r?o.childAfter(N):o.childBefore(N);if(!Z)break;Ae(t,Z,h)?o=Z:N=r?Z.to:Z.from}let m=o.type.prop(h),C,B;return m&&(C=r?(0,xe.Um)(t,o.from,1):(0,xe.Um)(t,o.to,-1))&&C.matched?B=r?C.end.to:C.end.from:B=r?o.to:o.from,D.jT.cursor(B,r?-1:1)}const ft=t=>I(t,e=>nt(t.state,e,!U(t))),Ct=t=>I(t,e=>nt(t.state,e,U(t)));function Mt(t,e){return I(t,r=>{if(!r.empty)return E(r,e);let o=t.moveVertically(r,e);return o.head!=r.head?o:t.moveToLineBoundary(r,e)})}const Nt=t=>Mt(t,!1),qt=t=>Mt(t,!0);function Et(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,r=0,o=0,h;if(e){for(let m of t.state.facet(K.tk.scrollMargins)){let C=m(t);C!=null&&C.top&&(r=Math.max(C==null?void 0:C.top,r)),C!=null&&C.bottom&&(o=Math.max(C==null?void 0:C.bottom,o))}h=t.scrollDOM.clientHeight-r-o}else h=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:r,marginBottom:o,selfScroll:e,height:Math.max(t.defaultLineHeight,h-5)}}function rn(t,e){let r=Et(t),{state:o}=t,h=x(o.selection,C=>C.empty?t.moveVertically(C,e,r.height):E(C,e));if(h.eq(o.selection))return!1;let m;if(r.selfScroll){let C=t.coordsAtPos(o.selection.main.head),B=t.scrollDOM.getBoundingClientRect(),N=B.top+r.marginTop,Z=B.bottom-r.marginBottom;C&&C.top>N&&C.bottom<Z&&(m=K.tk.scrollIntoView(h.main.head,{y:"start",yMargin:C.top-N}))}return t.dispatch(A(o,h),{effects:m}),!0}const Ot=t=>rn(t,!1),Me=t=>rn(t,!0);function bt(t,e,r){let o=t.lineBlockAt(e.head),h=t.moveToLineBoundary(e,r);if(h.head==e.head&&h.head!=(r?o.to:o.from)&&(h=t.moveToLineBoundary(e,r,!1)),!r&&h.head==o.from&&o.length){let m=/^\s*/.exec(t.state.sliceDoc(o.from,Math.min(o.from+100,o.to)))[0].length;m&&e.head!=o.from+m&&(h=D.jT.cursor(o.from+m))}return h}const $t=t=>I(t,e=>bt(t,e,!0)),Vt=t=>I(t,e=>bt(t,e,!1)),_t=t=>I(t,e=>bt(t,e,!U(t))),en=t=>I(t,e=>bt(t,e,U(t))),un=t=>I(t,e=>D.jT.cursor(t.lineBlockAt(e.head).from,1)),Dt=t=>I(t,e=>D.jT.cursor(t.lineBlockAt(e.head).to,-1));function gn(t,e,r){let o=!1,h=x(t.selection,m=>{let C=(0,xe.Um)(t,m.head,-1)||(0,xe.Um)(t,m.head,1)||m.head>0&&(0,xe.Um)(t,m.head-1,1)||m.head<t.doc.length&&(0,xe.Um)(t,m.head+1,-1);if(!C||!C.end)return m;o=!0;let B=C.start.from==m.head?C.end.to:C.end.from;return r?D.jT.range(m.anchor,B):D.jT.cursor(B)});return o?(e(A(t,h)),!0):!1}const cn=({state:t,dispatch:e})=>gn(t,e,!1),An=({state:t,dispatch:e})=>gn(t,e,!0);function Lt(t,e){let r=x(t.state.selection,o=>{let h=e(o);return D.jT.range(o.anchor,h.head,h.goalColumn,h.bidiLevel||void 0)});return r.eq(t.state.selection)?!1:(t.dispatch(A(t.state,r)),!0)}function Kt(t,e){return Lt(t,r=>t.moveByChar(r,e))}const sn=t=>Kt(t,!U(t)),on=t=>Kt(t,U(t)),Tn=t=>Kt(t,!0),yn=t=>Kt(t,!1),hn=t=>Lt(t,e=>be(t.state,e,!0)),ln=t=>Lt(t,e=>be(t.state,e,!1));function Gt(t,e){return Lt(t,r=>t.moveByGroup(r,e))}const vn=t=>Gt(t,!U(t)),In=t=>Gt(t,U(t)),S=t=>Gt(t,!0),n=t=>Gt(t,!1),i=t=>Lt(t,e=>t.moveByChar(e,!0,r=>Ye(t,e.head,r)));function a(t,e){return Lt(t,r=>$e(t,r,e))}const p=t=>a(t,!0),k=t=>a(t,!1),v=t=>Lt(t,e=>nt(t.state,e,!U(t))),P=t=>Lt(t,e=>nt(t.state,e,U(t)));function c(t,e){return Lt(t,r=>t.moveVertically(r,e))}const s=t=>c(t,!1),f=t=>c(t,!0);function g(t,e){return Lt(t,r=>t.moveVertically(r,e,Et(t).height))}const w=t=>g(t,!1),T=t=>g(t,!0),R=t=>Lt(t,e=>bt(t,e,!0)),z=t=>Lt(t,e=>bt(t,e,!1)),F=t=>Lt(t,e=>bt(t,e,!U(t))),se=t=>Lt(t,e=>bt(t,e,U(t))),X=t=>Lt(t,e=>D.jT.cursor(t.lineBlockAt(e.head).from)),oe=t=>Lt(t,e=>D.jT.cursor(t.lineBlockAt(e.head).to)),We=({state:t,dispatch:e})=>(e(A(t,{anchor:0})),!0),Ke=({state:t,dispatch:e})=>(e(A(t,{anchor:t.doc.length})),!0),At=({state:t,dispatch:e})=>(e(A(t,{anchor:t.selection.main.anchor,head:0})),!0),Ft=({state:t,dispatch:e})=>(e(A(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),xn=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),Zt=({state:t,dispatch:e})=>{let r=Sn(t).map(({from:o,to:h})=>D.jT.range(o,Math.min(h+1,t.doc.length)));return e(t.update({selection:D.jT.create(r),userEvent:"select"})),!0},Tt=({state:t,dispatch:e})=>{let r=x(t.selection,o=>{let h=(0,xe.qz)(t),m=h.resolveStack(o.from,1);if(o.empty){let C=h.resolveStack(o.from,-1);C.node.from>=m.node.from&&C.node.to<=m.node.to&&(m=C)}for(let C=m;C;C=C.next){let{node:B}=C;if((B.from<o.from&&B.to>=o.to||B.to>o.to&&B.from<=o.from)&&C.next)return D.jT.range(B.to,B.from)}return o});return r.eq(t.selection)?!1:(e(A(t,r)),!0)};function fn(t,e){let{state:r}=t,o=r.selection,h=r.selection.ranges.slice();for(let m of r.selection.ranges){let C=r.doc.lineAt(m.head);if(e?C.to<t.state.doc.length:C.from>0)for(let B=m;;){let N=t.moveVertically(B,e);if(N.head<C.from||N.head>C.to){h.some(Z=>Z.head==N.head)||h.push(N);break}else{if(N.head==B.head)break;B=N}}}return h.length==o.ranges.length?!1:(t.dispatch(A(r,D.jT.create(h,h.length-1))),!0)}const Yt=t=>fn(t,!1),zt=t=>fn(t,!0),bn=({state:t,dispatch:e})=>{let r=t.selection,o=null;return r.ranges.length>1?o=D.jT.create([r.main]):r.main.empty||(o=D.jT.create([D.jT.cursor(r.main.head)])),o?(e(A(t,o)),!0):!1};function y(t,e){if(t.state.readOnly)return!1;let r="delete.selection",{state:o}=t,h=o.changeByRange(m=>{let{from:C,to:B}=m;if(C==B){let N=e(m);N<C?(r="delete.backward",N=l(t,N,!1)):N>C&&(r="delete.forward",N=l(t,N,!0)),C=Math.min(C,N),B=Math.max(B,N)}else C=l(t,C,!1),B=l(t,B,!0);return C==B?{range:m}:{changes:{from:C,to:B},range:D.jT.cursor(C,C<m.head?-1:1)}});return h.changes.empty?!1:(t.dispatch(o.update(h,{scrollIntoView:!0,userEvent:r,effects:r=="delete.selection"?K.tk.announce.of(o.phrase("Selection deleted")):void 0})),!0)}function l(t,e,r){if(t instanceof K.tk)for(let o of t.state.facet(K.tk.atomicRanges).map(h=>h(t)))o.between(e,e,(h,m)=>{h<e&&m>e&&(e=r?m:h)});return e}const u=(t,e,r)=>y(t,o=>{let h=o.from,{state:m}=t,C=m.doc.lineAt(h),B,N;if(r&&!e&&h>C.from&&h<C.from+200&&!/[^ \t]/.test(B=C.text.slice(0,h-C.from))){if(B[B.length-1]=="	")return h-1;let Z=(0,D.IS)(B,m.tabSize),te=Z%(0,xe.y1)(m)||(0,xe.y1)(m);for(let ge=0;ge<te&&B[B.length-1-ge]==" ";ge++)h--;N=h}else N=(0,D.cp)(C.text,h-C.from,e,e)+C.from,N==h&&C.number!=(e?m.doc.lines:1)?N+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(C.text.slice(N-C.from,h-C.from))&&(N=(0,D.cp)(C.text,N-C.from,!1,!1)+C.from);return N}),b=t=>u(t,!1,!0),M=t=>u(t,!1,!1),O=t=>u(t,!0,!1),L=(t,e)=>y(t,r=>{let o=r.head,{state:h}=t,m=h.doc.lineAt(o),C=h.charCategorizer(o);for(let B=null;;){if(o==(e?m.to:m.from)){o==r.head&&m.number!=(e?h.doc.lines:1)&&(o+=e?1:-1);break}let N=(0,D.cp)(m.text,o-m.from,e)+m.from,Z=m.text.slice(Math.min(o,N)-m.from,Math.max(o,N)-m.from),te=C(Z);if(B!=null&&te!=B)break;(Z!=" "||o!=r.head)&&(B=te),o=N}return o}),H=t=>L(t,!1),V=t=>L(t,!0),ae=t=>y(t,e=>t.moveByChar(e,!0,r=>Ye(t,e.head,r)).head),we=t=>y(t,e=>{let r=t.lineBlockAt(e.head).to;return e.head<r?r:Math.min(t.state.doc.length,e.head+1)}),xt=t=>y(t,e=>{let r=t.lineBlockAt(e.head).from;return e.head>r?r:Math.max(0,e.head-1)}),tn=t=>y(t,e=>{let r=t.moveToLineBoundary(e,!1).head;return e.head>r?r:Math.max(0,e.head-1)}),Xt=t=>y(t,e=>{let r=t.moveToLineBoundary(e,!0).head;return e.head<r?r:Math.min(t.state.doc.length,e.head+1)}),Mn=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let r=[];for(let o=0,h="",m=t.doc.iter();;){if(m.next(),m.lineBreak||m.done){let C=h.search(/\s+$/);if(C>-1&&r.push({from:o-(h.length-C),to:o}),m.done)break;h=""}else h=m.value;o+=m.value.length}return r.length?(e(t.update({changes:r,userEvent:"delete"})),!0):!1},wn=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let r=t.changeByRange(o=>({changes:{from:o.from,to:o.to,insert:D.xv.of(["",""])},range:D.jT.cursor(o.from)}));return e(t.update(r,{scrollIntoView:!0,userEvent:"input"})),!0},gi=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let r=t.changeByRange(o=>{if(!o.empty||o.from==0||o.from==t.doc.length)return{range:o};let h=o.from,m=t.doc.lineAt(h),C=h==m.from?h-1:(0,D.cp)(m.text,h-m.from,!1)+m.from,B=h==m.to?h+1:(0,D.cp)(m.text,h-m.from,!0)+m.from;return{changes:{from:C,to:B,insert:t.doc.slice(h,B).append(t.doc.slice(C,h))},range:D.jT.cursor(B)}});return r.changes.empty?!1:(e(t.update(r,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Sn(t){let e=[],r=-1;for(let o of t.selection.ranges){let h=t.doc.lineAt(o.from),m=t.doc.lineAt(o.to);if(!o.empty&&o.to==m.from&&(m=t.doc.lineAt(o.to-1)),r>=h.number){let C=e[e.length-1];C.to=m.to,C.ranges.push(o)}else e.push({from:h.from,to:m.to,ranges:[o]});r=m.number+1}return e}function ji(t,e,r){if(t.readOnly)return!1;let o=[],h=[];for(let m of Sn(t)){if(r?m.to==t.doc.length:m.from==0)continue;let C=t.doc.lineAt(r?m.to+1:m.from-1),B=C.length+1;if(r){o.push({from:m.to,to:C.to},{from:m.from,insert:C.text+t.lineBreak});for(let N of m.ranges)h.push(D.jT.range(Math.min(t.doc.length,N.anchor+B),Math.min(t.doc.length,N.head+B)))}else{o.push({from:C.from,to:m.from},{from:m.to,insert:t.lineBreak+C.text});for(let N of m.ranges)h.push(D.jT.range(N.anchor-B,N.head-B))}}return o.length?(e(t.update({changes:o,scrollIntoView:!0,selection:D.jT.create(h,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const Lr=({state:t,dispatch:e})=>ji(t,e,!1),Rr=({state:t,dispatch:e})=>ji(t,e,!0);function Ji(t,e,r){if(t.readOnly)return!1;let o=[];for(let m of Sn(t))r?o.push({from:m.from,insert:t.doc.slice(m.from,m.to)+t.lineBreak}):o.push({from:m.to,insert:t.lineBreak+t.doc.slice(m.from,m.to)});let h=t.changes(o);return e(t.update({changes:h,selection:t.selection.map(h,r?1:-1),scrollIntoView:!0,userEvent:"input.copyline"})),!0}const Nr=({state:t,dispatch:e})=>Ji(t,e,!1),Fr=({state:t,dispatch:e})=>Ji(t,e,!0),Wr=t=>{if(t.state.readOnly)return!1;let{state:e}=t,r=e.changes(Sn(e).map(({from:h,to:m})=>(h>0?h--:m<e.doc.length&&m++,{from:h,to:m}))),o=x(e.selection,h=>{let m;if(t.lineWrapping){let C=t.lineBlockAt(h.head),B=t.coordsAtPos(h.head,h.assoc||1);B&&(m=C.bottom+t.documentTop-B.bottom+t.defaultLineHeight/2)}return t.moveVertically(h,!0,m)}).map(r);return t.dispatch({changes:r,selection:o,scrollIntoView:!0,userEvent:"delete.line"}),!0},Zs=({state:t,dispatch:e})=>(e(t.update(t.replaceSelection(t.lineBreak),{scrollIntoView:!0,userEvent:"input"})),!0),Ys=({state:t,dispatch:e})=>(e(t.update(t.changeByRange(r=>{let o=/^\s*/.exec(t.doc.lineAt(r.from).text)[0];return{changes:{from:r.from,to:r.to,insert:t.lineBreak+o},range:EditorSelection.cursor(r.from+o.length+1)}}),{scrollIntoView:!0,userEvent:"input"})),!0);function jr(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let r=(0,xe.qz)(t).resolveInner(e),o=r.childBefore(e),h=r.childAfter(e),m;return o&&h&&o.to<=e&&h.from>=e&&(m=o.type.prop(_e.md.closedBy))&&m.indexOf(h.name)>-1&&t.doc.lineAt(o.to).from==t.doc.lineAt(h.from).from&&!/\S/.test(t.sliceDoc(o.to,h.from))?{from:o.to,to:h.from}:null}const $i=_i(!1),Jr=_i(!0);function _i(t){return({state:e,dispatch:r})=>{if(e.readOnly)return!1;let o=e.changeByRange(h=>{let{from:m,to:C}=h,B=e.doc.lineAt(m),N=!t&&m==C&&jr(e,m);t&&(m=C=(C<=B.to?B:e.doc.lineAt(C)).to);let Z=new xe.Gn(e,{simulateBreak:m,simulateDoubleBreak:!!N}),te=(0,xe.K0)(Z,m);for(te==null&&(te=(0,D.IS)(/^\s*/.exec(e.doc.lineAt(m).text)[0],e.tabSize));C<B.to&&/\s/.test(B.text[C-B.from]);)C++;N?{from:m,to:C}=N:m>B.from&&m<B.from+100&&!/\S/.test(B.text.slice(0,m))&&(m=B.from);let ge=["",(0,xe.SS)(e,te)];return N&&ge.push((0,xe.SS)(e,Z.lineIndent(B.from,-1))),{changes:{from:m,to:C,insert:D.xv.of(ge)},range:D.jT.cursor(m+1+ge[1].length)}});return r(e.update(o,{scrollIntoView:!0,userEvent:"input"})),!0}}function yi(t,e){let r=-1;return t.changeByRange(o=>{let h=[];for(let C=o.from;C<=o.to;){let B=t.doc.lineAt(C);B.number>r&&(o.empty||o.to>B.from)&&(e(B,h,o),r=B.number),C=B.to+1}let m=t.changes(h);return{changes:h,range:D.jT.range(m.mapPos(o.anchor,1),m.mapPos(o.head,1))}})}const $r=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let r=Object.create(null),o=new xe.Gn(t,{overrideIndentation:m=>{let C=r[m];return C==null?-1:C}}),h=yi(t,(m,C,B)=>{let N=(0,xe.K0)(o,m.from);if(N==null)return;/\S/.test(m.text)||(N=0);let Z=/^\s*/.exec(m.text)[0],te=(0,xe.SS)(t,N);(Z!=te||B.from<m.from+Z.length)&&(r[m.from]=N,C.push({from:m.from,to:m.from+Z.length,insert:te}))});return h.changes.empty||e(t.update(h,{userEvent:"indent"})),!0},xi=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(yi(t,(r,o)=>{o.push({from:r.from,insert:t.facet(xe.c)})}),{userEvent:"input.indent"})),!0),zi=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(yi(t,(r,o)=>{let h=/^\s*/.exec(r.text)[0];if(!h)return;let m=(0,D.IS)(h,t.tabSize),C=0,B=(0,xe.SS)(t,Math.max(0,m-(0,xe.y1)(t)));for(;C<h.length&&C<B.length&&h.charCodeAt(C)==B.charCodeAt(C);)C++;o.push({from:r.from+C,to:r.from+h.length,insert:B.slice(C)})}),{userEvent:"delete.dedent"})),!0),_r=t=>(t.setTabFocusMode(),!0),Xs=t=>(t.setTabFocusMode(2e3),!0),eo=({state:t,dispatch:e})=>t.selection.ranges.some(r=>!r.empty)?xi({state:t,dispatch:e}):(e(t.update(t.replaceSelection("	"),{scrollIntoView:!0,userEvent:"input"})),!0),zr=[{key:"Ctrl-b",run:Y,shift:sn,preventDefault:!0},{key:"Ctrl-f",run:ue,shift:on},{key:"Ctrl-p",run:Nt,shift:s},{key:"Ctrl-n",run:qt,shift:f},{key:"Ctrl-a",run:un,shift:X},{key:"Ctrl-e",run:Dt,shift:oe},{key:"Ctrl-d",run:O},{key:"Ctrl-h",run:b},{key:"Ctrl-k",run:we},{key:"Ctrl-Alt-h",run:H},{key:"Ctrl-o",run:wn},{key:"Ctrl-t",run:gi},{key:"Ctrl-v",run:Me}],Ur=[{key:"ArrowLeft",run:Y,shift:sn,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:Bt,shift:vn,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:_t,shift:F,preventDefault:!0},{key:"ArrowRight",run:ue,shift:on,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:mt,shift:In,preventDefault:!0},{mac:"Cmd-ArrowRight",run:en,shift:se,preventDefault:!0},{key:"ArrowUp",run:Nt,shift:s,preventDefault:!0},{mac:"Cmd-ArrowUp",run:We,shift:At},{mac:"Ctrl-ArrowUp",run:Ot,shift:w},{key:"ArrowDown",run:qt,shift:f,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Ke,shift:Ft},{mac:"Ctrl-ArrowDown",run:Me,shift:T},{key:"PageUp",run:Ot,shift:w},{key:"PageDown",run:Me,shift:T},{key:"Home",run:Vt,shift:z,preventDefault:!0},{key:"Mod-Home",run:We,shift:At},{key:"End",run:$t,shift:R,preventDefault:!0},{key:"Mod-End",run:Ke,shift:Ft},{key:"Enter",run:$i,shift:$i},{key:"Mod-a",run:xn},{key:"Backspace",run:b,shift:b,preventDefault:!0},{key:"Delete",run:O,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:H,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:V,preventDefault:!0},{mac:"Mod-Backspace",run:tn,preventDefault:!0},{mac:"Mod-Delete",run:Xt,preventDefault:!0}].concat(zr.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),Vr=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:ft,shift:v},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:Ct,shift:P},{key:"Alt-ArrowUp",run:Lr},{key:"Shift-Alt-ArrowUp",run:Nr},{key:"Alt-ArrowDown",run:Rr},{key:"Shift-Alt-ArrowDown",run:Fr},{key:"Mod-Alt-ArrowUp",run:Yt},{key:"Mod-Alt-ArrowDown",run:zt},{key:"Escape",run:bn},{key:"Mod-Enter",run:Jr},{key:"Alt-l",mac:"Ctrl-l",run:Zt},{key:"Mod-i",run:Tt,preventDefault:!0},{key:"Mod-[",run:zi},{key:"Mod-]",run:xi},{key:"Mod-Alt-\\",run:$r},{key:"Shift-Mod-k",run:Wr},{key:"Shift-Mod-\\",run:cn},{key:"Mod-/",run:qe},{key:"Alt-A",run:Se},{key:"Ctrl-m",mac:"Shift-Alt-m",run:_r}].concat(Ur),Hr={key:"Tab",run:xi,shift:zi};function wt(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,r=arguments[1];if(r&&typeof r=="object"&&r.nodeType==null&&!Array.isArray(r)){for(var o in r)if(Object.prototype.hasOwnProperty.call(r,o)){var h=r[o];typeof h=="string"?t.setAttribute(o,h):h!=null&&(t[o]=h)}e++}for(;e<arguments.length;e++)Ui(t,arguments[e]);return t}function Ui(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var r=0;r<e.length;r++)Ui(t,e[r]);else throw new RangeError("Unsupported child node: "+e)}const Vi=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class Nn{constructor(e,r,o=0,h=e.length,m,C){this.test=C,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(o,h),this.bufferStart=o,this.normalize=m?B=>m(Vi(B)):Vi,this.query=this.normalize(r)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return(0,D.gm)(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let r=(0,D.bg)(e),o=this.bufferStart+this.bufferPos;this.bufferPos+=(0,D.nZ)(e);let h=this.normalize(r);if(h.length)for(let m=0,C=o;;m++){let B=h.charCodeAt(m),N=this.match(B,C,this.bufferPos+this.bufferStart);if(m==h.length-1){if(N)return this.value=N,this;break}C==o&&m<r.length&&r.charCodeAt(m)==B&&C++}}}match(e,r,o){let h=null;for(let m=0;m<this.matches.length;m+=2){let C=this.matches[m],B=!1;this.query.charCodeAt(C)==e&&(C==this.query.length-1?h={from:this.matches[m+1],to:o}:(this.matches[m]++,B=!0)),B||(this.matches.splice(m,2),m-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?h={from:r,to:o}:this.matches.push(1,r)),h&&this.test&&!this.test(h.from,h.to,this.buffer,this.bufferStart)&&(h=null),h}}typeof Symbol!="undefined"&&(Nn.prototype[Symbol.iterator]=function(){return this});const Hi={from:-1,to:-1,match:/.*/.exec("")},ki="gm"+(/x/.unicode==null?"":"u");class Ki{constructor(e,r,o,h=0,m=e.length){if(this.text=e,this.to=m,this.curLine="",this.done=!1,this.value=Hi,/\\[sWDnr]|\n|\r|\[\^/.test(r))return new Gi(e,r,o,h,m);this.re=new RegExp(r,ki+(o!=null&&o.ignoreCase?"i":"")),this.test=o==null?void 0:o.test,this.iter=e.iter();let C=e.lineAt(h);this.curLineStart=C.from,this.matchPos=Xn(e,h),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let r=this.matchPos<=this.to&&this.re.exec(this.curLine);if(r){let o=this.curLineStart+r.index,h=o+r[0].length;if(this.matchPos=Xn(this.text,h+(o==h?1:0)),o==this.curLineStart+this.curLine.length&&this.nextLine(),(o<h||o>this.value.to)&&(!this.test||this.test(o,h,r)))return this.value={from:o,to:h,match:r},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const vi=new WeakMap;class Fn{constructor(e,r){this.from=e,this.text=r}get to(){return this.from+this.text.length}static get(e,r,o){let h=vi.get(e);if(!h||h.from>=o||h.to<=r){let B=new Fn(r,e.sliceString(r,o));return vi.set(e,B),B}if(h.from==r&&h.to==o)return h;let{text:m,from:C}=h;return C>r&&(m=e.sliceString(r,C)+m,C=r),h.to<o&&(m+=e.sliceString(h.to,o)),vi.set(e,new Fn(C,m)),new Fn(r,m.slice(r-C,o-C))}}class Gi{constructor(e,r,o,h,m){this.text=e,this.to=m,this.done=!1,this.value=Hi,this.matchPos=Xn(e,h),this.re=new RegExp(r,ki+(o!=null&&o.ignoreCase?"i":"")),this.test=o==null?void 0:o.test,this.flat=Fn.get(e,h,this.chunkEnd(h+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,r=this.re.exec(this.flat.text);if(r&&!r[0]&&r.index==e&&(this.re.lastIndex=e+1,r=this.re.exec(this.flat.text)),r){let o=this.flat.from+r.index,h=o+r[0].length;if((this.flat.to>=this.to||r.index+r[0].length<=this.flat.text.length-10)&&(!this.test||this.test(o,h,r)))return this.value={from:o,to:h,match:r},this.matchPos=Xn(this.text,h+(o==h?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Fn.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol!="undefined"&&(Ki.prototype[Symbol.iterator]=Gi.prototype[Symbol.iterator]=function(){return this});function Kr(t){try{return new RegExp(t,ki),!0}catch(e){return!1}}function Xn(t,e){if(e>=t.length)return e;let r=t.lineAt(e),o;for(;e<r.to&&(o=r.text.charCodeAt(e-r.from))>=56320&&o<57344;)e++;return e}function bi(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),r=wt("input",{class:"cm-textfield",name:"line",value:e}),o=wt("form",{class:"cm-gotoLine",onkeydown:m=>{m.keyCode==27?(m.preventDefault(),t.dispatch({effects:Hn.of(!1)}),t.focus()):m.keyCode==13&&(m.preventDefault(),h())},onsubmit:m=>{m.preventDefault(),h()}},wt("label",t.state.phrase("Go to line"),": ",r)," ",wt("button",{class:"cm-button",type:"submit"},t.state.phrase("go")),wt("button",{name:"close",onclick:()=>{t.dispatch({effects:Hn.of(!1)}),t.focus()},"aria-label":t.state.phrase("close"),type:"button"},["\xD7"]));function h(){let m=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(r.value);if(!m)return;let{state:C}=t,B=C.doc.lineAt(C.selection.main.head),[,N,Z,te,ge]=m,Ee=te?+te.slice(1):0,Qe=Z?+Z:B.number;if(Z&&ge){let Pt=Qe/100;N&&(Pt=Pt*(N=="-"?-1:1)+B.number/C.doc.lines),Qe=Math.round(C.doc.lines*Pt)}else Z&&N&&(Qe=Qe*(N=="-"?-1:1)+B.number);let it=C.doc.line(Math.max(1,Math.min(C.doc.lines,Qe))),kt=D.jT.cursor(it.from+Math.max(0,Math.min(Ee,it.length)));t.dispatch({effects:[Hn.of(!1),K.tk.scrollIntoView(kt.from,{y:"center"})],selection:kt}),t.focus()}return{dom:o}}const Hn=D.Py.define(),Qi=D.QQ.define({create(){return!0},update(t,e){for(let r of e.effects)r.is(Hn)&&(t=r.value);return t},provide:t=>K.mH.from(t,e=>e?bi:null)}),Gr=t=>{let e=(0,K.Sd)(t,bi);if(!e){let r=[Hn.of(!0)];t.state.field(Qi,!1)==null&&r.push(D.Py.appendConfig.of([Qi,Qr])),t.dispatch({effects:r}),e=(0,K.Sd)(t,bi)}return e&&e.dom.querySelector("input").select(),!0},Qr=K.tk.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),qr={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},qi=D.r$.define({combine(t){return(0,D.BO)(t,qr,{highlightWordAroundCursor:(e,r)=>e||r,minSelectionLength:Math.min,maxMatches:Math.min})}});function Zr(t){let e=[ns,ts];return t&&e.push(qi.of(t)),e}const Yr=K.p.mark({class:"cm-selectionMatch"}),Xr=K.p.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function Zi(t,e,r,o){return(r==0||t(e.sliceDoc(r-1,r))!=D.D0.Word)&&(o==e.doc.length||t(e.sliceDoc(o,o+1))!=D.D0.Word)}function es(t,e,r,o){return t(e.sliceDoc(r,r+1))==D.D0.Word&&t(e.sliceDoc(o-1,o))==D.D0.Word}const ts=K.lg.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.selectionSet||t.docChanged||t.viewportChanged)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=t.state.facet(qi),{state:r}=t,o=r.selection;if(o.ranges.length>1)return K.p.none;let h=o.main,m,C=null;if(h.empty){if(!e.highlightWordAroundCursor)return K.p.none;let N=r.wordAt(h.head);if(!N)return K.p.none;C=r.charCategorizer(h.head),m=r.sliceDoc(N.from,N.to)}else{let N=h.to-h.from;if(N<e.minSelectionLength||N>200)return K.p.none;if(e.wholeWords){if(m=r.sliceDoc(h.from,h.to),C=r.charCategorizer(h.head),!(Zi(C,r,h.from,h.to)&&es(C,r,h.from,h.to)))return K.p.none}else if(m=r.sliceDoc(h.from,h.to),!m)return K.p.none}let B=[];for(let N of t.visibleRanges){let Z=new Nn(r.doc,m,N.from,N.to);for(;!Z.next().done;){let{from:te,to:ge}=Z.value;if((!C||Zi(C,r,te,ge))&&(h.empty&&te<=h.from&&ge>=h.to?B.push(Xr.range(te,ge)):(te>=h.to||ge<=h.from)&&B.push(Yr.range(te,ge)),B.length>e.maxMatches))return K.p.none}}return K.p.set(B)}},{decorations:t=>t.decorations}),ns=K.tk.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),is=({state:t,dispatch:e})=>{let{selection:r}=t,o=D.jT.create(r.ranges.map(h=>t.wordAt(h.head)||D.jT.cursor(h.head)),r.mainIndex);return o.eq(r)?!1:(e(t.update({selection:o})),!0)};function rs(t,e){let{main:r,ranges:o}=t.selection,h=t.wordAt(r.head),m=h&&h.from==r.from&&h.to==r.to;for(let C=!1,B=new Nn(t.doc,e,o[o.length-1].to);;)if(B.next(),B.done){if(C)return null;B=new Nn(t.doc,e,0,Math.max(0,o[o.length-1].from-1)),C=!0}else{if(C&&o.some(N=>N.from==B.value.from))continue;if(m){let N=t.wordAt(B.value.from);if(!N||N.from!=B.value.from||N.to!=B.value.to)continue}return B.value}}const ss=({state:t,dispatch:e})=>{let{ranges:r}=t.selection;if(r.some(m=>m.from===m.to))return is({state:t,dispatch:e});let o=t.sliceDoc(r[0].from,r[0].to);if(t.selection.ranges.some(m=>t.sliceDoc(m.from,m.to)!=o))return!1;let h=rs(t,o);return h?(e(t.update({selection:t.selection.addRange(D.jT.range(h.from,h.to),!1),effects:K.tk.scrollIntoView(h.to)})),!0):!1},Pn=D.r$.define({combine(t){return(0,D.BO)(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new ys(e),scrollToMatch:e=>K.tk.scrollIntoView(e)})}});function to(t){return t?[Pn.of(t),Ti]:Ti}class Yi{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||Kr(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(r,o)=>o=="n"?`
`:o=="r"?"\r":o=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new cs(this):new ls(this)}getCursor(e,r=0,o){let h=e.doc?e:D.yy.create({doc:e});return o==null&&(o=h.doc.length),this.regexp?jn(this,h,r,o):Wn(this,h,r,o)}}class Xi{constructor(e){this.spec=e}}function Wn(t,e,r,o){return new Nn(e.doc,t.unquoted,r,o,t.caseSensitive?void 0:h=>h.toLowerCase(),t.wholeWord?os(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function os(t,e){return(r,o,h,m)=>((m>r||m+h.length<o)&&(m=Math.max(0,r-2),h=t.sliceString(m,Math.min(t.length,o+2))),(e(ei(h,r-m))!=D.D0.Word||e(ti(h,r-m))!=D.D0.Word)&&(e(ti(h,o-m))!=D.D0.Word||e(ei(h,o-m))!=D.D0.Word))}class ls extends Xi{constructor(e){super(e)}nextMatch(e,r,o){let h=Wn(this.spec,e,o,e.doc.length).nextOverlapping();if(h.done){let m=Math.min(e.doc.length,r+this.spec.unquoted.length);h=Wn(this.spec,e,0,m).nextOverlapping()}return h.done||h.value.from==r&&h.value.to==o?null:h.value}prevMatchInRange(e,r,o){for(let h=o;;){let m=Math.max(r,h-1e4-this.spec.unquoted.length),C=Wn(this.spec,e,m,h),B=null;for(;!C.nextOverlapping().done;)B=C.value;if(B)return B;if(m==r)return null;h-=1e4}}prevMatch(e,r,o){let h=this.prevMatchInRange(e,0,r);return h||(h=this.prevMatchInRange(e,Math.max(0,o-this.spec.unquoted.length),e.doc.length)),h&&(h.from!=r||h.to!=o)?h:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,r){let o=Wn(this.spec,e,0,e.doc.length),h=[];for(;!o.next().done;){if(h.length>=r)return null;h.push(o.value)}return h}highlight(e,r,o,h){let m=Wn(this.spec,e,Math.max(0,r-this.spec.unquoted.length),Math.min(o+this.spec.unquoted.length,e.doc.length));for(;!m.next().done;)h(m.value.from,m.value.to)}}function jn(t,e,r,o){return new Ki(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?as(e.charCategorizer(e.selection.main.head)):void 0},r,o)}function ei(t,e){return t.slice((0,D.cp)(t,e,!1),e)}function ti(t,e){return t.slice(e,(0,D.cp)(t,e))}function as(t){return(e,r,o)=>!o[0].length||(t(ei(o.input,o.index))!=D.D0.Word||t(ti(o.input,o.index))!=D.D0.Word)&&(t(ti(o.input,o.index+o[0].length))!=D.D0.Word||t(ei(o.input,o.index+o[0].length))!=D.D0.Word)}class cs extends Xi{nextMatch(e,r,o){let h=jn(this.spec,e,o,e.doc.length).next();return h.done&&(h=jn(this.spec,e,0,r).next()),h.done?null:h.value}prevMatchInRange(e,r,o){for(let h=1;;h++){let m=Math.max(r,o-h*1e4),C=jn(this.spec,e,m,o),B=null;for(;!C.next().done;)B=C.value;if(B&&(m==r||B.from>m+10))return B;if(m==r)return null}}prevMatch(e,r,o){return this.prevMatchInRange(e,0,r)||this.prevMatchInRange(e,o,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(r,o)=>{if(o=="&")return e.match[0];if(o=="$")return"$";for(let h=o.length;h>0;h--){let m=+o.slice(0,h);if(m>0&&m<e.match.length)return e.match[m]+o.slice(h)}return r})}matchAll(e,r){let o=jn(this.spec,e,0,e.doc.length),h=[];for(;!o.next().done;){if(h.length>=r)return null;h.push(o.value)}return h}highlight(e,r,o,h){let m=jn(this.spec,e,Math.max(0,r-250),Math.min(o+250,e.doc.length));for(;!m.next().done;)h(m.value.from,m.value.to)}}const Kn=D.Py.define(),wi=D.Py.define(),dn=D.QQ.define({create(t){return new Si(ri(t).create(),null)},update(t,e){for(let r of e.effects)r.is(Kn)?t=new Si(r.value.create(),t.panel):r.is(wi)&&(t=new Si(t.query,r.value?Ci:null));return t},provide:t=>K.mH.from(t,e=>e.panel)});function no(t){let e=t.field(dn,!1);return e?e.query.spec:ri(t)}function io(t){var e;return((e=t.field(dn,!1))===null||e===void 0?void 0:e.panel)!=null}class Si{constructor(e,r){this.query=e,this.panel=r}}const hs=K.p.mark({class:"cm-searchMatch"}),fs=K.p.mark({class:"cm-searchMatch cm-searchMatch-selected"}),us=K.lg.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(dn))}update(t){let e=t.state.field(dn);(e!=t.startState.field(dn)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return K.p.none;let{view:r}=this,o=new D.f_;for(let h=0,m=r.visibleRanges,C=m.length;h<C;h++){let{from:B,to:N}=m[h];for(;h<C-1&&N>m[h+1].from-2*250;)N=m[++h].to;t.highlight(r.state,B,N,(Z,te)=>{let ge=r.state.selection.ranges.some(Ee=>Ee.from==Z&&Ee.to==te);o.add(Z,te,ge?fs:hs)})}return o.finish()}},{decorations:t=>t.decorations});function Gn(t){return e=>{let r=e.state.field(dn,!1);return r&&r.query.spec.valid?t(e,r):ir(e)}}const ni=Gn((t,{query:e})=>{let{to:r}=t.state.selection.main,o=e.nextMatch(t.state,r,r);if(!o)return!1;let h=D.jT.single(o.from,o.to),m=t.state.facet(Pn);return t.dispatch({selection:h,effects:[Ai(t,o),m.scrollToMatch(h.main,t)],userEvent:"select.search"}),nr(t),!0}),ii=Gn((t,{query:e})=>{let{state:r}=t,{from:o}=r.selection.main,h=e.prevMatch(r,o,o);if(!h)return!1;let m=D.jT.single(h.from,h.to),C=t.state.facet(Pn);return t.dispatch({selection:m,effects:[Ai(t,h),C.scrollToMatch(m.main,t)],userEvent:"select.search"}),nr(t),!0}),ds=Gn((t,{query:e})=>{let r=e.matchAll(t.state,1e3);return!r||!r.length?!1:(t.dispatch({selection:D.jT.create(r.map(o=>D.jT.range(o.from,o.to))),userEvent:"select.search.matches"}),!0)}),ps=({state:t,dispatch:e})=>{let r=t.selection;if(r.ranges.length>1||r.main.empty)return!1;let{from:o,to:h}=r.main,m=[],C=0;for(let B=new Nn(t.doc,t.sliceDoc(o,h));!B.next().done;){if(m.length>1e3)return!1;B.value.from==o&&(C=m.length),m.push(D.jT.range(B.value.from,B.value.to))}return e(t.update({selection:D.jT.create(m,C),userEvent:"select.search.matches"})),!0},er=Gn((t,{query:e})=>{let{state:r}=t,{from:o,to:h}=r.selection.main;if(r.readOnly)return!1;let m=e.nextMatch(r,o,o);if(!m)return!1;let C=m,B=[],N,Z,te=[];C.from==o&&C.to==h&&(Z=r.toText(e.getReplacement(C)),B.push({from:C.from,to:C.to,insert:Z}),C=e.nextMatch(r,C.from,C.to),te.push(K.tk.announce.of(r.phrase("replaced match on line $",r.doc.lineAt(o).number)+".")));let ge=t.state.changes(B);return C&&(N=D.jT.single(C.from,C.to).map(ge),te.push(Ai(t,C)),te.push(r.facet(Pn).scrollToMatch(N.main,t))),t.dispatch({changes:ge,selection:N,effects:te,userEvent:"input.replace"}),!0}),ms=Gn((t,{query:e})=>{if(t.state.readOnly)return!1;let r=e.matchAll(t.state,1e9).map(h=>{let{from:m,to:C}=h;return{from:m,to:C,insert:e.getReplacement(h)}});if(!r.length)return!1;let o=t.state.phrase("replaced $ matches",r.length)+".";return t.dispatch({changes:r,effects:K.tk.announce.of(o),userEvent:"input.replace.all"}),!0});function Ci(t){return t.state.facet(Pn).createPanel(t)}function ri(t,e){var r,o,h,m,C;let B=t.selection.main,N=B.empty||B.to>B.from+100?"":t.sliceDoc(B.from,B.to);if(e&&!N)return e;let Z=t.facet(Pn);return new Yi({search:((r=e==null?void 0:e.literal)!==null&&r!==void 0?r:Z.literal)?N:N.replace(/\n/g,"\\n"),caseSensitive:(o=e==null?void 0:e.caseSensitive)!==null&&o!==void 0?o:Z.caseSensitive,literal:(h=e==null?void 0:e.literal)!==null&&h!==void 0?h:Z.literal,regexp:(m=e==null?void 0:e.regexp)!==null&&m!==void 0?m:Z.regexp,wholeWord:(C=e==null?void 0:e.wholeWord)!==null&&C!==void 0?C:Z.wholeWord})}function tr(t){let e=(0,K.Sd)(t,Ci);return e&&e.dom.querySelector("[main-field]")}function nr(t){let e=tr(t);e&&e==t.root.activeElement&&e.select()}const ir=t=>{let e=t.state.field(dn,!1);if(e&&e.panel){let r=tr(t);if(r&&r!=t.root.activeElement){let o=ri(t.state,e.query.spec);o.valid&&t.dispatch({effects:Kn.of(o)}),r.focus(),r.select()}}else t.dispatch({effects:[wi.of(!0),e?Kn.of(ri(t.state,e.query.spec)):D.Py.appendConfig.of(Ti)]});return!0},rr=t=>{let e=t.state.field(dn,!1);if(!e||!e.panel)return!1;let r=(0,K.Sd)(t,Ci);return r&&r.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:wi.of(!1)}),!0},gs=[{key:"Mod-f",run:ir,scope:"editor search-panel"},{key:"F3",run:ni,shift:ii,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:ni,shift:ii,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:rr,scope:"editor search-panel"},{key:"Mod-Shift-l",run:ps},{key:"Mod-Alt-g",run:Gr},{key:"Mod-d",run:ss,preventDefault:!0}];class ys{constructor(e){this.view=e;let r=this.query=e.state.field(dn).query.spec;this.commit=this.commit.bind(this),this.searchField=wt("input",{value:r.search,placeholder:nn(e,"Find"),"aria-label":nn(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=wt("input",{value:r.replace,placeholder:nn(e,"Replace"),"aria-label":nn(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=wt("input",{type:"checkbox",name:"case",form:"",checked:r.caseSensitive,onchange:this.commit}),this.reField=wt("input",{type:"checkbox",name:"re",form:"",checked:r.regexp,onchange:this.commit}),this.wordField=wt("input",{type:"checkbox",name:"word",form:"",checked:r.wholeWord,onchange:this.commit});function o(h,m,C){return wt("button",{class:"cm-button",name:h,onclick:m,type:"button"},C)}this.dom=wt("div",{onkeydown:h=>this.keydown(h),class:"cm-search"},[this.searchField,o("next",()=>ni(e),[nn(e,"next")]),o("prev",()=>ii(e),[nn(e,"previous")]),o("select",()=>ds(e),[nn(e,"all")]),wt("label",null,[this.caseField,nn(e,"match case")]),wt("label",null,[this.reField,nn(e,"regexp")]),wt("label",null,[this.wordField,nn(e,"by word")]),...e.state.readOnly?[]:[wt("br"),this.replaceField,o("replace",()=>er(e),[nn(e,"replace")]),o("replaceAll",()=>ms(e),[nn(e,"replace all")])],wt("button",{name:"close",onclick:()=>rr(e),"aria-label":nn(e,"close"),type:"button"},["\xD7"])])}commit(){let e=new Yi({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Kn.of(e)}))}keydown(e){(0,K.$1)(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?ii:ni)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),er(this.view))}update(e){for(let r of e.transactions)for(let o of r.effects)o.is(Kn)&&!o.value.eq(this.query)&&this.setQuery(o.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Pn).top}}function nn(t,e){return t.state.phrase(e)}const si=30,oi=/[\s\.,:;?!]/;function Ai(t,{from:e,to:r}){let o=t.state.doc.lineAt(e),h=t.state.doc.lineAt(r).to,m=Math.max(o.from,e-si),C=Math.min(h,r+si),B=t.state.sliceDoc(m,C);if(m!=o.from){for(let N=0;N<si;N++)if(!oi.test(B[N+1])&&oi.test(B[N])){B=B.slice(N);break}}if(C!=h){for(let N=B.length-1;N>B.length-si;N--)if(!oi.test(B[N-1])&&oi.test(B[N])){B=B.slice(0,N);break}}return K.tk.announce.of(`${t.state.phrase("current match")}. ${B} ${t.state.phrase("on line")} ${o.number}.`)}const xs=K.tk.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),Ti=[dn,D.Wl.low(us),xs];var li=ne(34790);class sr{constructor(e,r,o){this.from=e,this.to=r,this.diagnostic=o}}class Bn{constructor(e,r,o){this.diagnostics=e,this.panel=r,this.selected=o}static init(e,r,o){let h=o.facet($n).markerFilter;h&&(e=h(e,o));let m=e.slice().sort((Qe,it)=>Qe.from-it.from||Qe.to-it.to),C=new D.f_,B=[],N=0,Z=o.doc.iter(),te=0,ge=o.doc.length;for(let Qe=0;;){let it=Qe==m.length?null:m[Qe];if(!it&&!B.length)break;let kt,Pt;if(B.length)kt=N,Pt=B.reduce((St,Qt)=>Math.min(St,Qt.to),it&&it.from>kt?it.from:1e8);else{if(kt=it.from,kt>ge)break;Pt=it.to,B.push(it),Qe++}for(;Qe<m.length;){let St=m[Qe];if(St.from==kt&&(St.to>St.from||St.to==kt))B.push(St),Qe++,Pt=Math.min(St.to,Pt);else{Pt=Math.min(St.from,Pt);break}}Pt=Math.min(Pt,ge);let kn=!1;if(B.some(St=>St.from==kt&&(St.to==Pt||Pt==ge))&&(kn=kt==Pt,!kn&&Pt-kt<10)){let St=kt-(te+Z.value.length);St>0&&(Z.next(St),te=kt);for(let Qt=kt;;){if(Qt>=Pt){kn=!0;break}if(!Z.lineBreak&&te+Z.value.length>Qt)break;Qt=te+Z.value.length,te+=Z.value.length,Z.next()}}let En=gr(B);if(kn)C.add(kt,kt,K.p.widget({widget:new Cs(En),diagnostics:B.slice()}));else{let St=B.reduce((Qt,_n)=>_n.markClass?Qt+" "+_n.markClass:Qt,"");C.add(kt,Pt,K.p.mark({class:"cm-lintRange cm-lintRange-"+En+St,diagnostics:B.slice(),inclusiveEnd:B.some(Qt=>Qt.to>Pt)}))}if(N=Pt,N==ge)break;for(let St=0;St<B.length;St++)B[St].to<=N&&B.splice(St--,1)}let Ee=C.finish();return new Bn(Ee,r,Jn(Ee))}}function Jn(t,e=null,r=0){let o=null;return t.between(r,1e9,(h,m,{spec:C})=>{if(!(e&&C.diagnostics.indexOf(e)<0))if(!o)o=new sr(h,m,e||C.diagnostics[0]);else{if(C.diagnostics.indexOf(o.diagnostic)<0)return!1;o=new sr(o.from,m,o.diagnostic)}}),o}function or(t,e){let r=e.pos,o=e.end||r,h=t.state.facet($n).hideOn(t,r,o);if(h!=null)return h;let m=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(C=>C.is(ai))||t.changes.touchesRange(m.from,Math.max(m.to,o)))}function lr(t,e){return t.field(Ht,!1)?e:e.concat(D.Py.appendConfig.of(kr))}function ro(t,e){return{effects:lr(t,[ai.of(e)])}}const ai=D.Py.define(),Ii=D.Py.define(),ar=D.Py.define(),Ht=D.QQ.define({create(){return new Bn(K.p.none,null,null)},update(t,e){if(e.docChanged&&t.diagnostics.size){let r=t.diagnostics.map(e.changes),o=null,h=t.panel;if(t.selected){let m=e.changes.mapPos(t.selected.from,1);o=Jn(r,t.selected.diagnostic,m)||Jn(r,null,m)}!r.size&&h&&e.state.facet($n).autoPanel&&(h=null),t=new Bn(r,h,o)}for(let r of e.effects)if(r.is(ai)){let o=e.state.facet($n).autoPanel?r.value.length?Qn.open:null:t.panel;t=Bn.init(r.value,o,e.state)}else r.is(Ii)?t=new Bn(t.diagnostics,r.value?Qn.open:null,t.selected):r.is(ar)&&(t=new Bn(t.diagnostics,t.panel,r.value));return t},provide:t=>[K.mH.from(t,e=>e.panel),K.tk.decorations.from(t,e=>e.diagnostics)]});function so(t){let e=t.field(Ht,!1);return e?e.diagnostics.size:0}const ks=K.p.mark({class:"cm-lintRange cm-lintRange-active"});function vs(t,e,r){let{diagnostics:o}=t.state.field(Ht),h,m=-1,C=-1;o.between(e-(r<0?1:0),e+(r>0?1:0),(N,Z,{spec:te})=>{if(e>=N&&e<=Z&&(N==Z||(e>N||r>0)&&(e<Z||r<0)))return h=te.diagnostics,m=N,C=Z,!1});let B=t.state.facet($n).tooltipFilter;return h&&B&&(h=B(h,t.state)),h?{pos:m,end:C,above:t.state.doc.lineAt(m).to<C,create(){return{dom:cr(t,h)}}}:null}function cr(t,e){return wt("ul",{class:"cm-tooltip-lint"},e.map(r=>pr(t,r,!1)))}const bs=t=>{let e=t.state.field(Ht,!1);(!e||!e.panel)&&t.dispatch({effects:lr(t.state,[Ii.of(!0)])});let r=(0,K.Sd)(t,Qn.open);return r&&r.dom.querySelector(".cm-panel-lint ul").focus(),!0},hr=t=>{let e=t.state.field(Ht,!1);return!e||!e.panel?!1:(t.dispatch({effects:Ii.of(!1)}),!0)},ws=t=>{let e=t.state.field(Ht,!1);if(!e)return!1;let r=t.state.selection.main,o=e.diagnostics.iter(r.to+1);return!o.value&&(o=e.diagnostics.iter(0),!o.value||o.from==r.from&&o.to==r.to)?!1:(t.dispatch({selection:{anchor:o.from,head:o.to},scrollIntoView:!0}),!0)},oo=t=>{let{state:e}=t,r=e.field(Ht,!1);if(!r)return!1;let o=e.selection.main,h,m,C,B;return r.diagnostics.between(0,e.doc.length,(N,Z)=>{Z<o.to&&(h==null||h<N)&&(h=N,m=Z),(C==null||N>C)&&(C=N,B=Z)}),C==null||h==null&&C==o.from?!1:(t.dispatch({selection:{anchor:h!=null?h:C,head:m!=null?m:B},scrollIntoView:!0}),!0)},Ss=[{key:"Mod-Shift-m",run:bs,preventDefault:!0},{key:"F8",run:ws}],fr=null;function lo(t,e,r){let o=[],h=-1;for(let m of t)m.then(C=>{o.push(C),clearTimeout(h),o.length==t.length?e(o):h=setTimeout(()=>e(o),200)},r)}const $n=D.r$.define({combine(t){return mn({sources:t.map(e=>e.source).filter(e=>e!=null)},(0,D.BO)(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{delay:Math.max,markerFilter:ur,tooltipFilter:ur,needsRefresh:(e,r)=>e?r?o=>e(o)||r(o):e:r,hideOn:(e,r)=>e?r?(o,h,m)=>e(o,h,m)||r(o,h,m):e:r,autoPanel:(e,r)=>e||r}))}});function ur(t,e){return t?e?(r,o)=>e(t(r,o),o):t:e}function ao(t,e={}){return[$n.of({source:t,config:e}),fr,kr]}function co(t){let e=t.plugin(fr);e&&e.force()}function dr(t){let e=[];if(t)e:for(let{name:r}of t){for(let o=0;o<r.length;o++){let h=r[o];if(/[a-zA-Z]/.test(h)&&!e.some(m=>m.toLowerCase()==h.toLowerCase())){e.push(h);continue e}}e.push("")}return e}function pr(t,e,r){var o;let h=r?dr(e.actions):[];return wt("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},wt("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(t):e.message),(o=e.actions)===null||o===void 0?void 0:o.map((m,C)=>{let B=!1,N=Qe=>{if(Qe.preventDefault(),B)return;B=!0;let it=Jn(t.state.field(Ht).diagnostics,e);it&&m.apply(t,it.from,it.to)},{name:Z}=m,te=h[C]?Z.indexOf(h[C]):-1,ge=te<0?Z:[Z.slice(0,te),wt("u",Z.slice(te,te+1)),Z.slice(te+1)],Ee=m.markClass?" "+m.markClass:"";return wt("button",{type:"button",class:"cm-diagnosticAction"+Ee,onclick:N,onmousedown:N,"aria-label":` Action: ${Z}${te<0?"":` (access key "${h[C]})"`}.`},ge)}),e.source&&wt("div",{class:"cm-diagnosticSource"},e.source))}class Cs extends K.l9{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return wt("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class mr{constructor(e,r){this.diagnostic=r,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=pr(e,r,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Qn{constructor(e){this.view=e,this.items=[];let r=h=>{if(h.keyCode==27)hr(this.view),this.view.focus();else if(h.keyCode==38||h.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(h.keyCode==40||h.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(h.keyCode==36)this.moveSelection(0);else if(h.keyCode==35)this.moveSelection(this.items.length-1);else if(h.keyCode==13)this.view.focus();else if(h.keyCode>=65&&h.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:m}=this.items[this.selectedIndex],C=dr(m.actions);for(let B=0;B<C.length;B++)if(C[B].toUpperCase().charCodeAt(0)==h.keyCode){let N=Jn(this.view.state.field(Ht).diagnostics,m);N&&m.actions[B].apply(e,N.from,N.to)}}else return;h.preventDefault()},o=h=>{for(let m=0;m<this.items.length;m++)this.items[m].dom.contains(h.target)&&this.moveSelection(m)};this.list=wt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:r,onclick:o}),this.dom=wt("div",{class:"cm-panel-lint"},this.list,wt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>hr(this.view)},"\xD7")),this.update()}get selectedIndex(){let e=this.view.state.field(Ht).selected;if(!e)return-1;for(let r=0;r<this.items.length;r++)if(this.items[r].diagnostic==e.diagnostic)return r;return-1}update(){let{diagnostics:e,selected:r}=this.view.state.field(Ht),o=0,h=!1,m=null,C=new Set;for(e.between(0,this.view.state.doc.length,(B,N,{spec:Z})=>{for(let te of Z.diagnostics){if(C.has(te))continue;C.add(te);let ge=-1,Ee;for(let Qe=o;Qe<this.items.length;Qe++)if(this.items[Qe].diagnostic==te){ge=Qe;break}ge<0?(Ee=new mr(this.view,te),this.items.splice(o,0,Ee),h=!0):(Ee=this.items[ge],ge>o&&(this.items.splice(o,ge-o),h=!0)),r&&Ee.diagnostic==r.diagnostic?Ee.dom.hasAttribute("aria-selected")||(Ee.dom.setAttribute("aria-selected","true"),m=Ee):Ee.dom.hasAttribute("aria-selected")&&Ee.dom.removeAttribute("aria-selected"),o++}});o<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)h=!0,this.items.pop();this.items.length==0&&(this.items.push(new mr(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),h=!0),m?(this.list.setAttribute("aria-activedescendant",m.id),this.view.requestMeasure({key:this,read:()=>({sel:m.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:B,panel:N})=>{let Z=N.height/this.list.offsetHeight;B.top<N.top?this.list.scrollTop-=(N.top-B.top)/Z:B.bottom>N.bottom&&(this.list.scrollTop+=(B.bottom-N.bottom)/Z)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),h&&this.sync()}sync(){let e=this.list.firstChild;function r(){let o=e;e=o.nextSibling,o.remove()}for(let o of this.items)if(o.dom.parentNode==this.list){for(;e!=o.dom;)r();e=o.dom.nextSibling}else this.list.insertBefore(o.dom,e);for(;e;)r()}moveSelection(e){if(this.selectedIndex<0)return;let r=this.view.state.field(Ht),o=Jn(r.diagnostics,this.items[e].diagnostic);o&&this.view.dispatch({selection:{anchor:o.from,head:o.to},scrollIntoView:!0,effects:ar.of(o)})}static open(e){return new Qn(e)}}function ci(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function hi(t){return ci(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const As=K.tk.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:hi("#d11")},".cm-lintRange-warning":{backgroundImage:hi("orange")},".cm-lintRange-info":{backgroundImage:hi("#999")},".cm-lintRange-hint":{backgroundImage:hi("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function Ts(t){return t=="error"?4:t=="warning"?3:t=="info"?2:1}function gr(t){let e="hint",r=1;for(let o of t){let h=Ts(o.severity);h>r&&(r=h,e=o.severity)}return e}class yr extends K.SJ{constructor(e){super(),this.diagnostics=e,this.severity=gr(e)}toDOM(e){let r=document.createElement("div");r.className="cm-lint-marker cm-lint-marker-"+this.severity;let o=this.diagnostics,h=e.state.facet(fi).tooltipFilter;return h&&(o=h(o,e.state)),o.length&&(r.onmouseover=()=>Ms(e,r,o)),r}}function Is(t,e){let r=o=>{let h=e.getBoundingClientRect();if(!(o.clientX>h.left-10&&o.clientX<h.right+10&&o.clientY>h.top-10&&o.clientY<h.bottom+10)){for(let m=o.target;m;m=m.parentNode)if(m.nodeType==1&&m.classList.contains("cm-tooltip-lint"))return;window.removeEventListener("mousemove",r),t.state.field(xr)&&t.dispatch({effects:Pi.of(null)})}};window.addEventListener("mousemove",r)}function Ms(t,e,r){function o(){let C=t.elementAtHeight(e.getBoundingClientRect().top+5-t.documentTop);t.coordsAtPos(C.from)&&t.dispatch({effects:Pi.of({pos:C.from,above:!1,clip:!1,create(){return{dom:cr(t,r),getCoords:()=>e.getBoundingClientRect()}}})}),e.onmouseout=e.onmousemove=null,Is(t,e)}let{hoverTime:h}=t.state.facet(fi),m=setTimeout(o,h);e.onmouseout=()=>{clearTimeout(m),e.onmouseout=e.onmousemove=null},e.onmousemove=()=>{clearTimeout(m),m=setTimeout(o,h)}}function Ps(t,e){let r=Object.create(null);for(let h of e){let m=t.lineAt(h.from);(r[m.from]||(r[m.from]=[])).push(h)}let o=[];for(let h in r)o.push(new yr(r[h]).range(+h));return D.Xs.of(o,!0)}const Bs=(0,K.v5)({class:"cm-gutter-lint",markers:t=>t.state.field(Mi),widgetMarker:(t,e,r)=>{let o=[];return t.state.field(Mi).between(r.from,r.to,(h,m,C)=>{h>r.from&&h<r.to&&o.push(...C.diagnostics)}),o.length?new yr(o):null}}),Mi=D.QQ.define({create(){return D.Xs.empty},update(t,e){t=t.map(e.changes);let r=e.state.facet(fi).markerFilter;for(let o of e.effects)if(o.is(ai)){let h=o.value;r&&(h=r(h||[],e.state)),t=Ps(e.state.doc,h.slice(0))}return t}}),Pi=D.Py.define(),xr=D.QQ.define({create(){return null},update(t,e){return t&&e.docChanged&&(t=or(e,t)?null:Rn(mn({},t),{pos:e.changes.mapPos(t.pos)})),e.effects.reduce((r,o)=>o.is(Pi)?o.value:r,t)},provide:t=>K.hJ.from(t)}),Es=K.tk.baseTheme({".cm-gutter-lint":{width:"1.4em","& .cm-gutterElement":{padding:".2em"}},".cm-lint-marker":{width:"1em",height:"1em"},".cm-lint-marker-info":{content:ci('<path fill="#aaf" stroke="#77e" stroke-width="6" stroke-linejoin="round" d="M5 5L35 5L35 35L5 35Z"/>')},".cm-lint-marker-warning":{content:ci('<path fill="#fe8" stroke="#fd7" stroke-width="6" stroke-linejoin="round" d="M20 6L37 35L3 35Z"/>')},".cm-lint-marker-error":{content:ci('<circle cx="20" cy="20" r="15" fill="#f87" stroke="#f43" stroke-width="6"/>')}}),kr=[Ht,K.tk.decorations.compute([Ht],t=>{let{selected:e,panel:r}=t.field(Ht);return!e||!r||e.from==e.to?K.p.none:K.p.set([ks.range(e.from,e.to)])}),(0,K.bF)(vs,{hideOn:or}),As],fi=D.r$.define({combine(t){return(0,D.BO)(t,{hoverTime:300,markerFilter:null,tooltipFilter:null})}});function ho(t={}){return[fi.of(t),Mi,Bs,Es,xr]}function fo(t,e){let r=t.field(Ht,!1);if(r&&r.diagnostics.size){let o=[],h=[],m=-1;for(let C=RangeSet.iter([r.diagnostics]);;C.next()){for(let B=0;B<o.length;B++)(!C.value||C.value.spec.diagnostics.indexOf(o[B])<0)&&(e(o[B],h[B],m),o.splice(B,1),h.splice(B--,1));if(!C.value)break;for(let B of C.value.spec.diagnostics)o.indexOf(B)<0&&(o.push(B),h.push(C.from));m=C.to}}}var vr=function(e){e===void 0&&(e={});var{crosshairCursor:r=!1}=e,o=[];e.closeBracketsKeymap!==!1&&(o=o.concat(li.GA)),e.defaultKeymap!==!1&&(o=o.concat(Vr)),e.searchKeymap!==!1&&(o=o.concat(gs)),e.historyKeymap!==!1&&(o=o.concat(d)),e.foldKeymap!==!1&&(o=o.concat(xe.e7)),e.completionKeymap!==!1&&(o=o.concat(li.B1)),e.lintKeymap!==!1&&(o=o.concat(Ss));var h=[];return e.lineNumbers!==!1&&h.push((0,K.Eu)()),e.highlightActiveLineGutter!==!1&&h.push((0,K.HQ)()),e.highlightSpecialChars!==!1&&h.push((0,K.AE)()),e.history!==!1&&h.push(yt()),e.foldGutter!==!1&&h.push((0,xe.mi)()),e.drawSelection!==!1&&h.push((0,K.Uw)()),e.dropCursor!==!1&&h.push((0,K.qr)()),e.allowMultipleSelections!==!1&&h.push(D.yy.allowMultipleSelections.of(!0)),e.indentOnInput!==!1&&h.push((0,xe.nY)()),e.syntaxHighlighting!==!1&&h.push((0,xe.nF)(xe.R_,{fallback:!0})),e.bracketMatching!==!1&&h.push((0,xe.n$)()),e.closeBrackets!==!1&&h.push((0,li.vQ)()),e.autocompletion!==!1&&h.push((0,li.ys)()),e.rectangularSelection!==!1&&h.push((0,K.Zs)()),r!==!1&&h.push((0,K.S2)()),e.highlightActiveLine!==!1&&h.push((0,K.ZO)()),e.highlightSelectionMatches!==!1&&h.push(Zr()),e.tabSize&&typeof e.tabSize=="number"&&h.push(xe.c.of(" ".repeat(e.tabSize))),h.concat([K.$f.of(o.flat())]).filter(Boolean)},uo=function(e){e===void 0&&(e={});var r=[];e.defaultKeymap!==!1&&(r=r.concat(defaultKeymap)),e.historyKeymap!==!1&&(r=r.concat(historyKeymap));var o=[];return e.highlightSpecialChars!==!1&&o.push(highlightSpecialChars()),e.history!==!1&&o.push(history()),e.drawSelection!==!1&&o.push(drawSelection()),e.syntaxHighlighting!==!1&&o.push(syntaxHighlighting(defaultHighlightStyle,{fallback:!0})),o.concat([keymap.of(r.flat())]).filter(Boolean)},Fe=ne(35524);const br="#e5c07b",Bi="#e06c75",wr="#56b6c2",Sr="#ffffff",qn="#abb2bf",ui="#7d8799",Cr="#61afef",Ar="#98c379",Ei="#d19a66",Tr="#c678dd",Ir="#21252b",Oi="#2c313a",Di="#282c34",di="#353a42",Mr="#3E4451",Li="#528bff",po={chalky:br,coral:Bi,cyan:wr,invalid:Sr,ivory:qn,stone:ui,malibu:Cr,sage:Ar,whiskey:Ei,violet:Tr,darkBackground:Ir,highlightBackground:Oi,background:Di,tooltipBackground:di,selection:Mr,cursor:Li},Os=K.tk.theme({"&":{color:qn,backgroundColor:Di},".cm-content":{caretColor:Li},".cm-cursor, .cm-dropCursor":{borderLeftColor:Li},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:Mr},".cm-panels":{backgroundColor:Ir,color:qn},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:Di,color:ui,border:"none"},".cm-activeLineGutter":{backgroundColor:Oi},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:di},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:di,borderBottomColor:di},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:Oi,color:qn}}},{dark:!0}),Ds=xe.Qf.define([{tag:Fe.pJ.keyword,color:Tr},{tag:[Fe.pJ.name,Fe.pJ.deleted,Fe.pJ.character,Fe.pJ.propertyName,Fe.pJ.macroName],color:Bi},{tag:[Fe.pJ.function(Fe.pJ.variableName),Fe.pJ.labelName],color:Cr},{tag:[Fe.pJ.color,Fe.pJ.constant(Fe.pJ.name),Fe.pJ.standard(Fe.pJ.name)],color:Ei},{tag:[Fe.pJ.definition(Fe.pJ.name),Fe.pJ.separator],color:qn},{tag:[Fe.pJ.typeName,Fe.pJ.className,Fe.pJ.number,Fe.pJ.changed,Fe.pJ.annotation,Fe.pJ.modifier,Fe.pJ.self,Fe.pJ.namespace],color:br},{tag:[Fe.pJ.operator,Fe.pJ.operatorKeyword,Fe.pJ.url,Fe.pJ.escape,Fe.pJ.regexp,Fe.pJ.link,Fe.pJ.special(Fe.pJ.string)],color:wr},{tag:[Fe.pJ.meta,Fe.pJ.comment],color:ui},{tag:Fe.pJ.strong,fontWeight:"bold"},{tag:Fe.pJ.emphasis,fontStyle:"italic"},{tag:Fe.pJ.strikethrough,textDecoration:"line-through"},{tag:Fe.pJ.link,color:ui,textDecoration:"underline"},{tag:Fe.pJ.heading,fontWeight:"bold",color:Bi},{tag:[Fe.pJ.atom,Fe.pJ.bool,Fe.pJ.special(Fe.pJ.variableName)],color:Ei},{tag:[Fe.pJ.processingInstruction,Fe.pJ.string,Fe.pJ.inserted],color:Ar},{tag:Fe.pJ.invalid,color:Sr}]),Ls=[Os,(0,xe.nF)(Ds)];var Rs=K.tk.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),Ns=function(e){e===void 0&&(e={});var{indentWithTab:r=!0,editable:o=!0,readOnly:h=!1,theme:m="light",placeholder:C="",basicSetup:B=!0}=e,N=[];switch(r&&N.unshift(K.$f.of([Hr])),B&&(typeof B=="boolean"?N.unshift(vr()):N.unshift(vr(B))),C&&N.unshift((0,K.W$)(C)),m){case"light":N.push(Rs);break;case"dark":N.push(Ls);break;case"none":break;default:N.push(m);break}return o===!1&&N.push(K.tk.editable.of(!1)),h&&N.push(D.yy.readOnly.of(!0)),[...N]},Fs=t=>({line:t.state.doc.lineAt(t.state.selection.main.from),lineCount:t.state.doc.lines,lineBreak:t.state.lineBreak,length:t.state.doc.length,readOnly:t.state.readOnly,tabSize:t.state.tabSize,selection:t.state.selection,selectionAsSingle:t.state.selection.asSingle().main,ranges:t.state.selection.ranges,selectionCode:t.state.sliceDoc(t.state.selection.main.from,t.state.selection.main.to),selections:t.state.selection.ranges.map(e=>t.state.sliceDoc(e.from,e.to)),selectedText:t.state.selection.ranges.some(e=>!e.empty)});class Ws{constructor(e,r){this.timeLeftMS=void 0,this.timeoutMS=void 0,this.isCancelled=!1,this.isTimeExhausted=!1,this.callbacks=[],this.timeLeftMS=r,this.timeoutMS=r,this.callbacks.push(e)}tick(){if(!this.isCancelled&&!this.isTimeExhausted&&(this.timeLeftMS--,this.timeLeftMS<=0)){this.isTimeExhausted=!0;var e=this.callbacks.slice();this.callbacks.length=0,e.forEach(r=>{try{r()}catch(o){console.error("TimeoutLatch callback error:",o)}})}}cancel(){this.isCancelled=!0,this.callbacks.length=0}reset(){this.timeLeftMS=this.timeoutMS,this.isCancelled=!1,this.isTimeExhausted=!1}get isDone(){return this.isCancelled||this.isTimeExhausted}}class Pr{constructor(){this.interval=null,this.latches=new Set}add(e){this.latches.add(e),this.start()}remove(e){this.latches.delete(e),this.latches.size===0&&this.stop()}start(){this.interval===null&&(this.interval=setInterval(()=>{this.latches.forEach(e=>{e.tick(),e.isDone&&this.remove(e)})},1))}stop(){this.interval!==null&&(clearInterval(this.interval),this.interval=null)}}var Ri=null,js=()=>typeof window=="undefined"?new Pr:(Ri||(Ri=new Pr),Ri),Br=D.q6.define(),Js=200,$s=[];function _s(t){var{value:e,selection:r,onChange:o,onStatistics:h,onCreateEditor:m,onUpdate:C,extensions:B=$s,autoFocus:N,theme:Z="light",height:te=null,minHeight:ge=null,maxHeight:Ee=null,width:Qe=null,minWidth:it=null,maxWidth:kt=null,placeholder:Pt="",editable:kn=!0,readOnly:En=!1,indentWithTab:St=!0,basicSetup:Qt=!0,root:_n,initialState:Zn}=t,[zn,pi]=(0,Q.useState)(),[jt,Cn]=(0,Q.useState)(),[Un,Vn]=(0,Q.useState)(),an=(0,Q.useState)(()=>({current:null}))[0],On=(0,Q.useState)(()=>({current:null}))[0],Ni=K.tk.theme({"&":{height:te,minHeight:ge,maxHeight:Ee,width:Qe,minWidth:it,maxWidth:kt},"& .cm-scroller":{height:"100% !important"}}),Fi=K.tk.updateListener.of(pn=>{if(pn.docChanged&&typeof o=="function"&&!pn.transactions.some(Wi=>Wi.annotation(Br))){an.current?an.current.reset():(an.current=new Ws(()=>{if(On.current){var Wi=On.current;On.current=null,Wi()}an.current=null},Js),js().add(an.current));var Dn=pn.state.doc,Ln=Dn.toString();o(Ln,pn)}h&&h(Fs(pn))}),mi=Ns({theme:Z,editable:kn,readOnly:En,placeholder:Pt,indentWithTab:St,basicSetup:Qt}),Yn=[Fi,Ni,...mi];return C&&typeof C=="function"&&Yn.push(K.tk.updateListener.of(C)),Yn=Yn.concat(B),(0,Q.useLayoutEffect)(()=>{if(zn&&!Un){var pn={doc:e,selection:r,extensions:Yn},Dn=Zn?D.yy.fromJSON(Zn.json,pn,Zn.fields):D.yy.create(pn);if(Vn(Dn),!jt){var Ln=new K.tk({state:Dn,parent:zn,root:_n});Cn(Ln),m&&m(Ln,Dn)}}return()=>{jt&&(Vn(void 0),Cn(void 0))}},[zn,Un]),(0,Q.useEffect)(()=>{t.container&&pi(t.container)},[t.container]),(0,Q.useEffect)(()=>()=>{jt&&(jt.destroy(),Cn(void 0)),an.current&&(an.current.cancel(),an.current=null)},[jt]),(0,Q.useEffect)(()=>{N&&jt&&jt.focus()},[N,jt]),(0,Q.useEffect)(()=>{jt&&jt.dispatch({effects:D.Py.reconfigure.of(Yn)})},[Z,B,te,ge,Ee,Qe,it,kt,Pt,kn,En,St,Qt,o,C]),(0,Q.useEffect)(()=>{if(e!==void 0){var pn=jt?jt.state.doc.toString():"";if(jt&&e!==pn){var Dn=an.current&&!an.current.isDone,Ln=()=>{jt&&e!==jt.state.doc.toString()&&jt.dispatch({changes:{from:0,to:jt.state.doc.toString().length,insert:e||""},annotations:[Br.of(!0)]})};Dn?On.current=Ln:Ln()}}},[e,jt]),{state:Un,setState:Vn,view:jt,setView:Cn,container:zn,setContainer:pi}}var zs=ne(85893),Us=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],Er=(0,Q.forwardRef)((t,e)=>{var{className:r,value:o="",selection:h,extensions:m=[],onChange:C,onStatistics:B,onCreateEditor:N,onUpdate:Z,autoFocus:te,theme:ge="light",height:Ee,minHeight:Qe,maxHeight:it,width:kt,minWidth:Pt,maxWidth:kn,basicSetup:En,placeholder:St,indentWithTab:Qt,editable:_n,readOnly:Zn,root:zn,initialState:pi}=t,jt=(0,ie.Z)(t,Us),Cn=(0,Q.useRef)(null),{state:Un,view:Vn,container:an,setContainer:On}=_s({root:zn,value:o,autoFocus:te,theme:ge,height:Ee,minHeight:Qe,maxHeight:it,width:kt,minWidth:Pt,maxWidth:kn,basicSetup:En,placeholder:St,indentWithTab:Qt,editable:_n,readOnly:Zn,selection:h,onChange:C,onStatistics:B,onCreateEditor:N,onUpdate:Z,extensions:m,initialState:pi});(0,Q.useImperativeHandle)(e,()=>({editor:Cn.current,state:Un,view:Vn}),[Cn,an,Un,Vn]);var Ni=(0,Q.useCallback)(mi=>{Cn.current=mi,On(mi)},[On]);if(typeof o!="string")throw new Error("value must be typeof string but got "+typeof o);var Fi=typeof ge=="string"?"cm-theme-"+ge:"cm-theme";return(0,zs.jsx)("div",(0,J.Z)({ref:Ni,className:""+Fi+(r?" "+r:"")},jt))});Er.displayName="CodeMirror";var Vs=Er},28699:function(Wt,Xe,ne){ne.d(Xe,{V:function(){return K}});const J="\u037C",ie=typeof Symbol=="undefined"?"__"+J:Symbol.for(J),Q=typeof Symbol=="undefined"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),D=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:{};class K{constructor(Pe,ce){this.rules=[];let{finish:de}=ce||{};function Le(he){return/^@/.test(he)?[he]:he.split(/,\s*/)}function Se(he,Oe,Ce,q){let Ie=[],rt=/^@(\w+)\b/.exec(he[0]),st=rt&&rt[1]=="keyframes";if(rt&&Oe==null)return Ce.push(he[0]+";");for(let Ve in Oe){let je=Oe[Ve];if(/&/.test(Ve))Se(Ve.split(/,\s*/).map(gt=>he.map(ut=>gt.replace(/&/,ut))).reduce((gt,ut)=>gt.concat(ut)),je,Ce);else if(je&&typeof je=="object"){if(!rt)throw new RangeError("The value of a property ("+Ve+") should be a primitive value.");Se(Le(Ve),je,Ie,st)}else je!=null&&Ie.push(Ve.replace(/_.*/,"").replace(/[A-Z]/g,gt=>"-"+gt.toLowerCase())+": "+je+";")}(Ie.length||st)&&Ce.push((de&&!rt&&!q?he.map(de):he).join(", ")+" {"+Ie.join(" ")+"}")}for(let he in Pe)Se(Le(he),Pe[he],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let Pe=D[ie]||1;return D[ie]=Pe+1,J+Pe.toString(36)}static mount(Pe,ce,de){let Le=Pe[Q],Se=de&&de.nonce;Le?Se&&Le.setNonce(Se):Le=new _e(Pe,Se),Le.mount(Array.isArray(ce)?ce:[ce],Pe)}}let xe=new Map;class _e{constructor(Pe,ce){let de=Pe.ownerDocument||Pe,Le=de.defaultView;if(!Pe.head&&Pe.adoptedStyleSheets&&Le.CSSStyleSheet){let Se=xe.get(de);if(Se)return Pe[Q]=Se;this.sheet=new Le.CSSStyleSheet,xe.set(de,this)}else this.styleTag=de.createElement("style"),ce&&this.styleTag.setAttribute("nonce",ce);this.modules=[],Pe[Q]=this}mount(Pe,ce){let de=this.sheet,Le=0,Se=0;for(let he=0;he<Pe.length;he++){let Oe=Pe[he],Ce=this.modules.indexOf(Oe);if(Ce<Se&&Ce>-1&&(this.modules.splice(Ce,1),Se--,Ce=-1),Ce==-1){if(this.modules.splice(Se++,0,Oe),de)for(let q=0;q<Oe.rules.length;q++)de.insertRule(Oe.rules[q],Le++)}else{for(;Se<Ce;)Le+=this.modules[Se++].rules.length;Le+=Oe.rules.length,Se++}}if(de)ce.adoptedStyleSheets.indexOf(this.sheet)<0&&(ce.adoptedStyleSheets=[this.sheet,...ce.adoptedStyleSheets]);else{let he="";for(let Ce=0;Ce<this.modules.length;Ce++)he+=this.modules[Ce].getRules()+`
`;this.styleTag.textContent=he;let Oe=ce.head||ce;this.styleTag.parentNode!=Oe&&Oe.insertBefore(this.styleTag,Oe.firstChild)}}setNonce(Pe){this.styleTag&&this.styleTag.getAttribute("nonce")!=Pe&&this.styleTag.setAttribute("nonce",Pe)}}},81754:function(Wt,Xe,ne){ne.d(Xe,{YG:function(){return _e},uY:function(){return ie},ue:function(){return J}});for(var J={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},ie={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Q=typeof navigator!="undefined"&&/Mac/.test(navigator.platform),D=typeof navigator!="undefined"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),K=0;K<10;K++)J[48+K]=J[96+K]=String(K);for(var K=1;K<=24;K++)J[K+111]="F"+K;for(var K=65;K<=90;K++)J[K]=String.fromCharCode(K+32),ie[K]=String.fromCharCode(K);for(var xe in J)ie.hasOwnProperty(xe)||(ie[xe]=J[xe]);function _e(qe){var Pe=Q&&qe.metaKey&&qe.shiftKey&&!qe.ctrlKey&&!qe.altKey||D&&qe.shiftKey&&qe.key&&qe.key.length==1||qe.key=="Unidentified",ce=!Pe&&qe.key||(qe.shiftKey?ie:J)[qe.keyCode]||qe.key||"Unidentified";return ce=="Esc"&&(ce="Escape"),ce=="Del"&&(ce="Delete"),ce=="Left"&&(ce="ArrowLeft"),ce=="Up"&&(ce="ArrowUp"),ce=="Right"&&(ce="ArrowRight"),ce=="Down"&&(ce="ArrowDown"),ce}}}]);
}());