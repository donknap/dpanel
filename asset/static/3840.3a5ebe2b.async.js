"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3840],{99861:function(ze,Me,n){var Ae=n(64599),R=n.n(Ae),Ee=n(15009),f=n.n(Ee),ae=n(99289),Ie=n.n(ae),U=n(5574),B=n.n(U),oe=n(42119),M=n(83062),v=n(67294),q=n(92754),p=n(184),ue=n(38345),W=n(3616),xe=n(36146),fe=n(68297),C=n(85893),m=(0,v.forwardRef)(function(t,i){(0,v.useImperativeHandle)(i,function(){return{start:function(){var N;return y(!0),pe((N=t.image)!==null&&N!==void 0?N:[])},finish:function(){y(!1)},pull:function(N){return y(!0),pe(N)}}});var G=(0,v.useState)(0),Re=B()(G,2),De=Re[0],ve=Re[1],H=(0,v.useRef)(),ie=(0,v.useState)(!1),_e=B()(ie,2),ee=_e[0],y=_e[1],s=(0,v.useState)([]),de=B()(s,2),_=de[0],Z=de[1],e=new xe.Uo("components.appCompose");function pe(T){return Ze.apply(this,arguments)}function Ze(){return Ze=Ie()(f()().mark(function T(N){var we,b,ce,ye,se,Ye,nn;return f()().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:b=0,Z(N),ce=R()(N),ne.prev=3,ce.s();case 5:if((ye=ce.n()).done){ne.next=15;break}return Ye=ye.value,ve(b),(se=H.current)===null||se===void 0||se.setStart(Ye),ne.next=11,(0,fe.Ze)({tag:Ye,type:"pull"});case 11:nn=ne.sent,b++;case 13:ne.next=5;break;case 15:ne.next=20;break;case 17:ne.prev=17,ne.t0=ne.catch(3),ce.e(ne.t0);case 20:return ne.prev=20,ce.f(),ne.finish(20);case 23:(we=H.current)===null||we===void 0||we.setFinish(),ve(b),t.finishAutoHide&&y(!1);case 26:case"end":return ne.stop()}},T,null,[[3,17,20,23]])})),Ze.apply(this,arguments)}return(0,C.jsxs)(p.a,{trigger:t.trigger,open:ee,submitter:!1,title:e.format("pullImageTitle"),onOpenChange:function(){var T=Ie()(f()().mark(function N(we){var b,ce;return f()().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:y(we),we&&t.trigger&&pe((b=t.image)!==null&&b!==void 0?b:[]),we||(ce=H.current)===null||ce===void 0||ce.close();case 3:case"end":return se.stop()}},N)}));return function(N){return T.apply(this,arguments)}}(),drawerProps:{forceRender:!0,width:W.R_},children:[(0,C.jsx)(ue.Z,{children:_&&(0,C.jsx)(oe.Z,{current:De,items:_.map(function(T,N){return{title:(0,C.jsx)(M.Z,{title:T,children:T.length>15?T.substring(0,6)+" ... "+T.substring(T.length-6):T}),key:N}})})}),(0,C.jsx)(ue.Z,{children:(0,C.jsx)(q.Z,{ref:H})})]})});Me.Z=m},44771:function(ze,Me,n){n.d(Me,{Z:function(){return B}});var Ae=n(36146),R=n(38345),Ee=n(64317),f=n(97462),ae=n(31199),Ie=n(86250),U=n(85893);function B(oe){var M=new Ae.Uo("components.appForm");return(0,U.jsx)(R.Z,{ghost:oe.ghost,children:(0,U.jsxs)(Ie.Z,{gap:50,children:[(0,U.jsx)(Ee.Z,{tooltip:"".concat(M.format("createParamsDemo",{params:"--restart always"})),label:oe.showLabel&&M.format("createAdvRestart"),name:["restart","name"],width:"md",initialValue:oe.defaultValue?oe.defaultValue:"on-failure",options:M.option("createAdvRestartOption",["no","on-failure","unless-stopped","always"])}),(0,U.jsx)(f.Z,{name:["restart"],children:function(q){var p=q.restart;return p&&p.name=="on-failure"&&(0,U.jsx)(ae.Z,{width:"md",label:M.format("createAdvRestartMax"),name:["restart","maxAttempt"],initialValue:5})}})]})})}},84941:function(ze,Me,n){n.d(Me,{Z:function(){return or}});var Ae=n(97857),R=n.n(Ae),Ee=n(15009),f=n.n(Ee),ae=n(19632),Ie=n.n(ae),U=n(99289),B=n.n(U),oe=n(5574),M=n.n(oe),v=n(38345),q=n(62370),p=n(5966),ue=n(24739),W=n(97462),xe=n(83622),fe=n(30291),C=n(92398),m=n(40056),t=n(67294),i=n(42963),G=n(51042),Re=n(63434),De=n(17186),ve=n(71230),H=n(15746),ie=n(42075),_e=n(25593),ee=n(85265),y=n(92067),s=n(5251),de=n(3616),_=n(36146),Z=n(89240),e=n(85893),pe=(0,t.forwardRef)(function(h,Ce){var l=(0,t.useState)(!1),z=M()(l,2),x=z[0],Y=z[1],L=(0,t.useRef)(),u=new _.Uo("components.appForm"),A=function(I){return(0,e.jsxs)(v.Z,{bordered:!0,extra:I.action,style:{marginBottom:10},children:[(0,e.jsx)(v.Z,{title:u.format("createLinkItemTitle"),ghost:!0,children:(0,e.jsxs)(ve.Z,{children:[(0,e.jsx)(H.Z,{span:6,children:(0,e.jsx)(p.Z,{label:u.format("createLinkItemName"),name:"name",width:"md",readonly:!0})}),(0,e.jsxs)(H.Z,{span:14,children:[(0,e.jsx)(p.Z,{label:u.format("createLinkItemAlise"),name:"alise",width:"md",readonly:!0,tooltip:u.format("createLinkItemAliseTip"),hidden:!0}),(0,e.jsx)(q.Z,{label:u.format("createLinkItemAlise"),tooltip:u.format("createLinkItemAliseTip"),children:(0,e.jsx)(ie.Z,{direction:"vertical",children:[I.name,I.record.alise].map(function(E){return(0,e.jsx)(_e.Z.Text,{copyable:!0,children:E})})})})]}),(0,e.jsx)(H.Z,{span:4,children:(0,e.jsx)(Re.Z,{label:u.format("createLinkItemVolume"),name:"volume"})})]})}),(0,e.jsx)(v.Z,{ghost:!0,title:u.format("createLinkItemEnv"),children:(0,e.jsx)(ie.Z,{direction:"vertical",children:I.record.env&&(0,s.oZ)(I.record.env).map(function(E,he){return(0,e.jsx)(_e.Z.Text,{copyable:{icon:(0,e.jsx)(G.Z,{}),onCopy:function(){h.onAddEnv(E.name,E.value)},tooltips:[u.format("createLinkAddToEnv"),"success"]},code:!0,ellipsis:{tooltip:"".concat(E.name,"=").concat(E.value)},children:"".concat(E.name,"=").concat(E.value)},he)})},"linkEnv")})]})},K=function(I){var E,he,Se=!1,Oe=(E=(he=L.current)===null||he===void 0?void 0:he.getList())!==null&&E!==void 0?E:[];if(Oe.map(function(D){D.name==I.name&&(Se=!0)}),!Se){var Te;(Te=L.current)===null||Te===void 0||Te.add(I)}};return(0,t.useImperativeHandle)(Ce,function(){return{setDefaultLink:function(I){I&&I.map(function(E){E.name!=""&&K(E)})}}}),(0,e.jsxs)(v.Z,{title:u.format("createLinkTitle"),headerBordered:!0,tooltip:"".concat(u.format("createParamsDemo",{params:"--link list"})),ghost:!0,children:[(0,e.jsx)(De.u,{name:"links",actionRef:L,creatorButtonProps:{creatorButtonText:u.format("createLinkAddButton")},actionGuard:{beforeAddRow:function(I,E){return Y(!0),!1}},copyIconProps:!1,min:0,itemRender:function(I,E){return(0,e.jsx)(A,{action:I.action,name:E.record.name,record:E.record})}}),(0,e.jsx)(ee.Z,{title:u.format("createLinkSelectContainer"),width:de.R_,footer:!1,open:x,onClose:function(){return Y(!1)},children:(0,e.jsx)(y.Z,{onSelect:function(I){K({name:(0,s.fi)(I.Name,"/"),volume:!1,env:I.Config.Env,alise:(0,Z.zY)(I.Name)}),Y(!1)}})})]})}),Ze=pe,T=n(91058),N=n(10523),we=n(24796),b=n(52688),ce=n(24963);function ye(){var h=(0,t.useContext)(ce.Z),Ce=h.message,l=new _.Uo("components.appForm");return(0,e.jsx)(v.Z,{ghost:!0,children:(0,e.jsxs)(ue.UW,{children:[(0,e.jsx)(b.Z,{fieldProps:{onChange:function(x){x&&Ce.warning(l.format("createAdvRunCommandPrivilegedNotice"))}},name:"privileged",tooltip:"".concat(l.format("createParamsDemo",{params:"--privileged"})),label:l.format("createAdvRunCommandPrivileged"),initialValue:!1}),(0,e.jsx)(b.Z,{name:"autoRemove",tooltip:"".concat(l.format("createParamsDemo",{params:"--rm"})),label:l.format("createAdvRunCommandAutoRemove"),initialValue:!1}),(0,e.jsx)(b.Z,{fieldProps:{onChange:function(x){x&&Ce.warning(l.format("createAdvRunCommandHostPidNotice"))}},tooltip:"".concat(l.format("createParamsDemo",{params:"--pid host"})),name:"hostPid",label:l.format("createAdvRunCommandHostPid"),initialValue:!1}),(0,e.jsx)(b.Z,{name:"init",tooltip:"".concat(l.format("createParamsDemo",{params:"--init"})),label:l.format("createAdvRunCommandInit"),initialValue:!1})]})})}var se=n(62597),Ye=n(82346),nn=n(20743),gn=(0,t.forwardRef)(function(h,Ce){var l=(0,t.useRef)(),z=(0,t.useRef)(),x=new _.Uo("components.appForm");(0,t.useImperativeHandle)(Ce,function(){return{}});var Y=function(u){var A,K,w=!1,I=(A=(K=l.current)===null||K===void 0?void 0:K.getList())!==null&&A!==void 0?A:[];if(I.map(function(he){he.name==u.name&&(w=!0)}),!w){var E;(E=l.current)===null||E===void 0||E.add(u)}};return(0,e.jsxs)(v.Z,{ghost:!0,title:x.format("createNetworkTitle"),tooltip:"".concat(x.format("createParamsDemo",{params:"--network list"})),headerBordered:!0,extra:(0,e.jsx)(ie.Z,{children:h.showUseBridgeNetwork&&(0,e.jsx)(b.Z,{name:"useBridgeNetwork",initialValue:!0,fieldProps:{checkedChildren:x.format("createNetworkUseBridgeNetwork"),unCheckedChildren:x.format("createNetworkUseBridgeNetwork")}},"useBridgeNetwork")}),children:[(0,e.jsx)(De.u,{name:"network",actionRef:l,creatorButtonProps:{creatorButtonText:x.format("createNetworkAddButton")},actionGuard:{beforeAddRow:function(u,A){var K;return(K=z.current)===null||K===void 0||K.show(),!1}},copyIconProps:!1,min:0,itemRender:function(u,A){return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(ue.UW,{children:[(0,e.jsx)(p.Z,{label:x.format("createNetworkName"),name:"name",width:"md",disabled:!0,fieldProps:{value:A.record.name}}),(0,e.jsx)(p.Z,{label:x.format("createNetworkAlise"),name:"alise",tooltip:x.format("createNetworkAliseTip"),placeholder:x.format("createNetworkAliseEmpty"),disabled:A.record.name=="bridge"}),(0,e.jsx)(p.Z,{label:"IpV4",name:"ipV4",width:"md",disabled:A.record.name=="bridge",fieldProps:{addonAfter:A.record.subnet}}),A.record.subnetV6&&(0,e.jsx)(p.Z,{label:"IpV6",name:"ipV6",width:"md",disabled:A.record.name=="bridge",fieldProps:{addonAfter:A.record.subnetV6}}),(0,e.jsx)(q.Z,{label:" ",children:u.action})]})})}}),(0,e.jsx)(nn.Z,{ref:z,onSelect:function(u){Y({name:u.Name,alise:[""],subnet:u.IPAM.Config&&u.IPAM.Config[0].Subnet,subnetV6:u.IPAM.Config&&u.IPAM.Config[1]&&u.IPAM.Config[1].Subnet})}})]})}),ne=gn,Mn=n(82034),Je=n(52255),An=n(59252),rn=n(73813),wn=function(Ce){var l=new _.Uo("components.appForm");return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(v.Z,{title:l.format("createSelfNetworkTitle"),subTitle:l.format("createSelfNetworkTitleTip"),tooltip:"".concat(l.format("createParamsDemo",{params:"--network string --ip string --ip6 string"})),ghost:!0,children:[(0,e.jsxs)(ue.UW,{children:[(0,e.jsx)(p.Z,{label:l.format("createSelfNetworkIp",{ip:"ipv4"}),name:["ipV4","address"],width:"md",tooltip:l.format("createSelfNetworkIpTip",{ip:"ipv4",example:"192.168.1.5"}),placeholder:"192.168.1.5"}),(0,e.jsx)(W.Z,{name:["ipV4"],children:function(x){var Y=x.ipV4;return(0,e.jsx)(p.Z,{label:l.format("createSelfNetworkIpSubnet",{ip:"ipv4"}),name:["ipV4","subnet"],width:"md",required:Y&&Y.address,tooltip:l.format("createSelfNetworkIpSubnetTip",{ip:"ipv4",example:"192.168.1.0/24"}),placeholder:"192.168.1.0/24",rules:[{required:Y&&Y.address}]})}}),(0,e.jsx)(p.Z,{label:l.format("createSelfNetworkIpGateway",{ip:"ipv4"}),name:["ipV4","gateway"],width:"md",tooltip:l.format("createSelfNetworkIpGatewayTip",{ip:"ipv4",example:"192.168.1.1"}),placeholder:"192.168.1.1"}),(0,e.jsx)(b.Z,{label:l.format("createSelfNetworkIpV6Enable"),name:"enableIpV6Address"})]}),(0,e.jsx)(W.Z,{name:["enableIpV6Address"],children:function(x){var Y=x.enableIpV6Address;if(Y)return(0,e.jsxs)(ue.UW,{children:[(0,e.jsx)(p.Z,{label:l.format("createSelfNetworkIp",{ip:"ipv6"}),name:["ipV6","address"],width:"md",tooltip:l.format("createSelfNetworkIpTip",{ip:"ipv6",example:"2001:db8::5"}),placeholder:"2001:db8::5"}),(0,e.jsx)(W.Z,{name:["ipV6"],children:function(u){var A=u.ipV6;return(0,e.jsx)(p.Z,{label:l.format("createSelfNetworkIpSubnet",{ip:"ipv6"}),name:["ipV6","subnet"],width:"md",required:A&&A.address,tooltip:l.format("createSelfNetworkIpSubnetTip",{ip:"ipv6",example:"2001:db8::/48"}),placeholder:"2001:db8::/48",rules:[{required:A&&A.address}]})}}),(0,e.jsx)(p.Z,{label:l.format("createSelfNetworkIpGateway",{ip:"ipv6"}),name:["ipV6","gateway"],width:"md",tooltip:l.format("createSelfNetworkIpGatewayTip",{ip:"ipv6",example:"2001:db8::1"}),placeholder:"2001:db8::1"})]})}})]})})},yn=wn,Zn=n(90672);function bn(){var h=new _.Uo("components.appForm");return(0,e.jsx)(v.Z,{ghost:!0,title:h.format("createHookTitle"),subTitle:"",children:(0,e.jsx)(Zn.Z,{label:h.format("createHookContainerCreate"),name:["hook","containerCreate"],placeholder:h.format("createHookContainerCreateTip")})})}var On=n(93529),Tn=n(66309),Nn=n(96074),Ln=n(83062),Sn=n(64789),kn=n(85060),_n=n(78451),Un=n(99861),Bn=n(80821),Wn=n(1699),Hn=n(80271),Kn=n(47248),Fn=n(98510);function Vn(h){var Ce=(0,t.useState)(!1),l=M()(Ce,2),z=l[0],x=l[1],Y=(0,t.useContext)(i.Z),L=Y.createFormRef,u=Y.volumeListRef,A=Y.createEnvRef,K=Y.domainRef,w=new _.Uo("components.appForm"),I=(0,t.useState)(!1),E=M()(I,2),he=E[0],Se=E[1];(0,t.useEffect)(function(){if(L.current){var D;Se(!!((D=L.current)!==null&&D!==void 0&&D.getFieldValue("id")))}},[L.current]);function Oe(D){return Te.apply(this,arguments)}function Te(){return Te=B()(f()().mark(function D(F){var P,re,g,j,a,V,Pe,$,J,Q,me,le;return f()().wrap(function(je){for(;;)switch(je.prev=je.next){case 0:return je.next=2,(0,rn.YU)({md5:F});case 2:return g=je.sent,he||(Pe=(j=L.current)===null||j===void 0?void 0:j.getFieldsValue(),(a=L.current)===null||a===void 0||a.resetFields(),(V=L.current)===null||V===void 0||V.setFieldsValue({siteName:Pe.siteName,siteTitle:Pe.siteTitle})),g.data.info.Config.Env&&g.data.info.Config.Env.map(function(O){var S,Ue=O.split("=");(S=A.current)===null||S===void 0||S.addEnvItem(Ue[0],Ue.slice(1).join("="))}),(P=L.current)===null||P===void 0||P.setFieldValue("imageName",F),(re=L.current)===null||re===void 0||re.setFieldValue("workDir",g.data.info.Config.WorkingDir),he||(($=K.current)===null||$===void 0||$.setExposePort(g.data.info.Config.ExposedPorts),g.data.info.Config.Volumes?(me=[],Object.keys(g.data.info.Config.Volumes).map(function(O,S){me.push(O)}),(Q=u.current)===null||Q===void 0||Q.setDefaultDestPath(me)):(le=u.current)===null||le===void 0||le.setDefaultDestPath([]),(J=L.current)===null||J===void 0||J.setFieldsValue({workDir:{value:"",useDefault:!0,default:g.data.info.Config.WorkingDir},user:{value:"",useDefault:!0,default:g.data.info.Config.User},command:{value:"",useDefault:!0,default:g.data.info.Config.Cmd&&g.data.info.Config.Cmd.join(" ")},entrypoint:{value:"",useDefault:!0,default:g.data.info.Config.Entrypoint&&g.data.info.Config.Entrypoint.join(" ")}})),je.abrupt("return",!0);case 9:case"end":return je.stop()}},D)})),Te.apply(this,arguments)}return(0,t.useEffect)(function(){h.fromImageId&&Oe(h.fromImageId)},[h.fromImageId]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(ee.Z,{destroyOnHidden:!0,open:z,width:de.R_,title:w.format("dockerImageTitle"),footer:!1,onClose:function(){x(!1)},children:(0,e.jsx)(Fn.C,{columns:[{title:"Id",dataIndex:"Id",search:!1,width:120,render:function(F,P,re,g,j){return(0,e.jsx)(_n.Z,{content:P.Id.slice(7,19)})}},{title:_.FD.format("listImageName"),dataIndex:"tag",render:function(F,P,re,g){return(0,e.jsx)(_n.Z,{content:P.RepoTags[0]})}},{title:"Digest",width:120,render:function(F,P,re,g,j){var a=P.RepoDigests&&P.RepoDigests[0];return a?a.substring(a.indexOf("@")+8).substring(0,12):(0,e.jsx)(Tn.Z,{color:"warning",children:new _.Uo("components.appDetail").format("checkImageUpgradeOption.-3")})}},{title:_.FD.format("listCreatedAt"),dataIndex:"Created",search:!1,width:180,render:function(F,P,re,g){return(0,e.jsx)("div",{children:(0,s.ZM)(P.Created*1e3)},P.Id)},sorter:function(F,P){return F.Created-P.Created}},{title:_.FD.format("listManage"),valueType:"option",key:"option",width:50,render:function(F,P,re,g){return(0,e.jsx)(ie.Z,{split:(0,e.jsx)(Nn.Z,{type:"vertical"}),children:(0,e.jsx)(Bn.Z,{buttonProps:{icon:(0,e.jsx)(Sn.Z,{}),type:"link"},tips:_.FD.format("listManageUse"),action:function(){return Oe(P.RepoTags[0])},onSuccess:function(){x(!1)}},"addImage")})}}],request:function(){var D=B()(f()().mark(function F(P,re,g){var j,a,V;return f()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=3,(0,rn.KG)({tag:P.tag});case 3:return j=$.sent,a=0,V=[],j.data.list&&(V=j.data.list.flatMap(function(J){return J.RepoTags.map(function(Q){var me,le=(me=J.RepoDigests)===null||me===void 0?void 0:me.find(function(Ne){var je=Ne.split("@"),O=M()(je,2),S=O[0],Ue=O[1];return Q.includes(S)});return{Key:a++,Id:J.Id,Created:J.Created,RepoTags:[Q],RepoDigests:[le]}})})),$.abrupt("return",{data:V,success:!0,total:V.length});case 8:case"end":return $.stop()}},F)}));return function(F,P,re){return D.apply(this,arguments)}}(),rowKey:"Key"})},"imageTableList"),(0,e.jsxs)(ie.Z.Compact,{children:[(0,e.jsx)(p.Z,{width:"lg",label:w.format("dockerImageImageName"),name:"imageName",disabled:!0,placeholder:w.format("dockerImageImageNameEmpty"),rules:[{required:!0}],required:!0}),(0,e.jsx)(q.Z,{label:" ",children:(0,e.jsx)(xe.ZP,{type:"primary",onClick:function(){return x(!0)},children:w.format("dockerImageTitle")},"showBtn")}),(0,e.jsx)(W.Z,{name:["imageName"],children:function(F){var P=F.imageName;if(P)return(0,e.jsx)(q.Z,{label:" ",children:(0,e.jsx)(Un.Z,{finishAutoHide:!0,image:P?[P]:[],trigger:(0,e.jsx)(Ln.Z,{title:w.format("dockerImageUpgradeImageTip"),children:(0,e.jsx)(xe.ZP,{icon:(0,e.jsx)(kn.Z,{}),children:w.format("dockerImageUpgradeImageButton")})})})})}}),(0,e.jsx)(q.Z,{label:" ",children:(0,e.jsx)(Kn.Z,{onFinish:function(F){Oe(F)}},"remote")}),(0,e.jsx)(q.Z,{label:" ",children:(0,e.jsx)(W.Z,{name:["imageName"],children:function(F){var P=F.imageName;if(P)return(0,e.jsx)(Wn.u,{access:"canSeeEnableCe",showProTips:!0,children:function(g){var j=g.canSeeEnableCe;return(0,e.jsx)(Hn.Z,{imageId:P,trigger:(0,e.jsx)(xe.ZP,{disabled:j,children:w.format("dockerImageFileExplorer")})})}})}})})]})]})}var $n=n(44349);function Gn(){var h=new _.Uo("components.appForm");return(0,e.jsx)(v.Z,{ghost:!0,title:h.format("createDevice"),headerBordered:!0,tooltip:"".concat(h.format("createParamsDemo",{params:"--device list"})),children:(0,e.jsx)($n.Z,{name:"device",showAddButtonLabel:"".concat(_.FD.format("listManageAdd")).concat(h.format("createDevice")),hideCopyButton:!0,showAddButton:!0,gap:10,items:[{label:h.format("createDeviceHost"),name:"host",width:"md",placeholder:"/dev/tty0"},{label:h.format("createDeviceDest"),name:"dest",width:"md",placeholder:"/dev/tty0"}]})})}var Cn=n(64317);function zn(){var h=new _.Uo("components.appForm");return(0,e.jsxs)(v.Z,{ghost:!0,children:[(0,e.jsxs)(ve.Z,{children:[(0,e.jsx)(H.Z,{span:4,children:(0,e.jsx)(b.Z,{label:h.format("createGpus"),name:["gpus","enable"]})}),(0,e.jsx)(H.Z,{span:20,children:(0,e.jsx)(W.Z,{name:["gpus"],children:function(l){var z=l.gpus;if(z&&z.enable)return(0,e.jsx)(Cn.Z,{tooltip:"".concat(h.format("createParamsDemo",{params:"--gpus 'device=0'"})),mode:"tags",label:h.format("createGpusDevice"),name:["gpus","device"],placeholder:h.format("createGpusDeviceEmpty")})}})})]}),(0,e.jsx)(W.Z,{name:["gpus"],children:function(l){var z=l.gpus;if(z&&z.enable)return(0,e.jsx)(Cn.Z,{tooltip:"".concat(h.format("createParamsDemo",{params:"--gpus 'capabilities=compute,utility'"})),label:h.format("createGpusCap"),name:["gpus","capabilities"],mode:"multiple",fieldProps:{allowClear:!0},options:h.option("createGpusCapOption",["compute","compat32","graphics","utility","video","display"])})}})]})}var Yn=n(55730),Jn=n(27323),Qn=n(44771),Xn=n(33879),qn=n(96486),Qe=n.n(qn),er=n(73396),Pn=n(14946),nr=n(13822),rr=n(64412),tr=n(27166),ar=(0,t.forwardRef)(function(h,Ce){var l=(0,t.useContext)(ce.Z),z=l.notice,x=(0,Ye.useAccess)(),Y=(0,t.useState)("basic"),L=M()(Y,2),u=L[0],A=L[1],K=new _.Uo("app"),w=new _.Uo("components.appForm"),I=(0,t.useRef)(),E=(0,t.useRef)(),he=(0,t.useRef)(),Se=(0,t.useRef)(),Oe=(0,t.useRef)(),Te=(0,t.useState)(!1),D=M()(Te,2),F=D[0],P=D[1],re=(0,t.useRef)();return(0,t.useImperativeHandle)(Ce,function(){return{show:function(j){return B()(f()().mark(function a(){var V,Pe,$,J,Q,me,le,Ne,je,O,S,Ue,tn,an,on,sn,ln,un,Ke,dn,cn,mn,fn,Fe,Be,r,ge,jn,Ve,En,In,$e,xn,vn;return f()().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:if((V=I.current)===null||V===void 0||V.resetFields(),j){te.next=3;break}return te.abrupt("return");case 3:return P(!0),(Pe=re.current)===null||Pe===void 0||Pe.loading(),te.prev=5,te.next=8,(0,se.iE)({id:j});case 8:if(Be=te.sent,r=($=Be.data.containerInfo)===null||$===void 0?void 0:$.Info,ge={info:{}},!r){te.next=16;break}return te.next=14,(0,rn.YU)({md5:r.Image});case 14:jn=te.sent,ge=jn.data;case 16:return Ve=[],te.next=19,(0,Pn.jR)();case 19:return En=te.sent,Ve=En.data.list,In=function(o){if(!o)return{};var d=o[Be.data.siteName];if(!d)return{};var c=Ve&&Ve.find(function(k){return k.Id==d.NetworkID});return{ipV4:{address:d.IPAddress,gateway:d.Gateway,subnet:c&&c.IPAM.Config&&c.IPAM.Config[0]&&c.IPAM.Config[0].Subnet},ipV6:{address:d.GlobalIPv6Address,gateway:d.IPv6Gateway,subnet:c&&c.IPAM.Config&&c.IPAM.Config[1]&&c.IPAM.Config[1].Subnet},enableIpV6Address:c&&c.IPAM.Config&&c.IPAM.Config[1],bindIpV6:!!(c&&c.IPAM.Config&&c.IPAM.Config[1])}}(r==null?void 0:r.NetworkSettings.Networks),$e=[],te.next=25,function(){var o=B()(f()().mark(function d(c,k){var be;return f()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(!(!(k!=null&&k.NetworkSettings)||!(k!=null&&k.NetworkSettings.Networks)||!(k!=null&&k.NetworkSettings.Networks[c]))){X.next=2;break}return X.abrupt("return",[]);case 2:return X.next=4,(0,Pn.IS)({name:c});case 4:if(be=X.sent,X.t0=be.data.info.Containers,!X.t0){X.next=10;break}return X.next=9,Promise.all(Object.entries(be.data.info.Containers).filter(function(ke){var Xe=M()(ke,2),Rn=Xe[0],qe=Xe[1];return qe.Name!=c}).map(function(){var ke=B()(f()().mark(function Xe(Rn){var qe,ir,en,Ge,Dn,We,pn;return f()().wrap(function(He){for(;;)switch(He.prev=He.next){case 0:if(qe=M()(Rn,2),ir=qe[0],en=qe[1],en.Name==c){He.next=9;break}return He.next=4,(0,nr.jV)({md5:en.Name});case 4:return Dn=He.sent,We=Dn.data.info,pn=(Ge=k.HostConfig)===null||Ge===void 0||(Ge=Ge.VolumesFrom)===null||Ge===void 0?void 0:Ge.includes(en.Name),pn&&We.Mounts&&$e.push.apply($e,Ie()(We.Mounts.map(function(sr){var hn;return(hn=sr.Destination)!==null&&hn!==void 0?hn:""}))),He.abrupt("return",{name:en.Name,alise:We&&(0,Z.zY)(We.Name),env:We&&We.Config.Env,volume:pn});case 9:case"end":return He.stop()}},Xe)}));return function(Xe){return ke.apply(this,arguments)}}()));case 9:X.t0=X.sent;case 10:return X.abrupt("return",X.t0);case 11:case"end":return X.stop()}},d)}));return function(d,c){return o.apply(this,arguments)}}()(Be.data.siteName,r);case 25:xn=te.sent,(J=I.current)===null||J===void 0||J.setFieldsValue(R()({id:r==null?void 0:r.Id,siteTitle:Be.data.siteTitle,siteName:Be.data.siteName,hook:Be.data.env.hook,imageName:r==null?void 0:r.Config.Image,hostname:r==null?void 0:r.Config.Hostname,privileged:r==null||(Q=r.HostConfig)===null||Q===void 0?void 0:Q.Privileged,useHostNetwork:(r==null||(me=r.HostConfig)===null||me===void 0?void 0:me.NetworkMode)=="host",publishAllPorts:r==null||(le=r.HostConfig)===null||le===void 0?void 0:le.PublishAllPorts,groupAdd:r==null||(Ne=r.HostConfig)===null||Ne===void 0?void 0:Ne.GroupAdd,workDir:{value:r==null?void 0:r.Config.WorkingDir,useDefault:ge.info.Config.WorkingDir==(r==null?void 0:r.Config.WorkingDir),default:ge&&ge.info.Config&&ge.info.Config.WorkingDir},user:{value:r==null?void 0:r.Config.User,useDefault:ge.info.Config.User==(r==null?void 0:r.Config.User),default:ge.info.Config.User},command:{value:(0,s.PK)(r==null?void 0:r.Config.Cmd),useDefault:Qe().isEmpty(r==null?void 0:r.Config.Cmd)||Qe().isEqual(ge.info.Config.Cmd,r==null?void 0:r.Config.Cmd),default:((je=ge.info.Config)===null||je===void 0?void 0:je.Cmd)&&(0,s.PK)(ge.info.Config.Cmd)},entrypoint:{value:(0,s.PK)(r==null?void 0:r.Config.Entrypoint),useDefault:Qe().isEmpty(r==null?void 0:r.Config.Entrypoint)||Qe().isEqual(ge.info.Config.Entrypoint,r==null?void 0:r.Config.Entrypoint),default:((O=ge.info)===null||O===void 0||(O=O.Config)===null||O===void 0?void 0:O.Entrypoint)&&(0,s.PK)(ge.info.Config.Entrypoint)},shmsize:(0,Z.Rk)(r==null||(S=r.HostConfig)===null||S===void 0?void 0:S.ShmSize),cpus:(0,Z.PD)(r==null||(Ue=r.HostConfig)===null||Ue===void 0?void 0:Ue.NanoCpus),memory:(0,Z.pM)(r==null||(tn=r.HostConfig)===null||tn===void 0?void 0:tn.Memory),environment:(r==null?void 0:r.Config.Env)&&(0,s.oZ)(r.Config.Env,"="),label:function(o){return o&&Object.entries(o).map(function(d){var c=M()(d,2),k=c[0],be=c[1];return{name:k,value:be}})}(r==null?void 0:r.Config.Labels),volumes:function(o){return o==null?void 0:o.filter(function(d){var c;return!$e||$e.length==0||!$e.includes((c=d.Destination)!==null&&c!==void 0?c:"")}).map(function(d){return{host:d.Type=="bind"?d.Source:d.Name,dest:d.Destination,type:d.Type,permission:d.RW?"write":"readonly"}})}(r==null?void 0:r.Mounts),ports:(0,Z.yi)(r),links:xn,network:function(o){return o&&Object.entries(o).map(function(d){var c=M()(d,2),k=c[0],be=c[1],Le=Ve&&Ve.find(function(ke){return ke.Name==k}),X="";return be.Aliases&&be.Aliases.forEach(function(ke){if(!ke.includes("pod.dpanel.local")){X=ke;return}}),{name:k,alise:X,ipV4:be.IPAddress,subnet:"".concat(Le&&Le.IPAM.Config&&Le!==null&&Le!==void 0&&Le.IPAM.Config[0]?Le==null?void 0:Le.IPAM.Config[0].Subnet:"-","/").concat(be.IPPrefixLen)}})}(r==null?void 0:r.NetworkSettings.Networks),restart:function(o){return o?{name:o==null?void 0:o.Name,maxAttempt:o==null?void 0:o.MaximumRetryCount}:{name:"no"}}(r==null||(an=r.HostConfig)===null||an===void 0?void 0:an.RestartPolicy),extraHosts:(0,s.oZ)(r==null||(on=r.HostConfig)===null||on===void 0?void 0:on.ExtraHosts,":"),autoRemove:r==null||(sn=r.HostConfig)===null||sn===void 0?void 0:sn.AutoRemove,init:r==null||(ln=r.HostConfig)===null||ln===void 0?void 0:ln.Init,log:function(o,d){return{driver:(d=o==null?void 0:o.Type)!==null&&d!==void 0?d:"json-file",maxFile:(o==null?void 0:o.Config)&&o.Config["max-file"],maxSize:(o==null?void 0:o.Config)&&o.Config["max-size"]}}(r==null||(un=r.HostConfig)===null||un===void 0?void 0:un.LogConfig),dns:r==null||(Ke=r.HostConfig)===null||Ke===void 0||(Ke=Ke.Dns)===null||Ke===void 0?void 0:Ke.join(`
`),gpus:function(o){var d=o==null?void 0:o.find(function(k){return k.Driver=="nvidia"});if(!d)return{enable:!1};var c=d.Capabilities&&d.Capabilities[0];return{device:d.DeviceIDs,capabilities:c&&c.includes("gpu")?[]:c,enable:!0}}(r==null||(dn=r.HostConfig)===null||dn===void 0?void 0:dn.DeviceRequests),device:function(o){return o==null?void 0:o.map(function(d){return{host:d.PathOnHost,dest:d.PathInContainer}})}(r==null||(cn=r.HostConfig)===null||cn===void 0?void 0:cn.Devices),hostPid:(r==null||(mn=r.HostConfig)===null||mn===void 0?void 0:mn.PidMode)=="host",capAdd:r==null||(fn=r.HostConfig)===null||fn===void 0?void 0:fn.CapAdd,healthcheck:function(o,d,c){if(!o)return{};var k=o!=null&&(d=o.Test)!==null&&d!==void 0&&d.includes("CMD-SHELL")?"CMD-SHELL":"CMD";return{interval:(o==null?void 0:o.Interval)&&o.Interval/se.nL.Second,timeout:(o==null?void 0:o.Timeout)&&o.Timeout/se.nL.Second,retries:o==null?void 0:o.Retries,cmd:o!=null&&o.Test?o==null||(c=o.Test)===null||c===void 0?void 0:c.slice(1).join(" "):"",shellType:k}}(r==null?void 0:r.Config.Healthcheck),useBridgeNetwork:function(o){return!!(o&&o.bridge)}(r==null?void 0:r.NetworkSettings.Networks),enableBindHost:r==null||(Fe=r.HostConfig)===null||Fe===void 0||(Fe=Fe.ExtraHosts)===null||Fe===void 0?void 0:Fe.some(function(o){return o.includes(":host-gateway")})},In));case 27:return te.prev=27,(vn=re.current)===null||vn===void 0||vn.finish(),te.finish(27);case 30:case"end":return te.stop()}},a,null,[[5,,27,30]])}))()}}}),(0,e.jsx)(i.Z.Provider,{value:{createFormRef:I,volumeListRef:E,domainRef:he,createEnvRef:Oe,createLinkRef:Se},children:(0,e.jsx)(tr.Z,{title:_.Ob.format("container.create"),trigger:h.showTrigger?(0,e.jsx)(xe.ZP,{type:"primary",disabled:!x.canSeeContainerListManageCreate,children:_.Ob.format("container.create")}):void 0,drawerProps:{width:de.R_,rootClassName:"createAppWapper"},ref:re,formRef:I,onFinish:function(){var g=B()(f()().mark(function j(a){var V,Pe,$,J,Q,me,le,Ne;return f()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if((V=re.current)===null||V===void 0||V.loading(),le={id:a.id,siteTitle:a.siteTitle,siteName:a.siteName,hostname:a.hostname,imageName:a.imageName,environment:a.environment,links:a.links,ports:a.ports,volumes:a.volumes,network:a.network&&a.network.map(function(S){return Qe().isArray(S.alise)||(S.alise=[S.alise]),S}),privileged:(Pe=a.privileged)!==null&&Pe!==void 0?Pe:!1,autoRemove:($=a.autoRemove)!==null&&$!==void 0?$:!1,init:(J=a.init)!==null&&J!==void 0?J:!1,restartPolicy:a.restart,cpus:a.cpus,memory:a.memory,shmsize:(Q=a.shmsize)!==null&&Q!==void 0?Q:"0",workDir:a.workDir&&!a.workDir.useDefault?a.workDir.value:"",user:a.user&&!a.user.useDefault?a.user.value:"",groupAdd:a.groupAdd,command:a.command&&!a.command.useDefault?a.command.value:"",entrypoint:a.entrypoint&&!a.entrypoint.useDefault?a.entrypoint.value:"",useHostNetwork:a.useHostNetwork,bindIpV6:a.bindIpV6,log:a.log,dns:a.dns,label:a.label,publishAllPorts:a.publishAllPorts,extraHosts:a.extraHosts,ipV4:a.ipV4,ipV6:a.ipV6,device:a.device,gpus:a.gpus,hook:a.hook,hostPid:a.hostPid,capAdd:a.capAdd,useBridgeNetwork:(me=a.useBridgeNetwork)!==null&&me!==void 0?me:!0},!(!a.useBridgeNetwork&&!a.useHostNetwork&&(!a.network||a.network.length==0))){O.next=5;break}return z.error(K.format("createMessageNoBridgeNetworkMustHasUseNetwork")),O.abrupt("return",!1);case 5:return a.useBridgeNetwork&&le.network&&!le.network.find(function(S){return S.name=="bridge"})&&le.network.push({name:"bridge",alise:[],ipV4:""}),a.healthcheck&&a.healthcheck.cmd&&a.healthcheck.cmd!=""&&(le.healthcheck=a.healthcheck),O.next=9,(0,se.$G)(le).finally(function(){var S;(S=re.current)===null||S===void 0||S.finish()});case 9:return Ne=O.sent,h.onFinish&&h.onFinish(Ne.data.containerId),O.abrupt("return",!0);case 12:case"end":return O.stop()}},j)}));return function(j){return g.apply(this,arguments)}}(),open:F,onOpenChange:function(j){var a;P(j),!j&&((a=I.current)===null||a===void 0||a.resetFields())},children:(0,e.jsxs)(v.Z,{direction:"column",gutter:[0,10],ghost:!0,children:[(0,e.jsxs)(v.Z,{ghost:!0,title:K.format("createTitle"),children:[(0,e.jsx)(q.Z,{hidden:!0,name:"id"}),(0,e.jsx)(p.Z,{name:"siteTitle",label:K.format("createSiteTitle"),placeholder:K.format("createSiteTitleEmpty")}),(0,e.jsxs)(ue.UW,{children:[(0,e.jsx)(p.Z,{width:"md",name:"siteName",label:K.format("createSiteName"),required:!0,rules:[{required:!0}],tooltip:"".concat(w.format("createParamsDemo",{params:"--name string"})),placeholder:K.format("createSiteNameEmpty")}),(0,e.jsx)(p.Z,{label:"Hostname",name:"hostname",width:"md",tooltip:"".concat(w.format("createParamsDemo",{params:"--hostname string"}))})]}),(0,e.jsx)(Vn,{fromImageId:""})]}),(0,e.jsx)(fe.Z,{offsetTop:10,target:function(){return document.querySelector(".createAppWapper .ant-drawer-body")},children:(0,e.jsx)(v.Z,{style:{margin:-20},children:(0,e.jsx)(C.Z,{activeKey:u,onChange:function(j){A(j)},items:w.option("createTabOption",["basic","link","run-command","resource","cap"]).map(function(g){return{label:g.label,key:g.value}})})})}),(0,e.jsxs)(Je.Z,{show:u=="basic",children:[(0,e.jsx)(Mn.Z,{ref:he,showBindHost:!0,showBindIpV6:!0,showBindAll:!0}),(0,e.jsx)(T.Z,{showAddButton:!0,showImportButton:!0,showCodeMode:!0,ref:Oe,drawerProps:{title:w.format("createEnvTitle"),tooltip:"".concat(w.format("createParamsDemo",{params:"-e, --env list"})),ghost:!0}}),(0,e.jsx)(N.Z,{showDefault:!0,ref:E}),(0,e.jsx)(W.Z,{name:["siteName","useHostNetwork"],children:function(j){var a=j.siteName,V=j.useHostNetwork;if(!V)return(0,e.jsx)(yn,{})}}),(0,e.jsx)(rr.Z,{}),(0,e.jsx)(we.Z,{})]}),(0,e.jsxs)(Je.Z,{show:u=="link",children:[(0,e.jsx)(W.Z,{name:["siteName","useHostNetwork"],children:function(j){var a=j.siteName,V=j.useHostNetwork;return V?(0,e.jsx)(v.Z,{children:(0,e.jsx)(m.Z,{showIcon:!0,description:K.format("createNetworkDesc")})}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Ze,{onAddEnv:function($,J){var Q;(Q=Oe.current)===null||Q===void 0||Q.addEnvItem($,J)},ref:Se}),(0,e.jsx)(ne,{showUseBridgeNetwork:!0,siteName:a}),(0,e.jsx)(An.Z,{})]})}}),(0,e.jsx)(Gn,{})]}),(0,e.jsxs)(Je.Z,{show:u=="run-command",children:[(0,e.jsxs)(ue.UW,{children:[(0,e.jsx)(Qn.Z,{ghost:!0,defaultValue:"always",showLabel:!0}),(0,e.jsx)(ye,{})]}),(0,e.jsx)(Xn.Z,{showCommand:!0,showEntrypoint:!0,showWorkDir:!0,showUser:!0}),(0,e.jsx)(Jn.Z,{}),(0,e.jsx)(bn,{})]}),(0,e.jsxs)(Je.Z,{show:u=="resource",children:[(0,e.jsx)(er.Z,{}),(0,e.jsx)(Yn.Z,{showShmsize:!0}),(0,e.jsx)(zn,{})]}),(0,e.jsx)(Je.Z,{show:u=="cap",children:(0,e.jsx)(On.Z,{})})]})})})}),or=ar},20743:function(ze,Me,n){var Ae=n(15009),R=n.n(Ae),Ee=n(99289),f=n.n(Ee),ae=n(5574),Ie=n.n(ae),U=n(67294),B=n(14946),oe=n(64789),M=n(9773),v=n(83622),q=n(85265),p=n(42075),ue=n(66309),W=n(16970),xe=n(3616),fe=n(36146),C=n(67255),m=n(85893),t=(0,U.forwardRef)(function(i,G){(0,U.useImperativeHandle)(G,function(){return{show:function(){H(!0)}}});var Re=(0,U.useState)(!1),De=Ie()(Re,2),ve=De[0],H=De[1],ie=(0,U.useRef)(),_e=new fe.Uo("components.network");return(0,m.jsxs)(m.Fragment,{children:[i.showTriggerButton&&(0,m.jsx)(v.ZP,{onClick:function(){H(!0)},children:_e.format("selectTriggerButton")}),(0,m.jsx)(q.Z,{title:_e.format("selectDrawerTitle"),width:xe.R_,footer:!1,open:ve,onClose:function(){return H(!1)},extra:(0,m.jsx)(p.Z,{children:(0,m.jsx)(W.Z,{onFinish:function(){var y,s;!((y=ie.current)===null||y===void 0)&&y.reloadAndRest&&((s=ie.current)===null||s===void 0||s.reloadAndRest())}},"create")}),children:(0,m.jsx)(M.Z,{rowKey:"Name",actionRef:ie,columns:[{title:fe.FD.format("listTitle"),dataIndex:"Name",render:function(y,s,de,_,Z){return s.Name=="none"||s.Name=="bridge"||s.Name=="host"?(0,m.jsxs)(m.Fragment,{children:[s.Name," ",(0,m.jsx)(ue.Z,{color:"blue",children:"System"})]}):(0,m.jsx)(m.Fragment,{children:y})}},{title:fe.FD.format("listType"),ellipsis:!0,width:80,dataIndex:"Driver",search:!1},{title:"Driver",ellipsis:!0,width:100,search:!1,dataIndex:["IPAM","Driver"]},{title:"IPV4",search:!1,width:120,render:function(y,s,de,_,Z){return s.IPAM.Config&&s.IPAM.Config[0]&&(0,m.jsxs)(p.Z,{direction:"vertical",children:[s.IPAM.Config[0].Subnet,s.IPAM.Config[0].Gateway]})}},{title:"IPV6",search:!1,render:function(y,s,de,_,Z){return s.IPAM.Config&&s.IPAM.Config[1]&&(0,m.jsxs)(p.Z,{direction:"vertical",children:[s.IPAM.Config[1].Subnet,s.IPAM.Config[1].Gateway]})}},{title:fe.FD.format("listManage"),width:100,search:!1,render:function(y,s,de,_,Z){return[s.Name!="none"&&s.Name!="bridge"&&s.Name!="host"&&(0,m.jsx)(v.ZP,{type:"link",onClick:function(){i.onSelect(s),H(!1)},children:(0,m.jsx)(oe.Z,{})},s.Id)]}}],request:function(){var ee=f()(R()().mark(function y(s,de,_){var Z;return R()().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:return pe.next=2,(0,B.jR)({name:s.Name});case 2:return Z=pe.sent,pe.abrupt("return",{data:Z.data.list,success:!0,total:Z.data.list.length});case 4:case"end":return pe.stop()}},y)}));return function(y,s,de){return ee.apply(this,arguments)}}(),pagination:(0,C.Oh)()})})]})});Me.Z=t},70146:function(ze,Me,n){n.d(Me,{SR:function(){return q},VE:function(){return M},Zy:function(){return B},iD:function(){return ue},vG:function(){return xe},yB:function(){return Ie}});var Ae=n(15009),R=n.n(Ae),Ee=n(99289),f=n.n(Ee),ae=n(82346);function Ie(C){return U.apply(this,arguments)}function U(){return U=f()(R()().mark(function C(m){return R()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,ae.request)("/dpanel/api/app/container-backup/create",{data:m,method:"POST"});case 2:return i.abrupt("return",i.sent);case 3:case"end":return i.stop()}},C)})),U.apply(this,arguments)}function B(C){return oe.apply(this,arguments)}function oe(){return oe=f()(R()().mark(function C(m){return R()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,ae.request)("/dpanel/api/app/container-backup/get-list",{method:"POST",data:m}));case 1:case"end":return i.stop()}},C)})),oe.apply(this,arguments)}function M(C){return v.apply(this,arguments)}function v(){return v=f()(R()().mark(function C(m){return R()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,ae.request)("/dpanel/api/app/container-backup/delete",{method:"POST",data:m}));case 1:case"end":return i.stop()}},C)})),v.apply(this,arguments)}function q(C){return p.apply(this,arguments)}function p(){return p=f()(R()().mark(function C(m){return R()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,ae.request)("/dpanel/api/app/container-backup/restore",{method:"POST",data:m}));case 1:case"end":return i.stop()}},C)})),p.apply(this,arguments)}function ue(C){return W.apply(this,arguments)}function W(){return W=f()(R()().mark(function C(m){return R()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,ae.request)("/dpanel/api/app/container-backup/get-detail",{method:"POST",data:m}));case 1:case"end":return i.stop()}},C)})),W.apply(this,arguments)}function xe(C){return fe.apply(this,arguments)}function fe(){return fe=f()(R()().mark(function C(m){return R()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,ae.request)("/dpanel/api/app/site/restore",{data:m,method:"POST"});case 2:return i.abrupt("return",i.sent);case 3:case"end":return i.stop()}},C)})),fe.apply(this,arguments)}},89240:function(ze,Me,n){n.d(Me,{HJ:function(){return W},PD:function(){return fe},Rk:function(){return xe},pM:function(){return C},yi:function(){return ue},zY:function(){return m}});var Ae=n(64599),R=n.n(Ae),Ee=n(5251),f=n(10531),ae=n(43836),Ie=n(17179),U=n(74911),B=n(17637),oe=n(58353),M=/^([1-9]|[1-5]?[0-9]{2,4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-5])$/m;function v(t){return M.test(t)?parseInt(t,10):0}function q(t){typeof t!="string"&&(t=t.toString());var i=f.Z(t,"-",2),G=ae.Z(i,v);return G.length==1&&G.push(G[0]),G}function p(t,i){typeof t!="string"&&(t=t.toString());var G=null,Re=t.indexOf(":");Re>=0&&(G=t.substring(0,Re),t=t.substring(Re+1)),i=typeof i=="number"?i:v(i);var De=q(t),ve=Math.min(De[0],i),H=Math.max(De[1],i);return G?G+":"+ve+"-"+H:ve+"-"+H}function ue(t){if(!t||!t.HostConfig||!t.HostConfig.PortBindings)return[];var i=[],G=t.HostConfig.PortBindings,Re=Ie.Z(G),De=U.Z(Re,function(ve){return f.Z(ve,"/")[1]});return B.Z(De,function(ve,H){var ie={},_e=R()(ve),ee;try{for(_e.s();!(ee=_e.n()).done;){var y=ee.value,s=R()(G[y]),de;try{for(s.s();!(de=s.n()).done;){var _=de.value;ie[_.HostIp]=ie[_.HostIp]||[],ie[_.HostIp].push(y)}}catch(Z){s.e(Z)}finally{s.f()}}}catch(Z){_e.e(Z)}finally{_e.f()}B.Z(ie,function(Z,e){var pe=oe.Z(Z,function(N){return parseInt(f.Z(N,"/")[0],10)}),Ze=-1,T=-1;B.Z(pe,function(N){var we=f.Z(N,"/"),b=parseInt(we[0],10),ce=G[N][0];G[N].shift();var ye=v(ce.HostPort);if(ye>0){if(i.length>0&&Ze===ye-1&&T===b-1){i[i.length-1].host=p(i[i.length-1].host,ye),i[i.length-1].dest=p(i[i.length-1].dest,b),Ze=ye,T=b;return}Ze=ye,T=b}else Ze=-1,T=-1;var se=ce.HostPort.toString();e&&(se="".concat(e,":").concat(se)),i.push({host:se,dest:b.toString(),protocol:H})})})}),i}function W(t){return(0,Ee.fi)(t,"/")}function xe(t){return t?(0,Ee.FI)(t):"64M"}function fe(t){return t&&t>1e8?t/1e9:0}function C(t){return t?t/1024/1024:0}function m(t){return"".concat(W(t),".pod.dpanel.local")}}}]);
