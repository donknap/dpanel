"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9013],{52688:function(X,w,r){var d=r(1413),m=r(45987),A=r(67294),y=r(40284),T=r(85893),E=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],D=A.forwardRef(function(S,O){var C=S.fieldProps,b=S.unCheckedChildren,L=S.checkedChildren,R=S.proFieldProps,v=(0,m.Z)(S,E);return(0,T.jsx)(y.Z,(0,d.Z)({valueType:"switch",fieldProps:(0,d.Z)({unCheckedChildren:b,checkedChildren:L},C),ref:O,valuePropName:"checked",proFieldProps:R,filedConfig:{valuePropName:"checked",ignoreWidth:!0,customLightMode:!0}},v))});w.Z=D},90672:function(X,w,r){var d=r(1413),m=r(45987),A=r(67294),y=r(40284),T=r(85893),E=["fieldProps","proFieldProps"],D=function(O,C){var b=O.fieldProps,L=O.proFieldProps,R=(0,m.Z)(O,E);return(0,T.jsx)(y.Z,(0,d.Z)({ref:C,valueType:"textarea",fieldProps:b,proFieldProps:L},R))};w.Z=A.forwardRef(D)},39900:function(X,w,r){r.r(w),r.d(w,{default:function(){return Q}});var d=r(15009),m=r.n(d),A=r(99289),y=r.n(A),T=r(1699),E=r(75870),D=r(86548),S=r(74453),O=r(63713),C=r(67294),b=r(36146),L=r(5574),R=r.n(L),v=r(3616),M=r(24963),U=r(184),l=r(5966),G=r(52688),Y=r(97462),oe=r(90672),k=r(62370),_=r(83622),q=r(42075),ee=r(25593),re=r(66309),c=r(85893),te=(0,C.forwardRef)(function(B,e){var o=(0,C.useState)(!1),s=R()(o,2),t=s[0],n=s[1],i=(0,C.useRef)(),p=(0,C.useState)(0),g=R()(p,2),P=g[0],u=g[1],F=(0,C.useContext)(M.Z),H=F.message,f=new b.Uo("components.image");return(0,C.useImperativeHandle)(e,function(){return{setEditId:function(h){(0,E.t1)({id:h}).then(function(a){var x;n(!0),u(h),(x=i.current)===null||x===void 0||x.setFieldsValue({title:a.data.info.title,serverAddress:a.data.info.serverAddress,username:a.data.info.setting.username,password:a.data.info.setting.password,proxy:a.data.info.setting.proxy.join(`
`),enableHttp:a.data.info.setting.enableHttp,enableAuth:!!a.data.info.setting.username})})}}}),(0,c.jsxs)(U.a,{drawerProps:{forceRender:!0,width:v.R_},name:"createRegisry",title:f.format("registryCreateTitle"),open:t,onOpenChange:function(h){var a;n(h),(a=B.onFinish)===null||a===void 0||a.call(B)},layout:"horizontal",labelCol:{span:5,offset:0},formRef:i,trigger:(0,c.jsx)(_.ZP,{type:"primary",onClick:function(){var h;(h=i.current)===null||h===void 0||h.resetFields(),u(0)},children:f.format("registryCreateTirggerButton")}),onFinish:function(){var j=y()(m()().mark(function h(a){var x,$,I,W,K;return m()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,(0,E.ZH)({id:P,title:a.title,serverAddress:a.serverAddress,username:(x=a.username)!==null&&x!==void 0?x:"",password:($=a.password)!==null&&$!==void 0?$:"",proxy:a.proxy?a.proxy.split(`
`):[],enableHttp:a.enableHttp});case 2:if(I=N.sent,!(I&&I.data&&I.data.id>0)){N.next=8;break}return H.success(b.FD.format("finish")),(W=B.onFinish)===null||W===void 0||W.call(B),(K=i.current)===null||K===void 0||K.resetFields(),N.abrupt("return",!0);case 8:case"end":return N.stop()}},h)}));return function(h){return j.apply(this,arguments)}}(),children:[(0,c.jsx)(l.Z,{label:f.format("registryCreateFormTitle"),name:"title",placeholder:f.format("registryCreateFormTitleEmpty"),disabled:!!P,required:!0}),(0,c.jsx)(l.Z,{label:f.format("registryCreateFormServerAddress"),name:"serverAddress",placeholder:"ccr.ccs.tencentyun.com, docker.io, 127.0.0.1:5000",disabled:!!P,required:!0,rules:[{required:!0}]}),(0,c.jsx)(G.Z,{label:f.format("registryCreateFormEnableHttp"),name:"enableHttp"}),(0,c.jsx)(G.Z,{label:f.format("registryCreateFormEnableAuth"),name:"enableAuth"}),(0,c.jsx)(Y.Z,{name:["enableAuth"],children:function(h){var a=h.enableAuth;return a&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(l.Z,{label:f.format("registryCreateFormUsername"),name:"username",placeholder:f.format("registryCreateFormUsernameEmpty"),tooltip:""},"username"),(0,c.jsx)(l.Z.Password,{label:f.format("registryCreateFormPassword"),name:"password",allowClear:!0,placeholder:f.format("registryCreateFormPasswordEmpty")},"password")]})}}),(0,c.jsx)(oe.Z,{label:f.format("registryCreateFormProxy"),name:"proxy",fieldProps:{autoSize:{minRows:10}},placeholder:f.format("registryCreateFormProxyTip")}),(0,c.jsx)(k.Z,{label:f.format("registryCreateFormProxyRecommand"),children:(0,c.jsx)(q.Z,{wrap:!0,children:["docker.1panel.live","docker.m.daocloud.io","docker.1ms.run"].map(function(j,h){return(0,c.jsx)(ee.Z.Link,{onClick:function(){var x,$,I=[];if((x=i.current)!==null&&x!==void 0&&x.getFieldValue("proxy")){var W;I=(W=i.current)===null||W===void 0?void 0:W.getFieldValue("proxy").split(`
`)}else I=[];I.includes(j)||I.push(j),($=i.current)===null||$===void 0||$.setFieldValue("proxy",I.join(`
`))},children:(0,c.jsx)(re.Z,{color:"cyan",children:j})},h)})})},"recommend")]})}),ne=te,se=r(55681);function Q(){var B=(0,C.useRef)(),e=(0,C.useRef)(),o=(0,O.useAccess)();return(0,c.jsx)(S._z,{header:{extra:[(0,c.jsx)(T.u,{access:"canSeeImageRegistryManage",children:(0,c.jsx)(ne,{onFinish:function(){var t,n;!((t=B.current)===null||t===void 0)&&t.reloadAndRest&&((n=B.current)===null||n===void 0||n.reloadAndRest())},ref:e},"create")},"create")]},children:(0,c.jsx)(se.Co,{rowKey:"id",columns:[{title:b.FD.format("listTitle"),ellipsis:!0,dataIndex:"title"},{title:"Url",dataIndex:"serverAddress"},{title:b.FD.format("listUsername"),dataIndex:["setting","username"],search:!1}],request:function(){var s=y()(m()().mark(function t(n,i,p){var g;return m()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,E.Ot)({title:n.title,serverAddress:n.serverAddress});case 2:return g=u.sent,u.abrupt("return",{data:g.data.list,success:!0,total:g.data.list.length});case 4:case"end":return u.stop()}},t)}));return function(t,n,i){return s.apply(this,arguments)}}(),rowSelection:o.canSeeImageRegistryManage?{defaultSelectedRowKeys:[],alwaysShowAlert:!0}:void 0,actionRef:B,actions:[{key:"edit",label:b.FD.format("listManageEdit"),showInContext:"manage",showInOperator:!0,icon:(0,c.jsx)(D.Z,{}),action:function(t){return y()(m()().mark(function n(){var i,p,g;return m()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:p=t.finish,g=t.selectedRow,p(!0),(i=e.current)===null||i===void 0||i.setEditId(g.id);case 3:case"end":return u.stop()}},n)}))()}},{key:"dataPermission"},{key:"delete",action:function(t){return y()(m()().mark(function n(){var i,p,g;return m()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return i=t.finish,p=t.selectedRows,g=t.loading,g(),u.abrupt("return",(0,E.ix)({id:p.map(function(F){return F.id})}).finally(function(){i(!0)}));case 3:case"end":return u.stop()}},n)}))()}}]})})}},75870:function(X,w,r){r.d(w,{Ot:function(){return E},ZH:function(){return S},ix:function(){return C},t1:function(){return L}});var d=r(15009),m=r.n(d),A=r(99289),y=r.n(A),T=r(63713);function E(v){return D.apply(this,arguments)}function D(){return D=y()(m()().mark(function v(M){return m()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,T.request)("/dpanel/api/common/registry/get-list",{method:"POST",data:M}));case 1:case"end":return l.stop()}},v)})),D.apply(this,arguments)}function S(v){return O.apply(this,arguments)}function O(){return O=y()(m()().mark(function v(M){return m()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,T.request)("/dpanel/api/common/registry/create",{method:"POST",data:M}));case 1:case"end":return l.stop()}},v)})),O.apply(this,arguments)}function C(v){return b.apply(this,arguments)}function b(){return b=y()(m()().mark(function v(M){return m()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,T.request)("/dpanel/api/common/registry/delete",{method:"POST",data:M}));case 1:case"end":return l.stop()}},v)})),b.apply(this,arguments)}function L(v){return R.apply(this,arguments)}function R(){return R=y()(m()().mark(function v(M){return m()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,T.request)("/dpanel/api/common/registry/get-detail",{method:"POST",data:M}));case 1:case"end":return l.stop()}},v)})),R.apply(this,arguments)}},66309:function(X,w,r){r.d(w,{Z:function(){return B}});var d=r(67294),m=r(93967),A=r.n(m),y=r(98423),T=r(98787),E=r(69760),D=r(96159),S=r(45353),O=r(53124),C=r(11568),b=r(15063),L=r(14747),R=r(83262),v=r(83559);const M=e=>{const{paddingXXS:o,lineWidth:s,tagPaddingHorizontal:t,componentCls:n,calc:i}=e,p=i(t).sub(s).equal(),g=i(o).sub(s).equal();return{[n]:Object.assign(Object.assign({},(0,L.Wf)(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:p,fontSize:e.tagFontSize,lineHeight:e.tagLineHeight,whiteSpace:"nowrap",background:e.defaultBg,border:`${(0,C.bf)(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,opacity:1,transition:`all ${e.motionDurationMid}`,textAlign:"start",position:"relative",[`&${n}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:e.defaultColor},[`${n}-close-icon`]:{marginInlineStart:g,fontSize:e.tagIconSize,color:e.colorIcon,cursor:"pointer",transition:`all ${e.motionDurationMid}`,"&:hover":{color:e.colorTextHeading}},[`&${n}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${e.iconCls}-close, ${e.iconCls}-close:hover`]:{color:e.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${n}-checkable-checked):hover`]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},"&-hidden":{display:"none"},[`> ${e.iconCls} + span, > span + ${e.iconCls}`]:{marginInlineStart:p}}),[`${n}-borderless`]:{borderColor:"transparent",background:e.tagBorderlessBg}}},U=e=>{const{lineWidth:o,fontSizeIcon:s,calc:t}=e,n=e.fontSizeSM;return(0,R.IX)(e,{tagFontSize:n,tagLineHeight:(0,C.bf)(t(e.lineHeightSM).mul(n).equal()),tagIconSize:t(s).sub(t(o).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:e.defaultBg})},l=e=>({defaultBg:new b.t(e.colorFillQuaternary).onBackground(e.colorBgContainer).toHexString(),defaultColor:e.colorText});var G=(0,v.I$)("Tag",e=>{const o=U(e);return M(o)},l),Y=function(e,o){var s={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&o.indexOf(t)<0&&(s[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)o.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(s[t[n]]=e[t[n]]);return s},k=d.forwardRef((e,o)=>{const{prefixCls:s,style:t,className:n,checked:i,onChange:p,onClick:g}=e,P=Y(e,["prefixCls","style","className","checked","onChange","onClick"]),{getPrefixCls:u,tag:F}=d.useContext(O.E_),H=$=>{p==null||p(!i),g==null||g($)},f=u("tag",s),[j,h,a]=G(f),x=A()(f,`${f}-checkable`,{[`${f}-checkable-checked`]:i},F==null?void 0:F.className,n,h,a);return j(d.createElement("span",Object.assign({},P,{ref:o,style:Object.assign(Object.assign({},t),F==null?void 0:F.style),className:x,onClick:H})))}),_=r(98719);const q=e=>(0,_.Z)(e,(o,{textColor:s,lightBorderColor:t,lightColor:n,darkColor:i})=>({[`${e.componentCls}${e.componentCls}-${o}`]:{color:s,background:n,borderColor:t,"&-inverse":{color:e.colorTextLightSolid,background:i,borderColor:i},[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}));var ee=(0,v.bk)(["Tag","preset"],e=>{const o=U(e);return q(o)},l);function re(e){return typeof e!="string"?e:e.charAt(0).toUpperCase()+e.slice(1)}const c=(e,o,s)=>{const t=re(s);return{[`${e.componentCls}${e.componentCls}-${o}`]:{color:e[`color${s}`],background:e[`color${t}Bg`],borderColor:e[`color${t}Border`],[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}};var te=(0,v.bk)(["Tag","status"],e=>{const o=U(e);return[c(o,"success","Success"),c(o,"processing","Info"),c(o,"error","Error"),c(o,"warning","Warning")]},l),ne=function(e,o){var s={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&o.indexOf(t)<0&&(s[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(e);n<t.length;n++)o.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(s[t[n]]=e[t[n]]);return s};const Q=d.forwardRef((e,o)=>{const{prefixCls:s,className:t,rootClassName:n,style:i,children:p,icon:g,color:P,onClose:u,bordered:F=!0,visible:H}=e,f=ne(e,["prefixCls","className","rootClassName","style","children","icon","color","onClose","bordered","visible"]),{getPrefixCls:j,direction:h,tag:a}=d.useContext(O.E_),[x,$]=d.useState(!0),I=(0,y.Z)(f,["closeIcon","closable"]);d.useEffect(()=>{H!==void 0&&$(H)},[H]);const W=(0,T.o2)(P),K=(0,T.yT)(P),J=W||K,N=Object.assign(Object.assign({backgroundColor:P&&!J?P:void 0},a==null?void 0:a.style),i),Z=j("tag",s),[ue,me,fe]=G(Z),pe=A()(Z,a==null?void 0:a.className,{[`${Z}-${P}`]:J,[`${Z}-has-color`]:P&&!J,[`${Z}-hidden`]:!x,[`${Z}-rtl`]:h==="rtl",[`${Z}-borderless`]:!F},t,n,me,fe),le=V=>{V.stopPropagation(),u==null||u(V),!V.defaultPrevented&&$(!1)},[,ge]=(0,E.Z)((0,E.w)(e),(0,E.w)(a),{closable:!1,closeIconRender:V=>{const Ce=d.createElement("span",{className:`${Z}-close-icon`,onClick:le},V);return(0,D.wm)(V,Ce,z=>({onClick:de=>{var ae;(ae=z==null?void 0:z.onClick)===null||ae===void 0||ae.call(z,de),le(de)},className:A()(z==null?void 0:z.className,`${Z}-close-icon`)}))}}),ve=typeof f.onClick=="function"||p&&p.type==="a",ie=g||null,he=ie?d.createElement(d.Fragment,null,ie,p&&d.createElement("span",null,p)):p,ce=d.createElement("span",Object.assign({},I,{ref:o,className:pe,style:N}),he,ge,W&&d.createElement(ee,{key:"preset",prefixCls:Z}),K&&d.createElement(te,{key:"status",prefixCls:Z}));return ue(ve?d.createElement(S.Z,{component:"Tag"},ce):ce)});Q.CheckableTag=k;var B=Q}}]);
