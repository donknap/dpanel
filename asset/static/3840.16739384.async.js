"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3840],{99861:function(Je,Ae,e){var ye=e(64599),D=e.n(ye),je=e(15009),p=e.n(je),ae=e(99289),ge=e.n(ae),S=e(5574),k=e.n(S),q=e(42119),A=e(83062),h=e(67294),G=e(92754),C=e(184),se=e(38345),K=e(3616),ee=e(36146),de=e(68297),E=e(85893),_=(0,h.forwardRef)(function(t,o){(0,h.useImperativeHandle)(o,function(){return{start:function(){var P;return Z(!0),ie((P=t.image)!==null&&P!==void 0?P:[])},finish:function(){Z(!1)},pull:function(P){return Z(!0),ie(P)}}});var z=(0,h.useState)(0),ce=k()(z,2),Ie=ce[0],u=ce[1],H=(0,h.useRef)(),T=(0,h.useState)(!1),Ce=k()(T,2),ne=Ce[0],Z=Ce[1],i=(0,h.useState)([]),Y=k()(i,2),m=Y[0],x=Y[1],n=new ee.Uo("components.appCompose");function ie(U){return Ze.apply(this,arguments)}function Ze(){return Ze=ge()(p()().mark(function U(P){var Re,y,O,c,g,w,we;return p()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:y=0,x(P),O=D()(P),J.prev=3,O.s();case 5:if((c=O.n()).done){J.next=15;break}return w=c.value,u(y),(g=H.current)===null||g===void 0||g.setStart(w),J.next=11,(0,de.Ze)({tag:w,type:"pull"});case 11:we=J.sent,y++;case 13:J.next=5;break;case 15:J.next=20;break;case 17:J.prev=17,J.t0=J.catch(3),O.e(J.t0);case 20:return J.prev=20,O.f(),J.finish(20);case 23:(Re=H.current)===null||Re===void 0||Re.setFinish(),u(y),t.finishAutoHide&&Z(!1);case 26:case"end":return J.stop()}},U,null,[[3,17,20,23]])})),Ze.apply(this,arguments)}return(0,E.jsxs)(C.a,{trigger:t.trigger,open:ne,submitter:!1,title:n.format("pullImageTitle"),onOpenChange:function(){var U=ge()(p()().mark(function P(Re){var y,O;return p()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:Z(Re),Re&&t.trigger&&ie((y=t.image)!==null&&y!==void 0?y:[]),Re||(O=H.current)===null||O===void 0||O.close();case 3:case"end":return g.stop()}},P)}));return function(P){return U.apply(this,arguments)}}(),drawerProps:{forceRender:!0,width:K.R_},children:[(0,E.jsx)(se.Z,{children:m&&(0,E.jsx)(q.Z,{current:Ie,items:m.map(function(U,P){return{title:(0,E.jsx)(A.Z,{title:U,children:U.length>15?U.substring(0,6)+" ... "+U.substring(U.length-6):U}),key:P}})})}),(0,E.jsx)(se.Z,{children:(0,E.jsx)(G.Z,{ref:H})})]})});Ae.Z=_},44771:function(Je,Ae,e){e.d(Ae,{Z:function(){return k}});var ye=e(36146),D=e(38345),je=e(64317),p=e(97462),ae=e(31199),ge=e(86250),S=e(85893);function k(q){var A=new ye.Uo("components.appForm");return(0,S.jsx)(D.Z,{ghost:q.ghost,children:(0,S.jsxs)(ge.Z,{gap:50,children:[(0,S.jsx)(je.Z,{tooltip:"".concat(A.format("createParamsDemo",{params:"--restart always"})),label:q.showLabel&&A.format("createAdvRestart"),name:["restart","name"],width:"md",initialValue:q.defaultValue?q.defaultValue:"on-failure",options:A.option("createAdvRestartOption",["no","on-failure","unless-stopped","always"])}),(0,S.jsx)(p.Z,{name:["restart"],children:function(G){var C=G.restart;return C&&C.name=="on-failure"&&(0,S.jsx)(ae.Z,{width:"md",label:A.format("createAdvRestartMax"),name:["restart","maxAttempt"],initialValue:5})}})]})})}},84941:function(Je,Ae,e){e.d(Ae,{Z:function(){return ur}});var ye=e(97857),D=e.n(ye),je=e(15009),p=e.n(je),ae=e(19632),ge=e.n(ae),S=e(99289),k=e.n(S),q=e(5574),A=e.n(q),h=e(38345),G=e(62370),C=e(5966),se=e(24739),K=e(97462),ee=e(83622),de=e(30291),E=e(92398),_=e(40056),t=e(67294),o=e(42963),z=e(51042),ce=e(63434),Ie=e(17186),u=e(71230),H=e(15746),T=e(42075),Ce=e(25593),ne=e(85265),Z=e(92067),i=e(5251),Y=e(3616),m=e(36146),x=e(89240),n=e(85893),ie=(0,t.forwardRef)(function(I,re){var l=(0,t.useState)(!1),L=A()(l,2),B=L[0],me=L[1],be=(0,t.useRef)(),d=new m.Uo("components.appForm"),W=function(R){return(0,n.jsxs)(h.Z,{bordered:!0,extra:R.action,style:{marginBottom:10},children:[(0,n.jsx)(h.Z,{title:d.format("createLinkItemTitle"),ghost:!0,children:(0,n.jsxs)(u.Z,{children:[(0,n.jsx)(H.Z,{span:6,children:(0,n.jsx)(C.Z,{label:d.format("createLinkItemName"),name:"name",width:"md",readonly:!0})}),(0,n.jsxs)(H.Z,{span:14,children:[(0,n.jsx)(C.Z,{label:d.format("createLinkItemAlise"),name:"alise",width:"md",readonly:!0,tooltip:d.format("createLinkItemAliseTip"),hidden:!0}),(0,n.jsx)(G.Z,{label:d.format("createLinkItemAlise"),tooltip:d.format("createLinkItemAliseTip"),children:(0,n.jsx)(T.Z,{direction:"vertical",children:[R.name,R.record.alise].map(function(M){return(0,n.jsx)(Ce.Z.Text,{copyable:!0,children:M})})})})]}),(0,n.jsx)(H.Z,{span:4,children:(0,n.jsx)(ce.Z,{label:d.format("createLinkItemVolume"),name:"volume"})})]})}),(0,n.jsx)(h.Z,{ghost:!0,title:d.format("createLinkItemEnv"),children:(0,n.jsx)(T.Z,{direction:"vertical",children:R.record.env&&(0,i.oZ)(R.record.env).map(function(M,De){return(0,n.jsx)(Ce.Z.Text,{copyable:{icon:(0,n.jsx)(z.Z,{}),onCopy:function(){I.onAddEnv(M.name,M.value)},tooltips:[d.format("createLinkAddToEnv"),"success"]},code:!0,ellipsis:{tooltip:"".concat(M.name,"=").concat(M.value)},children:"".concat(M.name,"=").concat(M.value)},De)})},"linkEnv")})]})},Q=function(R){var M,De,F=!1,b=(M=(De=be.current)===null||De===void 0?void 0:De.getList())!==null&&M!==void 0?M:[];if(b.map(function(fe){fe.name==R.name&&(F=!0)}),!F){var j;(j=be.current)===null||j===void 0||j.add(R)}};return(0,t.useImperativeHandle)(re,function(){return{setDefaultLink:function(R){R&&R.map(function(M){M.name!=""&&Q(M)})}}}),(0,n.jsxs)(h.Z,{title:d.format("createLinkTitle"),headerBordered:!0,tooltip:"".concat(d.format("createParamsDemo",{params:"--link list"})),ghost:!0,children:[(0,n.jsx)(Ie.u,{name:"links",actionRef:be,creatorButtonProps:{creatorButtonText:d.format("createLinkAddButton")},actionGuard:{beforeAddRow:function(R,M){return me(!0),!1}},copyIconProps:!1,min:0,itemRender:function(R,M){return(0,n.jsx)(W,{action:R.action,name:M.record.name,record:M.record})}}),(0,n.jsx)(ne.Z,{title:d.format("createLinkSelectContainer"),width:Y.R_,footer:!1,open:B,onClose:function(){return me(!1)},children:(0,n.jsx)(Z.Z,{onSelect:function(R){Q({name:(0,i.fi)(R.Name,"/"),volume:!1,env:R.Config.Env,alise:(0,x.zY)(R.Name)}),me(!1)}})})]})}),Ze=ie,U=e(91058),P=e(10523),Re=e(24796),y=e(52688),O=e(24963);function c(){var I=(0,t.useContext)(O.Z),re=I.message,l=new m.Uo("components.appForm");return(0,n.jsx)(h.Z,{ghost:!0,children:(0,n.jsxs)(se.UW,{children:[(0,n.jsx)(y.Z,{fieldProps:{onChange:function(B){B&&re.warning(l.format("createAdvRunCommandPrivilegedNotice"))}},name:"privileged",tooltip:"".concat(l.format("createParamsDemo",{params:"--privileged"})),label:l.format("createAdvRunCommandPrivileged"),initialValue:!1}),(0,n.jsx)(y.Z,{name:"autoRemove",tooltip:"".concat(l.format("createParamsDemo",{params:"--rm"})),label:l.format("createAdvRunCommandAutoRemove"),initialValue:!1}),(0,n.jsx)(y.Z,{fieldProps:{onChange:function(B){B&&re.warning(l.format("createAdvRunCommandHostPidNotice"))}},tooltip:"".concat(l.format("createParamsDemo",{params:"--pid host"})),name:"hostPid",label:l.format("createAdvRunCommandHostPid"),initialValue:!1}),(0,n.jsx)(y.Z,{name:"init",tooltip:"".concat(l.format("createParamsDemo",{params:"--init"})),label:l.format("createAdvRunCommandInit"),initialValue:!1})]})})}var g=e(62597),w=e(82346),we=e(20743),Le=(0,t.forwardRef)(function(I,re){var l=(0,t.useRef)(),L=(0,t.useRef)(),B=new m.Uo("components.appForm");(0,t.useImperativeHandle)(re,function(){return{}});var me=function(d){var W,Q,le=!1,R=(W=(Q=l.current)===null||Q===void 0?void 0:Q.getList())!==null&&W!==void 0?W:[];if(R.map(function(De){De.name==d.name&&(le=!0)}),!le){var M;(M=l.current)===null||M===void 0||M.add(d)}};return(0,n.jsxs)(h.Z,{ghost:!0,title:B.format("createNetworkTitle"),tooltip:"".concat(B.format("createParamsDemo",{params:"--network list"})),headerBordered:!0,extra:(0,n.jsx)(T.Z,{children:I.showUseBridgeNetwork&&(0,n.jsx)(y.Z,{name:"useBridgeNetwork",initialValue:!0,fieldProps:{checkedChildren:B.format("createNetworkUseBridgeNetwork"),unCheckedChildren:B.format("createNetworkUseBridgeNetwork")}},"useBridgeNetwork")}),children:[(0,n.jsx)(Ie.u,{name:"network",actionRef:l,creatorButtonProps:{creatorButtonText:B.format("createNetworkAddButton")},actionGuard:{beforeAddRow:function(d,W){var Q;return(Q=L.current)===null||Q===void 0||Q.show(),!1}},copyIconProps:!1,min:0,itemRender:function(d,W){return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(se.UW,{children:[(0,n.jsx)(C.Z,{label:B.format("createNetworkName"),name:"name",width:"md",disabled:!0,fieldProps:{value:W.record.name}}),(0,n.jsx)(C.Z,{label:B.format("createNetworkAlise"),name:"alise",tooltip:B.format("createNetworkAliseTip"),placeholder:B.format("createNetworkAliseEmpty"),disabled:W.record.name=="bridge"}),(0,n.jsx)(C.Z,{label:"IpV4",name:"ipV4",width:"md",disabled:W.record.name=="bridge",fieldProps:{addonAfter:W.record.subnet}}),W.record.subnetV6&&(0,n.jsx)(C.Z,{label:"IpV6",name:"ipV6",width:"md",disabled:W.record.name=="bridge",fieldProps:{addonAfter:W.record.subnetV6}}),(0,n.jsx)(G.Z,{label:" ",children:d.action})]})})}}),(0,n.jsx)(we.Z,{ref:L,onSelect:function(d){me({name:d.Name,alise:[""],subnet:d.IPAM.Config&&d.IPAM.Config[0].Subnet,subnetV6:d.IPAM.Config&&d.IPAM.Config[1]&&d.IPAM.Config[1].Subnet})}})]})}),J=Le,Fe=e(82034),Ke=e(52255),In=e(59252),Be=e(73813),Tn=function(re){var l=new m.Uo("components.appForm");return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(h.Z,{title:l.format("createSelfNetworkTitle"),subTitle:l.format("createSelfNetworkTitleTip"),tooltip:"".concat(l.format("createParamsDemo",{params:"--network string --ip string --ip6 string"})),ghost:!0,children:[(0,n.jsxs)(se.UW,{children:[(0,n.jsx)(C.Z,{label:l.format("createSelfNetworkIp",{ip:"ipv4"}),name:["ipV4","address"],width:"md",tooltip:l.format("createSelfNetworkIpTip",{ip:"ipv4",example:"192.168.1.5"}),placeholder:"192.168.1.5"}),(0,n.jsx)(K.Z,{name:["ipV4"],children:function(B){var me=B.ipV4;return(0,n.jsx)(C.Z,{label:l.format("createSelfNetworkIpSubnet",{ip:"ipv4"}),name:["ipV4","subnet"],width:"md",required:me&&me.address,tooltip:l.format("createSelfNetworkIpSubnetTip",{ip:"ipv4",example:"192.168.1.0/24"}),placeholder:"192.168.1.0/24",rules:[{required:me&&me.address}]})}}),(0,n.jsx)(C.Z,{label:l.format("createSelfNetworkIpGateway",{ip:"ipv4"}),name:["ipV4","gateway"],width:"md",tooltip:l.format("createSelfNetworkIpGatewayTip",{ip:"ipv4",example:"192.168.1.1"}),placeholder:"192.168.1.1"}),(0,n.jsx)(y.Z,{label:l.format("createSelfNetworkIpV6Enable"),name:"enableIpV6Address"})]}),(0,n.jsx)(K.Z,{name:["enableIpV6Address"],children:function(B){var me=B.enableIpV6Address;if(me)return(0,n.jsxs)(se.UW,{children:[(0,n.jsx)(C.Z,{label:l.format("createSelfNetworkIp",{ip:"ipv6"}),name:["ipV6","address"],width:"md",tooltip:l.format("createSelfNetworkIpTip",{ip:"ipv6",example:"2001:db8::5"}),placeholder:"2001:db8::5"}),(0,n.jsx)(K.Z,{name:["ipV6"],children:function(d){var W=d.ipV6;return(0,n.jsx)(C.Z,{label:l.format("createSelfNetworkIpSubnet",{ip:"ipv6"}),name:["ipV6","subnet"],width:"md",required:W&&W.address,tooltip:l.format("createSelfNetworkIpSubnetTip",{ip:"ipv6",example:"2001:db8::/48"}),placeholder:"2001:db8::/48",rules:[{required:W&&W.address}]})}}),(0,n.jsx)(C.Z,{label:l.format("createSelfNetworkIpGateway",{ip:"ipv6"}),name:["ipV6","gateway"],width:"md",tooltip:l.format("createSelfNetworkIpGatewayTip",{ip:"ipv6",example:"2001:db8::1"}),placeholder:"2001:db8::1"})]})}})]})})},Un=Tn,wn=e(90672);function Ln(){var I=new m.Uo("components.appForm");return(0,n.jsx)(h.Z,{ghost:!0,title:I.format("createHookTitle"),subTitle:"",children:(0,n.jsx)(wn.Z,{label:I.format("createHookContainerCreate"),name:["hook","containerCreate"],placeholder:I.format("createHookContainerCreateTip")})})}var Bn=e(93529),Nn=e(66309),Sn=e(96074),Wn=e(83062),kn=e(64789),Kn=e(85060),Rn=e(78451),Hn=e(99861),Fn=e(80821),Vn=e(1699),$n=e(80271),Gn=e(47248),zn=e(55681);function Yn(I){var re=new m.Uo("components.appForm"),l=(0,t.useContext)(o.Z),L=l.createFormRef,B=l.volumeListRef,me=l.createEnvRef,be=l.domainRef,d=l.containerInfo,W=(0,t.useState)(!1),Q=A()(W,2),le=Q[0],R=Q[1];function M(F){return De.apply(this,arguments)}function De(){return De=k()(p()().mark(function F(b){var j,fe,Te,ve,pe,Ne,Ve,V,Ue,ue,N,a;return p()().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:if((j=L.current)===null||j===void 0||j.setFieldValue("imageName",b),!(d&&d.Id!="")){te.next=3;break}return te.abrupt("return",!0);case 3:return te.next=5,(0,Be.YU)({md5:b});case 5:return V=te.sent,Ue=(fe=L.current)===null||fe===void 0?void 0:fe.getFieldsValue(),(Te=L.current)===null||Te===void 0||Te.resetFields(),(ve=L.current)===null||ve===void 0||ve.setFieldsValue({siteName:Ue.siteName,siteTitle:Ue.siteTitle,imageName:b}),V.data.info.Config.Env&&V.data.info.Config.Env.map(function(_e){var he,Pe=_e.split("=");(he=me.current)===null||he===void 0||he.addEnvNameValue(Pe[0],Pe.slice(1).join("="))}),(pe=L.current)===null||pe===void 0||pe.setFieldValue("workDir",V.data.info.Config.WorkingDir),(Ne=be.current)===null||Ne===void 0||Ne.setExposePort(V.data.info.Config.ExposedPorts),V.data.info.Config.Volumes?(N=[],Object.keys(V.data.info.Config.Volumes).map(function(_e,he){N.push(_e)}),(ue=B.current)===null||ue===void 0||ue.setDefaultDestPath(N)):(a=B.current)===null||a===void 0||a.setDefaultDestPath([]),(Ve=L.current)===null||Ve===void 0||Ve.setFieldsValue({workDir:{value:"",useDefault:!0,default:V.data.info.Config.WorkingDir},user:{value:"",useDefault:!0,default:V.data.info.Config.User},command:{value:"",useDefault:!0,default:V.data.info.Config.Cmd&&V.data.info.Config.Cmd.join(" ")},entrypoint:{value:"",useDefault:!0,default:V.data.info.Config.Entrypoint&&V.data.info.Config.Entrypoint.join(" ")}}),te.abrupt("return",!0);case 15:case"end":return te.stop()}},F)})),De.apply(this,arguments)}return(0,t.useEffect)(function(){I.fromImageId&&M(I.fromImageId)},[I.fromImageId]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ne.Z,{destroyOnHidden:!0,open:le,width:Y.R_,title:re.format("dockerImageTitle"),footer:!1,onClose:function(){R(!1)},children:(0,n.jsx)(zn.Co,{columns:[{title:"Id",dataIndex:"Id",search:!1,width:120,render:function(b,j,fe,Te,ve){return(0,n.jsx)(Rn.Z,{content:j.Id.slice(7,19)})}},{title:m.FD.format("listImageName"),dataIndex:"tag",render:function(b,j,fe,Te){return(0,n.jsx)(Rn.Z,{content:j.RepoTags[0]})}},{title:"Digest",width:120,render:function(b,j,fe,Te,ve){var pe=j.RepoDigests&&j.RepoDigests[0];return pe?pe.substring(pe.indexOf("@")+8).substring(0,12):(0,n.jsx)(Nn.Z,{color:"warning",children:new m.Uo("components.appDetail").format("checkImageUpgradeOption.-3")})}},{title:m.FD.format("listCreatedAt"),dataIndex:"Created",search:!1,width:180,render:function(b,j,fe,Te){return(0,n.jsx)("div",{children:(0,i.ZM)(j.Created*1e3)},j.Id)},sorter:function(b,j){return b.Created-j.Created}},{title:m.FD.format("listManage"),valueType:"option",key:"option",width:50,render:function(b,j,fe,Te){return(0,n.jsx)(T.Z,{split:(0,n.jsx)(Sn.Z,{type:"vertical"}),children:(0,n.jsx)(Fn.Z,{buttonProps:{icon:(0,n.jsx)(kn.Z,{}),type:"link"},tips:m.FD.format("listManageUse"),action:function(){return M(j.RepoTags[0])},onSuccess:function(){R(!1)}},"addImage")})}}],request:function(){var F=k()(p()().mark(function b(j,fe,Te){var ve,pe,Ne;return p()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return d&&d.Id!="",V.next=3,(0,Be.KG)({tag:j.tag});case 3:return ve=V.sent,pe=0,Ne=[],ve.data.list&&(Ne=ve.data.list.flatMap(function(Ue){return Ue.RepoTags.map(function(ue){var N,a=(N=Ue.RepoDigests)===null||N===void 0?void 0:N.find(function(Me){var te=Me.split("@"),_e=A()(te,2),he=_e[0],Pe=_e[1];return ue.includes(he)});return{Key:pe++,Id:Ue.Id,Created:Ue.Created,RepoTags:[ue],RepoDigests:[a]}})})),V.abrupt("return",{data:Ne,success:!0,total:Ne.length});case 8:case"end":return V.stop()}},b)}));return function(b,j,fe){return F.apply(this,arguments)}}(),rowKey:"Key"})},"imageTableList"),(0,n.jsxs)(T.Z.Compact,{children:[(0,n.jsx)(C.Z,{width:"lg",label:re.format("dockerImageImageName"),name:"imageName",disabled:!0,placeholder:re.format("dockerImageImageNameEmpty"),rules:[{required:!0}],required:!0}),(0,n.jsx)(G.Z,{label:" ",children:(0,n.jsx)(ee.ZP,{type:"primary",onClick:function(){return R(!0)},children:re.format("dockerImageTitle")},"showBtn")}),(0,n.jsx)(K.Z,{name:["imageName"],children:function(b){var j=b.imageName;if(j)return(0,n.jsx)(G.Z,{label:" ",children:(0,n.jsx)(Hn.Z,{finishAutoHide:!0,image:j?[j]:[],trigger:(0,n.jsx)(Wn.Z,{title:re.format("dockerImageUpgradeImageTip"),children:(0,n.jsx)(ee.ZP,{icon:(0,n.jsx)(Kn.Z,{}),children:re.format("dockerImageUpgradeImageButton")})})})})}}),(0,n.jsx)(G.Z,{label:" ",children:(0,n.jsx)(Gn.Z,{onFinish:function(b){M(b)},imageUrl:d&&d.Config.Image},"remote")}),(0,n.jsx)(G.Z,{label:" ",children:(0,n.jsx)(K.Z,{name:["imageName"],children:function(b){var j=b.imageName;if(j)return(0,n.jsx)(Vn.u,{access:"canSeeEnableCe",showProTips:!0,children:function(Te){var ve=Te.canSeeEnableCe;return(0,n.jsx)($n.Z,{imageId:j,trigger:(0,n.jsx)(ee.ZP,{disabled:ve,children:re.format("dockerImageFileExplorer")})})}})}})})]})]})}var Jn=e(44349);function Qn(){var I=new m.Uo("components.appForm");return(0,n.jsx)(h.Z,{ghost:!0,title:I.format("createDevice"),headerBordered:!0,tooltip:"".concat(I.format("createParamsDemo",{params:"--device list"})),children:(0,n.jsx)(Jn.Z,{name:"device",showAddButtonLabel:"".concat(m.FD.format("listManageAdd")).concat(I.format("createDevice")),hideCopyButton:!0,showAddButton:!0,gap:10,items:[{label:I.format("createDeviceHost"),name:"host",width:"md",placeholder:"/dev/tty0"},{label:I.format("createDeviceDest"),name:"dest",width:"md",placeholder:"/dev/tty0"}]})})}var Dn=e(64317);function Xn(){var I=new m.Uo("components.appForm");return(0,n.jsxs)(h.Z,{ghost:!0,children:[(0,n.jsxs)(u.Z,{children:[(0,n.jsx)(H.Z,{span:4,children:(0,n.jsx)(y.Z,{label:I.format("createGpus"),name:["gpus","enable"]})}),(0,n.jsx)(H.Z,{span:20,children:(0,n.jsx)(K.Z,{name:["gpus"],children:function(l){var L=l.gpus;if(L&&L.enable)return(0,n.jsx)(Dn.Z,{tooltip:"".concat(I.format("createParamsDemo",{params:"--gpus 'device=0'"})),mode:"tags",label:I.format("createGpusDevice"),name:["gpus","device"],placeholder:I.format("createGpusDeviceEmpty")})}})})]}),(0,n.jsx)(K.Z,{name:["gpus"],children:function(l){var L=l.gpus;if(L&&L.enable)return(0,n.jsx)(Dn.Z,{tooltip:"".concat(I.format("createParamsDemo",{params:"--gpus 'capabilities=compute,utility'"})),label:I.format("createGpusCap"),name:["gpus","capabilities"],mode:"multiple",fieldProps:{allowClear:!0},options:I.option("createGpusCapOption",["compute","compat32","graphics","utility","video","display"])})}})]})}var qn=e(55730),er=e(27323),nr=e(44771),rr=e(33879),tr=e(96486),tn=e.n(tr),ar=e(73396),Mn=e(14946),or=e(13822),sr=e(64412),ir=e(27166),lr=(0,t.forwardRef)(function(I,re){var l=(0,t.useContext)(O.Z),L=l.notice,B=(0,w.useAccess)(),me=(0,t.useState)("basic"),be=A()(me,2),d=be[0],W=be[1],Q=new m.Uo("app"),le=new m.Uo("components.appForm"),R=(0,t.useRef)(),M=(0,t.useRef)(),De=(0,t.useRef)(),F=(0,t.useRef)(),b=(0,t.useRef)(),j=(0,t.useState)(!1),fe=A()(j,2),Te=fe[0],ve=fe[1],pe=(0,t.useRef)(),Ne=(0,t.useState)(),Ve=A()(Ne,2),V=Ve[0],Ue=Ve[1];return(0,t.useImperativeHandle)(re,function(){return{show:function(N){return k()(p()().mark(function a(){var Me,te,_e,he,Pe,$e,Se,Qe,ln,Ee,xe,un,dn,cn,mn,fn,vn,pn,Xe,_n,hn,gn,Cn,qe,Ge,r,Oe,xn,en,On,An,nn,yn,Pn;return p()().wrap(function($){for(;;)switch($.prev=$.next){case 0:if(Ue(void 0),(Me=R.current)===null||Me===void 0||Me.resetFields(),N){$.next=4;break}return $.abrupt("return");case 4:return ve(!0),(te=pe.current)===null||te===void 0||te.loading(),$.prev=6,$.next=9,(0,g.iE)({id:N});case 9:if(Ge=$.sent,r=(_e=Ge.data.containerInfo)===null||_e===void 0?void 0:_e.Info,Ue(r),Oe={info:{Id:r==null?void 0:r.Image,Config:{WorkingDir:"",User:"",Entrypoint:[],Cmd:[]}}},!r){$.next=23;break}return $.prev=14,$.next=17,(0,Be.YU)({md5:r.Image});case 17:xn=$.sent,Oe=xn.data,$.next=23;break;case 21:$.prev=21,$.t0=$.catch(14);case 23:return en=[],$.next=26,(0,Mn.jR)();case 26:return On=$.sent,en=On.data.list,An=function(s){if(!s)return{};var f=s[Ge.data.siteName];if(!f)return{};var v=en&&en.find(function(X){return X.Id==f.NetworkID});return{ipV4:{address:f.IPAddress,gateway:f.Gateway,subnet:v&&v.IPAM.Config&&v.IPAM.Config[0]&&v.IPAM.Config[0].Subnet},ipV6:{address:f.GlobalIPv6Address,gateway:f.IPv6Gateway,subnet:v&&v.IPAM.Config&&v.IPAM.Config[1]&&v.IPAM.Config[1].Subnet},enableIpV6Address:v&&v.IPAM.Config&&v.IPAM.Config[1],bindIpV6:!!(v&&v.IPAM.Config&&v.IPAM.Config[1])}}(r==null?void 0:r.NetworkSettings.Networks),nn=[],$.next=32,function(){var s=k()(p()().mark(function f(v,X){var We;return p()().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:if(!(!(X!=null&&X.NetworkSettings)||!(X!=null&&X.NetworkSettings.Networks)||!(X!=null&&X.NetworkSettings.Networks[v]))){oe.next=2;break}return oe.abrupt("return",[]);case 2:return oe.next=4,(0,Mn.IS)({name:v});case 4:if(We=oe.sent,oe.t0=We.data.info.Containers,!oe.t0){oe.next=10;break}return oe.next=9,Promise.all(Object.entries(We.data.info.Containers).filter(function(He){var an=A()(He,2),Zn=an[0],on=an[1];return on.Name!=v}).map(function(){var He=k()(p()().mark(function an(Zn){var on,dr,sn,rn,bn,ze,En;return p()().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:if(on=A()(Zn,2),dr=on[0],sn=on[1],sn.Name==v){Ye.next=9;break}return Ye.next=4,(0,or.jV)({md5:sn.Name});case 4:return bn=Ye.sent,ze=bn.data.info,En=(rn=X.HostConfig)===null||rn===void 0||(rn=rn.VolumesFrom)===null||rn===void 0?void 0:rn.includes(sn.Name),En&&ze.Mounts&&nn.push.apply(nn,ge()(ze.Mounts.map(function(cr){var jn;return(jn=cr.Destination)!==null&&jn!==void 0?jn:""}))),Ye.abrupt("return",{name:sn.Name,alise:ze&&(0,x.zY)(ze.Name),env:ze&&ze.Config.Env,volume:En});case 9:case"end":return Ye.stop()}},an)}));return function(an){return He.apply(this,arguments)}}()));case 9:oe.t0=oe.sent;case 10:return oe.abrupt("return",oe.t0);case 11:case"end":return oe.stop()}},f)}));return function(f,v){return s.apply(this,arguments)}}()(Ge.data.siteName,r);case 32:yn=$.sent,(he=R.current)===null||he===void 0||he.setFieldsValue(D()({id:r==null?void 0:r.Id,siteTitle:Ge.data.siteTitle,siteName:Ge.data.siteName,hook:Ge.data.env.hook,imageName:r==null?void 0:r.Config.Image,hostname:r==null?void 0:r.Config.Hostname,privileged:r==null||(Pe=r.HostConfig)===null||Pe===void 0?void 0:Pe.Privileged,useHostNetwork:(r==null||($e=r.HostConfig)===null||$e===void 0?void 0:$e.NetworkMode)=="host",publishAllPorts:r==null||(Se=r.HostConfig)===null||Se===void 0?void 0:Se.PublishAllPorts,groupAdd:r==null||(Qe=r.HostConfig)===null||Qe===void 0?void 0:Qe.GroupAdd,workDir:{value:r==null?void 0:r.Config.WorkingDir,useDefault:Oe.info.Config.WorkingDir==(r==null?void 0:r.Config.WorkingDir),default:Oe&&Oe.info.Config&&Oe.info.Config.WorkingDir},user:{value:r==null?void 0:r.Config.User,useDefault:Oe.info.Config.User==(r==null?void 0:r.Config.User),default:Oe.info.Config.User},command:{value:(0,i.PK)(r==null?void 0:r.Config.Cmd),useDefault:tn().isEmpty(r==null?void 0:r.Config.Cmd)||tn().isEqual(Oe.info.Config.Cmd,r==null?void 0:r.Config.Cmd),default:((ln=Oe.info.Config)===null||ln===void 0?void 0:ln.Cmd)&&(0,i.PK)(Oe.info.Config.Cmd)},entrypoint:{value:(0,i.PK)(r==null?void 0:r.Config.Entrypoint),useDefault:tn().isEmpty(r==null?void 0:r.Config.Entrypoint)||tn().isEqual(Oe.info.Config.Entrypoint,r==null?void 0:r.Config.Entrypoint),default:((Ee=Oe.info)===null||Ee===void 0||(Ee=Ee.Config)===null||Ee===void 0?void 0:Ee.Entrypoint)&&(0,i.PK)(Oe.info.Config.Entrypoint)},shmsize:(0,x.Rk)(r==null||(xe=r.HostConfig)===null||xe===void 0?void 0:xe.ShmSize),cpus:(0,x.PD)(r==null||(un=r.HostConfig)===null||un===void 0?void 0:un.NanoCpus),memory:(0,x.pM)(r==null||(dn=r.HostConfig)===null||dn===void 0?void 0:dn.Memory),environment:(r==null?void 0:r.Config.Env)&&(0,i.oZ)(r.Config.Env,"="),label:function(s){return s&&Object.entries(s).map(function(f){var v=A()(f,2),X=v[0],We=v[1];return{name:X,value:We}})}(r==null?void 0:r.Config.Labels),volumes:function(s){return s==null?void 0:s.filter(function(f){var v;return!nn||nn.length==0||!nn.includes((v=f.Destination)!==null&&v!==void 0?v:"")}).map(function(f){return{host:f.Type=="bind"?f.Source:f.Name,dest:f.Destination,type:f.Type,permission:f.RW?"write":"readonly"}})}(r==null?void 0:r.Mounts),ports:(0,x.yi)(r),links:yn,network:function(s){return s&&Object.entries(s).map(function(f){var v=A()(f,2),X=v[0],We=v[1],ke=en&&en.find(function(He){return He.Name==X}),oe="";return We.Aliases&&We.Aliases.forEach(function(He){if(!He.includes("pod.dpanel.local")){oe=He;return}}),{name:X,alise:oe,ipV4:We.IPAddress,subnet:"".concat(ke&&ke.IPAM.Config&&ke!==null&&ke!==void 0&&ke.IPAM.Config[0]?ke==null?void 0:ke.IPAM.Config[0].Subnet:"-")}})}(r==null?void 0:r.NetworkSettings.Networks),restart:function(s){return s?{name:s==null?void 0:s.Name,maxAttempt:s==null?void 0:s.MaximumRetryCount}:{name:"no"}}(r==null||(cn=r.HostConfig)===null||cn===void 0?void 0:cn.RestartPolicy),extraHosts:(0,i.oZ)(r==null||(mn=r.HostConfig)===null||mn===void 0?void 0:mn.ExtraHosts,":"),autoRemove:r==null||(fn=r.HostConfig)===null||fn===void 0?void 0:fn.AutoRemove,init:r==null||(vn=r.HostConfig)===null||vn===void 0?void 0:vn.Init,log:function(s,f){return{driver:(f=s==null?void 0:s.Type)!==null&&f!==void 0?f:"json-file",maxFile:(s==null?void 0:s.Config)&&s.Config["max-file"],maxSize:(s==null?void 0:s.Config)&&s.Config["max-size"]}}(r==null||(pn=r.HostConfig)===null||pn===void 0?void 0:pn.LogConfig),dns:r==null||(Xe=r.HostConfig)===null||Xe===void 0||(Xe=Xe.Dns)===null||Xe===void 0?void 0:Xe.join(`
`),gpus:function(s){var f=s==null?void 0:s.find(function(X){return X.Driver=="nvidia"});if(!f)return{enable:!1};var v=f.Capabilities&&f.Capabilities[0];return{device:f.DeviceIDs,capabilities:v&&v.includes("gpu")?[]:v,enable:!0}}(r==null||(_n=r.HostConfig)===null||_n===void 0?void 0:_n.DeviceRequests),device:function(s){return s==null?void 0:s.map(function(f){return{host:f.PathOnHost,dest:f.PathInContainer}})}(r==null||(hn=r.HostConfig)===null||hn===void 0?void 0:hn.Devices),hostPid:(r==null||(gn=r.HostConfig)===null||gn===void 0?void 0:gn.PidMode)=="host",capAdd:r==null||(Cn=r.HostConfig)===null||Cn===void 0?void 0:Cn.CapAdd,healthcheck:function(s,f,v){if(!s)return{};var X=s!=null&&(f=s.Test)!==null&&f!==void 0&&f.includes("CMD-SHELL")?"CMD-SHELL":"CMD";return{interval:(s==null?void 0:s.Interval)&&s.Interval/g.nL.Second,timeout:(s==null?void 0:s.Timeout)&&s.Timeout/g.nL.Second,retries:s==null?void 0:s.Retries,cmd:s!=null&&s.Test?s==null||(v=s.Test)===null||v===void 0?void 0:v.slice(1).join(" "):"",shellType:X}}(r==null?void 0:r.Config.Healthcheck),useBridgeNetwork:function(s){return!!(s&&s.bridge)}(r==null?void 0:r.NetworkSettings.Networks),enableBindHost:r==null||(qe=r.HostConfig)===null||qe===void 0||(qe=qe.ExtraHosts)===null||qe===void 0?void 0:qe.some(function(s){return s.includes(":host-gateway")})},An));case 34:return $.prev=34,(Pn=pe.current)===null||Pn===void 0||Pn.finish(),$.finish(34);case 37:case"end":return $.stop()}},a,null,[[6,,34,37],[14,21]])}))()}}}),(0,n.jsx)(o.Z.Provider,{value:{createFormRef:R,volumeListRef:M,domainRef:De,createEnvRef:b,createLinkRef:F,containerInfo:V},children:(0,n.jsx)(ir.Z,{title:m.Ob.format("container.create"),trigger:I.showTrigger?(0,n.jsx)(ee.ZP,{type:"primary",disabled:!B.canSeeContainerListManageCreate,children:m.Ob.format("container.create")}):void 0,drawerProps:{width:Y.FK,rootClassName:"createAppWapper"},ref:pe,formRef:R,onFinish:function(){var ue=k()(p()().mark(function N(a){var Me,te,_e,he,Pe,$e,Se,Qe;return p()().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:if((Me=pe.current)===null||Me===void 0||Me.loading(),Se={id:a.id,siteTitle:a.siteTitle,siteName:a.siteName,hostname:a.hostname,imageName:a.imageName,environment:a.environment,links:a.links,ports:a.ports,volumes:a.volumes,network:a.network&&a.network.map(function(xe){return tn().isArray(xe.alise)||(xe.alise=[xe.alise]),xe}),privileged:(te=a.privileged)!==null&&te!==void 0?te:!1,autoRemove:(_e=a.autoRemove)!==null&&_e!==void 0?_e:!1,init:(he=a.init)!==null&&he!==void 0?he:!1,restartPolicy:a.restart,cpus:a.cpus,memory:a.memory,shmsize:(Pe=a.shmsize)!==null&&Pe!==void 0?Pe:"0",workDir:a.workDir&&!a.workDir.useDefault?a.workDir.value:"",user:a.user&&!a.user.useDefault?a.user.value:"",groupAdd:a.groupAdd,command:a.command&&!a.command.useDefault?a.command.value:"",entrypoint:a.entrypoint&&!a.entrypoint.useDefault?a.entrypoint.value:"",useHostNetwork:a.useHostNetwork,bindIpV6:a.bindIpV6,log:a.log,dns:a.dns,label:a.label,publishAllPorts:a.publishAllPorts,extraHosts:a.extraHosts,ipV4:a.ipV4,ipV6:a.ipV6,device:a.device,gpus:a.gpus,hook:a.hook,hostPid:a.hostPid,capAdd:a.capAdd,useBridgeNetwork:($e=a.useBridgeNetwork)!==null&&$e!==void 0?$e:!0},!(!a.useBridgeNetwork&&!a.useHostNetwork&&(!a.network||a.network.length==0))){Ee.next=5;break}return L.error(Q.format("createMessageNoBridgeNetworkMustHasUseNetwork")),Ee.abrupt("return",!1);case 5:return a.useBridgeNetwork&&Se.network&&!Se.network.find(function(xe){return xe.name=="bridge"})&&Se.network.push({name:"bridge",alise:[],ipV4:""}),a.healthcheck&&a.healthcheck.cmd&&a.healthcheck.cmd!=""&&(Se.healthcheck=a.healthcheck),Ee.next=9,(0,g.$G)(Se).finally(function(){var xe;(xe=pe.current)===null||xe===void 0||xe.finish()});case 9:return Qe=Ee.sent,I.onFinish&&I.onFinish(Qe.data.containerId),Ee.abrupt("return",!0);case 12:case"end":return Ee.stop()}},N)}));return function(N){return ue.apply(this,arguments)}}(),open:Te,onOpenChange:function(N){if(ve(N),!N){var a;(a=R.current)===null||a===void 0||a.resetFields(),Ue(void 0)}},children:(0,n.jsxs)(h.Z,{direction:"column",gutter:[0,10],ghost:!0,children:[(0,n.jsxs)(h.Z,{ghost:!0,title:Q.format("createTitle"),children:[(0,n.jsx)(G.Z,{hidden:!0,name:"id"}),(0,n.jsx)(C.Z,{name:"siteTitle",label:Q.format("createSiteTitle"),placeholder:Q.format("createSiteTitleEmpty")}),(0,n.jsxs)(se.UW,{children:[(0,n.jsx)(C.Z,{width:"md",name:"siteName",label:Q.format("createSiteName"),required:!0,rules:[{required:!0}],tooltip:"".concat(le.format("createParamsDemo",{params:"--name string"})),placeholder:Q.format("createSiteNameEmpty")}),(0,n.jsx)(C.Z,{label:"Hostname",name:"hostname",width:"md",tooltip:"".concat(le.format("createParamsDemo",{params:"--hostname string"}))})]}),(0,n.jsx)(Yn,{fromImageId:""})]}),(0,n.jsx)(de.Z,{offsetTop:10,target:function(){return document.querySelector(".createAppWapper .ant-drawer-body")},children:(0,n.jsx)(h.Z,{style:{margin:-20},children:(0,n.jsx)(E.Z,{activeKey:d,onChange:function(N){W(N)},items:le.option("createTabOption",["basic","link","run-command","resource","cap"]).map(function(ue){return{label:ue.label,key:ue.value}})})})}),(0,n.jsxs)(Ke.Z,{show:d=="basic",children:[(0,n.jsx)(Fe.Z,{ref:De,showBindHost:!0,showBindIpV6:!0,showBindAll:!0}),(0,n.jsx)(U.Z,{showAddButton:!0,showImportButton:!0,showCodeMode:!0,ref:b,drawerProps:{title:le.format("createEnvTitle"),tooltip:"".concat(le.format("createParamsDemo",{params:"-e, --env list"})),ghost:!0}}),(0,n.jsx)(P.Z,{showDefault:!0,ref:M}),(0,n.jsx)(K.Z,{name:["siteName","useHostNetwork"],children:function(N){var a=N.siteName,Me=N.useHostNetwork;if(!Me)return(0,n.jsx)(Un,{})}}),(0,n.jsx)(sr.Z,{}),(0,n.jsx)(Re.Z,{})]}),(0,n.jsxs)(Ke.Z,{show:d=="link",children:[(0,n.jsx)(K.Z,{name:["siteName","useHostNetwork"],children:function(N){var a=N.siteName,Me=N.useHostNetwork;return Me?(0,n.jsx)(h.Z,{children:(0,n.jsx)(_.Z,{showIcon:!0,description:Q.format("createNetworkDesc")})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Ze,{onAddEnv:function(_e,he){var Pe;(Pe=b.current)===null||Pe===void 0||Pe.addEnvNameValue(_e,he)},ref:F}),(0,n.jsx)(J,{showUseBridgeNetwork:!0,siteName:a}),(0,n.jsx)(In.Z,{})]})}}),(0,n.jsx)(Qn,{})]}),(0,n.jsxs)(Ke.Z,{show:d=="run-command",children:[(0,n.jsxs)(se.UW,{children:[(0,n.jsx)(nr.Z,{ghost:!0,defaultValue:"always",showLabel:!0}),(0,n.jsx)(c,{})]}),(0,n.jsx)(rr.Z,{showCommand:!0,showEntrypoint:!0,showWorkDir:!0,showUser:!0}),(0,n.jsx)(er.Z,{}),(0,n.jsx)(Ln,{})]}),(0,n.jsxs)(Ke.Z,{show:d=="resource",children:[(0,n.jsx)(ar.Z,{}),(0,n.jsx)(qn.Z,{showShmsize:!0}),(0,n.jsx)(Xn,{})]}),(0,n.jsx)(Ke.Z,{show:d=="cap",children:R&&R.current&&(0,n.jsx)(Bn.Z,{})})]})})})}),ur=lr},47248:function(Je,Ae,e){var ye=e(15009),D=e.n(ye),je=e(99289),p=e.n(je),ae=e(5574),ge=e.n(ae),S=e(38345),k=e(97269),q=e(5966),A=e(62370),h=e(64317),G=e(83622),C=e(85265),se=e(25593),K=e(42075),ee=e(67294),de=e(92754),E=e(82346),_=e(2205),t=e(3616),o=e(36146),z=e(23430),ce=e(68297),Ie=e(66991),u=e(85893),H=(0,ee.forwardRef)(function(T,Ce){var ne=(0,ee.useState)(!1),Z=ge()(ne,2),i=Z[0],Y=Z[1],m=(0,ee.useRef)(),x=(0,ee.useRef)(),n=(0,ee.useState)(!1),ie=ge()(n,2),Ze=ie[0],U=ie[1],P=new o.Uo("components.imagePull");(0,ee.useImperativeHandle)(Ce,function(){return{upgradeImage:function(c){var g;return Y(!0),(g=m.current)===null||g===void 0||g.setFieldValue("imageUrl",c),(0,ce.Ze)({tag:c,type:"pull"})},setImageName:function(c){var g;Y(!0),(g=m.current)===null||g===void 0||g.setFieldValue("imageUrl",c)},show:Re}});function Re(){return y.apply(this,arguments)}function y(){return y=p()(D()().mark(function O(){var c,g,w;return D()().wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:Y(!0),(c=m.current)===null||c===void 0||c.resetFields(),T.imageUrl&&((w=m.current)===null||w===void 0||w.setFieldValue("imageUrl",T.imageUrl)),(g=x.current)===null||g===void 0||g.setStart("");case 4:case"end":return Le.stop()}},O)})),y.apply(this,arguments)}return[(0,u.jsx)(G.ZP,{type:T.buttonType?T.buttonType:"default",icon:(0,u.jsx)(z.Z,{}),onClick:Re,children:P.format("triggerButton")},"remoteBtn"),(0,u.jsxs)(C.Z,{forceRender:!0,open:i,title:P.format("drawerTitle"),width:t.R_,onClose:function(){var c;Y(!1),(c=x.current)===null||c===void 0||c.close()},footer:!1,children:[(0,u.jsx)(S.Z,{children:(0,u.jsx)(se.Z.Text,{children:(0,u.jsxs)("ul",{style:{lineHeight:"30px"},children:[(0,u.jsxs)("li",{children:[P.format("tip.1")," ",(0,u.jsx)("a",{href:"https://hub.docker.com/",target:"_blank",children:o.FD.format("help")})]}),(0,u.jsxs)("li",{children:[P.format("tip.2")," ",(0,u.jsx)("a",{href:"https://hub.docker.com/search?q=",target:"_blank",children:o.FD.format("help")})]}),(0,u.jsxs)("li",{children:[P.format("tip.3")," "]}),(0,u.jsxs)("li",{children:[P.format("tip.4")," ",(0,u.jsx)(E.Link,{to:"/image/registry",children:o.Ob.format("image.registry.create")})]}),(0,u.jsxs)("li",{children:[P.format("tip.5")," ",(0,u.jsx)(E.Link,{to:"/image/registry",children:o.Ob.format("image.registry")})]})]})})}),(0,u.jsx)(S.Z,{title:P.format("triggerButton"),headerBordered:!0,children:(0,u.jsxs)(k.A,{formRef:m,submitter:!1,isKeyPressSubmit:!0,onFinish:function(){var O=p()(D()().mark(function c(g){var w,we,Le,J,Fe,Ke;return D()().wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:return Fe=(w=g.imageUrl)!==null&&w!==void 0?w:"",g.registryUrl&&(Fe="".concat(g.registryUrl,"/").concat(Fe)),U(!0),(we=x.current)===null||we===void 0||we.setStart(Fe),Be.next=6,(0,ce.Ze)({tag:(0,Ie.Z)(Fe," "),type:"pull",platform:(Le=g.platform)!==null&&Le!==void 0?Le:""}).finally(function(){U(!1)});case 6:return Ke=Be.sent,(J=x.current)===null||J===void 0||J.setFinish(),Y(!1),T.onFinish&&T.onFinish(Ke.data.tag),Be.abrupt("return",!0);case 11:case"end":return Be.stop()}},c)}));return function(c){return O.apply(this,arguments)}}(),children:[(0,u.jsx)(q.Z,{name:"registryUrl",hidden:!0}),(0,u.jsx)(q.Z,{disabled:Ze,name:"imageUrl",placeholder:P.format("imageUrlEmpty"),required:!0,rules:[{required:!0}]}),(0,u.jsxs)(K.Z.Compact,{children:[(0,u.jsx)(A.Z,{shouldUpdate:!0,children:function(c){return(0,u.jsx)(_.Z,{width:"30vw",onChange:function(w){if(c.setFieldValue("registryUrl",w?w.serverAddress:""),!w){c.setFieldValue("imageUrl",T.imageUrl);return}try{var we=new URL("http://".concat(c.getFieldValue("imageUrl")));we.host&&c.setFieldValue("imageUrl","".concat(w==null?void 0:w.serverAddress).concat(we.pathname))}catch(Le){}}})}}),(0,u.jsx)(h.Z,{name:"platform",placeholder:P.format("imagePlatformEmpty"),options:ce.ii.map(function(O){return{label:O.name,value:O.name}})}),(0,u.jsx)(G.ZP,{loading:Ze,onClick:p()(D()().mark(function O(){var c;return D()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:(c=m.current)===null||c===void 0||c.submit();case 1:case"end":return w.stop()}},O)})),children:P.format("triggerButton")}),(0,u.jsx)(G.ZP,{danger:!0,onClick:function(){var c;(c=x.current)===null||c===void 0||c.close()},children:o.FD.format("listManageKill")})]}),(0,u.jsx)(A.Z,{label:P.format("progressTitle"),children:(0,u.jsx)(de.Z,{ref:x})})]})})]},"remoteDrawer")]});Ae.Z=H},20743:function(Je,Ae,e){var ye=e(15009),D=e.n(ye),je=e(99289),p=e.n(je),ae=e(5574),ge=e.n(ae),S=e(67294),k=e(14946),q=e(64789),A=e(40018),h=e(83622),G=e(85265),C=e(42075),se=e(66309),K=e(16970),ee=e(3616),de=e(36146),E=e(67255),_=e(85893),t=(0,S.forwardRef)(function(o,z){(0,S.useImperativeHandle)(z,function(){return{show:function(){H(!0)}}});var ce=(0,S.useState)(!1),Ie=ge()(ce,2),u=Ie[0],H=Ie[1],T=(0,S.useRef)(),Ce=new de.Uo("components.network");return(0,_.jsxs)(_.Fragment,{children:[o.showTriggerButton&&(0,_.jsx)(h.ZP,{onClick:function(){H(!0)},children:Ce.format("selectTriggerButton")}),(0,_.jsx)(G.Z,{title:Ce.format("selectDrawerTitle"),width:ee.R_,footer:!1,open:u,onClose:function(){return H(!1)},extra:(0,_.jsx)(C.Z,{children:(0,_.jsx)(K.Z,{onFinish:function(){var Z,i;!((Z=T.current)===null||Z===void 0)&&Z.reloadAndRest&&((i=T.current)===null||i===void 0||i.reloadAndRest())}},"create")}),children:(0,_.jsx)(A.Z,{rowKey:"Name",actionRef:T,columns:[{title:de.FD.format("listTitle"),dataIndex:"Name",render:function(Z,i,Y,m,x){return i.Name=="none"||i.Name=="bridge"||i.Name=="host"?(0,_.jsxs)(_.Fragment,{children:[i.Name," ",(0,_.jsx)(se.Z,{color:"blue",children:"System"})]}):(0,_.jsx)(_.Fragment,{children:Z})}},{title:de.FD.format("listType"),ellipsis:!0,width:80,dataIndex:"Driver",search:!1},{title:"Driver",ellipsis:!0,width:100,search:!1,dataIndex:["IPAM","Driver"]},{title:"IPV4",search:!1,width:120,render:function(Z,i,Y,m,x){return i.IPAM.Config&&i.IPAM.Config[0]&&(0,_.jsxs)(C.Z,{direction:"vertical",children:[i.IPAM.Config[0].Subnet,i.IPAM.Config[0].Gateway]})}},{title:"IPV6",search:!1,render:function(Z,i,Y,m,x){return i.IPAM.Config&&i.IPAM.Config[1]&&(0,_.jsxs)(C.Z,{direction:"vertical",children:[i.IPAM.Config[1].Subnet,i.IPAM.Config[1].Gateway]})}},{title:de.FD.format("listManage"),width:100,search:!1,render:function(Z,i,Y,m,x){return[i.Name!="none"&&i.Name!="bridge"&&i.Name!="host"&&(0,_.jsx)(h.ZP,{type:"link",onClick:function(){o.onSelect(i),H(!1)},children:(0,_.jsx)(q.Z,{})},i.Id)]}}],request:function(){var ne=p()(D()().mark(function Z(i,Y,m){var x;return D()().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return ie.next=2,(0,k.jR)({name:i.Name});case 2:return x=ie.sent,ie.abrupt("return",{data:x.data.list,success:!0,total:x.data.list.length});case 4:case"end":return ie.stop()}},Z)}));return function(Z,i,Y){return ne.apply(this,arguments)}}(),pagination:(0,E.Oh)()})})]})});Ae.Z=t},70146:function(Je,Ae,e){e.d(Ae,{SR:function(){return G},VE:function(){return A},Zy:function(){return k},iD:function(){return se},vG:function(){return ee},yB:function(){return ge}});var ye=e(15009),D=e.n(ye),je=e(99289),p=e.n(je),ae=e(82346);function ge(E){return S.apply(this,arguments)}function S(){return S=p()(D()().mark(function E(_){return D()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,ae.request)("/dpanel/api/app/container-backup/create",{data:_,method:"POST"});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},E)})),S.apply(this,arguments)}function k(E){return q.apply(this,arguments)}function q(){return q=p()(D()().mark(function E(_){return D()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,ae.request)("/dpanel/api/app/container-backup/get-list",{method:"POST",data:_}));case 1:case"end":return o.stop()}},E)})),q.apply(this,arguments)}function A(E){return h.apply(this,arguments)}function h(){return h=p()(D()().mark(function E(_){return D()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,ae.request)("/dpanel/api/app/container-backup/delete",{method:"POST",data:_}));case 1:case"end":return o.stop()}},E)})),h.apply(this,arguments)}function G(E){return C.apply(this,arguments)}function C(){return C=p()(D()().mark(function E(_){return D()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,ae.request)("/dpanel/api/app/container-backup/restore",{method:"POST",data:_}));case 1:case"end":return o.stop()}},E)})),C.apply(this,arguments)}function se(E){return K.apply(this,arguments)}function K(){return K=p()(D()().mark(function E(_){return D()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,ae.request)("/dpanel/api/app/container-backup/get-detail",{method:"POST",data:_}));case 1:case"end":return o.stop()}},E)})),K.apply(this,arguments)}function ee(E){return de.apply(this,arguments)}function de(){return de=p()(D()().mark(function E(_){return D()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,ae.request)("/dpanel/api/app/site/restore",{data:_,method:"POST"});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},E)})),de.apply(this,arguments)}},89240:function(Je,Ae,e){e.d(Ae,{HJ:function(){return K},PD:function(){return de},Rk:function(){return ee},pM:function(){return E},yi:function(){return se},zY:function(){return _}});var ye=e(64599),D=e.n(ye),je=e(5251),p=e(10531),ae=e(43836),ge=e(17179),S=e(74911),k=e(17637),q=e(58353),A=/^([1-9]|[1-5]?[0-9]{2,4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-5])$/m;function h(t){return A.test(t)?parseInt(t,10):0}function G(t){typeof t!="string"&&(t=t.toString());var o=p.Z(t,"-",2),z=ae.Z(o,h);return z.length==1&&z.push(z[0]),z}function C(t,o){typeof t!="string"&&(t=t.toString());var z=null,ce=t.indexOf(":");ce>=0&&(z=t.substring(0,ce),t=t.substring(ce+1)),o=typeof o=="number"?o:h(o);var Ie=G(t),u=Math.min(Ie[0],o),H=Math.max(Ie[1],o);return z?z+":"+u+"-"+H:u+"-"+H}function se(t){if(!t||!t.HostConfig||!t.HostConfig.PortBindings)return[];var o=[],z=t.HostConfig.PortBindings,ce=ge.Z(z),Ie=S.Z(ce,function(u){return p.Z(u,"/")[1]});return k.Z(Ie,function(u,H){var T={},Ce=D()(u),ne;try{for(Ce.s();!(ne=Ce.n()).done;){var Z=ne.value,i=D()(z[Z]),Y;try{for(i.s();!(Y=i.n()).done;){var m=Y.value;T[m.HostIp]=T[m.HostIp]||[],T[m.HostIp].push(Z)}}catch(x){i.e(x)}finally{i.f()}}}catch(x){Ce.e(x)}finally{Ce.f()}k.Z(T,function(x,n){var ie=q.Z(x,function(P){return parseInt(p.Z(P,"/")[0],10)}),Ze=-1,U=-1;k.Z(ie,function(P){var Re=p.Z(P,"/"),y=parseInt(Re[0],10),O=z[P][0];z[P].shift();var c=h(O.HostPort);if(c>0){if(o.length>0&&Ze===c-1&&U===y-1){o[o.length-1].host=C(o[o.length-1].host,c),o[o.length-1].dest=C(o[o.length-1].dest,y),Ze=c,U=y;return}Ze=c,U=y}else Ze=-1,U=-1;var g=O.HostPort.toString();n&&(g="".concat(n,":").concat(g)),o.push({host:g,dest:y.toString(),protocol:H})})})}),o}function K(t){return(0,je.fi)(t,"/")}function ee(t){return t?(0,je.FI)(t):"64M"}function de(t){return t&&t>1e8?t/1e9:0}function E(t){return t?t/1024/1024:0}function _(t){return"".concat(K(t),".pod.dpanel.local")}}}]);
