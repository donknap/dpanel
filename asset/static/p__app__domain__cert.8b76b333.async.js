(self.webpackChunk=self.webpackChunk||[]).push([[1355],{23430:function(T,C,e){"use strict";e.d(C,{Z:function(){return c}});var R=e(87462),u=e(67294),A={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"},D=A,O=e(84089),j=function(M,n){return u.createElement(O.Z,(0,R.Z)({},M,{ref:n,icon:D}))},v=u.forwardRef(j),c=v},89497:function(T,C,e){"use strict";e.r(C),e.d(C,{default:function(){return W}});var R=e(15009),u=e.n(R),A=e(99289),D=e.n(A),O=e(74026),j=e(77865),v=e(66554),c=e(5251),U=e(86548),M=e(23430),n=e(74453),t=e(82346),E=e(50136),a=e(42075),i=e(66309),L=e(67294),y=e(93162),g=e.n(y),I=e(1699),f=e(36146),w=e(55681),_=e(85893);function W(){var B=(0,L.useRef)(),x=(0,L.useRef)(),K=(0,L.useRef)(),b=(0,t.useAccess)();return(0,_.jsx)(n._z,{extra:[(0,_.jsx)(I.u,{access:"canSeeContainerDomainManage",children:(0,_.jsx)(O.Z,{ref:K,onFinish:function(){var o,r;!((o=B.current)===null||o===void 0)&&o.reloadAndRest&&((r=B.current)===null||r===void 0||r.reloadAndRest())}},"cert")},"cert"),(0,_.jsx)(I.u,{access:"canSeeContainerDomainManage",children:(0,_.jsx)(j.Z,{ref:x},"dns")},"dns")],children:(0,_.jsx)(w.Co,{actionRef:B,tableExtraRender:function(){return(0,_.jsx)(E.Z,{mode:"horizontal",selectedKeys:["cert"],items:[{label:(0,_.jsx)(t.Link,{to:"/app/domain/list",replace:!0,children:f.Ob.format("container.domain.list")}),key:"domain"},{label:(0,_.jsx)(t.Link,{to:"/app/domain/cert",replace:!0,children:f.Ob.format("container.domain.cert")}),key:"cert"}]})},rowKey:"mainDomain",columns:[{title:f.FD.format("listDomain"),render:function(o,r,d,s,l){return(0,_.jsx)(a.Z,{wrap:!0,children:r.domain.map(function(h,m){return(0,_.jsx)(i.Z,{color:m==0?"blue":"",children:h},h)})})}},{title:f.FD.format("listStatus"),search:!1,width:100,render:function(o,r,d,s,l){return r.inUse&&(0,_.jsx)(i.Z,{color:"cyan",children:f.FD.format("listInUse")},"use-".concat(d))}},{title:"CA",dataIndex:"CA",search:!1,width:200},{title:f.FD.format("listCreatedAt"),search:!1,width:180,render:function(o,r,d,s,l){return(0,c.NF)(r.createdAt)},sorter:function(o,r){return o.createdAt!=""&&r.createdAt!=""?new Date(o.createdAt).toISOString().localeCompare(new Date(r.createdAt).toISOString()):-1}},{title:f.FD.format("listUpdatedAt"),search:!1,width:180,render:function(o,r,d,s,l){return(0,c.NF)(r.renewAt)}}],request:D()(u()().mark(function p(){var o,r;return u()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,v.dZ)();case 2:return o=s.sent,s.next=5,(0,v.i7)();case 5:return r=s.sent,s.abrupt("return",{data:o.data.list&&o.data.list.map(function(l){var h=!1;return r&&r.data&&r.data.list.map(function(m){m.setting.certName==l.mainDomain&&(h=!0)}),l.inUse=h,l}),success:!0,total:o.data.list.length});case 7:case"end":return s.stop()}},p)})),actions:[{key:"edit",label:f.FD.format("listManageEdit"),icon:(0,_.jsx)(U.Z,{}),showInContext:"manage",showInOperator:!0,action:function(o){return D()(u()().mark(function r(){var d,s,l;return u()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:s=o.finish,l=o.selectedRow,s(!0),(d=K.current)===null||d===void 0||d.edit(l);case 3:case"end":return m.stop()}},r)}))()}},{key:"download",label:f.FD.format("listManageDownload"),icon:(0,_.jsx)(M.Z,{}),showInContext:"manage",showInOperator:!0,action:function(o){return D()(u()().mark(function r(){var d,s,l,h;return u()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return d=o.finish,s=o.selectedRow,d(!0),P.next=4,(0,v.ll)({name:s.mainDomain});case 4:l=P.sent,h=new Blob([l],{type:"application/zip"}),(0,y.saveAs)(h,"cert-"+s.mainDomain+".zip");case 7:case"end":return P.stop()}},r)}))()}},{key:"delete",action:function(o){return D()(u()().mark(function r(){var d,s,l;return u()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return d=o.loading,s=o.finish,l=o.selectedRows,d(),m.abrupt("return",(0,v.KK)({name:l.map(function(P){return P.mainDomain})}).finally(function(){s(!0)}));case 3:case"end":return m.stop()}},r)}))()}}],rowSelection:b.canSeeContainerDomainManage?{defaultSelectedRowKeys:[],alwaysShowAlert:!0}:void 0})})}},93162:function(T,C,e){var R,u,A;(function(D,O){u=[],R=O,A=typeof R=="function"?R.apply(C,u):R,A!==void 0&&(T.exports=A)})(this,function(){"use strict";function D(n,t){return typeof t=="undefined"?t={autoBom:!1}:typeof t!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(n.type)?new Blob(["\uFEFF",n],{type:n.type}):n}function O(n,t,E){var a=new XMLHttpRequest;a.open("GET",n),a.responseType="blob",a.onload=function(){M(a.response,t,E)},a.onerror=function(){console.error("could not download file")},a.send()}function j(n){var t=new XMLHttpRequest;t.open("HEAD",n,!1);try{t.send()}catch(E){}return 200<=t.status&&299>=t.status}function v(n){try{n.dispatchEvent(new MouseEvent("click"))}catch(E){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(t)}}var c=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof e.g=="object"&&e.g.global===e.g?e.g:void 0,U=c.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),M=c.saveAs||(typeof window!="object"||window!==c?function(){}:"download"in HTMLAnchorElement.prototype&&!U?function(n,t,E){var a=c.URL||c.webkitURL,i=document.createElement("a");t=t||n.name||"download",i.download=t,i.rel="noopener",typeof n=="string"?(i.href=n,i.origin===location.origin?v(i):j(i.href)?O(n,t,E):v(i,i.target="_blank")):(i.href=a.createObjectURL(n),setTimeout(function(){a.revokeObjectURL(i.href)},4e4),setTimeout(function(){v(i)},0))}:"msSaveOrOpenBlob"in navigator?function(n,t,E){if(t=t||n.name||"download",typeof n!="string")navigator.msSaveOrOpenBlob(D(n,E),t);else if(j(n))O(n,t,E);else{var a=document.createElement("a");a.href=n,a.target="_blank",setTimeout(function(){v(a)})}}:function(n,t,E,a){if(a=a||open("","_blank"),a&&(a.document.title=a.document.body.innerText="downloading..."),typeof n=="string")return O(n,t,E);var i=n.type==="application/octet-stream",L=/constructor/i.test(c.HTMLElement)||c.safari,y=/CriOS\/[\d]+/.test(navigator.userAgent);if((y||i&&L||U)&&typeof FileReader!="undefined"){var g=new FileReader;g.onloadend=function(){var w=g.result;w=y?w:w.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=w:location=w,a=null},g.readAsDataURL(n)}else{var I=c.URL||c.webkitURL,f=I.createObjectURL(n);a?a.location=f:location.href=f,a=null,setTimeout(function(){I.revokeObjectURL(f)},4e4)}});c.saveAs=M.saveAs=M,T.exports=M})}}]);
