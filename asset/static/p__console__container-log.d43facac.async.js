!(function(){var ne=Object.defineProperty,re=Object.defineProperties;var ie=Object.getOwnPropertyDescriptors;var Q=Object.getOwnPropertySymbols;var se=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable;var q=(A,C,i)=>C in A?ne(A,C,{enumerable:!0,configurable:!0,writable:!0,value:i}):A[C]=i,ee=(A,C)=>{for(var i in C||(C={}))se.call(C,i)&&q(A,i,C[i]);if(Q)for(var i of Q(C))ae.call(C,i)&&q(A,i,C[i]);return A},te=(A,C)=>re(A,ie(C));(self.webpackChunk=self.webpackChunk||[]).push([[3428],{23430:function(A,C,i){"use strict";i.d(C,{Z:function(){return M}});var R=i(87462),c=i(67294),L={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"},u=L,v=i(84089),_=function(n,s){return c.createElement(v.Z,(0,R.Z)({},n,{ref:s,icon:u}))},D=c.forwardRef(_),M=D},5966:function(A,C,i){"use strict";var R=i(97685),c=i(1413),L=i(45987),u=i(21770),v=i(21054),_=i(55241),D=i(98423),M=i(67294),t=i(40284),n=i(85893),s=["fieldProps","proFieldProps"],r=["fieldProps","proFieldProps"],l="text",e=function(E){var m=E.fieldProps,T=E.proFieldProps,j=(0,L.Z)(E,s);return(0,n.jsx)(t.Z,(0,c.Z)({valueType:l,fieldProps:m,filedConfig:{valueType:l},proFieldProps:T},j))},a=function(E){var m=(0,u.Z)(E.open||!1,{value:E.open,onChange:E.onOpenChange}),T=(0,R.Z)(m,2),j=T[0],O=T[1];return(0,n.jsx)(v.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(y){var h,b=y.getFieldValue(E.name||[]);return(0,n.jsx)(_.Z,(0,c.Z)((0,c.Z)({getPopupContainer:function(o){return o&&o.parentNode?o.parentNode:o},onOpenChange:function(o){return O(o)},content:(0,n.jsxs)("div",{style:{padding:"4px 0"},children:[(h=E.statusRender)===null||h===void 0?void 0:h.call(E,b),E.strengthText?(0,n.jsx)("div",{style:{marginTop:10},children:(0,n.jsx)("span",{children:E.strengthText})}):null]}),overlayStyle:{width:240},placement:"rightTop"},E.popoverProps),{},{open:j,children:E.children}))}})},d=function(E){var m=E.fieldProps,T=E.proFieldProps,j=(0,L.Z)(E,r),O=(0,M.useState)(!1),x=(0,R.Z)(O,2),y=x[0],h=x[1];return m!=null&&m.statusRender&&j.name?(0,n.jsx)(a,{name:j.name,statusRender:m==null?void 0:m.statusRender,popoverProps:m==null?void 0:m.popoverProps,strengthText:m==null?void 0:m.strengthText,open:y,onOpenChange:h,children:(0,n.jsx)("div",{children:(0,n.jsx)(t.Z,(0,c.Z)({valueType:"password",fieldProps:(0,c.Z)((0,c.Z)({},(0,D.Z)(m,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(p){var o;m==null||(o=m.onBlur)===null||o===void 0||o.call(m,p),h(!1)},onClick:function(p){var o;m==null||(o=m.onClick)===null||o===void 0||o.call(m,p),h(!0)}}),proFieldProps:T,filedConfig:{valueType:l}},j))})}):(0,n.jsx)(t.Z,(0,c.Z)({valueType:"password",fieldProps:m,proFieldProps:T,filedConfig:{valueType:l}},j))},f=e;f.Password=d,f.displayName="ProFormComponent",C.Z=f},80821:function(A,C,i){"use strict";i.d(C,{Z:function(){return l}});var R=i(97857),c=i.n(R),L=i(5574),u=i.n(L),v=i(24963),_=i(36146),D=i(86738),M=i(83062),t=i(96074),n=i(83622),s=i(67294),r=i(85893);function l(e){var a=(0,s.useState)(!1),d=u()(a,2),f=d[0],P=d[1],E=(0,s.useContext)(v.Z),m=E.message,T=function(){P(!0);var z=e.action();z instanceof Promise?z.then(function(V){if(P(!1),V){typeof e.onSuccess=="function"&&e.onSuccess(V);var Z=_.FD.format("finish");m.success(Z)}}).catch(function(V){P(!1),typeof e.onError=="function"&&e.onError(V)}):P(!1)};if(e.confirmProps){var j,O,x,y,h,b,p,o=e.confirmProps.description;return e.confirmProps.showCommonConfirm&&(o=_.FD.format("confirm.title")),e.confirmProps.showCommonDisabled&&(o=_.FD.format("confirm.disable")),(0,r.jsx)(D.Z,c()(c()({},e.confirmProps),{},{style:{width:500},title:(j=e.confirmProps)!==null&&j!==void 0&&j.title?(O=e.confirmProps)===null||O===void 0?void 0:O.title:_.FD.format("title.tip"),description:o,onConfirm:T,okText:"Yes",cancelText:"No",children:(0,r.jsxs)(M.Z,{title:e.tips,children:[e.showDivider&&(0,r.jsx)(t.Z,{type:"vertical",style:{marginRight:15}}),(0,r.jsx)(n.ZP,c()(c()({},e.buttonProps),{},{ghost:((x=e.buttonProps)===null||x===void 0?void 0:x.ghost)&&((y=e.buttonProps)===null||y===void 0?void 0:y.type)!=="link",style:(h=e.buttonProps)!==null&&h!==void 0&&h.ghost?c()(c()({},e.buttonProps.style),{},{padding:0,width:"auto"}):c()({},(b=e.buttonProps)===null||b===void 0?void 0:b.style),icon:!e.children&&f||(p=e.buttonProps)===null||p===void 0?void 0:p.icon,loading:f,children:e.children}))]})}))}else{var I,g,w,U,k;return(0,r.jsxs)(M.Z,{title:e.tips,children:[e.showDivider&&(0,r.jsx)(t.Z,{type:"vertical",style:{marginRight:15}}),(0,r.jsx)(n.ZP,c()(c()({},e.buttonProps),{},{ghost:((I=e.buttonProps)===null||I===void 0?void 0:I.ghost)&&((g=e.buttonProps)===null||g===void 0?void 0:g.type)!=="link",style:(w=e.buttonProps)!==null&&w!==void 0&&w.ghost?c()(c()({},e.buttonProps.style),{},{padding:0,width:"auto"}):c()({},(U=e.buttonProps)===null||U===void 0?void 0:U.style),icon:!e.children&&f||(k=e.buttonProps)===null||k===void 0?void 0:k.icon,loading:f,onClick:T,children:e.children}))]})}}},81146:function(A,C,i){"use strict";var R=i(97857),c=i.n(R),L=i(15009),u=i.n(L),v=i(99289),_=i.n(v),D=i(67294),M=i(97269),t=i(62370),n=i(5966),s=i(97462),r=i(82346),l=i(71230),e=i(15746),a=i(34041),d=i(83622),f=i(84567),P=i(42075),E=i(80821),m=i(23430),T=i(93162),j=i.n(T),O=i(78267),x=i.n(O),y=i(75458),h=i.n(y),b=i(12323),p=i(4244),o=i.n(p),I=i(24078),g=i(36146),w=i(85893),U,k,N,z={decorations:{matchBackground:"",matchBorder:"#FFFF00",activeMatchBackground:"#FFFF0066",matchOverviewRuler:"",activeMatchColorOverviewRuler:""}},V=(0,D.forwardRef)(function(Z,$){var Y=(0,D.useRef)(),G=(0,r.useModel)("subscriber"),F=new g.Uo("components.containerLog");(0,D.useImperativeHandle)($,function(){return{fit:function(){U.clear(),N.fit()},start:function(){return _()(u()().mark(function W(){return u()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,J({lineTotal:500});case 2:case"end":return K.stop()}},W)}))()},close:function(){G.progress.close(Z.id)}}});function J(B){return X.apply(this,arguments)}function X(){return X=_()(u()().mark(function B(W){return u()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:G.progress.close(Z.id),U.clear(),W.download=!1,Z.request(W);case 4:case"end":return K.stop()}},B)})),X.apply(this,arguments)}return(0,D.useEffect)(function(){return window.addEventListener("resize",function(){N.fit()}),U=new p.Terminal(c()(c()({},b.X),{},{fontSize:12,lineHeight:1.2,allowProposedApi:!0})),N=new O.FitAddon,k=new y.SearchAddon({}),U.loadAddon(N),U.loadAddon(k),U.open(document.getElementById("terminal-container-log")),N.fit(),G.addDataHandler(Z.id,function(B){U.write(B.data)}),function(){U.clear(),U.reset(),G.progress.close(Z.id)}},[]),(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(M.A,{submitter:!1,layout:"horizontal",onFinish:function(W){var S;J({id:Z.id,lineTotal:parseInt(W.lineTotal),showTime:(S=W.showTime)!==null&&S!==void 0?S:!1})},formRef:Y,children:(0,w.jsxs)(l.Z,{gutter:[10,0],children:[(0,w.jsx)(e.Z,{span:8,children:(0,w.jsx)(t.Z,{name:"lineTotal",initialValue:"500",label:F.format("formLineTotal"),children:(0,w.jsxs)(a.Z,{defaultValue:"500",onChange:function(W){var S;(S=Y.current)===null||S===void 0||S.submit()},children:[(0,w.jsx)(a.Z.Option,{value:"100",children:F.format("formLineTotalOption",{number:"100"})}),(0,w.jsx)(a.Z.Option,{value:"200",children:F.format("formLineTotalOption",{number:"200"})}),(0,w.jsx)(a.Z.Option,{value:"500",children:F.format("formLineTotalOption",{number:"500"})}),(0,w.jsx)(a.Z.Option,{value:"1000",children:F.format("formLineTotalOption",{number:"1000"})}),(0,w.jsx)(a.Z.Option,{value:"-1",children:F.format("formLineTotalOptionAll")})]})})}),(0,w.jsx)(e.Z,{children:(0,w.jsx)(d.ZP,{onClick:function(){U.clear()},children:F.format("clearButton")})}),(0,w.jsx)(e.Z,{children:(0,w.jsx)(t.Z,{name:"showTime",valuePropName:"checked",children:(0,w.jsx)(f.Z,{onChange:function(W){var S;(S=Y.current)===null||S===void 0||S.submit()},children:F.format("formShowTime")})})}),(0,w.jsx)(e.Z,{children:(0,w.jsx)(n.Z,{label:F.format("formKeywork"),name:"keywork",fieldProps:{onPressEnter:function(){var W;k.findNext((W=Y.current)===null||W===void 0?void 0:W.getFieldValue("keywork"),z)},onChange:function(W){k.findNext(W.target.value,z)}},placeholder:F.format("formKeyworkEmpty")})}),(0,w.jsx)(e.Z,{children:(0,w.jsx)(s.Z,{name:["keywork"],children:function(W){var S=W.keywork;return(0,w.jsxs)(P.Z,{size:10,children:[(0,w.jsx)(d.ZP,{onClick:function(){k.findNext(S,z)},children:F.format("formKeyworkNext")},"next"),(0,w.jsx)(d.ZP,{onClick:function(){k.findPrevious(S,z)},children:F.format("formKeyworkPrev")},"prev")]})}})}),(0,w.jsx)(e.Z,{children:(0,w.jsx)(E.Z,{buttonProps:{icon:(0,w.jsx)(m.Z,{})},action:_()(u()().mark(function B(){var W,S,K;return u()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(!Z.download){H.next=5;break}return H.next=3,Z.download({lineTotal:parseInt((W=Y.current)===null||W===void 0?void 0:W.getFieldValue("lineTotal")),showTime:(S=Y.current)===null||S===void 0?void 0:S.getFieldValue("showTime")});case 3:K=H.sent,(0,T.saveAs)(K.data,K.name);case 5:case"end":return H.stop()}},B)})),children:F.format("downloadButton")})})]})}),(0,w.jsx)("div",{style:{marginTop:"20px",height:Z.showInDrawer?"75vh":"85vh"},id:"terminal-container-log"})]})});C.Z=V},12323:function(A,C,i){"use strict";i.d(C,{X:function(){return R},n:function(){return c}});var R={convertEol:!0,fontFamily:'Menlo, Monaco, "Courier New", monospace',fontWeight:400,fontSize:16,lineHeight:1,cursorStyle:"block",cursorInactiveStyle:"outline",cursorBlink:!0,letterSpacing:0,theme:{foreground:"#bfbfbf",cursor:"gray",selectionForeground:"#ffffff"}},c=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"]},24963:function(A,C,i){"use strict";var R=i(67294),c=(0,R.createContext)({});C.Z=c},15141:function(A,C,i){"use strict";i.r(C),i.d(C,{default:function(){return l}});var R=i(15009),c=i.n(R),L=i(99289),u=i.n(L),v=i(81146),_=i(13822),D=i(62597),M=i(5251),t=i(38345),n=i(82346),s=i(67294),r=i(85893);function l(){var e=(0,n.useParams)(),a=(0,s.useRef)();return(0,s.useEffect)(function(){var d;return setTimeout(function(){if(e.id){var f,P;(f=a.current)===null||f===void 0||f.start(),(P=a.current)===null||P===void 0||P.fit()}},1e3),window.document.title="".concat((0,M.fi)((d=e.id)!==null&&d!==void 0?d:"","/")," - log"),function(){var f;(f=a.current)===null||f===void 0||f.close()}},[]),e.id&&(0,r.jsx)(t.Z,{children:(0,r.jsx)(v.Z,{id:"container:log:".concat(e.id),ref:a,request:function(){var d=u()(c()().mark(function f(P){return c()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,D.Tb)({id:e.id,lineTotal:P.lineTotal,download:P.download,showTime:P.showTime});case 2:case"end":return m.stop()}},f)}));return function(f){return d.apply(this,arguments)}}(),download:function(){var d=u()(c()().mark(function f(P){var E,m,T;return c()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,(0,D.XH)({id:e.id,lineTotal:P.lineTotal,showTime:P.showTime});case 2:return m=O.sent,O.next=5,(0,_.jV)({md5:(E=e.id)!==null&&E!==void 0?E:""});case 5:return T=O.sent,O.abrupt("return",{data:new Blob([m],{type:"text/plain"}),name:T.data.info.Name.replaceAll("/","")+"_"+new Date().toLocaleDateString()+".log"});case 7:case"end":return O.stop()}},f)}));return function(f){return d.apply(this,arguments)}}()})})}},13822:function(A,C,i){"use strict";i.d(C,{IE:function(){return n},IW:function(){return M},KK:function(){return d},LJ:function(){return P},RF:function(){return j},Re:function(){return m},aF:function(){return x},eE:function(){return e},jV:function(){return r}});var R=i(5574),c=i.n(R),L=i(15009),u=i.n(L),v=i(99289),_=i.n(v),D=i(82346);function M(h){return t.apply(this,arguments)}function t(){return t=_()(u()().mark(function h(b){return u()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,D.request)("/dpanel/api/app/container/status",{method:"POST",data:b}));case 1:case"end":return o.stop()}},h)})),t.apply(this,arguments)}function n(h){return s.apply(this,arguments)}function s(){return s=_()(u()().mark(function h(b){return u()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,D.request)("/dpanel/api/app/container/get-list",{data:b,method:"POST"}));case 1:case"end":return o.stop()}},h)})),s.apply(this,arguments)}function r(h){return l.apply(this,arguments)}function l(){return l=_()(u()().mark(function h(b){return u()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,D.request)("/dpanel/api/app/container/get-detail",{data:b,method:"POST"}));case 1:case"end":return o.stop()}},h)})),l.apply(this,arguments)}function e(h){return a.apply(this,arguments)}function a(){return a=_()(u()().mark(function h(b){return u()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,D.request)("/dpanel/api/app/container/update",{data:b,method:"POST"}));case 1:case"end":return o.stop()}},h)})),a.apply(this,arguments)}function d(){return f.apply(this,arguments)}function f(){return f=_()(u()().mark(function h(){return u()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",(0,D.request)("/dpanel/api/app/container/prune",{method:"POST"}));case 1:case"end":return p.stop()}},h)})),f.apply(this,arguments)}function P(h){return E.apply(this,arguments)}function E(){return E=_()(u()().mark(function h(b){return u()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!b.enableExportToPath){o.next=2;break}return o.abrupt("return",(0,D.request)("/dpanel/api/app/container/export",{method:"GET",params:b}));case 2:return o.abrupt("return",new Promise(function(I,g){var w=localStorage.getItem("token"),U=new URLSearchParams;U.append("token",w||""),Object.entries(b).forEach(function(z){var V=c()(z,2),Z=V[0],$=V[1];U.append(Z,String($))});var k="/dpanel/api/app/container/export?".concat(U.toString()),N=document.createElement("iframe");N.style.display="none",N.src=k,document.body.appendChild(N),setTimeout(function(){N.parentElement&&document.body.removeChild(N)},5e3),I({code:200,data:"success",error:""})}));case 3:case"end":return o.stop()}},h)})),E.apply(this,arguments)}function m(h){return T.apply(this,arguments)}function T(){return T=_()(u()().mark(function h(b){return u()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,D.request)("/dpanel/api/app/container/commit",{method:"POST",data:b}));case 1:case"end":return o.stop()}},h)})),T.apply(this,arguments)}function j(h){return O.apply(this,arguments)}function O(){return O=_()(u()().mark(function h(b){return u()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,D.request)("/dpanel/api/app/container/upgrade",{method:"POST",data:b}));case 1:case"end":return o.stop()}},h)})),O.apply(this,arguments)}function x(h){return y.apply(this,arguments)}function y(){return y=_()(u()().mark(function h(b){return u()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,D.request)("/dpanel/api/app/container/copy",{method:"POST",data:b}));case 1:case"end":return o.stop()}},h)})),y.apply(this,arguments)}},62597:function(A,C,i){"use strict";i.d(C,{$G:function(){return t},Ct:function(){return m},Tb:function(){return e},XH:function(){return d},cl:function(){return r},fp:function(){return s},fu:function(){return D},iE:function(){return P},nL:function(){return M},xU:function(){return h},xb:function(){return j},ze:function(){return x}});var R=i(15009),c=i.n(R),L=i(99289),u=i.n(L),v=i(82346),_="com.dpanel.container.description",D="com.dpanel.container.title",M={Nanosecond:1,Microsecond:1e3,Millisecond:1e3*1e3,Second:1e3*1e3*1e3,Minute:60*1e3*1e3*1e3,Hour:3600*1e3*1e3*1e3};function t(p){return n.apply(this,arguments)}function n(){return n=u()(c()().mark(function p(o){return c()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",(0,v.request)("/dpanel/api/app/site/create-by-image",{method:"POST",data:o}));case 1:case"end":return g.stop()}},p)})),n.apply(this,arguments)}var s={EnvValueRuleRequired:1,EnvValueRuleDisabled:2,EnvValueRuleInEnvFile:4,EnvValueTypeNumber:1024,EnvValueTypeText:2048,EnvValueTypeSelect:4096,EnvValueTypeSelectMultiple:8192,EnvValueTypeOnePanel:16384};function r(p){return l.apply(this,arguments)}function l(){return l=u()(c()().mark(function p(o){return c()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",(0,v.request)("/dpanel/api/app/site/get-list",{method:"POST",data:o}));case 1:case"end":return g.stop()}},p)})),l.apply(this,arguments)}function e(p){return a.apply(this,arguments)}function a(){return a=u()(c()().mark(function p(o){return c()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return o.download=!1,g.next=3,(0,v.request)("/dpanel/api/app/log/run",{method:"POST",data:o});case 3:return g.abrupt("return",g.sent);case 4:case"end":return g.stop()}},p)})),a.apply(this,arguments)}function d(p){return f.apply(this,arguments)}function f(){return f=u()(c()().mark(function p(o){return c()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return o.download=!0,g.next=3,(0,v.request)("/dpanel/api/app/log/run",{method:"POST",data:o,responseType:"blob"});case 3:return g.abrupt("return",g.sent);case 4:case"end":return g.stop()}},p)})),f.apply(this,arguments)}function P(p){return E.apply(this,arguments)}function E(){return E=u()(c()().mark(function p(o){return c()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return o.id=String(o.id),g.next=3,(0,v.request)("/dpanel/api/app/site/get-detail",{data:o,method:"POST"});case 3:return g.abrupt("return",g.sent);case 4:case"end":return g.stop()}},p)})),E.apply(this,arguments)}function m(p){return T.apply(this,arguments)}function T(){return T=u()(c()().mark(function p(o){return c()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",(0,v.request)("/dpanel/api/app/container/delete",{method:"POST",data:o}));case 1:case"end":return g.stop()}},p)})),T.apply(this,arguments)}function j(p){return O.apply(this,arguments)}function O(){return O=u()(c()().mark(function p(o){return c()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",(0,v.request)("/dpanel/api/app/site/delete",{method:"POST",data:o}));case 1:case"end":return g.stop()}},p)})),O.apply(this,arguments)}function x(p){return y.apply(this,arguments)}function y(){return y=u()(c()().mark(function p(o){return c()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.abrupt("return",(0,v.request)("/dpanel/api/app/container/ignore",{method:"POST",data:o}));case 1:case"end":return g.stop()}},p)})),y.apply(this,arguments)}function h(){return b.apply(this,arguments)}function b(){return b=u()(c()().mark(function p(){return c()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.abrupt("return",(0,v.request)("/dpanel/api/app/site/prune",{method:"POST"}));case 1:case"end":return I.stop()}},p)})),b.apply(this,arguments)}},75458:function(A){(function(C,i){A.exports=i()})(self,()=>(()=>{"use strict";var C={345:(L,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.runAndSubscribe=u.forwardEvent=u.EventEmitter=void 0,u.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=v=>(this._listeners.push(v),{dispose:()=>{if(!this._disposed){for(let _=0;_<this._listeners.length;_++)if(this._listeners[_]===v)return void this._listeners.splice(_,1)}}})),this._event}fire(v,_){const D=[];for(let M=0;M<this._listeners.length;M++)D.push(this._listeners[M]);for(let M=0;M<D.length;M++)D[M].call(void 0,v,_)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},u.forwardEvent=function(v,_){return v(D=>_.fire(D))},u.runAndSubscribe=function(v,_){return _(void 0),v(D=>_(D))}},859:(L,u)=>{function v(_){for(const D of _)D.dispose();_.length=0}Object.defineProperty(u,"__esModule",{value:!0}),u.getDisposeArrayDisposable=u.disposeArray=u.toDisposable=u.MutableDisposable=u.Disposable=void 0,u.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const _ of this._disposables)_.dispose();this._disposables.length=0}register(_){return this._disposables.push(_),_}unregister(_){const D=this._disposables.indexOf(_);D!==-1&&this._disposables.splice(D,1)}},u.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(_){var D;this._isDisposed||_===this._value||((D=this._value)==null||D.dispose(),this._value=_)}clear(){this.value=void 0}dispose(){var _;this._isDisposed=!0,(_=this._value)==null||_.dispose(),this._value=void 0}},u.toDisposable=function(_){return{dispose:_}},u.disposeArray=v,u.getDisposeArrayDisposable=function(_){return{dispose:()=>v(_)}}}},i={};function R(L){var u=i[L];if(u!==void 0)return u.exports;var v=i[L]={exports:{}};return C[L](v,v.exports,R),v.exports}var c={};return(()=>{var L=c;Object.defineProperty(L,"__esModule",{value:!0}),L.SearchAddon=void 0;const u=R(345),v=R(859),_=" ~!@#$%^&*()+`-=[]{}|\\;:\"',./<>?";class D extends v.Disposable{constructor(t){var n;super(),this._highlightedLines=new Set,this._highlightDecorations=[],this._selectedDecoration=this.register(new v.MutableDisposable),this._linesCacheTimeoutId=0,this._linesCacheDisposables=new v.MutableDisposable,this._onDidChangeResults=this.register(new u.EventEmitter),this.onDidChangeResults=this._onDidChangeResults.event,this._highlightLimit=(n=t==null?void 0:t.highlightLimit)!=null?n:1e3}activate(t){this._terminal=t,this.register(this._terminal.onWriteParsed(()=>this._updateMatches())),this.register(this._terminal.onResize(()=>this._updateMatches())),this.register((0,v.toDisposable)(()=>this.clearDecorations()))}_updateMatches(){var t;this._highlightTimeout&&window.clearTimeout(this._highlightTimeout),this._cachedSearchTerm&&((t=this._lastSearchOptions)!=null&&t.decorations)&&(this._highlightTimeout=setTimeout(()=>{const n=this._cachedSearchTerm;this._cachedSearchTerm=void 0,this.findPrevious(n,te(ee({},this._lastSearchOptions),{incremental:!0,noScroll:!0}))},200))}clearDecorations(t){this._selectedDecoration.clear(),(0,v.disposeArray)(this._highlightDecorations),this._highlightDecorations=[],this._highlightedLines.clear(),t||(this._cachedSearchTerm=void 0)}clearActiveDecoration(){this._selectedDecoration.clear()}findNext(t,n){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");const s=!this._lastSearchOptions||this._didOptionsChange(this._lastSearchOptions,n);this._lastSearchOptions=n,n!=null&&n.decorations&&(this._cachedSearchTerm===void 0||t!==this._cachedSearchTerm||s)&&this._highlightAllMatches(t,n);const r=this._findNextAndSelect(t,n);return this._fireResults(n),this._cachedSearchTerm=t,r}_highlightAllMatches(t,n){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");if(!t||t.length===0)return void this.clearDecorations();n=n||{},this.clearDecorations(!0);const s=[];let r,l=this._find(t,0,0,n);for(;l&&((r==null?void 0:r.row)!==l.row||(r==null?void 0:r.col)!==l.col)&&!(s.length>=this._highlightLimit);)r=l,s.push(r),l=this._find(t,r.col+r.term.length>=this._terminal.cols?r.row+1:r.row,r.col+r.term.length>=this._terminal.cols?0:r.col+1,n);for(const e of s){const a=this._createResultDecoration(e,n.decorations);a&&(this._highlightedLines.add(a.marker.line),this._highlightDecorations.push({decoration:a,match:e,dispose(){a.dispose()}}))}}_find(t,n,s,r){var a;if(!this._terminal||!t||t.length===0)return(a=this._terminal)==null||a.clearSelection(),void this.clearDecorations();if(s>this._terminal.cols)throw new Error(`Invalid col: ${s} to search in terminal of ${this._terminal.cols} cols`);let l;this._initLinesCache();const e={startRow:n,startCol:s};if(l=this._findInLine(t,e,r),!l)for(let d=n+1;d<this._terminal.buffer.active.baseY+this._terminal.rows&&(e.startRow=d,e.startCol=0,l=this._findInLine(t,e,r),!l);d++);return l}_findNextAndSelect(t,n){var d;if(!this._terminal||!t||t.length===0)return(d=this._terminal)==null||d.clearSelection(),this.clearDecorations(),!1;const s=this._terminal.getSelectionPosition();this._terminal.clearSelection();let r=0,l=0;s&&(this._cachedSearchTerm===t?(r=s.end.x,l=s.end.y):(r=s.start.x,l=s.start.y)),this._initLinesCache();const e={startRow:l,startCol:r};let a=this._findInLine(t,e,n);if(!a)for(let f=l+1;f<this._terminal.buffer.active.baseY+this._terminal.rows&&(e.startRow=f,e.startCol=0,a=this._findInLine(t,e,n),!a);f++);if(!a&&l!==0)for(let f=0;f<l&&(e.startRow=f,e.startCol=0,a=this._findInLine(t,e,n),!a);f++);return!a&&s&&(e.startRow=s.start.y,e.startCol=0,a=this._findInLine(t,e,n)),this._selectResult(a,n==null?void 0:n.decorations,n==null?void 0:n.noScroll)}findPrevious(t,n){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");const s=!this._lastSearchOptions||this._didOptionsChange(this._lastSearchOptions,n);this._lastSearchOptions=n,n!=null&&n.decorations&&(this._cachedSearchTerm===void 0||t!==this._cachedSearchTerm||s)&&this._highlightAllMatches(t,n);const r=this._findPreviousAndSelect(t,n);return this._fireResults(n),this._cachedSearchTerm=t,r}_didOptionsChange(t,n){return!!n&&(t.caseSensitive!==n.caseSensitive||t.regex!==n.regex||t.wholeWord!==n.wholeWord)}_fireResults(t){if(t!=null&&t.decorations){let n=-1;if(this._selectedDecoration.value){const s=this._selectedDecoration.value.match;for(let r=0;r<this._highlightDecorations.length;r++){const l=this._highlightDecorations[r].match;if(l.row===s.row&&l.col===s.col&&l.size===s.size){n=r;break}}}this._onDidChangeResults.fire({resultIndex:n,resultCount:this._highlightDecorations.length})}}_findPreviousAndSelect(t,n){var f;if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");if(!this._terminal||!t||t.length===0)return(f=this._terminal)==null||f.clearSelection(),this.clearDecorations(),!1;const s=this._terminal.getSelectionPosition();this._terminal.clearSelection();let r=this._terminal.buffer.active.baseY+this._terminal.rows-1,l=this._terminal.cols;const e=!0;this._initLinesCache();const a={startRow:r,startCol:l};let d;if(s&&(a.startRow=r=s.start.y,a.startCol=l=s.start.x,this._cachedSearchTerm!==t&&(d=this._findInLine(t,a,n,!1),d||(a.startRow=r=s.end.y,a.startCol=l=s.end.x))),d||(d=this._findInLine(t,a,n,e)),!d){a.startCol=Math.max(a.startCol,this._terminal.cols);for(let P=r-1;P>=0&&(a.startRow=P,d=this._findInLine(t,a,n,e),!d);P--);}if(!d&&r!==this._terminal.buffer.active.baseY+this._terminal.rows-1)for(let P=this._terminal.buffer.active.baseY+this._terminal.rows-1;P>=r&&(a.startRow=P,d=this._findInLine(t,a,n,e),!d);P--);return this._selectResult(d,n==null?void 0:n.decorations,n==null?void 0:n.noScroll)}_initLinesCache(){const t=this._terminal;this._linesCache||(this._linesCache=new Array(t.buffer.active.length),this._linesCacheDisposables.value=(0,v.getDisposeArrayDisposable)([t.onLineFeed(()=>this._destroyLinesCache()),t.onCursorMove(()=>this._destroyLinesCache()),t.onResize(()=>this._destroyLinesCache())])),window.clearTimeout(this._linesCacheTimeoutId),this._linesCacheTimeoutId=window.setTimeout(()=>this._destroyLinesCache(),15e3)}_destroyLinesCache(){this._linesCache=void 0,this._linesCacheDisposables.clear(),this._linesCacheTimeoutId&&(window.clearTimeout(this._linesCacheTimeoutId),this._linesCacheTimeoutId=0)}_isWholeWord(t,n,s){return(t===0||_.includes(n[t-1]))&&(t+s.length===n.length||_.includes(n[t+s.length]))}_findInLine(t,n,s={},r=!1){var x;const l=this._terminal,e=n.startRow,a=n.startCol,d=l.buffer.active.getLine(e);if(d!=null&&d.isWrapped)return r?void(n.startCol+=l.cols):(n.startRow--,n.startCol+=l.cols,this._findInLine(t,n,s));let f=(x=this._linesCache)==null?void 0:x[e];f||(f=this._translateBufferLineToStringWithWrap(e,!0),this._linesCache&&(this._linesCache[e]=f));const[P,E]=f,m=this._bufferColsToStringOffset(e,a),T=s.caseSensitive?t:t.toLowerCase(),j=s.caseSensitive?P:P.toLowerCase();let O=-1;if(s.regex){const y=RegExp(T,"g");let h;if(r)for(;h=y.exec(j.slice(0,m));)O=y.lastIndex-h[0].length,t=h[0],y.lastIndex-=t.length-1;else h=y.exec(j.slice(m)),h&&h[0].length>0&&(O=m+(y.lastIndex-h[0].length),t=h[0])}else r?m-T.length>=0&&(O=j.lastIndexOf(T,m-T.length)):O=j.indexOf(T,m);if(O>=0){if(s.wholeWord&&!this._isWholeWord(O,j,t))return;let y=0;for(;y<E.length-1&&O>=E[y+1];)y++;let h=y;for(;h<E.length-1&&O+t.length>=E[h+1];)h++;const b=O-E[y],p=O+t.length-E[h],o=this._stringLengthToBufferSize(e+y,b);return{term:t,col:o,row:e+y,size:this._stringLengthToBufferSize(e+h,p)-o+l.cols*(h-y)}}}_stringLengthToBufferSize(t,n){const s=this._terminal.buffer.active.getLine(t);if(!s)return 0;for(let r=0;r<n;r++){const l=s.getCell(r);if(!l)break;const e=l.getChars();e.length>1&&(n-=e.length-1);const a=s.getCell(r+1);a&&a.getWidth()===0&&n++}return n}_bufferColsToStringOffset(t,n){const s=this._terminal;let r=t,l=0,e=s.buffer.active.getLine(r);for(;n>0&&e;){for(let a=0;a<n&&a<s.cols;a++){const d=e.getCell(a);if(!d)break;d.getWidth()&&(l+=d.getCode()===0?1:d.getChars().length)}if(r++,e=s.buffer.active.getLine(r),e&&!e.isWrapped)break;n-=s.cols}return l}_translateBufferLineToStringWithWrap(t,n){var a;const s=this._terminal,r=[],l=[0];let e=s.buffer.active.getLine(t);for(;e;){const d=s.buffer.active.getLine(t+1),f=!!d&&d.isWrapped;let P=e.translateToString(!f&&n);if(f&&d){const E=e.getCell(e.length-1);E&&E.getCode()===0&&E.getWidth()===1&&((a=d.getCell(0))==null?void 0:a.getWidth())===2&&(P=P.slice(0,-1))}if(r.push(P),!f)break;l.push(l[l.length-1]+P.length),t++,e=d}return[r.join(""),l]}_selectResult(t,n,s){const r=this._terminal;if(this._selectedDecoration.clear(),!t)return r.clearSelection(),!1;if(r.select(t.col,t.row,t.size),n){const l=r.registerMarker(-r.buffer.active.baseY-r.buffer.active.cursorY+t.row);if(l){const e=r.registerDecoration({marker:l,x:t.col,width:t.size,backgroundColor:n.activeMatchBackground,layer:"top",overviewRulerOptions:{color:n.activeMatchColorOverviewRuler}});if(e){const a=[];a.push(l),a.push(e.onRender(d=>this._applyStyles(d,n.activeMatchBorder,!0))),a.push(e.onDispose(()=>(0,v.disposeArray)(a))),this._selectedDecoration.value={decoration:e,match:t,dispose(){e.dispose()}}}}}if(!s&&(t.row>=r.buffer.active.viewportY+r.rows||t.row<r.buffer.active.viewportY)){let l=t.row-r.buffer.active.viewportY;l-=Math.floor(r.rows/2),r.scrollLines(l)}return!0}_applyStyles(t,n,s){t.classList.contains("xterm-find-result-decoration")||(t.classList.add("xterm-find-result-decoration"),n&&(t.style.outline=`1px solid ${n}`)),s&&t.classList.add("xterm-find-active-result-decoration")}_createResultDecoration(t,n){const s=this._terminal,r=s.registerMarker(-s.buffer.active.baseY-s.buffer.active.cursorY+t.row);if(!r)return;const l=s.registerDecoration({marker:r,x:t.col,width:t.size,backgroundColor:n.matchBackground,overviewRulerOptions:this._highlightedLines.has(r.line)?void 0:{color:n.matchOverviewRuler,position:"center"}});if(l){const e=[];e.push(r),e.push(l.onRender(a=>this._applyStyles(a,n.matchBorder,!1))),e.push(l.onDispose(()=>(0,v.disposeArray)(e)))}return l}}L.SearchAddon=D})(),c})())},93162:function(A,C,i){var R,c,L;(function(u,v){c=[],R=v,L=typeof R=="function"?R.apply(C,c):R,L!==void 0&&(A.exports=L)})(this,function(){"use strict";function u(s,r){return typeof r=="undefined"?r={autoBom:!1}:typeof r!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),r={autoBom:!r}),r.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}function v(s,r,l){var e=new XMLHttpRequest;e.open("GET",s),e.responseType="blob",e.onload=function(){n(e.response,r,l)},e.onerror=function(){console.error("could not download file")},e.send()}function _(s){var r=new XMLHttpRequest;r.open("HEAD",s,!1);try{r.send()}catch(l){}return 200<=r.status&&299>=r.status}function D(s){try{s.dispatchEvent(new MouseEvent("click"))}catch(l){var r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),s.dispatchEvent(r)}}var M=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof i.g=="object"&&i.g.global===i.g?i.g:void 0,t=M.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),n=M.saveAs||(typeof window!="object"||window!==M?function(){}:"download"in HTMLAnchorElement.prototype&&!t?function(s,r,l){var e=M.URL||M.webkitURL,a=document.createElement("a");r=r||s.name||"download",a.download=r,a.rel="noopener",typeof s=="string"?(a.href=s,a.origin===location.origin?D(a):_(a.href)?v(s,r,l):D(a,a.target="_blank")):(a.href=e.createObjectURL(s),setTimeout(function(){e.revokeObjectURL(a.href)},4e4),setTimeout(function(){D(a)},0))}:"msSaveOrOpenBlob"in navigator?function(s,r,l){if(r=r||s.name||"download",typeof s!="string")navigator.msSaveOrOpenBlob(u(s,l),r);else if(_(s))v(s,r,l);else{var e=document.createElement("a");e.href=s,e.target="_blank",setTimeout(function(){D(e)})}}:function(s,r,l,e){if(e=e||open("","_blank"),e&&(e.document.title=e.document.body.innerText="downloading..."),typeof s=="string")return v(s,r,l);var a=s.type==="application/octet-stream",d=/constructor/i.test(M.HTMLElement)||M.safari,f=/CriOS\/[\d]+/.test(navigator.userAgent);if((f||a&&d||t)&&typeof FileReader!="undefined"){var P=new FileReader;P.onloadend=function(){var T=P.result;T=f?T:T.replace(/^data:[^;]*;/,"data:attachment/file;"),e?e.location.href=T:location=T,e=null},P.readAsDataURL(s)}else{var E=M.URL||M.webkitURL,m=E.createObjectURL(s);e?e.location=m:location.href=m,e=null,setTimeout(function(){E.revokeObjectURL(m)},4e4)}});M.saveAs=n.saveAs=n,A.exports=n})}}]);
}());