"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4037],{12119:function(ne,b,e){e.d(b,{Z:function(){return O}});var a=e(87462),p=e(67294),M={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M608 112c-167.9 0-304 136.1-304 304 0 70.3 23.9 135 63.9 186.5l-41.1 41.1-62.3-62.3a8.15 8.15 0 00-11.4 0l-39.8 39.8a8.15 8.15 0 000 11.4l62.3 62.3-44.9 44.9-62.3-62.3a8.15 8.15 0 00-11.4 0l-39.8 39.8a8.15 8.15 0 000 11.4l62.3 62.3-65.3 65.3a8.03 8.03 0 000 11.3l42.3 42.3c3.1 3.1 8.2 3.1 11.3 0l253.6-253.6A304.06 304.06 0 00608 720c167.9 0 304-136.1 304-304S775.9 112 608 112zm161.2 465.2C726.2 620.3 668.9 644 608 644c-60.9 0-118.2-23.7-161.2-66.8-43.1-43-66.8-100.3-66.8-161.2 0-60.9 23.7-118.2 66.8-161.2 43-43.1 100.3-66.8 161.2-66.8 60.9 0 118.2 23.7 161.2 66.8 43.1 43 66.8 100.3 66.8 161.2 0 60.9-23.7 118.2-66.8 161.2z"}}]},name:"key",theme:"outlined"},C=M,$=e(84089),A=function(N,P){return p.createElement($.Z,(0,a.Z)({},N,{ref:P,icon:C}))},j=p.forwardRef(A),O=j},63434:function(ne,b,e){var a=e(1413),p=e(45987),M=e(22270),C=e(84567),$=e(67294),A=e(90789),j=e(40284),O=e(85893),D=["options","fieldProps","proFieldProps","valueEnum"],N=$.forwardRef(function(f,S){var d=f.options,x=f.fieldProps,V=f.proFieldProps,X=f.valueEnum,k=(0,p.Z)(f,D);return(0,O.jsx)(j.Z,(0,a.Z)({ref:S,valueType:"checkbox",valueEnum:(0,M.h)(X,void 0),fieldProps:(0,a.Z)({options:d},x),lightProps:(0,a.Z)({labelFormatter:function(){return(0,O.jsx)(j.Z,(0,a.Z)({ref:S,valueType:"checkbox",mode:"read",valueEnum:(0,M.h)(X,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,a.Z)({options:d},x),proFieldProps:V},k))}},k.lightProps),proFieldProps:V},k))}),P=$.forwardRef(function(f,S){var d=f.fieldProps,x=f.children;return(0,O.jsx)(C.Z,(0,a.Z)((0,a.Z)({ref:S},d),{},{children:x}))}),G=(0,A.G)(P,{valuePropName:"checked"}),R=G;R.Group=N,b.Z=R},75293:function(ne,b,e){e.d(b,{Z:function(){return M}});var a=e(25593),p=e(85893);function M(C){return(0,p.jsx)(a.Z.Text,{copyable:!0,style:{padding:10,display:C.block?"block":"",background:"#24292f",color:"#ffffff"},children:C.content})}},66139:function(ne,b,e){e.r(b),e.d(b,{default:function(){return de}});var a=e(15009),p=e.n(a),M=e(99289),C=e.n(M),$=e(5574),A=e.n($),j=e(68602),O=e(89075),D=e(68262),N=e(82346),P=e(9361),G=e(40056),R=e(86250),f=e(25593),S=e(42075),d=e(67294),x=e(75293),V=e(36146),X=e(29177),k=e(88360),te=e(94149),ae=e(12119),Q=e(5966),se=e(97462),le=e(63434),ie=e(92398),me=e(55241),o=e(85893);function ce(w){var Y,g=new V.Uo("user");return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ie.Z,{centered:!0,activeKey:w.loginType,items:[{icon:(0,o.jsx)(X.Z,{}),key:"login",label:g.format("title")},{icon:(0,o.jsx)(k.Z,{}),key:"register",label:g.format("registerTitle")}].filter(function(q){return q.key==w.loginType})}),(0,o.jsx)(Q.Z,{name:"username",fieldProps:{size:"large",prefix:(0,o.jsx)(X.Z,{className:"prefixIcon"})},placeholder:g.format("formUsernameEmpty"),rules:[{required:!0,message:g.format("formUsernameEmpty")}]},"username"),(0,o.jsx)(Q.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,o.jsx)(te.Z,{className:"prefixIcon"})},placeholder:g.format("formPasswordEmpty"),rules:[{required:!0,message:g.format("formPasswordEmpty")}]},"password"),w.showTwoFa&&(0,o.jsx)(Q.Z,{name:"code",placeholder:g.format("formTwofaEmpty"),rules:[{required:!0}],fieldProps:{maxLength:6,size:"large",prefix:(0,o.jsx)(ae.Z,{className:"prefixIcon"})}}),w.loginType=="register"&&(0,o.jsx)(se.Z,{name:["password"],children:function(re){var ue=re.password;return(0,o.jsx)(Q.Z.Password,{fieldProps:{size:"large",prefix:(0,o.jsx)(te.Z,{className:"prefixIcon"})},placeholder:g.format("formConfirmPasswordEmpty"),name:"confirmPassword",dependencies:["password"],rules:[{required:!0,message:g.format("formConfirmPasswordEmpty")},function(_){var L=_.getFieldValue;return{validator:function(t,n){return!n||L("password")===n?Promise.resolve():Promise.reject(new Error(g.format("formMessagePasswordNotMatch")))}}}]},"confirmPassword")}}),w.showAutoLogin&&(0,o.jsxs)("div",{style:{marginBlockEnd:24},children:[(0,o.jsx)(le.Z,{noStyle:!0,name:"autoLogin",initialValue:!0,children:g.format("formAutoLogin")}),(0,o.jsx)(me.Z,{content:(0,o.jsxs)(S.Z,{direction:"vertical",size:[0,30],children:[(0,o.jsxs)("span",{children:[g.format("formUserResetTip"),", ",(0,o.jsx)("a",{href:"https://dpanel.cc/install/ctrl",target:"_blank",children:V.FD.format("help")})]}),(0,o.jsx)(x.Z,{content:"docker exec ".concat((Y=w.appName)!==null&&Y!==void 0?Y:"dpanel"," ./dpanel user:reset -f config.yaml")}),(0,o.jsx)("span",{})]}),children:(0,o.jsx)(f.Z.Link,{style:{float:"right"},children:g.format("formUserReset")})})]})]})}var de=function(){var w=P.Z.useToken(),Y=w.token,g=(0,N.useModel)("@@initialState"),q=g.refresh,re=g.initialState,ue=(0,d.useState)({loginType:"account",appName:"dpanel"}),_=A()(ue,2),L=_[0],oe=_[1],t=(0,d.useState)(),n=A()(t,2),r=n[0],s=n[1],i=(0,d.useState)(),v=A()(i,2),h=v[0],Z=v[1],U=(0,N.useAntdConfigSetter)(),I=(0,d.useRef)(),y=new V.Uo("user"),F=window.matchMedia("(prefers-color-scheme: dark)");(0,d.useEffect)(function(){window.document.title=y.format("documentTitle"),(0,j.Nr)().then(function(){var E=C()(p()().mark(function c(l){var m;return p()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:y.appendXk(l.data.feature.includes("canSeeEnableXk")),m={loginType:"account"},l.data.showBuildName&&l.data.family!="lite"&&(m.showBuildName=!0),l.data.showRegister&&(m.loginType="register"),l.data.family=="demo"&&(m.showDemo=!0),m.appName=l.data.appName,l.data.theme&&l.data.theme.algorithm&&(localStorage.setItem("dpanel-theme",l.data.theme.algorithm),z(l.data.theme),l.data.theme.algorithm=="system"&&F.addEventListener("change",function(){z(l.data.theme)})),Z(l.data),oe(m),l.data.feature.indexOf("canSeeEnableThemeUser")!=-1?(0,O.ax)().then(function(u){u.data&&u.data.themeUserConfig&&u.data.themeUserConfig.siteTitle&&(window.document.title=u.data.themeUserConfig.siteTitle),s(u.data)}):s({});case 10:case"end":return K.stop()}},c)}));return function(c){return E.apply(this,arguments)}}())},[]);function z(E){E&&U(function(c){var l,m,B,K,u;(l=c.theme)!==null&&l!==void 0||(c.theme={}),(B=(m=c.theme).token)!==null&&B!==void 0||(m.token={}),(u=(K=c.theme).components)!==null&&u!==void 0||(K.components={});var W=[];return E.algorithm=="dark"||E.algorithm=="system"&&F.matches?W.push(P.Z.darkAlgorithm):W.push(P.Z.defaultAlgorithm),E.compact=="compact"&&W.push(P.Z.compactAlgorithm),c.theme.algorithm=W,E.fontSize&&(c.theme.token.fontSize=E.fontSize),c})}return(0,o.jsxs)(o.Fragment,{children:[L&&L.showBuildName&&(0,o.jsx)(G.Z,{type:"error",message:y.format("tipShowBuildName"),banner:!0}),L&&L.showDemo&&(0,o.jsx)(G.Z,{type:"error",message:y.format("tipShowDemo"),banner:!0}),(0,o.jsx)(R.Z,{justify:"center",align:"center",style:{height:"100vh",background:r&&r.themeUserConfig&&r.themeUserConfig.bgImage&&r.themeUserConfig.bgImage.src?"url(".concat(r.themeUserConfig.bgImage.src,")"):"".concat(Y.colorBgElevated,"dd")},children:(0,o.jsxs)(D.U,{onFinish:function(){var E=C()(p()().mark(function c(l){var m,B;return p()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(L.loginType!="register"){u.next=3;break}return u.next=3,(0,j.AT)({username:l.username,password:l.password,confirmPassword:l.confirmPassword});case 3:return u.prev=3,u.next=6,(0,j.n$)({username:l.username,password:l.password,autoLogin:l.autoLogin,code:l.code});case 6:if(m=u.sent,!m.data.accessToken){u.next=13;break}return localStorage.setItem("token",m.data.accessToken),q().then(function(W){m.data.redirect&&m.data.redirect!=""&&!(h!=null&&h.feature.includes("canSeeEnableCe"))?window.location.href="/dpanel/ui"+m.data.redirect:window.location.href="/dpanel/ui"}),u.abrupt("return");case 13:return u.abrupt("return",!1);case 14:u.next=19;break;case 16:u.prev=16,u.t0=u.catch(3),(B=I.current)===null||B===void 0||B.resetFields(["code"]);case 19:case"end":return u.stop()}},c,null,[[3,16]])}));return function(c){return E.apply(this,arguments)}}(),containerStyle:{background:"transparent",height:"auto"},contentStyle:{width:"auto"},logo:"",title:(0,o.jsx)("img",{src:r&&r.themeUserConfig&&r.themeUserConfig.loginLogo?r.themeUserConfig.loginLogo:"/dpanel/static/asset/logo.png",width:"350"}),subTitle:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("br",{}),(0,o.jsx)("br",{})]}),formRef:I,children:[(0,o.jsx)(ce,{showTwoFa:!!(r&&r.canSeeEnableTwoFa),loginType:L.loginType,appName:L.appName,showAutoLogin:!(h!=null&&h.feature.includes("canSeeEnableXk"))}),(0,o.jsx)(f.Z.Paragraph,{style:{marginBottom:10,color:"#999999",textAlign:"center"},children:(0,o.jsxs)(S.Z,{children:[y.format("agree"),(0,o.jsx)("a",{href:y.format("userAgreementUrl"),target:"_blank",children:y.format("userAgreement")}),(0,o.jsx)("a",{href:y.format("userPrivacyUrl"),target:"_blank",children:y.format("userPrivacy")})]})})]})})]})}},89075:function(ne,b,e){e.d(b,{$w:function(){return A},E1:function(){return G},YQ:function(){return O},ax:function(){return N}});var a=e(15009),p=e.n(a),M=e(99289),C=e.n(M),$=e(82346);function A(){return j.apply(this,arguments)}function j(){return j=C()(p()().mark(function f(){return p()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,$.request)("/api/pro/home/get-machine-id",{method:"POST"}));case 1:case"end":return d.stop()}},f)})),j.apply(this,arguments)}function O(){return D.apply(this,arguments)}function D(){return D=C()(p()().mark(function f(){return p()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,$.request)("/api/pro/home/get-license-info",{method:"POST"}));case 1:case"end":return d.stop()}},f)})),D.apply(this,arguments)}function N(){return P.apply(this,arguments)}function P(){return P=C()(p()().mark(function f(){return p()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",(0,$.request)("/api/pro/home/login-info",{method:"POST"}));case 1:case"end":return d.stop()}},f)})),P.apply(this,arguments)}function G(f){return R.apply(this,arguments)}function R(){return R=C()(p()().mark(function f(S){return p()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.abrupt("return",(0,$.request)("/api/pro/home/upload-license-file",{method:"POST",data:S}));case 1:case"end":return x.stop()}},f)})),R.apply(this,arguments)}},40056:function(ne,b,e){e.d(b,{Z:function(){return oe}});var a=e(67294),p=e(89739),M=e(4340),C=e(97937),$=e(21640),A=e(78860),j=e(93967),O=e.n(j),D=e(29372),N=e(64217),P=e(42550),G=e(96159),R=e(53124),f=e(11568),S=e(14747),d=e(83559);const x=(t,n,r,s,i)=>({background:t,border:`${(0,f.bf)(s.lineWidth)} ${s.lineType} ${n}`,[`${i}-icon`]:{color:r}}),V=t=>{const{componentCls:n,motionDurationSlow:r,marginXS:s,marginSM:i,fontSize:v,fontSizeLG:h,lineHeight:Z,borderRadiusLG:U,motionEaseInOutCirc:I,withDescriptionIconSize:y,colorText:F,colorTextHeading:z,withDescriptionPadding:E,defaultPadding:c}=t;return{[n]:Object.assign(Object.assign({},(0,S.Wf)(t)),{position:"relative",display:"flex",alignItems:"center",padding:c,wordWrap:"break-word",borderRadius:U,[`&${n}-rtl`]:{direction:"rtl"},[`${n}-content`]:{flex:1,minWidth:0},[`${n}-icon`]:{marginInlineEnd:s,lineHeight:0},"&-description":{display:"none",fontSize:v,lineHeight:Z},"&-message":{color:z},[`&${n}-motion-leave`]:{overflow:"hidden",opacity:1,transition:`max-height ${r} ${I}, opacity ${r} ${I},
        padding-top ${r} ${I}, padding-bottom ${r} ${I},
        margin-bottom ${r} ${I}`},[`&${n}-motion-leave-active`]:{maxHeight:0,marginBottom:"0 !important",paddingTop:0,paddingBottom:0,opacity:0}}),[`${n}-with-description`]:{alignItems:"flex-start",padding:E,[`${n}-icon`]:{marginInlineEnd:i,fontSize:y,lineHeight:0},[`${n}-message`]:{display:"block",marginBottom:s,color:z,fontSize:h},[`${n}-description`]:{display:"block",color:F}},[`${n}-banner`]:{marginBottom:0,border:"0 !important",borderRadius:0}}},X=t=>{const{componentCls:n,colorSuccess:r,colorSuccessBorder:s,colorSuccessBg:i,colorWarning:v,colorWarningBorder:h,colorWarningBg:Z,colorError:U,colorErrorBorder:I,colorErrorBg:y,colorInfo:F,colorInfoBorder:z,colorInfoBg:E}=t;return{[n]:{"&-success":x(i,s,r,t,n),"&-info":x(E,z,F,t,n),"&-warning":x(Z,h,v,t,n),"&-error":Object.assign(Object.assign({},x(y,I,U,t,n)),{[`${n}-description > pre`]:{margin:0,padding:0}})}}},k=t=>{const{componentCls:n,iconCls:r,motionDurationMid:s,marginXS:i,fontSizeIcon:v,colorIcon:h,colorIconHover:Z}=t;return{[n]:{"&-action":{marginInlineStart:i},[`${n}-close-icon`]:{marginInlineStart:i,padding:0,overflow:"hidden",fontSize:v,lineHeight:(0,f.bf)(v),backgroundColor:"transparent",border:"none",outline:"none",cursor:"pointer",[`${r}-close`]:{color:h,transition:`color ${s}`,"&:hover":{color:Z}}},"&-close-text":{color:h,transition:`color ${s}`,"&:hover":{color:Z}}}}},te=t=>({withDescriptionIconSize:t.fontSizeHeading3,defaultPadding:`${t.paddingContentVerticalSM}px 12px`,withDescriptionPadding:`${t.paddingMD}px ${t.paddingContentHorizontalLG}px`});var ae=(0,d.I$)("Alert",t=>[V(t),X(t),k(t)],te),Q=function(t,n){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&n.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(t);i<s.length;i++)n.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(t,s[i])&&(r[s[i]]=t[s[i]]);return r};const se={success:p.Z,info:A.Z,error:M.Z,warning:$.Z},le=t=>{const{icon:n,prefixCls:r,type:s}=t,i=se[s]||null;return n?(0,G.wm)(n,a.createElement("span",{className:`${r}-icon`},n),()=>({className:O()(`${r}-icon`,n.props.className)})):a.createElement(i,{className:`${r}-icon`})},ie=t=>{const{isClosable:n,prefixCls:r,closeIcon:s,handleClose:i,ariaProps:v}=t,h=s===!0||s===void 0?a.createElement(C.Z,null):s;return n?a.createElement("button",Object.assign({type:"button",onClick:i,className:`${r}-close-icon`,tabIndex:0},v),h):null};var o=a.forwardRef((t,n)=>{const{description:r,prefixCls:s,message:i,banner:v,className:h,rootClassName:Z,style:U,onMouseEnter:I,onMouseLeave:y,onClick:F,afterClose:z,showIcon:E,closable:c,closeText:l,closeIcon:m,action:B,id:K}=t,u=Q(t,["description","prefixCls","message","banner","className","rootClassName","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action","id"]),[W,ye]=a.useState(!1),fe=a.useRef(null);a.useImperativeHandle(n,()=>({nativeElement:fe.current}));const{getPrefixCls:Ee,direction:Ce,closable:J,closeIcon:pe,className:Pe,style:xe}=(0,R.dj)("alert"),T=Ee("alert",s),[je,Se,Ie]=ae(T),Te=H=>{var ee;ye(!0),(ee=t.onClose)===null||ee===void 0||ee.call(t,H)},he=a.useMemo(()=>t.type!==void 0?t.type:v?"warning":"info",[t.type,v]),$e=a.useMemo(()=>typeof c=="object"&&c.closeIcon||l?!0:typeof c=="boolean"?c:m!==!1&&m!==null&&m!==void 0?!0:!!J,[l,m,c,J]),ge=v&&E===void 0?!0:E,Oe=O()(T,`${T}-${he}`,{[`${T}-with-description`]:!!r,[`${T}-no-icon`]:!ge,[`${T}-banner`]:!!v,[`${T}-rtl`]:Ce==="rtl"},Pe,h,Z,Ie,Se),Ze=(0,N.Z)(u,{aria:!0,data:!0}),be=a.useMemo(()=>typeof c=="object"&&c.closeIcon?c.closeIcon:l||(m!==void 0?m:typeof J=="object"&&J.closeIcon?J.closeIcon:pe),[m,c,l,pe]),Me=a.useMemo(()=>{const H=c!=null?c:J;if(typeof H=="object"){const{closeIcon:ee}=H;return Q(H,["closeIcon"])}return{}},[c,J]);return je(a.createElement(D.ZP,{visible:!W,motionName:`${T}-motion`,motionAppear:!1,motionEnter:!1,onLeaveStart:H=>({maxHeight:H.offsetHeight}),onLeaveEnd:z},({className:H,style:ee},ve)=>a.createElement("div",Object.assign({id:K,ref:(0,P.sQ)(fe,ve),"data-show":!W,className:O()(Oe,H),style:Object.assign(Object.assign(Object.assign({},xe),U),ee),onMouseEnter:I,onMouseLeave:y,onClick:F,role:"alert"},Ze),ge?a.createElement(le,{description:r,icon:t.icon,prefixCls:T,type:he}):null,a.createElement("div",{className:`${T}-content`},i?a.createElement("div",{className:`${T}-message`},i):null,r?a.createElement("div",{className:`${T}-description`},r):null),B?a.createElement("div",{className:`${T}-action`},B):null,a.createElement(ie,{isClosable:$e,prefixCls:T,closeIcon:be,handleClose:Te,ariaProps:Me}))))}),ce=e(15671),de=e(43144),w=e(61120),Y=e(78814),g=e(82963);function q(t,n,r){return n=(0,w.Z)(n),(0,g.Z)(t,(0,Y.Z)()?Reflect.construct(n,r||[],(0,w.Z)(t).constructor):n.apply(t,r))}var re=e(60136),_=function(t){function n(){var r;return(0,ce.Z)(this,n),r=q(this,n,arguments),r.state={error:void 0,info:{componentStack:""}},r}return(0,re.Z)(n,t),(0,de.Z)(n,[{key:"componentDidCatch",value:function(s,i){this.setState({error:s,info:i})}},{key:"render",value:function(){const{message:s,description:i,id:v,children:h}=this.props,{error:Z,info:U}=this.state,I=(U==null?void 0:U.componentStack)||null,y=typeof s=="undefined"?(Z||"").toString():s,F=typeof i=="undefined"?I:i;return Z?a.createElement(o,{id:v,type:"error",message:y,description:a.createElement("pre",{style:{fontSize:"0.9em",overflowX:"auto"}},F)}):h}}])}(a.Component);const L=o;L.ErrorBoundary=_;var oe=L}}]);
