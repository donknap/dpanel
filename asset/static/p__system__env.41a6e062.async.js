"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1180],{30159:function(D,R,e){e.d(R,{Z:function(){return y}});var Z=e(87462),l=e(67294),h={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372zm-88-532h-48c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8zm224 0h-48c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8z"}}]},name:"pause-circle",theme:"outlined"},c=h,j=e(84089),p=function(f,o){return l.createElement(j.Z,(0,Z.Z)({},f,{ref:o,icon:c}))},m=l.forwardRef(p),y=m},87740:function(D,R,e){e.d(R,{Z:function(){return y}});var Z=e(87462),l=e(67294),h={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"},c=h,j=e(84089),p=function(f,o){return l.createElement(j.Z,(0,Z.Z)({},f,{ref:o,icon:c}))},m=l.forwardRef(p),y=m},98165:function(D,R,e){e.d(R,{Z:function(){return y}});var Z=e(87462),l=e(67294),h={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"},c=h,j=e(84089),p=function(f,o){return l.createElement(j.Z,(0,Z.Z)({},f,{ref:o,icon:c}))},m=l.forwardRef(p),y=m},10781:function(D,R,e){e.d(R,{Z:function(){return F}});var Z=e(5574),l=e.n(Z),h=e(87462),c=e(67294),j={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"minus-circle",theme:"outlined"},p=j,m=e(84089),y=function(C,O){return c.createElement(m.Z,(0,h.Z)({},C,{ref:O,icon:p}))},I=c.forwardRef(y),f=I,o=e(98165),w=e(18429),V={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"},S=V,H=function(C,O){return c.createElement(m.Z,(0,h.Z)({},C,{ref:O,icon:S}))},K=c.forwardRef(H),P=K,N=e(66212),G={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37z"}}]},name:"caret-right",theme:"outlined"},U=G,k=function(C,O){return c.createElement(m.Z,(0,h.Z)({},C,{ref:O,icon:U}))},A=c.forwardRef(k),W=A,J=e(30159),Q=e(87740),g=e(50888),u=e(66309),$=e(83062),M=e(36146),r=e(85893);function F(E){var C,O,z=new M.Uo("components.containerStatus"),L=E.status.split("."),T=l()(L,2),d=T[0],t=T[1],a="";a=z.format(E.status,(C=E.statusValue)!==null&&C!==void 0?C:{});var n=(0,r.jsx)(r.Fragment,{});return t=="0"&&(n=(0,r.jsx)(u.Z,{icon:(0,r.jsx)(f,{}),color:"default",children:a})),t=="10"&&(n=(0,r.jsx)(u.Z,{icon:(0,r.jsx)(o.Z,{spin:!0}),color:"processing",children:a})),t=="20"&&(n=(0,r.jsx)(u.Z,{icon:(0,r.jsx)(w.Z,{}),color:"error",children:a})),t=="30"&&(n=(0,r.jsx)(u.Z,{icon:(0,r.jsx)(P,{}),color:"success",children:a})),t=="new"&&(n=(0,r.jsx)(u.Z,{icon:(0,r.jsx)(N.Z,{}),children:a})),(t=="running"||t=="healthy"||t=="active"||t=="ready")&&(n=(0,r.jsx)(u.Z,{icon:(0,r.jsx)(W,{}),color:"success",children:a})),(t=="paused"||t=="pause"||t=="rollback_paused")&&(n=(0,r.jsx)(u.Z,{icon:(0,r.jsx)(J.Z,{}),color:"warning",children:a})),(t=="waiting"||t=="starting"||t=="accepted")&&(n=(0,r.jsx)(u.Z,{icon:(0,r.jsx)(Q.Z,{}),children:a})),["deploying","pending","allocated","accepted","assigned","preparing","updating","rollback_started"].includes(t)&&(n=(0,r.jsx)(u.Z,{icon:(0,r.jsx)(g.Z,{}),color:"processing",children:a})),(t=="error"||t=="down"||t=="failed")&&(n=(0,r.jsx)(u.Z,{icon:(0,r.jsx)(w.Z,{}),color:"error",children:a})),["complete","completed","rollback_completed"].includes(t)&&(n=(0,r.jsx)(u.Z,{icon:(0,r.jsx)(P,{}),color:"success",children:a})),["exited","dead","removing","restarting","unhealthy","created","drain","unreachable","shutdown","rejected","remove","orphaned"].includes(t)&&(n=(0,r.jsx)(u.Z,{icon:(0,r.jsx)(w.Z,{}),color:"warning",children:a})),(0,r.jsx)($.Z,{placement:"top",title:(O=E.tip)!==null&&O!==void 0?O:"",children:n})}},4167:function(D,R,e){e.r(R),e.d(R,{default:function(){return u}});var Z=e(15009),l=e.n(Z),h=e(99289),c=e.n(h),j=e(10781),p=e(77273),m=e(55681),y=e(83403),I=e(24963),f=e(87662),o=e(36146),w=e(86548),V=e(87462),S=e(67294),H={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h360c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H184V184h656v320c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V144c0-17.7-14.3-32-32-32zM653.3 599.4l52.2-52.2a8.01 8.01 0 00-4.7-13.6l-179.4-21c-5.1-.6-9.5 3.7-8.9 8.9l21 179.4c.8 6.6 8.9 9.4 13.6 4.7l52.4-52.4 256.2 256.2c3.1 3.1 8.2 3.1 11.3 0l42.4-42.4c3.1-3.1 3.1-8.2 0-11.3L653.3 599.4z"}}]},name:"select",theme:"outlined"},K=H,P=e(84089),N=function(M,r){return S.createElement(P.Z,(0,V.Z)({},M,{ref:r,icon:K}))},G=S.forwardRef(N),U=G,k=e(74453),A=e(63713),W=e(83622),J=e(25593),Q=e(66309),g=e(85893);function u(){var $=(0,S.useRef)(),M=(0,S.useRef)(),r=(0,A.useModel)("@@initialState"),F=r.refresh,E=r.initialState,C=(0,S.useContext)(I.Z),O=C.message,z=(0,A.useLocation)(),L=(0,A.useNavigate)(),T=new o.Uo("system.env");return(0,S.useEffect)(function(){var d=z.state;d&&(L(".",{replace:!0}),d&&d.name&&(0,f.Kg)({enableCertContent:!0}).then(function(t){var a,n=t.data.list.find(function(v){return v.name==d.name});n&&((a=M.current)===null||a===void 0||a.edit(n))}))},[z.state]),(0,g.jsx)(k._z,{header:{extra:[(0,g.jsx)(p.Z,{trigger:(0,g.jsx)(W.ZP,{type:"primary",children:T.format("createButton")}),ref:M,onFinish:c()(l()().mark(function d(){var t,a,n;return l()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(n=z.state,!(n&&n.name)){s.next=6;break}return s.next=4,(0,f.vC)({name:n.name});case 4:return L(z.pathname,{replace:!0,state:null}),s.abrupt("return");case 6:F(),!((t=$.current)===null||t===void 0)&&t.reloadAndRest&&((a=$.current)===null||a===void 0||a.reloadAndRest());case 8:case"end":return s.stop()}},d)}))},"dockerEnvCreate")]},children:(0,g.jsx)(m.Co,{rowKey:"name",columns:[{title:o.FD.format("listName"),dataIndex:"name",render:function(t,a,n,v,s){return(0,g.jsx)(J.Z.Link,{onClick:function(){var i;(i=M.current)===null||i===void 0||i.edit(a)},children:a.name},a.name)}},{title:o.FD.format("listTitle"),dataIndex:"title"},{title:o.FD.format("listTargetAddress"),dataIndex:"address"},{title:o.FD.format("listType"),width:120,render:function(t,a,n,v,s){var x;return(0,g.jsx)(Q.Z,{children:(x=a.dockerType)!==null&&x!==void 0?x:"docker"})}},{title:o.FD.format("listStatus"),width:120,render:function(t,a,n,v,s){var x,i;return(0,g.jsx)(j.Z,{status:"swarm.".concat((x=a.dockerStatus)!==null&&x!==void 0&&x.available?"active":"down"),tip:"".concat((i=a.dockerStatus)===null||i===void 0?void 0:i.message)})}}],pagination:!1,request:c()(l()().mark(function d(){var t;return l()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,f.Kg)({enableCertContent:!0});case 2:return t=n.sent,n.abrupt("return",{data:t.data.list,total:t.data.list.length});case 4:case"end":return n.stop()}},d)})),search:!1,actionRef:$,actions:[{key:"edit",label:o.FD.format("listManageEdit"),showInContext:"manage",showInOperator:!0,icon:(0,g.jsx)(w.Z,{}),action:function(t){return c()(l()().mark(function a(){var n,v,s;return l()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:v=t.finish,s=t.selectedRow,v(!0),(n=M.current)===null||n===void 0||n.edit(s);case 3:case"end":return i.stop()}},a)}))()}},{key:"switch",label:o.FD.format("listManageSwitch"),icon:(0,g.jsx)(U,{}),showInContext:"manage",showInOperator:!0,action:function(t){return c()(l()().mark(function a(){var n,v,s;return l()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return n=t.selectedRow,v=t.finish,s=t.loading,s(),i.abrupt("return",(0,f.vC)({name:n.name}).then(function(B){F()}).finally(function(){v(!0)}));case 3:case"end":return i.stop()}},a)}))()}},{key:"dataPermission",label:y.W6.DOCKER_ENV},{key:"delete",action:function(t){return c()(l()().mark(function a(){var n,v,s;return l()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(n=t.selectedRows,v=t.finish,s=t.loading,!n.find(function(B){return B.default})){i.next=4;break}return O.warning(o.FD.format("systemEnvDefaultCannotDelete")),i.abrupt("return",!1);case 4:return s(),i.abrupt("return",(0,f._g)({name:n.map(function(B){return B.name})}).finally(function(){v(!0)}));case 6:case"end":return i.stop()}},a)}))()}}]})})}}}]);
