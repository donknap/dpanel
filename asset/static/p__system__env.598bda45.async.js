"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1180],{94359:function(b,j,e){e.d(j,{Z:function(){return B}});var I=e(5574),E=e.n(I),W=e(3089),D=e(98165),C=e(18429),p=e(8751),T=e(66212),A=e(14313),K=e(30159),M=e(87740),v=e(50888),l=e(66309),L=e(83062),x=e(36146),n=e(85893);function B(P){var f,m,Z=new x.Uo("components.containerStatus"),g=P.status.split("."),h=E()(g,2),y=h[0],t=h[1],c="";c=Z.format(P.status,(f=P.statusValue)!==null&&f!==void 0?f:{});var i=(0,n.jsx)(n.Fragment,{});return t=="0"&&(i=(0,n.jsx)(l.Z,{icon:(0,n.jsx)(W.Z,{}),color:"default",children:c})),t=="10"&&(i=(0,n.jsx)(l.Z,{icon:(0,n.jsx)(D.Z,{spin:!0}),color:"processing",children:c})),t=="20"&&(i=(0,n.jsx)(l.Z,{icon:(0,n.jsx)(C.Z,{}),color:"error",children:c})),t=="30"&&(i=(0,n.jsx)(l.Z,{icon:(0,n.jsx)(p.Z,{}),color:"success",children:c})),t=="new"&&(i=(0,n.jsx)(l.Z,{icon:(0,n.jsx)(T.Z,{}),children:c})),(t=="running"||t=="healthy"||t=="active"||t=="ready")&&(i=(0,n.jsx)(l.Z,{icon:(0,n.jsx)(A.Z,{}),color:"success",children:c})),(t=="paused"||t=="pause"||t=="rollback_paused")&&(i=(0,n.jsx)(l.Z,{icon:(0,n.jsx)(K.Z,{}),color:"warning",children:c})),(t=="waiting"||t=="starting"||t=="accepted")&&(i=(0,n.jsx)(l.Z,{icon:(0,n.jsx)(M.Z,{}),children:c})),["deploying","pending","allocated","accepted","assigned","preparing","updating","rollback_started"].includes(t)&&(i=(0,n.jsx)(l.Z,{icon:(0,n.jsx)(v.Z,{}),color:"processing",children:c})),(t=="error"||t=="down"||t=="failed")&&(i=(0,n.jsx)(l.Z,{icon:(0,n.jsx)(C.Z,{}),color:"error",children:c})),["complete","completed","rollback_completed"].includes(t)&&(i=(0,n.jsx)(l.Z,{icon:(0,n.jsx)(p.Z,{}),color:"success",children:c})),["exited","dead","removing","restarting","unhealthy","created","drain","unreachable","shutdown","rejected","remove","orphaned"].includes(t)&&(i=(0,n.jsx)(l.Z,{icon:(0,n.jsx)(C.Z,{}),color:"warning",children:c})),(0,n.jsx)(L.Z,{placement:"top",title:(m=P.tip)!==null&&m!==void 0?m:"",children:i})}},98163:function(b,j,e){e.r(j),e.d(j,{default:function(){return Z}});var I=e(15009),E=e.n(I),W=e(99289),D=e.n(W),C=e(94359),p=e(77273),T=e(55681),A=e(83403),K=e(24963),M=e(87662),v=e(36146),l=e(86548),L=e(49591),x=e(74453),n=e(82346),B=e(83622),P=e(25593),f=e(67294),m=e(85893);function Z(){var g=(0,f.useRef)(),h=(0,f.useRef)(),y=(0,n.useModel)("@@initialState"),t=y.refresh,c=y.initialState,i=(0,f.useContext)(K.Z),S=i.message,R=(0,n.useLocation)(),$=(0,n.useNavigate)(),F=new v.Uo("system.env");return(0,f.useEffect)(function(){var d=R.state;d&&($(".",{replace:!0}),d&&d.name&&(0,M.Kg)({enableCertContent:!0}).then(function(r){var _,a=r.data.list.find(function(u){return u.name==d.name});a&&((_=h.current)===null||_===void 0||_.edit(a))}))},[R.state]),(0,m.jsx)(x._z,{header:{extra:[(0,m.jsx)(p.Z,{trigger:(0,m.jsx)(B.ZP,{type:"primary",children:F.format("createButton")}),ref:h,onFinish:D()(E()().mark(function d(){var r,_,a;return E()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(a=R.state,!(a&&a.name)){o.next=6;break}return o.next=4,(0,M.vC)({name:a.name});case 4:return $(R.pathname,{replace:!0,state:null}),o.abrupt("return");case 6:t(),!((r=g.current)===null||r===void 0)&&r.reloadAndRest&&((_=g.current)===null||_===void 0||_.reloadAndRest());case 8:case"end":return o.stop()}},d)}))},"dockerEnvCreate")]},children:(0,m.jsx)(T.Co,{rowKey:"name",columns:[{title:v.FD.format("listName"),dataIndex:"name",render:function(r,_,a,u,o){return(0,m.jsx)(P.Z.Link,{onClick:function(){var s;(s=h.current)===null||s===void 0||s.edit(_)},children:_.name},_.name)}},{title:v.FD.format("listTitle"),dataIndex:"title"},{title:v.FD.format("listStatus"),render:function(r,_,a,u,o){var O,s;return(0,m.jsx)(C.Z,{status:"swarm.".concat((O=_.dockerStatus)!==null&&O!==void 0&&O.available?"active":"down"),tip:"".concat((s=_.dockerStatus)===null||s===void 0?void 0:s.message)})}},{title:v.FD.format("listTargetAddress"),dataIndex:"address"}],pagination:!1,request:D()(E()().mark(function d(){var r;return E()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,M.Kg)({enableCertContent:!0});case 2:return r=a.sent,a.abrupt("return",{data:r.data.list,total:r.data.list.length});case 4:case"end":return a.stop()}},d)})),search:!1,actionRef:g,actions:[{key:"edit",label:v.FD.format("listManageEdit"),showInContext:"manage",showInOperator:!0,icon:(0,m.jsx)(l.Z,{}),action:function(r){return D()(E()().mark(function _(){var a,u,o;return E()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:u=r.finish,o=r.selectedRow,u(!0),(a=h.current)===null||a===void 0||a.edit(o);case 3:case"end":return s.stop()}},_)}))()}},{key:"switch",label:v.FD.format("listManageSwitch"),icon:(0,m.jsx)(L.Z,{}),showInContext:"manage",showInOperator:!0,action:function(r){return D()(E()().mark(function _(){var a,u,o;return E()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return a=r.selectedRow,u=r.finish,o=r.loading,o(),s.abrupt("return",(0,M.vC)({name:a.name}).then(function(U){t()}).finally(function(){u(!0)}));case 3:case"end":return s.stop()}},_)}))()}},{key:"dataPermission",label:A.W6.DOCKER_ENV},{key:"delete",action:function(r){return D()(E()().mark(function _(){var a,u,o;return E()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(a=r.selectedRows,u=r.finish,o=r.loading,!a.find(function(U){return U.default})){s.next=4;break}return S.warning(v.FD.format("systemEnvDefaultCannotDelete")),s.abrupt("return",!1);case 4:return o(),s.abrupt("return",(0,M._g)({name:a.map(function(U){return U.name})}).finally(function(){u(!0)}));case 6:case"end":return s.stop()}},_)}))()}}]})})}}}]);
