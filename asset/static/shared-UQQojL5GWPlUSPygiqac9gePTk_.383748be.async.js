"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1487],{64789:function(b,f,e){e.d(f,{Z:function(){return o}});var l=e(87462),a=e(67294),d={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},s=d,u=e(84089),c=function(h,m){return a.createElement(u.Z,(0,l.Z)({},h,{ref:m,icon:s}))},i=a.forwardRef(c),o=i},27166:function(b,f,e){var l=e(97857),a=e.n(l),d=e(5574),s=e.n(d),u=e(13769),c=e.n(u),i=e(184),o=e(74330),E=e(67294),h=e(85893),m=["requestLoading"],O=(0,E.forwardRef)(function(j,g){var C=j.requestLoading,M=c()(j,m),t=(0,E.useState)(),_=s()(t,2),r=_[0],n=_[1];return(0,E.useImperativeHandle)(g,function(){return{loading:function(){n(!0)},finish:function(){n(!1)}}}),(0,E.useEffect)(function(){typeof j.requestLoading!="undefined"&&n(j.requestLoading)},[j.requestLoading]),(0,h.jsx)(i.a,a()(a()({},M),{},{children:(0,h.jsx)(o.Z,{spinning:!!r,size:"default",style:{marginTop:"30%"},children:j.children})}))});f.Z=O},92237:function(b,f,e){e.d(f,{Z:function(){return U}});var l=e(97857),a=e.n(l),d=e(19632),s=e.n(d),u=e(5574),c=e.n(u),i=e(87462),o=e(67294),E={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zm-180 0H238c-13 0-24.8 7.9-29.7 20L136 643.2V256h188.5l119.6 114.4H748V444z"}}]},name:"folder-open",theme:"filled"},h=E,m=e(84089),O=function(y,x){return o.createElement(m.Z,(0,i.Z)({},y,{ref:x,icon:h}))},j=o.forwardRef(O),g=j,C=e(42075),M=e(85418),t=e(25593),_=e(83622),r=e(31112),n=e(85893),I={title:"/",path:"/"},D=(0,o.forwardRef)(function(R,y){var x=(0,o.useContext)(r.Z),w=x.showPath,N=x.redirectPath,K=(0,o.useState)([I]),F=c()(K,2),L=F[0],W=F[1];(0,o.useImperativeHandle)(y,function(){return{addHistory:function(v,p){p=="/"?W([I]):W([].concat(s()(L),[{title:v,path:p}]))},initHistory:function(v,p){W([a()(a()({},I),{},{children:p})].concat(s()(v)))}}});var S=function(v){w?w(L[v].title,L[v].path):R.showPath&&R.showPath(L[v].title,L[v].path);var p=L.filter(function(P,A){return A<=v});W(s()(p))};return(0,n.jsxs)(C.Z,{children:[(0,n.jsx)(C.Z.Compact,{children:L.map(function(T,v){return T.children?(0,n.jsxs)(M.Z.Button,{menu:{items:T.children.map(function(p,P){return{key:P,label:(0,n.jsx)(t.Z.Link,{onClick:function(){N(p)},children:p},P)}})},type:"dashed",onClick:function(P){S(v)},children:[(0,n.jsx)(g,{})," ",T.title]},v):(0,n.jsx)(_.ZP,{icon:(0,n.jsx)(g,{}),type:"dashed",onClick:function(){S(v)},children:T.title},v)})}),L.length>=2&&(0,n.jsx)(t.Z.Text,{copyable:{text:L[L.length-1].path}})]})}),U=D},31112:function(b,f,e){var l=e(67294),a=(0,l.createContext)({});f.Z=a},15836:function(b,f,e){e.d(f,{Z:function(){return I}});var l=e(24963),a=e(36146),d=e(87462),s=e(67294),u={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32z"}}]},name:"folder",theme:"filled"},c=u,i=e(84089),o=function(U,R){return s.createElement(i.Z,(0,d.Z)({},U,{ref:R,icon:c}))},E=s.forwardRef(o),h=E,m=e(36693),O={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.7c6 6 9.4 14.1 9.4 22.6V928c0 17.7-14.3 32-32 32H192c-17.7 0-32-14.3-32-32V96c0-17.7 14.3-32 32-32h424.7c8.5 0 16.7 3.4 22.7 9.4l215.2 215.3zM790.2 326L602 137.8V326h188.2z"}}]},name:"file",theme:"filled"},j=O,g=function(U,R){return s.createElement(i.Z,(0,d.Z)({},U,{ref:R,icon:j}))},C=s.forwardRef(g),M=C,t=e(25593),_=e(42075),r=e(85893),n=0;function I(D){var U=(0,s.useContext)(l.Z),R=U.message,y=new a.Uo("components.explorer");return D.isDir?(0,r.jsx)(t.Z.Link,{onClick:function(){D.onClick&&D.onClick()},children:(0,r.jsxs)(_.Z,{children:[(0,r.jsx)(h,{}),D.showName]})}):D.isLink?(0,r.jsx)(t.Z.Link,{onClick:function(){D.onClick&&D.onClick()},children:(0,r.jsxs)(_.Z,{children:[(0,r.jsx)(m.Z,{}),D.showName]})}):(0,r.jsx)(t.Z.Text,{onClick:function(){if(n++,n==2){n=0,D.onClick&&D.onClick();return}setTimeout(function(){n==1&&R.info(y.format("fileNameMessageViewDetail")),n=0},400)},style:{cursor:"pointer"},children:(0,r.jsxs)(_.Z,{children:[(0,r.jsx)(M,{}),D.showName]})})}},92754:function(b,f,e){var l=e(5574),a=e.n(l),d=e(67294),s=e(63713),u=e(38703),c=e(85893),i=(0,d.forwardRef)(function(o,E){var h=(0,d.useState)(""),m=a()(h,2),O=m[0],j=m[1];(0,d.useImperativeHandle)(E,function(){return{setFinish:function(){_({finish:{downloading:100,extracting:100}})},setStart:function(n){n&&j(n),_({start:{downloading:0,extracting:0}})},close:function(){g.progress.close("image:pull:"+O),_({start:{downloading:0,extracting:0}})}}});var g=(0,s.useModel)("subscriber");g.addDataHandler("image:pull:"+O,function(r){_(r.data)});var C=(0,d.useState)(),M=a()(C,2),t=M[0],_=M[1];return(0,d.useEffect)(function(){return _({start:{downloading:0,extracting:0}}),function(){g.progress.close("image:pull:"+O)}},[]),(0,c.jsx)(c.Fragment,{children:t&&Object.keys(t).map(function(r){return(0,c.jsx)(u.Z,{strokeLinecap:"square",size:"small",format:function(I){return"".concat(I,"%")},percent:t[r].downloading,success:{percent:t[r].extracting}},r)})})});f.Z=i},80271:function(b,f,e){var l=e(15009),a=e.n(l),d=e(99289),s=e.n(d),u=e(5574),c=e.n(u),i=e(184),o=e(40018),E=e(83062),h=e(67294),m=e(15836),O=e(5251),j=e(92237),g=e(3616),C=e(36146),M=e(73813),t=e(85893),_=(0,h.forwardRef)(function(r,n){(0,h.useImperativeHandle)(n,function(){return{show:function(){}}});var I=(0,h.useState)(""),D=c()(I,2),U=D[0],R=D[1],y=(0,h.useState)(!1),x=c()(y,2),w=x[0],N=x[1],K=(0,h.useRef)(),F=(0,h.useRef)(),L=function(v,p){var P,A,B;R(p),(P=F.current)===null||P===void 0||P.addHistory(v,p),!((A=K.current)===null||A===void 0)&&A.reloadAndRest&&((B=K.current)===null||B===void 0||B.reloadAndRest())},W=new C.Uo("components.explorer"),S=new C.Uo("image");return(0,t.jsx)(i.a,{drawerProps:{width:g.R_,destroyOnHidden:!0},open:w,submitter:!1,title:S.format("fileTitle"),onOpenChange:function(v){N(v),R(v?"/":"")},trigger:(0,t.jsx)(E.Z,{title:S.format("fileTitle"),children:r.trigger}),children:(0,t.jsx)(o.Z,{headerTitle:(0,t.jsx)(j.Z,{ref:F,showPath:L}),scroll:{x:"max-content"},search:!1,rowKey:"name",pagination:{pageSize:500,position:["topRight","bottomRight"]},actionRef:K,request:s()(a()().mark(function T(){var v;return a()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(U!=""){P.next=2;break}return P.abrupt("return",{data:[],total:0,success:!0});case 2:return P.next=4,(0,M.cD)({md5:r.imageId,path:U});case 4:return v=P.sent,P.abrupt("return",{data:v.data.info,total:v.data.info.length,success:!0});case 6:case"end":return P.stop()}},T)})),columns:[{title:W.format("listName"),dataIndex:"showName",key:"name",render:function(Z,p,P,A,B){var Z,H=(0,O.fi)(p.name.replace(U,""),"/");return p.isDir?Z=(0,t.jsx)(m.Z,{isDir:!0,onClick:function(){return L(H,p.path)},showName:H}):p.isSymlink?Z=(0,t.jsx)(m.Z,{isLink:!0,showName:H}):Z=(0,t.jsx)(m.Z,{showName:H}),Z}},{title:W.format("listModStr"),dataIndex:"modStr",key:"modStr"},{title:W.format("listUser"),dataIndex:"user"},{title:W.format("listGroup"),dataIndex:"group"},{title:W.format("listSize"),dataIndex:"size",key:"size",render:function(v,p,P,A,B){return(0,O.FI)(p.size)}},{title:W.format("listModTime"),dataIndex:"modTime",key:"modTime",render:function(v,p,P,A,B){return(0,O.NF)(p.modTime)},sorter:function(v,p){return new Date(v.modTime).getTime()-new Date(p.modTime).getTime()}}],cardProps:{ghost:!0}},"".concat(r.imageId))})});f.Z=_},2205:function(b,f,e){e.d(f,{Z:function(){return h}});var l=e(97857),a=e.n(l),d=e(5574),s=e.n(d),u=e(75870),c=e(36146),i=e(34041),o=e(67294),E=e(85893);function h(m){var O=(0,o.useState)([]),j=s()(O,2),g=j[0],C=j[1],M=new c.Uo("components.selectRegistry");(0,o.useEffect)(function(){(0,u.Ot)().then(function(_){_&&C(_.data.list)})},[]);var t={};return m.multiple&&(t.mode="multiple"),m.top&&(t.placement="topLeft"),(0,E.jsx)(i.Z,a()({popupMatchSelectWidth:!m.width,style:m.width?{width:m.width}:{},onChange:function(r){if(Array.isArray(r)){var n=r.map(function(I){return g[I]});m.onChangeList&&m.onChangeList(n)}else m.onChange&&m.onChange(g[r])},placeholder:M.format("nameEmpty"),options:g.map(function(_,r){return{value:r,label:_.title+"("+_.serverAddress+")"}}),allowClear:!0},t))}},68297:function(b,f,e){e.d(f,{Qd:function(){return E},Ze:function(){return i},aw:function(){return C},cV:function(){return m},fy:function(){return j},ii:function(){return c}});var l=e(15009),a=e.n(l),d=e(99289),s=e.n(d),u=e(63713),c=[{name:"amd64",arch:"amd64",search:["amd64","x86_64","86_64"]},{name:"arm64",arch:"arm64",search:["arm64","arrch64"]},{name:"i386",arch:"386",search:[]},{name:"arm/v6",arch:"arm",search:[]},{name:"arm/v7",arch:"arm",search:[]},{name:"arm/v8",arch:"arm64",search:[]},{name:"ppc64le",arch:"ppc64le",search:[]},{name:"riscv64",arch:"riscv64",search:[]}];function i(t){return o.apply(this,arguments)}function o(){return o=s()(a()().mark(function t(_){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,u.request)("/dpanel/api/app/image/tag-sync",{method:"POST",data:_}));case 1:case"end":return n.stop()}},t)})),o.apply(this,arguments)}function E(t){return h.apply(this,arguments)}function h(){return h=s()(a()().mark(function t(_){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,u.request)("/dpanel/api/app/image/tag-add",{method:"POST",data:_}));case 1:case"end":return n.stop()}},t)})),h.apply(this,arguments)}function m(t){return O.apply(this,arguments)}function O(){return O=s()(a()().mark(function t(_){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,u.request)("/dpanel/api/app/image/tag-delete",{method:"POST",data:_}));case 1:case"end":return n.stop()}},t)})),O.apply(this,arguments)}function j(t){return g.apply(this,arguments)}function g(){return g=s()(a()().mark(function t(_){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,u.request)("/dpanel/api/app/image/tag-push-batch",{method:"POST",data:_}));case 1:case"end":return n.stop()}},t)})),g.apply(this,arguments)}function C(t){return M.apply(this,arguments)}function M(){return M=s()(a()().mark(function t(_){return a()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,u.request)("/dpanel/api/pro/image/get-remote-tag",{method:"POST",data:_}));case 1:case"end":return n.stop()}},t)})),M.apply(this,arguments)}},21692:function(b,f){function e(l,a,d,s){for(var u=l.length,c=d+(s?1:-1);s?c--:++c<u;)if(a(l[c],c,l))return c;return-1}f.Z=e},8111:function(b,f,e){e.d(f,{Z:function(){return c}});var l=e(21692),a=e(19137);function d(i,o,E){for(var h=E-1,m=i.length;++h<m;)if(i[h]===o)return h;return-1}var s=d;function u(i,o,E){return o===o?s(i,o,E):(0,l.Z)(i,a.Z,E)}var c=u},19137:function(b,f){function e(l){return l!==l}f.Z=e},43461:function(b,f,e){e.d(f,{Z:function(){return c}});var l=/\s/;function a(i){for(var o=i.length;o--&&l.test(i.charAt(o)););return o}var d=a,s=/^\s+/;function u(i){return i&&i.slice(0,d(i)+1).replace(s,"")}var c=u},72714:function(b,f,e){var l=e(93589),a=e(18533),d="[object Symbol]";function s(u){return typeof u=="symbol"||(0,a.Z)(u)&&(0,l.Z)(u)==d}f.Z=s}}]);
