"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7523],{75544:function(q,$,e){var L=e(5574),n=e.n(L),F=e(12323),o=e(78267),m=e.n(o),l=e(75458),R=e.n(l),h=e(67294),j=e(4244),U=e.n(j),P=e(24078),T=e(85893),D,I,i,C=(0,h.forwardRef)(function(a,p){var f,ee=(0,h.useState)(!0),N=n()(ee,2),se=N[0],ae=N[1];return(0,h.useEffect)(function(){return D=new j.Terminal(F.X),I=new l.SearchAddon,i=new o.FitAddon,window.addEventListener("resize",function(){a.showInModal||i.fit()}),a.style&&a.style.fontSize&&(D.options.fontSize=a.style.fontSize),D.loadAddon(i),D.loadAddon(I),D.open(document.getElementById(a.id?a.id:"terminal-container")),a.showInModal||i.fit(),function(){D.reset(),ae(!0)}},[]),(0,h.useImperativeHandle)(p,function(){return{write:function(d){se&&(i.fit(),ae(!1)),D.write(d)},clear:function(){D.clear()},getTerminal:function(){return D},findNext:function(d){I.findNext(d)},findPrev:function(d){I.findPrevious(d)},fit:function(){i.fit()},onData:function(d){return D.onData(d)}}}),(0,T.jsx)("div",{id:a.id?a.id:"terminal-container",style:{width:a.width?a.width:"100%",height:a.height?a.height:"500px",marginTop:(f=a.style)===null||f===void 0?void 0:f.marginTop}})});$.Z=C},94359:function(q,$,e){e.d($,{Z:function(){return C}});var L=e(5574),n=e.n(L),F=e(3089),o=e(98165),m=e(18429),l=e(8751),R=e(66212),h=e(14313),j=e(30159),U=e(87740),P=e(50888),T=e(66309),D=e(83062),I=e(36146),i=e(85893);function C(a){var p,f,ee=new I.Uo("components.containerStatus"),N=a.status.split("."),se=n()(N,2),ae=se[0],g=se[1],d="";d=ee.format(a.status,(p=a.statusValue)!==null&&p!==void 0?p:{});var s=(0,i.jsx)(i.Fragment,{});return g=="0"&&(s=(0,i.jsx)(T.Z,{icon:(0,i.jsx)(F.Z,{}),color:"default",children:d})),g=="10"&&(s=(0,i.jsx)(T.Z,{icon:(0,i.jsx)(o.Z,{spin:!0}),color:"processing",children:d})),g=="20"&&(s=(0,i.jsx)(T.Z,{icon:(0,i.jsx)(m.Z,{}),color:"error",children:d})),g=="30"&&(s=(0,i.jsx)(T.Z,{icon:(0,i.jsx)(l.Z,{}),color:"success",children:d})),g=="new"&&(s=(0,i.jsx)(T.Z,{icon:(0,i.jsx)(R.Z,{}),children:d})),(g=="running"||g=="healthy"||g=="active"||g=="ready")&&(s=(0,i.jsx)(T.Z,{icon:(0,i.jsx)(h.Z,{}),color:"success",children:d})),(g=="paused"||g=="pause"||g=="rollback_paused")&&(s=(0,i.jsx)(T.Z,{icon:(0,i.jsx)(j.Z,{}),color:"warning",children:d})),(g=="waiting"||g=="starting"||g=="accepted")&&(s=(0,i.jsx)(T.Z,{icon:(0,i.jsx)(U.Z,{}),children:d})),["deploying","pending","allocated","accepted","assigned","preparing","updating","rollback_started"].includes(g)&&(s=(0,i.jsx)(T.Z,{icon:(0,i.jsx)(P.Z,{}),color:"processing",children:d})),(g=="error"||g=="down"||g=="failed")&&(s=(0,i.jsx)(T.Z,{icon:(0,i.jsx)(m.Z,{}),color:"error",children:d})),["complete","completed","rollback_completed"].includes(g)&&(s=(0,i.jsx)(T.Z,{icon:(0,i.jsx)(l.Z,{}),color:"success",children:d})),["exited","dead","removing","restarting","unhealthy","created","drain","unreachable","shutdown","rejected","remove","orphaned"].includes(g)&&(s=(0,i.jsx)(T.Z,{icon:(0,i.jsx)(m.Z,{}),color:"warning",children:d})),(0,i.jsx)(D.Z,{placement:"top",title:(f=a.tip)!==null&&f!==void 0?f:"",children:s})}},78451:function(q,$,e){e.d($,{Z:function(){return F}});var L=e(67294),n=e(85893);function F(o){var m;return(0,n.jsx)("span",{style:{width:o.width?o.width:"auto",wordBreak:"break-word"},children:(m=o.content)!==null&&m!==void 0?m:o.children})}},51100:function(q,$,e){e.d($,{Z:function(){return m}});var L=e(4813),n=e(91604),F=e(1677),o=e(85893);function m(l){return l.showDragger?(0,o.jsx)(n.Z,{max:l.max?l.max:1,title:l.title,label:l.label,required:l.required,rules:[{required:l.required}],fieldProps:{multiple:!!(l.max&&l.max>1),name:"file",accept:l.accept,action:"/dpanel/api/common/attach/upload",headers:{Authorization:"Bearer "+localStorage.getItem("token")},onRemove:function(h){return new Promise(function(j){var U;(0,L._)({path:(U=h.response.data.path)!==null&&U!==void 0?U:""}).then(function(P){j(!0)})})},onChange:function(h){h.file.status=="done"&&l.onFinish&&l.onFinish(h.fileList)}},name:l.name}):(0,o.jsx)(F.Z,{max:l.max?l.max:1,title:l.title,label:l.label,required:l.required,rules:[{required:l.required}],fieldProps:{multiple:!!(l.max&&l.max>1),name:"file",accept:l.accept,action:"/dpanel/api/common/attach/upload",headers:{Authorization:"Bearer "+localStorage.getItem("token")},onRemove:function(h){return new Promise(function(j){var U;(0,L._)({path:(U=h.response.data.path)!==null&&U!==void 0?U:""}).then(function(P){j(!0)})})},onChange:function(h){h.file.status=="done"&&l.onFinish&&l.onFinish(h.fileList)}},name:l.name})}},12323:function(q,$,e){e.d($,{X:function(){return L},n:function(){return n}});var L={convertEol:!0,fontFamily:'Menlo, Monaco, "Courier New", monospace',fontWeight:400,fontSize:16,lineHeight:1,cursorStyle:"block",cursorInactiveStyle:"outline",cursorBlink:!0,letterSpacing:0,theme:{foreground:"#bfbfbf",cursor:"gray",selectionForeground:"#ffffff"}},n=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"]},65913:function(q,$,e){var L=e(5574),n=e.n(L),F=e(74330),o=e(67294),m=e(85893),l=(0,o.forwardRef)(function(R,h){(0,o.useImperativeHandle)(h,function(){return{show:function(){T(!0)},destroy:function(){T(!1)}}});var j=(0,o.useState)(!1),U=n()(j,2),P=U[0],T=U[1];return(0,m.jsx)(F.Z,{spinning:P,size:"default",children:R.children})});$.Z=l},99430:function(q,$,e){e.r($),e.d($,{default:function(){return Ke}});var L=e(15009),n=e.n(L),F=e(97857),o=e.n(F),m=e(99289),l=e.n(m),R=e(74453),h=e(25593),j=e(42075),U=e(96074),P=e(83062),T=e(97841),D=e(94359),I=e(86548),i=e(87740),C=e(82061),a=e(80821),p=e(67294),f=e(5574),ee=e.n(f),N=e(38345),se=e(82346),ae=e(75544),g=e(3616),d=e(36146),s=e(85265),x=e(74330),H=e(38703),t=e(85893),ge=(0,p.forwardRef)(function(W,ie){var c=(0,se.useModel)("subscriber"),k=(0,p.useRef)(),z=(0,p.useState)(!1),y=ee()(z,2),u=y[0],S=y[1],X=(0,p.useState)(""),A=ee()(X,2),v=A[0],M=A[1],G=(0,p.useState)(0),E=ee()(G,2),r=E[0],_=E[1];return(0,p.useImperativeHandle)(ie,function(){return{start:function(){for(var Z=arguments.length,K=new Array(Z),B=0;B<Z;B++)K[B]=arguments[B];var ne=K.join(":");S(!0),_(0),M(ne),c.addDataHandler("image:"+ne,function(b){var Q;if(b.data.includes("Step")){var V=Array.from(b.data.matchAll(/Step\s+(\d+)\/(\d+)/g));if(V.length>0){var re=V[V.length-1],le=parseInt(re[1],10),J=parseInt(re[2],10);if(J>0&&le>=1&&le<=J){var ce=le/J*100;_(Math.round(ce))}}}(Q=k.current)===null||Q===void 0||Q.write(b.data)})},close:function(){var Z;(Z=k.current)===null||Z===void 0||Z.clear(),S(!1)},show:function(Z){S(!0),setTimeout(function(){var K,B;(K=k.current)===null||K===void 0||K.clear(),(B=k.current)===null||B===void 0||B.write(Z)},500)}}}),(0,t.jsx)(s.Z,{width:g.ob,destroyOnHidden:!0,title:d.FD.format("listLog"),afterOpenChange:function(Z){if(Z){var K,B;(K=k.current)===null||K===void 0||K.clear(),(B=k.current)===null||B===void 0||B.fit()}},onClose:function(){c.progress.close("image:"+v),S(!1),_(0),M(""),W.onFinish&&W.onFinish()},open:u,children:(0,t.jsx)(N.Z,{ghost:!0,children:(0,t.jsxs)(x.Z,{spinning:r==0,children:[(0,t.jsx)(H.Z,{strokeLinecap:"butt",percent:r,size:["100%",10],percentPosition:{align:"center",type:"inner"},format:function(){return null}}),(0,t.jsx)(ae.Z,{style:{fontSize:12},height:"85vh",ref:k})]})})})}),he=ge,fe=e(19632),oe=e.n(fe),de=e(91058),ve=e(11106),ue=e(62370),Ee=e(12491);function Oe(W){var ie=new d.Uo("image");return(0,t.jsx)(ue.Z,{shouldUpdate:!0,children:function(k){var z=k.getFieldValue,y=k.setFieldValue;return[(0,t.jsx)(ue.Z,{name:W.name,hidden:!0},"input"),(0,t.jsx)(Ee.Z,{title:ie.format("formBuildDockerfileContent"),onImport:function(S){return y(W.name,S),!0},onLoad:function(S){if(S.indexOf("FROM ")<0)throw new Error(d.FD.format("commonFileIncorrectFormat",{name:"Dockerfile"}));return!0}},"importFile"),(0,t.jsx)(ve.ZP,{value:z("buildDockerfileContent"),onChange:function(S){y(W.name,S)},height:"600px",theme:"dark",style:{marginBottom:"20px"}},"codeMirror")]}})}var ye=e(51100),Re=e(75870),te=e(5966),be=e(24739),Me=e(64317),Ce=e(86615),Ie=e(97462),je=e(90672),xe=e(83622),Be=e(27166),$e=e(22390),Ue=e(73813),Ae=e(68297),Ze=e(24963),Le=(0,p.forwardRef)(function(W,ie){var c=new d.Uo("image"),k=(0,p.useContext)(Ze.Z),z=k.message,y=(0,p.useRef)(),u=(0,p.useRef)(),S=(0,p.useState)(!1),X=ee()(S,2),A=X[0],v=X[1],M=(0,p.useRef)();return(0,p.useImperativeHandle)(ie,function(){return{show:function(E){return l()(n()().mark(function r(){var _,w,Z,K,B,ne,b,Q,V,re,le,J,ce,O,Y,De,me,_e,Pe;return n()().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:return v(!0),(_=M.current)===null||_===void 0||_.loading(),pe.next=4,(0,T.Xr)({id:E}).finally(function(){var Te;(Te=M.current)===null||Te===void 0||Te.finish()});case 4:O=pe.sent,(w=O.data.detail.setting)!==null&&w!==void 0&&w.buildGit&&(_e=O.data.detail.setting.buildGit,_e.includes("#")?(Pe=(0,$e.Z)(_e,"#"),Y=_e.slice(0,Pe),De=_e.slice(Pe+1)):Y=_e,Y.includes("@")&&(me=new URL(Y),me&&(Y="".concat(me.origin).concat(me.pathname)))),(Z=u.current)===null||Z===void 0||Z.setFieldsValue({id:O.data.detail.id,title:O.data.detail.title,imageTag:(K=O.data.detail.setting)===null||K===void 0?void 0:K.tag,imageRegistry:(B=O.data.detail.setting)===null||B===void 0?void 0:B.registry,buildType:(ne=O.data.detail.setting)===null||ne===void 0?void 0:ne.buildType,buildDockerfileRoot:(b=O.data.detail.setting)===null||b===void 0?void 0:b.buildDockerfileRoot,buildDockerfileContent:(Q=O.data.detail.setting)===null||Q===void 0?void 0:Q.buildDockerfileContent,buildDockerfileName:(V=O.data.detail.setting)===null||V===void 0?void 0:V.buildDockerfileName,buildGit:Y,buildGitBranch:De,buildGitUsername:(re=me)===null||re===void 0?void 0:re.username,buildGitPassword:(le=me)===null||le===void 0?void 0:le.password,buildArgs:(J=O.data.detail.setting)===null||J===void 0?void 0:J.buildArgs,platform:(ce=O.data.detail.setting)===null||ce===void 0?void 0:ce.platform});case 7:case"end":return pe.stop()}},r)}))()}}}),(0,t.jsx)(Be.Z,{drawerProps:{width:g.R_},ref:M,title:d.Ob.format("image.create"),open:A,onOpenChange:function(E){if(v(E),!E){var r;(r=u.current)===null||r===void 0||r.resetFields(),W.onFinish&&W.onFinish()}},trigger:(0,t.jsx)(xe.ZP,{type:"primary",children:d.Ob.format("image.create")},"create"),onFinish:function(){var G=l()(n()().mark(function E(r){var _,w,Z,K,B,ne,b,Q,V,re,le,J;return n()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(w=(_=r.buildType)!==null&&_!==void 0?_:"dockerfile",w!="containerTar"){O.next=7;break}return O.next=4,(0,Ue.Ck)({tag:r.imageTag,registry:r.imageRegistry,tar:(Z=r.containerTar[0].response.data.path)!==null&&Z!==void 0?Z:"",cmd:r.cmd,workDir:r.workDir,expose:r.expose?r.expose.split(`
`):[],env:r.env?r.env.split(`
`):[],volume:r.volume?r.volume.split(`
`):[]});case 4:return O.abrupt("return",!0);case 7:return ne={name:"",arch:""},Ae.ii.map(function(Y){Y.name==r.platform&&(ne=Y)}),b={id:r.id?parseInt(r.id):0,tag:r.imageTag,title:r.title,registry:r.imageRegistry,buildDockerfileContent:r.buildDockerfileContent,buildDockerfileRoot:r.buildDockerfileRoot,buildDockerfileName:r.buildDockerfileName,buildZip:"",buildGit:r.buildGit,buildType:r.buildType,buildArgs:r.buildArgs},r.buildZip&&r.buildZip.length>0&&(b.buildZip=(Q=r.buildZip[0].response.data.path)!==null&&Q!==void 0?Q:""),w=="git"&&(b.buildGit=b.buildGit+"#"+(r.buildGitBranch||"master"),r.buildDockerfileRoot&&r.buildDockerfileRoot!=""&&(b.buildGit="".concat(b.buildGit,":").concat(r.buildDockerfileRoot)),r.buildGitUsername&&r.buildGitPassword&&(V="https://",b.buildGit.includes("http://")&&(V="http://"),b.buildGit="".concat(b.buildGit.replace(V,"".concat(V).concat(r.buildGitUsername,":").concat(r.buildGitPassword,"@"))))),(K=y.current)===null||K===void 0||K.start("build",((B=b.id)!==null&&B!==void 0?B:0).toString()),O.prev=13,O.next=16,(0,T.l9)(b);case 16:return le=O.sent,z.success(d.FD.format("finish")),O.next=20,new Promise(function(Y){setTimeout(function(){Y(!0)},1e3)});case 20:return(re=y.current)===null||re===void 0||re.close(),O.abrupt("return",!0);case 24:O.prev=24,O.t0=O.catch(13),(J=y.current)===null||J===void 0||J.close();case 27:case"end":return O.stop()}},E,null,[[13,24]])}));return function(E){return G.apply(this,arguments)}}(),formRef:u,children:(0,t.jsxs)(N.Z,{direction:"column",ghost:!0,gutter:[0,10],children:[(0,t.jsxs)(N.Z,{ghost:!0,children:[(0,t.jsx)(ue.Z,{name:"id",hidden:!0}),(0,t.jsx)(te.Z,{width:"lg",label:c.format("formTitle"),name:"title"}),(0,t.jsxs)(be.UW,{children:[(0,t.jsx)(Me.Z,{width:"lg",label:c.format("formImageRegistry"),tooltip:c.format("formImageRegistryTip"),name:"imageRegistry",request:l()(n()().mark(function G(){var E;return n()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,Re.Ot)();case 2:return E=_.sent,_.abrupt("return",E.data.list.map(function(w){return{value:w.serverAddress,label:w.title+"("+w.serverAddress+")"}}));case 4:case"end":return _.stop()}},G)}))}),(0,t.jsx)(te.Z,{rules:[{required:!0}],width:"lg",required:!0,tooltip:c.format("formImageTagTip"),placeholder:c.format("formImageTagEmpty"),label:c.format("formImageTag"),name:"imageTag"})]}),(0,t.jsx)(Ce.Z.Group,{name:"buildType",initialValue:"dockerfile",label:c.format("formBuildType"),options:c.option("formBuildTypeOption",["dockerfile","zip","git","containerTar"]).map(function(G){return{label:(0,t.jsx)(P.Z,{title:c.format("formBuildTypeTipOption."+G.value),children:G.label}),value:G.value}})}),(0,t.jsx)(Ie.Z,{name:["buildType"],children:function(E){var r=E.buildType,_=[];return r=="containerTar"?_=[(0,t.jsx)(te.Z,{tooltip:c.format("formWorkDirTip"),label:c.format("formWorkDir"),name:"workDir",placeholder:c.format("formWorkDirEmpty")},"workDir"),(0,t.jsx)(te.Z,{required:!0,tooltip:c.format("formCmdTip"),rules:[{required:!0}],label:"CMD",name:"cmd"},"cmd"),(0,t.jsx)(je.Z,{tooltip:c.format("formExposeTip"),label:c.format("formExpose"),name:"expose",placeholder:`80 
9000`},"expose"),(0,t.jsx)(je.Z,{tooltip:c.format("formEnvTip"),label:c.format("formEnv"),name:"env",placeholder:`TEST_VALUE=123 
TEST_NO_VALUE=`},"env"),(0,t.jsx)(je.Z,{tooltip:c.format("formVolumeTip"),label:c.format("formVolume"),name:"volume",placeholder:`/app 
/home`},"volume")]:(r=="zip"||r=="git")&&(_=[(0,t.jsxs)(be.UW,{children:[(0,t.jsx)(te.Z,{width:"lg",name:"buildDockerfileRoot",label:c.format("formBuildDockerfileRoot"),fieldProps:{addonBefore:"/"},placeholder:c.format("formBuildDockerfileRootEmpty")},"buildDockerfileRoot"),(0,t.jsx)(te.Z,{width:"lg",name:"buildDockerfileName",label:c.format("formBuildDockerfileName"),placeholder:c.format("formBuildDockerfileNameEmpty")},"dockerfileName")]},"buildRoot"),(0,t.jsx)(de.Z,{drawerProps:{ghost:!0},name:"buildArgs",showAddButton:!0,showCodeMode:!0,listLabel:c.format("formBuildArgs")},"env")]),r=="zip"&&(_=[].concat(oe()(_),[(0,t.jsx)(ye.Z,{required:!0,label:c.format("formBuildZip"),name:"buildZip",accept:".zip"},"buildZip")])),r=="containerTar"&&(_=[].concat(oe()(_),[(0,t.jsx)(ye.Z,{required:!0,label:c.format("formBuildContainerTar"),name:"containerTar",accept:".tar"},"containerTar")])),r=="git"&&(_=[].concat(oe()(_),[(0,t.jsxs)(be.UW,{children:[(0,t.jsxs)(j.Z.Compact,{block:!0,children:[(0,t.jsx)(te.Z,{width:"md",label:c.format("formBuildGitUsername"),name:"buildGitUsername",placeholder:c.format("formBuildGitUsernameEmpty")}),(0,t.jsx)(te.Z,{width:"md",label:c.format("formBuildGitPassword"),name:"buildGitPassword"})]}),(0,t.jsxs)(j.Z.Compact,{block:!0,children:[(0,t.jsx)(te.Z,{label:c.format("formBuildGitBranch"),width:"md",name:"buildGitBranch"}),(0,t.jsx)(te.Z,{fieldProps:{min:2,max:255},rules:[{required:!0}],width:"lg",required:!0,placeholder:c.format("formBuildGitEmpty"),label:c.format("formBuildGit"),name:"buildGit"})]})]},"buildGit")])),r=="dockerfile"&&(_=[].concat(oe()(_),[(0,t.jsx)(Oe,{name:"buildDockerfileContent"},"buildDockerfileContent")])),_}})]}),(0,t.jsx)(he,{onFinish:function(){v(!1),W.onFinish&&W.onFinish()},ref:y})]})})}),We=Le,we=e(98510),Se=e(1584);function Ke(){var W=(0,p.useRef)(),ie=(0,p.useRef)(),c=(0,p.useRef)(),k=(0,p.useRef)();return(0,t.jsxs)(R._z,{header:{extra:[(0,t.jsx)(We,{ref:c,onFinish:function(){var y;!((y=W.current)===null||y===void 0)&&y.reloadAndRest&&W.current.reloadAndRest()}},"create")]},children:[(0,t.jsx)(Se.Z,{ref:k}),(0,t.jsx)(we.C,{actionRef:W,rowKey:"id",columns:[{title:d.FD.format("listTitle"),render:function(y,u,S,X){return u.title}},{title:d.FD.format("listImageName"),dataIndex:"tag",search:!1,render:function(y,u,S,X){var A,v,M;return(0,t.jsx)(h.Z.Link,{type:!((A=u.setting)!==null&&A!==void 0&&A.imageId)||u.setting.imageId==""?"secondary":void 0,onClick:function(){var E,r,_;!((E=u.setting)===null||E===void 0)&&E.imageId&&((r=k.current)===null||r===void 0||r.show((_=u.setting)===null||_===void 0?void 0:_.imageId))},children:(v=(M=u.setting)===null||M===void 0?void 0:M.tag)!==null&&v!==void 0?v:u.tag})}},{title:d.FD.format("listStatus"),width:150,ellipsis:!0,search:!1,render:function(y,u,S,X){var A;return(A=u.setting)!==null&&A!==void 0&&A.imageId||(u.status=0),[(0,t.jsx)("div",{children:(0,t.jsx)(D.Z,{status:"status.".concat(u.status)},u.id)},u.id)]}},{title:d.FD.format("listManage"),valueType:"option",key:"option",width:100,fixed:"right",render:function(y,u,S,X){return(0,t.jsxs)(j.Z,{split:(0,t.jsx)(U.Z,{type:"vertical"}),children:[(0,t.jsx)(h.Z.Link,{onClick:function(){var v;u.id&&((v=c.current)===null||v===void 0||v.show(u.id))},children:(0,t.jsx)(P.Z,{title:d.FD.format("listManageEdit"),children:(0,t.jsx)(I.Z,{})})},"rebuild"),(0,t.jsx)(h.Z.Link,{onClick:l()(n()().mark(function A(){var v,M,G,E,r,_,w,Z,K,B;return n()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return(v=ie.current)===null||v===void 0||v.start("build",((M=u.id)!==null&&M!==void 0?M:0).toString()),b.prev=1,b.next=4,(0,T.l9)(o()(o()({id:u.id,title:u.title},u.setting),{},{buildDockerfileContent:((G=u.setting)===null||G===void 0?void 0:G.buildDockerfileContent)||((E=u.setting)===null||E===void 0?void 0:E.buildDockerfile),buildDockerfileRoot:((r=u.setting)===null||r===void 0?void 0:r.buildDockerfileRoot)||((_=u.setting)===null||_===void 0?void 0:_.buildRoot),buildType:((w=u.setting)===null||w===void 0?void 0:w.buildType)||u.buildType,tag:((Z=u.setting)===null||Z===void 0?void 0:Z.tag)||u.tag}));case 4:return K=b.sent,b.abrupt("return",!0);case 8:b.prev=8,b.t0=b.catch(1),(B=ie.current)===null||B===void 0||B.close();case 11:case"end":return b.stop()}},A,null,[[1,8]])})),children:(0,t.jsx)(P.Z,{title:d.FD.format("listManageBuild"),children:(0,t.jsx)(i.Z,{})})},"logs")]})}}],request:function(){var z=l()(n()().mark(function y(u,S,X){var A,v,M;return n()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,(0,T.bJ)({page:(A=u.current)!==null&&A!==void 0?A:1,pageSize:(v=u.pageSize)!==null&&v!==void 0?v:10});case 2:return M=E.sent,E.abrupt("return",{data:M.data.list,success:!0,total:M.data.list.length});case 4:case"end":return E.stop()}},y)}));return function(y,u,S){return z.apply(this,arguments)}}(),quickToolbarRender:function(y){var u=y.selectedRows,S=y.finish,X=y.loading;return(0,t.jsx)(j.Z,{size:16,children:(0,t.jsx)(a.Z,{buttonProps:{danger:!0,type:"primary",icon:(0,t.jsx)(C.Z,{})},confirmProps:{showCommonConfirm:!0},action:function(){return X(),(0,T.hf)({id:u.map(function(v){return v.id})}).finally(function(){S(!0)})},onSuccess:function(){var v,M;return!((v=W.current)===null||v===void 0)&&v.reloadAndRest&&((M=W.current)===null||M===void 0||M.reloadAndRest()),!0},onError:function(){var v,M;return!((v=W.current)===null||v===void 0)&&v.reset&&((M=W.current)===null||M===void 0||M.reset()),!0},children:d.FD.format("listManageDeleteBatch")})})}}),(0,t.jsx)(he,{onFinish:function(){var y;!((y=W.current)===null||y===void 0)&&y.reloadAndRest&&W.current.reloadAndRest()},ref:ie})]})}},4813:function(q,$,e){e.d($,{_:function(){return l}});var L=e(15009),n=e.n(L),F=e(99289),o=e.n(F),m=e(82346);function l(h){return R.apply(this,arguments)}function R(){return R=o()(n()().mark(function h(j){return n()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,(0,m.request)("/dpanel/api/common/attach/delete",{method:"POST",data:j});case 2:return P.abrupt("return",P.sent);case 3:case"end":return P.stop()}},h)})),R.apply(this,arguments)}},97841:function(q,$,e){e.d($,{Xr:function(){return T},bJ:function(){return U},c5:function(){return I},hf:function(){return l},l9:function(){return h}});var L=e(15009),n=e.n(L),F=e(99289),o=e.n(F),m=e(82346);function l(C){return R.apply(this,arguments)}function R(){return R=o()(n()().mark(function C(a){return n()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,(0,m.request)("/dpanel/api/app/image-build/delete",{method:"POST",data:a});case 2:return f.abrupt("return",f.sent);case 3:case"end":return f.stop()}},C)})),R.apply(this,arguments)}function h(C){return j.apply(this,arguments)}function j(){return j=o()(n()().mark(function C(a){return n()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",(0,m.request)("/dpanel/api/app/image-build/create",{method:"POST",data:a}));case 1:case"end":return f.stop()}},C)})),j.apply(this,arguments)}function U(C){return P.apply(this,arguments)}function P(){return P=o()(n()().mark(function C(a){return n()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.abrupt("return",(0,m.request)("/dpanel/api/app/image-build/get-list",{method:"POST",data:a}));case 1:case"end":return f.stop()}},C)})),P.apply(this,arguments)}function T(C){return D.apply(this,arguments)}function D(){return D=o()(n()().mark(function C(a){return n()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,(0,m.request)("/dpanel/api/app/image-build/get-detail",{method:"POST",data:a});case 2:return f.abrupt("return",f.sent);case 3:case"end":return f.stop()}},C)})),D.apply(this,arguments)}function I(){return i.apply(this,arguments)}function i(){return i=o()(n()().mark(function C(){return n()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,(0,m.request)("/dpanel/api/app/image-build/prune",{method:"POST"});case 2:return p.abrupt("return",p.sent);case 3:case"end":return p.stop()}},C)})),i.apply(this,arguments)}},73813:function(q,$,e){e.d($,{Ck:function(){return l},Fj:function(){return C},GH:function(){return h},KG:function(){return T},Rb:function(){return ee},Xz:function(){return U},YU:function(){return p},ZQ:function(){return se},ao:function(){return I},cD:function(){return g}});var L=e(15009),n=e.n(L),F=e(99289),o=e.n(F),m=e(82346);function l(s){return R.apply(this,arguments)}function R(){return R=o()(n()().mark(function s(x){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,m.request)("/dpanel/api/app/image/import-by-container-tar",{method:"POST",data:x}));case 1:case"end":return t.stop()}},s)})),R.apply(this,arguments)}function h(s){return j.apply(this,arguments)}function j(){return j=o()(n()().mark(function s(x){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,m.request)("/dpanel/api/app/image/import-by-image-tar",{method:"POST",data:x}));case 1:case"end":return t.stop()}},s)})),j.apply(this,arguments)}function U(s){return P.apply(this,arguments)}function P(){return P=o()(n()().mark(function s(x){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,m.request)("/dpanel/api/app/image/prune",{method:"POST"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},s)})),P.apply(this,arguments)}function T(s){return D.apply(this,arguments)}function D(){return D=o()(n()().mark(function s(x){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,m.request)("/dpanel/api/app/image/get-list",{method:"POST",data:x}));case 1:case"end":return t.stop()}},s)})),D.apply(this,arguments)}function I(s){return i.apply(this,arguments)}function i(){return i=o()(n()().mark(function s(x){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,m.request)("/dpanel/api/app/image/delete",{method:"POST",data:x});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},s)})),i.apply(this,arguments)}function C(s){return a.apply(this,arguments)}function a(){return a=o()(n()().mark(function s(x){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,m.request)("/dpanel/api/app/image/update-title",{method:"POST",data:x});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},s)})),a.apply(this,arguments)}function p(s){return f.apply(this,arguments)}function f(){return f=o()(n()().mark(function s(x){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,m.request)("/dpanel/api/app/image/get-detail",{method:"POST",data:x}));case 1:case"end":return t.stop()}},s)})),f.apply(this,arguments)}function ee(s){return N.apply(this,arguments)}function N(){return N=o()(n()().mark(function s(x){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!x.enableExportToPath){t.next=2;break}return t.abrupt("return",(0,m.request)("/dpanel/api/app/image/export",{method:"POST",data:x}));case 2:return t.abrupt("return",new Promise(function(ge,he){var fe,oe=localStorage.getItem("token"),de=new URLSearchParams;de.append("token",oe||""),x.md5&&x.md5.forEach(function(Ee){de.append("md5",Ee)}),de.append("enableExportToPath",String((fe=x.enableExportToPath)!==null&&fe!==void 0?fe:!1));var ve="/dpanel/api/app/image/export?".concat(de.toString()),ue=document.createElement("iframe");ue.style.display="none",ue.src=ve,document.body.appendChild(ue),ge({code:200,data:"success",error:""})}));case 3:case"end":return t.stop()}},s)})),N.apply(this,arguments)}function se(s){return ae.apply(this,arguments)}function ae(){return ae=o()(n()().mark(function s(x){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,m.request)("/dpanel/api/app/image/check-upgrade",{method:"POST",data:x}));case 1:case"end":return t.stop()}},s)})),ae.apply(this,arguments)}function g(s){return d.apply(this,arguments)}function d(){return d=o()(n()().mark(function s(x){return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,m.request)("/dpanel/api/pro/image/get-rootfs",{method:"POST",data:x}));case 1:case"end":return t.stop()}},s)})),d.apply(this,arguments)}},75870:function(q,$,e){e.d($,{Ot:function(){return l},ZH:function(){return h},ix:function(){return U},t1:function(){return T}});var L=e(15009),n=e.n(L),F=e(99289),o=e.n(F),m=e(82346);function l(I){return R.apply(this,arguments)}function R(){return R=o()(n()().mark(function I(i){return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,m.request)("/dpanel/api/common/registry/get-list",{method:"POST",data:i}));case 1:case"end":return a.stop()}},I)})),R.apply(this,arguments)}function h(I){return j.apply(this,arguments)}function j(){return j=o()(n()().mark(function I(i){return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,m.request)("/dpanel/api/common/registry/create",{method:"POST",data:i}));case 1:case"end":return a.stop()}},I)})),j.apply(this,arguments)}function U(I){return P.apply(this,arguments)}function P(){return P=o()(n()().mark(function I(i){return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,m.request)("/dpanel/api/common/registry/delete",{method:"POST",data:i}));case 1:case"end":return a.stop()}},I)})),P.apply(this,arguments)}function T(I){return D.apply(this,arguments)}function D(){return D=o()(n()().mark(function I(i){return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,m.request)("/dpanel/api/common/registry/get-detail",{method:"POST",data:i}));case 1:case"end":return a.stop()}},I)})),D.apply(this,arguments)}}}]);
