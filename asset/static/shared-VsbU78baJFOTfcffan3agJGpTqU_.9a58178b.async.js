"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[352],{26522:function(Ue,pe,t){t.d(pe,{Z:function(){return ve}});var je=t(87462),y=t(67294),xe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908 640H804V488c0-4.4-3.6-8-8-8H548v-96h108c8.8 0 16-7.2 16-16V80c0-8.8-7.2-16-16-16H368c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h108v96H228c-4.4 0-8 3.6-8 8v152H116c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h288c8.8 0 16-7.2 16-16V656c0-8.8-7.2-16-16-16H292v-88h440v88H620c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h288c8.8 0 16-7.2 16-16V656c0-8.8-7.2-16-16-16zm-564 76v168H176V716h168zm84-408V140h168v168H428zm420 576H680V716h168v168z"}}]},name:"apartment",theme:"outlined"},a=xe,ce=t(84089),g=function(k,w){return y.createElement(ce.Z,(0,je.Z)({},k,{ref:w,icon:a}))},o=y.forwardRef(g),ve=o},16596:function(Ue,pe,t){t.d(pe,{Z:function(){return ve}});var je=t(87462),y=t(67294),xe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M518.3 459a8 8 0 00-12.6 0l-112 141.7a7.98 7.98 0 006.3 12.9h73.9V856c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V613.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 459z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-upload",theme:"outlined"},a=xe,ce=t(84089),g=function(k,w){return y.createElement(ce.Z,(0,je.Z)({},k,{ref:w,icon:a}))},o=y.forwardRef(g),ve=o},40666:function(Ue,pe,t){t.d(pe,{Z:function(){return ve}});var je=t(87462),y=t(67294),xe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M938 458.8l-29.6-312.6c-1.5-16.2-14.4-29-30.6-30.6L565.2 86h-.4c-3.2 0-5.7 1-7.6 2.9L88.9 557.2a9.96 9.96 0 000 14.1l363.8 363.8c1.9 1.9 4.4 2.9 7.1 2.9s5.2-1 7.1-2.9l468.3-468.3c2-2.1 3-5 2.8-8zM459.7 834.7L189.3 564.3 589 164.6 836 188l23.4 247-399.7 399.7zM680 256c-48.5 0-88 39.5-88 88s39.5 88 88 88 88-39.5 88-88-39.5-88-88-88zm0 120c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"}}]},name:"tag",theme:"outlined"},a=xe,ce=t(84089),g=function(k,w){return y.createElement(ce.Z,(0,je.Z)({},k,{ref:w,icon:a}))},o=y.forwardRef(g),ve=o},8287:function(Ue,pe,t){var je=t(5574),y=t.n(je),xe=t(15009),a=t.n(xe),ce=t(99289),g=t.n(ce),o=t(13822),ve=t(83622),W=t(85265),k=t(23345),w=t(83062),$=t(67294),fe=t(81146),K=t(1883),ye=t(58638),Oe=t(62597),S=t(3616),L=t(63713),Re=t(36146),be=t(85893),le=(0,$.forwardRef)(function(Ce,F){(0,$.useImperativeHandle)(F,function(){return{show:function(re){return g()(a()().mark(function l(){var ne;return a()().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return ue.next=2,(0,o.jV)({md5:re});case 2:ne=ue.sent,ne.data&&Te(ne.data.info),se(!0);case 5:case"end":return ue.stop()}},l)}))()}}});var b=(0,$.useState)(!1),e=y()(b,2),Ne=e[0],se=e[1],we=(0,$.useState)(),Fe=y()(we,2),N=Fe[0],Te=Fe[1],Ze=(0,$.useRef)(),Ee=new Re.Uo("components.appDetail");return(0,be.jsxs)(be.Fragment,{children:[Ce.showTriggerButton&&(0,be.jsx)(ve.ZP,{icon:(0,be.jsx)(K.Z,{}),onClick:g()(a()().mark(function Ie(){return a()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:Te(Ce.containerInfo),se(!0);case 2:case"end":return l.stop()}},Ie)})),children:Re.FD.format("listManageLog")},"log"),(0,be.jsx)(W.Z,{title:Ee.format("titleLog"),open:Ne,forceRender:!0,onClose:function(){se(!1)},afterOpenChange:function(re){if(re)setTimeout(function(){var ne,me;(ne=Ze.current)===null||ne===void 0||ne.start(),(me=Ze.current)===null||me===void 0||me.fit()},1e3);else{var l;(l=Ze.current)===null||l===void 0||l.close()}},width:S.FK,extra:(0,be.jsx)(k.Z,{children:(0,be.jsx)(L.Link,{to:"/container/log/".concat(N==null?void 0:N.Name),target:"_blank",onClick:function(){var re;(re=Ze.current)===null||re===void 0||re.close(),se(!1)},children:(0,be.jsx)(w.Z,{title:Re.FD.format("listManageOpenNewWindow"),children:(0,be.jsx)(ye.Z,{})})})}),children:N&&Ne&&(0,be.jsx)(fe.Z,{ref:Ze,showInDrawer:!0,id:"container:log:".concat(N==null?void 0:N.Id),request:function(){var Ie=g()(a()().mark(function re(l){var ne;return a()().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return ue.next=2,(0,Oe.Tb)({id:(ne=N.Id)!==null&&ne!==void 0?ne:"",lineTotal:l.lineTotal,download:l.download,showTime:l.showTime});case 2:case"end":return ue.stop()}},re)}));return function(re){return Ie.apply(this,arguments)}}(),download:function(){var Ie=g()(a()().mark(function re(l){var ne,me,ue,ke;return a()().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:return he.next=2,(0,Oe.XH)({id:(ne=N.Id)!==null&&ne!==void 0?ne:"",lineTotal:l.lineTotal,showTime:l.showTime});case 2:return ue=he.sent,he.next=5,(0,o.jV)({md5:(me=N.Id)!==null&&me!==void 0?me:""});case 5:return ke=he.sent,he.abrupt("return",{data:new Blob([ue],{type:"text/plain"}),name:ke.data.info.Name.replaceAll("/","")+"_"+new Date().toLocaleDateString()+".log"});case 7:case"end":return he.stop()}},re)}));return function(re){return Ie.apply(this,arguments)}}()})})]})});pe.Z=le},41477:function(Ue,pe,t){t.d(pe,{Z:function(){return hn}});var je=t(5574),y=t.n(je),xe=t(15009),a=t.n(xe),ce=t(99289),g=t.n(ce),o=t(67294),ve=t(45605),W=t(38345),k=t(97269),w=t(26412),$=t(23345),fe=t(96074),K=t(25593),ye=t(2487),Oe=t(76428),S=t(44771),L=t(13822),Re=t(24963),be=t(89638),le=t(5251),Ce=t(63713),F=t(87662),b=t(36146),e=t(85893);function Ne(n){var C,r,i,j,E,p,u,m,h,I,d,Z=new b.Uo("components.appDetail"),P=(0,o.useState)(""),x=y()(P,2),J=x[0],T=x[1],M=(0,Ce.useAccess)(),D=(0,o.useContext)(Re.Z),de=D.message,ie=(0,o.useRef)(),c=[],oe=[],$e=[],He=(0,o.useState)(""),U=y()(He,2),f=U[0],R=U[1];return(0,o.useEffect)(function(){n.data&&((0,F.K3)().then(function(s){var v;R((v=s.data.serverUrl)!==null&&v!==void 0?v:"")}),T(n.data.info.Name))},[n.data]),(0,o.useEffect)(function(){var s,v,A;(s=ie.current)===null||s===void 0||s.setFieldValue("restart",{name:(v=n.data.info.HostConfig)===null||v===void 0?void 0:v.RestartPolicy.Name,maxAccept:(A=n.data.info.HostConfig)===null||A===void 0?void 0:A.RestartPolicy.MaximumRetryCount})},[ie.current,n.data]),n.data&&n.data.domain&&n.data.domain.map(function(s){$e.push(s.setting.enableSSL?"https://"+s.serverName:"http://"+s.serverName)}),n.data.info.NetworkSettings.Ports&&Object.entries(n.data.info.NetworkSettings.Ports).forEach(function(s){var v=y()(s,2),A=v[0],O=v[1];if(O){var X=A.split("/"),ee=y()(X,2),te=ee[0],Me=ee[1];O.forEach(function(it){it.HostPort?c.push({PrivatePort:te,Type:Me,IP:it.HostIp,PublicPort:it.HostPort}):oe.push({PrivatePort:te,Type:Me,IP:"",PublicPort:""})})}}),(0,e.jsxs)(e.Fragment,{children:[n.data&&n.data.info.State.Running&&(0,e.jsx)(be.Z,{publicPort:c,privatePort:oe,domain:$e,serverIp:f,showInDetail:!0,ghost:n.ghost,layout:"inline"}),(0,e.jsx)(W.Z,{title:(0,e.jsx)(ve.Z,{}),subTitle:Z.format("titleBasic"),ghost:n.ghost,children:(0,e.jsxs)(w.Z,{column:1,bordered:!0,children:[(0,e.jsx)(w.Z.Item,{label:"Hostname",children:(0,e.jsx)($.Z,{split:(0,e.jsx)(fe.Z,{type:"vertical"}),children:(0,e.jsx)(Oe.Z,{title:(C=n.data.info)===null||C===void 0?void 0:C.Config.Hostname})})}),(0,e.jsx)(w.Z.Item,{label:b.FD.format("listName"),children:(0,e.jsxs)($.Z,{split:(0,e.jsx)(fe.Z,{type:"vertical"}),children:[(0,e.jsx)(Oe.Z,{title:(r=n.data.info)===null||r===void 0?void 0:r.Id.substring(0,12)}),(0,e.jsx)(K.Z.Text,{copyable:!0,editable:{tooltip:b.FD.format("listManageEdit"),onChange:function(){var s=g()(a()().mark(function A(O){var X;return a()().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:if((X=n.data.info)!==null&&X!==void 0&&X.Id){te.next=2;break}return te.abrupt("return");case 2:return te.next=4,(0,L.eE)({md5:n.data.info.Id,name:O});case 4:T(O),de.success(b.FD.format("finish"));case 6:case"end":return te.stop()}},A)}));function v(A){return s.apply(this,arguments)}return v}()},children:(0,le.fi)(J,"/")})]})}),(0,e.jsx)(w.Z.Item,{label:b.FD.format("listNetwork"),children:((i=n.data.info)===null||i===void 0?void 0:i.State.Running)&&(0,e.jsxs)(w.Z,{column:1,bordered:!0,children:[n.data.info.NetworkSettings.Networks&&Object.keys(n.data.info.NetworkSettings.Networks).map(function(s,v){var A,O,X;return(0,e.jsx)(w.Z.Item,{label:s,children:s=="host"?b.FD.format("listNetworkUseHost"):(0,e.jsxs)($.Z,{direction:"vertical",children:[(0,e.jsx)(Oe.Z,{title:(A=n.data.info)===null||A===void 0?void 0:A.NetworkSettings.Networks[s].IPAddress}),(O=n.data.info)===null||O===void 0?void 0:O.NetworkSettings.Networks[s].Gateway,(X=n.data.info)===null||X===void 0?void 0:X.NetworkSettings.Networks[s].MacAddress]})},v)}),((j=n.data.info.HostConfig)===null||j===void 0?void 0:j.ExtraHosts)&&(0,e.jsx)(w.Z.Item,{label:b.FD.format("listNetworkUseHost"),children:(0,e.jsx)($.Z,{direction:"vertical",children:n.data.info.HostConfig.ExtraHosts.map(function(s,v){if(s.indexOf(":")>-1){var A=s.split(":");return"".concat(A[0]," - ").concat(A.slice(1).join(":"))}})})},"host")]})}),(0,e.jsx)(w.Z.Item,{label:b.FD.format("listRunTime"),children:Z.format("runTimeValue",{create:new Date((E=(p=n.data.info)===null||p===void 0?void 0:p.Created)!==null&&E!==void 0?E:"").toLocaleString(),upgrade:new Date((u=(m=n.data.info)===null||m===void 0?void 0:m.State.StartedAt)!==null&&u!==void 0?u:"").toLocaleString()})}),M.canSeeContainerListManage&&(0,e.jsx)(w.Z.Item,{label:b.FD.format("listRestartPolicy"),children:(0,e.jsx)(k.A,{name:"container-restart",submitter:!1,onValuesChange:function(){var s=g()(a()().mark(function v(A,O){var X,ee;return a()().wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:if((X=n.data.info)!==null&&X!==void 0&&X.Id){Me.next=2;break}return Me.abrupt("return");case 2:return Me.next=4,(0,L.eE)({md5:n.data.info.Id,restart:O.restart});case 4:return ee=Me.sent,de.success(b.FD.format("finish")),Me.abrupt("return");case 7:case"end":return Me.stop()}},v)}));return function(v,A){return s.apply(this,arguments)}}(),layout:"inline",formRef:ie,children:(0,e.jsx)(S.Z,{ghost:!0,defaultValue:(h=n.data.info)===null||h===void 0||(h=h.HostConfig)===null||h===void 0?void 0:h.RestartPolicy.Name})})}),(0,e.jsx)(w.Z.Item,{label:b.FD.format("listEnv"),children:(0,e.jsx)(ye.Z,{dataSource:(I=(d=n.data.info)===null||d===void 0?void 0:d.Config.Env)!==null&&I!==void 0?I:[],renderItem:function(v){var A=v.split("=");return(0,e.jsxs)(ye.Z.Item,{children:[(0,e.jsx)(K.Z.Text,{code:!0,children:A[0]})," = ",(0,e.jsx)(K.Z.Text,{copyable:!0,children:A.slice(1).join("=")})]})}})})]})})]})}var se=t(60433),we=t(85265),Fe=t(86250),N=t(87462),Te=t(97211),Ze=t(84089),Ee=function(C,r){return o.createElement(Ze.Z,(0,N.Z)({},C,{ref:r,icon:Te.Z}))},Ie=o.forwardRef(Ee),re=Ie;function l(n){var C,r=new b.Uo("components.appDetail");return n.data&&n.data.Mounts&&n.data.Mounts.length>0&&(0,e.jsx)(W.Z,{ghost:n.ghost,title:(0,e.jsx)(re,{}),subTitle:r.format("titleVolume"),children:(0,e.jsx)(w.Z,{column:1,bordered:!0,children:(C=n.data)===null||C===void 0?void 0:C.Mounts.map(function(i,j){return(0,e.jsx)(w.Z.Item,{styles:{label:{width:"50%",wordBreak:"break-word"},content:{width:"50%",wordBreak:"break-word"}},label:i.Type=="volume"?i.Name:i.Source,children:i.Destination},j)})})})}var ne=t(43425),me=t(74842),ue=t(33160),ke=t(87784),Ae=t(30159),he=t(89035),H=t(95591),_e=t(83622),Y=t(10781),G=t(80821),Pe=t(99922),ge=t(96486),De=t.n(ge),z=t(69033),V=t(8287),B=(0,o.createContext)({}),q=B,ae=t(19632),Q=t.n(ae),_=t(3616),Se=t(12122),Le=t(60940),Be=t(27619);function Ge(n){return Xe.apply(this,arguments)}function Xe(){return Xe=g()(a()().mark(function n(C){return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,Ce.request)("/dpanel/api/app/container/get-stat-info",{method:"POST",data:C}));case 1:case"end":return i.stop()}},n)})),Xe.apply(this,arguments)}function dt(n){return qe.apply(this,arguments)}function qe(){return qe=g()(a()().mark(function n(C){return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,Ce.request)("/dpanel/api/app/container/get-process-info",{method:"POST",data:C}));case 1:case"end":return i.stop()}},n)})),qe.apply(this,arguments)}var et={total:0,memory:{usage:[{name:"use",data:[]},{name:"all",show:!1,data:[]}],source:{usage:0,limit:0}},cpu:{usage:[{name:"use",data:[]}],source:{usage:0,limit:0}},network:{usage:[{name:"rx",data:[]},{name:"tx",data:[]}],source:{usageIn:0,usageOut:0}},io:{usage:[{name:"read",data:[]},{name:"write",data:[]}],source:{usageRead:0,usageWrite:0}}},ct=function(C,r){var i,j,E;switch(r.type){case"clear":return et;case"update":var p=new Date().toLocaleTimeString(),u=JSON.parse(JSON.stringify(et));return(i=r.payload)!==null&&i!==void 0&&i.memory&&(u.memory.usage=[{name:"use",data:[].concat(Q()(C.memory.usage[0].data.slice(-20)),[{date:p,value:Math.round(r.payload.memory.in)}])},{name:"all",show:!1,data:[].concat(Q()(C.memory.usage[1].data.slice(-20)),[{date:p,value:Math.round(r.payload.memory.out)}])}],u.memory.source={usage:r.payload.memory.in,limit:r.payload.memory.out},u.cpu.usage=[{name:"use",data:[].concat(Q()(C.cpu.usage[0].data.slice(-20)),[{date:p,value:r.payload.cpu.toFixed(2)}])}],u.cpu.source={usage:r.payload.cpu,limit:100}),(j=r.payload)!==null&&j!==void 0&&j.networkIO&&(u.network.source={usageIn:parseFloat(r.payload.networkIO.in.toFixed(2)),usageOut:parseFloat(r.payload.networkIO.out.toFixed(2))},u.network.usage=[{name:"rx",data:[].concat(Q()(C.network.usage[0].data.slice(-20)),[{date:p,value:r.payload.networkIO.out.toFixed(2)}])},{name:"tx",data:[].concat(Q()(C.network.usage[1].data.slice(-20)),[{date:p,value:r.payload.networkIO.in.toFixed(2)}])}]),(E=r.payload)!==null&&E!==void 0&&E.blockIO&&(u.io.source={usageRead:parseFloat(r.payload.blockIO.out.toFixed(2)),usageWrite:parseFloat(r.payload.blockIO.in.toFixed(2))},u.io.usage=[{name:"read",data:[].concat(Q()(C.io.usage[0].data.slice(-20)),[{date:p,value:r.payload.blockIO.out.toFixed(2)}])},{name:"write",data:[].concat(Q()(C.io.usage[1].data.slice(-20)),[{date:p,value:r.payload.blockIO.in.toFixed(2)}])}]),u}},ft=(0,o.forwardRef)(function(n,C){var r=(0,o.useState)(!1),i=y()(r,2),j=i[0],E=i[1],p=(0,o.useReducer)(ct,et),u=y()(p,2),m=u[0],h=u[1],I=(0,o.useState)(),d=y()(I,2),Z=d[0],P=d[1],x=(0,o.useContext)(Re.Z),J=x.loading,T=(0,Ce.useModel)("subscriber"),M=new b.Uo("components.appDetail");(0,o.useImperativeHandle)(C,function(){return{}});function D(ie){return de.apply(this,arguments)}function de(){return de=g()(a()().mark(function ie(c){var oe,$e;return a()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return J.show(),Ge({id:c}),U.next=4,dt({id:c});case 4:oe=U.sent,$e={columns:[],data:[]},oe.data.list.Titles.map(function(f){$e.columns.push({title:f,label:f,dataIndex:f})}),oe.data.list.Processes.map(function(f,R){$e.data.push({UID:f[0],PID:f[1],PPID:f[2],C:f[3],STIME:f[4],TTY:f[5],TIME:f[6],CMD:f[7]})}),P($e),J.destroy();case 10:case"end":return U.stop()}},ie)})),de.apply(this,arguments)}return(0,o.useEffect)(function(){return function(){T.progress.close("container:stat:"+n.containerInfo.Id),h({type:"clear",payload:{}})}},[n.containerInfo]),(0,e.jsxs)(e.Fragment,{children:[n.showTriggerButton&&(0,e.jsx)(_e.ZP,{onClick:g()(a()().mark(function ie(){return a()().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:E(!0);case 1:case"end":return oe.stop()}},ie)})),icon:(0,e.jsx)(Se.Z,{}),children:b.FD.format("listManageStat")},"log"),(0,e.jsxs)(we.Z,{title:M.format("titleStat"),open:j,onClose:function(){E(!1)},afterOpenChange:function(c){c?setTimeout(function(){var oe;!((oe=n.containerInfo)===null||oe===void 0)&&oe.Name&&D(n.containerInfo.Id),T.addDataHandler("container:stat:".concat(n.containerInfo.Id),function($e){h({type:"update",payload:$e.data})})},500):(T.progress.close("container:stat:"+n.containerInfo.Id),h({type:"clear"}))},width:_.R_,children:[(0,e.jsxs)(W.Z,{ghost:!0,direction:"row",wrap:!0,gutter:[20,20],children:[m.memory&&m.memory.source&&(0,e.jsx)(W.Z,{colSpan:12,title:(0,e.jsx)(Se.Z,{}),subTitle:"Memory usage: ".concat((0,le.FI)(m.memory.source.usage)," / ").concat((0,le.FI)(m.memory.source.limit)),headerBordered:!0,bordered:!0,children:(0,e.jsx)(Be.Z,{name:"container-memory",data:m.memory.usage,yLabelFormatter:function(c){return(0,le.FI)(parseFloat(c))},yValueFormatter:function(c){return(0,le.FI)(parseFloat(c))},yDomainMaxCallback:function(c){return c.min*2}})}),(0,e.jsx)(W.Z,{colSpan:12,title:(0,e.jsx)(Se.Z,{}),subTitle:"Cpu usage: ".concat(m.cpu.source.usage.toFixed(2),"%"),headerBordered:!0,bordered:!0,children:(0,e.jsx)(Be.Z,{name:"container-cpu",data:m.cpu.usage,yDomainMaxCallback:function(c){return c.min*100},yLabelFormatter:function(c){return"".concat(parseFloat(c).toFixed(2),"%")}})}),m.io&&m.io.source&&(0,e.jsx)(W.Z,{colSpan:12,title:(0,e.jsx)(Se.Z,{}),subTitle:"I/O: ".concat((0,le.FI)(m.io.source.usageRead)," / ").concat((0,le.FI)(m.io.source.usageWrite)),headerBordered:!0,bordered:!0,children:(0,e.jsx)(Be.Z,{name:"container-disk",data:m.io.usage,yDomainMaxCallback:function(c){return c.max*2},yLabelFormatter:function(c){return(0,le.FI)(parseFloat(c))}})}),m.network&&m.network.source&&(0,e.jsx)(W.Z,{colSpan:12,title:(0,e.jsx)(Se.Z,{}),subTitle:"Network: ".concat((0,le.FI)(m.network.source.usageIn)," / ").concat((0,le.FI)(m.network.source.usageOut)),headerBordered:!0,bordered:!0,children:(0,e.jsx)(Be.Z,{name:"container-network",data:m.network.usage,yDomainMaxCallback:function(c){return c.max*2},yLabelFormatter:function(c){return(0,le.FI)(parseFloat(c))}})})]}),(0,e.jsx)(W.Z,{title:(0,e.jsx)(se.Z,{}),subTitle:"Progress",children:(0,e.jsx)(Le.Z,{scroll:{x:"max-content"},rowKey:"PID",columns:Z==null?void 0:Z.columns,dataSource:Z==null?void 0:Z.data,pagination:{pageSize:10}})})]})]})}),mt=ft,vt=(0,o.forwardRef)(function(n,C){(0,o.useImperativeHandle)(C,function(){return{showConsole:u}});var r=new b.Uo("components.appDetail"),i=(0,o.useRef)(),j=(0,o.useContext)(q),E=j.reload,p=j.loadingRef;function u(m){var h;(h=i.current)===null||h===void 0||h.show({url:"/console/container/".concat(n.data.Id),title:n.data.Name,workDir:m})}return(0,e.jsx)(W.Z,{title:(0,e.jsx)(ne.Z,{}),ghost:n.ghost,subTitle:(0,e.jsxs)($.Z,{children:[r.format("titleOp")," - ",function(m){if(m){var h=m.State.Status,I=m.State.Status;if(m.State.Health&&m.State.Health.Status=="unhealthy"){var d,Z;h=m.State.Health.Status,I=(d=(Z=De().last(m.State.Health.Log))===null||Z===void 0?void 0:Z.Output)!==null&&d!==void 0?d:h}return(0,e.jsx)(Y.Z,{status:"container.".concat(h),tip:I})}}(n.data)]}),children:(0,e.jsxs)($.Z,{wrap:!0,children:[n.data&&!n.data.State.Running&&(0,e.jsx)(G.Z,{buttonProps:{icon:(0,e.jsx)(me.Z,{})},action:g()(a()().mark(function m(){var h,I,d;return a()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return(h=p.current)===null||h===void 0||h.show(),P.abrupt("return",(0,L.IW)({md5:(I=(d=n.data)===null||d===void 0?void 0:d.Id)!==null&&I!==void 0?I:"",operate:"start"}).finally(function(){var x;(x=p.current)===null||x===void 0||x.destroy()}));case 2:case"end":return P.stop()}},m)})),onSuccess:function(){return E()},children:b.FD.format("listManageStart")}),n.data&&n.data.State.Running&&(0,e.jsx)(G.Z,{buttonProps:{icon:(0,e.jsx)(ue.Z,{})},action:g()(a()().mark(function m(){var h,I,d;return a()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return(h=p.current)===null||h===void 0||h.show(),P.abrupt("return",(0,L.IW)({md5:(I=(d=n.data)===null||d===void 0?void 0:d.Id)!==null&&I!==void 0?I:"",operate:"restart"}).finally(function(){var x;(x=p.current)===null||x===void 0||x.destroy()}));case 2:case"end":return P.stop()}},m)})),onSuccess:function(){return E()},children:b.FD.format("listManageRestart")}),n.data&&n.data.State.Running&&(0,e.jsx)(G.Z,{action:g()(a()().mark(function m(){var h,I,d;return a()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return(h=p.current)===null||h===void 0||h.show(),P.abrupt("return",(0,L.IW)({md5:(I=(d=n.data)===null||d===void 0?void 0:d.Id)!==null&&I!==void 0?I:"",operate:"stop"}).finally(function(){var x;(x=p.current)===null||x===void 0||x.destroy()}));case 2:case"end":return P.stop()}},m)})),buttonProps:{danger:!0,icon:(0,e.jsx)(ke.Z,{})},onSuccess:function(){return E()},children:b.FD.format("listManageStop")}),n.data&&n.data.State.Running&&!n.data.State.Paused&&(0,e.jsx)(G.Z,{action:g()(a()().mark(function m(){var h,I,d;return a()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return(h=p.current)===null||h===void 0||h.show(),P.abrupt("return",(0,L.IW)({md5:(I=(d=n.data)===null||d===void 0?void 0:d.Id)!==null&&I!==void 0?I:"",operate:"pause"}).finally(function(){var x;(x=p.current)===null||x===void 0||x.destroy()}));case 2:case"end":return P.stop()}},m)})),onSuccess:function(){return E()},buttonProps:{icon:(0,e.jsx)(Ae.Z,{})},children:b.FD.format("listManagePause")}),n.data&&n.data.State.Paused&&(0,e.jsx)(G.Z,{action:g()(a()().mark(function m(){var h,I,d;return a()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return(h=p.current)===null||h===void 0||h.show(),P.abrupt("return",(0,L.IW)({md5:(I=(d=n.data)===null||d===void 0?void 0:d.Id)!==null&&I!==void 0?I:"",operate:"unpause"}).finally(function(){var x;(x=p.current)===null||x===void 0||x.destroy()}));case 2:case"end":return P.stop()}},m)})),onSuccess:function(){return E()},buttonProps:{icon:(0,e.jsx)(me.Z,{})},children:b.FD.format("listManageUnpause")}),n.data&&n.data.State.Running&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(fe.Z,{type:"vertical"}),(0,e.jsx)(Pe.Z,{showFileExplorer:!0,ref:i}),(0,e.jsx)(_e.ZP,{type:"primary",onClick:function(){n.data&&u(n.data.Config.WorkingDir)},icon:(0,e.jsx)(he.Z,{}),children:b.FD.format("listManageConsole")}),(0,e.jsx)(z.Z,{showConsole:!0,type:"container",name:(0,le.fi)(n.data.Name,"/"),title:(0,le.fi)(n.data.Name,"/"),trigger:(0,e.jsx)(_e.ZP,{icon:(0,e.jsx)(H.Z,{}),children:b.FD.format("listManageFilePath")})}),(0,e.jsx)(V.Z,{containerInfo:n.data,showTriggerButton:!0}),(0,e.jsx)(mt,{containerInfo:n.data,showTriggerButton:!0})]}),(0,e.jsx)(fe.Z,{type:"vertical"}),(0,e.jsx)(_e.ZP,{type:"dashed",icon:(0,e.jsx)(ue.Z,{}),onClick:function(){E()},children:b.FD.format("listManageRefresh")})]})})}),ht=vt,Qe=t(62597),gt=t(86548),pt=t(57132),lt=t(82061),st=t(25035),jt=t(58638),xt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"},It=xt,yt=function(C,r){return o.createElement(Ze.Z,(0,N.Z)({},C,{ref:r,icon:It}))},Ct=o.forwardRef(yt),ut=Ct,We=t(62370),Zt=t(5966),bt=t(52688),Pt=t(85418),Rt=t(40411),ze=t(84567),Ke=t(83062),Ot=t(25278),Ve=t(78045),Dt=t(24739),St=t(97462),Et=t(70146);function wt(n){var C=(0,o.useRef)(),r=new b.Uo("components.appDetail");return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(G.Z,{buttonProps:{icon:(0,e.jsx)(ut,{})},confirmProps:{onOpenChange:function(j,E){var p,u;!((p=C.current)===null||p===void 0)&&p.resetFields&&((u=C.current)===null||u===void 0||u.resetFields())},description:(0,e.jsxs)($.Z,{style:{width:650,marginTop:"10px",paddingRight:"10px"},direction:"vertical",size:20,children:[(0,e.jsx)(K.Z.Text,{children:(0,e.jsx)("ul",{children:r.prefix("backupVolumeTipOption",2).map(function(i,j){return(0,e.jsxs)("li",{children:[i," ",j==1&&(0,e.jsx)(Ce.Link,{to:"/app/backup",children:b.Ob.format("container.backup")})]},j)})})}),(0,e.jsx)(k.A,{layout:"inline",formRef:C,submitter:!1,children:(0,e.jsxs)($.Z,{direction:"vertical",children:[(0,e.jsx)(We.Z,{name:"backupImage",valuePropName:"value",initialValue:"none",children:(0,e.jsxs)(Ve.ZP.Group,{children:[(0,e.jsx)(Ve.ZP,{value:"none",children:(0,e.jsx)(Ke.Z,{title:r.format("backupVolumeImageTipOption.none"),children:r.format("backupVolumeImageOption.none")})}),(0,e.jsx)(Ve.ZP,{value:"image",children:(0,e.jsx)(Ke.Z,{title:r.format("backupVolumeImageTipOption.image"),children:r.format("backupVolumeImageOption.image")})}),(0,e.jsx)(Ve.ZP,{value:"container",children:(0,e.jsx)(Ke.Z,{title:r.format("backupVolumeImageTipOption.container"),children:r.format("backupVolumeImageOption.container")})})]})}),(0,e.jsx)(We.Z,{name:"backupVolume",valuePropName:"value",initialValue:"all",children:(0,e.jsxs)(Ve.ZP.Group,{disabled:!n.container.Mounts||n.container.Mounts.length==0,children:[(0,e.jsx)(Ve.ZP,{value:"none",children:r.format("backupVolumePathOption.none")}),(0,e.jsx)(Ve.ZP,{value:"all",children:r.format("backupVolumePathOption.all")}),(0,e.jsx)(Ve.ZP,{value:"select",children:r.format("backupVolumePathOption.select")})]})}),(0,e.jsx)(Dt.UW,{children:(0,e.jsx)(St.Z,{name:["backupVolume"],children:function(j){var E=j.backupVolume;return E=="select"&&(0,e.jsx)($.Z,{wrap:!0,children:n.container.Mounts&&n.container.Mounts.map(function(p,u){return(0,e.jsx)(We.Z,{valuePropName:"checked",name:["volume",p.Destination],children:(0,e.jsx)(ze.Z,{children:p.Destination})},"volume-".concat(u))})})}})})]})})]})},action:g()(a()().mark(function i(){var j,E,p,u;return a()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,(0,Et.yB)({id:n.container.Name,backupImage:(j=C.current)===null||j===void 0?void 0:j.getFieldValue("backupImage"),backupVolume:(E=C.current)===null||E===void 0?void 0:E.getFieldValue("backupVolume"),backupVolumeList:Object.keys((p=(u=C.current)===null||u===void 0?void 0:u.getFieldValue("volume"))!==null&&p!==void 0?p:{}).filter(function(I){return I})});case 2:case"end":return h.stop()}},i)})),children:r.format("backupVolumeButton")})})}var Ft=t(99861),tt=t(73813),_t=t(50888),Tt=t(16596),Je=t(1699),nt=t(29453),$t=t(71965);function Mt(n){return at.apply(this,arguments)}function at(){return at=g()(a()().mark(function n(C){return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,Ce.request)("/dpanel/api/pro/container-rollback/get-list",{data:C,method:"POST"});case 2:return i.abrupt("return",i.sent);case 3:case"end":return i.stop()}},n)})),at.apply(this,arguments)}function At(n){return rt.apply(this,arguments)}function rt(){return rt=g()(a()().mark(function n(C){return a()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,Ce.request)("/dpanel/api/pro/container-rollback/restore",{data:C,method:"POST"});case 2:return i.abrupt("return",i.sent);case 3:case"end":return i.stop()}},n)})),rt.apply(this,arguments)}var Lt=t(86615),Ut=t(40056),kt=t(95833);function Nt(n){var C=(0,Ce.useAccess)(),r=(0,o.useState)(),i=y()(r,2),j=i[0],E=i[1],p=(0,o.useRef)(),u=new b.Uo("components.appDetail");return(0,o.useEffect)(function(){C.canSeeEnableCe||Mt({siteName:(0,kt.HJ)(n.detail.Name)}).then(function(m){E(m.data.list)})},[n.detail]),(0,e.jsx)(Je.u,{access:["canSeeEnableCe"],showProTips:!0,showProTipsOffset:C.canSeeEnableCe?[-15,0]:void 0,children:function(h){var I=h.canSeeEnableCe;return(0,e.jsx)(G.Z,{action:function(){var Z;return At({id:(Z=p.current)===null||Z===void 0?void 0:Z.getFieldValue("id"),enableForce:!0})},buttonProps:{icon:(0,e.jsx)($t.Z,{}),disabled:I,style:{marginRight:C.canSeeEnableCe?20:0}},confirmProps:{onOpenChange:function(Z,P){var x;!((x=p.current)===null||x===void 0)&&x.resetFields&&p.current.resetFields()},description:(0,e.jsx)(k.A,{formRef:p,submitter:!1,children:(0,e.jsxs)($.Z,{direction:"vertical",style:{width:500},size:[0,15],children:[(0,e.jsx)(K.Z.Text,{children:u.format("rollbackTip")}),j&&j.length>0?(0,e.jsx)(Lt.Z.Group,{fieldProps:{style:{display:"flex",flexDirection:"column",gap:8}},name:"id",label:"",options:j&&j.map(function(d){return{label:"id: ".concat(d.id," ").concat(b.FD.format("listDeletedAt"),": ").concat((0,le.NF)(d.deletedAt)),value:d.id}})}):(0,e.jsx)(Ut.Z,{message:u.format("rollbackEmptyTip"),style:{marginBottom:10}})]})})},onSuccess:function(){var Z;(Z=p.current)===null||Z===void 0||Z.resetFields(),n.onFinish&&n.onFinish()},children:b.FD.format("listManageRollback")})}})}var Bt=t(184),ot=t(14946),Wt=t(40018);function Vt(n){return(0,e.jsxs)($.Z,{children:[n.title,(0,e.jsx)(Ke.Z,{title:n.help,children:(0,e.jsx)(st.Z,{})})]})}var Kt=t(36588),Ht=t(16970),Gt=t(20743),zt=t(78451),Qt=(0,o.forwardRef)(function(n,C){var r;(0,o.useImperativeHandle)(C,function(){return{}});var i=(0,o.useRef)(),j=(0,o.useRef)(),E=(0,o.useState)(),p=y()(E,2),u=p[0],m=p[1];return(0,o.useEffect)(function(){var h,I;m(n.containerInfo),!((h=i.current)===null||h===void 0)&&h.reloadAndRest&&((I=i.current)===null||I===void 0||I.reloadAndRest())},[n.containerInfo]),(0,e.jsxs)(W.Z,{ghost:n.ghost,children:[(0,e.jsx)(Kt.Z,{ref:j}),(0,e.jsx)(Wt.Z,{scroll:{x:"max-content"},rowKey:"key",actionRef:i,pagination:!1,ghost:!0,columns:[{title:b.FD.format("listContainerNetworkName"),key:"name",dataIndex:"networkName"},{title:b.FD.format("listContainerName"),key:"containerName",dataIndex:"containerName",width:100,render:function(I,d,Z,P,x){return(0,e.jsx)(zt.Z,{content:(0,le.fi)(d.containerName,"/")})}},{title:(0,e.jsx)(Vt,{title:"hostname",help:b.FD.format("listHostnameTip")}),key:"hostName",render:function(I,d,Z){return d.hostName?(0,e.jsx)($.Z,{direction:"vertical",children:d.hostName.map(function(P,x){if(P)return(0,e.jsx)(K.Z.Text,{copyable:!0,keyboard:!0,children:P},x)})}):(0,e.jsx)(e.Fragment,{})}},{title:"Ip",key:"ip",render:function(I,d,Z,P,x){return(0,e.jsxs)($.Z,{direction:"vertical",children:[(0,e.jsx)("span",{children:d.networkInfo.IPv4Address}),d.networkInfo.IPv6Address&&(0,e.jsx)("span",{children:d.networkInfo.IPv6Address})]})}},{title:b.FD.format("listManage"),key:"option",width:50,fixed:"right",render:function(I,d,Z,P,x){return(0,e.jsxs)($.Z,{children:[d.networkName!=""&&(0,e.jsx)(K.Z.Link,{onClick:function(){var T;(T=j.current)===null||T===void 0||T.show(d.networkName)},children:(0,e.jsx)(Ke.Z,{title:b.FD.format("listManageDetail"),children:(0,e.jsx)(ne.Z,{})})}),d.key!="bridge"&&d.key!="none"&&d.key!="host"&&d.networkName!=""&&(0,e.jsx)(G.Z,{buttonProps:{type:"link",danger:!0},confirmProps:{showCommonConfirm:!0},action:function(){return(0,ot.t9)({name:d.networkName,containerName:n.containerInfo.Name})},onSuccess:function(){var T,M;!((T=i.current)===null||T===void 0)&&T.reloadAndRest&&((M=i.current)===null||M===void 0||M.reloadAndRest())},tips:b.FD.format("listManageExit"),children:(0,e.jsx)(lt.Z,{})})]})}}],request:function(){var h=g()(a()().mark(function I(d,Z,P){var x,J;return a()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,(0,L.jV)({md5:n.containerInfo.Name});case 2:return x=M.sent,m(x.data.info),M.next=6,(0,ot._3)({name:Object.keys(x.data.info.NetworkSettings.Networks)});case 6:return J=M.sent,M.abrupt("return",{data:J.data.list,success:!0,total:J.data.list.length});case 8:case"end":return M.stop()}},I)}));return function(I,d,Z){return h.apply(this,arguments)}}(),toolBarRender:function(){return[(0,e.jsx)(Gt.Z,{showTriggerButton:!0,onSelect:function(){var I=g()(a()().mark(function d(Z){var P,x;return a()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,(0,ot.HY)({name:Z.Name,containerName:n.containerInfo.Name,ipV4:""});case 2:x=T.sent,!((P=i.current)===null||P===void 0)&&P.reloadAndRest&&i.current.reloadAndRest();case 4:case"end":return T.stop()}},d)}));return function(d){return I.apply(this,arguments)}}()},"joinNetwork"),(0,e.jsx)(Ht.Z,{onFinish:function(){var d,Z;!((d=i.current)===null||d===void 0)&&d.reloadAndRest&&((Z=i.current)===null||Z===void 0||Z.reloadAndRest())}},"create")]},search:!1,expandable:{expandRowByClick:!1,expandedRowKeys:Object.keys((r=u==null?void 0:u.NetworkSettings.Networks)!==null&&r!==void 0?r:{bridge:[]})}})]})}),Jt=Qt,Yt=t(26522),Xt=(0,o.forwardRef)(function(n,C){(0,o.useImperativeHandle)(C,function(){return{}});var r=(0,o.useState)(!1),i=y()(r,2),j=i[0],E=i[1],p=new b.Uo("components.appDetail");return(0,e.jsx)(Bt.a,{submitter:!1,title:p.format("titleNetwork"),onOpenChange:function(m){E(m)},drawerProps:{width:_.R_},open:j,trigger:(0,e.jsx)(_e.ZP,{icon:(0,e.jsx)(Yt.Z,{}),children:b.Ob.format("docker.network")}),children:(0,e.jsx)(Jt,{ghost:!0,containerInfo:n.containerInfo})})}),qt=Xt,en=t(84941),tn=(0,o.forwardRef)(function(n,C){var r=new b.Uo("components.appDetail"),i=(0,o.useContext)(q),j=i.reload,E=i.loadingRef,p=i.close,u=i.redirect,m=(0,o.useRef)(),h=(0,o.useRef)(),I=(0,o.useRef)(),d=(0,o.useRef)(),Z=(0,o.useRef)(),P=(0,o.useRef)(),x=(0,o.useRef)(),J=(0,o.useState)({status:0,error:""}),T=y()(J,2),M=T[0],D=T[1],de=(0,o.useState)(),ie=y()(de,2),c=ie[0],oe=ie[1];(0,o.useImperativeHandle)(C,function(){return{}});function $e(U){return He.apply(this,arguments)}function He(){return He=g()(a()().mark(function U(f){var R,s,v;return a()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(s=-2,!f.ignore){O.next=6;break}if(!(f.ignore.indexOf("".concat(f.info.Name,"@*"))>-1)){O.next=4;break}return O.abrupt("return",{status:-2,error:""});case 4:if(!(f.ignore.indexOf("".concat(f.info.Name,"@").concat(f.info.Image))>-1)){O.next=6;break}return O.abrupt("return",{status:-2,error:""});case 6:return O.next=8,(0,tt.ZQ)({tag:(R=f.info.Config.Image)!==null&&R!==void 0?R:"",md5:f.info.Image,cacheTime:3600}).catch(function(X){s=-1});case 8:if(v=O.sent,!(v&&v.data.error&&v.data.error!="")){O.next=11;break}return O.abrupt("return",{status:-1,error:v.data.error});case 11:return v&&(v.data.digestLocal&&v.data.digestLocal.length>0?s=v.data.upgrade?1:2:v.data.error&&v.data.error!=""?s=-1:v.data.digestLocal.length==0?s=-3:s=-2),O.abrupt("return",{status:s,error:""});case 13:case"end":return O.stop()}},U)})),He.apply(this,arguments)}return(0,o.useEffect)(function(){D({status:0}),$e(n.data).then(function(U){D(U)}),oe(n.data)},[n.data]),(0,e.jsxs)($.Z,{direction:"vertical",children:[(0,e.jsxs)(W.Z,{ghost:n.ghost,title:(0,e.jsx)(ne.Z,{}),subTitle:r.format("titleManage"),children:[(0,e.jsx)(en.Z,{onFinish:function(){var U=g()(a()().mark(function f(R){return a()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:R&&u(R);case 1:case"end":return v.stop()}},f)}));return function(f){return U.apply(this,arguments)}}(),ref:m},"createByImage"),(0,e.jsxs)($.Z,{wrap:!0,children:[(0,e.jsx)(_e.ZP,{onClick:function(){var f;(f=m.current)===null||f===void 0||f.show(n.data.info.Id)},type:"primary",icon:(0,e.jsx)(gt.Z,{}),children:b.FD.format("listManageEdit")}),c&&(0,e.jsxs)(e.Fragment,{children:[c.info.Config.Image&&(0,e.jsx)(Ft.Z,{image:[c.info.Config.Image],ref:P}),(0,e.jsx)(Pt.Z,{placement:"bottomLeft",menu:{items:[{key:"1",label:(0,e.jsx)(G.Z,{action:g()(a()().mark(function U(){var f,R,s,v,A,O;return a()().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ee.next=2,(0,Qe.ze)({md5:(f=(R=c.info)===null||R===void 0?void 0:R.Name)!==null&&f!==void 0?f:"",imageId:""});case 2:return D({status:0}),ee.next=5,(0,tt.ZQ)({tag:(s=(v=c.info)===null||v===void 0?void 0:v.Config.Image)!==null&&s!==void 0?s:"",md5:(A=(O=c.info)===null||O===void 0?void 0:O.Image)!==null&&A!==void 0?A:"",cacheTime:0}).then(function(te){te.data.error&&te.data.error!=""?D({status:-1,error:te.data.error}):te.data.digestLocal&&te.data.digestLocal.length>0?D({status:te.data.upgrade?1:2}):D({status:-2})}).catch(function(te){D({status:-1})});case 5:return ee.abrupt("return",ee.sent);case 6:case"end":return ee.stop()}},U)})),buttonProps:{type:"link"},children:r.format("upgradeCheckUpgrade")})},{key:"2",label:(0,e.jsx)(G.Z,{action:g()(a()().mark(function U(){var f,R,s,v;return a()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,(0,Qe.ze)({md5:(f=(R=c.info)===null||R===void 0?void 0:R.Name)!==null&&f!==void 0?f:"",imageId:(s=(v=c.info)===null||v===void 0?void 0:v.Image)!==null&&s!==void 0?s:""});case 2:return O.abrupt("return",O.sent);case 3:case"end":return O.stop()}},U)})),buttonProps:{type:"link"},children:r.format("upgradeCheckUpgradeIgnoreOnce")})},{key:"3",label:(0,e.jsx)(G.Z,{action:g()(a()().mark(function U(){var f,R;return a()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,(0,Qe.ze)({md5:(f=(R=c.info)===null||R===void 0?void 0:R.Name)!==null&&f!==void 0?f:"",imageId:"*"});case 2:return v.abrupt("return",v.sent);case 3:case"end":return v.stop()}},U)})),buttonProps:{type:"link"},children:r.format("upgradeCheckUpgradeIgnore")})}]},children:(0,e.jsx)(Rt.Z,{title:M.error,count:r.format("checkImageUpgradeOption."+M.status),color:r.format("checkImageUpgradeColorOption."+M.status),children:(0,e.jsx)(G.Z,{buttonProps:{disabled:M.status===0,icon:M.status===0?(0,e.jsx)(_t.Z,{}):(0,e.jsx)(Tt.Z,{})},confirmProps:{description:(0,e.jsxs)($.Z,{style:{width:280,paddingRight:"10px"},direction:"vertical",children:[(0,e.jsx)(K.Z.Text,{children:r.format("upgradeConfirm")}),(0,e.jsx)(k.A,{formRef:x,submitter:!1,layout:"inline",children:(0,e.jsx)(We.Z,{name:"enableBak",valuePropName:"checked",children:(0,e.jsx)(ze.Z,{children:r.format("upgradeConfirmEnableBak")})})})]})},action:g()(a()().mark(function U(){var f,R,s,v,A,O;return a()().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ee.next=2,(f=P.current)===null||f===void 0?void 0:f.start();case 2:return(R=E.current)===null||R===void 0||R.show(),(s=P.current)===null||s===void 0||s.finish(),ee.next=6,(0,L.RF)({md5:(v=c.info.Id)!==null&&v!==void 0?v:"",imageTag:"",enableBak:(A=(O=x.current)===null||O===void 0?void 0:O.getFieldValue("enableBak"))!==null&&A!==void 0?A:!1}).finally(function(){var te;(te=E.current)===null||te===void 0||te.destroy()});case 6:return ee.abrupt("return",ee.sent);case 7:case"end":return ee.stop()}},U)})),onSuccess:function(f){p()},children:r.format("upgradeButton")})})})]}),(0,e.jsx)(fe.Z,{type:"vertical"}),(0,e.jsx)(G.Z,{buttonProps:{icon:(0,e.jsx)(pt.Z,{})},confirmProps:{description:(0,e.jsxs)($.Z,{style:{width:400,paddingRight:"10px"},direction:"vertical",children:[(0,e.jsx)(K.Z.Text,{children:r.format("copyConfirmTip")}),(0,e.jsxs)(k.A,{formRef:Z,submitter:!1,layout:"horizontal",children:[(0,e.jsx)("br",{}),(0,e.jsx)(Zt.Z,{label:r.format("copyCopyName"),name:"copyName"}),(0,e.jsx)(bt.Z,{label:r.format("copyEnableRandomPort"),name:"enableRandomPort"})]})]})},action:g()(a()().mark(function U(){var f,R,s,v,A;return a()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,(0,L.aF)({md5:(f=c==null?void 0:c.info.Id)!==null&&f!==void 0?f:"",copyName:(R=(s=Z.current)===null||s===void 0?void 0:s.getFieldValue("copyName"))!==null&&R!==void 0?R:"",enableRandomPort:(v=(A=Z.current)===null||A===void 0?void 0:A.getFieldValue("enableRandomPort"))!==null&&v!==void 0?v:!1});case 2:return X.abrupt("return",X.sent);case 3:case"end":return X.stop()}},U)})),onSuccess:function(f){var R;(R=Z.current)===null||R===void 0||R.resetFields()},children:r.format("copyButton")}),c&&(0,e.jsx)(Nt,{detail:c.info,onFinish:function(){p()}},"rollback"),c&&(0,e.jsx)(G.Z,{action:g()(a()().mark(function U(){var f,R,s,v,A,O;return a()().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return(f=E.current)===null||f===void 0||f.show(),ee.abrupt("return",Promise.all([(0,Qe.Ct)({md5:(R=c==null?void 0:c.info.Id)!==null&&R!==void 0?R:"",deleteImage:(s=(v=I.current)===null||v===void 0?void 0:v.getFieldValue("deleteImage"))!==null&&s!==void 0?s:!1,deleteVolume:(A=(O=I.current)===null||O===void 0?void 0:O.getFieldValue("deleteVolume"))!==null&&A!==void 0?A:!1}),(0,nt.rn)({name:c==null?void 0:c.info.Name})]).finally(function(){var te;(te=E.current)===null||te===void 0||te.destroy()}));case 2:case"end":return ee.stop()}},U)})),buttonProps:{danger:!0,type:"primary",icon:(0,e.jsx)(lt.Z,{})},confirmProps:{description:(0,e.jsxs)($.Z,{style:{width:200},direction:"vertical",children:[(0,e.jsx)(K.Z.Text,{children:b.FD.format("confirm.title")}),(0,e.jsxs)(k.A,{formRef:I,layout:"inline",submitter:!1,children:[(0,e.jsx)(We.Z,{addonAfter:(0,e.jsx)(Ke.Z,{title:r.format("deleteConfirmTip"),children:(0,e.jsx)(st.Z,{})}),name:"deleteVolume",valuePropName:"checked",children:(0,e.jsx)(ze.Z,{children:r.format("deleteConfirmDeleteVolume")})}),(0,e.jsx)(We.Z,{name:"deleteImage",valuePropName:"checked",children:(0,e.jsx)(ze.Z,{children:r.format("deleteConfirmDeleteImage")})})]})]})},onSuccess:function(){p()},children:b.FD.format("listManageDelete")}),c&&(0,e.jsx)(G.Z,{action:g()(a()().mark(function U(){var f,R,s,v;return a()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return(f=E.current)===null||f===void 0||f.show(),O.abrupt("return",(0,L.RF)({md5:(R=c.info.Id)!==null&&R!==void 0?R:"",imageTag:"",enableBak:(s=(v=x.current)===null||v===void 0?void 0:v.getFieldValue("enableBak"))!==null&&s!==void 0?s:!1}).finally(function(){var X;p(),(X=E.current)===null||X===void 0||X.destroy()}));case 2:case"end":return O.stop()}},U)})),buttonProps:{danger:!0,icon:(0,e.jsx)(ue.Z,{})},confirmProps:{description:(0,e.jsx)($.Z,{style:{width:300},children:r.format("rebuildConfirmTip")})},children:b.FD.format("listManageDeployForce")}),(0,e.jsx)(fe.Z,{type:"vertical"}),c&&(0,e.jsx)(qt,{containerInfo:c.info})]})]}),(0,e.jsx)(W.Z,{ghost:n.ghost,title:(0,e.jsx)(ne.Z,{}),subTitle:r.format("titleManageExport"),children:(0,e.jsxs)($.Z,{wrap:!0,children:[c&&(0,e.jsx)(Je.u,{access:"canSeeContainerBackup",children:(0,e.jsx)(wt,{container:c.info})}),(0,e.jsx)(fe.Z,{type:"vertical"}),(0,e.jsx)(G.Z,{buttonProps:{icon:(0,e.jsx)(jt.Z,{})},confirmProps:{onOpenChange:function(f,R){var s;!((s=h.current)===null||s===void 0)&&s.resetFields&&h.current.resetFields()},description:(0,e.jsxs)($.Z,{style:{width:500,marginTop:"10px",paddingRight:"10px"},direction:"vertical",size:20,children:[(0,e.jsx)(K.Z.Text,{children:r.format("exportConfirm")}),(0,e.jsx)(k.A,{layout:"horizontal",formRef:h,submitter:!1,children:(0,e.jsx)(We.Z,{valuePropName:"checked",name:"enableExportToPath",children:(0,e.jsx)(ze.Z,{children:r.format("exportEnableExportToPath")})},"enableExportToPath")})]})},action:function(){var f,R,s;return(0,L.LJ)({md5:(f=c==null?void 0:c.info.Id)!==null&&f!==void 0?f:"",enableExportToPath:(R=(s=h.current)===null||s===void 0?void 0:s.getFieldValue("enableExportToPath"))!==null&&R!==void 0?R:!1})},children:r.format("exportButton")}),(0,e.jsx)(G.Z,{buttonProps:{icon:(0,e.jsx)(ut,{})},confirmProps:{onOpenChange:function(f,R){var s;!((s=d.current)===null||s===void 0)&&s.resetFields&&d.current.resetFields()},title:r.format("commitConfirmTitle"),description:(0,e.jsx)($.Z,{style:{width:400,marginTop:"10px",paddingRight:"10px"},direction:"vertical",children:(0,e.jsx)(k.A,{formRef:d,submitter:!1,children:(0,e.jsx)(We.Z,{name:"saveImageName",children:(0,e.jsx)(Ot.Z,{addonBefore:r.format("commitConfirmSaveImageName")})})})})},action:function(){var f,R,s;return(0,L.Re)({md5:(f=c==null?void 0:c.info.Id)!==null&&f!==void 0?f:"",name:(R=(s=d.current)===null||s===void 0?void 0:s.getFieldValue("saveImageName"))!==null&&R!==void 0?R:c==null?void 0:c.info.Name})},children:r.format("commitButton")})]})},"extend")]})}),nn=tn,an=t(65913);function rn(n){var C=new b.Uo("components.appDetail"),r=(0,o.useState)(),i=y()(r,2),j=i[0],E=i[1];return(0,o.useEffect)(function(){(0,tt.YU)({md5:n.data.Image}).then(function(p){E(p.data)})},[n.data]),(0,e.jsx)(W.Z,{ghost:n.ghost,title:(0,e.jsx)(se.Z,{}),subTitle:C.format("titleImage"),children:(0,e.jsxs)(w.Z,{styles:{label:{width:200}},column:1,bordered:!0,children:[(0,e.jsx)(w.Z.Item,{label:"Image Tag",children:(0,e.jsx)(K.Z.Text,{copyable:!0,children:n.data.Config.Image})}),(0,e.jsx)(w.Z.Item,{label:"Image",children:n.data.Image}),(0,e.jsx)(w.Z.Item,{label:"CMD",children:(j==null?void 0:j.info.Config.Cmd)&&(j==null?void 0:j.info.Config.Cmd.join(" "))}),(0,e.jsx)(w.Z.Item,{label:"ENTRYPOINT",children:j==null?void 0:j.info.Config.Entrypoint}),(0,e.jsx)(w.Z.Item,{label:"Labels",children:(0,e.jsx)(w.Z,{column:1,bordered:!0,children:(j==null?void 0:j.info.Config.Labels)&&Object.entries(j==null?void 0:j.info.Config.Labels).map(function(p){var u=y()(p,2),m=u[0],h=u[1];return(0,e.jsx)(w.Z.Item,{label:m,children:h},m)})})})]})})}var on=t(97857),Ye=t.n(on),ln=t(40666),sn=t(64789),un=t(97937),dn=t(66309),cn=t(86738),fn=t(90127);function mn(n){var C=(0,o.useState)(0),r=y()(C,2),i=r[0],j=r[1],E=(0,o.useState)(),p=y()(E,2),u=p[0],m=p[1],h=new b.Uo("components.appDetail"),I=(0,o.useState)(),d=y()(I,2),Z=d[0],P=d[1];return(0,o.useEffect)(function(){m([]),(0,nt.e1)().then(function(x){m(x.data.list)})},[i,n.data.info.Name]),(0,e.jsx)(W.Z,{ghost:!0,title:(0,e.jsx)(ln.Z,{}),subTitle:h.format("titleTag"),extra:(0,e.jsx)(fn.Z,{trigger:(0,e.jsx)(K.Z.Link,{children:(0,e.jsx)(sn.Z,{})}),containerDetail:n.data,onFinish:function(){j(i+1)}}),children:(0,e.jsx)($.Z,{wrap:!0,children:u&&(u==null?void 0:u.filter(function(x){return x.item&&x.item.find(function(J){return J.name==n.data.info.Name})}).map(function(x,J){return(0,e.jsx)(dn.Z,{color:x.tagColor,closable:{closeIcon:(0,e.jsx)(cn.Z,{title:b.FD.format("confirm.title"),open:Z&&Z[J],onOpenChange:function(M){P(Ye()(Ye()({},Z),{index:M}))},onConfirm:g()(a()().mark(function T(){return a()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,(0,nt.rn)({name:n.data.info.Name,tag:x.tag});case 2:j(i+1);case 3:case"end":return D.stop()}},T)})),children:(0,e.jsx)(un.Z,{})})},style:{height:35,display:"flex",borderRadius:20,justifyContent:"center",alignItems:"center"},onClose:g()(a()().mark(function T(){return a()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:P(Ye()(Ye()({},Z),{index:!0}));case 1:case"end":return D.stop()}},T)})),children:(0,e.jsx)("span",{style:{paddingLeft:10,paddingRight:3},children:x.tag})},J)}))})})}var vn=(0,o.forwardRef)(function(n,C){var r;(0,o.useImperativeHandle)(C,function(){return{show:function(T){return g()(a()().mark(function M(){return a()().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return Z(!0),de.next=3,P(T);case 3:case"end":return de.stop()}},M)}))()}}});var i=new b.Uo("components.appDetail"),j=(0,o.useRef)(),E=(0,o.useState)(),p=y()(E,2),u=p[0],m=p[1],h=(0,o.useState)(!1),I=y()(h,2),d=I[0],Z=I[1];function P(J){return x.apply(this,arguments)}function x(){return x=g()(a()().mark(function J(T){var M,D,de;return a()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return(M=j.current)===null||M===void 0||M.show(),c.next=3,(0,L.jV)({md5:T}).finally(function(){var oe;(oe=j.current)===null||oe===void 0||oe.destroy()});case 3:D=c.sent,D.data&&(((de=D.data.info.HostConfig)===null||de===void 0?void 0:de.NetworkMode)=="host"&&D.data.info.Config.ExposedPorts&&Object.keys(D.data.info.Config.ExposedPorts).map(function(oe){D.data.info.NetworkSettings.Ports||(D.data.info.NetworkSettings.Ports={}),D.data.info.NetworkSettings.Ports[oe]=[{HostIp:"0.0.0.0",HostPort:oe.substring(0,oe.indexOf("/"))}]}),m(D.data));case 5:case"end":return c.stop()}},J)})),x.apply(this,arguments)}return(0,e.jsx)(q.Provider,{value:{loadingRef:j,reload:function(){return g()(a()().mark(function T(){return a()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(!u){D.next=3;break}return D.next=3,P(u.info.Id);case 3:case"end":return D.stop()}},T)}))()},close:function(){return g()(a()().mark(function T(){return a()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:Z(!1),n.onFinish&&n.onFinish();case 2:case"end":return D.stop()}},T)}))()},redirect:function(T){return g()(a()().mark(function M(){return a()().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return de.next=2,P(T);case 2:case"end":return de.stop()}},M)}))()}},children:(0,e.jsx)(we.Z,{title:i.format("drawerTitle",{name:(0,le.fi)((r=u==null?void 0:u.info.Name)!==null&&r!==void 0?r:"","/")}),open:d,onClose:function(){Z(!1),n.onFinish&&n.onFinish()},width:_.R_,children:(0,e.jsx)(an.Z,{ref:j,children:(0,e.jsxs)(Fe.Z,{vertical:!0,gap:20,children:[u&&(0,e.jsx)(Je.u,{access:"canSeeContainerList",children:(0,e.jsx)(ht,{ghost:!0,data:u==null?void 0:u.info})}),u&&(0,e.jsx)(Je.u,{access:["canSeeContainerListManage","canSeeContainerListManageOp"],children:(0,e.jsx)(nn,{ghost:!0,data:u})}),u&&(0,e.jsx)(mn,{data:u}),u&&(0,e.jsx)(Ne,{data:u,ghost:!0}),(0,e.jsx)(l,{data:u==null?void 0:u.info,ghost:!0}),u&&(0,e.jsx)(rn,{data:u.info,ghost:!0}),(u==null?void 0:u.info.Config.Labels)&&(0,e.jsx)(W.Z,{title:(0,e.jsx)(se.Z,{}),ghost:!0,subTitle:i.format("titleLabel"),children:(0,e.jsx)(w.Z,{column:1,bordered:!0,children:u.info.Config.Labels&&Object.entries(u.info.Config.Labels).map(function(J){var T=y()(J,2),M=T[0],D=T[1];return(0,e.jsx)(w.Z.Item,{label:M,children:D},M)})})})]})})})})}),hn=vn},90127:function(Ue,pe,t){var je=t(15009),y=t.n(je),xe=t(99289),a=t.n(xe),ce=t(5574),g=t.n(ce),o=t(5251),ve=t(184),W=t(62370),k=t(5966),w=t(24739),$=t(64317),fe=t(52688),K=t(97462),ye=t(40056),Oe=t(23345),S=t(67294),L=t(1699),Re=t(80821),be=t(2808),le=t(87662),Ce=t(29453),F=t(3616),b=t(36146),e=t(85893),Ne=(0,S.forwardRef)(function(se,we){var Fe;(0,S.useImperativeHandle)(we,function(){return{edit:function(V){Pe(!0),De(V),N.current&&N.current.setFieldsValue({tag:[V.tag],tagColor:V.tagColor,enableShowGroup:V.enableShowGroup})}}});var N=(0,S.useRef)(),Te=(0,S.useState)(0),Ze=g()(Te,2),Ee=Ze[0],Ie=Ze[1],re=(0,S.useState)([]),l=g()(re,2),ne=l[0],me=l[1],ue=(0,S.useState)(),ke=g()(ue,2),Ae=ke[0],he=ke[1],H=(Fe=se.containerDetail)===null||Fe===void 0?void 0:Fe.info,_e=(0,S.useState)(!1),Y=g()(_e,2),G=Y[0],Pe=Y[1],ge=new b.Uo("components.appDetail");function De(z){N.current&&N.current.setFieldsValue({title:z.title,description:z.description,url:z.url,icon:z.icon,name:z.name})}return(0,S.useEffect)(function(){he([]),(0,Ce.e1)().then(function(z){he(z.data.list)})},[Ee]),(0,S.useEffect)(function(){H&&(0,le.K3)().then(function(z){var V=[];H.NetworkSettings&&H.NetworkSettings.Ports&&Object.keys(H.NetworkSettings.Ports).map(function(B){H.NetworkSettings.Ports&&H.NetworkSettings.Ports[B]&&H.NetworkSettings.Ports[B].map(function(q){q.HostPort&&V.push("http://".concat(z.data.serverUrl,":").concat(q.HostPort))})}),me(V)})},[se.containerDetail]),(0,e.jsxs)(ve.a,{drawerProps:{forceRender:!0,width:F.R_},open:G,onFinish:function(){var z=a()(y()().mark(function V(B){var q,ae,Q,_;return y()().wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:return Q="",B.tagColor&&B.tagColor.toHexString?B.tagColor.cleared||(Q=B.tagColor.toHexString()):Q=B.tagColor,_=(q=B.enableShowGroup)!==null&&q!==void 0?q:se.defaultEnableShowGroup,Le.next=5,(0,Ce.A9)({enableShowGroup:_,tag:B.tag?B.tag[0]:"",tagColor:Q,name:(ae=H==null?void 0:H.Name)!==null&&ae!==void 0?ae:B.name,title:_?B.title:"",description:_?B.description:"",url:_?B.url:"",icon:_?B.icon:""});case 5:return Ie(Ee+1),se.onFinish&&se.onFinish({tag:B.tag,tagColor:B.tagColor,enableShowGroup:_}),Le.abrupt("return",!0);case 8:case"end":return Le.stop()}},V)}));return function(V){return z.apply(this,arguments)}}(),formRef:N,title:ge.format("tagCreateTitle"),trigger:se.trigger,onOpenChange:function(V){var B;Pe(V),!V&&(!((B=N.current)===null||B===void 0)&&B.resetFields)&&N.current.resetFields()},children:[se.defaultEnableShowGroup&&(0,e.jsx)(W.Z,{children:(0,e.jsx)(ye.Z,{message:new b.Uo("system.home.tag").format("emptyTip")})}),(0,e.jsx)(k.Z,{name:"name",hidden:!0}),(0,e.jsxs)(w.UW,{children:[(0,e.jsx)($.Z,{width:"lg",label:ge.format("tagFormTag"),layout:"vertical",required:!0,rules:[{required:!0}],onChange:function(V){var B=Ae&&Ae.find(function(Ge){return V&&V.length>=1&&Ge.tag==V[0]});if(B){var q,ae,Q,_=B.item.find(function(Ge){return Ge.name==(H==null?void 0:H.Name)});(q=N.current)===null||q===void 0||q.setFieldsValue({tagColor:B.tagColor,enableShowGroup:B.enableShowGroup}),_&&_.name&&De({name:(ae=H==null?void 0:H.Name)!==null&&ae!==void 0?ae:"",title:_?_.title:(0,o.fi)((Q=H==null?void 0:H.Name)!==null&&Q!==void 0?Q:"","/"),description:_&&_.description,url:_&&_.url,icon:_&&_.icon})}if(!V||V.length==0){var Se,Le=(Se=N.current)===null||Se===void 0?void 0:Se.getFieldValue("url");if(!Le||Le==""){var Be;!((Be=N.current)===null||Be===void 0)&&Be.resetFields&&N.current.resetFields()}}},options:Ae&&Ae.map(function(z){return{lable:z.tag,value:z.tag}}),name:"tag",mode:"tags",fieldProps:{maxCount:1},placeholder:ge.format("tagFormTagEmpty")},"tagSelect".concat(Ee)),!se.defaultEnableShowGroup&&(0,e.jsx)(be.Z,{label:ge.format("tagFormTagColor"),name:"tagColor"})]}),!se.defaultEnableShowGroup&&(0,e.jsx)(L.u,{access:"canSeeEnableCe",showProRibbonTips:!0,children:function(V){var B=V.canSeeEnableCe;return(0,e.jsx)(fe.Z,{label:ge.format("tagFormEnableShowGroup"),name:"enableShowGroup",disabled:B,fieldProps:{onChange:function(ae){if(ae){var Q,_;De({name:(Q=H==null?void 0:H.Name)!==null&&Q!==void 0?Q:"",title:(0,o.fi)((_=H==null?void 0:H.Name)!==null&&_!==void 0?_:"","/")})}}}})}}),(0,e.jsx)(K.Z,{name:["enableShowGroup"],children:function(V){var B=V.enableShowGroup;return(B||se.defaultEnableShowGroup)&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(Oe.Z.Compact,{children:[se.containerDetail&&(0,e.jsx)($.Z,{label:ge.format("tagFormSelectUrl"),width:"sm",name:"selectUrl",options:ne.map(function(q){return{label:q,value:q}}),onChange:function(ae){var Q;!((Q=N.current)===null||Q===void 0)&&Q.setFieldValue&&N.current.setFieldValue("url",ae)}}),(0,e.jsx)(k.Z,{label:ge.format("tagFormUrl"),name:"url",width:"md"}),(0,e.jsx)(W.Z,{label:" ",children:(0,e.jsx)(Re.Z,{action:function(){var ae;return(0,Ce.R3)({url:(ae=N.current)===null||ae===void 0?void 0:ae.getFieldValue("url")})},onSuccess:function(ae){var Q,_,Se;(Q=N.current)===null||Q===void 0||Q.setFieldValue("icon",ae.data.icon),(_=N.current)===null||_===void 0||_.setFieldValue("title",ae.data.title),(Se=N.current)===null||Se===void 0||Se.setFieldValue("description",ae.data.description)},children:ge.format("tagGetUrlDetailButton")})})]}),(0,e.jsxs)(w.UW,{children:[(0,e.jsx)(k.Z,{label:ge.format("tagFormTitle"),name:"title"}),(0,e.jsx)(k.Z,{label:ge.format("tagFormDescription"),name:"description"})]}),(0,e.jsx)(w.UW,{children:(0,e.jsx)(k.Z,{width:"lg",placeholder:ge.format("tagFormIconEmpty"),label:ge.format("tagFormIcon"),name:"icon"})})]})}})]})});pe.Z=Ne},36588:function(Ue,pe,t){t.d(pe,{Z:function(){return se}});var je=t(15009),y=t.n(je),xe=t(99289),a=t.n(xe),ce=t(5574),g=t.n(ce),o=t(80821),ve=t(3616),W=t(14946),k=t(36146),w=t(82061),$=t(184),fe=t(38345),K=t(60940),ye=t(23345),Oe=t(25593),S=t(96074),L=t(26412),Re=t(67294),be=t(92067),le=t(83622),Ce=t(85265),F=t(85893);function b(we){var Fe=(0,Re.useState)(!1),N=g()(Fe,2),Te=N[0],Ze=N[1],Ee=new k.Uo("docker");return(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(le.ZP,{type:"primary",onClick:function(){Ze(!0)},children:Ee.format("networkJoinContainer")}),(0,F.jsx)(Ce.Z,{open:Te,onClose:function(){Ze(!1)},width:ve.R_,title:Ee.format("networkJoinContainer"),children:(0,F.jsx)(be.Z,{onSelect:function(){var Ie=a()(y()().mark(function re(l){return y()().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return me.next=2,(0,W.HY)({name:we.detail.Name,containerName:l.Name,ipV4:""});case 2:Ze(!1),we.onFinish&&we.onFinish(we.detail);case 4:case"end":return me.stop()}},re)}));return function(re){return Ie.apply(this,arguments)}}()})})]})}var e=t(13822),Ne=(0,Re.forwardRef)(function(we,Fe){(0,Re.useImperativeHandle)(Fe,function(){return{show:H}});var N=(0,Re.useState)(!1),Te=g()(N,2),Ze=Te[0],Ee=Te[1],Ie=(0,Re.useState)(),re=g()(Ie,2),l=re[0],ne=re[1],me=(0,Re.useState)(),ue=g()(me,2),ke=ue[0],Ae=ue[1],he=new k.Uo("components.network");function H(Y){return _e.apply(this,arguments)}function _e(){return _e=a()(y()().mark(function Y(G){var Pe,ge,De,z,V,B,q,ae;return y()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,(0,W.IS)({name:G});case 2:if(Pe=_.sent,!Pe.data.info.Containers){_.next=19;break}ge=[],De=0,z=Object.entries(Pe.data.info.Containers);case 6:if(!(De<z.length)){_.next=16;break}return V=g()(z[De],2),B=V[0],q=V[1],_.next=10,(0,e.jV)({md5:q.Name});case 10:ae=_.sent,ae.data.info.NetworkSettings.Networks[G]&&(q.Alias=ae.data.info.NetworkSettings.Networks[G].Aliases),ge.push(q);case 13:De++,_.next=6;break;case 16:Ae(ge),_.next=20;break;case 19:Ae([]);case 20:ne(Pe.data.info),Ee(!0);case 22:case"end":return _.stop()}},Y)})),_e.apply(this,arguments)}return(0,F.jsx)($.a,{drawerProps:{width:ve.R_},title:he.format("detailTitle"),open:Ze,onOpenChange:function(G){Ee(G)},submitter:!1,children:(0,F.jsxs)(fe.Z,{ghost:!0,direction:"column",gutter:[10,0],children:[(0,F.jsx)(fe.Z,{title:he.format("detailContainer"),ghost:!0,extra:l&&(0,F.jsx)(b,{detail:l,onFinish:function(G){H(G.Name)}}),children:(0,F.jsx)(K.Z,{rowKey:"Name",columns:[{title:k.FD.format("listContainerName"),dataIndex:"Name"},{title:k.FD.format("listAlias"),dataIndex:"Alias",render:function(G,Pe,ge){return(0,F.jsx)(ye.Z,{direction:"vertical",children:Pe.Alias&&Pe.Alias.map(function(De,z){return(0,F.jsx)(Oe.Z.Text,{copyable:!0,keyboard:!0,children:De},z)})})}},{title:"IPV4",dataIndex:"IPv4Address"},{title:"IPV6",dataIndex:"IPv6Address"},{title:"MacAddress",dataIndex:"MacAddress"},{title:k.FD.format("listManage"),render:function(G,Pe,ge){return(0,F.jsx)(ye.Z,{split:(0,F.jsx)(S.Z,{type:"vertical"}),children:(0,F.jsx)(o.Z,{buttonProps:{type:"text",icon:(0,F.jsx)(w.Z,{}),danger:!0},confirmProps:{showCommonConfirm:!0},action:function(){var z,V;return(0,W.t9)({name:(z=l==null?void 0:l.Id)!==null&&z!==void 0?z:"",containerName:(V=Pe.Name)!==null&&V!==void 0?V:""})},tips:k.FD.format("listManageExit"),onSuccess:function(){l&&H(l.Name)}},"delete")})}}],dataSource:ke,pagination:!1})}),(0,F.jsx)(fe.Z,{ghost:!0,title:he.format("detailBasic"),children:(0,F.jsxs)(L.Z,{styles:{label:{width:150}},column:2,bordered:!0,children:[(0,F.jsx)(L.Z.Item,{label:he.format("detailName"),children:l==null?void 0:l.Name}),(0,F.jsx)(L.Z.Item,{label:"Id",children:l==null?void 0:l.Id.slice(0,12)}),(0,F.jsx)(L.Z.Item,{label:"Driver",children:l==null?void 0:l.Driver}),(0,F.jsx)(L.Z.Item,{label:"Scope",children:l==null?void 0:l.Scope}),(0,F.jsx)(L.Z.Item,{label:"Attachable",children:he.yesNo(l==null?void 0:l.Attachable)}),(0,F.jsx)(L.Z.Item,{label:"Internal",children:he.yesNo(l==null?void 0:l.Internal)}),(l==null?void 0:l.IPAM.Config)&&(l==null?void 0:l.IPAM.Config.map(function(Y,G){return(0,F.jsx)(L.Z.Item,{label:Y.Gateway&&Y.Gateway.includes(":")?"IPV6":"IPV4",children:(0,F.jsxs)(L.Z,{styles:{label:{width:150}},column:1,bordered:!0,children:[(0,F.jsx)(L.Z.Item,{label:"Subnet",children:Y.Subnet}),(0,F.jsx)(L.Z.Item,{label:"Gateway",children:Y.Gateway}),(0,F.jsx)(L.Z.Item,{label:"IP Range ",children:Y.IPRange}),(0,F.jsx)(L.Z.Item,{label:"Excluded IPs",children:Y.AuxiliaryAddresses&&Object.keys(Y.AuxiliaryAddresses).map(function(Pe){return Y.AuxiliaryAddresses[Pe]+" ,"})})]})},G)})),(l==null?void 0:l.Options)&&Object.keys(l==null?void 0:l.Options).length>0&&(0,F.jsx)(L.Z.Item,{label:"Options",children:(0,F.jsx)(L.Z,{styles:{label:{width:150}},column:1,bordered:!0,children:Object.keys(l==null?void 0:l.Options).map(function(Y){return(0,F.jsx)(L.Z.Item,{label:Y,children:l.Options[Y]},Y)})})}),(l==null?void 0:l.Labels)&&Object.keys(l==null?void 0:l.Labels).length>0&&(0,F.jsx)(L.Z.Item,{label:"Lables",children:(0,F.jsx)(L.Z,{styles:{label:{width:150}},column:1,bordered:!0,children:Object.keys(l==null?void 0:l.Labels).map(function(Y){return(0,F.jsx)(L.Z.Item,{label:Y,children:l.Labels[Y]},Y)})})})]})})]})})}),se=Ne},2808:function(Ue,pe,t){t.d(pe,{Z:function(){return o}});var je=t(97857),y=t.n(je),xe=t(62370),a=t(51663),ce=t(67294),g=t(85893);function o(ve){return(0,g.jsx)(xe.Z,y()(y()({},ve),{},{children:(0,g.jsx)(a.Z,{showText:function(k){return k.toHexString()},allowClear:!0,presets:[{label:"Color",colors:["#1677ff","#722ed1","#13c2c2","#52c41a","#eb2f96","#f5222d","#fa8c16","#fadb14","#fa541c","#2f54eb","#faad14","#a0d911","#000000","#5cdbd3","#b37feb","#b7eb8f","#61affe","#9254de","#36cfc9","#ff9c6e","#ff6f00","#ffc069","#28a745","#6610f2","#6f42c1","#007bff","#17a2b8","#20c997","#00cccc","#ff6666"]}]})}))}},65913:function(Ue,pe,t){var je=t(5574),y=t.n(je),xe=t(74330),a=t(67294),ce=t(85893),g=(0,a.forwardRef)(function(o,ve){(0,a.useImperativeHandle)(ve,function(){return{show:function(){$(!0)},destroy:function(){$(!1)}}});var W=(0,a.useState)(!1),k=y()(W,2),w=k[0],$=k[1];return(0,ce.jsx)(xe.Z,{spinning:w,size:"default",children:o.children})});pe.Z=g},29453:function(Ue,pe,t){t.d(pe,{A9:function(){return g},R3:function(){return $},e1:function(){return ve},rn:function(){return k}});var je=t(15009),y=t.n(je),xe=t(99289),a=t.n(xe),ce=t(63713);function g(K){return o.apply(this,arguments)}function o(){return o=a()(y()().mark(function K(ye){return y()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,(0,ce.request)("/dpanel/api/common/tag/create",{method:"POST",data:ye});case 2:return S.abrupt("return",S.sent);case 3:case"end":return S.stop()}},K)})),o.apply(this,arguments)}function ve(K){return W.apply(this,arguments)}function W(){return W=a()(y()().mark(function K(ye){return y()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,(0,ce.request)("/dpanel/api/common/tag/get-list",{method:"POST",data:ye});case 2:return S.abrupt("return",S.sent);case 3:case"end":return S.stop()}},K)})),W.apply(this,arguments)}function k(K){return w.apply(this,arguments)}function w(){return w=a()(y()().mark(function K(ye){return y()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,(0,ce.request)("/dpanel/api/common/tag/delete",{method:"POST",data:ye});case 2:return S.abrupt("return",S.sent);case 3:case"end":return S.stop()}},K)})),w.apply(this,arguments)}function $(K){return fe.apply(this,arguments)}function fe(){return fe=a()(y()().mark(function K(ye){return y()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,(0,ce.request)("/dpanel/api/pro/tag/get-url-detail",{method:"POST",data:ye});case 2:return S.abrupt("return",S.sent);case 3:case"end":return S.stop()}},K)})),fe.apply(this,arguments)}}}]);
