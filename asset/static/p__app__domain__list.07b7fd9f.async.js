"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7750],{58638:function(me,L,e){e.d(L,{Z:function(){return x}});var c=e(87462),o=e(67294),B={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z"}}]},name:"export",theme:"outlined"},i=B,A=e(84089),C=function(Z,D){return o.createElement(A.Z,(0,c.Z)({},Z,{ref:D,icon:i}))},I=o.forwardRef(C),x=I},35995:function(me,L,e){e.d(L,{Z:function(){return x}});var c=e(87462),o=e(67294),B={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M508 624a112 112 0 00112-112c0-3.28-.15-6.53-.43-9.74L498.26 623.57c3.21.28 6.45.43 9.74.43zm370.72-458.44L836 122.88a8 8 0 00-11.31 0L715.37 232.23Q624.91 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.7 119.43 136.55 191.45L112.56 835a8 8 0 000 11.31L155.25 889a8 8 0 0011.31 0l712.16-712.12a8 8 0 000-11.32zM332 512a176 176 0 01258.88-155.28l-48.62 48.62a112.08 112.08 0 00-140.92 140.92l-48.62 48.62A175.09 175.09 0 01332 512z"}},{tag:"path",attrs:{d:"M942.2 486.2Q889.4 375 816.51 304.85L672.37 449A176.08 176.08 0 01445 676.37L322.74 798.63Q407.82 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5z"}}]},name:"eye-invisible",theme:"filled"},i=B,A=e(84089),C=function(Z,D){return o.createElement(A.Z,(0,c.Z)({},Z,{ref:D,icon:i}))},I=o.forwardRef(C),x=I},36693:function(me,L,e){var c=e(87462),o=e(67294),B=e(80111),i=e(84089),A=function(x,F){return o.createElement(i.Z,(0,c.Z)({},x,{ref:F,icon:B.Z}))},C=o.forwardRef(A);L.Z=C},64789:function(me,L,e){e.d(L,{Z:function(){return x}});var c=e(87462),o=e(67294),B={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},i=B,A=e(84089),C=function(Z,D){return o.createElement(A.Z,(0,c.Z)({},Z,{ref:D,icon:i}))},I=o.forwardRef(C),x=I},85577:function(me,L,e){var c=e(87462),o=e(67294),B=e(11721),i=e(84089),A=function(x,F){return o.createElement(i.Z,(0,c.Z)({},x,{ref:F,icon:B.Z}))},C=o.forwardRef(A);L.Z=C},31199:function(me,L,e){var c=e(1413),o=e(45987),B=e(67294),i=e(40284),A=e(85893),C=["fieldProps","min","proFieldProps","max"],I=function(Z,D){var ie=Z.fieldProps,m=Z.min,le=Z.proFieldProps,d=Z.max,de=(0,o.Z)(Z,C);return(0,A.jsx)(i.Z,(0,c.Z)({valueType:"digit",fieldProps:(0,c.Z)({min:m,max:d},ie),ref:D,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:le},de))},x=B.forwardRef(I);L.Z=x},92067:function(me,L,e){e.d(L,{Z:function(){return de}});var c=e(15009),o=e.n(c),B=e(99289),i=e.n(B),A=e(13822),C=e(64789),I=e(40018),x=e(42075),F=e(83062),Z=e(83622),D=e(37413),ie=e(5251),m=e(36146),le=e(67255),d=e(85893);function de(N){return(0,d.jsx)(I.Z,{columns:[{title:m.FD.format("listContainerName"),dataIndex:"name",render:function(_,b,te,j){return(0,d.jsx)(x.Z,{direction:"vertical",style:{textAlign:"left"},children:b==null?void 0:b.Names.map(function(R){return(0,ie.fi)(R,"/")})},b.Id)}},{title:m.FD.format("listPort"),dataIndex:"ports",search:!1,width:150,render:function(_,b,te,j){var R=[],J=[];return b!=null&&b.Ports&&b.Ports.map(function(W,h){W.PublicPort?R.push(W):J.push(W)}),(0,d.jsx)(D.Z,{publicPort:R,privatePort:J,domain:[]})}},{title:m.FD.format("listImageName"),dataIndex:"image",search:!1,render:function(_,b,te,j,R){return b.Image}},{title:m.FD.format("listManage"),valueType:"option",key:"option",ellipsis:!0,width:100,render:function(_,b,te,j){return[(0,d.jsx)(F.Z,{title:m.FD.format("listManageUse"),children:(0,d.jsx)(Z.ZP,{type:"link",onClick:i()(o()().mark(function R(){var J;return o()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,(0,A.jV)({md5:b.Id});case 2:J=h.sent,N.onSelect&&N.onSelect(J.data.info);case 4:case"end":return h.stop()}},R)})),children:(0,d.jsx)(C.Z,{})},b.Id)},b.Id)]}}],rowKey:"Id",request:function(){var X=i()(o()().mark(function _(b,te,j){var R;return o()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=2,(0,A.IE)({siteTitle:b.name});case 2:return R=W.sent,W.abrupt("return",{data:R.data.list,success:!0,total:R.data.list.length});case 4:case"end":return W.stop()}},_)}));return function(_,b,te){return X.apply(this,arguments)}}(),pagination:(0,le.Oh)()})}},37413:function(me,L,e){e.d(L,{Z:function(){return le}});var c=e(19632),o=e.n(c),B=e(36146),i=e(85577),A=e(58638),C=e(36693),I=e(35995),x=e(99611),F=e(38345),Z=e(42075),D=e(66309),ie=e(55241),m=e(85893);function le(d){var de,N=new B.Uo("components.containerPort"),X=[];d.publicPort&&(X=o()(d.publicPort)),d.privatePort&&(X=[].concat(o()(X),o()(d.privatePort)));var _=(de=d.serverIp)!==null&&de!==void 0?de:"localhost";if(_!=""&&_.indexOf("http")===-1&&_.indexOf(":")>-1&&(_="[".concat(_,"]")),_==""||_=="127.0.0.1"){var b=document.location.protocol+"//"+document.location.hostname;_=b}var te=(0,m.jsxs)(F.Z,{direction:d.layout=="inline"?"row":"column",style:{width:d.layout!="inline"?600:"auto"},ghost:!0,children:[X.length>0&&(0,m.jsx)(F.Z,{title:(0,m.jsx)(i.Z,{}),subTitle:N.format("cardPortTitle"),ghost:d.ghost,bodyStyle:{maxHeight:300,overflow:"auto",margin:"10px 0"},children:X.map(function(j,R){var J;return _==""&&j.IP&&(_=j.IP),(0,m.jsx)(Z.Z,{size:"large",wrap:!0,children:(0,m.jsx)(D.Z,{color:j.PublicPort?"blue":"yellow",icon:j.PublicPort?(0,m.jsx)(A.Z,{}):"",style:{marginBottom:10,marginRight:15},children:j.PublicPort?(0,m.jsx)("a",{href:"".concat(_.indexOf("http")===0?_:"http://"+_,":").concat(j.PublicPort),target:"_blank",children:"".concat(j.PublicPort?((J=j.IP)!==null&&J!==void 0?J:"0.0.0.0")+":"+j.PublicPort+" -> ":"").concat(j.PrivatePort,"/").concat(j.Type)},"link".concat(R)):"".concat(j.PrivatePort,"/").concat(j.Type)})},"space".concat(R))})}),d.domain&&d.domain.length>0&&(0,m.jsx)(F.Z,{title:(0,m.jsx)(C.Z,{}),subTitle:N.format("cardDomainTitle"),ghost:d.ghost,children:(0,m.jsx)(Z.Z,{wrap:!0,style:{textAlign:"left"},children:d.domain&&d.domain.map(function(j,R){return(0,m.jsx)(D.Z,{color:"blue",icon:(0,m.jsx)(A.Z,{}),children:(0,m.jsx)("a",{href:j,target:"_blank",children:j})},"domain".concat(R))})})})]});return d.showInDetail?te:(0,m.jsx)(ie.Z,{placement:"right",content:te,children:(0,m.jsxs)(Z.Z,{direction:"vertical",children:[d.privatePort&&d.privatePort.length>0&&(0,m.jsxs)(D.Z,{color:"yellow",icon:(0,m.jsx)(I.Z,{}),children:[N.format("portPrivate"),": ",d.privatePort.length]}),d.publicPort&&d.publicPort.length>0&&(0,m.jsxs)(D.Z,{color:"blue",icon:(0,m.jsx)(x.Z,{}),children:[N.format("protPublic"),": ",d.publicPort.length]}),d.domain&&d.domain.length>0&&(0,m.jsx)(D.Z,{color:"geekblue",icon:(0,m.jsx)(C.Z,{}),children:d.domainTitle?d.domainTitle:"".concat(N.format("domain"),": ").concat(d.domain.length)})]})})}},7463:function(me,L,e){e.r(L),e.d(L,{default:function(){return ue}});var c=e(15009),o=e.n(c),B=e(99289),i=e.n(B),A=e(5574),C=e.n(A),I=e(1699),x=e(66554),F=e(184),Z=e(24739),D=e(97462),ie=e(5966),m=e(62370),le=e(64317),d=e(86615),de=e(31199),N=e(52688),X=e(11106),_=e(83622),b=e(92398),te=e(84567),j=e(42075),R=e(66309),J=e(71230),W=e(15746),h=e(40056),O=e(67294),Y=e(74026),l=e(3616),oe=e(36146),_e=e(92067),n=e(85893);function ge(M){var w=(0,O.useState)(!1),G=C()(w,2),H=G[0],Q=G[1],se=new oe.Uo("components.appDomain");return(0,n.jsx)(F.a,{drawerProps:{width:l.R_},trigger:(0,n.jsx)(_.ZP,{type:"primary",onClick:function(){Q(!0)},children:se.format("createSelectContainer")}),onOpenChange:function(k){Q(k)},open:H,children:(0,n.jsx)(_e.Z,{onSelect:function(k){Q(!1),M.onSelect&&M.onSelect(k)}})})}var Oe=(0,O.forwardRef)(function(M,w){var G=(0,O.useState)(!1),H=C()(G,2),Q=H[0],se=H[1],E=(0,O.useRef)(),k=(0,O.useState)(),S=C()(k,2),P=S[0],u=S[1],q=(0,O.useState)(1),$=C()(q,2),U=$[0],ee=$[1],p=new oe.Uo("components.appDomain");return(0,O.useImperativeHandle)(w,function(){return{showEdit:function(f){return i()(o()().mark(function r(){var T,ne,t;return o()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,(0,x.lQ)({id:f});case 2:ne=K.sent,t=ne.data,(T=E.current)===null||T===void 0||T.setFieldsValue({containerId:t.domain.containerId,serverName:t.domain.serverName,serverNameAlias:t.domain.setting.serverNameAlias,serverAddress:t.domain.setting.serverAddress,serverProtocol:t.domain.setting.serverProtocol,port:t.domain.setting.port,enableBlockCommonExploits:t.domain.setting.enableBlockCommonExploits,enableAssetCache:t.domain.setting.enableAssetCache,enableWs:t.domain.setting.enableWs,extraNginx:t.domain.setting.extraNginx,enableSSL:t.domain.setting.enableSSL,certName:t.domain.setting.certName,vhost:t.vhost,type:t.domain.setting.type,wwwRoot:t.domain.setting.wwwRoot,fpmRoot:t.domain.setting.fpmRoot}),u(t),se(!0);case 7:case"end":return K.stop()}},r)}))()}}}),(0,n.jsx)(F.a,{drawerProps:{forceRender:!0,width:l.R_},open:Q,onOpenChange:function(f){var r;se(f),!f&&((r=E.current)===null||r===void 0||r.resetFields())},title:p.format("createTitle"),trigger:(0,n.jsx)(_.ZP,{onClick:function(){var f;u(void 0),(f=E.current)===null||f===void 0||f.resetFields()},type:"primary",children:p.format("createTriggerButton")}),formRef:E,onFinish:function(){var re=i()(o()().mark(function f(r){var T,ne,t,ae,K;return o()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:if(!r.vhost){V.next=8;break}return V.next=3,(0,x.Ss)({id:P&&(P==null?void 0:P.domain.id)>0?P.domain.id:0,vhost:r.vhost});case 3:return ne=V.sent,V.next=6,(0,x.hZ)();case 6:V.next=11;break;case 8:return V.next=10,(0,x.Fj)({id:P&&(P==null?void 0:P.domain.id)>0?P.domain.id:0,containerId:r.containerId,serverName:r.serverName,serverNameAlias:r.serverNameAlias,serverAddress:r.serverAddress,serverProtocol:(t=r.serverProtocol)!==null&&t!==void 0?t:"http",port:parseInt((ae=r.port)!==null&&ae!==void 0?ae:"80"),enableBlockCommonExploits:r.enableBlockCommonExploits,enableAssetCache:r.enableAssetCache,enableWs:r.enableWs,enableSSL:r.enableSSL,extraNginx:r.extraNginx,certName:r.certName,wwwRoot:r.wwwRoot,fpmRoot:r.fpmRoot,type:r.type});case 10:K=V.sent;case 11:return(T=E.current)===null||T===void 0||T.resetFields(),M.onFinish(),V.abrupt("return",!0);case 14:case"end":return V.stop()}},f)}));return function(f){return re.apply(this,arguments)}}(),children:(0,n.jsx)(b.Z,{items:[{key:"1",label:p.format("createTabDomain"),destroyOnHidden:!0,children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(Z.UW,{children:[(0,n.jsx)(D.Z,{name:["enableSSL"],children:function(f){var r=f.enableSSL;return(0,n.jsx)(ie.Z,{width:"lg",label:p.format("createFormServerName"),tooltip:p.format("createFormServerNameTip"),name:"serverName",placeholder:"www.explame.com, demo.com:8807",rules:[{required:!0}],fieldProps:{addonBefore:r?"https://":"http://"},disabled:P&&P.domain.id>0})}}),(0,n.jsx)(m.Z,{label:" ",valuePropName:"checked",name:"enableSSL",children:(0,n.jsx)(te.Z,{children:"Https?"})})]}),(0,n.jsx)(le.Z,{label:p.format("createFormServerNameAlises"),name:"serverNameAlias",mode:"tags",placeholder:p.format("createFormServerNameAlisesEmpty")}),(0,n.jsx)(D.Z,{name:["enableSSL","serverName"],children:function(f){var r=f.enableSSL,T=f.serverName;if(r)return(0,n.jsxs)(j.Z.Compact,{children:[(0,n.jsx)(le.Z,{label:p.format("createFormCertName"),width:"lg",name:"certName",fieldProps:{labelRender:function(t){return t.value}},required:!0,rules:[{required:!0}],request:i()(o()().mark(function ne(){var t;return o()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,(0,x.dZ)();case 2:return t=K.sent,K.abrupt("return",t.data&&t.data.list.map(function(pe,V){return{label:(0,n.jsx)(j.Z,{wrap:!0,children:pe.domain.map(function(he,Ce){return(0,n.jsx)(R.Z,{children:he})})},V),value:"".concat(pe.domain[0])}}));case 4:case"end":return K.stop()}},ne)}))},U),(0,n.jsx)(m.Z,{label:" ",children:(0,n.jsx)(Y.Z,{domain:T?[T]:[],onFinish:function(){ee(U+1)}})})]})}}),(0,n.jsx)(d.Z.Group,{label:p.format("createFormType"),name:"type",initialValue:"proxy",options:p.option("createFormTypeOption",["proxy","redirect","fpm"]),fieldProps:{onChange:function(f){var r,T;(r=E.current)===null||r===void 0||r.setFieldValue("containerId",""),(T=E.current)===null||T===void 0||T.setFieldValue("serverAddress","")}}}),(0,n.jsxs)(j.Z.Compact,{children:[(0,n.jsx)(le.Z,{label:p.format("createFormProtocol"),tooltip:p.format("createFormProtocolTip"),initialValue:"http",name:"serverProtocol",fieldProps:{allowClear:!1},valueEnum:{http:"http",https:"https"}}),(0,n.jsx)(D.Z,{name:["containerId","type"],children:function(f){var r=f.containerId,T=f.type;return[(0,n.jsx)(ie.Z,{width:"lg",label:" ",name:"serverAddress",placeholder:p.format("createFormServerAddressEmpty"),required:!0,disabled:r,rules:[{required:!0}]},"serverAddress"),T!="redirect"&&(0,n.jsxs)(j.Z.Compact,{children:[(0,n.jsx)(m.Z,{label:" ",name:"containerId",children:(0,n.jsx)(ge,{onSelect:function(){var ne=i()(o()().mark(function t(ae){var K,pe,V,he,Ce,xe;return o()().wrap(function(De){for(;;)switch(De.prev=De.next){case 0:(K=E.current)===null||K===void 0||K.setFieldValue("serverAddress",ae.Name),(pe=E.current)===null||pe===void 0||pe.setFieldValue("containerId",ae.Id),T=="fpm"&&(V=ae.Config.Labels)!==null&&V!==void 0&&V["com.docker.compose.project"]&&((he=E.current)===null||he===void 0||he.setFieldValue("wwwRoot","/dpanel/compose/".concat((Ce=ae.Config.Labels)===null||Ce===void 0?void 0:Ce["com.docker.compose.project"],"/wwwroot")),(xe=E.current)===null||xe===void 0||xe.setFieldValue("fpmRoot","/www"));case 3:case"end":return De.stop()}},t)}));return function(t){return ne.apply(this,arguments)}}()})}),(0,n.jsx)(m.Z,{label:" ",children:(0,n.jsx)(_.ZP,{onClick:function(){var t,ae;(t=E.current)===null||t===void 0||t.setFieldValue("containerId",""),(ae=E.current)===null||ae===void 0||ae.setFieldValue("serverAddress","")},children:p.format("createUser")})})]},"selectContainer")]}})]}),(0,n.jsx)(de.Z,{label:p.format("createFormPort"),name:"port",placeholder:p.format("createFormPortEmpty")}),(0,n.jsx)(D.Z,{name:["type"],children:function(f){var r=f.type;if(r=="fpm")return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ie.Z,{name:"wwwRoot",label:"\u7F51\u7AD9\u6839\u76EE\u5F55",tooltip:"\u5FC5\u987B\u4F7F\u7528 DPanel \u5BB9\u5668\u5185\u7684\u8DEF\u5F84\u914D\u7F6E\u7F51\u7AD9\u6839\u76EE\u5F55",placeholder:"/dpanel/wwwroot"}),(0,n.jsx)(ie.Z,{name:"fpmRoot",label:"FPM \u6839\u76EE\u5F55",tooltip:"\u76F8\u5BF9\u4E8E FPM \u5BB9\u5668\u4E2D\u7684\u6587\u4EF6\u76EE\u5F55"})]})}}),(0,n.jsx)(D.Z,{name:["type"],children:function(f){var r=f.type;return r!="redirect"&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(J.Z,{children:[(0,n.jsx)(W.Z,{span:12,children:(0,n.jsx)(N.Z,{label:p.format("createFormEnableBlockCommonExploits"),name:"enableBlockCommonExploits"})}),(0,n.jsx)(W.Z,{children:(0,n.jsx)(N.Z,{width:"md",label:p.format("createFormEnableAssetCache"),name:"enableAssetCache"})})]}),(0,n.jsx)(J.Z,{children:(0,n.jsx)(W.Z,{span:12,children:(0,n.jsx)(N.Z,{label:p.format("createFormEnableWs"),name:"enableWs",initialValue:!0})})})]})}})]})},{key:"3",label:"vhost.conf",destroyOnHidden:!0,children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(h.Z,{message:p.format("createVhostTip"),showIcon:!0}),(0,n.jsx)(m.Z,{name:"vhost",label:" ",children:(0,n.jsx)(X.ZP,{height:"600px",theme:"dark",style:{backgroundColor:"#282c34"},onChange:function(){}})})]})}]})})}),fe=Oe,ye=e(5251),Ee=e(83062),Pe=e(38703);function Ie(M){var w,G=0;if(M.sslCrtCreatedAt&&M.sslCrtRenewAt){var H,Q,se=new Date,E=new Date((H=M.sslCrtRenewAt)!==null&&H!==void 0?H:""),k=new Date((Q=M.sslCrtCreatedAt)!==null&&Q!==void 0?Q:""),S=Math.ceil((E.getTime()-k.getTime())/86400/1e3),P=Math.ceil((se.getTime()-k.getTime())/86400/1e3);G=Math.min(Math.ceil(P/S*100),100)}return M.certName?(0,n.jsx)(Ee.Z,{placement:"right",title:"".concat(oe.FD.format("listExpireAt"),": ").concat((0,ye.NF)((w=M.sslCrtRenewAt)!==null&&w!==void 0?w:"")),children:(0,n.jsx)(R.Z,{icon:(0,n.jsxs)(j.Z,{children:[(0,n.jsx)(Pe.Z,{type:"circle",percent:G,status:G==100?"exception":"active",strokeWidth:20,size:14}),(0,n.jsx)("span",{})]}),children:M.certName})}):"-"}var a=e(80821),s=e(37413),v=e(55681),g=e(86548),y=e(74453),z=e(82346),ce=e(50136);function ue(){var M=(0,O.useRef)(),w=(0,O.useRef)(),G=(0,O.useState)({}),H=C()(G,2),Q=H[0],se=H[1],E=(0,z.useAccess)(),k=new oe.Uo("app");return(0,n.jsx)(y._z,{extra:[(0,n.jsx)(I.u,{access:"canSeeContainerDomainManage",children:(0,n.jsx)(fe,{ref:w,onFinish:i()(o()().mark(function S(){var P,u;return o()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return!((P=M.current)===null||P===void 0)&&P.reloadAndRest&&((u=M.current)===null||u===void 0||u.reloadAndRest()),$.next=3,(0,x.hZ)();case 3:case"end":return $.stop()}},S)}))},"addDomain")},"addDomain"),(0,n.jsx)(I.u,{access:"canSeeContainerDomainManage",children:(0,n.jsx)(a.Z,{tips:k.format("domainRestartNginxTip"),action:i()(o()().mark(function S(){return o()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,x.hZ)();case 2:return u.abrupt("return",u.sent);case 3:case"end":return u.stop()}},S)})),children:k.format("domainRestartNginx")},"nginx")},"nginx")],children:(0,n.jsx)(v.Co,{rowKey:"id",actionRef:M,columns:[{title:oe.FD.format("listDomain"),dataIndex:"serverName",render:function(P,u,q,$,U){var ee=[];return u.serverName&&ee.push(u.setting.enableSSL?"https://"+u.serverName:"http://"+u.serverName),u.setting.serverNameAlias&&u.setting.serverNameAlias.map(function(p){ee.push(u.setting.enableSSL?"https://"+p:"http://"+p)}),(0,n.jsx)(s.Z,{domain:ee,domainTitle:"".concat(u.serverName," (").concat(ee.length,")")})}},{title:oe.FD.format("listTargetAddress"),search:!1,render:function(P,u,q,$,U){return"".concat(u.setting.serverAddress,":").concat(u.setting.port)}},{title:oe.FD.format("listCert"),search:!0,dataIndex:"certName",width:300,valueEnum:Q,render:function(P,u,q,$,U){return u.setting.enableSSL?(0,n.jsx)(Ie,{certName:u.setting.certName,sslCrtRenewAt:u.setting.sslCrtRenewAt,sslCrtCreatedAt:u.setting.sslCrtCreatedAt}):"-"}},{title:oe.FD.format("listCreatedAt"),search:!1,width:180,ellipsis:!0,dataIndex:"createdAt",render:function(P,u,q,$,U){return(0,ye.NF)(u.createdAt)}}],request:function(){var S=i()(o()().mark(function P(u,q,$){var U,ee,p;return o()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,(0,x.i7)({serverName:u.serverName,certName:u.certName});case 2:return U=f.sent,f.next=5,(0,x.dZ)();case 5:return ee=f.sent,p={},U.data.list.map(function(r){r.setting.certName&&typeof r.setting.certName=="string"&&(p[r.setting.certName]=r.setting.certName)}),se(p),f.abrupt("return",{data:U.data.list&&U.data.list.map(function(r){if(ee&&ee.data.list){var T,ne;r.setting.sslCrtCreatedAt=(T=ee.data.list.find(function(t){return t.domain[0]==r.setting.certName}))===null||T===void 0?void 0:T.createdAt,r.setting.sslCrtRenewAt=(ne=ee.data.list.find(function(t){return t.domain[0]==r.setting.certName}))===null||ne===void 0?void 0:ne.renewAt}return r}),success:!0,total:U.data.list.length});case 10:case"end":return f.stop()}},P)}));return function(P,u,q){return S.apply(this,arguments)}}(),rowSelection:E.canSeeContainerDomainManage?{defaultSelectedRowKeys:[],alwaysShowAlert:!0}:void 0,tableExtraRender:function(){return(0,n.jsx)(ce.Z,{mode:"horizontal",selectedKeys:["domain"],items:[{label:(0,n.jsx)(z.Link,{to:"/app/domain/list",replace:!0,children:oe.Ob.format("container.domain.list")}),key:"domain"},{label:(0,n.jsx)(z.Link,{to:"/app/domain/cert",replace:!0,children:oe.Ob.format("container.domain.cert")}),key:"cert"}]})},actions:[{key:"edit",label:oe.FD.format("listManageEdit"),icon:(0,n.jsx)(g.Z,{}),showInContext:"manage",showInOperator:!0,action:function(P){return i()(o()().mark(function u(){var q,$,U;return o()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:$=P.finish,U=P.selectedRow,$(!0),(q=w.current)===null||q===void 0||q.showEdit(U.id);case 3:case"end":return p.stop()}},u)}))()}},{key:"delete",action:function(P){return i()(o()().mark(function u(){var q,$,U;return o()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return q=P.loading,$=P.selectedRows,U=P.finish,q(),p.abrupt("return",Promise.all([(0,x.dj)({id:$.map(function(re){return re.id})}),(0,x.hZ)()]).finally(function(){U(!0)}));case 3:case"end":return p.stop()}},u)}))()}}]},"domain-list")})}},13822:function(me,L,e){e.d(L,{IE:function(){return Z},IW:function(){return x},KK:function(){return de},LJ:function(){return X},RF:function(){return j},Re:function(){return b},aF:function(){return J},eE:function(){return le},jV:function(){return ie}});var c=e(5574),o=e.n(c),B=e(15009),i=e.n(B),A=e(99289),C=e.n(A),I=e(82346);function x(h){return F.apply(this,arguments)}function F(){return F=C()(i()().mark(function h(O){return i()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,I.request)("/dpanel/api/app/container/status",{method:"POST",data:O}));case 1:case"end":return l.stop()}},h)})),F.apply(this,arguments)}function Z(h){return D.apply(this,arguments)}function D(){return D=C()(i()().mark(function h(O){return i()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,I.request)("/dpanel/api/app/container/get-list",{data:O,method:"POST"}));case 1:case"end":return l.stop()}},h)})),D.apply(this,arguments)}function ie(h){return m.apply(this,arguments)}function m(){return m=C()(i()().mark(function h(O){return i()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,I.request)("/dpanel/api/app/container/get-detail",{data:O,method:"POST"}));case 1:case"end":return l.stop()}},h)})),m.apply(this,arguments)}function le(h){return d.apply(this,arguments)}function d(){return d=C()(i()().mark(function h(O){return i()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,I.request)("/dpanel/api/app/container/update",{data:O,method:"POST"}));case 1:case"end":return l.stop()}},h)})),d.apply(this,arguments)}function de(){return N.apply(this,arguments)}function N(){return N=C()(i()().mark(function h(){return i()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.abrupt("return",(0,I.request)("/dpanel/api/app/container/prune",{method:"POST"}));case 1:case"end":return Y.stop()}},h)})),N.apply(this,arguments)}function X(h){return _.apply(this,arguments)}function _(){return _=C()(i()().mark(function h(O){return i()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!O.enableExportToPath){l.next=2;break}return l.abrupt("return",(0,I.request)("/dpanel/api/app/container/export",{method:"GET",params:O}));case 2:return l.abrupt("return",new Promise(function(oe,_e){var n=localStorage.getItem("token"),ge=new URLSearchParams;ge.append("token",n||""),Object.entries(O).forEach(function(ye){var Ee=o()(ye,2),Pe=Ee[0],Ie=Ee[1];ge.append(Pe,String(Ie))});var Oe="/dpanel/api/app/container/export?".concat(ge.toString()),fe=document.createElement("iframe");fe.style.display="none",fe.src=Oe,document.body.appendChild(fe),setTimeout(function(){fe.parentElement&&document.body.removeChild(fe)},5e3),oe({code:200,data:"success",error:""})}));case 3:case"end":return l.stop()}},h)})),_.apply(this,arguments)}function b(h){return te.apply(this,arguments)}function te(){return te=C()(i()().mark(function h(O){return i()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,I.request)("/dpanel/api/app/container/commit",{method:"POST",data:O}));case 1:case"end":return l.stop()}},h)})),te.apply(this,arguments)}function j(h){return R.apply(this,arguments)}function R(){return R=C()(i()().mark(function h(O){return i()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,I.request)("/dpanel/api/app/container/upgrade",{method:"POST",data:O}));case 1:case"end":return l.stop()}},h)})),R.apply(this,arguments)}function J(h){return W.apply(this,arguments)}function W(){return W=C()(i()().mark(function h(O){return i()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,I.request)("/dpanel/api/app/container/copy",{method:"POST",data:O}));case 1:case"end":return l.stop()}},h)})),W.apply(this,arguments)}},40056:function(me,L,e){e.d(L,{Z:function(){return Ie}});var c=e(67294),o=e(89739),B=e(4340),i=e(97937),A=e(21640),C=e(78860),I=e(93967),x=e.n(I),F=e(29372),Z=e(64217),D=e(42550),ie=e(96159),m=e(53124),le=e(11568),d=e(14747),de=e(83559);const N=(a,s,v,g,y)=>({background:a,border:`${(0,le.bf)(g.lineWidth)} ${g.lineType} ${s}`,[`${y}-icon`]:{color:v}}),X=a=>{const{componentCls:s,motionDurationSlow:v,marginXS:g,marginSM:y,fontSize:z,fontSizeLG:ce,lineHeight:ue,borderRadiusLG:M,motionEaseInOutCirc:w,withDescriptionIconSize:G,colorText:H,colorTextHeading:Q,withDescriptionPadding:se,defaultPadding:E}=a;return{[s]:Object.assign(Object.assign({},(0,d.Wf)(a)),{position:"relative",display:"flex",alignItems:"center",padding:E,wordWrap:"break-word",borderRadius:M,[`&${s}-rtl`]:{direction:"rtl"},[`${s}-content`]:{flex:1,minWidth:0},[`${s}-icon`]:{marginInlineEnd:g,lineHeight:0},"&-description":{display:"none",fontSize:z,lineHeight:ue},"&-message":{color:Q},[`&${s}-motion-leave`]:{overflow:"hidden",opacity:1,transition:`max-height ${v} ${w}, opacity ${v} ${w},
        padding-top ${v} ${w}, padding-bottom ${v} ${w},
        margin-bottom ${v} ${w}`},[`&${s}-motion-leave-active`]:{maxHeight:0,marginBottom:"0 !important",paddingTop:0,paddingBottom:0,opacity:0}}),[`${s}-with-description`]:{alignItems:"flex-start",padding:se,[`${s}-icon`]:{marginInlineEnd:y,fontSize:G,lineHeight:0},[`${s}-message`]:{display:"block",marginBottom:g,color:Q,fontSize:ce},[`${s}-description`]:{display:"block",color:H}},[`${s}-banner`]:{marginBottom:0,border:"0 !important",borderRadius:0}}},_=a=>{const{componentCls:s,colorSuccess:v,colorSuccessBorder:g,colorSuccessBg:y,colorWarning:z,colorWarningBorder:ce,colorWarningBg:ue,colorError:M,colorErrorBorder:w,colorErrorBg:G,colorInfo:H,colorInfoBorder:Q,colorInfoBg:se}=a;return{[s]:{"&-success":N(y,g,v,a,s),"&-info":N(se,Q,H,a,s),"&-warning":N(ue,ce,z,a,s),"&-error":Object.assign(Object.assign({},N(G,w,M,a,s)),{[`${s}-description > pre`]:{margin:0,padding:0}})}}},b=a=>{const{componentCls:s,iconCls:v,motionDurationMid:g,marginXS:y,fontSizeIcon:z,colorIcon:ce,colorIconHover:ue}=a;return{[s]:{"&-action":{marginInlineStart:y},[`${s}-close-icon`]:{marginInlineStart:y,padding:0,overflow:"hidden",fontSize:z,lineHeight:(0,le.bf)(z),backgroundColor:"transparent",border:"none",outline:"none",cursor:"pointer",[`${v}-close`]:{color:ce,transition:`color ${g}`,"&:hover":{color:ue}}},"&-close-text":{color:ce,transition:`color ${g}`,"&:hover":{color:ue}}}}},te=a=>({withDescriptionIconSize:a.fontSizeHeading3,defaultPadding:`${a.paddingContentVerticalSM}px 12px`,withDescriptionPadding:`${a.paddingMD}px ${a.paddingContentHorizontalLG}px`});var j=(0,de.I$)("Alert",a=>[X(a),_(a),b(a)],te),R=function(a,s){var v={};for(var g in a)Object.prototype.hasOwnProperty.call(a,g)&&s.indexOf(g)<0&&(v[g]=a[g]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var y=0,g=Object.getOwnPropertySymbols(a);y<g.length;y++)s.indexOf(g[y])<0&&Object.prototype.propertyIsEnumerable.call(a,g[y])&&(v[g[y]]=a[g[y]]);return v};const J={success:o.Z,info:C.Z,error:B.Z,warning:A.Z},W=a=>{const{icon:s,prefixCls:v,type:g}=a,y=J[g]||null;return s?(0,ie.wm)(s,c.createElement("span",{className:`${v}-icon`},s),()=>({className:x()(`${v}-icon`,s.props.className)})):c.createElement(y,{className:`${v}-icon`})},h=a=>{const{isClosable:s,prefixCls:v,closeIcon:g,handleClose:y,ariaProps:z}=a,ce=g===!0||g===void 0?c.createElement(i.Z,null):g;return s?c.createElement("button",Object.assign({type:"button",onClick:y,className:`${v}-close-icon`,tabIndex:0},z),ce):null};var Y=c.forwardRef((a,s)=>{const{description:v,prefixCls:g,message:y,banner:z,className:ce,rootClassName:ue,style:M,onMouseEnter:w,onMouseLeave:G,onClick:H,afterClose:Q,showIcon:se,closable:E,closeText:k,closeIcon:S,action:P,id:u}=a,q=R(a,["description","prefixCls","message","banner","className","rootClassName","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action","id"]),[$,U]=c.useState(!1),ee=c.useRef(null);c.useImperativeHandle(s,()=>({nativeElement:ee.current}));const{getPrefixCls:p,direction:re,closable:f,closeIcon:r,className:T,style:ne}=(0,m.dj)("alert"),t=p("alert",g),[ae,K,pe]=j(t),V=ve=>{var je;U(!0),(je=a.onClose)===null||je===void 0||je.call(a,ve)},he=c.useMemo(()=>a.type!==void 0?a.type:z?"warning":"info",[a.type,z]),Ce=c.useMemo(()=>typeof E=="object"&&E.closeIcon||k?!0:typeof E=="boolean"?E:S!==!1&&S!==null&&S!==void 0?!0:!!f,[k,S,E,f]),xe=z&&se===void 0?!0:se,be=x()(t,`${t}-${he}`,{[`${t}-with-description`]:!!v,[`${t}-no-icon`]:!xe,[`${t}-banner`]:!!z,[`${t}-rtl`]:re==="rtl"},T,ce,ue,pe,K),De=(0,Z.Z)(q,{aria:!0,data:!0}),Me=c.useMemo(()=>typeof E=="object"&&E.closeIcon?E.closeIcon:k||(S!==void 0?S:typeof f=="object"&&f.closeIcon?f.closeIcon:r),[S,E,k,r]),Se=c.useMemo(()=>{const ve=E!=null?E:f;if(typeof ve=="object"){const{closeIcon:je}=ve;return R(ve,["closeIcon"])}return{}},[E,f]);return ae(c.createElement(F.ZP,{visible:!$,motionName:`${t}-motion`,motionAppear:!1,motionEnter:!1,onLeaveStart:ve=>({maxHeight:ve.offsetHeight}),onLeaveEnd:Q},({className:ve,style:je},Re)=>c.createElement("div",Object.assign({id:u,ref:(0,D.sQ)(ee,Re),"data-show":!$,className:x()(be,ve),style:Object.assign(Object.assign(Object.assign({},ne),M),je),onMouseEnter:w,onMouseLeave:G,onClick:H,role:"alert"},De),xe?c.createElement(W,{description:v,icon:a.icon,prefixCls:t,type:he}):null,c.createElement("div",{className:`${t}-content`},y?c.createElement("div",{className:`${t}-message`},y):null,v?c.createElement("div",{className:`${t}-description`},v):null),P?c.createElement("div",{className:`${t}-action`},P):null,c.createElement(h,{isClosable:Ce,prefixCls:t,closeIcon:Me,handleClose:V,ariaProps:Se}))))}),l=e(15671),oe=e(43144),_e=e(61120),n=e(78814),ge=e(82963);function Oe(a,s,v){return s=(0,_e.Z)(s),(0,ge.Z)(a,(0,n.Z)()?Reflect.construct(s,v||[],(0,_e.Z)(a).constructor):s.apply(a,v))}var fe=e(60136),Ee=function(a){function s(){var v;return(0,l.Z)(this,s),v=Oe(this,s,arguments),v.state={error:void 0,info:{componentStack:""}},v}return(0,fe.Z)(s,a),(0,oe.Z)(s,[{key:"componentDidCatch",value:function(g,y){this.setState({error:g,info:y})}},{key:"render",value:function(){const{message:g,description:y,id:z,children:ce}=this.props,{error:ue,info:M}=this.state,w=(M==null?void 0:M.componentStack)||null,G=typeof g=="undefined"?(ue||"").toString():g,H=typeof y=="undefined"?w:y;return ue?c.createElement(Y,{id:z,type:"error",message:G,description:c.createElement("pre",{style:{fontSize:"0.9em",overflowX:"auto"}},H)}):ce}}])}(c.Component);const Pe=Y;Pe.ErrorBoundary=Ee;var Ie=Pe}}]);
