!(function(){"use strict";var $s=Object.defineProperty,_s=Object.defineProperties;var zs=Object.getOwnPropertyDescriptors;var Pr=Object.getOwnPropertySymbols;var Us=Object.prototype.hasOwnProperty,Vs=Object.prototype.propertyIsEnumerable;var Mr=(Rt,Ze,ie)=>Ze in Rt?$s(Rt,Ze,{enumerable:!0,configurable:!0,writable:!0,value:ie}):Rt[Ze]=ie,di=(Rt,Ze)=>{for(var ie in Ze||(Ze={}))Us.call(Ze,ie)&&Mr(Rt,ie,Ze[ie]);if(Pr)for(var ie of Pr(Ze))Vs.call(Ze,ie)&&Mr(Rt,ie,Ze[ie]);return Rt},Or=(Rt,Ze)=>_s(Rt,zs(Ze));(self.webpackChunk=self.webpackChunk||[]).push([[9806],{57546:function(Rt,Ze,ie){ie.d(Ze,{Z:function(){return Qe}});var _=ie(87462),se=ie(67294),q={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM653.3 424.6l52.2 52.2a8.01 8.01 0 01-4.7 13.6l-179.4 21c-5.1.6-9.5-3.7-8.9-8.9l21-179.4c.8-6.6 8.9-9.4 13.6-4.7l52.4 52.4 256.2-256.2c3.1-3.1 8.2-3.1 11.3 0l42.4 42.4c3.1 3.1 3.1 8.2 0 11.3L653.3 424.6z"}}]},name:"import",theme:"outlined"},L=q,G=ie(84089),ve=function(ue,ge){return se.createElement(G.Z,(0,_.Z)({},ue,{ref:ge,icon:L}))},_e=se.forwardRef(ve),Qe=_e},88484:function(Rt,Ze,ie){ie.d(Ze,{Z:function(){return Qe}});var _=ie(87462),se=ie(67294),q={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},L=q,G=ie(84089),ve=function(ue,ge){return se.createElement(G.Z,(0,_.Z)({},ue,{ref:ge,icon:L}))},_e=se.forwardRef(ve),Qe=_e},12491:function(Rt,Ze,ie){ie.d(Ze,{Z:function(){return Be}});var _=ie(5574),se=ie.n(_),q=ie(3616),L=ie(24963),G=ie(36146),ve=ie(88484),_e=ie(57546),Qe=ie(62370),Ee=ie(11106),ue=ie(42075),ge=ie(83622),Ne=ie(85576),Se=ie(67294),he=ie(85893);function Be(Te){var Z=(0,Se.useContext)(L.Z),Me=Z.message,rt=Z.notice,st=(0,Se.useRef)(null),Ue=(0,Se.useState)(!1),We=se()(Ue,2),xt=We[0],dt=We[1],ht=(0,Se.useState)(""),Ye=se()(ht,2),mt=Ye[0],vt=Ye[1];(0,Se.useEffect)(function(){Te.data&&vt(Te.data)},[Te.data]);var Ut=function(){st.current&&(st.current.click(),st.current.onchange=function(Xe){if(!Xe||!Xe.target)return"";var j=new FileReader;j.onload=function(W){var Q,ae,ne=(Q=W.target)===null||Q===void 0?void 0:Q.result;if(Te.onLoad)try{Te.onLoad&&Te.onLoad(ne)}catch(me){rt.error(me);return}vt(ne),typeof Te.onImport=="function"&&(Me.success(G.FD.format("finish")),Te.onImport(ne)),(ae=st.current)!==null&&ae!==void 0&&ae.value&&(st.current.value="")};var ke=Xe.target;if(ke.files&&ke.files[0]){var le=ke.files[0];try{j.readAsText(le)}catch(W){rt.error(G.FD.format("commonContentIncorrectFormat",{name:ke.files[0].name}))}}})};return(0,he.jsxs)(he.Fragment,{children:[(0,he.jsx)(Qe.Z,{children:(0,he.jsxs)(ue.Z.Compact,{block:!0,children:[(0,he.jsx)(ge.ZP,{icon:(0,he.jsx)(ve.Z,{}),block:!0,onClick:Ut,children:Te.title}),Te.showPaset&&(0,he.jsx)(ge.ZP,{icon:(0,he.jsx)(_e.Z,{}),onClick:function(){dt(!0)}})]})}),(0,he.jsx)("input",{style:{display:"none"},type:"file",ref:st,name:"importFileInput"}),(0,he.jsx)(Ne.Z,{width:q.ob,open:xt,onCancel:function(){dt(!1)},onOk:function(){typeof Te.onImport=="function"&&(Me.success(G.FD.format("finish")),Te.onImport(mt)),dt(!1)},children:(0,he.jsx)(Ee.ZP,{height:q.Ed,theme:"dark",value:mt,onChange:function(Xe){vt(Xe)}})})]})}},66309:function(Rt,Ze,ie){ie.d(Ze,{Z:function(){return Xe}});var _=ie(67294),se=ie(93967),q=ie.n(se),L=ie(98423),G=ie(98787),ve=ie(69760),_e=ie(96159),Qe=ie(45353),Ee=ie(53124),ue=ie(11568),ge=ie(15063),Ne=ie(14747),Se=ie(83262),he=ie(83559);const Be=j=>{const{paddingXXS:ke,lineWidth:le,tagPaddingHorizontal:W,componentCls:Q,calc:ae}=j,ne=ae(W).sub(le).equal(),me=ae(ke).sub(le).equal();return{[Q]:Object.assign(Object.assign({},(0,Ne.Wf)(j)),{display:"inline-block",height:"auto",marginInlineEnd:j.marginXS,paddingInline:ne,fontSize:j.tagFontSize,lineHeight:j.tagLineHeight,whiteSpace:"nowrap",background:j.defaultBg,border:`${(0,ue.bf)(j.lineWidth)} ${j.lineType} ${j.colorBorder}`,borderRadius:j.borderRadiusSM,opacity:1,transition:`all ${j.motionDurationMid}`,textAlign:"start",position:"relative",[`&${Q}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:j.defaultColor},[`${Q}-close-icon`]:{marginInlineStart:me,fontSize:j.tagIconSize,color:j.colorIcon,cursor:"pointer",transition:`all ${j.motionDurationMid}`,"&:hover":{color:j.colorTextHeading}},[`&${Q}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${j.iconCls}-close, ${j.iconCls}-close:hover`]:{color:j.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${Q}-checkable-checked):hover`]:{color:j.colorPrimary,backgroundColor:j.colorFillSecondary},"&:active, &-checked":{color:j.colorTextLightSolid},"&-checked":{backgroundColor:j.colorPrimary,"&:hover":{backgroundColor:j.colorPrimaryHover}},"&:active":{backgroundColor:j.colorPrimaryActive}},"&-hidden":{display:"none"},[`> ${j.iconCls} + span, > span + ${j.iconCls}`]:{marginInlineStart:ne}}),[`${Q}-borderless`]:{borderColor:"transparent",background:j.tagBorderlessBg}}},Te=j=>{const{lineWidth:ke,fontSizeIcon:le,calc:W}=j,Q=j.fontSizeSM;return(0,Se.IX)(j,{tagFontSize:Q,tagLineHeight:(0,ue.bf)(W(j.lineHeightSM).mul(Q).equal()),tagIconSize:W(le).sub(W(ke).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:j.defaultBg})},Z=j=>({defaultBg:new ge.t(j.colorFillQuaternary).onBackground(j.colorBgContainer).toHexString(),defaultColor:j.colorText});var Me=(0,he.I$)("Tag",j=>{const ke=Te(j);return Be(ke)},Z),rt=function(j,ke){var le={};for(var W in j)Object.prototype.hasOwnProperty.call(j,W)&&ke.indexOf(W)<0&&(le[W]=j[W]);if(j!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Q=0,W=Object.getOwnPropertySymbols(j);Q<W.length;Q++)ke.indexOf(W[Q])<0&&Object.prototype.propertyIsEnumerable.call(j,W[Q])&&(le[W[Q]]=j[W[Q]]);return le},Ue=_.forwardRef((j,ke)=>{const{prefixCls:le,style:W,className:Q,checked:ae,onChange:ne,onClick:me}=j,De=rt(j,["prefixCls","style","className","checked","onChange","onClick"]),{getPrefixCls:Fe,tag:xe}=_.useContext(Ee.E_),Pe=Nt=>{ne==null||ne(!ae),me==null||me(Nt)},je=Fe("tag",le),[Le,et,He]=Me(je),jt=q()(je,`${je}-checkable`,{[`${je}-checkable-checked`]:ae},xe==null?void 0:xe.className,Q,et,He);return Le(_.createElement("span",Object.assign({},De,{ref:ke,style:Object.assign(Object.assign({},W),xe==null?void 0:xe.style),className:jt,onClick:Pe})))}),We=ie(98719);const xt=j=>(0,We.Z)(j,(ke,{textColor:le,lightBorderColor:W,lightColor:Q,darkColor:ae})=>({[`${j.componentCls}${j.componentCls}-${ke}`]:{color:le,background:Q,borderColor:W,"&-inverse":{color:j.colorTextLightSolid,background:ae,borderColor:ae},[`&${j.componentCls}-borderless`]:{borderColor:"transparent"}}}));var dt=(0,he.bk)(["Tag","preset"],j=>{const ke=Te(j);return xt(ke)},Z);function ht(j){return typeof j!="string"?j:j.charAt(0).toUpperCase()+j.slice(1)}const Ye=(j,ke,le)=>{const W=ht(le);return{[`${j.componentCls}${j.componentCls}-${ke}`]:{color:j[`color${le}`],background:j[`color${W}Bg`],borderColor:j[`color${W}Border`],[`&${j.componentCls}-borderless`]:{borderColor:"transparent"}}}};var mt=(0,he.bk)(["Tag","status"],j=>{const ke=Te(j);return[Ye(ke,"success","Success"),Ye(ke,"processing","Info"),Ye(ke,"error","Error"),Ye(ke,"warning","Warning")]},Z),vt=function(j,ke){var le={};for(var W in j)Object.prototype.hasOwnProperty.call(j,W)&&ke.indexOf(W)<0&&(le[W]=j[W]);if(j!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Q=0,W=Object.getOwnPropertySymbols(j);Q<W.length;Q++)ke.indexOf(W[Q])<0&&Object.prototype.propertyIsEnumerable.call(j,W[Q])&&(le[W[Q]]=j[W[Q]]);return le};const ft=_.forwardRef((j,ke)=>{const{prefixCls:le,className:W,rootClassName:Q,style:ae,children:ne,icon:me,color:De,onClose:Fe,bordered:xe=!0,visible:Pe}=j,je=vt(j,["prefixCls","className","rootClassName","style","children","icon","color","onClose","bordered","visible"]),{getPrefixCls:Le,direction:et,tag:He}=_.useContext(Ee.E_),[jt,Nt]=_.useState(!0),U=(0,L.Z)(je,["closeIcon","closable"]);_.useEffect(()=>{Pe!==void 0&&Nt(Pe)},[Pe]);const p=(0,G.o2)(De),y=(0,G.yT)(De),A=p||y,I=Object.assign(Object.assign({backgroundColor:De&&!A?De:void 0},He==null?void 0:He.style),ae),B=Le("tag",le),[J,H,re]=Me(B),de=q()(B,He==null?void 0:He.className,{[`${B}-${De}`]:A,[`${B}-has-color`]:De&&!A,[`${B}-hidden`]:!jt,[`${B}-rtl`]:et==="rtl",[`${B}-borderless`]:!xe},W,Q,H,re),ce=qe=>{qe.stopPropagation(),Fe==null||Fe(qe),!qe.defaultPrevented&&Nt(!1)},[,be]=(0,ve.Z)((0,ve.w)(j),(0,ve.w)(He),{closable:!1,closeIconRender:qe=>{const It=_.createElement("span",{className:`${B}-close-icon`,onClick:ce},qe);return(0,_e.wm)(qe,It,gt=>({onClick:ot=>{var At;(At=gt==null?void 0:gt.onClick)===null||At===void 0||At.call(gt,ot),ce(ot)},className:q()(gt==null?void 0:gt.className,`${B}-close-icon`)}))}}),Ce=typeof je.onClick=="function"||ne&&ne.type==="a",Ve=me||null,Ge=Ve?_.createElement(_.Fragment,null,Ve,ne&&_.createElement("span",null,ne)):ne,kt=_.createElement("span",Object.assign({},U,{ref:ke,className:de,style:I}),Ge,be,p&&_.createElement(dt,{key:"preset",prefixCls:B}),y&&_.createElement(mt,{key:"status",prefixCls:B}));return J(Ce?_.createElement(Qe.Z,{component:"Tag"},kt):kt)});ft.CheckableTag=Ue;var Xe=ft},34790:function(Rt,Ze,ie){ie.d(Ze,{B1:function(){return n},GA:function(){return wn},Gn:function(){return Ie},Mb:function(){return _e},TK:function(){return L},eC:function(){return Ee},vQ:function(){return zt},ys:function(){return S}});var _=ie(37205),se=ie(47421),q=ie(59119);class L{constructor(o,h,x,w){this.state=o,this.pos=h,this.explicit=x,this.view=w,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(o){let h=(0,q.qz)(this.state).resolveInner(this.pos,-1);for(;h&&o.indexOf(h.name)<0;)h=h.parent;return h?{from:h.from,to:this.pos,text:this.state.sliceDoc(h.from,this.pos),type:h.type}:null}matchBefore(o){let h=this.state.doc.lineAt(this.pos),x=Math.max(h.from,this.pos-250),w=h.text.slice(x-h.from,this.pos-h.from),O=w.search(Ne(o,!1));return O<0?null:{from:x+O,to:this.pos,text:w.slice(O)}}get aborted(){return this.abortListeners==null}addEventListener(o,h,x){o=="abort"&&this.abortListeners&&(this.abortListeners.push(h),x&&x.onDocChange&&(this.abortOnDocChange=!0))}}function G(u){let o=Object.keys(u).join(""),h=/\w/.test(o);return h&&(o=o.replace(/\w/g,"")),`[${h?"\\w":""}${o.replace(/[^\w\s]/g,"\\$&")}]`}function ve(u){let o=Object.create(null),h=Object.create(null);for(let{label:w}of u){o[w[0]]=!0;for(let O=1;O<w.length;O++)h[w[O]]=!0}let x=G(o)+G(h)+"*$";return[new RegExp("^"+x),new RegExp(x)]}function _e(u){let o=u.map(w=>typeof w=="string"?{label:w}:w),[h,x]=o.every(w=>/^\w+$/.test(w.label))?[/\w*$/,/\w+$/]:ve(o);return w=>{let O=w.matchBefore(x);return O||w.explicit?{from:O?O.from:w.pos,options:o,validFor:h}:null}}function Qe(u,o){return h=>{for(let x=syntaxTree(h.state).resolveInner(h.pos,-1);x;x=x.parent){if(u.indexOf(x.name)>-1)return o(h);if(x.type.isTop)break}return null}}function Ee(u,o){return h=>{for(let x=(0,q.qz)(h.state).resolveInner(h.pos,-1);x;x=x.parent){if(u.indexOf(x.name)>-1)return null;if(x.type.isTop)break}return o(h)}}class ue{constructor(o,h,x,w){this.completion=o,this.source=h,this.match=x,this.score=w}}function ge(u){return u.selection.main.from}function Ne(u,o){var h;let{source:x}=u,w=o&&x[0]!="^",O=x[x.length-1]!="$";return!w&&!O?u:new RegExp(`${w?"^":""}(?:${x})${O?"$":""}`,(h=u.flags)!==null&&h!==void 0?h:u.ignoreCase?"i":"")}const Se=_.q6.define();function he(u,o,h,x){let{main:w}=u.selection,O=h-w.from,N=x-w.from;return Object.assign(Object.assign({},u.changeByRange($=>{if($!=w&&h!=x&&u.sliceDoc($.from+O,$.from+N)!=u.sliceDoc(h,x))return{range:$};let z=u.toText(o);return{changes:{from:$.from+O,to:x==w.from?$.to:$.from+N,insert:z},range:_.jT.cursor($.from+O+z.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}const Be=new WeakMap;function Te(u){if(!Array.isArray(u))return u;let o=Be.get(u);return o||Be.set(u,o=_e(u)),o}const Z=_.Py.define(),Me=_.Py.define();class rt{constructor(o){this.pattern=o,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let h=0;h<o.length;){let x=(0,_.gm)(o,h),w=(0,_.nZ)(x);this.chars.push(x);let O=o.slice(h,h+w),N=O.toUpperCase();this.folded.push((0,_.gm)(N==O?O.toLowerCase():N,0)),h+=w}this.astral=o.length!=this.chars.length}ret(o,h){return this.score=o,this.matched=h,this}match(o){if(this.pattern.length==0)return this.ret(-100,[]);if(o.length<this.pattern.length)return null;let{chars:h,folded:x,any:w,precise:O,byWord:N}=this;if(h.length==1){let Dt=(0,_.gm)(o,0),hn=(0,_.nZ)(Dt),_t=hn==o.length?0:-100;if(Dt!=h[0])if(Dt==x[0])_t+=-200;else return null;return this.ret(_t,[0,hn])}let $=o.indexOf(this.pattern);if($==0)return this.ret(o.length==this.pattern.length?0:-100,[0,this.pattern.length]);let z=h.length,X=0;if($<0){for(let Dt=0,hn=Math.min(o.length,200);Dt<hn&&X<z;){let _t=(0,_.gm)(o,Dt);(_t==h[X]||_t==x[X])&&(w[X++]=Dt),Dt+=(0,_.nZ)(_t)}if(X<z)return null}let Y=0,ye=0,$e=!1,ct=0,Bt=-1,$t=-1,Sn=/[a-z]/.test(o),ln=!0;for(let Dt=0,hn=Math.min(o.length,200),_t=0;Dt<hn&&ye<z;){let Ft=(0,_.gm)(o,Dt);$<0&&(Y<z&&Ft==h[Y]&&(O[Y++]=Dt),ct<z&&(Ft==h[ct]||Ft==x[ct]?(ct==0&&(Bt=Dt),$t=Dt+1,ct++):ct=0));let fn,g=Ft<255?Ft>=48&&Ft<=57||Ft>=97&&Ft<=122?2:Ft>=65&&Ft<=90?1:0:(fn=(0,_.bg)(Ft))!=fn.toLowerCase()?1:fn!=fn.toUpperCase()?2:0;(!Dt||g==1&&Sn||_t==0&&g!=0)&&(h[ye]==Ft||x[ye]==Ft&&($e=!0)?N[ye++]=Dt:N.length&&(ln=!1)),_t=g,Dt+=(0,_.nZ)(Ft)}return ye==z&&N[0]==0&&ln?this.result(-100+($e?-200:0),N,o):ct==z&&Bt==0?this.ret(-200-o.length+($t==o.length?0:-100),[0,$t]):$>-1?this.ret(-700-o.length,[$,$+this.pattern.length]):ct==z?this.ret(-900-o.length,[Bt,$t]):ye==z?this.result(-100+($e?-200:0)+-700+(ln?0:-1100),N,o):h.length==2?null:this.result((w[0]?-700:0)+-200+-1100,w,o)}result(o,h,x){let w=[],O=0;for(let N of h){let $=N+(this.astral?(0,_.nZ)((0,_.gm)(x,N)):1);O&&w[O-1]==N?w[O-1]=$:(w[O++]=N,w[O++]=$)}return this.ret(o-x.length,w)}}class st{constructor(o){this.pattern=o,this.matched=[],this.score=0,this.folded=o.toLowerCase()}match(o){if(o.length<this.pattern.length)return null;let h=o.slice(0,this.pattern.length),x=h==this.pattern?0:h.toLowerCase()==this.folded?-200:null;return x==null?null:(this.matched=[0,h.length],this.score=x+(o.length==this.pattern.length?0:-100),this)}}const Ue=_.r$.define({combine(u){return(0,_.BO)(u,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:xt,filterStrict:!1,compareCompletions:(o,h)=>o.label.localeCompare(h.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(o,h)=>o&&h,closeOnBlur:(o,h)=>o&&h,icons:(o,h)=>o&&h,tooltipClass:(o,h)=>x=>We(o(x),h(x)),optionClass:(o,h)=>x=>We(o(x),h(x)),addToOptions:(o,h)=>o.concat(h),filterStrict:(o,h)=>o||h})}});function We(u,o){return u?o?u+" "+o:u:o}function xt(u,o,h,x,w,O){let N=u.textDirection==se.Nm.RTL,$=N,z=!1,X="top",Y,ye,$e=o.left-w.left,ct=w.right-o.right,Bt=x.right-x.left,$t=x.bottom-x.top;if($&&$e<Math.min(Bt,ct)?$=!1:!$&&ct<Math.min(Bt,$e)&&($=!0),Bt<=($?$e:ct))Y=Math.max(w.top,Math.min(h.top,w.bottom-$t))-o.top,ye=Math.min(400,$?$e:ct);else{z=!0,ye=Math.min(400,(N?o.right:w.right-o.left)-30);let Dt=w.bottom-o.bottom;Dt>=$t||Dt>o.top?Y=h.bottom-o.top:(X="bottom",Y=o.bottom-h.top)}let Sn=(o.bottom-o.top)/O.offsetHeight,ln=(o.right-o.left)/O.offsetWidth;return{style:`${X}: ${Y/Sn}px; max-width: ${ye/ln}px`,class:"cm-completionInfo-"+(z?N?"left-narrow":"right-narrow":$?"left":"right")}}function dt(u){let o=u.addToOptions.slice();return u.icons&&o.push({render(h){let x=document.createElement("div");return x.classList.add("cm-completionIcon"),h.type&&x.classList.add(...h.type.split(/\s+/g).map(w=>"cm-completionIcon-"+w)),x.setAttribute("aria-hidden","true"),x},position:20}),o.push({render(h,x,w,O){let N=document.createElement("span");N.className="cm-completionLabel";let $=h.displayLabel||h.label,z=0;for(let X=0;X<O.length;){let Y=O[X++],ye=O[X++];Y>z&&N.appendChild(document.createTextNode($.slice(z,Y)));let $e=N.appendChild(document.createElement("span"));$e.appendChild(document.createTextNode($.slice(Y,ye))),$e.className="cm-completionMatchedText",z=ye}return z<$.length&&N.appendChild(document.createTextNode($.slice(z))),N},position:50},{render(h){if(!h.detail)return null;let x=document.createElement("span");return x.className="cm-completionDetail",x.textContent=h.detail,x},position:80}),o.sort((h,x)=>h.position-x.position).map(h=>h.render)}function ht(u,o,h){if(u<=h)return{from:0,to:u};if(o<0&&(o=0),o<=u>>1){let w=Math.floor(o/h);return{from:w*h,to:(w+1)*h}}let x=Math.floor((u-o)/h);return{from:u-(x+1)*h,to:u-x*h}}class Ye{constructor(o,h,x){this.view=o,this.stateField=h,this.applyCompletion=x,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:z=>this.placeInfo(z),key:this},this.space=null,this.currentClass="";let w=o.state.field(h),{options:O,selected:N}=w.open,$=o.state.facet(Ue);this.optionContent=dt($),this.optionClass=$.optionClass,this.tooltipClass=$.tooltipClass,this.range=ht(O.length,N,$.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(o.state),this.dom.addEventListener("mousedown",z=>{let{options:X}=o.state.field(h).open;for(let Y=z.target,ye;Y&&Y!=this.dom;Y=Y.parentNode)if(Y.nodeName=="LI"&&(ye=/-(\d+)$/.exec(Y.id))&&+ye[1]<X.length){this.applyCompletion(o,X[+ye[1]]),z.preventDefault();return}}),this.dom.addEventListener("focusout",z=>{let X=o.state.field(this.stateField,!1);X&&X.tooltip&&o.state.facet(Ue).closeOnBlur&&z.relatedTarget!=o.contentDOM&&o.dispatch({effects:Me.of(null)})}),this.showOptions(O,w.id)}mount(){this.updateSel()}showOptions(o,h){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(o,h,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(o){var h;let x=o.state.field(this.stateField),w=o.startState.field(this.stateField);if(this.updateTooltipClass(o.state),x!=w){let{options:O,selected:N,disabled:$}=x.open;(!w.open||w.open.options!=O)&&(this.range=ht(O.length,N,o.state.facet(Ue).maxRenderedOptions),this.showOptions(O,x.id)),this.updateSel(),$!=((h=w.open)===null||h===void 0?void 0:h.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!$)}}updateTooltipClass(o){let h=this.tooltipClass(o);if(h!=this.currentClass){for(let x of this.currentClass.split(" "))x&&this.dom.classList.remove(x);for(let x of h.split(" "))x&&this.dom.classList.add(x);this.currentClass=h}}positioned(o){this.space=o,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let o=this.view.state.field(this.stateField),h=o.open;if((h.selected>-1&&h.selected<this.range.from||h.selected>=this.range.to)&&(this.range=ht(h.options.length,h.selected,this.view.state.facet(Ue).maxRenderedOptions),this.showOptions(h.options,o.id)),this.updateSelectedOption(h.selected)){this.destroyInfo();let{completion:x}=h.options[h.selected],{info:w}=x;if(!w)return;let O=typeof w=="string"?document.createTextNode(w):w(x);if(!O)return;"then"in O?O.then(N=>{N&&this.view.state.field(this.stateField,!1)==o&&this.addInfoPane(N,x)}).catch(N=>(0,se.OO)(this.view.state,N,"completion info")):this.addInfoPane(O,x)}}addInfoPane(o,h){this.destroyInfo();let x=this.info=document.createElement("div");if(x.className="cm-tooltip cm-completionInfo",o.nodeType!=null)x.appendChild(o),this.infoDestroy=null;else{let{dom:w,destroy:O}=o;x.appendChild(w),this.infoDestroy=O||null}this.dom.appendChild(x),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(o){let h=null;for(let x=this.list.firstChild,w=this.range.from;x;x=x.nextSibling,w++)x.nodeName!="LI"||!x.id?w--:w==o?x.hasAttribute("aria-selected")||(x.setAttribute("aria-selected","true"),h=x):x.hasAttribute("aria-selected")&&x.removeAttribute("aria-selected");return h&&vt(this.list,h),h}measureInfo(){let o=this.dom.querySelector("[aria-selected]");if(!o||!this.info)return null;let h=this.dom.getBoundingClientRect(),x=this.info.getBoundingClientRect(),w=o.getBoundingClientRect(),O=this.space;if(!O){let N=this.dom.ownerDocument.documentElement;O={left:0,top:0,right:N.clientWidth,bottom:N.clientHeight}}return w.top>Math.min(O.bottom,h.bottom)-10||w.bottom<Math.max(O.top,h.top)+10?null:this.view.state.facet(Ue).positionInfo(this.view,h,w,x,O,this.dom)}placeInfo(o){this.info&&(o?(o.style&&(this.info.style.cssText=o.style),this.info.className="cm-tooltip cm-completionInfo "+(o.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(o,h,x){const w=document.createElement("ul");w.id=h,w.setAttribute("role","listbox"),w.setAttribute("aria-expanded","true"),w.setAttribute("aria-label",this.view.state.phrase("Completions")),w.addEventListener("mousedown",N=>{N.target==w&&N.preventDefault()});let O=null;for(let N=x.from;N<x.to;N++){let{completion:$,match:z}=o[N],{section:X}=$;if(X){let $e=typeof X=="string"?X:X.name;if($e!=O&&(N>x.from||x.from==0))if(O=$e,typeof X!="string"&&X.header)w.appendChild(X.header(X));else{let ct=w.appendChild(document.createElement("completion-section"));ct.textContent=$e}}const Y=w.appendChild(document.createElement("li"));Y.id=h+"-"+N,Y.setAttribute("role","option");let ye=this.optionClass($);ye&&(Y.className=ye);for(let $e of this.optionContent){let ct=$e($,this.view.state,this.view,z);ct&&Y.appendChild(ct)}}return x.from&&w.classList.add("cm-completionListIncompleteTop"),x.to<o.length&&w.classList.add("cm-completionListIncompleteBottom"),w}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function mt(u,o){return h=>new Ye(h,u,o)}function vt(u,o){let h=u.getBoundingClientRect(),x=o.getBoundingClientRect(),w=h.height/u.offsetHeight;x.top<h.top?u.scrollTop-=(h.top-x.top)/w:x.bottom>h.bottom&&(u.scrollTop+=(x.bottom-h.bottom)/w)}function Ut(u){return(u.boost||0)*100+(u.apply?10:0)+(u.info?5:0)+(u.type?1:0)}function ft(u,o){let h=[],x=null,w=X=>{h.push(X);let{section:Y}=X.completion;if(Y){x||(x=[]);let ye=typeof Y=="string"?Y:Y.name;x.some($e=>$e.name==ye)||x.push(typeof Y=="string"?{name:ye}:Y)}},O=o.facet(Ue);for(let X of u)if(X.hasResult()){let Y=X.result.getMatch;if(X.result.filter===!1)for(let ye of X.result.options)w(new ue(ye,X.source,Y?Y(ye):[],1e9-h.length));else{let ye=o.sliceDoc(X.from,X.to),$e,ct=O.filterStrict?new st(ye):new rt(ye);for(let Bt of X.result.options)if($e=ct.match(Bt.label)){let $t=Bt.displayLabel?Y?Y(Bt,$e.matched):[]:$e.matched;w(new ue(Bt,X.source,$t,$e.score+(Bt.boost||0)))}}}if(x){let X=Object.create(null),Y=0,ye=($e,ct)=>{var Bt,$t;return((Bt=$e.rank)!==null&&Bt!==void 0?Bt:1e9)-(($t=ct.rank)!==null&&$t!==void 0?$t:1e9)||($e.name<ct.name?-1:1)};for(let $e of x.sort(ye))Y-=1e5,X[$e.name]=Y;for(let $e of h){let{section:ct}=$e.completion;ct&&($e.score+=X[typeof ct=="string"?ct:ct.name])}}let N=[],$=null,z=O.compareCompletions;for(let X of h.sort((Y,ye)=>ye.score-Y.score||z(Y.completion,ye.completion))){let Y=X.completion;!$||$.label!=Y.label||$.detail!=Y.detail||$.type!=null&&Y.type!=null&&$.type!=Y.type||$.apply!=Y.apply||$.boost!=Y.boost?N.push(X):Ut(X.completion)>Ut($)&&(N[N.length-1]=X),$=X.completion}return N}class Xe{constructor(o,h,x,w,O,N){this.options=o,this.attrs=h,this.tooltip=x,this.timestamp=w,this.selected=O,this.disabled=N}setSelected(o,h){return o==this.selected||o>=this.options.length?this:new Xe(this.options,Q(h,o),this.tooltip,this.timestamp,o,this.disabled)}static build(o,h,x,w,O,N){if(w&&!N&&o.some(X=>X.isPending))return w.setDisabled();let $=ft(o,h);if(!$.length)return w&&o.some(X=>X.isPending)?w.setDisabled():null;let z=h.facet(Ue).selectOnOpen?0:-1;if(w&&w.selected!=z&&w.selected!=-1){let X=w.options[w.selected].completion;for(let Y=0;Y<$.length;Y++)if($[Y].completion==X){z=Y;break}}return new Xe($,Q(x,z),{pos:o.reduce((X,Y)=>Y.hasResult()?Math.min(X,Y.from):X,1e8),create:et,above:O.aboveCursor},w?w.timestamp:Date.now(),z,!1)}map(o){return new Xe(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:o.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new Xe(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class j{constructor(o,h,x){this.active=o,this.id=h,this.open=x}static start(){return new j(ae,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(o){let{state:h}=o,x=h.facet(Ue),O=(x.override||h.languageDataAt("autocomplete",ge(h)).map(Te)).map(z=>(this.active.find(Y=>Y.source==z)||new me(z,this.active.some(Y=>Y.state!=0)?1:0)).update(o,x));O.length==this.active.length&&O.every((z,X)=>z==this.active[X])&&(O=this.active);let N=this.open,$=o.effects.some(z=>z.is(xe));N&&o.docChanged&&(N=N.map(o.changes)),o.selection||O.some(z=>z.hasResult()&&o.changes.touchesRange(z.from,z.to))||!ke(O,this.active)||$?N=Xe.build(O,h,this.id,N,x,$):N&&N.disabled&&!O.some(z=>z.isPending)&&(N=null),!N&&O.every(z=>!z.isPending)&&O.some(z=>z.hasResult())&&(O=O.map(z=>z.hasResult()?new me(z.source,0):z));for(let z of o.effects)z.is(Pe)&&(N=N&&N.setSelected(z.value,this.id));return O==this.active&&N==this.open?this:new j(O,this.id,N)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?le:W}}function ke(u,o){if(u==o)return!0;for(let h=0,x=0;;){for(;h<u.length&&!u[h].hasResult();)h++;for(;x<o.length&&!o[x].hasResult();)x++;let w=h==u.length,O=x==o.length;if(w||O)return w==O;if(u[h++].result!=o[x++].result)return!1}}const le={"aria-autocomplete":"list"},W={};function Q(u,o){let h={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":u};return o>-1&&(h["aria-activedescendant"]=u+"-"+o),h}const ae=[];function ne(u,o){if(u.isUserEvent("input.complete")){let x=u.annotation(Se);if(x&&o.activateOnCompletion(x))return 12}let h=u.isUserEvent("input.type");return h&&o.activateOnTyping?5:h?1:u.isUserEvent("delete.backward")?2:u.selection?8:u.docChanged?16:0}class me{constructor(o,h,x=!1){this.source=o,this.state=h,this.explicit=x}hasResult(){return!1}get isPending(){return this.state==1}update(o,h){let x=ne(o,h),w=this;(x&8||x&16&&this.touches(o))&&(w=new me(w.source,0)),x&4&&w.state==0&&(w=new me(this.source,1)),w=w.updateFor(o,x);for(let O of o.effects)if(O.is(Z))w=new me(w.source,1,O.value);else if(O.is(Me))w=new me(w.source,0);else if(O.is(xe))for(let N of O.value)N.source==w.source&&(w=N);return w}updateFor(o,h){return this.map(o.changes)}map(o){return this}touches(o){return o.changes.touchesRange(ge(o.state))}}class De extends me{constructor(o,h,x,w,O,N){super(o,3,h),this.limit=x,this.result=w,this.from=O,this.to=N}hasResult(){return!0}updateFor(o,h){var x;if(!(h&3))return this.map(o.changes);let w=this.result;w.map&&!o.changes.empty&&(w=w.map(w,o.changes));let O=o.changes.mapPos(this.from),N=o.changes.mapPos(this.to,1),$=ge(o.state);if($>N||!w||h&2&&(ge(o.startState)==this.from||$<this.limit))return new me(this.source,h&4?1:0);let z=o.changes.mapPos(this.limit);return Fe(w.validFor,o.state,O,N)?new De(this.source,this.explicit,z,w,O,N):w.update&&(w=w.update(w,O,N,new L(o.state,$,!1)))?new De(this.source,this.explicit,z,w,w.from,(x=w.to)!==null&&x!==void 0?x:ge(o.state)):new me(this.source,1,this.explicit)}map(o){return o.empty?this:(this.result.map?this.result.map(this.result,o):this.result)?new De(this.source,this.explicit,o.mapPos(this.limit),this.result,o.mapPos(this.from),o.mapPos(this.to,1)):new me(this.source,0)}touches(o){return o.changes.touchesRange(this.from,this.to)}}function Fe(u,o,h,x){if(!u)return!1;let w=o.sliceDoc(h,x);return typeof u=="function"?u(w,h,x,o):Ne(u,!0).test(w)}const xe=_.Py.define({map(u,o){return u.map(h=>h.map(o))}}),Pe=_.Py.define(),je=_.QQ.define({create(){return j.start()},update(u,o){return u.update(o)},provide:u=>[se.hJ.from(u,o=>o.tooltip),se.tk.contentAttributes.from(u,o=>o.attrs)]});function Le(u,o){const h=o.completion.apply||o.completion.label;let x=u.state.field(je).active.find(w=>w.source==o.source);return x instanceof De?(typeof h=="string"?u.dispatch(Object.assign(Object.assign({},he(u.state,h,x.from,x.to)),{annotations:Se.of(o.completion)})):h(u,o.completion,x.from,x.to),!0):!1}const et=mt(je,Le);function He(u,o="option"){return h=>{let x=h.state.field(je,!1);if(!x||!x.open||x.open.disabled||Date.now()-x.open.timestamp<h.state.facet(Ue).interactionDelay)return!1;let w=1,O;o=="page"&&(O=(0,se.gB)(h,x.open.tooltip))&&(w=Math.max(2,Math.floor(O.dom.offsetHeight/O.dom.querySelector("li").offsetHeight)-1));let{length:N}=x.open.options,$=x.open.selected>-1?x.open.selected+w*(u?1:-1):u?0:N-1;return $<0?$=o=="page"?0:N-1:$>=N&&($=o=="page"?N-1:0),h.dispatch({effects:Pe.of($)}),!0}}const jt=u=>{let o=u.state.field(je,!1);return u.state.readOnly||!o||!o.open||o.open.selected<0||o.open.disabled||Date.now()-o.open.timestamp<u.state.facet(Ue).interactionDelay?!1:Le(u,o.open.options[o.open.selected])},Nt=u=>u.state.field(je,!1)?(u.dispatch({effects:Z.of(!0)}),!0):!1,U=u=>{let o=u.state.field(je,!1);return!o||!o.active.some(h=>h.state!=0)?!1:(u.dispatch({effects:Me.of(null)}),!0)};class p{constructor(o,h){this.active=o,this.context=h,this.time=Date.now(),this.updates=[],this.done=void 0}}const y=50,A=1e3,I=se.lg.fromClass(class{constructor(u){this.view=u,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let o of u.state.field(je).active)o.isPending&&this.startQuery(o)}update(u){let o=u.state.field(je),h=u.state.facet(Ue);if(!u.selectionSet&&!u.docChanged&&u.startState.field(je)==o)return;let x=u.transactions.some(O=>{let N=ne(O,h);return N&8||(O.selection||O.docChanged)&&!(N&3)});for(let O=0;O<this.running.length;O++){let N=this.running[O];if(x||N.context.abortOnDocChange&&u.docChanged||N.updates.length+u.transactions.length>y&&Date.now()-N.time>A){for(let $ of N.context.abortListeners)try{$()}catch(z){(0,se.OO)(this.view.state,z)}N.context.abortListeners=null,this.running.splice(O--,1)}else N.updates.push(...u.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),u.transactions.some(O=>O.effects.some(N=>N.is(Z)))&&(this.pendingStart=!0);let w=this.pendingStart?50:h.activateOnTypingDelay;if(this.debounceUpdate=o.active.some(O=>O.isPending&&!this.running.some(N=>N.active.source==O.source))?setTimeout(()=>this.startUpdate(),w):-1,this.composing!=0)for(let O of u.transactions)O.isUserEvent("input.type")?this.composing=2:this.composing==2&&O.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:u}=this.view,o=u.field(je);for(let h of o.active)h.isPending&&!this.running.some(x=>x.active.source==h.source)&&this.startQuery(h);this.running.length&&o.open&&o.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Ue).updateSyncTime))}startQuery(u){let{state:o}=this.view,h=ge(o),x=new L(o,h,u.explicit,this.view),w=new p(u,x);this.running.push(w),Promise.resolve(u.source(x)).then(O=>{w.context.aborted||(w.done=O||null,this.scheduleAccept())},O=>{this.view.dispatch({effects:Me.of(null)}),(0,se.OO)(this.view.state,O)})}scheduleAccept(){this.running.every(u=>u.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Ue).updateSyncTime))}accept(){var u;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let o=[],h=this.view.state.facet(Ue),x=this.view.state.field(je);for(let w=0;w<this.running.length;w++){let O=this.running[w];if(O.done===void 0)continue;if(this.running.splice(w--,1),O.done){let $=ge(O.updates.length?O.updates[0].startState:this.view.state),z=Math.min($,O.done.from+(O.active.explicit?0:1)),X=new De(O.active.source,O.active.explicit,z,O.done,O.done.from,(u=O.done.to)!==null&&u!==void 0?u:$);for(let Y of O.updates)X=X.update(Y,h);if(X.hasResult()){o.push(X);continue}}let N=x.active.find($=>$.source==O.active.source);if(N&&N.isPending)if(O.done==null){let $=new me(O.active.source,0);for(let z of O.updates)$=$.update(z,h);$.isPending||o.push($)}else this.startQuery(N)}(o.length||x.open&&x.open.disabled)&&this.view.dispatch({effects:xe.of(o)})}},{eventHandlers:{blur(u){let o=this.view.state.field(je,!1);if(o&&o.tooltip&&this.view.state.facet(Ue).closeOnBlur){let h=o.open&&(0,se.gB)(this.view,o.open.tooltip);(!h||!h.dom.contains(u.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:Me.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Z.of(!1)}),20),this.composing=0}}}),B=typeof navigator=="object"&&/Win/.test(navigator.platform),J=_.Wl.highest(se.tk.domEventHandlers({keydown(u,o){let h=o.state.field(je,!1);if(!h||!h.open||h.open.disabled||h.open.selected<0||u.key.length>1||u.ctrlKey&&!(B&&u.altKey)||u.metaKey)return!1;let x=h.open.options[h.open.selected],w=h.active.find(N=>N.source==x.source),O=x.completion.commitCharacters||w.result.commitCharacters;return O&&O.indexOf(u.key)>-1&&Le(o,x),!1}})),H=se.tk.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xB7\xB7\xB7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25CB'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25CC'"}},".cm-completionIcon-variable":{"&:after":{content:"'\u{1D465}'"}},".cm-completionIcon-constant":{"&:after":{content:"'\u{1D436}'"}},".cm-completionIcon-type":{"&:after":{content:"'\u{1D461}'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222A'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25A1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\u{1F511}\uFE0E'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25A2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class re{constructor(o,h,x,w){this.field=o,this.line=h,this.from=x,this.to=w}}class de{constructor(o,h,x){this.field=o,this.from=h,this.to=x}map(o){let h=o.mapPos(this.from,-1,_.gc.TrackDel),x=o.mapPos(this.to,1,_.gc.TrackDel);return h==null||x==null?null:new de(this.field,h,x)}}class ce{constructor(o,h){this.lines=o,this.fieldPositions=h}instantiate(o,h){let x=[],w=[h],O=o.doc.lineAt(h),N=/^\s*/.exec(O.text)[0];for(let z of this.lines){if(x.length){let X=N,Y=/^\t*/.exec(z)[0].length;for(let ye=0;ye<Y;ye++)X+=o.facet(q.c);w.push(h+X.length-Y),z=X+z.slice(Y)}x.push(z),h+=z.length+1}let $=this.fieldPositions.map(z=>new de(z.field,w[z.line]+z.from,w[z.line]+z.to));return{text:x,ranges:$}}static parse(o){let h=[],x=[],w=[],O;for(let N of o.split(/\r\n?|\n/)){for(;O=/[#$]\{(?:(\d+)(?::([^}]*))?|((?:\\[{}]|[^}])*))\}/.exec(N);){let $=O[1]?+O[1]:null,z=O[2]||O[3]||"",X=-1,Y=z.replace(/\\[{}]/g,ye=>ye[1]);for(let ye=0;ye<h.length;ye++)($!=null?h[ye].seq==$:Y&&h[ye].name==Y)&&(X=ye);if(X<0){let ye=0;for(;ye<h.length&&($==null||h[ye].seq!=null&&h[ye].seq<$);)ye++;h.splice(ye,0,{seq:$,name:Y}),X=ye;for(let $e of w)$e.field>=X&&$e.field++}w.push(new re(X,x.length,O.index,O.index+Y.length)),N=N.slice(0,O.index)+z+N.slice(O.index+O[0].length)}N=N.replace(/\\([{}])/g,($,z,X)=>{for(let Y of w)Y.line==x.length&&Y.from>X&&(Y.from--,Y.to--);return z}),x.push(N)}return new ce(x,w)}}let be=se.p.widget({widget:new class extends se.l9{toDOM(){let u=document.createElement("span");return u.className="cm-snippetFieldPosition",u}ignoreEvent(){return!1}}}),Ce=se.p.mark({class:"cm-snippetField"});class Ve{constructor(o,h){this.ranges=o,this.active=h,this.deco=se.p.set(o.map(x=>(x.from==x.to?be:Ce).range(x.from,x.to)))}map(o){let h=[];for(let x of this.ranges){let w=x.map(o);if(!w)return null;h.push(w)}return new Ve(h,this.active)}selectionInsideField(o){return o.ranges.every(h=>this.ranges.some(x=>x.field==this.active&&x.from<=h.from&&x.to>=h.to))}}const Ge=_.Py.define({map(u,o){return u&&u.map(o)}}),kt=_.Py.define(),qe=_.QQ.define({create(){return null},update(u,o){for(let h of o.effects){if(h.is(Ge))return h.value;if(h.is(kt)&&u)return new Ve(u.ranges,h.value)}return u&&o.docChanged&&(u=u.map(o.changes)),u&&o.selection&&!u.selectionInsideField(o.selection)&&(u=null),u},provide:u=>se.tk.decorations.from(u,o=>o?o.deco:se.p.none)});function It(u,o){return _.jT.create(u.filter(h=>h.field==o).map(h=>_.jT.range(h.from,h.to)))}function gt(u){let o=ce.parse(u);return(h,x,w,O)=>{let{text:N,ranges:$}=o.instantiate(h.state,w),{main:z}=h.state.selection,X={changes:{from:w,to:O==z.from?z.to:O,insert:_.xv.of(N)},scrollIntoView:!0,annotations:x?[Se.of(x),_.YW.userEvent.of("input.complete")]:void 0};if($.length&&(X.selection=It($,0)),$.some(Y=>Y.field>0)){let Y=new Ve($,0),ye=X.effects=[Ge.of(Y)];h.state.field(qe,!1)===void 0&&ye.push(_.Py.appendConfig.of([qe,ze,nt,H]))}h.dispatch(h.state.update(X))}}function ot(u){return({state:o,dispatch:h})=>{let x=o.field(qe,!1);if(!x||u<0&&x.active==0)return!1;let w=x.active+u,O=u>0&&!x.ranges.some(N=>N.field==w+u);return h(o.update({selection:It(x.ranges,w),effects:Ge.of(O?null:new Ve(x.ranges,w)),scrollIntoView:!0})),!0}}const At=({state:u,dispatch:o})=>u.field(qe,!1)?(o(u.update({effects:Ge.of(null)})),!0):!1,tt=ot(1),pt=ot(-1);function pe(u){let o=u.field(qe,!1);return!!(o&&o.ranges.some(h=>h.field==o.active+1))}function Je(u){let o=u.field(qe,!1);return!!(o&&o.active>0)}const lt=[{key:"Tab",run:tt,shift:pt},{key:"Escape",run:At}],at=_.r$.define({combine(u){return u.length?u[0]:lt}}),ze=_.Wl.highest(se.$f.compute([at],u=>u.facet(at)));function Ie(u,o){return Object.assign(Object.assign({},o),{apply:gt(u)})}const nt=se.tk.domEventHandlers({mousedown(u,o){let h=o.state.field(qe,!1),x;if(!h||(x=o.posAtCoords({x:u.clientX,y:u.clientY}))==null)return!1;let w=h.ranges.find(O=>O.from<=x&&O.to>=x);return!w||w.field==h.active?!1:(o.dispatch({selection:It(h.ranges,w.field),effects:Ge.of(h.ranges.some(O=>O.field>w.field)?new Ve(h.ranges,w.field):null),scrollIntoView:!0}),!0)}});function ut(u){let o=u.replace(/[\]\-\\]/g,"\\$&");try{return new RegExp(`[\\p{Alphabetic}\\p{Number}_${o}]+`,"ug")}catch(h){return new RegExp(`[w${o}]`,"g")}}function St(u,o){return new RegExp(o(u.source),u.unicode?"u":"")}const Tt=null;function Lt(u){return Tt[u]||(Tt[u]=new WeakMap)}function Qt(u,o,h,x,w){for(let O=u.iterLines(),N=0;!O.next().done;){let{value:$}=O,z;for(o.lastIndex=0;z=o.exec($);)if(!x[z[0]]&&N+z.index!=w&&(h.push({type:"text",label:z[0]}),x[z[0]]=!0,h.length>=2e3))return;N+=$.length+1}}function Mt(u,o,h,x,w){let O=u.length>=1e3,N=O&&o.get(u);if(N)return N;let $=[],z=Object.create(null);if(u.children){let X=0;for(let Y of u.children){if(Y.length>=1e3)for(let ye of Mt(Y,o,h,x-X,w-X))z[ye.label]||(z[ye.label]=!0,$.push(ye));else Qt(Y,h,$,z,w-X);X+=Y.length+1}}else Qt(u,h,$,z,w);return O&&$.length<2e3&&o.set(u,$),$}const rn=u=>{let o=u.state.languageDataAt("wordChars",u.pos).join(""),h=ut(o),x=u.matchBefore(St(h,N=>N+"$"));if(!x&&!u.explicit)return null;let w=x?x.from:u.pos,O=Mt(u.state.doc,Lt(o),h,5e4,w);return{from:w,options:O,validFor:St(h,N=>"^"+N)}},Ot={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Oe=_.Py.define({map(u,o){let h=o.mapPos(u,-1,_.gc.TrackAfter);return h==null?void 0:h}}),bt=new class extends _.uU{};bt.startSide=1,bt.endSide=-1;const Jt=_.QQ.define({create(){return _.Xs.empty},update(u,o){if(u=u.map(o.changes),o.selection){let h=o.state.doc.lineAt(o.selection.main.head);u=u.update({filter:x=>x>=h.from&&x<=h.to})}for(let h of o.effects)h.is(Oe)&&(u=u.update({add:[bt.range(h.value,h.value+1)]}));return u}});function zt(){return[Xt,Jt]}const Ht="()[]{}<>\xAB\xBB\xBB\xAB\uFF3B\uFF3D\uFF5B\uFF5D";function Yt(u){for(let o=0;o<Ht.length;o+=2)if(Ht.charCodeAt(o)==u)return Ht.charAt(o+1);return(0,_.bg)(u<128?u:u+1)}function Et(u,o){return u.languageDataAt("closeBrackets",o)[0]||Ot}const gn=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),Xt=se.tk.inputHandler.of((u,o,h,x)=>{if((gn?u.composing:u.compositionStarted)||u.state.readOnly)return!1;let w=u.state.selection.main;if(x.length>2||x.length==2&&(0,_.nZ)((0,_.gm)(x,0))==1||o!=w.from||h!=w.to)return!1;let O=Ct(u.state,x);return O?(u.dispatch(O),!0):!1}),wn=[{key:"Backspace",run:({state:u,dispatch:o})=>{if(u.readOnly)return!1;let x=Et(u,u.selection.main.head).brackets||Ot.brackets,w=null,O=u.changeByRange(N=>{if(N.empty){let $=pn(u.doc,N.head);for(let z of x)if(z==$&&qt(u.doc,N.head)==Yt((0,_.gm)(z,0)))return{changes:{from:N.head-z.length,to:N.head+z.length},range:_.jT.cursor(N.head-z.length)}}return{range:w=N}});return w||o(u.update(O,{scrollIntoView:!0,userEvent:"delete.backward"})),!w}}];function Ct(u,o){let h=Et(u,u.selection.main.head),x=h.brackets||Ot.brackets;for(let w of x){let O=Yt((0,_.gm)(w,0));if(o==w)return O==w?on(u,w,x.indexOf(w+w+w)>-1,h):xn(u,w,O,h.before||Ot.before);if(o==O&&en(u,u.selection.main.from))return an(u,w,O)}return null}function en(u,o){let h=!1;return u.field(Jt).between(0,u.doc.length,x=>{x==o&&(h=!0)}),h}function qt(u,o){let h=u.sliceString(o,o+2);return h.slice(0,(0,_.nZ)((0,_.gm)(h,0)))}function pn(u,o){let h=u.sliceString(o-2,o);return(0,_.nZ)((0,_.gm)(h,0))==h.length?h:h.slice(1)}function xn(u,o,h,x){let w=null,O=u.changeByRange(N=>{if(!N.empty)return{changes:[{insert:o,from:N.from},{insert:h,from:N.to}],effects:Oe.of(N.to+o.length),range:_.jT.range(N.anchor+o.length,N.head+o.length)};let $=qt(u.doc,N.head);return!$||/\s/.test($)||x.indexOf($)>-1?{changes:{insert:o+h,from:N.head},effects:Oe.of(N.head+o.length),range:_.jT.cursor(N.head+o.length)}:{range:w=N}});return w?null:u.update(O,{scrollIntoView:!0,userEvent:"input.type"})}function an(u,o,h){let x=null,w=u.changeByRange(O=>O.empty&&qt(u.doc,O.head)==h?{changes:{from:O.head,to:O.head+h.length,insert:h},range:_.jT.cursor(O.head+h.length)}:x={range:O});return x?null:u.update(w,{scrollIntoView:!0,userEvent:"input.type"})}function on(u,o,h,x){let w=x.stringPrefixes||Ot.stringPrefixes,O=null,N=u.changeByRange($=>{if(!$.empty)return{changes:[{insert:o,from:$.from},{insert:o,from:$.to}],effects:Oe.of($.to+o.length),range:_.jT.range($.anchor+o.length,$.head+o.length)};let z=$.head,X=qt(u.doc,z),Y;if(X==o){if(cn(u,z))return{changes:{insert:o+o,from:z},effects:Oe.of(z+o.length),range:_.jT.cursor(z+o.length)};if(en(u,z)){let $e=h&&u.sliceDoc(z,z+o.length*3)==o+o+o?o+o+o:o;return{changes:{from:z,to:z+$e.length,insert:$e},range:_.jT.cursor(z+$e.length)}}}else{if(h&&u.sliceDoc(z-2*o.length,z)==o+o&&(Y=vn(u,z-2*o.length,w))>-1&&cn(u,Y))return{changes:{insert:o+o+o+o,from:z},effects:Oe.of(z+o.length),range:_.jT.cursor(z+o.length)};if(u.charCategorizer(z)(X)!=_.D0.Word&&vn(u,z,w)>-1&&!Zt(u,z,o,w))return{changes:{insert:o+o,from:z},effects:Oe.of(z+o.length),range:_.jT.cursor(z+o.length)}}return{range:O=$}});return O?null:u.update(N,{scrollIntoView:!0,userEvent:"input.type"})}function cn(u,o){let h=(0,q.qz)(u).resolveInner(o+1);return h.parent&&h.from==o}function Zt(u,o,h,x){let w=(0,q.qz)(u).resolveInner(o,-1),O=x.reduce((N,$)=>Math.max(N,$.length),0);for(let N=0;N<5;N++){let $=u.sliceDoc(w.from,Math.min(w.to,w.from+h.length+O)),z=$.indexOf(h);if(!z||z>-1&&x.indexOf($.slice(0,z))>-1){let Y=w.firstChild;for(;Y&&Y.from==w.from&&Y.to-Y.from>h.length+z;){if(u.sliceDoc(Y.to-h.length,Y.to)==h)return!1;Y=Y.firstChild}return!0}let X=w.to==o&&w.parent;if(!X)break;w=X}return!1}function vn(u,o,h){let x=u.charCategorizer(o);if(x(u.sliceDoc(o-1,o))!=_.D0.Word)return o;for(let w of h){let O=o-w.length;if(u.sliceDoc(O,o)==w&&x(u.sliceDoc(O-1,O))!=_.D0.Word)return O}return-1}function S(u={}){return[J,je,Ue.of(u),I,i,H]}const n=[{key:"Ctrl-Space",run:Nt},{mac:"Alt-`",run:Nt},{key:"Escape",run:U},{key:"ArrowDown",run:He(!0)},{key:"ArrowUp",run:He(!1)},{key:"PageDown",run:He(!0,"page")},{key:"PageUp",run:He(!1,"page")},{key:"Enter",run:jt}],i=_.Wl.highest(se.$f.computeN([Ue],u=>u.facet(Ue).defaultKeymap?[n]:[]));function a(u){let o=u.field(je,!1);return o&&o.active.some(h=>h.isPending)?"pending":o&&o.active.some(h=>h.state!=0)?"active":null}const d=new WeakMap;function v(u){var o;let h=(o=u.field(je,!1))===null||o===void 0?void 0:o.open;if(!h||h.disabled)return[];let x=d.get(h.options);return x||d.set(h.options,x=h.options.map(w=>w.completion)),x}function k(u){var o;let h=(o=u.field(je,!1))===null||o===void 0?void 0:o.open;return h&&!h.disabled&&h.selected>=0?h.options[h.selected].completion:null}function P(u){var o;let h=(o=u.field(je,!1))===null||o===void 0?void 0:o.open;return h&&!h.disabled&&h.selected>=0?h.selected:null}function D(u){return Pe.of(u)}},59119:function(Rt,Ze,ie){ie.d(Ze,{Be:function(){return st},Dv:function(){return A},Gn:function(){return W},K0:function(){return ke},KC:function(){return Ee},Qf:function(){return Mt},R_:function(){return Yt},SQ:function(){return ue},SS:function(){return j},Um:function(){return Zt},a0:function(){return an},c:function(){return ft},c6:function(){return vt},e7:function(){return Je},il:function(){return k},kU:function(){return Qe},mi:function(){return Lt},n$:function(){return xn},nF:function(){return bt},nY:function(){return U},pp:function(){return _e},qp:function(){return Ne},qz:function(){return Se},ri:function(){return mt},rs:function(){return p},tC:function(){return jt},uj:function(){return Q},vw:function(){return Le},x0:function(){return y},y1:function(){return Xe},ze:function(){return He}});var _=ie(41113),se=ie(37205),q=ie(47421),L=ie(35524),G=ie(28699),ve;const _e=new _.md;function Qe(g){return se.r$.define({combine:g?l=>l.concat(g):void 0})}const Ee=new _.md;class ue{constructor(l,f,b=[],T=""){this.data=l,this.name=T,se.yy.prototype.hasOwnProperty("tree")||Object.defineProperty(se.yy.prototype,"tree",{get(){return Se(this)}}),this.parser=f,this.extension=[Ye.of(this),se.yy.languageData.of((E,R,K)=>{let V=ge(E,R,K),oe=V.type.prop(_e);if(!oe)return[];let we=E.facet(oe),yt=V.type.prop(Ee);if(yt){let tn=V.resolve(R-V.from,K);for(let Vt of yt)if(Vt.test(tn,E)){let mn=E.facet(Vt.facet);return Vt.type=="replace"?mn:mn.concat(we)}}return we})].concat(b)}isActiveAt(l,f,b=-1){return ge(l,f,b).type.prop(_e)==this.data}findRegions(l){let f=l.facet(Ye);if((f==null?void 0:f.data)==this.data)return[{from:0,to:l.doc.length}];if(!f||!f.allowsNesting)return[];let b=[],T=(E,R)=>{if(E.prop(_e)==this.data){b.push({from:R,to:R+E.length});return}let K=E.prop(_.md.mounted);if(K){if(K.tree.prop(_e)==this.data){if(K.overlay)for(let V of K.overlay)b.push({from:V.from+R,to:V.to+R});else b.push({from:R,to:R+E.length});return}else if(K.overlay){let V=b.length;if(T(K.tree,K.overlay[0].from+R),b.length>V)return}}for(let V=0;V<E.children.length;V++){let oe=E.children[V];oe instanceof _.mp&&T(oe,E.positions[V]+R)}};return T(Se(l),0),b}get allowsNesting(){return!0}}ue.setState=se.Py.define();function ge(g,l,f){let b=g.facet(Ye),T=Se(g).topNode;if(!b||b.allowsNesting)for(let E=T;E;E=E.enter(l,f,_.vj.ExcludeBuffers))E.type.isTop&&(T=E);return T}class Ne extends ue{constructor(l,f,b){super(l,f,[],b),this.parser=f}static define(l){let f=Qe(l.languageData);return new Ne(f,l.parser.configure({props:[_e.add(b=>b.isTop?f:void 0)]}),l.name)}configure(l,f){return new Ne(this.data,this.parser.configure(l),f||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function Se(g){let l=g.field(ue.state,!1);return l?l.tree:_.mp.empty}function he(g,l,f=50){var b;let T=(b=g.field(ue.state,!1))===null||b===void 0?void 0:b.context;if(!T)return null;let E=T.viewport;T.updateViewport({from:0,to:l});let R=T.isDone(l)||T.work(f,l)?T.tree:null;return T.updateViewport(E),R}function Be(g,l=g.doc.length){var f;return((f=g.field(ue.state,!1))===null||f===void 0?void 0:f.context.isDone(l))||!1}function Te(g,l=g.viewport.to,f=100){let b=he(g.state,l,f);return b!=Se(g.state)&&g.dispatch({}),!!b}function Z(g){var l;return((l=g.plugin(ht))===null||l===void 0?void 0:l.isWorking())||!1}class Me{constructor(l){this.doc=l,this.cursorPos=0,this.string="",this.cursor=l.iter()}get length(){return this.doc.length}syncTo(l){return this.string=this.cursor.next(l-this.cursorPos).value,this.cursorPos=l+this.string.length,this.cursorPos-this.string.length}chunk(l){return this.syncTo(l),this.string}get lineChunks(){return!0}read(l,f){let b=this.cursorPos-this.string.length;return l<b||f>=this.cursorPos?this.doc.sliceString(l,f):this.string.slice(l-b,f-b)}}let rt=null;class st{constructor(l,f,b=[],T,E,R,K,V){this.parser=l,this.state=f,this.fragments=b,this.tree=T,this.treeLen=E,this.viewport=R,this.skipped=K,this.scheduleOn=V,this.parse=null,this.tempSkipped=[]}static create(l,f,b){return new st(l,f,[],_.mp.empty,0,b,[],null)}startParse(){return this.parser.startParse(new Me(this.state.doc),this.fragments)}work(l,f){return f!=null&&f>=this.state.doc.length&&(f=void 0),this.tree!=_.mp.empty&&this.isDone(f!=null?f:this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var b;if(typeof l=="number"){let T=Date.now()+l;l=()=>Date.now()>T}for(this.parse||(this.parse=this.startParse()),f!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>f)&&f<this.state.doc.length&&this.parse.stopAt(f);;){let T=this.parse.advance();if(T)if(this.fragments=this.withoutTempSkipped(_.i9.addTree(T,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(b=this.parse.stoppedAt)!==null&&b!==void 0?b:this.state.doc.length,this.tree=T,this.parse=null,this.treeLen<(f!=null?f:this.state.doc.length))this.parse=this.startParse();else return!0;if(l())return!1}})}takeTree(){let l,f;this.parse&&(l=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>l)&&this.parse.stopAt(l),this.withContext(()=>{for(;!(f=this.parse.advance()););}),this.treeLen=l,this.tree=f,this.fragments=this.withoutTempSkipped(_.i9.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(l){let f=rt;rt=this;try{return l()}finally{rt=f}}withoutTempSkipped(l){for(let f;f=this.tempSkipped.pop();)l=Ue(l,f.from,f.to);return l}changes(l,f){let{fragments:b,tree:T,treeLen:E,viewport:R,skipped:K}=this;if(this.takeTree(),!l.empty){let V=[];if(l.iterChangedRanges((oe,we,yt,tn)=>V.push({fromA:oe,toA:we,fromB:yt,toB:tn})),b=_.i9.applyChanges(b,V),T=_.mp.empty,E=0,R={from:l.mapPos(R.from,-1),to:l.mapPos(R.to,1)},this.skipped.length){K=[];for(let oe of this.skipped){let we=l.mapPos(oe.from,1),yt=l.mapPos(oe.to,-1);we<yt&&K.push({from:we,to:yt})}}}return new st(this.parser,f,b,T,E,R,K,this.scheduleOn)}updateViewport(l){if(this.viewport.from==l.from&&this.viewport.to==l.to)return!1;this.viewport=l;let f=this.skipped.length;for(let b=0;b<this.skipped.length;b++){let{from:T,to:E}=this.skipped[b];T<l.to&&E>l.from&&(this.fragments=Ue(this.fragments,T,E),this.skipped.splice(b--,1))}return this.skipped.length>=f?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(l,f){this.skipped.push({from:l,to:f})}static getSkippingParser(l){return new class extends _._b{createParse(f,b,T){let E=T[0].from,R=T[T.length-1].to;return{parsedPos:E,advance(){let V=rt;if(V){for(let oe of T)V.tempSkipped.push(oe);l&&(V.scheduleOn=V.scheduleOn?Promise.all([V.scheduleOn,l]):l)}return this.parsedPos=R,new _.mp(_.Jq.none,[],[],R-E)},stoppedAt:null,stopAt(){}}}}}isDone(l){l=Math.min(l,this.state.doc.length);let f=this.fragments;return this.treeLen>=l&&f.length&&f[0].from==0&&f[0].to>=l}static get(){return rt}}function Ue(g,l,f){return _.i9.applyChanges(g,[{fromA:l,toA:f,fromB:l,toB:f}])}class We{constructor(l){this.context=l,this.tree=l.tree}apply(l){if(!l.docChanged&&this.tree==this.context.tree)return this;let f=this.context.changes(l.changes,l.state),b=this.context.treeLen==l.startState.doc.length?void 0:Math.max(l.changes.mapPos(this.context.treeLen),f.viewport.to);return f.work(20,b)||f.takeTree(),new We(f)}static init(l){let f=Math.min(3e3,l.doc.length),b=st.create(l.facet(Ye).parser,l,{from:0,to:f});return b.work(20,f)||b.takeTree(),new We(b)}}ue.state=se.QQ.define({create:We.init,update(g,l){for(let f of l.effects)if(f.is(ue.setState))return f.value;return l.startState.facet(Ye)!=l.state.facet(Ye)?We.init(l.state):g.apply(l)}});let xt=g=>{let l=setTimeout(()=>g(),500);return()=>clearTimeout(l)};typeof requestIdleCallback!="undefined"&&(xt=g=>{let l=-1,f=setTimeout(()=>{l=requestIdleCallback(g,{timeout:400})},100);return()=>l<0?clearTimeout(f):cancelIdleCallback(l)});const dt=typeof navigator!="undefined"&&(!((ve=navigator.scheduling)===null||ve===void 0)&&ve.isInputPending)?()=>navigator.scheduling.isInputPending():null,ht=q.lg.fromClass(class{constructor(l){this.view=l,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(l){let f=this.view.state.field(ue.state).context;(f.updateViewport(l.view.viewport)||this.view.viewport.to>f.treeLen)&&this.scheduleWork(),(l.docChanged||l.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(f)}scheduleWork(){if(this.working)return;let{state:l}=this.view,f=l.field(ue.state);(f.tree!=f.context.tree||!f.context.isDone(l.doc.length))&&(this.working=xt(this.work))}work(l){this.working=null;let f=Date.now();if(this.chunkEnd<f&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=f+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:b,viewport:{to:T}}=this.view,E=b.field(ue.state);if(E.tree==E.context.tree&&E.context.isDone(T+1e5))return;let R=Date.now()+Math.min(this.chunkBudget,100,l&&!dt?Math.max(25,l.timeRemaining()-5):1e9),K=E.context.treeLen<T&&b.doc.length>T+1e3,V=E.context.work(()=>dt&&dt()||Date.now()>R,T+(K?0:1e5));this.chunkBudget-=Date.now()-f,(V||this.chunkBudget<=0)&&(E.context.takeTree(),this.view.dispatch({effects:ue.setState.of(new We(E.context))})),this.chunkBudget>0&&!(V&&!K)&&this.scheduleWork(),this.checkAsyncSchedule(E.context)}checkAsyncSchedule(l){l.scheduleOn&&(this.workScheduled++,l.scheduleOn.then(()=>this.scheduleWork()).catch(f=>(0,q.OO)(this.view.state,f)).then(()=>this.workScheduled--),l.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Ye=se.r$.define({combine(g){return g.length?g[0]:null},enables:g=>[ue.state,ht,q.tk.contentAttributes.compute([g],l=>{let f=l.facet(g);return f&&f.name?{"data-language":f.name}:{}})]});class mt{constructor(l,f=[]){this.language=l,this.support=f,this.extension=[l,f]}}class vt{constructor(l,f,b,T,E,R=void 0){this.name=l,this.alias=f,this.extensions=b,this.filename=T,this.loadFunc=E,this.support=R,this.loading=null}load(){return this.loading||(this.loading=this.loadFunc().then(l=>this.support=l,l=>{throw this.loading=null,l}))}static of(l){let{load:f,support:b}=l;if(!f){if(!b)throw new RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");f=()=>Promise.resolve(b)}return new vt(l.name,(l.alias||[]).concat(l.name).map(T=>T.toLowerCase()),l.extensions||[],l.filename,f,b)}static matchFilename(l,f){for(let T of l)if(T.filename&&T.filename.test(f))return T;let b=/\.([^.]+)$/.exec(f);if(b){for(let T of l)if(T.extensions.indexOf(b[1])>-1)return T}return null}static matchLanguageName(l,f,b=!0){f=f.toLowerCase();for(let T of l)if(T.alias.some(E=>E==f))return T;if(b)for(let T of l)for(let E of T.alias){let R=f.indexOf(E);if(R>-1&&(E.length>2||!/\w/.test(f[R-1])&&!/\w/.test(f[R+E.length])))return T}return null}}const Ut=se.r$.define(),ft=se.r$.define({combine:g=>{if(!g.length)return"  ";let l=g[0];if(!l||/\S/.test(l)||Array.from(l).some(f=>f!=l[0]))throw new Error("Invalid indent unit: "+JSON.stringify(g[0]));return l}});function Xe(g){let l=g.facet(ft);return l.charCodeAt(0)==9?g.tabSize*l.length:l.length}function j(g,l){let f="",b=g.tabSize,T=g.facet(ft)[0];if(T=="	"){for(;l>=b;)f+="	",l-=b;T=" "}for(let E=0;E<l;E++)f+=T;return f}function ke(g,l){g instanceof se.yy&&(g=new W(g));for(let b of g.state.facet(Ut)){let T=b(g,l);if(T!==void 0)return T}let f=Se(g.state);return f.length>=l?ae(g,f,l):null}function le(g,l,f){let b=Object.create(null),T=new W(g,{overrideIndentation:R=>{var K;return(K=b[R])!==null&&K!==void 0?K:-1}}),E=[];for(let R=l;R<=f;){let K=g.doc.lineAt(R);R=K.to+1;let V=ke(T,K.from);if(V==null)continue;/\S/.test(K.text)||(V=0);let oe=/^\s*/.exec(K.text)[0],we=j(g,V);oe!=we&&(b[K.from]=V,E.push({from:K.from,to:K.from+oe.length,insert:we}))}return g.changes(E)}class W{constructor(l,f={}){this.state=l,this.options=f,this.unit=Xe(l)}lineAt(l,f=1){let b=this.state.doc.lineAt(l),{simulateBreak:T,simulateDoubleBreak:E}=this.options;return T!=null&&T>=b.from&&T<=b.to?E&&T==l?{text:"",from:l}:(f<0?T<l:T<=l)?{text:b.text.slice(T-b.from),from:T}:{text:b.text.slice(0,T-b.from),from:b.from}:b}textAfterPos(l,f=1){if(this.options.simulateDoubleBreak&&l==this.options.simulateBreak)return"";let{text:b,from:T}=this.lineAt(l,f);return b.slice(l-T,Math.min(b.length,l+100-T))}column(l,f=1){let{text:b,from:T}=this.lineAt(l,f),E=this.countColumn(b,l-T),R=this.options.overrideIndentation?this.options.overrideIndentation(T):-1;return R>-1&&(E+=R-this.countColumn(b,b.search(/\S|$/))),E}countColumn(l,f=l.length){return(0,se.IS)(l,this.state.tabSize,f)}lineIndent(l,f=1){let{text:b,from:T}=this.lineAt(l,f),E=this.options.overrideIndentation;if(E){let R=E(T);if(R>-1)return R}return this.countColumn(b,b.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Q=new _.md;function ae(g,l,f){let b=l.resolveStack(f),T=l.resolveInner(f,-1).resolve(f,0).enterUnfinishedNodesBefore(f);if(T!=b.node){let E=[];for(let R=T;R&&!(R.from<b.node.from||R.to>b.node.to||R.from==b.node.from&&R.type==b.node.type);R=R.parent)E.push(R);for(let R=E.length-1;R>=0;R--)b={node:E[R],next:b}}return ne(b,g,f)}function ne(g,l,f){for(let b=g;b;b=b.next){let T=De(b.node);if(T)return T(xe.create(l,f,b))}return 0}function me(g){return g.pos==g.options.simulateBreak&&g.options.simulateDoubleBreak}function De(g){let l=g.type.prop(Q);if(l)return l;let f=g.firstChild,b;if(f&&(b=f.type.prop(_.md.closedBy))){let T=g.lastChild,E=T&&b.indexOf(T.name)>-1;return R=>et(R,!0,1,void 0,E&&!me(R)?T.from:void 0)}return g.parent==null?Fe:null}function Fe(){return 0}class xe extends W{constructor(l,f,b){super(l.state,l.options),this.base=l,this.pos=f,this.context=b}get node(){return this.context.node}static create(l,f,b){return new xe(l,f,b)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(l){let f=this.state.doc.lineAt(l.from);for(;;){let b=l.resolve(f.from);for(;b.parent&&b.parent.from==b.from;)b=b.parent;if(Pe(b,l))break;f=this.state.doc.lineAt(b.from)}return this.lineIndent(f.from)}continue(){return ne(this.context.next,this.base,this.pos)}}function Pe(g,l){for(let f=l;f;f=f.parent)if(g==f)return!0;return!1}function je(g){let l=g.node,f=l.childAfter(l.from),b=l.lastChild;if(!f)return null;let T=g.options.simulateBreak,E=g.state.doc.lineAt(f.from),R=T==null||T<=E.from?E.to:Math.min(E.to,T);for(let K=f.to;;){let V=l.childAfter(K);if(!V||V==b)return null;if(!V.type.isSkipped){if(V.from>=R)return null;let oe=/^ */.exec(E.text.slice(f.to-E.from))[0].length;return{from:f.from,to:f.to+oe}}K=V.to}}function Le({closing:g,align:l=!0,units:f=1}){return b=>et(b,l,f,g)}function et(g,l,f,b,T){let E=g.textAfter,R=E.match(/^\s*/)[0].length,K=b&&E.slice(R,R+b.length)==b||T==g.pos+R,V=l?je(g):null;return V?K?g.column(V.from):g.column(V.to):g.baseIndent+(K?0:g.unit*f)}const He=g=>g.baseIndent;function jt({except:g,units:l=1}={}){return f=>{let b=g&&g.test(f.textAfter);return f.baseIndent+(b?0:l*f.unit)}}const Nt=200;function U(){return se.yy.transactionFilter.of(g=>{if(!g.docChanged||!g.isUserEvent("input.type")&&!g.isUserEvent("input.complete"))return g;let l=g.startState.languageDataAt("indentOnInput",g.startState.selection.main.head);if(!l.length)return g;let f=g.newDoc,{head:b}=g.newSelection.main,T=f.lineAt(b);if(b>T.from+Nt)return g;let E=f.sliceString(T.from,b);if(!l.some(oe=>oe.test(E)))return g;let{state:R}=g,K=-1,V=[];for(let{head:oe}of R.selection.ranges){let we=R.doc.lineAt(oe);if(we.from==K)continue;K=we.from;let yt=ke(R,we.from);if(yt==null)continue;let tn=/^\s*/.exec(we.text)[0],Vt=j(R,yt);tn!=Vt&&V.push({from:we.from,to:we.from+tn.length,insert:Vt})}return V.length?[g,{changes:V,sequential:!0}]:g})}const p=se.r$.define(),y=new _.md;function A(g){let l=g.firstChild,f=g.lastChild;return l&&l.to<f.from?{from:l.to,to:f.type.isError?g.to:f.from}:null}function I(g,l,f){let b=Se(g);if(b.length<f)return null;let T=b.resolveStack(f,1),E=null;for(let R=T;R;R=R.next){let K=R.node;if(K.to<=f||K.from>f)continue;if(E&&K.from<l)break;let V=K.type.prop(y);if(V&&(K.to<b.length-50||b.length==g.doc.length||!B(K))){let oe=V(K,g);oe&&oe.from<=f&&oe.from>=l&&oe.to>f&&(E=oe)}}return E}function B(g){let l=g.lastChild;return l&&l.to==g.to&&l.type.isError}function J(g,l,f){for(let b of g.facet(p)){let T=b(g,l,f);if(T)return T}return I(g,l,f)}function H(g,l){let f=l.mapPos(g.from,1),b=l.mapPos(g.to,-1);return f>=b?void 0:{from:f,to:b}}const re=se.Py.define({map:H}),de=se.Py.define({map:H});function ce(g){let l=[];for(let{head:f}of g.state.selection.ranges)l.some(b=>b.from<=f&&b.to>=f)||l.push(g.lineBlockAt(f));return l}const be=se.QQ.define({create(){return q.p.none},update(g,l){l.isUserEvent("delete")&&l.changes.iterChangedRanges((f,b)=>g=Ce(g,f,b)),g=g.map(l.changes);for(let f of l.effects)if(f.is(re)&&!kt(g,f.value.from,f.value.to)){let{preparePlaceholder:b}=l.state.facet(at),T=b?q.p.replace({widget:new ut(b(l.state,f.value))}):nt;g=g.update({add:[T.range(f.value.from,f.value.to)]})}else f.is(de)&&(g=g.update({filter:(b,T)=>f.value.from!=b||f.value.to!=T,filterFrom:f.value.from,filterTo:f.value.to}));return l.selection&&(g=Ce(g,l.selection.main.head)),g},provide:g=>q.tk.decorations.from(g),toJSON(g,l){let f=[];return g.between(0,l.doc.length,(b,T)=>{f.push(b,T)}),f},fromJSON(g){if(!Array.isArray(g)||g.length%2)throw new RangeError("Invalid JSON for fold state");let l=[];for(let f=0;f<g.length;){let b=g[f++],T=g[f++];if(typeof b!="number"||typeof T!="number")throw new RangeError("Invalid JSON for fold state");l.push(nt.range(b,T))}return q.p.set(l,!0)}});function Ce(g,l,f=l){let b=!1;return g.between(l,f,(T,E)=>{T<f&&E>l&&(b=!0)}),b?g.update({filterFrom:l,filterTo:f,filter:(T,E)=>T>=f||E<=l}):g}function Ve(g){return g.field(be,!1)||RangeSet.empty}function Ge(g,l,f){var b;let T=null;return(b=g.field(be,!1))===null||b===void 0||b.between(l,f,(E,R)=>{(!T||T.from>E)&&(T={from:E,to:R})}),T}function kt(g,l,f){let b=!1;return g.between(l,l,(T,E)=>{T==l&&E==f&&(b=!0)}),b}function qe(g,l){return g.field(be,!1)?l:l.concat(se.Py.appendConfig.of(ze()))}const It=g=>{for(let l of ce(g)){let f=J(g.state,l.from,l.to);if(f)return g.dispatch({effects:qe(g.state,[re.of(f),ot(g,f)])}),!0}return!1},gt=g=>{if(!g.state.field(be,!1))return!1;let l=[];for(let f of ce(g)){let b=Ge(g.state,f.from,f.to);b&&l.push(de.of(b),ot(g,b,!1))}return l.length&&g.dispatch({effects:l}),l.length>0};function ot(g,l,f=!0){let b=g.state.doc.lineAt(l.from).number,T=g.state.doc.lineAt(l.to).number;return q.tk.announce.of(`${g.state.phrase(f?"Folded lines":"Unfolded lines")} ${b} ${g.state.phrase("to")} ${T}.`)}const At=g=>{let{state:l}=g,f=[];for(let b=0;b<l.doc.length;){let T=g.lineBlockAt(b),E=J(l,T.from,T.to);E&&f.push(re.of(E)),b=(E?g.lineBlockAt(E.to):T).to+1}return f.length&&g.dispatch({effects:qe(g.state,f)}),!!f.length},tt=g=>{let l=g.state.field(be,!1);if(!l||!l.size)return!1;let f=[];return l.between(0,g.state.doc.length,(b,T)=>{f.push(de.of({from:b,to:T}))}),g.dispatch({effects:f}),!0};function pt(g,l){for(let f=l;;){let b=J(g.state,f.from,f.to);if(b&&b.to>l.from)return b;if(!f.from)return null;f=g.lineBlockAt(f.from-1)}}const pe=g=>{let l=[];for(let f of ce(g)){let b=Ge(g.state,f.from,f.to);if(b)l.push(de.of(b),ot(g,b,!1));else{let T=pt(g,f);T&&l.push(re.of(T),ot(g,T))}}return l.length>0&&g.dispatch({effects:qe(g.state,l)}),!!l.length},Je=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:It},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:gt},{key:"Ctrl-Alt-[",run:At},{key:"Ctrl-Alt-]",run:tt}],lt={placeholderDOM:null,preparePlaceholder:null,placeholderText:"\u2026"},at=se.r$.define({combine(g){return(0,se.BO)(g,lt)}});function ze(g){let l=[be,Qt];return g&&l.push(at.of(g)),l}function Ie(g,l){let{state:f}=g,b=f.facet(at),T=R=>{let K=g.lineBlockAt(g.posAtDOM(R.target)),V=Ge(g.state,K.from,K.to);V&&g.dispatch({effects:de.of(V)}),R.preventDefault()};if(b.placeholderDOM)return b.placeholderDOM(g,T,l);let E=document.createElement("span");return E.textContent=b.placeholderText,E.setAttribute("aria-label",f.phrase("folded code")),E.title=f.phrase("unfold"),E.className="cm-foldPlaceholder",E.onclick=T,E}const nt=q.p.replace({widget:new class extends q.l9{toDOM(g){return Ie(g,null)}}});class ut extends q.l9{constructor(l){super(),this.value=l}eq(l){return this.value==l.value}toDOM(l){return Ie(l,this.value)}}const St={openText:"\u2304",closedText:"\u203A",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class Tt extends q.SJ{constructor(l,f){super(),this.config=l,this.open=f}eq(l){return this.config==l.config&&this.open==l.open}toDOM(l){if(this.config.markerDOM)return this.config.markerDOM(this.open);let f=document.createElement("span");return f.textContent=this.open?this.config.openText:this.config.closedText,f.title=l.state.phrase(this.open?"Fold line":"Unfold line"),f}}function Lt(g={}){let l=di(di({},St),g),f=new Tt(l,!0),b=new Tt(l,!1),T=q.lg.fromClass(class{constructor(R){this.from=R.viewport.from,this.markers=this.buildMarkers(R)}update(R){(R.docChanged||R.viewportChanged||R.startState.facet(Ye)!=R.state.facet(Ye)||R.startState.field(be,!1)!=R.state.field(be,!1)||Se(R.startState)!=Se(R.state)||l.foldingChanged(R))&&(this.markers=this.buildMarkers(R.view))}buildMarkers(R){let K=new se.f_;for(let V of R.viewportLineBlocks){let oe=Ge(R.state,V.from,V.to)?b:J(R.state,V.from,V.to)?f:null;oe&&K.add(V.from,V.from,oe)}return K.finish()}}),{domEventHandlers:E}=l;return[T,(0,q.v5)({class:"cm-foldGutter",markers(R){var K;return((K=R.plugin(T))===null||K===void 0?void 0:K.markers)||se.Xs.empty},initialSpacer(){return new Tt(l,!1)},domEventHandlers:Or(di({},E),{click:(R,K,V)=>{if(E.click&&E.click(R,K,V))return!0;let oe=Ge(R.state,K.from,K.to);if(oe)return R.dispatch({effects:de.of(oe)}),!0;let we=J(R.state,K.from,K.to);return we?(R.dispatch({effects:re.of(we)}),!0):!1}})}),ze()]}const Qt=q.tk.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Mt{constructor(l,f){this.specs=l;let b;function T(K){let V=G.V.newName();return(b||(b=Object.create(null)))["."+V]=K,V}const E=typeof f.all=="string"?f.all:f.all?T(f.all):void 0,R=f.scope;this.scope=R instanceof ue?K=>K.prop(_e)==R.data:R?K=>K==R:void 0,this.style=(0,L.QR)(l.map(K=>({tag:K.tag,class:K.class||T(Object.assign({},K,{tag:null}))})),{all:E}).style,this.module=b?new G.V(b):null,this.themeType=f.themeType}static define(l,f){return new Mt(l,f||{})}}const rn=se.r$.define(),Ot=se.r$.define({combine(g){return g.length?[g[0]]:null}});function Oe(g){let l=g.facet(rn);return l.length?l:g.facet(Ot)}function bt(g,l){let f=[Ht],b;return g instanceof Mt&&(g.module&&f.push(q.tk.styleModule.of(g.module)),b=g.themeType),l!=null&&l.fallback?f.push(Ot.of(g)):b?f.push(rn.computeN([q.tk.darkTheme],T=>T.facet(q.tk.darkTheme)==(b=="dark")?[g]:[])):f.push(rn.of(g)),f}function Jt(g,l,f){let b=Oe(g),T=null;if(b){for(let E of b)if(!E.scope||f&&E.scope(f)){let R=E.style(l);R&&(T=T?T+" "+R:R)}}return T}class zt{constructor(l){this.markCache=Object.create(null),this.tree=Se(l.state),this.decorations=this.buildDeco(l,Oe(l.state)),this.decoratedTo=l.viewport.to}update(l){let f=Se(l.state),b=Oe(l.state),T=b!=Oe(l.startState),{viewport:E}=l.view,R=l.changes.mapPos(this.decoratedTo,1);f.length<E.to&&!T&&f.type==this.tree.type&&R>=E.to?(this.decorations=this.decorations.map(l.changes),this.decoratedTo=R):(f!=this.tree||l.viewportChanged||T)&&(this.tree=f,this.decorations=this.buildDeco(l.view,b),this.decoratedTo=E.to)}buildDeco(l,f){if(!f||!this.tree.length)return q.p.none;let b=new se.f_;for(let{from:T,to:E}of l.visibleRanges)(0,L.bW)(this.tree,f,(R,K,V)=>{b.add(R,K,this.markCache[V]||(this.markCache[V]=q.p.mark({class:V})))},T,E);return b.finish()}}const Ht=se.Wl.high(q.lg.fromClass(zt,{decorations:g=>g.decorations})),Yt=Mt.define([{tag:L.pJ.meta,color:"#404740"},{tag:L.pJ.link,textDecoration:"underline"},{tag:L.pJ.heading,textDecoration:"underline",fontWeight:"bold"},{tag:L.pJ.emphasis,fontStyle:"italic"},{tag:L.pJ.strong,fontWeight:"bold"},{tag:L.pJ.strikethrough,textDecoration:"line-through"},{tag:L.pJ.keyword,color:"#708"},{tag:[L.pJ.atom,L.pJ.bool,L.pJ.url,L.pJ.contentSeparator,L.pJ.labelName],color:"#219"},{tag:[L.pJ.literal,L.pJ.inserted],color:"#164"},{tag:[L.pJ.string,L.pJ.deleted],color:"#a11"},{tag:[L.pJ.regexp,L.pJ.escape,L.pJ.special(L.pJ.string)],color:"#e40"},{tag:L.pJ.definition(L.pJ.variableName),color:"#00f"},{tag:L.pJ.local(L.pJ.variableName),color:"#30a"},{tag:[L.pJ.typeName,L.pJ.namespace],color:"#085"},{tag:L.pJ.className,color:"#167"},{tag:[L.pJ.special(L.pJ.variableName),L.pJ.macroName],color:"#256"},{tag:L.pJ.definition(L.pJ.propertyName),color:"#00c"},{tag:L.pJ.comment,color:"#940"},{tag:L.pJ.invalid,color:"#f00"}]),Et=q.tk.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),gn=1e4,Xt="()[]{}",yn=se.r$.define({combine(g){return(0,se.BO)(g,{afterCursor:!0,brackets:Xt,maxScanDistance:gn,renderMatch:en})}}),wn=q.p.mark({class:"cm-matchingBracket"}),Ct=q.p.mark({class:"cm-nonmatchingBracket"});function en(g){let l=[],f=g.matched?wn:Ct;return l.push(f.range(g.start.from,g.start.to)),g.end&&l.push(f.range(g.end.from,g.end.to)),l}const pn=[se.QQ.define({create(){return q.p.none},update(g,l){if(!l.docChanged&&!l.selection)return g;let f=[],b=l.state.facet(yn);for(let T of l.state.selection.ranges){if(!T.empty)continue;let E=Zt(l.state,T.head,-1,b)||T.head>0&&Zt(l.state,T.head-1,1,b)||b.afterCursor&&(Zt(l.state,T.head,1,b)||T.head<l.state.doc.length&&Zt(l.state,T.head+1,-1,b));E&&(f=f.concat(b.renderMatch(E,l.state)))}return q.p.set(f,!0)},provide:g=>q.tk.decorations.from(g)}),Et];function xn(g={}){return[yn.of(g),pn]}const an=new _.md;function on(g,l,f){let b=g.prop(l<0?_.md.openedBy:_.md.closedBy);if(b)return b;if(g.name.length==1){let T=f.indexOf(g.name);if(T>-1&&T%2==(l<0?1:0))return[f[T+l]]}return null}function cn(g){let l=g.type.prop(an);return l?l(g.node):g}function Zt(g,l,f,b={}){let T=b.maxScanDistance||gn,E=b.brackets||Xt,R=Se(g),K=R.resolveInner(l,f);for(let V=K;V;V=V.parent){let oe=on(V.type,f,E);if(oe&&V.from<V.to){let we=cn(V);if(we&&(f>0?l>=we.from&&l<we.to:l>we.from&&l<=we.to))return vn(g,l,f,V,we,oe,E)}}return S(g,l,f,R,K.type,T,E)}function vn(g,l,f,b,T,E,R){let K=b.parent,V={from:T.from,to:T.to},oe=0,we=K==null?void 0:K.cursor();if(we&&(f<0?we.childBefore(b.from):we.childAfter(b.to)))do if(f<0?we.to<=b.from:we.from>=b.to){if(oe==0&&E.indexOf(we.type.name)>-1&&we.from<we.to){let yt=cn(we);return{start:V,end:yt?{from:yt.from,to:yt.to}:void 0,matched:!0}}else if(on(we.type,f,R))oe++;else if(on(we.type,-f,R)){if(oe==0){let yt=cn(we);return{start:V,end:yt&&yt.from<yt.to?{from:yt.from,to:yt.to}:void 0,matched:!1}}oe--}}while(f<0?we.prevSibling():we.nextSibling());return{start:V,matched:!1}}function S(g,l,f,b,T,E,R){let K=f<0?g.sliceDoc(l-1,l):g.sliceDoc(l,l+1),V=R.indexOf(K);if(V<0||V%2==0!=f>0)return null;let oe={from:f<0?l-1:l,to:f>0?l+1:l},we=g.doc.iterRange(l,f>0?g.doc.length:0),yt=0;for(let tn=0;!we.next().done&&tn<=E;){let Vt=we.value;f<0&&(tn+=Vt.length);let mn=l+tn*f;for(let kn=f>0?0:Vt.length-1,pi=f>0?Vt.length:-1;kn!=pi;kn+=f){let On=R.indexOf(Vt[kn]);if(!(On<0||b.resolveInner(mn+kn,1).type!=T))if(On%2==0==f>0)yt++;else{if(yt==1)return{start:oe,end:{from:mn+kn,to:mn+kn+1},matched:On>>1==V>>1};yt--}}f>0&&(tn+=Vt.length)}return we.done?{start:oe,matched:!1}:null}function n(g,l,f,b=0,T=0){l==null&&(l=g.search(/[^\s\u00a0]/),l==-1&&(l=g.length));let E=T;for(let R=b;R<l;R++)g.charCodeAt(R)==9?E+=f-E%f:E++;return E}class i{constructor(l,f,b,T){this.string=l,this.tabSize=f,this.indentUnit=b,this.overrideIndent=T,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(l){let f=this.string.charAt(this.pos),b;if(typeof l=="string"?b=f==l:b=f&&(l instanceof RegExp?l.test(f):l(f)),b)return++this.pos,f}eatWhile(l){let f=this.pos;for(;this.eat(l););return this.pos>f}eatSpace(){let l=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>l}skipToEnd(){this.pos=this.string.length}skipTo(l){let f=this.string.indexOf(l,this.pos);if(f>-1)return this.pos=f,!0}backUp(l){this.pos-=l}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=n(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var l;return(l=this.overrideIndent)!==null&&l!==void 0?l:n(this.string,null,this.tabSize)}match(l,f,b){if(typeof l=="string"){let T=R=>b?R.toLowerCase():R,E=this.string.substr(this.pos,l.length);return T(E)==T(l)?(f!==!1&&(this.pos+=l.length),!0):null}else{let T=this.string.slice(this.pos).match(l);return T&&T.index>0?null:(T&&f!==!1&&(this.pos+=T[0].length),T)}}current(){return this.string.slice(this.start,this.pos)}}function a(g){return{name:g.name||"",token:g.token,blankLine:g.blankLine||(()=>{}),startState:g.startState||(()=>!0),copyState:g.copyState||d,indent:g.indent||(()=>null),languageData:g.languageData||{},tokenTable:g.tokenTable||x,mergeTokens:g.mergeTokens!==!1}}function d(g){if(typeof g!="object")return g;let l={};for(let f in g){let b=g[f];l[f]=b instanceof Array?b.slice():b}return l}const v=new WeakMap;class k extends ue{constructor(l){let f=Qe(l.languageData),b=a(l),T,E=new class extends _._b{createParse(R,K,V){return new o(T,R,K,V)}};super(f,E,[],l.name),this.topNode=ct(f,this),T=this,this.streamParser=b,this.stateAfter=new _.md({perNode:!0}),this.tokenTable=l.tokenTable?new X(b.tokenTable):Y}static define(l){return new k(l)}getIndent(l){let f,{overrideIndentation:b}=l.options;b&&(f=v.get(l.state),f!=null&&f<l.pos-1e4&&(f=void 0));let T=P(this,l.node.tree,l.node.from,l.node.from,f!=null?f:l.pos),E,R;if(T?(R=T.state,E=T.pos+1):(R=this.streamParser.startState(l.unit),E=l.node.from),l.pos-E>1e4)return null;for(;E<l.pos;){let V=l.state.doc.lineAt(E),oe=Math.min(l.pos,V.to);if(V.length){let we=b?b(V.from):-1,yt=new i(V.text,l.state.tabSize,l.unit,we<0?void 0:we);for(;yt.pos<oe-V.from;)h(this.streamParser.token,yt,R)}else this.streamParser.blankLine(R,l.unit);if(oe==l.pos)break;E=V.to+1}let K=l.lineAt(l.pos);return b&&f==null&&v.set(l.state,K.from),this.streamParser.indent(R,/^\s*(.*)/.exec(K.text)[1],l)}get allowsNesting(){return!1}}function P(g,l,f,b,T){let E=f>=b&&f+l.length<=T&&l.prop(g.stateAfter);if(E)return{state:g.streamParser.copyState(E),pos:f+l.length};for(let R=l.children.length-1;R>=0;R--){let K=l.children[R],V=f+l.positions[R],oe=K instanceof _.mp&&V<T&&P(g,K,V,b,T);if(oe)return oe}return null}function D(g,l,f,b,T){if(T&&f<=0&&b>=l.length)return l;!T&&f==0&&l.type==g.topNode&&(T=!0);for(let E=l.children.length-1;E>=0;E--){let R=l.positions[E],K=l.children[E],V;if(R<b&&K instanceof _.mp){if(!(V=D(g,K,f-R,b-R,T)))break;return T?new _.mp(l.type,l.children.slice(0,E).concat(V),l.positions.slice(0,E+1),R+V.length):V}}return null}function u(g,l,f,b,T){for(let E of l){let R=E.from+(E.openStart?25:0),K=E.to-(E.openEnd?25:0),V=R<=f&&K>f&&P(g,E.tree,0-E.offset,f,K),oe;if(V&&V.pos<=b&&(oe=D(g,E.tree,f+E.offset,V.pos+E.offset,!1)))return{state:V.state,tree:oe}}return{state:g.streamParser.startState(T?Xe(T):4),tree:_.mp.empty}}class o{constructor(l,f,b,T){this.lang=l,this.input=f,this.fragments=b,this.ranges=T,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=T[T.length-1].to;let E=st.get(),R=T[0].from,{state:K,tree:V}=u(l,b,R,this.to,E==null?void 0:E.state);this.state=K,this.parsedPos=this.chunkStart=R+V.length;for(let oe=0;oe<V.children.length;oe++)this.chunks.push(V.children[oe]),this.chunkPos.push(V.positions[oe]);E&&this.parsedPos<E.viewport.from-1e5&&T.some(oe=>oe.from<=E.viewport.from&&oe.to>=E.viewport.from)&&(this.state=this.lang.streamParser.startState(Xe(E.state)),E.skipUntilInView(this.parsedPos,E.viewport.from),this.parsedPos=E.viewport.from),this.moveRangeIndex()}advance(){let l=st.get(),f=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),b=Math.min(f,this.chunkStart+2048);for(l&&(b=Math.min(b,l.viewport.to));this.parsedPos<b;)this.parseLine(l);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=f?this.finish():l&&this.parsedPos>=l.viewport.to?(l.skipUntilInView(this.parsedPos,f),this.finish()):null}stopAt(l){this.stoppedAt=l}lineAfter(l){let f=this.input.chunk(l);if(this.input.lineChunks)f==`
`&&(f="");else{let b=f.indexOf(`
`);b>-1&&(f=f.slice(0,b))}return l+f.length<=this.to?f:f.slice(0,this.to-l)}nextLine(){let l=this.parsedPos,f=this.lineAfter(l),b=l+f.length;for(let T=this.rangeIndex;;){let E=this.ranges[T].to;if(E>=b||(f=f.slice(0,E-(b-f.length)),T++,T==this.ranges.length))break;let R=this.ranges[T].from,K=this.lineAfter(R);f+=K,b=R+K.length}return{line:f,end:b}}skipGapsTo(l,f,b){for(;;){let T=this.ranges[this.rangeIndex].to,E=l+f;if(b>0?T>E:T>=E)break;let R=this.ranges[++this.rangeIndex].from;f+=R-T}return f}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(l,f,b,T){let E=4;if(this.ranges.length>1){T=this.skipGapsTo(f,T,1),f+=T;let K=this.chunk.length;T=this.skipGapsTo(b,T,-1),b+=T,E+=this.chunk.length-K}let R=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&E==4&&R>=0&&this.chunk[R]==l&&this.chunk[R+2]==f?this.chunk[R+2]=b:this.chunk.push(l,f,b,E),T}parseLine(l){let{line:f,end:b}=this.nextLine(),T=0,{streamParser:E}=this.lang,R=new i(f,l?l.state.tabSize:4,l?Xe(l.state):2);if(R.eol())E.blankLine(this.state,R.indentUnit);else for(;!R.eol();){let K=h(E.token,R,this.state);if(K&&(T=this.emitToken(this.lang.tokenTable.resolve(K),this.parsedPos+R.start,this.parsedPos+R.pos,T)),R.start>1e4)break}this.parsedPos=b,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let l=_.mp.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:O,topID:0,maxBufferLength:2048,reused:this.chunkReused});l=new _.mp(l.type,l.children,l.positions,l.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(l),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new _.mp(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function h(g,l,f){l.start=l.pos;for(let b=0;b<10;b++){let T=g(l,f);if(l.pos>l.start)return T}throw new Error("Stream parser failed to advance stream.")}const x=Object.create(null),w=[_.Jq.none],O=new _.Lj(w),N=[],$=Object.create(null),z=Object.create(null);for(let[g,l]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])z[g]=$e(x,l);class X{constructor(l){this.extra=l,this.table=Object.assign(Object.create(null),z)}resolve(l){return l?this.table[l]||(this.table[l]=$e(this.extra,l)):0}}const Y=new X(x);function ye(g,l){N.indexOf(g)>-1||(N.push(g),console.warn(l))}function $e(g,l){let f=[];for(let K of l.split(" ")){let V=[];for(let oe of K.split(".")){let we=g[oe]||L.pJ[oe];we?typeof we=="function"?V.length?V=V.map(we):ye(oe,`Modifier ${oe} used at start of tag`):V.length?ye(oe,`Tag ${oe} used as modifier`):V=Array.isArray(we)?we:[we]:ye(oe,`Unknown highlighting tag ${oe}`)}for(let oe of V)f.push(oe)}if(!f.length)return 0;let b=l.replace(/ /g,"_"),T=b+" "+f.map(K=>K.id),E=$[T];if(E)return E.id;let R=$[T]=_.Jq.define({id:w.length,name:b,props:[(0,L.Gv)({[b]:f})]});return w.push(R),R.id}function ct(g,l){let f=_.Jq.define({id:w.length,name:"Document",props:[_e.add(()=>g),Q.add(()=>b=>l.getIndent(b))],top:!0});return w.push(f),f}function Bt(g){return g.length<=4096&&/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/.test(g)}function $t(g){for(let l=g.iter();!l.next().done;)if(Bt(l.value))return!0;return!1}function Sn(g){let l=!1;return g.iterChanges((f,b,T,E,R)=>{!l&&$t(R)&&(l=!0)}),l}const ln=se.r$.define({combine:g=>g.some(l=>l)});function Dt(g={}){let l=[hn];return g.alwaysIsolate&&l.push(ln.of(!0)),l}const hn=q.lg.fromClass(class{constructor(g){this.always=g.state.facet(ln)||g.textDirection!=q.Nm.LTR||g.state.facet(q.tk.perLineTextDirection),this.hasRTL=!this.always&&$t(g.state.doc),this.tree=Se(g.state),this.decorations=this.always||this.hasRTL?_t(g,this.tree,this.always):q.p.none}update(g){let l=g.state.facet(ln)||g.view.textDirection!=q.Nm.LTR||g.state.facet(q.tk.perLineTextDirection);if(!l&&!this.hasRTL&&Sn(g.changes)&&(this.hasRTL=!0),!l&&!this.hasRTL)return;let f=Se(g.state);(l!=this.always||f!=this.tree||g.docChanged||g.viewportChanged)&&(this.tree=f,this.always=l,this.decorations=_t(g.view,f,l))}},{provide:g=>{function l(f){var b,T;return(T=(b=f.plugin(g))===null||b===void 0?void 0:b.decorations)!==null&&T!==void 0?T:q.p.none}return[q.tk.outerDecorations.of(l),se.Wl.lowest(q.tk.bidiIsolatedRanges.of(l))]}});function _t(g,l,f){let b=new se.f_,T=g.visibleRanges;f||(T=Ft(T,g.state.doc));for(let{from:E,to:R}of T)l.iterate({enter:K=>{let V=K.type.prop(_.md.isolate);V&&b.add(K.from,K.to,fn[V])},from:E,to:R});return b.finish()}function Ft(g,l){let f=l.iter(),b=0,T=[],E=null;for(let{from:R,to:K}of g)if(!(E&&E.to>R&&(R=E.to,R>=K)))for(b+f.value.length<R&&(f.next(R-(b+f.value.length)),b=R);;){let V=b,oe=b+f.value.length;if(!f.lineBreak&&Bt(f.value)&&(E&&E.to>V-10?E.to=Math.min(K,oe):T.push(E={from:V,to:Math.min(K,oe)})),oe>=K)break;b=oe,f.next()}return T}const fn={rtl:q.p.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"rtl"},bidiIsolate:q.Nm.RTL}),ltr:q.p.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"ltr"},bidiIsolate:q.Nm.LTR}),auto:q.p.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"auto"},bidiIsolate:null})}},37205:function(Rt,Ze,ie){ie.d(Ze,{q6:function(){return At},n0:function(){return ke},as:function(){return le},D0:function(){return Lt},jT:function(){return xe},yy:function(){return Oe},r$:function(){return Le},gc:function(){return j},Wl:function(){return B},Xs:function(){return Et},f_:function(){return Xt},uU:function(){return Jt},Py:function(){return pe},QQ:function(){return y},xv:function(){return he},YW:function(){return Je},gm:function(){return vt},nZ:function(){return ft},BO:function(){return bt},IS:function(){return Zt},cp:function(){return ht},Gz:function(){return vn},bg:function(){return Ut}});let _=[],se=[];(()=>{let S="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(n=>n?parseInt(n,36):1);for(let n=0,i=0;n<S.length;n++)(n%2?se:_).push(i=i+S[n])})();function q(S){if(S<768)return!1;for(let n=0,i=_.length;;){let a=n+i>>1;if(S<_[a])i=a;else if(S>=se[a])n=a+1;else return!0;if(n==i)return!1}}function L(S){return S>=127462&&S<=127487}function G(S){for(let n=0;n<_.length;n++)if(se[n]>S)return _[n]<=S;return!1}const ve=8205;function _e(S,n,i=!0,a=!0){return(i?Qe:Ee)(S,n,a)}function Qe(S,n,i){if(n==S.length)return n;n&&ge(S.charCodeAt(n))&&Ne(S.charCodeAt(n-1))&&n--;let a=ue(S,n);for(n+=Se(a);n<S.length;){let d=ue(S,n);if(a==ve||d==ve||i&&q(d))n+=Se(d),a=d;else if(L(d)){let v=0,k=n-2;for(;k>=0&&L(ue(S,k));)v++,k-=2;if(v%2==0)break;n+=2}else break}return n}function Ee(S,n,i){for(;n>0;){let a=Qe(S,n-2,i);if(a<n)return a;n--}return 0}function ue(S,n){let i=S.charCodeAt(n);if(!Ne(i)||n+1==S.length)return i;let a=S.charCodeAt(n+1);return ge(a)?(i-55296<<10)+(a-56320)+65536:i}function ge(S){return S>=56320&&S<57344}function Ne(S){return S>=55296&&S<56320}function Se(S){return S<65536?1:2}class he{lineAt(n){if(n<0||n>this.length)throw new RangeError(`Invalid position ${n} in document of length ${this.length}`);return this.lineInner(n,!1,1,0)}line(n){if(n<1||n>this.lines)throw new RangeError(`Invalid line number ${n} in ${this.lines}-line document`);return this.lineInner(n,!0,1,0)}replace(n,i,a){[n,i]=dt(this,n,i);let d=[];return this.decompose(0,n,d,2),a.length&&a.decompose(0,a.length,d,3),this.decompose(i,this.length,d,1),Te.from(d,this.length-(i-n)+a.length)}append(n){return this.replace(this.length,this.length,n)}slice(n,i=this.length){[n,i]=dt(this,n,i);let a=[];return this.decompose(n,i,a,0),Te.from(a,i-n)}eq(n){if(n==this)return!0;if(n.length!=this.length||n.lines!=this.lines)return!1;let i=this.scanIdentical(n,1),a=this.length-this.scanIdentical(n,-1),d=new st(this),v=new st(n);for(let k=i,P=i;;){if(d.next(k),v.next(k),k=0,d.lineBreak!=v.lineBreak||d.done!=v.done||d.value!=v.value)return!1;if(P+=d.value.length,d.done||P>=a)return!0}}iter(n=1){return new st(this,n)}iterRange(n,i=this.length){return new Ue(this,n,i)}iterLines(n,i){let a;if(n==null)a=this.iter();else{i==null&&(i=this.lines+1);let d=this.line(n).from;a=this.iterRange(d,Math.max(d,i==this.lines+1?this.length:i<=1?0:this.line(i-1).to))}return new We(a)}toString(){return this.sliceString(0)}toJSON(){let n=[];return this.flatten(n),n}constructor(){}static of(n){if(n.length==0)throw new RangeError("A document must have at least one line");return n.length==1&&!n[0]?he.empty:n.length<=32?new Be(n):Te.from(Be.split(n,[]))}}class Be extends he{constructor(n,i=Z(n)){super(),this.text=n,this.length=i}get lines(){return this.text.length}get children(){return null}lineInner(n,i,a,d){for(let v=0;;v++){let k=this.text[v],P=d+k.length;if((i?a:P)>=n)return new xt(d,P,a,k);d=P+1,a++}}decompose(n,i,a,d){let v=n<=0&&i>=this.length?this:new Be(rt(this.text,n,i),Math.min(i,this.length)-Math.max(0,n));if(d&1){let k=a.pop(),P=Me(v.text,k.text.slice(),0,v.length);if(P.length<=32)a.push(new Be(P,k.length+v.length));else{let D=P.length>>1;a.push(new Be(P.slice(0,D)),new Be(P.slice(D)))}}else a.push(v)}replace(n,i,a){if(!(a instanceof Be))return super.replace(n,i,a);[n,i]=dt(this,n,i);let d=Me(this.text,Me(a.text,rt(this.text,0,n)),i),v=this.length+a.length-(i-n);return d.length<=32?new Be(d,v):Te.from(Be.split(d,[]),v)}sliceString(n,i=this.length,a=`
`){[n,i]=dt(this,n,i);let d="";for(let v=0,k=0;v<=i&&k<this.text.length;k++){let P=this.text[k],D=v+P.length;v>n&&k&&(d+=a),n<D&&i>v&&(d+=P.slice(Math.max(0,n-v),i-v)),v=D+1}return d}flatten(n){for(let i of this.text)n.push(i)}scanIdentical(){return 0}static split(n,i){let a=[],d=-1;for(let v of n)a.push(v),d+=v.length+1,a.length==32&&(i.push(new Be(a,d)),a=[],d=-1);return d>-1&&i.push(new Be(a,d)),i}}class Te extends he{constructor(n,i){super(),this.children=n,this.length=i,this.lines=0;for(let a of n)this.lines+=a.lines}lineInner(n,i,a,d){for(let v=0;;v++){let k=this.children[v],P=d+k.length,D=a+k.lines-1;if((i?D:P)>=n)return k.lineInner(n,i,a,d);d=P+1,a=D+1}}decompose(n,i,a,d){for(let v=0,k=0;k<=i&&v<this.children.length;v++){let P=this.children[v],D=k+P.length;if(n<=D&&i>=k){let u=d&((k<=n?1:0)|(D>=i?2:0));k>=n&&D<=i&&!u?a.push(P):P.decompose(n-k,i-k,a,u)}k=D+1}}replace(n,i,a){if([n,i]=dt(this,n,i),a.lines<this.lines)for(let d=0,v=0;d<this.children.length;d++){let k=this.children[d],P=v+k.length;if(n>=v&&i<=P){let D=k.replace(n-v,i-v,a),u=this.lines-k.lines+D.lines;if(D.lines<u>>4&&D.lines>u>>6){let o=this.children.slice();return o[d]=D,new Te(o,this.length-(i-n)+a.length)}return super.replace(v,P,D)}v=P+1}return super.replace(n,i,a)}sliceString(n,i=this.length,a=`
`){[n,i]=dt(this,n,i);let d="";for(let v=0,k=0;v<this.children.length&&k<=i;v++){let P=this.children[v],D=k+P.length;k>n&&v&&(d+=a),n<D&&i>k&&(d+=P.sliceString(n-k,i-k,a)),k=D+1}return d}flatten(n){for(let i of this.children)i.flatten(n)}scanIdentical(n,i){if(!(n instanceof Te))return 0;let a=0,[d,v,k,P]=i>0?[0,0,this.children.length,n.children.length]:[this.children.length-1,n.children.length-1,-1,-1];for(;;d+=i,v+=i){if(d==k||v==P)return a;let D=this.children[d],u=n.children[v];if(D!=u)return a+D.scanIdentical(u,i);a+=D.length+1}}static from(n,i=n.reduce((a,d)=>a+d.length+1,-1)){let a=0;for(let w of n)a+=w.lines;if(a<32){let w=[];for(let O of n)O.flatten(w);return new Be(w,i)}let d=Math.max(32,a>>5),v=d<<1,k=d>>1,P=[],D=0,u=-1,o=[];function h(w){let O;if(w.lines>v&&w instanceof Te)for(let N of w.children)h(N);else w.lines>k&&(D>k||!D)?(x(),P.push(w)):w instanceof Be&&D&&(O=o[o.length-1])instanceof Be&&w.lines+O.lines<=32?(D+=w.lines,u+=w.length+1,o[o.length-1]=new Be(O.text.concat(w.text),O.length+1+w.length)):(D+w.lines>d&&x(),D+=w.lines,u+=w.length+1,o.push(w))}function x(){D!=0&&(P.push(o.length==1?o[0]:Te.from(o,u)),u=-1,D=o.length=0)}for(let w of n)h(w);return x(),P.length==1?P[0]:new Te(P,i)}}he.empty=new Be([""],0);function Z(S){let n=-1;for(let i of S)n+=i.length+1;return n}function Me(S,n,i=0,a=1e9){for(let d=0,v=0,k=!0;v<S.length&&d<=a;v++){let P=S[v],D=d+P.length;D>=i&&(D>a&&(P=P.slice(0,a-d)),d<i&&(P=P.slice(i-d)),k?(n[n.length-1]+=P,k=!1):n.push(P)),d=D+1}return n}function rt(S,n,i){return Me(S,[""],n,i)}class st{constructor(n,i=1){this.dir=i,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[n],this.offsets=[i>0?1:(n instanceof Be?n.text.length:n.children.length)<<1]}nextInner(n,i){for(this.done=this.lineBreak=!1;;){let a=this.nodes.length-1,d=this.nodes[a],v=this.offsets[a],k=v>>1,P=d instanceof Be?d.text.length:d.children.length;if(k==(i>0?P:0)){if(a==0)return this.done=!0,this.value="",this;i>0&&this.offsets[a-1]++,this.nodes.pop(),this.offsets.pop()}else if((v&1)==(i>0?0:1)){if(this.offsets[a]+=i,n==0)return this.lineBreak=!0,this.value=`
`,this;n--}else if(d instanceof Be){let D=d.text[k+(i<0?-1:0)];if(this.offsets[a]+=i,D.length>Math.max(0,n))return this.value=n==0?D:i>0?D.slice(n):D.slice(0,D.length-n),this;n-=D.length}else{let D=d.children[k+(i<0?-1:0)];n>D.length?(n-=D.length,this.offsets[a]+=i):(i<0&&this.offsets[a]--,this.nodes.push(D),this.offsets.push(i>0?1:(D instanceof Be?D.text.length:D.children.length)<<1))}}}next(n=0){return n<0&&(this.nextInner(-n,-this.dir),n=this.value.length),this.nextInner(n,this.dir)}}class Ue{constructor(n,i,a){this.value="",this.done=!1,this.cursor=new st(n,i>a?-1:1),this.pos=i>a?n.length:0,this.from=Math.min(i,a),this.to=Math.max(i,a)}nextInner(n,i){if(i<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;n+=Math.max(0,i<0?this.pos-this.to:this.from-this.pos);let a=i<0?this.pos-this.from:this.to-this.pos;n>a&&(n=a),a-=n;let{value:d}=this.cursor.next(n);return this.pos+=(d.length+n)*i,this.value=d.length<=a?d:i<0?d.slice(d.length-a):d.slice(0,a),this.done=!this.value,this}next(n=0){return n<0?n=Math.max(n,this.from-this.pos):n>0&&(n=Math.min(n,this.to-this.pos)),this.nextInner(n,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class We{constructor(n){this.inner=n,this.afterBreak=!0,this.value="",this.done=!1}next(n=0){let{done:i,lineBreak:a,value:d}=this.inner.next(n);return i&&this.afterBreak?(this.value="",this.afterBreak=!1):i?(this.done=!0,this.value=""):a?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=d,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol!="undefined"&&(he.prototype[Symbol.iterator]=function(){return this.iter()},st.prototype[Symbol.iterator]=Ue.prototype[Symbol.iterator]=We.prototype[Symbol.iterator]=function(){return this});class xt{constructor(n,i,a,d){this.from=n,this.to=i,this.number=a,this.text=d}get length(){return this.to-this.from}}function dt(S,n,i){return n=Math.max(0,Math.min(S.length,n)),[n,Math.max(n,Math.min(S.length,i))]}function ht(S,n,i=!0,a=!0){return _e(S,n,i,a)}function Ye(S){return S>=56320&&S<57344}function mt(S){return S>=55296&&S<56320}function vt(S,n){let i=S.charCodeAt(n);if(!mt(i)||n+1==S.length)return i;let a=S.charCodeAt(n+1);return Ye(a)?(i-55296<<10)+(a-56320)+65536:i}function Ut(S){return S<=65535?String.fromCharCode(S):(S-=65536,String.fromCharCode((S>>10)+55296,(S&1023)+56320))}function ft(S){return S<65536?1:2}const Xe=/\r\n?|\n/;var j=function(S){return S[S.Simple=0]="Simple",S[S.TrackDel=1]="TrackDel",S[S.TrackBefore=2]="TrackBefore",S[S.TrackAfter=3]="TrackAfter",S}(j||(j={}));class ke{constructor(n){this.sections=n}get length(){let n=0;for(let i=0;i<this.sections.length;i+=2)n+=this.sections[i];return n}get newLength(){let n=0;for(let i=0;i<this.sections.length;i+=2){let a=this.sections[i+1];n+=a<0?this.sections[i]:a}return n}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(n){for(let i=0,a=0,d=0;i<this.sections.length;){let v=this.sections[i++],k=this.sections[i++];k<0?(n(a,d,v),d+=v):d+=k,a+=v}}iterChangedRanges(n,i=!1){ae(this,n,i)}get invertedDesc(){let n=[];for(let i=0;i<this.sections.length;){let a=this.sections[i++],d=this.sections[i++];d<0?n.push(a,d):n.push(d,a)}return new ke(n)}composeDesc(n){return this.empty?n:n.empty?this:me(this,n)}mapDesc(n,i=!1){return n.empty?this:ne(this,n,i)}mapPos(n,i=-1,a=j.Simple){let d=0,v=0;for(let k=0;k<this.sections.length;){let P=this.sections[k++],D=this.sections[k++],u=d+P;if(D<0){if(u>n)return v+(n-d);v+=P}else{if(a!=j.Simple&&u>=n&&(a==j.TrackDel&&d<n&&u>n||a==j.TrackBefore&&d<n||a==j.TrackAfter&&u>n))return null;if(u>n||u==n&&i<0&&!P)return n==d||i<0?v:v+D;v+=D}d=u}if(n>d)throw new RangeError(`Position ${n} is out of range for changeset of length ${d}`);return v}touchesRange(n,i=n){for(let a=0,d=0;a<this.sections.length&&d<=i;){let v=this.sections[a++],k=this.sections[a++],P=d+v;if(k>=0&&d<=i&&P>=n)return d<n&&P>i?"cover":!0;d=P}return!1}toString(){let n="";for(let i=0;i<this.sections.length;){let a=this.sections[i++],d=this.sections[i++];n+=(n?" ":"")+a+(d>=0?":"+d:"")}return n}toJSON(){return this.sections}static fromJSON(n){if(!Array.isArray(n)||n.length%2||n.some(i=>typeof i!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new ke(n)}static create(n){return new ke(n)}}class le extends ke{constructor(n,i){super(n),this.inserted=i}apply(n){if(this.length!=n.length)throw new RangeError("Applying change set to a document with the wrong length");return ae(this,(i,a,d,v,k)=>n=n.replace(d,d+(a-i),k),!1),n}mapDesc(n,i=!1){return ne(this,n,i,!0)}invert(n){let i=this.sections.slice(),a=[];for(let d=0,v=0;d<i.length;d+=2){let k=i[d],P=i[d+1];if(P>=0){i[d]=P,i[d+1]=k;let D=d>>1;for(;a.length<D;)a.push(he.empty);a.push(k?n.slice(v,v+k):he.empty)}v+=k}return new le(i,a)}compose(n){return this.empty?n:n.empty?this:me(this,n,!0)}map(n,i=!1){return n.empty?this:ne(this,n,i,!0)}iterChanges(n,i=!1){ae(this,n,i)}get desc(){return ke.create(this.sections)}filter(n){let i=[],a=[],d=[],v=new De(this);e:for(let k=0,P=0;;){let D=k==n.length?1e9:n[k++];for(;P<D||P==D&&v.len==0;){if(v.done)break e;let o=Math.min(v.len,D-P);W(d,o,-1);let h=v.ins==-1?-1:v.off==0?v.ins:0;W(i,o,h),h>0&&Q(a,i,v.text),v.forward(o),P+=o}let u=n[k++];for(;P<u;){if(v.done)break e;let o=Math.min(v.len,u-P);W(i,o,-1),W(d,o,v.ins==-1?-1:v.off==0?v.ins:0),v.forward(o),P+=o}}return{changes:new le(i,a),filtered:ke.create(d)}}toJSON(){let n=[];for(let i=0;i<this.sections.length;i+=2){let a=this.sections[i],d=this.sections[i+1];d<0?n.push(a):d==0?n.push([a]):n.push([a].concat(this.inserted[i>>1].toJSON()))}return n}static of(n,i,a){let d=[],v=[],k=0,P=null;function D(o=!1){if(!o&&!d.length)return;k<i&&W(d,i-k,-1);let h=new le(d,v);P=P?P.compose(h.map(P)):h,d=[],v=[],k=0}function u(o){if(Array.isArray(o))for(let h of o)u(h);else if(o instanceof le){if(o.length!=i)throw new RangeError(`Mismatched change set length (got ${o.length}, expected ${i})`);D(),P=P?P.compose(o.map(P)):o}else{let{from:h,to:x=h,insert:w}=o;if(h>x||h<0||x>i)throw new RangeError(`Invalid change range ${h} to ${x} (in doc of length ${i})`);let O=w?typeof w=="string"?he.of(w.split(a||Xe)):w:he.empty,N=O.length;if(h==x&&N==0)return;h<k&&D(),h>k&&W(d,h-k,-1),W(d,x-h,N),Q(v,d,O),k=x}}return u(n),D(!P),P}static empty(n){return new le(n?[n,-1]:[],[])}static fromJSON(n){if(!Array.isArray(n))throw new RangeError("Invalid JSON representation of ChangeSet");let i=[],a=[];for(let d=0;d<n.length;d++){let v=n[d];if(typeof v=="number")i.push(v,-1);else{if(!Array.isArray(v)||typeof v[0]!="number"||v.some((k,P)=>P&&typeof k!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(v.length==1)i.push(v[0],0);else{for(;a.length<d;)a.push(he.empty);a[d]=he.of(v.slice(1)),i.push(v[0],a[d].length)}}}return new le(i,a)}static createSet(n,i){return new le(n,i)}}function W(S,n,i,a=!1){if(n==0&&i<=0)return;let d=S.length-2;d>=0&&i<=0&&i==S[d+1]?S[d]+=n:d>=0&&n==0&&S[d]==0?S[d+1]+=i:a?(S[d]+=n,S[d+1]+=i):S.push(n,i)}function Q(S,n,i){if(i.length==0)return;let a=n.length-2>>1;if(a<S.length)S[S.length-1]=S[S.length-1].append(i);else{for(;S.length<a;)S.push(he.empty);S.push(i)}}function ae(S,n,i){let a=S.inserted;for(let d=0,v=0,k=0;k<S.sections.length;){let P=S.sections[k++],D=S.sections[k++];if(D<0)d+=P,v+=P;else{let u=d,o=v,h=he.empty;for(;u+=P,o+=D,D&&a&&(h=h.append(a[k-2>>1])),!(i||k==S.sections.length||S.sections[k+1]<0);)P=S.sections[k++],D=S.sections[k++];n(d,u,v,o,h),d=u,v=o}}}function ne(S,n,i,a=!1){let d=[],v=a?[]:null,k=new De(S),P=new De(n);for(let D=-1;;){if(k.done&&P.len||P.done&&k.len)throw new Error("Mismatched change set lengths");if(k.ins==-1&&P.ins==-1){let u=Math.min(k.len,P.len);W(d,u,-1),k.forward(u),P.forward(u)}else if(P.ins>=0&&(k.ins<0||D==k.i||k.off==0&&(P.len<k.len||P.len==k.len&&!i))){let u=P.len;for(W(d,P.ins,-1);u;){let o=Math.min(k.len,u);k.ins>=0&&D<k.i&&k.len<=o&&(W(d,0,k.ins),v&&Q(v,d,k.text),D=k.i),k.forward(o),u-=o}P.next()}else if(k.ins>=0){let u=0,o=k.len;for(;o;)if(P.ins==-1){let h=Math.min(o,P.len);u+=h,o-=h,P.forward(h)}else if(P.ins==0&&P.len<o)o-=P.len,P.next();else break;W(d,u,D<k.i?k.ins:0),v&&D<k.i&&Q(v,d,k.text),D=k.i,k.forward(k.len-o)}else{if(k.done&&P.done)return v?le.createSet(d,v):ke.create(d);throw new Error("Mismatched change set lengths")}}}function me(S,n,i=!1){let a=[],d=i?[]:null,v=new De(S),k=new De(n);for(let P=!1;;){if(v.done&&k.done)return d?le.createSet(a,d):ke.create(a);if(v.ins==0)W(a,v.len,0,P),v.next();else if(k.len==0&&!k.done)W(a,0,k.ins,P),d&&Q(d,a,k.text),k.next();else{if(v.done||k.done)throw new Error("Mismatched change set lengths");{let D=Math.min(v.len2,k.len),u=a.length;if(v.ins==-1){let o=k.ins==-1?-1:k.off?0:k.ins;W(a,D,o,P),d&&o&&Q(d,a,k.text)}else k.ins==-1?(W(a,v.off?0:v.len,D,P),d&&Q(d,a,v.textBit(D))):(W(a,v.off?0:v.len,k.off?0:k.ins,P),d&&!k.off&&Q(d,a,k.text));P=(v.ins>D||k.ins>=0&&k.len>D)&&(P||a.length>u),v.forward2(D),k.forward(D)}}}}class De{constructor(n){this.set=n,this.i=0,this.next()}next(){let{sections:n}=this.set;this.i<n.length?(this.len=n[this.i++],this.ins=n[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:n}=this.set,i=this.i-2>>1;return i>=n.length?he.empty:n[i]}textBit(n){let{inserted:i}=this.set,a=this.i-2>>1;return a>=i.length&&!n?he.empty:i[a].slice(this.off,n==null?void 0:this.off+n)}forward(n){n==this.len?this.next():(this.len-=n,this.off+=n)}forward2(n){this.ins==-1?this.forward(n):n==this.ins?this.next():(this.ins-=n,this.off+=n)}}class Fe{constructor(n,i,a){this.from=n,this.to=i,this.flags=a}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let n=this.flags&7;return n==7?null:n}get goalColumn(){let n=this.flags>>6;return n==16777215?void 0:n}map(n,i=-1){let a,d;return this.empty?a=d=n.mapPos(this.from,i):(a=n.mapPos(this.from,1),d=n.mapPos(this.to,-1)),a==this.from&&d==this.to?this:new Fe(a,d,this.flags)}extend(n,i=n){if(n<=this.anchor&&i>=this.anchor)return xe.range(n,i);let a=Math.abs(n-this.anchor)>Math.abs(i-this.anchor)?n:i;return xe.range(this.anchor,a)}eq(n,i=!1){return this.anchor==n.anchor&&this.head==n.head&&(!i||!this.empty||this.assoc==n.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(n){if(!n||typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return xe.range(n.anchor,n.head)}static create(n,i,a){return new Fe(n,i,a)}}class xe{constructor(n,i){this.ranges=n,this.mainIndex=i}map(n,i=-1){return n.empty?this:xe.create(this.ranges.map(a=>a.map(n,i)),this.mainIndex)}eq(n,i=!1){if(this.ranges.length!=n.ranges.length||this.mainIndex!=n.mainIndex)return!1;for(let a=0;a<this.ranges.length;a++)if(!this.ranges[a].eq(n.ranges[a],i))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new xe([this.main],0)}addRange(n,i=!0){return xe.create([n].concat(this.ranges),i?0:this.mainIndex+1)}replaceRange(n,i=this.mainIndex){let a=this.ranges.slice();return a[i]=n,xe.create(a,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(n=>n.toJSON()),main:this.mainIndex}}static fromJSON(n){if(!n||!Array.isArray(n.ranges)||typeof n.main!="number"||n.main>=n.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new xe(n.ranges.map(i=>Fe.fromJSON(i)),n.main)}static single(n,i=n){return new xe([xe.range(n,i)],0)}static create(n,i=0){if(n.length==0)throw new RangeError("A selection needs at least one range");for(let a=0,d=0;d<n.length;d++){let v=n[d];if(v.empty?v.from<=a:v.from<a)return xe.normalized(n.slice(),i);a=v.to}return new xe(n,i)}static cursor(n,i=0,a,d){return Fe.create(n,n,(i==0?0:i<0?8:16)|(a==null?7:Math.min(6,a))|(d!=null?d:16777215)<<6)}static range(n,i,a,d){let v=(a!=null?a:16777215)<<6|(d==null?7:Math.min(6,d));return i<n?Fe.create(i,n,48|v):Fe.create(n,i,(i>n?8:0)|v)}static normalized(n,i=0){let a=n[i];n.sort((d,v)=>d.from-v.from),i=n.indexOf(a);for(let d=1;d<n.length;d++){let v=n[d],k=n[d-1];if(v.empty?v.from<=k.to:v.from<k.to){let P=k.from,D=Math.max(v.to,k.to);d<=i&&i--,n.splice(--d,2,v.anchor>v.head?xe.range(D,P):xe.range(P,D))}}return new xe(n,i)}}function Pe(S,n){for(let i of S.ranges)if(i.to>n)throw new RangeError("Selection points outside of document")}let je=0;class Le{constructor(n,i,a,d,v){this.combine=n,this.compareInput=i,this.compare=a,this.isStatic=d,this.id=je++,this.default=n([]),this.extensions=typeof v=="function"?v(this):v}get reader(){return this}static define(n={}){return new Le(n.combine||(i=>i),n.compareInput||((i,a)=>i===a),n.compare||(n.combine?(i,a)=>i===a:et),!!n.static,n.enables)}of(n){return new He([],this,0,n)}compute(n,i){if(this.isStatic)throw new Error("Can't compute a static facet");return new He(n,this,1,i)}computeN(n,i){if(this.isStatic)throw new Error("Can't compute a static facet");return new He(n,this,2,i)}from(n,i){return i||(i=a=>a),this.compute([n],a=>i(a.field(n)))}}function et(S,n){return S==n||S.length==n.length&&S.every((i,a)=>i===n[a])}class He{constructor(n,i,a,d){this.dependencies=n,this.facet=i,this.type=a,this.value=d,this.id=je++}dynamicSlot(n){var i;let a=this.value,d=this.facet.compareInput,v=this.id,k=n[v]>>1,P=this.type==2,D=!1,u=!1,o=[];for(let h of this.dependencies)h=="doc"?D=!0:h=="selection"?u=!0:((i=n[h.id])!==null&&i!==void 0?i:1)&1||o.push(n[h.id]);return{create(h){return h.values[k]=a(h),1},update(h,x){if(D&&x.docChanged||u&&(x.docChanged||x.selection)||Nt(h,o)){let w=a(h);if(P?!jt(w,h.values[k],d):!d(w,h.values[k]))return h.values[k]=w,1}return 0},reconfigure:(h,x)=>{let w,O=x.config.address[v];if(O!=null){let N=Ce(x,O);if(this.dependencies.every($=>$ instanceof Le?x.facet($)===h.facet($):$ instanceof y?x.field($,!1)==h.field($,!1):!0)||(P?jt(w=a(h),N,d):d(w=a(h),N)))return h.values[k]=N,0}else w=a(h);return h.values[k]=w,1}}}}function jt(S,n,i){if(S.length!=n.length)return!1;for(let a=0;a<S.length;a++)if(!i(S[a],n[a]))return!1;return!0}function Nt(S,n){let i=!1;for(let a of n)be(S,a)&1&&(i=!0);return i}function U(S,n,i){let a=i.map(D=>S[D.id]),d=i.map(D=>D.type),v=a.filter(D=>!(D&1)),k=S[n.id]>>1;function P(D){let u=[];for(let o=0;o<a.length;o++){let h=Ce(D,a[o]);if(d[o]==2)for(let x of h)u.push(x);else u.push(h)}return n.combine(u)}return{create(D){for(let u of a)be(D,u);return D.values[k]=P(D),1},update(D,u){if(!Nt(D,v))return 0;let o=P(D);return n.compare(o,D.values[k])?0:(D.values[k]=o,1)},reconfigure(D,u){let o=Nt(D,a),h=u.config.facets[n.id],x=u.facet(n);if(h&&!o&&et(i,h))return D.values[k]=x,0;let w=P(D);return n.compare(w,x)?(D.values[k]=x,0):(D.values[k]=w,1)}}}const p=Le.define({static:!0});class y{constructor(n,i,a,d,v){this.id=n,this.createF=i,this.updateF=a,this.compareF=d,this.spec=v,this.provides=void 0}static define(n){let i=new y(je++,n.create,n.update,n.compare||((a,d)=>a===d),n);return n.provide&&(i.provides=n.provide(i)),i}create(n){let i=n.facet(p).find(a=>a.field==this);return((i==null?void 0:i.create)||this.createF)(n)}slot(n){let i=n[this.id]>>1;return{create:a=>(a.values[i]=this.create(a),1),update:(a,d)=>{let v=a.values[i],k=this.updateF(v,d);return this.compareF(v,k)?0:(a.values[i]=k,1)},reconfigure:(a,d)=>{let v=a.facet(p),k=d.facet(p),P;return(P=v.find(D=>D.field==this))&&P!=k.find(D=>D.field==this)?(a.values[i]=P.create(a),1):d.config.address[this.id]!=null?(a.values[i]=d.field(this),0):(a.values[i]=this.create(a),1)}}}init(n){return[this,p.of({field:this,create:n})]}get extension(){return this}}const A={lowest:4,low:3,default:2,high:1,highest:0};function I(S){return n=>new J(n,S)}const B={highest:I(A.highest),high:I(A.high),default:I(A.default),low:I(A.low),lowest:I(A.lowest)};class J{constructor(n,i){this.inner=n,this.prec=i}}class H{of(n){return new re(this,n)}reconfigure(n){return H.reconfigure.of({compartment:this,extension:n})}get(n){return n.config.compartments.get(this)}}class re{constructor(n,i){this.compartment=n,this.inner=i}}class de{constructor(n,i,a,d,v,k){for(this.base=n,this.compartments=i,this.dynamicSlots=a,this.address=d,this.staticValues=v,this.facets=k,this.statusTemplate=[];this.statusTemplate.length<a.length;)this.statusTemplate.push(0)}staticFacet(n){let i=this.address[n.id];return i==null?n.default:this.staticValues[i>>1]}static resolve(n,i,a){let d=[],v=Object.create(null),k=new Map;for(let x of ce(n,i,k))x instanceof y?d.push(x):(v[x.facet.id]||(v[x.facet.id]=[])).push(x);let P=Object.create(null),D=[],u=[];for(let x of d)P[x.id]=u.length<<1,u.push(w=>x.slot(w));let o=a==null?void 0:a.config.facets;for(let x in v){let w=v[x],O=w[0].facet,N=o&&o[x]||[];if(w.every($=>$.type==0))if(P[O.id]=D.length<<1|1,et(N,w))D.push(a.facet(O));else{let $=O.combine(w.map(z=>z.value));D.push(a&&O.compare($,a.facet(O))?a.facet(O):$)}else{for(let $ of w)$.type==0?(P[$.id]=D.length<<1|1,D.push($.value)):(P[$.id]=u.length<<1,u.push(z=>$.dynamicSlot(z)));P[O.id]=u.length<<1,u.push($=>U($,O,w))}}let h=u.map(x=>x(P));return new de(n,k,h,P,D,v)}}function ce(S,n,i){let a=[[],[],[],[],[]],d=new Map;function v(k,P){let D=d.get(k);if(D!=null){if(D<=P)return;let u=a[D].indexOf(k);u>-1&&a[D].splice(u,1),k instanceof re&&i.delete(k.compartment)}if(d.set(k,P),Array.isArray(k))for(let u of k)v(u,P);else if(k instanceof re){if(i.has(k.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=n.get(k.compartment)||k.inner;i.set(k.compartment,u),v(u,P)}else if(k instanceof J)v(k.inner,k.prec);else if(k instanceof y)a[P].push(k),k.provides&&v(k.provides,P);else if(k instanceof He)a[P].push(k),k.facet.extensions&&v(k.facet.extensions,A.default);else{let u=k.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${k}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);v(u,P)}}return v(S,A.default),a.reduce((k,P)=>k.concat(P))}function be(S,n){if(n&1)return 2;let i=n>>1,a=S.status[i];if(a==4)throw new Error("Cyclic dependency between fields and/or facets");if(a&2)return a;S.status[i]=4;let d=S.computeSlot(S,S.config.dynamicSlots[i]);return S.status[i]=2|d}function Ce(S,n){return n&1?S.config.staticValues[n>>1]:S.values[n>>1]}const Ve=Le.define(),Ge=Le.define({combine:S=>S.some(n=>n),static:!0}),kt=Le.define({combine:S=>S.length?S[0]:void 0,static:!0}),qe=Le.define(),It=Le.define(),gt=Le.define(),ot=Le.define({combine:S=>S.length?S[0]:!1});class At{constructor(n,i){this.type=n,this.value=i}static define(){return new tt}}class tt{of(n){return new At(this,n)}}class pt{constructor(n){this.map=n}of(n){return new pe(this,n)}}class pe{constructor(n,i){this.type=n,this.value=i}map(n){let i=this.type.map(this.value,n);return i===void 0?void 0:i==this.value?this:new pe(this.type,i)}is(n){return this.type==n}static define(n={}){return new pt(n.map||(i=>i))}static mapEffects(n,i){if(!n.length)return n;let a=[];for(let d of n){let v=d.map(i);v&&a.push(v)}return a}}pe.reconfigure=pe.define(),pe.appendConfig=pe.define();class Je{constructor(n,i,a,d,v,k){this.startState=n,this.changes=i,this.selection=a,this.effects=d,this.annotations=v,this.scrollIntoView=k,this._doc=null,this._state=null,a&&Pe(a,i.newLength),v.some(P=>P.type==Je.time)||(this.annotations=v.concat(Je.time.of(Date.now())))}static create(n,i,a,d,v,k){return new Je(n,i,a,d,v,k)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(n){for(let i of this.annotations)if(i.type==n)return i.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(n){let i=this.annotation(Je.userEvent);return!!(i&&(i==n||i.length>n.length&&i.slice(0,n.length)==n&&i[n.length]=="."))}}Je.time=At.define(),Je.userEvent=At.define(),Je.addToHistory=At.define(),Je.remote=At.define();function lt(S,n){let i=[];for(let a=0,d=0;;){let v,k;if(a<S.length&&(d==n.length||n[d]>=S[a]))v=S[a++],k=S[a++];else if(d<n.length)v=n[d++],k=n[d++];else return i;!i.length||i[i.length-1]<v?i.push(v,k):i[i.length-1]<k&&(i[i.length-1]=k)}}function at(S,n,i){var a;let d,v,k;return i?(d=n.changes,v=le.empty(n.changes.length),k=S.changes.compose(n.changes)):(d=n.changes.map(S.changes),v=S.changes.mapDesc(n.changes,!0),k=S.changes.compose(d)),{changes:k,selection:n.selection?n.selection.map(v):(a=S.selection)===null||a===void 0?void 0:a.map(d),effects:pe.mapEffects(S.effects,d).concat(pe.mapEffects(n.effects,v)),annotations:S.annotations.length?S.annotations.concat(n.annotations):n.annotations,scrollIntoView:S.scrollIntoView||n.scrollIntoView}}function ze(S,n,i){let a=n.selection,d=Tt(n.annotations);return n.userEvent&&(d=d.concat(Je.userEvent.of(n.userEvent))),{changes:n.changes instanceof le?n.changes:le.of(n.changes||[],i,S.facet(kt)),selection:a&&(a instanceof xe?a:xe.single(a.anchor,a.head)),effects:Tt(n.effects),annotations:d,scrollIntoView:!!n.scrollIntoView}}function Ie(S,n,i){let a=ze(S,n.length?n[0]:{},S.doc.length);n.length&&n[0].filter===!1&&(i=!1);for(let v=1;v<n.length;v++){n[v].filter===!1&&(i=!1);let k=!!n[v].sequential;a=at(a,ze(S,n[v],k?a.changes.newLength:S.doc.length),k)}let d=Je.create(S,a.changes,a.selection,a.effects,a.annotations,a.scrollIntoView);return ut(i?nt(d):d)}function nt(S){let n=S.startState,i=!0;for(let d of n.facet(qe)){let v=d(S);if(v===!1){i=!1;break}Array.isArray(v)&&(i=i===!0?v:lt(i,v))}if(i!==!0){let d,v;if(i===!1)v=S.changes.invertedDesc,d=le.empty(n.doc.length);else{let k=S.changes.filter(i);d=k.changes,v=k.filtered.mapDesc(k.changes).invertedDesc}S=Je.create(n,d,S.selection&&S.selection.map(v),pe.mapEffects(S.effects,v),S.annotations,S.scrollIntoView)}let a=n.facet(It);for(let d=a.length-1;d>=0;d--){let v=a[d](S);v instanceof Je?S=v:Array.isArray(v)&&v.length==1&&v[0]instanceof Je?S=v[0]:S=Ie(n,Tt(v),!1)}return S}function ut(S){let n=S.startState,i=n.facet(gt),a=S;for(let d=i.length-1;d>=0;d--){let v=i[d](S);v&&Object.keys(v).length&&(a=at(a,ze(n,v,S.changes.newLength),!0))}return a==S?S:Je.create(n,S.changes,S.selection,a.effects,a.annotations,a.scrollIntoView)}const St=[];function Tt(S){return S==null?St:Array.isArray(S)?S:[S]}var Lt=function(S){return S[S.Word=0]="Word",S[S.Space=1]="Space",S[S.Other=2]="Other",S}(Lt||(Lt={}));const Qt=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Mt;try{Mt=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(S){}function rn(S){if(Mt)return Mt.test(S);for(let n=0;n<S.length;n++){let i=S[n];if(/\w/.test(i)||i>"\x80"&&(i.toUpperCase()!=i.toLowerCase()||Qt.test(i)))return!0}return!1}function Ot(S){return n=>{if(!/\S/.test(n))return Lt.Space;if(rn(n))return Lt.Word;for(let i=0;i<S.length;i++)if(n.indexOf(S[i])>-1)return Lt.Word;return Lt.Other}}class Oe{constructor(n,i,a,d,v,k){this.config=n,this.doc=i,this.selection=a,this.values=d,this.status=n.statusTemplate.slice(),this.computeSlot=v,k&&(k._state=this);for(let P=0;P<this.config.dynamicSlots.length;P++)be(this,P<<1);this.computeSlot=null}field(n,i=!0){let a=this.config.address[n.id];if(a==null){if(i)throw new RangeError("Field is not present in this state");return}return be(this,a),Ce(this,a)}update(...n){return Ie(this,n,!0)}applyTransaction(n){let i=this.config,{base:a,compartments:d}=i;for(let P of n.effects)P.is(H.reconfigure)?(i&&(d=new Map,i.compartments.forEach((D,u)=>d.set(u,D)),i=null),d.set(P.value.compartment,P.value.extension)):P.is(pe.reconfigure)?(i=null,a=P.value):P.is(pe.appendConfig)&&(i=null,a=Tt(a).concat(P.value));let v;i?v=n.startState.values.slice():(i=de.resolve(a,d,this),v=new Oe(i,this.doc,this.selection,i.dynamicSlots.map(()=>null),(D,u)=>u.reconfigure(D,this),null).values);let k=n.startState.facet(Ge)?n.newSelection:n.newSelection.asSingle();new Oe(i,n.newDoc,k,v,(P,D)=>D.update(P,n),n)}replaceSelection(n){return typeof n=="string"&&(n=this.toText(n)),this.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:n},range:xe.cursor(i.from+n.length)}))}changeByRange(n){let i=this.selection,a=n(i.ranges[0]),d=this.changes(a.changes),v=[a.range],k=Tt(a.effects);for(let P=1;P<i.ranges.length;P++){let D=n(i.ranges[P]),u=this.changes(D.changes),o=u.map(d);for(let x=0;x<P;x++)v[x]=v[x].map(o);let h=d.mapDesc(u,!0);v.push(D.range.map(h)),d=d.compose(o),k=pe.mapEffects(k,o).concat(pe.mapEffects(Tt(D.effects),h))}return{changes:d,selection:xe.create(v,i.mainIndex),effects:k}}changes(n=[]){return n instanceof le?n:le.of(n,this.doc.length,this.facet(Oe.lineSeparator))}toText(n){return he.of(n.split(this.facet(Oe.lineSeparator)||Xe))}sliceDoc(n=0,i=this.doc.length){return this.doc.sliceString(n,i,this.lineBreak)}facet(n){let i=this.config.address[n.id];return i==null?n.default:(be(this,i),Ce(this,i))}toJSON(n){let i={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(n)for(let a in n){let d=n[a];d instanceof y&&this.config.address[d.id]!=null&&(i[a]=d.spec.toJSON(this.field(n[a]),this))}return i}static fromJSON(n,i={},a){if(!n||typeof n.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let d=[];if(a){for(let v in a)if(Object.prototype.hasOwnProperty.call(n,v)){let k=a[v],P=n[v];d.push(k.init(D=>k.spec.fromJSON(P,D)))}}return Oe.create({doc:n.doc,selection:xe.fromJSON(n.selection),extensions:i.extensions?d.concat([i.extensions]):d})}static create(n={}){let i=de.resolve(n.extensions||[],new Map),a=n.doc instanceof he?n.doc:he.of((n.doc||"").split(i.staticFacet(Oe.lineSeparator)||Xe)),d=n.selection?n.selection instanceof xe?n.selection:xe.single(n.selection.anchor,n.selection.head):xe.single(0);return Pe(d,a.length),i.staticFacet(Ge)||(d=d.asSingle()),new Oe(i,a,d,i.dynamicSlots.map(()=>null),(v,k)=>k.create(v),null)}get tabSize(){return this.facet(Oe.tabSize)}get lineBreak(){return this.facet(Oe.lineSeparator)||`
`}get readOnly(){return this.facet(ot)}phrase(n,...i){for(let a of this.facet(Oe.phrases))if(Object.prototype.hasOwnProperty.call(a,n)){n=a[n];break}return i.length&&(n=n.replace(/\$(\$|\d*)/g,(a,d)=>{if(d=="$")return"$";let v=+(d||1);return!v||v>i.length?a:i[v-1]})),n}languageDataAt(n,i,a=-1){let d=[];for(let v of this.facet(Ve))for(let k of v(this,i,a))Object.prototype.hasOwnProperty.call(k,n)&&d.push(k[n]);return d}charCategorizer(n){return Ot(this.languageDataAt("wordChars",n).join(""))}wordAt(n){let{text:i,from:a,length:d}=this.doc.lineAt(n),v=this.charCategorizer(n),k=n-a,P=n-a;for(;k>0;){let D=ht(i,k,!1);if(v(i.slice(D,k))!=Lt.Word)break;k=D}for(;P<d;){let D=ht(i,P);if(v(i.slice(P,D))!=Lt.Word)break;P=D}return k==P?null:xe.range(k+a,P+a)}}Oe.allowMultipleSelections=Ge,Oe.tabSize=Le.define({combine:S=>S.length?S[0]:4}),Oe.lineSeparator=kt,Oe.readOnly=ot,Oe.phrases=Le.define({compare(S,n){let i=Object.keys(S),a=Object.keys(n);return i.length==a.length&&i.every(d=>S[d]==n[d])}}),Oe.languageData=Ve,Oe.changeFilter=qe,Oe.transactionFilter=It,Oe.transactionExtender=gt,H.reconfigure=pe.define();function bt(S,n,i={}){let a={};for(let d of S)for(let v of Object.keys(d)){let k=d[v],P=a[v];if(P===void 0)a[v]=k;else if(!(P===k||k===void 0))if(Object.hasOwnProperty.call(i,v))a[v]=i[v](P,k);else throw new Error("Config merge conflict for field "+v)}for(let d in n)a[d]===void 0&&(a[d]=n[d]);return a}class Jt{eq(n){return this==n}range(n,i=n){return zt.create(n,i,this)}}Jt.prototype.startSide=Jt.prototype.endSide=0,Jt.prototype.point=!1,Jt.prototype.mapMode=j.TrackDel;class zt{constructor(n,i,a){this.from=n,this.to=i,this.value=a}static create(n,i,a){return new zt(n,i,a)}}function Ht(S,n){return S.from-n.from||S.value.startSide-n.value.startSide}class Yt{constructor(n,i,a,d){this.from=n,this.to=i,this.value=a,this.maxPoint=d}get length(){return this.to[this.to.length-1]}findIndex(n,i,a,d=0){let v=a?this.to:this.from;for(let k=d,P=v.length;;){if(k==P)return k;let D=k+P>>1,u=v[D]-n||(a?this.value[D].endSide:this.value[D].startSide)-i;if(D==k)return u>=0?k:P;u>=0?P=D:k=D+1}}between(n,i,a,d){for(let v=this.findIndex(i,-1e9,!0),k=this.findIndex(a,1e9,!1,v);v<k;v++)if(d(this.from[v]+n,this.to[v]+n,this.value[v])===!1)return!1}map(n,i){let a=[],d=[],v=[],k=-1,P=-1;for(let D=0;D<this.value.length;D++){let u=this.value[D],o=this.from[D]+n,h=this.to[D]+n,x,w;if(o==h){let O=i.mapPos(o,u.startSide,u.mapMode);if(O==null||(x=w=O,u.startSide!=u.endSide&&(w=i.mapPos(o,u.endSide),w<x)))continue}else if(x=i.mapPos(o,u.startSide),w=i.mapPos(h,u.endSide),x>w||x==w&&u.startSide>0&&u.endSide<=0)continue;(w-x||u.endSide-u.startSide)<0||(k<0&&(k=x),u.point&&(P=Math.max(P,w-x)),a.push(u),d.push(x-k),v.push(w-k))}return{mapped:a.length?new Yt(d,v,a,P):null,pos:k}}}class Et{constructor(n,i,a,d){this.chunkPos=n,this.chunk=i,this.nextLayer=a,this.maxPoint=d}static create(n,i,a,d){return new Et(n,i,a,d)}get length(){let n=this.chunk.length-1;return n<0?0:Math.max(this.chunkEnd(n),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let n=this.nextLayer.size;for(let i of this.chunk)n+=i.value.length;return n}chunkEnd(n){return this.chunkPos[n]+this.chunk[n].length}update(n){let{add:i=[],sort:a=!1,filterFrom:d=0,filterTo:v=this.length}=n,k=n.filter;if(i.length==0&&!k)return this;if(a&&(i=i.slice().sort(Ht)),this.isEmpty)return i.length?Et.of(i):this;let P=new wn(this,null,-1).goto(0),D=0,u=[],o=new Xt;for(;P.value||D<i.length;)if(D<i.length&&(P.from-i[D].from||P.startSide-i[D].value.startSide)>=0){let h=i[D++];o.addInner(h.from,h.to,h.value)||u.push(h)}else P.rangeIndex==1&&P.chunkIndex<this.chunk.length&&(D==i.length||this.chunkEnd(P.chunkIndex)<i[D].from)&&(!k||d>this.chunkEnd(P.chunkIndex)||v<this.chunkPos[P.chunkIndex])&&o.addChunk(this.chunkPos[P.chunkIndex],this.chunk[P.chunkIndex])?P.nextChunk():((!k||d>P.to||v<P.from||k(P.from,P.to,P.value))&&(o.addInner(P.from,P.to,P.value)||u.push(zt.create(P.from,P.to,P.value))),P.next());return o.finishInner(this.nextLayer.isEmpty&&!u.length?Et.empty:this.nextLayer.update({add:u,filter:k,filterFrom:d,filterTo:v}))}map(n){if(n.empty||this.isEmpty)return this;let i=[],a=[],d=-1;for(let k=0;k<this.chunk.length;k++){let P=this.chunkPos[k],D=this.chunk[k],u=n.touchesRange(P,P+D.length);if(u===!1)d=Math.max(d,D.maxPoint),i.push(D),a.push(n.mapPos(P));else if(u===!0){let{mapped:o,pos:h}=D.map(P,n);o&&(d=Math.max(d,o.maxPoint),i.push(o),a.push(h))}}let v=this.nextLayer.map(n);return i.length==0?v:new Et(a,i,v||Et.empty,d)}between(n,i,a){if(!this.isEmpty){for(let d=0;d<this.chunk.length;d++){let v=this.chunkPos[d],k=this.chunk[d];if(i>=v&&n<=v+k.length&&k.between(v,n-v,i-v,a)===!1)return}this.nextLayer.between(n,i,a)}}iter(n=0){return Ct.from([this]).goto(n)}get isEmpty(){return this.nextLayer==this}static iter(n,i=0){return Ct.from(n).goto(i)}static compare(n,i,a,d,v=-1){let k=n.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=v),P=i.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=v),D=yn(k,P,a),u=new qt(k,D,v),o=new qt(P,D,v);a.iterGaps((h,x,w)=>pn(u,h,o,x,w,d)),a.empty&&a.length==0&&pn(u,0,o,0,0,d)}static eq(n,i,a=0,d){d==null&&(d=999999999);let v=n.filter(o=>!o.isEmpty&&i.indexOf(o)<0),k=i.filter(o=>!o.isEmpty&&n.indexOf(o)<0);if(v.length!=k.length)return!1;if(!v.length)return!0;let P=yn(v,k),D=new qt(v,P,0).goto(a),u=new qt(k,P,0).goto(a);for(;;){if(D.to!=u.to||!xn(D.active,u.active)||D.point&&(!u.point||!D.point.eq(u.point)))return!1;if(D.to>d)return!0;D.next(),u.next()}}static spans(n,i,a,d,v=-1){let k=new qt(n,null,v).goto(i),P=i,D=k.openStart;for(;;){let u=Math.min(k.to,a);if(k.point){let o=k.activeForPoint(k.to),h=k.pointFrom<i?o.length+1:k.point.startSide<0?o.length:Math.min(o.length,D);d.point(P,u,k.point,o,h,k.pointRank),D=Math.min(k.openEnd(u),o.length)}else u>P&&(d.span(P,u,k.active,D),D=k.openEnd(u));if(k.to>a)return D+(k.point&&k.to>a?1:0);P=k.to,k.next()}}static of(n,i=!1){let a=new Xt;for(let d of n instanceof zt?[n]:i?gn(n):n)a.add(d.from,d.to,d.value);return a.finish()}static join(n){if(!n.length)return Et.empty;let i=n[n.length-1];for(let a=n.length-2;a>=0;a--)for(let d=n[a];d!=Et.empty;d=d.nextLayer)i=new Et(d.chunkPos,d.chunk,i,Math.max(d.maxPoint,i.maxPoint));return i}}Et.empty=new Et([],[],null,-1);function gn(S){if(S.length>1)for(let n=S[0],i=1;i<S.length;i++){let a=S[i];if(Ht(n,a)>0)return S.slice().sort(Ht);n=a}return S}Et.empty.nextLayer=Et.empty;class Xt{finishChunk(n){this.chunks.push(new Yt(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,n&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(n,i,a){this.addInner(n,i,a)||(this.nextLayer||(this.nextLayer=new Xt)).add(n,i,a)}addInner(n,i,a){let d=n-this.lastTo||a.startSide-this.last.endSide;if(d<=0&&(n-this.lastFrom||a.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return d<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=n),this.from.push(n-this.chunkStart),this.to.push(i-this.chunkStart),this.last=a,this.lastFrom=n,this.lastTo=i,this.value.push(a),a.point&&(this.maxPoint=Math.max(this.maxPoint,i-n)),!0)}addChunk(n,i){if((n-this.lastTo||i.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,i.maxPoint),this.chunks.push(i),this.chunkPos.push(n);let a=i.value.length-1;return this.last=i.value[a],this.lastFrom=i.from[a]+n,this.lastTo=i.to[a]+n,!0}finish(){return this.finishInner(Et.empty)}finishInner(n){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return n;let i=Et.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(n):n,this.setMaxPoint);return this.from=null,i}}function yn(S,n,i){let a=new Map;for(let v of S)for(let k=0;k<v.chunk.length;k++)v.chunk[k].maxPoint<=0&&a.set(v.chunk[k],v.chunkPos[k]);let d=new Set;for(let v of n)for(let k=0;k<v.chunk.length;k++){let P=a.get(v.chunk[k]);P!=null&&(i?i.mapPos(P):P)==v.chunkPos[k]&&!(i!=null&&i.touchesRange(P,P+v.chunk[k].length))&&d.add(v.chunk[k])}return d}class wn{constructor(n,i,a,d=0){this.layer=n,this.skip=i,this.minPoint=a,this.rank=d}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(n,i=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(n,i,!1),this}gotoInner(n,i,a){for(;this.chunkIndex<this.layer.chunk.length;){let d=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(d)||this.layer.chunkEnd(this.chunkIndex)<n||d.maxPoint<this.minPoint))break;this.chunkIndex++,a=!1}if(this.chunkIndex<this.layer.chunk.length){let d=this.layer.chunk[this.chunkIndex].findIndex(n-this.layer.chunkPos[this.chunkIndex],i,!0);(!a||this.rangeIndex<d)&&this.setRangeIndex(d)}this.next()}forward(n,i){(this.to-n||this.endSide-i)<0&&this.gotoInner(n,i,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let n=this.layer.chunkPos[this.chunkIndex],i=this.layer.chunk[this.chunkIndex],a=n+i.from[this.rangeIndex];if(this.from=a,this.to=n+i.to[this.rangeIndex],this.value=i.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(n){if(n==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=n}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(n){return this.from-n.from||this.startSide-n.startSide||this.rank-n.rank||this.to-n.to||this.endSide-n.endSide}}class Ct{constructor(n){this.heap=n}static from(n,i=null,a=-1){let d=[];for(let v=0;v<n.length;v++)for(let k=n[v];!k.isEmpty;k=k.nextLayer)k.maxPoint>=a&&d.push(new wn(k,i,a,v));return d.length==1?d[0]:new Ct(d)}get startSide(){return this.value?this.value.startSide:0}goto(n,i=-1e9){for(let a of this.heap)a.goto(n,i);for(let a=this.heap.length>>1;a>=0;a--)en(this.heap,a);return this.next(),this}forward(n,i){for(let a of this.heap)a.forward(n,i);for(let a=this.heap.length>>1;a>=0;a--)en(this.heap,a);(this.to-n||this.value.endSide-i)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let n=this.heap[0];this.from=n.from,this.to=n.to,this.value=n.value,this.rank=n.rank,n.value&&n.next(),en(this.heap,0)}}}function en(S,n){for(let i=S[n];;){let a=(n<<1)+1;if(a>=S.length)break;let d=S[a];if(a+1<S.length&&d.compare(S[a+1])>=0&&(d=S[a+1],a++),i.compare(d)<0)break;S[a]=i,S[n]=d,n=a}}class qt{constructor(n,i,a){this.minPoint=a,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Ct.from(n,i,a)}goto(n,i=-1e9){return this.cursor.goto(n,i),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=n,this.endSide=i,this.openStart=-1,this.next(),this}forward(n,i){for(;this.minActive>-1&&(this.activeTo[this.minActive]-n||this.active[this.minActive].endSide-i)<0;)this.removeActive(this.minActive);this.cursor.forward(n,i)}removeActive(n){an(this.active,n),an(this.activeTo,n),an(this.activeRank,n),this.minActive=cn(this.active,this.activeTo)}addActive(n){let i=0,{value:a,to:d,rank:v}=this.cursor;for(;i<this.activeRank.length&&(v-this.activeRank[i]||d-this.activeTo[i])>0;)i++;on(this.active,i,a),on(this.activeTo,i,d),on(this.activeRank,i,v),n&&on(n,i,this.cursor.from),this.minActive=cn(this.active,this.activeTo)}next(){let n=this.to,i=this.point;this.point=null;let a=this.openStart<0?[]:null;for(;;){let d=this.minActive;if(d>-1&&(this.activeTo[d]-this.cursor.from||this.active[d].endSide-this.cursor.startSide)<0){if(this.activeTo[d]>n){this.to=this.activeTo[d],this.endSide=this.active[d].endSide;break}this.removeActive(d),a&&an(a,d)}else if(this.cursor.value)if(this.cursor.from>n){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let v=this.cursor.value;if(!v.point)this.addActive(a),this.cursor.next();else if(i&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=v,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=v.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(a){this.openStart=0;for(let d=a.length-1;d>=0&&a[d]<n;d--)this.openStart++}}activeForPoint(n){if(!this.active.length)return this.active;let i=[];for(let a=this.active.length-1;a>=0&&!(this.activeRank[a]<this.pointRank);a--)(this.activeTo[a]>n||this.activeTo[a]==n&&this.active[a].endSide>=this.point.endSide)&&i.push(this.active[a]);return i.reverse()}openEnd(n){let i=0;for(let a=this.activeTo.length-1;a>=0&&this.activeTo[a]>n;a--)i++;return i}}function pn(S,n,i,a,d,v){S.goto(n),i.goto(a);let k=a+d,P=a,D=a-n;for(;;){let u=S.to+D-i.to,o=u||S.endSide-i.endSide,h=o<0?S.to+D:i.to,x=Math.min(h,k);if(S.point||i.point?S.point&&i.point&&(S.point==i.point||S.point.eq(i.point))&&xn(S.activeForPoint(S.to),i.activeForPoint(i.to))||v.comparePoint(P,x,S.point,i.point):x>P&&!xn(S.active,i.active)&&v.compareRange(P,x,S.active,i.active),h>k)break;(u||S.openEnd!=i.openEnd)&&v.boundChange&&v.boundChange(h),P=h,o<=0&&S.next(),o>=0&&i.next()}}function xn(S,n){if(S.length!=n.length)return!1;for(let i=0;i<S.length;i++)if(S[i]!=n[i]&&!S[i].eq(n[i]))return!1;return!0}function an(S,n){for(let i=n,a=S.length-1;i<a;i++)S[i]=S[i+1];S.pop()}function on(S,n,i){for(let a=S.length-1;a>=n;a--)S[a+1]=S[a];S[n]=i}function cn(S,n){let i=-1,a=1e9;for(let d=0;d<n.length;d++)(n[d]-a||S[d].endSide-S[i].endSide)<0&&(i=d,a=n[d]);return i}function Zt(S,n,i=S.length){let a=0;for(let d=0;d<i&&d<S.length;)S.charCodeAt(d)==9?(a+=n-a%n,d++):(a++,d=ht(S,d));return a}function vn(S,n,i,a){for(let d=0,v=0;;){if(v>=n)return d;if(d==S.length)break;v+=S.charCodeAt(d)==9?i-v%i:1,d=ht(S,d)}return a===!0?-1:S.length}},41113:function(Rt,Ze,ie){ie.d(Ze,{FE:function(){return Q},Jq:function(){return _e},L3:function(){return _},Lj:function(){return Qe},_b:function(){return le},hr:function(){return j},i9:function(){return ke},md:function(){return L},mp:function(){return Ne},vj:function(){return ge}});const _=1024;let se=0;class q{constructor(p,y){this.from=p,this.to=y}}class L{constructor(p={}){this.id=se++,this.perNode=!!p.perNode,this.deserialize=p.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(p){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof p!="function"&&(p=_e.match(p)),y=>{let A=p(y);return A===void 0?null:[this,A]}}}L.closedBy=new L({deserialize:U=>U.split(" ")}),L.openedBy=new L({deserialize:U=>U.split(" ")}),L.group=new L({deserialize:U=>U.split(" ")}),L.isolate=new L({deserialize:U=>{if(U&&U!="rtl"&&U!="ltr"&&U!="auto")throw new RangeError("Invalid value for isolate: "+U);return U||"auto"}}),L.contextHash=new L({perNode:!0}),L.lookAhead=new L({perNode:!0}),L.mounted=new L({perNode:!0});class G{constructor(p,y,A){this.tree=p,this.overlay=y,this.parser=A}static get(p){return p&&p.props&&p.props[L.mounted.id]}}const ve=Object.create(null);class _e{constructor(p,y,A,I=0){this.name=p,this.props=y,this.id=A,this.flags=I}static define(p){let y=p.props&&p.props.length?Object.create(null):ve,A=(p.top?1:0)|(p.skipped?2:0)|(p.error?4:0)|(p.name==null?8:0),I=new _e(p.name||"",y,p.id,A);if(p.props){for(let B of p.props)if(Array.isArray(B)||(B=B(I)),B){if(B[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");y[B[0].id]=B[1]}}return I}prop(p){return this.props[p.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(p){if(typeof p=="string"){if(this.name==p)return!0;let y=this.prop(L.group);return y?y.indexOf(p)>-1:!1}return this.id==p}static match(p){let y=Object.create(null);for(let A in p)for(let I of A.split(" "))y[I]=p[A];return A=>{for(let I=A.prop(L.group),B=-1;B<(I?I.length:0);B++){let J=y[B<0?A.name:I[B]];if(J)return J}}}}_e.none=new _e("",Object.create(null),0,8);class Qe{constructor(p){this.types=p;for(let y=0;y<p.length;y++)if(p[y].id!=y)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...p){let y=[];for(let A of this.types){let I=null;for(let B of p){let J=B(A);J&&(I||(I=Object.assign({},A.props)),I[J[0].id]=J[1])}y.push(I?new _e(A.name,I,A.id,A.flags):A)}return new Qe(y)}}const Ee=new WeakMap,ue=new WeakMap;var ge;(function(U){U[U.ExcludeBuffers=1]="ExcludeBuffers",U[U.IncludeAnonymous=2]="IncludeAnonymous",U[U.IgnoreMounts=4]="IgnoreMounts",U[U.IgnoreOverlays=8]="IgnoreOverlays"})(ge||(ge={}));class Ne{constructor(p,y,A,I,B){if(this.type=p,this.children=y,this.positions=A,this.length=I,this.props=null,B&&B.length){this.props=Object.create(null);for(let[J,H]of B)this.props[typeof J=="number"?J:J.id]=H}}toString(){let p=G.get(this);if(p&&!p.overlay)return p.tree.toString();let y="";for(let A of this.children){let I=A.toString();I&&(y&&(y+=","),y+=I)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(y.length?"("+y+")":""):y}cursor(p=0){return new Ye(this.topNode,p)}cursorAt(p,y=0,A=0){let I=Ee.get(this)||this.topNode,B=new Ye(I);return B.moveTo(p,y),Ee.set(this,B._tree),B}get topNode(){return new Me(this,0,0,null)}resolve(p,y=0){let A=Te(Ee.get(this)||this.topNode,p,y,!1);return Ee.set(this,A),A}resolveInner(p,y=0){let A=Te(ue.get(this)||this.topNode,p,y,!0);return ue.set(this,A),A}resolveStack(p,y=0){return ht(this,p,y)}iterate(p){let{enter:y,leave:A,from:I=0,to:B=this.length}=p,J=p.mode||0,H=(J&ge.IncludeAnonymous)>0;for(let re=this.cursor(J|ge.IncludeAnonymous);;){let de=!1;if(re.from<=B&&re.to>=I&&(!H&&re.type.isAnonymous||y(re)!==!1)){if(re.firstChild())continue;de=!0}for(;de&&A&&(H||!re.type.isAnonymous)&&A(re),!re.nextSibling();){if(!re.parent())return;de=!0}}}prop(p){return p.perNode?this.props?this.props[p.id]:void 0:this.type.prop(p)}get propValues(){let p=[];if(this.props)for(let y in this.props)p.push([+y,this.props[y]]);return p}balance(p={}){return this.children.length<=8?this:Xe(_e.none,this.children,this.positions,0,this.children.length,0,this.length,(y,A,I)=>new Ne(this.type,y,A,I,this.propValues),p.makeTree||((y,A,I)=>new Ne(_e.none,y,A,I)))}static build(p){return vt(p)}}Ne.empty=new Ne(_e.none,[],[],0);class Se{constructor(p,y){this.buffer=p,this.index=y}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Se(this.buffer,this.index)}}class he{constructor(p,y,A){this.buffer=p,this.length=y,this.set=A}get type(){return _e.none}toString(){let p=[];for(let y=0;y<this.buffer.length;)p.push(this.childString(y)),y=this.buffer[y+3];return p.join(",")}childString(p){let y=this.buffer[p],A=this.buffer[p+3],I=this.set.types[y],B=I.name;if(/\W/.test(B)&&!I.isError&&(B=JSON.stringify(B)),p+=4,A==p)return B;let J=[];for(;p<A;)J.push(this.childString(p)),p=this.buffer[p+3];return B+"("+J.join(",")+")"}findChild(p,y,A,I,B){let{buffer:J}=this,H=-1;for(let re=p;re!=y&&!(Be(B,I,J[re+1],J[re+2])&&(H=re,A>0));re=J[re+3]);return H}slice(p,y,A){let I=this.buffer,B=new Uint16Array(y-p),J=0;for(let H=p,re=0;H<y;){B[re++]=I[H++],B[re++]=I[H++]-A;let de=B[re++]=I[H++]-A;B[re++]=I[H++]-p,J=Math.max(J,de)}return new he(B,J,this.set)}}function Be(U,p,y,A){switch(U){case-2:return y<p;case-1:return A>=p&&y<p;case 0:return y<p&&A>p;case 1:return y<=p&&A>p;case 2:return A>p;case 4:return!0}}function Te(U,p,y,A){for(var I;U.from==U.to||(y<1?U.from>=p:U.from>p)||(y>-1?U.to<=p:U.to<p);){let J=!A&&U instanceof Me&&U.index<0?null:U.parent;if(!J)return U;U=J}let B=A?0:ge.IgnoreOverlays;if(A)for(let J=U,H=J.parent;H;J=H,H=J.parent)J instanceof Me&&J.index<0&&((I=H.enter(p,y,B))===null||I===void 0?void 0:I.from)!=J.from&&(U=H);for(;;){let J=U.enter(p,y,B);if(!J)return U;U=J}}class Z{cursor(p=0){return new Ye(this,p)}getChild(p,y=null,A=null){let I=rt(this,p,y,A);return I.length?I[0]:null}getChildren(p,y=null,A=null){return rt(this,p,y,A)}resolve(p,y=0){return Te(this,p,y,!1)}resolveInner(p,y=0){return Te(this,p,y,!0)}matchContext(p){return st(this.parent,p)}enterUnfinishedNodesBefore(p){let y=this.childBefore(p),A=this;for(;y;){let I=y.lastChild;if(!I||I.to!=y.to)break;I.type.isError&&I.from==I.to?(A=y,y=I.prevSibling):y=I}return A}get node(){return this}get next(){return this.parent}}class Me extends Z{constructor(p,y,A,I){super(),this._tree=p,this.from=y,this.index=A,this._parent=I}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(p,y,A,I,B=0){for(let J=this;;){for(let{children:H,positions:re}=J._tree,de=y>0?H.length:-1;p!=de;p+=y){let ce=H[p],be=re[p]+J.from;if(Be(I,A,be,be+ce.length)){if(ce instanceof he){if(B&ge.ExcludeBuffers)continue;let Ce=ce.findChild(0,ce.buffer.length,y,A-be,I);if(Ce>-1)return new We(new Ue(J,ce,p,be),null,Ce)}else if(B&ge.IncludeAnonymous||!ce.type.isAnonymous||mt(ce)){let Ce;if(!(B&ge.IgnoreMounts)&&(Ce=G.get(ce))&&!Ce.overlay)return new Me(Ce.tree,be,p,J);let Ve=new Me(ce,be,p,J);return B&ge.IncludeAnonymous||!Ve.type.isAnonymous?Ve:Ve.nextChild(y<0?ce.children.length-1:0,y,A,I)}}}if(B&ge.IncludeAnonymous||!J.type.isAnonymous||(J.index>=0?p=J.index+y:p=y<0?-1:J._parent._tree.children.length,J=J._parent,!J))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(p){return this.nextChild(0,1,p,2)}childBefore(p){return this.nextChild(this._tree.children.length-1,-1,p,-2)}enter(p,y,A=0){let I;if(!(A&ge.IgnoreOverlays)&&(I=G.get(this._tree))&&I.overlay){let B=p-this.from;for(let{from:J,to:H}of I.overlay)if((y>0?J<=B:J<B)&&(y<0?H>=B:H>B))return new Me(I.tree,I.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,p,y,A)}nextSignificantParent(){let p=this;for(;p.type.isAnonymous&&p._parent;)p=p._parent;return p}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function rt(U,p,y,A){let I=U.cursor(),B=[];if(!I.firstChild())return B;if(y!=null){for(let J=!1;!J;)if(J=I.type.is(y),!I.nextSibling())return B}for(;;){if(A!=null&&I.type.is(A))return B;if(I.type.is(p)&&B.push(I.node),!I.nextSibling())return A==null?B:[]}}function st(U,p,y=p.length-1){for(let A=U;y>=0;A=A.parent){if(!A)return!1;if(!A.type.isAnonymous){if(p[y]&&p[y]!=A.name)return!1;y--}}return!0}class Ue{constructor(p,y,A,I){this.parent=p,this.buffer=y,this.index=A,this.start=I}}class We extends Z{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(p,y,A){super(),this.context=p,this._parent=y,this.index=A,this.type=p.buffer.set.types[p.buffer.buffer[A]]}child(p,y,A){let{buffer:I}=this.context,B=I.findChild(this.index+4,I.buffer[this.index+3],p,y-this.context.start,A);return B<0?null:new We(this.context,this,B)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(p){return this.child(1,p,2)}childBefore(p){return this.child(-1,p,-2)}enter(p,y,A=0){if(A&ge.ExcludeBuffers)return null;let{buffer:I}=this.context,B=I.findChild(this.index+4,I.buffer[this.index+3],y>0?1:-1,p-this.context.start,y);return B<0?null:new We(this.context,this,B)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(p){return this._parent?null:this.context.parent.nextChild(this.context.index+p,p,0,4)}get nextSibling(){let{buffer:p}=this.context,y=p.buffer[this.index+3];return y<(this._parent?p.buffer[this._parent.index+3]:p.buffer.length)?new We(this.context,this._parent,y):this.externalSibling(1)}get prevSibling(){let{buffer:p}=this.context,y=this._parent?this._parent.index+4:0;return this.index==y?this.externalSibling(-1):new We(this.context,this._parent,p.findChild(y,this.index,-1,0,4))}get tree(){return null}toTree(){let p=[],y=[],{buffer:A}=this.context,I=this.index+4,B=A.buffer[this.index+3];if(B>I){let J=A.buffer[this.index+1];p.push(A.slice(I,B,J)),y.push(0)}return new Ne(this.type,p,y,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function xt(U){if(!U.length)return null;let p=0,y=U[0];for(let B=1;B<U.length;B++){let J=U[B];(J.from>y.from||J.to<y.to)&&(y=J,p=B)}let A=y instanceof Me&&y.index<0?null:y.parent,I=U.slice();return A?I[p]=A:I.splice(p,1),new dt(I,y)}class dt{constructor(p,y){this.heads=p,this.node=y}get next(){return xt(this.heads)}}function ht(U,p,y){let A=U.resolveInner(p,y),I=null;for(let B=A instanceof Me?A:A.context.parent;B;B=B.parent)if(B.index<0){let J=B.parent;(I||(I=[A])).push(J.resolve(p,y)),B=J}else{let J=G.get(B.tree);if(J&&J.overlay&&J.overlay[0].from<=p&&J.overlay[J.overlay.length-1].to>=p){let H=new Me(J.tree,J.overlay[0].from+B.from,-1,B);(I||(I=[A])).push(Te(H,p,y,!1))}}return I?xt(I):A}class Ye{get name(){return this.type.name}constructor(p,y=0){if(this.mode=y,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,p instanceof Me)this.yieldNode(p);else{this._tree=p.context.parent,this.buffer=p.context;for(let A=p._parent;A;A=A._parent)this.stack.unshift(A.index);this.bufferNode=p,this.yieldBuf(p.index)}}yieldNode(p){return p?(this._tree=p,this.type=p.type,this.from=p.from,this.to=p.to,!0):!1}yieldBuf(p,y){this.index=p;let{start:A,buffer:I}=this.buffer;return this.type=y||I.set.types[I.buffer[p]],this.from=A+I.buffer[p+1],this.to=A+I.buffer[p+2],!0}yield(p){return p?p instanceof Me?(this.buffer=null,this.yieldNode(p)):(this.buffer=p.context,this.yieldBuf(p.index,p.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(p,y,A){if(!this.buffer)return this.yield(this._tree.nextChild(p<0?this._tree._tree.children.length-1:0,p,y,A,this.mode));let{buffer:I}=this.buffer,B=I.findChild(this.index+4,I.buffer[this.index+3],p,y-this.buffer.start,A);return B<0?!1:(this.stack.push(this.index),this.yieldBuf(B))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(p){return this.enterChild(1,p,2)}childBefore(p){return this.enterChild(-1,p,-2)}enter(p,y,A=this.mode){return this.buffer?A&ge.ExcludeBuffers?!1:this.enterChild(1,p,y):this.yield(this._tree.enter(p,y,A))}parent(){if(!this.buffer)return this.yieldNode(this.mode&ge.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let p=this.mode&ge.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(p)}sibling(p){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+p,p,0,4,this.mode)):!1;let{buffer:y}=this.buffer,A=this.stack.length-1;if(p<0){let I=A<0?0:this.stack[A]+4;if(this.index!=I)return this.yieldBuf(y.findChild(I,this.index,-1,0,4))}else{let I=y.buffer[this.index+3];if(I<(A<0?y.buffer.length:y.buffer[this.stack[A]+3]))return this.yieldBuf(I)}return A<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+p,p,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(p){let y,A,{buffer:I}=this;if(I){if(p>0){if(this.index<I.buffer.buffer.length)return!1}else for(let B=0;B<this.index;B++)if(I.buffer.buffer[B+3]<this.index)return!1;({index:y,parent:A}=I)}else({index:y,_parent:A}=this._tree);for(;A;{index:y,_parent:A}=A)if(y>-1)for(let B=y+p,J=p<0?-1:A._tree.children.length;B!=J;B+=p){let H=A._tree.children[B];if(this.mode&ge.IncludeAnonymous||H instanceof he||!H.type.isAnonymous||mt(H))return!1}return!0}move(p,y){if(y&&this.enterChild(p,0,4))return!0;for(;;){if(this.sibling(p))return!0;if(this.atLastNode(p)||!this.parent())return!1}}next(p=!0){return this.move(1,p)}prev(p=!0){return this.move(-1,p)}moveTo(p,y=0){for(;(this.from==this.to||(y<1?this.from>=p:this.from>p)||(y>-1?this.to<=p:this.to<p))&&this.parent(););for(;this.enterChild(1,p,y););return this}get node(){if(!this.buffer)return this._tree;let p=this.bufferNode,y=null,A=0;if(p&&p.context==this.buffer)e:for(let I=this.index,B=this.stack.length;B>=0;){for(let J=p;J;J=J._parent)if(J.index==I){if(I==this.index)return J;y=J,A=B+1;break e}I=this.stack[--B]}for(let I=A;I<this.stack.length;I++)y=new We(this.buffer,y,this.stack[I]);return this.bufferNode=new We(this.buffer,y,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(p,y){for(let A=0;;){let I=!1;if(this.type.isAnonymous||p(this)!==!1){if(this.firstChild()){A++;continue}this.type.isAnonymous||(I=!0)}for(;;){if(I&&y&&y(this),I=this.type.isAnonymous,!A)return;if(this.nextSibling())break;this.parent(),A--,I=!0}}}matchContext(p){if(!this.buffer)return st(this.node.parent,p);let{buffer:y}=this.buffer,{types:A}=y.set;for(let I=p.length-1,B=this.stack.length-1;I>=0;B--){if(B<0)return st(this._tree,p,I);let J=A[y.buffer[this.stack[B]]];if(!J.isAnonymous){if(p[I]&&p[I]!=J.name)return!1;I--}}return!0}}function mt(U){return U.children.some(p=>p instanceof he||!p.type.isAnonymous||mt(p))}function vt(U){var p;let{buffer:y,nodeSet:A,maxBufferLength:I=_,reused:B=[],minRepeatType:J=A.types.length}=U,H=Array.isArray(y)?new Se(y,y.length):y,re=A.types,de=0,ce=0;function be(tt,pt,pe,Je,lt,at){let{id:ze,start:Ie,end:nt,size:ut}=H,St=ce,Tt=de;for(;ut<0;)if(H.next(),ut==-1){let Ot=B[ze];pe.push(Ot),Je.push(Ie-tt);return}else if(ut==-3){de=ze;return}else if(ut==-4){ce=ze;return}else throw new RangeError(`Unrecognized record size: ${ut}`);let Lt=re[ze],Qt,Mt,rn=Ie-tt;if(nt-Ie<=I&&(Mt=qe(H.pos-pt,lt))){let Ot=new Uint16Array(Mt.size-Mt.skip),Oe=H.pos-Mt.size,bt=Ot.length;for(;H.pos>Oe;)bt=It(Mt.start,Ot,bt);Qt=new he(Ot,nt-Mt.start,A),rn=Mt.start-tt}else{let Ot=H.pos-ut;H.next();let Oe=[],bt=[],Jt=ze>=J?ze:-1,zt=0,Ht=nt;for(;H.pos>Ot;)Jt>=0&&H.id==Jt&&H.size>=0?(H.end<=Ht-I&&(Ge(Oe,bt,Ie,zt,H.end,Ht,Jt,St,Tt),zt=Oe.length,Ht=H.end),H.next()):at>2500?Ce(Ie,Ot,Oe,bt):be(Ie,Ot,Oe,bt,Jt,at+1);if(Jt>=0&&zt>0&&zt<Oe.length&&Ge(Oe,bt,Ie,zt,Ie,Ht,Jt,St,Tt),Oe.reverse(),bt.reverse(),Jt>-1&&zt>0){let Yt=Ve(Lt,Tt);Qt=Xe(Lt,Oe,bt,0,Oe.length,0,nt-Ie,Yt,Yt)}else Qt=kt(Lt,Oe,bt,nt-Ie,St-nt,Tt)}pe.push(Qt),Je.push(rn)}function Ce(tt,pt,pe,Je){let lt=[],at=0,ze=-1;for(;H.pos>pt;){let{id:Ie,start:nt,end:ut,size:St}=H;if(St>4)H.next();else{if(ze>-1&&nt<ze)break;ze<0&&(ze=ut-I),lt.push(Ie,nt,ut),at++,H.next()}}if(at){let Ie=new Uint16Array(at*4),nt=lt[lt.length-2];for(let ut=lt.length-3,St=0;ut>=0;ut-=3)Ie[St++]=lt[ut],Ie[St++]=lt[ut+1]-nt,Ie[St++]=lt[ut+2]-nt,Ie[St++]=St;pe.push(new he(Ie,lt[2]-nt,A)),Je.push(nt-tt)}}function Ve(tt,pt){return(pe,Je,lt)=>{let at=0,ze=pe.length-1,Ie,nt;if(ze>=0&&(Ie=pe[ze])instanceof Ne){if(!ze&&Ie.type==tt&&Ie.length==lt)return Ie;(nt=Ie.prop(L.lookAhead))&&(at=Je[ze]+Ie.length+nt)}return kt(tt,pe,Je,lt,at,pt)}}function Ge(tt,pt,pe,Je,lt,at,ze,Ie,nt){let ut=[],St=[];for(;tt.length>Je;)ut.push(tt.pop()),St.push(pt.pop()+pe-lt);tt.push(kt(A.types[ze],ut,St,at-lt,Ie-at,nt)),pt.push(lt-pe)}function kt(tt,pt,pe,Je,lt,at,ze){if(at){let Ie=[L.contextHash,at];ze=ze?[Ie].concat(ze):[Ie]}if(lt>25){let Ie=[L.lookAhead,lt];ze=ze?[Ie].concat(ze):[Ie]}return new Ne(tt,pt,pe,Je,ze)}function qe(tt,pt){let pe=H.fork(),Je=0,lt=0,at=0,ze=pe.end-I,Ie={size:0,start:0,skip:0};e:for(let nt=pe.pos-tt;pe.pos>nt;){let ut=pe.size;if(pe.id==pt&&ut>=0){Ie.size=Je,Ie.start=lt,Ie.skip=at,at+=4,Je+=4,pe.next();continue}let St=pe.pos-ut;if(ut<0||St<nt||pe.start<ze)break;let Tt=pe.id>=J?4:0,Lt=pe.start;for(pe.next();pe.pos>St;){if(pe.size<0)if(pe.size==-3)Tt+=4;else break e;else pe.id>=J&&(Tt+=4);pe.next()}lt=Lt,Je+=ut,at+=Tt}return(pt<0||Je==tt)&&(Ie.size=Je,Ie.start=lt,Ie.skip=at),Ie.size>4?Ie:void 0}function It(tt,pt,pe){let{id:Je,start:lt,end:at,size:ze}=H;if(H.next(),ze>=0&&Je<J){let Ie=pe;if(ze>4){let nt=H.pos-(ze-4);for(;H.pos>nt;)pe=It(tt,pt,pe)}pt[--pe]=Ie,pt[--pe]=at-tt,pt[--pe]=lt-tt,pt[--pe]=Je}else ze==-3?de=Je:ze==-4&&(ce=Je);return pe}let gt=[],ot=[];for(;H.pos>0;)be(U.start||0,U.bufferStart||0,gt,ot,-1,0);let At=(p=U.length)!==null&&p!==void 0?p:gt.length?ot[0]+gt[0].length:0;return new Ne(re[U.topID],gt.reverse(),ot.reverse(),At)}const Ut=new WeakMap;function ft(U,p){if(!U.isAnonymous||p instanceof he||p.type!=U)return 1;let y=Ut.get(p);if(y==null){y=1;for(let A of p.children){if(A.type!=U||!(A instanceof Ne)){y=1;break}y+=ft(U,A)}Ut.set(p,y)}return y}function Xe(U,p,y,A,I,B,J,H,re){let de=0;for(let Ge=A;Ge<I;Ge++)de+=ft(U,p[Ge]);let ce=Math.ceil(de*1.5/8),be=[],Ce=[];function Ve(Ge,kt,qe,It,gt){for(let ot=qe;ot<It;){let At=ot,tt=kt[ot],pt=ft(U,Ge[ot]);for(ot++;ot<It;ot++){let pe=ft(U,Ge[ot]);if(pt+pe>=ce)break;pt+=pe}if(ot==At+1){if(pt>ce){let pe=Ge[At];Ve(pe.children,pe.positions,0,pe.children.length,kt[At]+gt);continue}be.push(Ge[At])}else{let pe=kt[ot-1]+Ge[ot-1].length-tt;be.push(Xe(U,Ge,kt,At,ot,tt,pe,null,re))}Ce.push(tt+gt-B)}}return Ve(p,y,A,I,0),(H||re)(be,Ce,J)}class j{constructor(){this.map=new WeakMap}setBuffer(p,y,A){let I=this.map.get(p);I||this.map.set(p,I=new Map),I.set(y,A)}getBuffer(p,y){let A=this.map.get(p);return A&&A.get(y)}set(p,y){p instanceof We?this.setBuffer(p.context.buffer,p.index,y):p instanceof Me&&this.map.set(p.tree,y)}get(p){return p instanceof We?this.getBuffer(p.context.buffer,p.index):p instanceof Me?this.map.get(p.tree):void 0}cursorSet(p,y){p.buffer?this.setBuffer(p.buffer.buffer,p.index,y):this.map.set(p.tree,y)}cursorGet(p){return p.buffer?this.getBuffer(p.buffer.buffer,p.index):this.map.get(p.tree)}}class ke{constructor(p,y,A,I,B=!1,J=!1){this.from=p,this.to=y,this.tree=A,this.offset=I,this.open=(B?1:0)|(J?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(p,y=[],A=!1){let I=[new ke(0,p.length,p,0,!1,A)];for(let B of y)B.to>p.length&&I.push(B);return I}static applyChanges(p,y,A=128){if(!y.length)return p;let I=[],B=1,J=p.length?p[0]:null;for(let H=0,re=0,de=0;;H++){let ce=H<y.length?y[H]:null,be=ce?ce.fromA:1e9;if(be-re>=A)for(;J&&J.from<be;){let Ce=J;if(re>=Ce.from||be<=Ce.to||de){let Ve=Math.max(Ce.from,re)-de,Ge=Math.min(Ce.to,be)-de;Ce=Ve>=Ge?null:new ke(Ve,Ge,Ce.tree,Ce.offset+de,H>0,!!ce)}if(Ce&&I.push(Ce),J.to>be)break;J=B<p.length?p[B++]:null}if(!ce)break;re=ce.toA,de=ce.toA-ce.toB}return I}}class le{startParse(p,y,A){return typeof p=="string"&&(p=new W(p)),A=A?A.length?A.map(I=>new q(I.from,I.to)):[new q(0,0)]:[new q(0,p.length)],this.createParse(p,y||[],A)}parse(p,y,A){let I=this.startParse(p,y,A);for(;;){let B=I.advance();if(B)return B}}}class W{constructor(p){this.string=p}get length(){return this.string.length}chunk(p){return this.string.slice(p)}get lineChunks(){return!1}read(p,y){return this.string.slice(p,y)}}function Q(U){return(p,y,A,I)=>new Fe(p,U,y,A,I)}class ae{constructor(p,y,A,I,B){this.parser=p,this.parse=y,this.overlay=A,this.target=I,this.from=B}}function ne(U){if(!U.length||U.some(p=>p.from>=p.to))throw new RangeError("Invalid inner parse ranges given: "+JSON.stringify(U))}class me{constructor(p,y,A,I,B,J,H){this.parser=p,this.predicate=y,this.mounts=A,this.index=I,this.start=B,this.target=J,this.prev=H,this.depth=0,this.ranges=[]}}const De=new L({perNode:!0});class Fe{constructor(p,y,A,I,B){this.nest=y,this.input=A,this.fragments=I,this.ranges=B,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=p}advance(){if(this.baseParse){let A=this.baseParse.advance();if(!A)return null;if(this.baseParse=null,this.baseTree=A,this.startInner(),this.stoppedAt!=null)for(let I of this.inner)I.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let A=this.baseTree;return this.stoppedAt!=null&&(A=new Ne(A.type,A.children,A.positions,A.length,A.propValues.concat([[De,this.stoppedAt]]))),A}let p=this.inner[this.innerDone],y=p.parse.advance();if(y){this.innerDone++;let A=Object.assign(Object.create(null),p.target.props);A[L.mounted.id]=new G(y,p.overlay,p.parser),p.target.props=A}return null}get parsedPos(){if(this.baseParse)return 0;let p=this.input.length;for(let y=this.innerDone;y<this.inner.length;y++)this.inner[y].from<p&&(p=Math.min(p,this.inner[y].parse.parsedPos));return p}stopAt(p){if(this.stoppedAt=p,this.baseParse)this.baseParse.stopAt(p);else for(let y=this.innerDone;y<this.inner.length;y++)this.inner[y].parse.stopAt(p)}startInner(){let p=new et(this.fragments),y=null,A=null,I=new Ye(new Me(this.baseTree,this.ranges[0].from,0,null),ge.IncludeAnonymous|ge.IgnoreMounts);e:for(let B,J;;){let H=!0,re;if(this.stoppedAt!=null&&I.from>=this.stoppedAt)H=!1;else if(p.hasNode(I)){if(y){let de=y.mounts.find(ce=>ce.frag.from<=I.from&&ce.frag.to>=I.to&&ce.mount.overlay);if(de)for(let ce of de.mount.overlay){let be=ce.from+de.pos,Ce=ce.to+de.pos;be>=I.from&&Ce<=I.to&&!y.ranges.some(Ve=>Ve.from<Ce&&Ve.to>be)&&y.ranges.push({from:be,to:Ce})}}H=!1}else if(A&&(J=xe(A.ranges,I.from,I.to)))H=J!=2;else if(!I.type.isAnonymous&&(B=this.nest(I,this.input))&&(I.from<I.to||!B.overlay)){I.tree||je(I);let de=p.findMounts(I.from,B.parser);if(typeof B.overlay=="function")y=new me(B.parser,B.overlay,de,this.inner.length,I.from,I.tree,y);else{let ce=He(this.ranges,B.overlay||(I.from<I.to?[new q(I.from,I.to)]:[]));ce.length&&ne(ce),(ce.length||!B.overlay)&&this.inner.push(new ae(B.parser,ce.length?B.parser.startParse(this.input,Nt(de,ce),ce):B.parser.startParse(""),B.overlay?B.overlay.map(be=>new q(be.from-I.from,be.to-I.from)):null,I.tree,ce.length?ce[0].from:I.from)),B.overlay?ce.length&&(A={ranges:ce,depth:0,prev:A}):H=!1}}else if(y&&(re=y.predicate(I))&&(re===!0&&(re=new q(I.from,I.to)),re.from<re.to)){let de=y.ranges.length-1;de>=0&&y.ranges[de].to==re.from?y.ranges[de]={from:y.ranges[de].from,to:re.to}:y.ranges.push(re)}if(H&&I.firstChild())y&&y.depth++,A&&A.depth++;else for(;!I.nextSibling();){if(!I.parent())break e;if(y&&!--y.depth){let de=He(this.ranges,y.ranges);de.length&&(ne(de),this.inner.splice(y.index,0,new ae(y.parser,y.parser.startParse(this.input,Nt(y.mounts,de),de),y.ranges.map(ce=>new q(ce.from-y.start,ce.to-y.start)),y.target,de[0].from))),y=y.prev}A&&!--A.depth&&(A=A.prev)}}}}function xe(U,p,y){for(let A of U){if(A.from>=y)break;if(A.to>p)return A.from<=p&&A.to>=y?2:1}return 0}function Pe(U,p,y,A,I,B){if(p<y){let J=U.buffer[p+1];A.push(U.slice(p,y,J)),I.push(J-B)}}function je(U){let{node:p}=U,y=[],A=p.context.buffer;do y.push(U.index),U.parent();while(!U.tree);let I=U.tree,B=I.children.indexOf(A),J=I.children[B],H=J.buffer,re=[B];function de(ce,be,Ce,Ve,Ge,kt){let qe=y[kt],It=[],gt=[];Pe(J,ce,qe,It,gt,Ve);let ot=H[qe+1],At=H[qe+2];re.push(It.length);let tt=kt?de(qe+4,H[qe+3],J.set.types[H[qe]],ot,At-ot,kt-1):p.toTree();return It.push(tt),gt.push(ot-Ve),Pe(J,H[qe+3],be,It,gt,Ve),new Ne(Ce,It,gt,Ge)}I.children[B]=de(0,H.length,_e.none,0,J.length,y.length-1);for(let ce of re){let be=U.tree.children[ce],Ce=U.tree.positions[ce];U.yield(new Me(be,Ce+U.from,ce,U._tree))}}class Le{constructor(p,y){this.offset=y,this.done=!1,this.cursor=p.cursor(ge.IncludeAnonymous|ge.IgnoreMounts)}moveTo(p){let{cursor:y}=this,A=p-this.offset;for(;!this.done&&y.from<A;)y.to>=p&&y.enter(A,1,ge.IgnoreOverlays|ge.ExcludeBuffers)||y.next(!1)||(this.done=!0)}hasNode(p){if(this.moveTo(p.from),!this.done&&this.cursor.from+this.offset==p.from&&this.cursor.tree)for(let y=this.cursor.tree;;){if(y==p.tree)return!0;if(y.children.length&&y.positions[0]==0&&y.children[0]instanceof Ne)y=y.children[0];else break}return!1}}class et{constructor(p){var y;if(this.fragments=p,this.curTo=0,this.fragI=0,p.length){let A=this.curFrag=p[0];this.curTo=(y=A.tree.prop(De))!==null&&y!==void 0?y:A.to,this.inner=new Le(A.tree,-A.offset)}else this.curFrag=this.inner=null}hasNode(p){for(;this.curFrag&&p.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=p.from&&this.curTo>=p.to&&this.inner.hasNode(p)}nextFrag(){var p;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let y=this.curFrag=this.fragments[this.fragI];this.curTo=(p=y.tree.prop(De))!==null&&p!==void 0?p:y.to,this.inner=new Le(y.tree,-y.offset)}}findMounts(p,y){var A;let I=[];if(this.inner){this.inner.cursor.moveTo(p,1);for(let B=this.inner.cursor.node;B;B=B.parent){let J=(A=B.tree)===null||A===void 0?void 0:A.prop(L.mounted);if(J&&J.parser==y)for(let H=this.fragI;H<this.fragments.length;H++){let re=this.fragments[H];if(re.from>=B.to)break;re.tree==this.curFrag.tree&&I.push({frag:re,pos:B.from-re.offset,mount:J})}}}return I}}function He(U,p){let y=null,A=p;for(let I=1,B=0;I<U.length;I++){let J=U[I-1].to,H=U[I].from;for(;B<A.length;B++){let re=A[B];if(re.from>=H)break;re.to<=J||(y||(A=y=p.slice()),re.from<J?(y[B]=new q(re.from,J),re.to>H&&y.splice(B+1,0,new q(H,re.to))):re.to>H?y[B--]=new q(H,re.to):y.splice(B--,1))}}return A}function jt(U,p,y,A){let I=0,B=0,J=!1,H=!1,re=-1e9,de=[];for(;;){let ce=I==U.length?1e9:J?U[I].to:U[I].from,be=B==p.length?1e9:H?p[B].to:p[B].from;if(J!=H){let Ce=Math.max(re,y),Ve=Math.min(ce,be,A);Ce<Ve&&de.push(new q(Ce,Ve))}if(re=Math.min(ce,be),re==1e9)break;ce==re&&(J?(J=!1,I++):J=!0),be==re&&(H?(H=!1,B++):H=!0)}return de}function Nt(U,p){let y=[];for(let{pos:A,mount:I,frag:B}of U){let J=A+(I.overlay?I.overlay[0].from:0),H=J+I.tree.length,re=Math.max(B.from,J),de=Math.min(B.to,H);if(I.overlay){let ce=I.overlay.map(Ce=>new q(Ce.from+A,Ce.to+A)),be=jt(p,ce,re,de);for(let Ce=0,Ve=re;;Ce++){let Ge=Ce==be.length,kt=Ge?de:be[Ce].from;if(kt>Ve&&y.push(new ke(Ve,kt,I.tree,-J,B.from>=Ve||B.openStart,B.to<=kt||B.openEnd)),Ge)break;Ve=be[Ce].to}}else y.push(new ke(re,de,I.tree,-J,B.from>=J||B.openStart,B.to<=H||B.openEnd))}return y}},35524:function(Rt,Ze,ie){ie.d(Ze,{Gv:function(){return Qe},QR:function(){return ge},Vp:function(){return q},bW:function(){return Se},pJ:function(){return j}});var _=ie(41113);let se=0;class q{constructor(W,Q,ae,ne){this.name=W,this.set=Q,this.base=ae,this.modified=ne,this.id=se++}toString(){let{name:W}=this;for(let Q of this.modified)Q.name&&(W=`${Q.name}(${W})`);return W}static define(W,Q){let ae=typeof W=="string"?W:"?";if(W instanceof q&&(Q=W),Q!=null&&Q.base)throw new Error("Can not derive from a modified tag");let ne=new q(ae,[],null,[]);if(ne.set.push(ne),Q)for(let me of Q.set)ne.set.push(me);return ne}static defineModifier(W){let Q=new G(W);return ae=>ae.modified.indexOf(Q)>-1?ae:G.get(ae.base||ae,ae.modified.concat(Q).sort((ne,me)=>ne.id-me.id))}}let L=0;class G{constructor(W){this.name=W,this.instances=[],this.id=L++}static get(W,Q){if(!Q.length)return W;let ae=Q[0].instances.find(Fe=>Fe.base==W&&ve(Q,Fe.modified));if(ae)return ae;let ne=[],me=new q(W.name,ne,W,Q);for(let Fe of Q)Fe.instances.push(me);let De=_e(Q);for(let Fe of W.set)if(!Fe.modified.length)for(let xe of De)ne.push(G.get(Fe,xe));return me}}function ve(le,W){return le.length==W.length&&le.every((Q,ae)=>Q==W[ae])}function _e(le){let W=[[]];for(let Q=0;Q<le.length;Q++)for(let ae=0,ne=W.length;ae<ne;ae++)W.push(W[ae].concat(le[Q]));return W.sort((Q,ae)=>ae.length-Q.length)}function Qe(le){let W=Object.create(null);for(let Q in le){let ae=le[Q];Array.isArray(ae)||(ae=[ae]);for(let ne of Q.split(" "))if(ne){let me=[],De=2,Fe=ne;for(let Le=0;;){if(Fe=="..."&&Le>0&&Le+3==ne.length){De=1;break}let et=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(Fe);if(!et)throw new RangeError("Invalid path: "+ne);if(me.push(et[0]=="*"?"":et[0][0]=='"'?JSON.parse(et[0]):et[0]),Le+=et[0].length,Le==ne.length)break;let He=ne[Le++];if(Le==ne.length&&He=="!"){De=0;break}if(He!="/")throw new RangeError("Invalid path: "+ne);Fe=ne.slice(Le)}let xe=me.length-1,Pe=me[xe];if(!Pe)throw new RangeError("Invalid path: "+ne);let je=new ue(ae,De,xe>0?me.slice(0,xe):null);W[Pe]=je.sort(W[Pe])}}return Ee.add(W)}const Ee=new _.md;class ue{constructor(W,Q,ae,ne){this.tags=W,this.mode=Q,this.context=ae,this.next=ne}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(W){return!W||W.depth<this.depth?(this.next=W,this):(W.next=this.sort(W.next),W)}get depth(){return this.context?this.context.length:0}}ue.empty=new ue([],2,null);function ge(le,W){let Q=Object.create(null);for(let me of le)if(!Array.isArray(me.tag))Q[me.tag.id]=me.class;else for(let De of me.tag)Q[De.id]=me.class;let{scope:ae,all:ne=null}=W||{};return{style:me=>{let De=ne;for(let Fe of me)for(let xe of Fe.set){let Pe=Q[xe.id];if(Pe){De=De?De+" "+Pe:Pe;break}}return De},scope:ae}}function Ne(le,W){let Q=null;for(let ae of le){let ne=ae.style(W);ne&&(Q=Q?Q+" "+ne:ne)}return Q}function Se(le,W,Q,ae=0,ne=le.length){let me=new Be(ae,Array.isArray(W)?W:[W],Q);me.highlightRange(le.cursor(),ae,ne,"",me.highlighters),me.flush(ne)}function he(le,W,Q,ae,ne,me=0,De=le.length){let Fe=me;function xe(Pe,je){if(!(Pe<=Fe)){for(let Le=le.slice(Fe,Pe),et=0;;){let He=Le.indexOf(`
`,et),jt=He<0?Le.length:He;if(jt>et&&ae(Le.slice(et,jt),je),He<0)break;ne(),et=He+1}Fe=Pe}}Se(W,Q,(Pe,je,Le)=>{xe(Pe,""),xe(je,Le)},me,De),xe(De,"")}class Be{constructor(W,Q,ae){this.at=W,this.highlighters=Q,this.span=ae,this.class=""}startSpan(W,Q){Q!=this.class&&(this.flush(W),W>this.at&&(this.at=W),this.class=Q)}flush(W){W>this.at&&this.class&&this.span(this.at,W,this.class)}highlightRange(W,Q,ae,ne,me){let{type:De,from:Fe,to:xe}=W;if(Fe>=ae||xe<=Q)return;De.isTop&&(me=this.highlighters.filter(He=>!He.scope||He.scope(De)));let Pe=ne,je=Te(W)||ue.empty,Le=Ne(me,je.tags);if(Le&&(Pe&&(Pe+=" "),Pe+=Le,je.mode==1&&(ne+=(ne?" ":"")+Le)),this.startSpan(Math.max(Q,Fe),Pe),je.opaque)return;let et=W.tree&&W.tree.prop(_.md.mounted);if(et&&et.overlay){let He=W.node.enter(et.overlay[0].from+Fe,1),jt=this.highlighters.filter(U=>!U.scope||U.scope(et.tree.type)),Nt=W.firstChild();for(let U=0,p=Fe;;U++){let y=U<et.overlay.length?et.overlay[U]:null,A=y?y.from+Fe:xe,I=Math.max(Q,p),B=Math.min(ae,A);if(I<B&&Nt)for(;W.from<B&&(this.highlightRange(W,I,B,ne,me),this.startSpan(Math.min(B,W.to),Pe),!(W.to>=A||!W.nextSibling())););if(!y||A>ae)break;p=y.to+Fe,p>Q&&(this.highlightRange(He.cursor(),Math.max(Q,y.from+Fe),Math.min(ae,p),"",jt),this.startSpan(Math.min(ae,p),Pe))}Nt&&W.parent()}else if(W.firstChild()){et&&(ne="");do if(!(W.to<=Q)){if(W.from>=ae)break;this.highlightRange(W,Q,ae,ne,me),this.startSpan(Math.min(ae,W.to),Pe)}while(W.nextSibling());W.parent()}}}function Te(le){let W=le.type.prop(Ee);for(;W&&W.context&&!le.matchContext(W.context);)W=W.next;return W||null}const Z=q.define,Me=Z(),rt=Z(),st=Z(rt),Ue=Z(rt),We=Z(),xt=Z(We),dt=Z(We),ht=Z(),Ye=Z(ht),mt=Z(),vt=Z(),Ut=Z(),ft=Z(Ut),Xe=Z(),j={comment:Me,lineComment:Z(Me),blockComment:Z(Me),docComment:Z(Me),name:rt,variableName:Z(rt),typeName:st,tagName:Z(st),propertyName:Ue,attributeName:Z(Ue),className:Z(rt),labelName:Z(rt),namespace:Z(rt),macroName:Z(rt),literal:We,string:xt,docString:Z(xt),character:Z(xt),attributeValue:Z(xt),number:dt,integer:Z(dt),float:Z(dt),bool:Z(We),regexp:Z(We),escape:Z(We),color:Z(We),url:Z(We),keyword:mt,self:Z(mt),null:Z(mt),atom:Z(mt),unit:Z(mt),modifier:Z(mt),operatorKeyword:Z(mt),controlKeyword:Z(mt),definitionKeyword:Z(mt),moduleKeyword:Z(mt),operator:vt,derefOperator:Z(vt),arithmeticOperator:Z(vt),logicOperator:Z(vt),bitwiseOperator:Z(vt),compareOperator:Z(vt),updateOperator:Z(vt),definitionOperator:Z(vt),typeOperator:Z(vt),controlOperator:Z(vt),punctuation:Ut,separator:Z(Ut),bracket:ft,angleBracket:Z(ft),squareBracket:Z(ft),paren:Z(ft),brace:Z(ft),content:ht,heading:Ye,heading1:Z(Ye),heading2:Z(Ye),heading3:Z(Ye),heading4:Z(Ye),heading5:Z(Ye),heading6:Z(Ye),contentSeparator:Z(ht),list:Z(ht),quote:Z(ht),emphasis:Z(ht),strong:Z(ht),link:Z(ht),monospace:Z(ht),strikethrough:Z(ht),inserted:Z(),deleted:Z(),changed:Z(),invalid:Z(),meta:Xe,documentMeta:Z(Xe),annotation:Z(Xe),processingInstruction:Z(Xe),definition:q.defineModifier("definition"),constant:q.defineModifier("constant"),function:q.defineModifier("function"),standard:q.defineModifier("standard"),local:q.defineModifier("local"),special:q.defineModifier("special")};for(let le in j){let W=j[le];W instanceof q&&(W.name=le)}const ke=ge([{tag:j.link,class:"tok-link"},{tag:j.heading,class:"tok-heading"},{tag:j.emphasis,class:"tok-emphasis"},{tag:j.strong,class:"tok-strong"},{tag:j.keyword,class:"tok-keyword"},{tag:j.atom,class:"tok-atom"},{tag:j.bool,class:"tok-bool"},{tag:j.url,class:"tok-url"},{tag:j.labelName,class:"tok-labelName"},{tag:j.inserted,class:"tok-inserted"},{tag:j.deleted,class:"tok-deleted"},{tag:j.literal,class:"tok-literal"},{tag:j.string,class:"tok-string"},{tag:j.number,class:"tok-number"},{tag:[j.regexp,j.escape,j.special(j.string)],class:"tok-string2"},{tag:j.variableName,class:"tok-variableName"},{tag:j.local(j.variableName),class:"tok-variableName tok-local"},{tag:j.definition(j.variableName),class:"tok-variableName tok-definition"},{tag:j.special(j.variableName),class:"tok-variableName2"},{tag:j.definition(j.propertyName),class:"tok-propertyName tok-definition"},{tag:j.typeName,class:"tok-typeName"},{tag:j.namespace,class:"tok-namespace"},{tag:j.className,class:"tok-className"},{tag:j.macroName,class:"tok-macroName"},{tag:j.propertyName,class:"tok-propertyName"},{tag:j.operator,class:"tok-operator"},{tag:j.comment,class:"tok-comment"},{tag:j.meta,class:"tok-meta"},{tag:j.invalid,class:"tok-invalid"},{tag:j.punctuation,class:"tok-punctuation"}])},11106:function(Rt,Ze,ie){ie.d(Ze,{tk:function(){return G.tk},ZP:function(){return Js}});var _=ie(87462),se=ie(63366),q=ie(67294),L=ie(37205),G=ie(47421),ve=ie(59119),_e=ie(41113);const Qe=t=>{let{state:e}=t,s=e.doc.lineAt(e.selection.main.from),r=Z(t.state,s.from);return r.line?ue(t):r.block?Te(t):!1};function Ee(t,e){return({state:s,dispatch:r})=>{if(s.readOnly)return!1;let c=t(e,s);return c?(r(s.update(c)),!0):!1}}const ue=Ee(We,0),ge=null,Ne=null,Se=Ee(Ue,0),he=null,Be=null,Te=Ee((t,e)=>Ue(t,e,st(e)),0);function Z(t,e){let s=t.languageDataAt("commentTokens",e,1);return s.length?s[0]:{}}const Me=50;function rt(t,{open:e,close:s},r,c){let m=t.sliceDoc(r-Me,r),C=t.sliceDoc(c,c+Me),M=/\s*$/.exec(m)[0].length,F=/^\s*/.exec(C)[0].length,te=m.length-M;if(m.slice(te-e.length,te)==e&&C.slice(F,F+s.length)==s)return{open:{pos:r-M,margin:M&&1},close:{pos:c+F,margin:F&&1}};let ee,fe;c-r<=2*Me?ee=fe=t.sliceDoc(r,c):(ee=t.sliceDoc(r,r+Me),fe=t.sliceDoc(c-Me,c));let Ae=/^\s*/.exec(ee)[0].length,Ke=/\s*$/.exec(fe)[0].length,Pt=fe.length-Ke-s.length;return ee.slice(Ae,Ae+e.length)==e&&fe.slice(Pt,Pt+s.length)==s?{open:{pos:r+Ae+e.length,margin:/\s/.test(ee.charAt(Ae+e.length))?1:0},close:{pos:c-Ke-s.length,margin:/\s/.test(fe.charAt(Pt-1))?1:0}}:null}function st(t){let e=[];for(let s of t.selection.ranges){let r=t.doc.lineAt(s.from),c=s.to<=r.to?r:t.doc.lineAt(s.to);c.from>r.from&&c.from==s.to&&(c=s.to==r.to+1?r:t.doc.lineAt(s.to-1));let m=e.length-1;m>=0&&e[m].to>r.from?e[m].to=c.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:c.to})}return e}function Ue(t,e,s=e.selection.ranges){let r=s.map(m=>Z(e,m.from).block);if(!r.every(m=>m))return null;let c=s.map((m,C)=>rt(e,r[C],m.from,m.to));if(t!=2&&!c.every(m=>m))return{changes:e.changes(s.map((m,C)=>c[C]?[]:[{from:m.from,insert:r[C].open+" "},{from:m.to,insert:" "+r[C].close}]))};if(t!=1&&c.some(m=>m)){let m=[];for(let C=0,M;C<c.length;C++)if(M=c[C]){let F=r[C],{open:te,close:ee}=M;m.push({from:te.pos-F.open.length,to:te.pos+te.margin},{from:ee.pos-ee.margin,to:ee.pos+F.close.length})}return{changes:m}}return null}function We(t,e,s=e.selection.ranges){let r=[],c=-1;for(let{from:m,to:C}of s){let M=r.length,F=1e9,te=Z(e,m).line;if(te){for(let ee=m;ee<=C;){let fe=e.doc.lineAt(ee);if(fe.from>c&&(m==C||C>fe.from)){c=fe.from;let Ae=/^\s*/.exec(fe.text)[0].length,Ke=Ae==fe.length,Pt=fe.text.slice(Ae,Ae+te.length)==te?Ae:-1;Ae<fe.text.length&&Ae<F&&(F=Ae),r.push({line:fe,comment:Pt,token:te,indent:Ae,empty:Ke,single:!1})}ee=fe.to+1}if(F<1e9)for(let ee=M;ee<r.length;ee++)r[ee].indent<r[ee].line.text.length&&(r[ee].indent=F);r.length==M+1&&(r[M].single=!0)}}if(t!=2&&r.some(m=>m.comment<0&&(!m.empty||m.single))){let m=[];for(let{line:M,token:F,indent:te,empty:ee,single:fe}of r)(fe||!ee)&&m.push({from:M.from+te,insert:F+" "});let C=e.changes(m);return{changes:C,selection:e.selection.map(C,1)}}else if(t!=1&&r.some(m=>m.comment>=0)){let m=[];for(let{line:C,comment:M,token:F}of r)if(M>=0){let te=C.from+M,ee=te+F.length;C.text[ee-C.from]==" "&&ee++,m.push({from:te,to:ee})}return{changes:m}}return null}const xt=L.q6.define(),dt=L.q6.define(),ht=L.r$.define(),Ye=L.r$.define({combine(t){return(0,L.BO)(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,s)=>s},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,s)=>(r,c)=>e(r,c)||s(r,c)})}}),mt=L.QQ.define({create(){return U.empty},update(t,e){let s=e.state.facet(Ye),r=e.annotation(xt);if(r){let F=ne.fromTransaction(e,r.selection),te=r.side,ee=te==0?t.undone:t.done;return F?ee=me(ee,ee.length,s.minDepth,F):ee=Le(ee,e.startState.selection),new U(te==0?r.rest:ee,te==0?ee:r.rest)}let c=e.annotation(dt);if((c=="full"||c=="before")&&(t=t.isolate()),e.annotation(L.YW.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let m=ne.fromTransaction(e),C=e.annotation(L.YW.time),M=e.annotation(L.YW.userEvent);return m?t=t.addChanges(m,C,M,s,e):e.selection&&(t=t.addSelection(e.startState.selection,C,M,s.newGroupDelay)),(c=="full"||c=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new U(t.done.map(ne.fromJSON),t.undone.map(ne.fromJSON))}});function vt(t={}){return[mt,Ye.of(t),G.tk.domEventHandlers({beforeinput(e,s){let r=e.inputType=="historyUndo"?Xe:e.inputType=="historyRedo"?j:null;return r?(e.preventDefault(),r(s)):!1}})]}const Ut=null;function ft(t,e){return function({state:s,dispatch:r}){if(!e&&s.readOnly)return!1;let c=s.field(mt,!1);if(!c)return!1;let m=c.pop(t,s,e);return m?(r(m),!0):!1}}const Xe=ft(0,!1),j=ft(1,!1),ke=ft(0,!0),le=ft(1,!0);function W(t){return function(e){let s=e.field(mt,!1);if(!s)return 0;let r=t==0?s.done:s.undone;return r.length-(r.length&&!r[0].changes?1:0)}}const Q=null,ae=null;class ne{constructor(e,s,r,c,m){this.changes=e,this.effects=s,this.mapped=r,this.startSelection=c,this.selectionsAfter=m}setSelAfter(e){return new ne(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,s,r;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(s=this.mapped)===null||s===void 0?void 0:s.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(c=>c.toJSON())}}static fromJSON(e){return new ne(e.changes&&L.as.fromJSON(e.changes),[],e.mapped&&L.n0.fromJSON(e.mapped),e.startSelection&&L.jT.fromJSON(e.startSelection),e.selectionsAfter.map(L.jT.fromJSON))}static fromTransaction(e,s){let r=Pe;for(let c of e.startState.facet(ht)){let m=c(e);m.length&&(r=r.concat(m))}return!r.length&&e.changes.empty?null:new ne(e.changes.invert(e.startState.doc),r,void 0,s||e.startState.selection,Pe)}static selection(e){return new ne(void 0,Pe,void 0,void 0,e)}}function me(t,e,s,r){let c=e+1>s+20?e-s-1:0,m=t.slice(c,e);return m.push(r),m}function De(t,e){let s=[],r=!1;return t.iterChangedRanges((c,m)=>s.push(c,m)),e.iterChangedRanges((c,m,C,M)=>{for(let F=0;F<s.length;){let te=s[F++],ee=s[F++];M>=te&&C<=ee&&(r=!0)}}),r}function Fe(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((s,r)=>s.empty!=e.ranges[r].empty).length===0}function xe(t,e){return t.length?e.length?t.concat(e):t:e}const Pe=[],je=200;function Le(t,e){if(t.length){let s=t[t.length-1],r=s.selectionsAfter.slice(Math.max(0,s.selectionsAfter.length-je));return r.length&&r[r.length-1].eq(e)?t:(r.push(e),me(t,t.length-1,1e9,s.setSelAfter(r)))}else return[ne.selection([e])]}function et(t){let e=t[t.length-1],s=t.slice();return s[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),s}function He(t,e){if(!t.length)return t;let s=t.length,r=Pe;for(;s;){let c=jt(t[s-1],e,r);if(c.changes&&!c.changes.empty||c.effects.length){let m=t.slice(0,s);return m[s-1]=c,m}else e=c.mapped,s--,r=c.selectionsAfter}return r.length?[ne.selection(r)]:Pe}function jt(t,e,s){let r=xe(t.selectionsAfter.length?t.selectionsAfter.map(M=>M.map(e)):Pe,s);if(!t.changes)return ne.selection(r);let c=t.changes.map(e),m=e.mapDesc(t.changes,!0),C=t.mapped?t.mapped.composeDesc(m):m;return new ne(c,L.Py.mapEffects(t.effects,e),C,t.startSelection.map(m),r)}const Nt=/^(input\.type|delete)($|\.)/;class U{constructor(e,s,r=0,c=void 0){this.done=e,this.undone=s,this.prevTime=r,this.prevUserEvent=c}isolate(){return this.prevTime?new U(this.done,this.undone):this}addChanges(e,s,r,c,m){let C=this.done,M=C[C.length-1];return M&&M.changes&&!M.changes.empty&&e.changes&&(!r||Nt.test(r))&&(!M.selectionsAfter.length&&s-this.prevTime<c.newGroupDelay&&c.joinToEvent(m,De(M.changes,e.changes))||r=="input.type.compose")?C=me(C,C.length-1,c.minDepth,new ne(e.changes.compose(M.changes),xe(L.Py.mapEffects(e.effects,M.changes),M.effects),M.mapped,M.startSelection,Pe)):C=me(C,C.length,c.minDepth,e),new U(C,Pe,s,r)}addSelection(e,s,r,c){let m=this.done.length?this.done[this.done.length-1].selectionsAfter:Pe;return m.length>0&&s-this.prevTime<c&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&Fe(m[m.length-1],e)?this:new U(Le(this.done,e),this.undone,s,r)}addMapping(e){return new U(He(this.done,e),He(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,s,r){let c=e==0?this.done:this.undone;if(c.length==0)return null;let m=c[c.length-1],C=m.selectionsAfter[0]||s.selection;if(r&&m.selectionsAfter.length)return s.update({selection:m.selectionsAfter[m.selectionsAfter.length-1],annotations:xt.of({side:e,rest:et(c),selection:C}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(m.changes){let M=c.length==1?Pe:c.slice(0,c.length-1);return m.mapped&&(M=He(M,m.mapped)),s.update({changes:m.changes,selection:m.startSelection,effects:m.effects,annotations:xt.of({side:e,rest:M,selection:C}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}U.empty=new U(Pe,Pe);const p=[{key:"Mod-z",run:Xe,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:j,preventDefault:!0},{linux:"Ctrl-Shift-z",run:j,preventDefault:!0},{key:"Mod-u",run:ke,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:le,preventDefault:!0}];function y(t,e){return L.jT.create(t.ranges.map(e),t.mainIndex)}function A(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function I({state:t,dispatch:e},s){let r=y(t.selection,s);return r.eq(t.selection,!0)?!1:(e(A(t,r)),!0)}function B(t,e){return L.jT.cursor(e?t.to:t.from)}function J(t,e){return I(t,s=>s.empty?t.moveByChar(s,e):B(s,e))}function H(t){return t.textDirectionAt(t.state.selection.main.head)==G.Nm.LTR}const re=t=>J(t,!H(t)),de=t=>J(t,H(t)),ce=t=>J(t,!0),be=t=>J(t,!1);function Ce(t,e,s){let r=e.head,c=t.doc.lineAt(r);return r==(s?c.to:c.from)?r=s?Math.min(t.doc.length,c.to+1):Math.max(0,c.from-1):r=c.from+findClusterBreak(c.text,r-c.from,s),EditorSelection.cursor(r,s?-1:1)}function Ve(t,e){return I(t,s=>s.empty?Ce(t.state,s,e):B(s,e))}const Ge=t=>Ve(t,!0),kt=t=>Ve(t,!1);function qe(t,e){return I(t,s=>s.empty?t.moveByGroup(s,e):B(s,e))}const It=t=>qe(t,!H(t)),gt=t=>qe(t,H(t)),ot=t=>qe(t,!0),At=t=>qe(t,!1);function tt(t,e,s){let r=t.state.charCategorizer(e),c=r(s),m=c!=CharCategory.Space;return C=>{let M=r(C);return M!=CharCategory.Space?m&&M==c:(m=!1,!0)}}const pt=t=>I(t,e=>e.empty?t.moveByChar(e,!0,s=>tt(t,e.head,s)):B(e,!0)),pe=typeof Intl!="undefined"&&Intl.Segmenter?new Intl.Segmenter(void 0,{granularity:"word"}):null;function Je(t,e,s){let r=t.state.charCategorizer(e.from),c=CharCategory.Space,m=e.from,C=0,M=!1,F=!1,te=!1,ee=Ae=>{if(M)return!1;m+=s?Ae.length:-Ae.length;let Ke=r(Ae),Pt;if(Ke==CharCategory.Word&&Ae.charCodeAt(0)<128&&/[\W_]/.test(Ae)&&(Ke=-1),c==CharCategory.Space&&(c=Ke),c!=Ke)return!1;if(c==CharCategory.Word)if(Ae.toLowerCase()==Ae){if(!s&&F)return!1;te=!0}else if(te){if(s)return!1;M=!0}else{if(F&&s&&r(Pt=t.state.sliceDoc(m,m+1))==CharCategory.Word&&Pt.toLowerCase()==Pt)return!1;F=!0}return C++,!0},fe=t.moveByChar(e,s,Ae=>(ee(Ae),ee));if(pe&&c==CharCategory.Word&&fe.from==e.from+C*(s?1:-1)){let Ae=Math.min(e.head,fe.head),Ke=Math.max(e.head,fe.head),Pt=t.state.sliceDoc(Ae,Ke);if(Pt.length>1&&/[\u4E00-\uffff]/.test(Pt)){let it=Array.from(pe.segment(Pt));if(it.length>1)return s?EditorSelection.cursor(e.head+it[1].index,-1):EditorSelection.cursor(fe.head+it[it.length-1].index,1)}}return fe}function lt(t,e){return I(t,s=>s.empty?Je(t,s,e):B(s,e))}const at=t=>lt(t,!0),ze=t=>lt(t,!1);function Ie(t,e,s){if(e.type.prop(s))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function nt(t,e,s){let r=(0,ve.qz)(t).resolveInner(e.head),c=s?_e.md.closedBy:_e.md.openedBy;for(let F=e.head;;){let te=s?r.childAfter(F):r.childBefore(F);if(!te)break;Ie(t,te,c)?r=te:F=s?te.to:te.from}let m=r.type.prop(c),C,M;return m&&(C=s?(0,ve.Um)(t,r.from,1):(0,ve.Um)(t,r.to,-1))&&C.matched?M=s?C.end.to:C.end.from:M=s?r.to:r.from,L.jT.cursor(M,s?-1:1)}const ut=t=>I(t,e=>nt(t.state,e,!H(t))),St=t=>I(t,e=>nt(t.state,e,H(t)));function Tt(t,e){return I(t,s=>{if(!s.empty)return B(s,e);let r=t.moveVertically(s,e);return r.head!=s.head?r:t.moveToLineBoundary(s,e)})}const Lt=t=>Tt(t,!1),Qt=t=>Tt(t,!0);function Mt(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,s=0,r=0,c;if(e){for(let m of t.state.facet(G.tk.scrollMargins)){let C=m(t);C!=null&&C.top&&(s=Math.max(C==null?void 0:C.top,s)),C!=null&&C.bottom&&(r=Math.max(C==null?void 0:C.bottom,r))}c=t.scrollDOM.clientHeight-s-r}else c=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:s,marginBottom:r,selfScroll:e,height:Math.max(t.defaultLineHeight,c-5)}}function rn(t,e){let s=Mt(t),{state:r}=t,c=y(r.selection,C=>C.empty?t.moveVertically(C,e,s.height):B(C,e));if(c.eq(r.selection))return!1;let m;if(s.selfScroll){let C=t.coordsAtPos(r.selection.main.head),M=t.scrollDOM.getBoundingClientRect(),F=M.top+s.marginTop,te=M.bottom-s.marginBottom;C&&C.top>F&&C.bottom<te&&(m=G.tk.scrollIntoView(c.main.head,{y:"start",yMargin:C.top-F}))}return t.dispatch(A(r,c),{effects:m}),!0}const Ot=t=>rn(t,!1),Oe=t=>rn(t,!0);function bt(t,e,s){let r=t.lineBlockAt(e.head),c=t.moveToLineBoundary(e,s);if(c.head==e.head&&c.head!=(s?r.to:r.from)&&(c=t.moveToLineBoundary(e,s,!1)),!s&&c.head==r.from&&r.length){let m=/^\s*/.exec(t.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;m&&e.head!=r.from+m&&(c=L.jT.cursor(r.from+m))}return c}const Jt=t=>I(t,e=>bt(t,e,!0)),zt=t=>I(t,e=>bt(t,e,!1)),Ht=t=>I(t,e=>bt(t,e,!H(t))),Yt=t=>I(t,e=>bt(t,e,H(t))),Et=t=>I(t,e=>L.jT.cursor(t.lineBlockAt(e.head).from,1)),gn=t=>I(t,e=>L.jT.cursor(t.lineBlockAt(e.head).to,-1));function Xt(t,e,s){let r=!1,c=y(t.selection,m=>{let C=(0,ve.Um)(t,m.head,-1)||(0,ve.Um)(t,m.head,1)||m.head>0&&(0,ve.Um)(t,m.head-1,1)||m.head<t.doc.length&&(0,ve.Um)(t,m.head+1,-1);if(!C||!C.end)return m;r=!0;let M=C.start.from==m.head?C.end.to:C.end.from;return s?L.jT.range(m.anchor,M):L.jT.cursor(M)});return r?(e(A(t,c)),!0):!1}const yn=({state:t,dispatch:e})=>Xt(t,e,!1),wn=({state:t,dispatch:e})=>Xt(t,e,!0);function Ct(t,e){let s=y(t.state.selection,r=>{let c=e(r);return L.jT.range(r.anchor,c.head,c.goalColumn,c.bidiLevel||void 0)});return s.eq(t.state.selection)?!1:(t.dispatch(A(t.state,s)),!0)}function en(t,e){return Ct(t,s=>t.moveByChar(s,e))}const qt=t=>en(t,!H(t)),pn=t=>en(t,H(t)),xn=t=>en(t,!0),an=t=>en(t,!1),on=t=>Ct(t,e=>Ce(t.state,e,!0)),cn=t=>Ct(t,e=>Ce(t.state,e,!1));function Zt(t,e){return Ct(t,s=>t.moveByGroup(s,e))}const vn=t=>Zt(t,!H(t)),S=t=>Zt(t,H(t)),n=t=>Zt(t,!0),i=t=>Zt(t,!1),a=t=>Ct(t,e=>t.moveByChar(e,!0,s=>tt(t,e.head,s)));function d(t,e){return Ct(t,s=>Je(t,s,e))}const v=t=>d(t,!0),k=t=>d(t,!1),P=t=>Ct(t,e=>nt(t.state,e,!H(t))),D=t=>Ct(t,e=>nt(t.state,e,H(t)));function u(t,e){return Ct(t,s=>t.moveVertically(s,e))}const o=t=>u(t,!1),h=t=>u(t,!0);function x(t,e){return Ct(t,s=>t.moveVertically(s,e,Mt(t).height))}const w=t=>x(t,!1),O=t=>x(t,!0),N=t=>Ct(t,e=>bt(t,e,!0)),$=t=>Ct(t,e=>bt(t,e,!1)),z=t=>Ct(t,e=>bt(t,e,!H(t))),X=t=>Ct(t,e=>bt(t,e,H(t))),Y=t=>Ct(t,e=>L.jT.cursor(t.lineBlockAt(e.head).from)),ye=t=>Ct(t,e=>L.jT.cursor(t.lineBlockAt(e.head).to)),$e=({state:t,dispatch:e})=>(e(A(t,{anchor:0})),!0),ct=({state:t,dispatch:e})=>(e(A(t,{anchor:t.doc.length})),!0),Bt=({state:t,dispatch:e})=>(e(A(t,{anchor:t.selection.main.anchor,head:0})),!0),$t=({state:t,dispatch:e})=>(e(A(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),Sn=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),ln=({state:t,dispatch:e})=>{let s=Vt(t).map(({from:r,to:c})=>L.jT.range(r,Math.min(c+1,t.doc.length)));return e(t.update({selection:L.jT.create(s),userEvent:"select"})),!0},Dt=({state:t,dispatch:e})=>{let s=y(t.selection,r=>{let c=(0,ve.qz)(t),m=c.resolveStack(r.from,1);if(r.empty){let C=c.resolveStack(r.from,-1);C.node.from>=m.node.from&&C.node.to<=m.node.to&&(m=C)}for(let C=m;C;C=C.next){let{node:M}=C;if((M.from<r.from&&M.to>=r.to||M.to>r.to&&M.from<=r.from)&&C.next)return L.jT.range(M.to,M.from)}return r});return s.eq(t.selection)?!1:(e(A(t,s)),!0)},hn=({state:t,dispatch:e})=>{let s=t.selection,r=null;return s.ranges.length>1?r=L.jT.create([s.main]):s.main.empty||(r=L.jT.create([L.jT.cursor(s.main.head)])),r?(e(A(t,r)),!0):!1};function _t(t,e){if(t.state.readOnly)return!1;let s="delete.selection",{state:r}=t,c=r.changeByRange(m=>{let{from:C,to:M}=m;if(C==M){let F=e(m);F<C?(s="delete.backward",F=Ft(t,F,!1)):F>C&&(s="delete.forward",F=Ft(t,F,!0)),C=Math.min(C,F),M=Math.max(M,F)}else C=Ft(t,C,!1),M=Ft(t,M,!0);return C==M?{range:m}:{changes:{from:C,to:M},range:L.jT.cursor(C,C<m.head?-1:1)}});return c.changes.empty?!1:(t.dispatch(r.update(c,{scrollIntoView:!0,userEvent:s,effects:s=="delete.selection"?G.tk.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function Ft(t,e,s){if(t instanceof G.tk)for(let r of t.state.facet(G.tk.atomicRanges).map(c=>c(t)))r.between(e,e,(c,m)=>{c<e&&m>e&&(e=s?m:c)});return e}const fn=(t,e,s)=>_t(t,r=>{let c=r.from,{state:m}=t,C=m.doc.lineAt(c),M,F;if(s&&!e&&c>C.from&&c<C.from+200&&!/[^ \t]/.test(M=C.text.slice(0,c-C.from))){if(M[M.length-1]=="	")return c-1;let te=(0,L.IS)(M,m.tabSize),ee=te%(0,ve.y1)(m)||(0,ve.y1)(m);for(let fe=0;fe<ee&&M[M.length-1-fe]==" ";fe++)c--;F=c}else F=(0,L.cp)(C.text,c-C.from,e,e)+C.from,F==c&&C.number!=(e?m.doc.lines:1)?F+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(C.text.slice(F-C.from,c-C.from))&&(F=(0,L.cp)(C.text,F-C.from,!1,!1)+C.from);return F}),g=t=>fn(t,!1,!0),l=t=>fn(t,!1,!1),f=t=>fn(t,!0,!1),b=(t,e)=>_t(t,s=>{let r=s.head,{state:c}=t,m=c.doc.lineAt(r),C=c.charCategorizer(r);for(let M=null;;){if(r==(e?m.to:m.from)){r==s.head&&m.number!=(e?c.doc.lines:1)&&(r+=e?1:-1);break}let F=(0,L.cp)(m.text,r-m.from,e)+m.from,te=m.text.slice(Math.min(r,F)-m.from,Math.max(r,F)-m.from),ee=C(te);if(M!=null&&ee!=M)break;(te!=" "||r!=s.head)&&(M=ee),r=F}return r}),T=t=>b(t,!1),E=t=>b(t,!0),R=t=>_t(t,e=>{let s=t.lineBlockAt(e.head).to;return e.head<s?s:Math.min(t.state.doc.length,e.head+1)}),K=t=>_t(t,e=>{let s=t.lineBlockAt(e.head).from;return e.head>s?s:Math.max(0,e.head-1)}),V=t=>_t(t,e=>{let s=t.moveToLineBoundary(e,!1).head;return e.head>s?s:Math.max(0,e.head-1)}),oe=t=>_t(t,e=>{let s=t.moveToLineBoundary(e,!0).head;return e.head<s?s:Math.min(t.state.doc.length,e.head+1)}),we=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let s=[];for(let r=0,c="",m=t.doc.iter();;){if(m.next(),m.lineBreak||m.done){let C=c.search(/\s+$/);if(C>-1&&s.push({from:r-(c.length-C),to:r}),m.done)break;c=""}else c=m.value;r+=m.value.length}return s.length?(e(t.update({changes:s,userEvent:"delete"})),!0):!1},yt=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let s=t.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:L.xv.of(["",""])},range:L.jT.cursor(r.from)}));return e(t.update(s,{scrollIntoView:!0,userEvent:"input"})),!0},tn=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let s=t.changeByRange(r=>{if(!r.empty||r.from==0||r.from==t.doc.length)return{range:r};let c=r.from,m=t.doc.lineAt(c),C=c==m.from?c-1:(0,L.cp)(m.text,c-m.from,!1)+m.from,M=c==m.to?c+1:(0,L.cp)(m.text,c-m.from,!0)+m.from;return{changes:{from:C,to:M,insert:t.doc.slice(c,M).append(t.doc.slice(C,c))},range:L.jT.cursor(M)}});return s.changes.empty?!1:(e(t.update(s,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Vt(t){let e=[],s=-1;for(let r of t.selection.ranges){let c=t.doc.lineAt(r.from),m=t.doc.lineAt(r.to);if(!r.empty&&r.to==m.from&&(m=t.doc.lineAt(r.to-1)),s>=c.number){let C=e[e.length-1];C.to=m.to,C.ranges.push(r)}else e.push({from:c.from,to:m.to,ranges:[r]});s=m.number+1}return e}function mn(t,e,s){if(t.readOnly)return!1;let r=[],c=[];for(let m of Vt(t)){if(s?m.to==t.doc.length:m.from==0)continue;let C=t.doc.lineAt(s?m.to+1:m.from-1),M=C.length+1;if(s){r.push({from:m.to,to:C.to},{from:m.from,insert:C.text+t.lineBreak});for(let F of m.ranges)c.push(L.jT.range(Math.min(t.doc.length,F.anchor+M),Math.min(t.doc.length,F.head+M)))}else{r.push({from:C.from,to:m.from},{from:m.to,insert:t.lineBreak+C.text});for(let F of m.ranges)c.push(L.jT.range(F.anchor-M,F.head-M))}}return r.length?(e(t.update({changes:r,scrollIntoView:!0,selection:L.jT.create(c,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const kn=({state:t,dispatch:e})=>mn(t,e,!1),pi=({state:t,dispatch:e})=>mn(t,e,!0);function On(t,e,s){if(t.readOnly)return!1;let r=[];for(let c of Vt(t))s?r.push({from:c.from,insert:t.doc.slice(c.from,c.to)+t.lineBreak}):r.push({from:c.to,insert:t.lineBreak+t.doc.slice(c.from,c.to)});return e(t.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const Er=({state:t,dispatch:e})=>On(t,e,!1),Br=({state:t,dispatch:e})=>On(t,e,!0),Dr=t=>{if(t.state.readOnly)return!1;let{state:e}=t,s=e.changes(Vt(e).map(({from:c,to:m})=>(c>0?c--:m<e.doc.length&&m++,{from:c,to:m}))),r=y(e.selection,c=>{let m;if(t.lineWrapping){let C=t.lineBlockAt(c.head),M=t.coordsAtPos(c.head,c.assoc||1);M&&(m=C.bottom+t.documentTop-M.bottom+t.defaultLineHeight/2)}return t.moveVertically(c,!0,m)}).map(s);return t.dispatch({changes:s,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0},Hs=({state:t,dispatch:e})=>(e(t.update(t.replaceSelection(t.lineBreak),{scrollIntoView:!0,userEvent:"input"})),!0),Ks=({state:t,dispatch:e})=>(e(t.update(t.changeByRange(s=>{let r=/^\s*/.exec(t.doc.lineAt(s.from).text)[0];return{changes:{from:s.from,to:s.to,insert:t.lineBreak+r},range:EditorSelection.cursor(s.from+r.length+1)}}),{scrollIntoView:!0,userEvent:"input"})),!0);function Lr(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let s=(0,ve.qz)(t).resolveInner(e),r=s.childBefore(e),c=s.childAfter(e),m;return r&&c&&r.to<=e&&c.from>=e&&(m=r.type.prop(_e.md.closedBy))&&m.indexOf(c.name)>-1&&t.doc.lineAt(r.to).from==t.doc.lineAt(c.from).from&&!/\S/.test(t.sliceDoc(r.to,c.from))?{from:r.to,to:c.from}:null}const Wi=ji(!1),Rr=ji(!0);function ji(t){return({state:e,dispatch:s})=>{if(e.readOnly)return!1;let r=e.changeByRange(c=>{let{from:m,to:C}=c,M=e.doc.lineAt(m),F=!t&&m==C&&Lr(e,m);t&&(m=C=(C<=M.to?M:e.doc.lineAt(C)).to);let te=new ve.Gn(e,{simulateBreak:m,simulateDoubleBreak:!!F}),ee=(0,ve.K0)(te,m);for(ee==null&&(ee=(0,L.IS)(/^\s*/.exec(e.doc.lineAt(m).text)[0],e.tabSize));C<M.to&&/\s/.test(M.text[C-M.from]);)C++;F?{from:m,to:C}=F:m>M.from&&m<M.from+100&&!/\S/.test(M.text.slice(0,m))&&(m=M.from);let fe=["",(0,ve.SS)(e,ee)];return F&&fe.push((0,ve.SS)(e,te.lineIndent(M.from,-1))),{changes:{from:m,to:C,insert:L.xv.of(fe)},range:L.jT.cursor(m+1+fe[1].length)}});return s(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function mi(t,e){let s=-1;return t.changeByRange(r=>{let c=[];for(let C=r.from;C<=r.to;){let M=t.doc.lineAt(C);M.number>s&&(r.empty||r.to>M.from)&&(e(M,c,r),s=M.number),C=M.to+1}let m=t.changes(c);return{changes:c,range:L.jT.range(m.mapPos(r.anchor,1),m.mapPos(r.head,1))}})}const Nr=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let s=Object.create(null),r=new ve.Gn(t,{overrideIndentation:m=>{let C=s[m];return C==null?-1:C}}),c=mi(t,(m,C,M)=>{let F=(0,ve.K0)(r,m.from);if(F==null)return;/\S/.test(m.text)||(F=0);let te=/^\s*/.exec(m.text)[0],ee=(0,ve.SS)(t,F);(te!=ee||M.from<m.from+te.length)&&(s[m.from]=F,C.push({from:m.from,to:m.from+te.length,insert:ee}))});return c.changes.empty||e(t.update(c,{userEvent:"indent"})),!0},gi=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(mi(t,(s,r)=>{r.push({from:s.from,insert:t.facet(ve.c)})}),{userEvent:"input.indent"})),!0),Ji=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(mi(t,(s,r)=>{let c=/^\s*/.exec(s.text)[0];if(!c)return;let m=(0,L.IS)(c,t.tabSize),C=0,M=(0,ve.SS)(t,Math.max(0,m-(0,ve.y1)(t)));for(;C<c.length&&C<M.length&&c.charCodeAt(C)==M.charCodeAt(C);)C++;r.push({from:s.from+C,to:s.from+c.length,insert:M.slice(C)})}),{userEvent:"delete.dedent"})),!0),Fr=t=>(t.setTabFocusMode(),!0),Gs=t=>(t.setTabFocusMode(2e3),!0),Qs=({state:t,dispatch:e})=>t.selection.ranges.some(s=>!s.empty)?gi({state:t,dispatch:e}):(e(t.update(t.replaceSelection("	"),{scrollIntoView:!0,userEvent:"input"})),!0),Wr=[{key:"Ctrl-b",run:re,shift:qt,preventDefault:!0},{key:"Ctrl-f",run:de,shift:pn},{key:"Ctrl-p",run:Lt,shift:o},{key:"Ctrl-n",run:Qt,shift:h},{key:"Ctrl-a",run:Et,shift:Y},{key:"Ctrl-e",run:gn,shift:ye},{key:"Ctrl-d",run:f},{key:"Ctrl-h",run:g},{key:"Ctrl-k",run:R},{key:"Ctrl-Alt-h",run:T},{key:"Ctrl-o",run:yt},{key:"Ctrl-t",run:tn},{key:"Ctrl-v",run:Oe}],jr=[{key:"ArrowLeft",run:re,shift:qt,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:It,shift:vn,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:Ht,shift:z,preventDefault:!0},{key:"ArrowRight",run:de,shift:pn,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:gt,shift:S,preventDefault:!0},{mac:"Cmd-ArrowRight",run:Yt,shift:X,preventDefault:!0},{key:"ArrowUp",run:Lt,shift:o,preventDefault:!0},{mac:"Cmd-ArrowUp",run:$e,shift:Bt},{mac:"Ctrl-ArrowUp",run:Ot,shift:w},{key:"ArrowDown",run:Qt,shift:h,preventDefault:!0},{mac:"Cmd-ArrowDown",run:ct,shift:$t},{mac:"Ctrl-ArrowDown",run:Oe,shift:O},{key:"PageUp",run:Ot,shift:w},{key:"PageDown",run:Oe,shift:O},{key:"Home",run:zt,shift:$,preventDefault:!0},{key:"Mod-Home",run:$e,shift:Bt},{key:"End",run:Jt,shift:N,preventDefault:!0},{key:"Mod-End",run:ct,shift:$t},{key:"Enter",run:Wi,shift:Wi},{key:"Mod-a",run:Sn},{key:"Backspace",run:g,shift:g},{key:"Delete",run:f},{key:"Mod-Backspace",mac:"Alt-Backspace",run:T},{key:"Mod-Delete",mac:"Alt-Delete",run:E},{mac:"Mod-Backspace",run:V},{mac:"Mod-Delete",run:oe}].concat(Wr.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),Jr=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:ut,shift:P},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:St,shift:D},{key:"Alt-ArrowUp",run:kn},{key:"Shift-Alt-ArrowUp",run:Er},{key:"Alt-ArrowDown",run:pi},{key:"Shift-Alt-ArrowDown",run:Br},{key:"Escape",run:hn},{key:"Mod-Enter",run:Rr},{key:"Alt-l",mac:"Ctrl-l",run:ln},{key:"Mod-i",run:Dt,preventDefault:!0},{key:"Mod-[",run:Ji},{key:"Mod-]",run:gi},{key:"Mod-Alt-\\",run:Nr},{key:"Shift-Mod-k",run:Dr},{key:"Shift-Mod-\\",run:yn},{key:"Mod-/",run:Qe},{key:"Alt-A",run:Se},{key:"Ctrl-m",mac:"Shift-Alt-m",run:Fr}].concat(jr),$r={key:"Tab",run:gi,shift:Ji};function wt(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,s=arguments[1];if(s&&typeof s=="object"&&s.nodeType==null&&!Array.isArray(s)){for(var r in s)if(Object.prototype.hasOwnProperty.call(s,r)){var c=s[r];typeof c=="string"?t.setAttribute(r,c):c!=null&&(t[r]=c)}e++}for(;e<arguments.length;e++)$i(t,arguments[e]);return t}function $i(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var s=0;s<e.length;s++)$i(t,e[s]);else throw new RangeError("Unsupported child node: "+e)}const _i=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class En{constructor(e,s,r=0,c=e.length,m,C){this.test=C,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,c),this.bufferStart=r,this.normalize=m?M=>m(_i(M)):_i,this.query=this.normalize(s)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return(0,L.gm)(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let s=(0,L.bg)(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=(0,L.nZ)(e);let c=this.normalize(s);if(c.length)for(let m=0,C=r;;m++){let M=c.charCodeAt(m),F=this.match(M,C,this.bufferPos+this.bufferStart);if(m==c.length-1){if(F)return this.value=F,this;break}C==r&&m<s.length&&s.charCodeAt(m)==M&&C++}}}match(e,s,r){let c=null;for(let m=0;m<this.matches.length;m+=2){let C=this.matches[m],M=!1;this.query.charCodeAt(C)==e&&(C==this.query.length-1?c={from:this.matches[m+1],to:r}:(this.matches[m]++,M=!0)),M||(this.matches.splice(m,2),m-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?c={from:s,to:r}:this.matches.push(1,s)),c&&this.test&&!this.test(c.from,c.to,this.buffer,this.bufferStart)&&(c=null),c}}typeof Symbol!="undefined"&&(En.prototype[Symbol.iterator]=function(){return this});const zi={from:-1,to:-1,match:/.*/.exec("")},yi="gm"+(/x/.unicode==null?"":"u");class Ui{constructor(e,s,r,c=0,m=e.length){if(this.text=e,this.to=m,this.curLine="",this.done=!1,this.value=zi,/\\[sWDnr]|\n|\r|\[\^/.test(s))return new Vi(e,s,r,c,m);this.re=new RegExp(s,yi+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.iter=e.iter();let C=e.lineAt(c);this.curLineStart=C.from,this.matchPos=Kn(e,c),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let s=this.matchPos<=this.to&&this.re.exec(this.curLine);if(s){let r=this.curLineStart+s.index,c=r+s[0].length;if(this.matchPos=Kn(this.text,c+(r==c?1:0)),r==this.curLineStart+this.curLine.length&&this.nextLine(),(r<c||r>this.value.to)&&(!this.test||this.test(r,c,s)))return this.value={from:r,to:c,match:s},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const xi=new WeakMap;class Bn{constructor(e,s){this.from=e,this.text=s}get to(){return this.from+this.text.length}static get(e,s,r){let c=xi.get(e);if(!c||c.from>=r||c.to<=s){let M=new Bn(s,e.sliceString(s,r));return xi.set(e,M),M}if(c.from==s&&c.to==r)return c;let{text:m,from:C}=c;return C>s&&(m=e.sliceString(s,C)+m,C=s),c.to<r&&(m+=e.sliceString(c.to,r)),xi.set(e,new Bn(C,m)),new Bn(s,m.slice(s-C,r-C))}}class Vi{constructor(e,s,r,c,m){this.text=e,this.to=m,this.done=!1,this.value=zi,this.matchPos=Kn(e,c),this.re=new RegExp(s,yi+(r!=null&&r.ignoreCase?"i":"")),this.test=r==null?void 0:r.test,this.flat=Bn.get(e,c,this.chunkEnd(c+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,s=this.re.exec(this.flat.text);if(s&&!s[0]&&s.index==e&&(this.re.lastIndex=e+1,s=this.re.exec(this.flat.text)),s){let r=this.flat.from+s.index,c=r+s[0].length;if((this.flat.to>=this.to||s.index+s[0].length<=this.flat.text.length-10)&&(!this.test||this.test(r,c,s)))return this.value={from:r,to:c,match:s},this.matchPos=Kn(this.text,c+(r==c?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Bn.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol!="undefined"&&(Ui.prototype[Symbol.iterator]=Vi.prototype[Symbol.iterator]=function(){return this});function _r(t){try{return new RegExp(t,yi),!0}catch(e){return!1}}function Kn(t,e){if(e>=t.length)return e;let s=t.lineAt(e),r;for(;e<s.to&&(r=s.text.charCodeAt(e-s.from))>=56320&&r<57344;)e++;return e}function vi(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),s=wt("input",{class:"cm-textfield",name:"line",value:e}),r=wt("form",{class:"cm-gotoLine",onkeydown:m=>{m.keyCode==27?(m.preventDefault(),t.dispatch({effects:Jn.of(!1)}),t.focus()):m.keyCode==13&&(m.preventDefault(),c())},onsubmit:m=>{m.preventDefault(),c()}},wt("label",t.state.phrase("Go to line"),": ",s)," ",wt("button",{class:"cm-button",type:"submit"},t.state.phrase("go")),wt("button",{name:"close",onclick:()=>{t.dispatch({effects:Jn.of(!1)}),t.focus()},"aria-label":t.state.phrase("close"),type:"button"},["\xD7"]));function c(){let m=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(s.value);if(!m)return;let{state:C}=t,M=C.doc.lineAt(C.selection.main.head),[,F,te,ee,fe]=m,Ae=ee?+ee.slice(1):0,Ke=te?+te:M.number;if(te&&fe){let Gt=Ke/100;F&&(Gt=Gt*(F=="-"?-1:1)+M.number/C.doc.lines),Ke=Math.round(C.doc.lines*Gt)}else te&&F&&(Ke=Ke*(F=="-"?-1:1)+M.number);let Pt=C.doc.line(Math.max(1,Math.min(C.doc.lines,Ke))),it=L.jT.cursor(Pt.from+Math.max(0,Math.min(Ae,Pt.length)));t.dispatch({effects:[Jn.of(!1),G.tk.scrollIntoView(it.from,{y:"center"})],selection:it}),t.focus()}return{dom:r}}const Jn=L.Py.define(),Hi=L.QQ.define({create(){return!0},update(t,e){for(let s of e.effects)s.is(Jn)&&(t=s.value);return t},provide:t=>G.mH.from(t,e=>e?vi:null)}),zr=t=>{let e=(0,G.Sd)(t,vi);if(!e){let s=[Jn.of(!0)];t.state.field(Hi,!1)==null&&s.push(L.Py.appendConfig.of([Hi,Ur])),t.dispatch({effects:s}),e=(0,G.Sd)(t,vi)}return e&&e.dom.querySelector("input").select(),!0},Ur=G.tk.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),Vr={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},Ki=L.r$.define({combine(t){return(0,L.BO)(t,Vr,{highlightWordAroundCursor:(e,s)=>e||s,minSelectionLength:Math.min,maxMatches:Math.min})}});function Hr(t){let e=[Zr,qr];return t&&e.push(Ki.of(t)),e}const Kr=G.p.mark({class:"cm-selectionMatch"}),Gr=G.p.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function Gi(t,e,s,r){return(s==0||t(e.sliceDoc(s-1,s))!=L.D0.Word)&&(r==e.doc.length||t(e.sliceDoc(r,r+1))!=L.D0.Word)}function Qr(t,e,s,r){return t(e.sliceDoc(s,s+1))==L.D0.Word&&t(e.sliceDoc(r-1,r))==L.D0.Word}const qr=G.lg.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.selectionSet||t.docChanged||t.viewportChanged)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=t.state.facet(Ki),{state:s}=t,r=s.selection;if(r.ranges.length>1)return G.p.none;let c=r.main,m,C=null;if(c.empty){if(!e.highlightWordAroundCursor)return G.p.none;let F=s.wordAt(c.head);if(!F)return G.p.none;C=s.charCategorizer(c.head),m=s.sliceDoc(F.from,F.to)}else{let F=c.to-c.from;if(F<e.minSelectionLength||F>200)return G.p.none;if(e.wholeWords){if(m=s.sliceDoc(c.from,c.to),C=s.charCategorizer(c.head),!(Gi(C,s,c.from,c.to)&&Qr(C,s,c.from,c.to)))return G.p.none}else if(m=s.sliceDoc(c.from,c.to),!m)return G.p.none}let M=[];for(let F of t.visibleRanges){let te=new En(s.doc,m,F.from,F.to);for(;!te.next().done;){let{from:ee,to:fe}=te.value;if((!C||Gi(C,s,ee,fe))&&(c.empty&&ee<=c.from&&fe>=c.to?M.push(Gr.range(ee,fe)):(ee>=c.to||fe<=c.from)&&M.push(Kr.range(ee,fe)),M.length>e.maxMatches))return G.p.none}}return G.p.set(M)}},{decorations:t=>t.decorations}),Zr=G.tk.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),Yr=({state:t,dispatch:e})=>{let{selection:s}=t,r=L.jT.create(s.ranges.map(c=>t.wordAt(c.head)||L.jT.cursor(c.head)),s.mainIndex);return r.eq(s)?!1:(e(t.update({selection:r})),!0)};function Xr(t,e){let{main:s,ranges:r}=t.selection,c=t.wordAt(s.head),m=c&&c.from==s.from&&c.to==s.to;for(let C=!1,M=new En(t.doc,e,r[r.length-1].to);;)if(M.next(),M.done){if(C)return null;M=new En(t.doc,e,0,Math.max(0,r[r.length-1].from-1)),C=!0}else{if(C&&r.some(F=>F.from==M.value.from))continue;if(m){let F=t.wordAt(M.value.from);if(!F||F.from!=M.value.from||F.to!=M.value.to)continue}return M.value}}const es=({state:t,dispatch:e})=>{let{ranges:s}=t.selection;if(s.some(m=>m.from===m.to))return Yr({state:t,dispatch:e});let r=t.sliceDoc(s[0].from,s[0].to);if(t.selection.ranges.some(m=>t.sliceDoc(m.from,m.to)!=r))return!1;let c=Xr(t,r);return c?(e(t.update({selection:t.selection.addRange(L.jT.range(c.from,c.to),!1),effects:G.tk.scrollIntoView(c.to)})),!0):!1},Cn=L.r$.define({combine(t){return(0,L.BO)(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new us(e),scrollToMatch:e=>G.tk.scrollIntoView(e)})}});function qs(t){return t?[Cn.of(t),Ci]:Ci}class Qi{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||_r(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(s,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new rs(this):new ns(this)}getCursor(e,s=0,r){let c=e.doc?e:L.yy.create({doc:e});return r==null&&(r=c.doc.length),this.regexp?Ln(this,c,s,r):Dn(this,c,s,r)}}class qi{constructor(e){this.spec=e}}function Dn(t,e,s,r){return new En(e.doc,t.unquoted,s,r,t.caseSensitive?void 0:c=>c.toLowerCase(),t.wholeWord?ts(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function ts(t,e){return(s,r,c,m)=>((m>s||m+c.length<r)&&(m=Math.max(0,s-2),c=t.sliceString(m,Math.min(t.length,r+2))),(e(Gn(c,s-m))!=L.D0.Word||e(Qn(c,s-m))!=L.D0.Word)&&(e(Qn(c,r-m))!=L.D0.Word||e(Gn(c,r-m))!=L.D0.Word))}class ns extends qi{constructor(e){super(e)}nextMatch(e,s,r){let c=Dn(this.spec,e,r,e.doc.length).nextOverlapping();if(c.done){let m=Math.min(e.doc.length,s+this.spec.unquoted.length);c=Dn(this.spec,e,0,m).nextOverlapping()}return c.done||c.value.from==s&&c.value.to==r?null:c.value}prevMatchInRange(e,s,r){for(let c=r;;){let m=Math.max(s,c-1e4-this.spec.unquoted.length),C=Dn(this.spec,e,m,c),M=null;for(;!C.nextOverlapping().done;)M=C.value;if(M)return M;if(m==s)return null;c-=1e4}}prevMatch(e,s,r){let c=this.prevMatchInRange(e,0,s);return c||(c=this.prevMatchInRange(e,Math.max(0,r-this.spec.unquoted.length),e.doc.length)),c&&(c.from!=s||c.to!=r)?c:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,s){let r=Dn(this.spec,e,0,e.doc.length),c=[];for(;!r.next().done;){if(c.length>=s)return null;c.push(r.value)}return c}highlight(e,s,r,c){let m=Dn(this.spec,e,Math.max(0,s-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.doc.length));for(;!m.next().done;)c(m.value.from,m.value.to)}}function Ln(t,e,s,r){return new Ui(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?is(e.charCategorizer(e.selection.main.head)):void 0},s,r)}function Gn(t,e){return t.slice((0,L.cp)(t,e,!1),e)}function Qn(t,e){return t.slice(e,(0,L.cp)(t,e))}function is(t){return(e,s,r)=>!r[0].length||(t(Gn(r.input,r.index))!=L.D0.Word||t(Qn(r.input,r.index))!=L.D0.Word)&&(t(Qn(r.input,r.index+r[0].length))!=L.D0.Word||t(Gn(r.input,r.index+r[0].length))!=L.D0.Word)}class rs extends qi{nextMatch(e,s,r){let c=Ln(this.spec,e,r,e.doc.length).next();return c.done&&(c=Ln(this.spec,e,0,s).next()),c.done?null:c.value}prevMatchInRange(e,s,r){for(let c=1;;c++){let m=Math.max(s,r-c*1e4),C=Ln(this.spec,e,m,r),M=null;for(;!C.next().done;)M=C.value;if(M&&(m==s||M.from>m+10))return M;if(m==s)return null}}prevMatch(e,s,r){return this.prevMatchInRange(e,0,s)||this.prevMatchInRange(e,r,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(s,r)=>{if(r=="&")return e.match[0];if(r=="$")return"$";for(let c=r.length;c>0;c--){let m=+r.slice(0,c);if(m>0&&m<e.match.length)return e.match[m]+r.slice(c)}return s})}matchAll(e,s){let r=Ln(this.spec,e,0,e.doc.length),c=[];for(;!r.next().done;){if(c.length>=s)return null;c.push(r.value)}return c}highlight(e,s,r,c){let m=Ln(this.spec,e,Math.max(0,s-250),Math.min(r+250,e.doc.length));for(;!m.next().done;)c(m.value.from,m.value.to)}}const $n=L.Py.define(),ki=L.Py.define(),un=L.QQ.define({create(t){return new bi(Yn(t).create(),null)},update(t,e){for(let s of e.effects)s.is($n)?t=new bi(s.value.create(),t.panel):s.is(ki)&&(t=new bi(t.query,s.value?wi:null));return t},provide:t=>G.mH.from(t,e=>e.panel)});function Zs(t){let e=t.field(un,!1);return e?e.query.spec:Yn(t)}function Ys(t){var e;return((e=t.field(un,!1))===null||e===void 0?void 0:e.panel)!=null}class bi{constructor(e,s){this.query=e,this.panel=s}}const ss=G.p.mark({class:"cm-searchMatch"}),os=G.p.mark({class:"cm-searchMatch cm-searchMatch-selected"}),ls=G.lg.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(un))}update(t){let e=t.state.field(un);(e!=t.startState.field(un)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return G.p.none;let{view:s}=this,r=new L.f_;for(let c=0,m=s.visibleRanges,C=m.length;c<C;c++){let{from:M,to:F}=m[c];for(;c<C-1&&F>m[c+1].from-2*250;)F=m[++c].to;t.highlight(s.state,M,F,(te,ee)=>{let fe=s.state.selection.ranges.some(Ae=>Ae.from==te&&Ae.to==ee);r.add(te,ee,fe?os:ss)})}return r.finish()}},{decorations:t=>t.decorations});function _n(t){return e=>{let s=e.state.field(un,!1);return s&&s.query.spec.valid?t(e,s):er(e)}}const qn=_n((t,{query:e})=>{let{to:s}=t.state.selection.main,r=e.nextMatch(t.state,s,s);if(!r)return!1;let c=L.jT.single(r.from,r.to),m=t.state.facet(Cn);return t.dispatch({selection:c,effects:[Si(t,r),m.scrollToMatch(c.main,t)],userEvent:"select.search"}),Xi(t),!0}),Zn=_n((t,{query:e})=>{let{state:s}=t,{from:r}=s.selection.main,c=e.prevMatch(s,r,r);if(!c)return!1;let m=L.jT.single(c.from,c.to),C=t.state.facet(Cn);return t.dispatch({selection:m,effects:[Si(t,c),C.scrollToMatch(m.main,t)],userEvent:"select.search"}),Xi(t),!0}),as=_n((t,{query:e})=>{let s=e.matchAll(t.state,1e3);return!s||!s.length?!1:(t.dispatch({selection:L.jT.create(s.map(r=>L.jT.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),cs=({state:t,dispatch:e})=>{let s=t.selection;if(s.ranges.length>1||s.main.empty)return!1;let{from:r,to:c}=s.main,m=[],C=0;for(let M=new En(t.doc,t.sliceDoc(r,c));!M.next().done;){if(m.length>1e3)return!1;M.value.from==r&&(C=m.length),m.push(L.jT.range(M.value.from,M.value.to))}return e(t.update({selection:L.jT.create(m,C),userEvent:"select.search.matches"})),!0},Zi=_n((t,{query:e})=>{let{state:s}=t,{from:r,to:c}=s.selection.main;if(s.readOnly)return!1;let m=e.nextMatch(s,r,r);if(!m)return!1;let C=m,M=[],F,te,ee=[];C.from==r&&C.to==c&&(te=s.toText(e.getReplacement(C)),M.push({from:C.from,to:C.to,insert:te}),C=e.nextMatch(s,C.from,C.to),ee.push(G.tk.announce.of(s.phrase("replaced match on line $",s.doc.lineAt(r).number)+".")));let fe=t.state.changes(M);return C&&(F=L.jT.single(C.from,C.to).map(fe),ee.push(Si(t,C)),ee.push(s.facet(Cn).scrollToMatch(F.main,t))),t.dispatch({changes:fe,selection:F,effects:ee,userEvent:"input.replace"}),!0}),hs=_n((t,{query:e})=>{if(t.state.readOnly)return!1;let s=e.matchAll(t.state,1e9).map(c=>{let{from:m,to:C}=c;return{from:m,to:C,insert:e.getReplacement(c)}});if(!s.length)return!1;let r=t.state.phrase("replaced $ matches",s.length)+".";return t.dispatch({changes:s,effects:G.tk.announce.of(r),userEvent:"input.replace.all"}),!0});function wi(t){return t.state.facet(Cn).createPanel(t)}function Yn(t,e){var s,r,c,m,C;let M=t.selection.main,F=M.empty||M.to>M.from+100?"":t.sliceDoc(M.from,M.to);if(e&&!F)return e;let te=t.facet(Cn);return new Qi({search:((s=e==null?void 0:e.literal)!==null&&s!==void 0?s:te.literal)?F:F.replace(/\n/g,"\\n"),caseSensitive:(r=e==null?void 0:e.caseSensitive)!==null&&r!==void 0?r:te.caseSensitive,literal:(c=e==null?void 0:e.literal)!==null&&c!==void 0?c:te.literal,regexp:(m=e==null?void 0:e.regexp)!==null&&m!==void 0?m:te.regexp,wholeWord:(C=e==null?void 0:e.wholeWord)!==null&&C!==void 0?C:te.wholeWord})}function Yi(t){let e=(0,G.Sd)(t,wi);return e&&e.dom.querySelector("[main-field]")}function Xi(t){let e=Yi(t);e&&e==t.root.activeElement&&e.select()}const er=t=>{let e=t.state.field(un,!1);if(e&&e.panel){let s=Yi(t);if(s&&s!=t.root.activeElement){let r=Yn(t.state,e.query.spec);r.valid&&t.dispatch({effects:$n.of(r)}),s.focus(),s.select()}}else t.dispatch({effects:[ki.of(!0),e?$n.of(Yn(t.state,e.query.spec)):L.Py.appendConfig.of(Ci)]});return!0},tr=t=>{let e=t.state.field(un,!1);if(!e||!e.panel)return!1;let s=(0,G.Sd)(t,wi);return s&&s.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:ki.of(!1)}),!0},fs=[{key:"Mod-f",run:er,scope:"editor search-panel"},{key:"F3",run:qn,shift:Zn,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:qn,shift:Zn,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:tr,scope:"editor search-panel"},{key:"Mod-Shift-l",run:cs},{key:"Mod-Alt-g",run:zr},{key:"Mod-d",run:es,preventDefault:!0}];class us{constructor(e){this.view=e;let s=this.query=e.state.field(un).query.spec;this.commit=this.commit.bind(this),this.searchField=wt("input",{value:s.search,placeholder:nn(e,"Find"),"aria-label":nn(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=wt("input",{value:s.replace,placeholder:nn(e,"Replace"),"aria-label":nn(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=wt("input",{type:"checkbox",name:"case",form:"",checked:s.caseSensitive,onchange:this.commit}),this.reField=wt("input",{type:"checkbox",name:"re",form:"",checked:s.regexp,onchange:this.commit}),this.wordField=wt("input",{type:"checkbox",name:"word",form:"",checked:s.wholeWord,onchange:this.commit});function r(c,m,C){return wt("button",{class:"cm-button",name:c,onclick:m,type:"button"},C)}this.dom=wt("div",{onkeydown:c=>this.keydown(c),class:"cm-search"},[this.searchField,r("next",()=>qn(e),[nn(e,"next")]),r("prev",()=>Zn(e),[nn(e,"previous")]),r("select",()=>as(e),[nn(e,"all")]),wt("label",null,[this.caseField,nn(e,"match case")]),wt("label",null,[this.reField,nn(e,"regexp")]),wt("label",null,[this.wordField,nn(e,"by word")]),...e.state.readOnly?[]:[wt("br"),this.replaceField,r("replace",()=>Zi(e),[nn(e,"replace")]),r("replaceAll",()=>hs(e),[nn(e,"replace all")])],wt("button",{name:"close",onclick:()=>tr(e),"aria-label":nn(e,"close"),type:"button"},["\xD7"])])}commit(){let e=new Qi({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:$n.of(e)}))}keydown(e){(0,G.$1)(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?Zn:qn)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),Zi(this.view))}update(e){for(let s of e.transactions)for(let r of s.effects)r.is($n)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Cn).top}}function nn(t,e){return t.state.phrase(e)}const Xn=30,ei=/[\s\.,:;?!]/;function Si(t,{from:e,to:s}){let r=t.state.doc.lineAt(e),c=t.state.doc.lineAt(s).to,m=Math.max(r.from,e-Xn),C=Math.min(c,s+Xn),M=t.state.sliceDoc(m,C);if(m!=r.from){for(let F=0;F<Xn;F++)if(!ei.test(M[F+1])&&ei.test(M[F])){M=M.slice(F);break}}if(C!=c){for(let F=M.length-1;F>M.length-Xn;F--)if(!ei.test(M[F-1])&&ei.test(M[F])){M=M.slice(0,F);break}}return G.tk.announce.of(`${t.state.phrase("current match")}. ${M} ${t.state.phrase("on line")} ${r.number}.`)}const ds=G.tk.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),Ci=[un,L.Wl.low(ls),ds];var ti=ie(34790);class nr{constructor(e,s,r){this.from=e,this.to=s,this.diagnostic=r}}class An{constructor(e,s,r){this.diagnostics=e,this.panel=s,this.selected=r}static init(e,s,r){let c=r.facet(Nn).markerFilter;c&&(e=c(e,r));let m=e.slice().sort((ee,fe)=>ee.from-fe.from||ee.to-fe.to),C=new L.f_,M=[],F=0;for(let ee=0;;){let fe=ee==m.length?null:m[ee];if(!fe&&!M.length)break;let Ae,Ke;for(M.length?(Ae=F,Ke=M.reduce((it,Gt)=>Math.min(it,Gt.to),fe&&fe.from>Ae?fe.from:1e8)):(Ae=fe.from,Ke=fe.to,M.push(fe),ee++);ee<m.length;){let it=m[ee];if(it.from==Ae&&(it.to>it.from||it.to==Ae))M.push(it),ee++,Ke=Math.min(it.to,Ke);else{Ke=Math.min(it.from,Ke);break}}let Pt=ur(M);if(M.some(it=>it.from==it.to||it.from==it.to-1&&r.doc.lineAt(it.from).to==it.from))C.add(Ae,Ae,G.p.widget({widget:new vs(Pt),diagnostics:M.slice()}));else{let it=M.reduce((Gt,Tn)=>Tn.markClass?Gt+" "+Tn.markClass:Gt,"");C.add(Ae,Ke,G.p.mark({class:"cm-lintRange cm-lintRange-"+Pt+it,diagnostics:M.slice(),inclusiveEnd:M.some(Gt=>Gt.to>Ke)}))}F=Ke;for(let it=0;it<M.length;it++)M[it].to<=F&&M.splice(it--,1)}let te=C.finish();return new An(te,s,Rn(te))}}function Rn(t,e=null,s=0){let r=null;return t.between(s,1e9,(c,m,{spec:C})=>{if(!(e&&C.diagnostics.indexOf(e)<0))if(!r)r=new nr(c,m,e||C.diagnostics[0]);else{if(C.diagnostics.indexOf(r.diagnostic)<0)return!1;r=new nr(r.from,m,r.diagnostic)}}),r}function ir(t,e){let s=e.pos,r=e.end||s,c=t.state.facet(Nn).hideOn(t,s,r);if(c!=null)return c;let m=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(C=>C.is(ni))||t.changes.touchesRange(m.from,Math.max(m.to,r)))}function rr(t,e){return t.field(Kt,!1)?e:e.concat(L.Py.appendConfig.of(mr))}function Xs(t,e){return{effects:rr(t,[ni.of(e)])}}const ni=L.Py.define(),Ai=L.Py.define(),sr=L.Py.define(),Kt=L.QQ.define({create(){return new An(G.p.none,null,null)},update(t,e){if(e.docChanged&&t.diagnostics.size){let s=t.diagnostics.map(e.changes),r=null,c=t.panel;if(t.selected){let m=e.changes.mapPos(t.selected.from,1);r=Rn(s,t.selected.diagnostic,m)||Rn(s,null,m)}!s.size&&c&&e.state.facet(Nn).autoPanel&&(c=null),t=new An(s,c,r)}for(let s of e.effects)if(s.is(ni)){let r=e.state.facet(Nn).autoPanel?s.value.length?zn.open:null:t.panel;t=An.init(s.value,r,e.state)}else s.is(Ai)?t=new An(t.diagnostics,s.value?zn.open:null,t.selected):s.is(sr)&&(t=new An(t.diagnostics,t.panel,s.value));return t},provide:t=>[G.mH.from(t,e=>e.panel),G.tk.decorations.from(t,e=>e.diagnostics)]});function eo(t){let e=t.field(Kt,!1);return e?e.diagnostics.size:0}const ps=G.p.mark({class:"cm-lintRange cm-lintRange-active"});function ms(t,e,s){let{diagnostics:r}=t.state.field(Kt),c,m=-1,C=-1;r.between(e-(s<0?1:0),e+(s>0?1:0),(F,te,{spec:ee})=>{if(e>=F&&e<=te&&(F==te||(e>F||s>0)&&(e<te||s<0)))return c=ee.diagnostics,m=F,C=te,!1});let M=t.state.facet(Nn).tooltipFilter;return c&&M&&(c=M(c,t.state)),c?{pos:m,end:C,above:t.state.doc.lineAt(m).to<C,create(){return{dom:or(t,c)}}}:null}function or(t,e){return wt("ul",{class:"cm-tooltip-lint"},e.map(s=>hr(t,s,!1)))}const gs=t=>{let e=t.state.field(Kt,!1);(!e||!e.panel)&&t.dispatch({effects:rr(t.state,[Ai.of(!0)])});let s=(0,G.Sd)(t,zn.open);return s&&s.dom.querySelector(".cm-panel-lint ul").focus(),!0},lr=t=>{let e=t.state.field(Kt,!1);return!e||!e.panel?!1:(t.dispatch({effects:Ai.of(!1)}),!0)},ys=t=>{let e=t.state.field(Kt,!1);if(!e)return!1;let s=t.state.selection.main,r=e.diagnostics.iter(s.to+1);return!r.value&&(r=e.diagnostics.iter(0),!r.value||r.from==s.from&&r.to==s.to)?!1:(t.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)},to=t=>{let{state:e}=t,s=e.field(Kt,!1);if(!s)return!1;let r=e.selection.main,c,m,C,M;return s.diagnostics.between(0,e.doc.length,(F,te)=>{te<r.to&&(c==null||c<F)&&(c=F,m=te),(C==null||F>C)&&(C=F,M=te)}),C==null||c==null&&C==r.from?!1:(t.dispatch({selection:{anchor:c!=null?c:C,head:m!=null?m:M},scrollIntoView:!0}),!0)},xs=[{key:"Mod-Shift-m",run:gs,preventDefault:!0},{key:"F8",run:ys}],ar=null;function no(t,e,s){let r=[],c=-1;for(let m of t)m.then(C=>{r.push(C),clearTimeout(c),r.length==t.length?e(r):c=setTimeout(()=>e(r),200)},s)}const Nn=L.r$.define({combine(t){return Object.assign({sources:t.map(e=>e.source).filter(e=>e!=null)},(0,L.BO)(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,s)=>e?s?r=>e(r)||s(r):e:s}))}});function io(t,e={}){return[Nn.of({source:t,config:e}),ar,mr]}function ro(t){let e=t.plugin(ar);e&&e.force()}function cr(t){let e=[];if(t)e:for(let{name:s}of t){for(let r=0;r<s.length;r++){let c=s[r];if(/[a-zA-Z]/.test(c)&&!e.some(m=>m.toLowerCase()==c.toLowerCase())){e.push(c);continue e}}e.push("")}return e}function hr(t,e,s){var r;let c=s?cr(e.actions):[];return wt("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},wt("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(t):e.message),(r=e.actions)===null||r===void 0?void 0:r.map((m,C)=>{let M=!1,F=Ae=>{if(Ae.preventDefault(),M)return;M=!0;let Ke=Rn(t.state.field(Kt).diagnostics,e);Ke&&m.apply(t,Ke.from,Ke.to)},{name:te}=m,ee=c[C]?te.indexOf(c[C]):-1,fe=ee<0?te:[te.slice(0,ee),wt("u",te.slice(ee,ee+1)),te.slice(ee+1)];return wt("button",{type:"button",class:"cm-diagnosticAction",onclick:F,onmousedown:F,"aria-label":` Action: ${te}${ee<0?"":` (access key "${c[C]})"`}.`},fe)}),e.source&&wt("div",{class:"cm-diagnosticSource"},e.source))}class vs extends G.l9{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return wt("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class fr{constructor(e,s){this.diagnostic=s,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=hr(e,s,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class zn{constructor(e){this.view=e,this.items=[];let s=c=>{if(c.keyCode==27)lr(this.view),this.view.focus();else if(c.keyCode==38||c.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(c.keyCode==40||c.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(c.keyCode==36)this.moveSelection(0);else if(c.keyCode==35)this.moveSelection(this.items.length-1);else if(c.keyCode==13)this.view.focus();else if(c.keyCode>=65&&c.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:m}=this.items[this.selectedIndex],C=cr(m.actions);for(let M=0;M<C.length;M++)if(C[M].toUpperCase().charCodeAt(0)==c.keyCode){let F=Rn(this.view.state.field(Kt).diagnostics,m);F&&m.actions[M].apply(e,F.from,F.to)}}else return;c.preventDefault()},r=c=>{for(let m=0;m<this.items.length;m++)this.items[m].dom.contains(c.target)&&this.moveSelection(m)};this.list=wt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:s,onclick:r}),this.dom=wt("div",{class:"cm-panel-lint"},this.list,wt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>lr(this.view)},"\xD7")),this.update()}get selectedIndex(){let e=this.view.state.field(Kt).selected;if(!e)return-1;for(let s=0;s<this.items.length;s++)if(this.items[s].diagnostic==e.diagnostic)return s;return-1}update(){let{diagnostics:e,selected:s}=this.view.state.field(Kt),r=0,c=!1,m=null,C=new Set;for(e.between(0,this.view.state.doc.length,(M,F,{spec:te})=>{for(let ee of te.diagnostics){if(C.has(ee))continue;C.add(ee);let fe=-1,Ae;for(let Ke=r;Ke<this.items.length;Ke++)if(this.items[Ke].diagnostic==ee){fe=Ke;break}fe<0?(Ae=new fr(this.view,ee),this.items.splice(r,0,Ae),c=!0):(Ae=this.items[fe],fe>r&&(this.items.splice(r,fe-r),c=!0)),s&&Ae.diagnostic==s.diagnostic?Ae.dom.hasAttribute("aria-selected")||(Ae.dom.setAttribute("aria-selected","true"),m=Ae):Ae.dom.hasAttribute("aria-selected")&&Ae.dom.removeAttribute("aria-selected"),r++}});r<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)c=!0,this.items.pop();this.items.length==0&&(this.items.push(new fr(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),c=!0),m?(this.list.setAttribute("aria-activedescendant",m.id),this.view.requestMeasure({key:this,read:()=>({sel:m.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:M,panel:F})=>{let te=F.height/this.list.offsetHeight;M.top<F.top?this.list.scrollTop-=(F.top-M.top)/te:M.bottom>F.bottom&&(this.list.scrollTop+=(M.bottom-F.bottom)/te)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),c&&this.sync()}sync(){let e=this.list.firstChild;function s(){let r=e;e=r.nextSibling,r.remove()}for(let r of this.items)if(r.dom.parentNode==this.list){for(;e!=r.dom;)s();e=r.dom.nextSibling}else this.list.insertBefore(r.dom,e);for(;e;)s()}moveSelection(e){if(this.selectedIndex<0)return;let s=this.view.state.field(Kt),r=Rn(s.diagnostics,this.items[e].diagnostic);r&&this.view.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:sr.of(r)})}static open(e){return new zn(e)}}function ii(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function ri(t){return ii(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const ks=G.tk.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:ri("#d11")},".cm-lintRange-warning":{backgroundImage:ri("orange")},".cm-lintRange-info":{backgroundImage:ri("#999")},".cm-lintRange-hint":{backgroundImage:ri("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function bs(t){return t=="error"?4:t=="warning"?3:t=="info"?2:1}function ur(t){let e="hint",s=1;for(let r of t){let c=bs(r.severity);c>s&&(s=c,e=r.severity)}return e}class dr extends G.SJ{constructor(e){super(),this.diagnostics=e,this.severity=ur(e)}toDOM(e){let s=document.createElement("div");s.className="cm-lint-marker cm-lint-marker-"+this.severity;let r=this.diagnostics,c=e.state.facet(si).tooltipFilter;return c&&(r=c(r,e.state)),r.length&&(s.onmouseover=()=>Ss(e,s,r)),s}}function ws(t,e){let s=r=>{let c=e.getBoundingClientRect();if(!(r.clientX>c.left-10&&r.clientX<c.right+10&&r.clientY>c.top-10&&r.clientY<c.bottom+10)){for(let m=r.target;m;m=m.parentNode)if(m.nodeType==1&&m.classList.contains("cm-tooltip-lint"))return;window.removeEventListener("mousemove",s),t.state.field(pr)&&t.dispatch({effects:Ii.of(null)})}};window.addEventListener("mousemove",s)}function Ss(t,e,s){function r(){let C=t.elementAtHeight(e.getBoundingClientRect().top+5-t.documentTop);t.coordsAtPos(C.from)&&t.dispatch({effects:Ii.of({pos:C.from,above:!1,clip:!1,create(){return{dom:or(t,s),getCoords:()=>e.getBoundingClientRect()}}})}),e.onmouseout=e.onmousemove=null,ws(t,e)}let{hoverTime:c}=t.state.facet(si),m=setTimeout(r,c);e.onmouseout=()=>{clearTimeout(m),e.onmouseout=e.onmousemove=null},e.onmousemove=()=>{clearTimeout(m),m=setTimeout(r,c)}}function Cs(t,e){let s=Object.create(null);for(let c of e){let m=t.lineAt(c.from);(s[m.from]||(s[m.from]=[])).push(c)}let r=[];for(let c in s)r.push(new dr(s[c]).range(+c));return L.Xs.of(r,!0)}const As=(0,G.v5)({class:"cm-gutter-lint",markers:t=>t.state.field(Ti),widgetMarker:(t,e,s)=>{let r=[];return t.state.field(Ti).between(s.from,s.to,(c,m,C)=>{c>s.from&&c<s.to&&r.push(...C.diagnostics)}),r.length?new dr(r):null}}),Ti=L.QQ.define({create(){return L.Xs.empty},update(t,e){t=t.map(e.changes);let s=e.state.facet(si).markerFilter;for(let r of e.effects)if(r.is(ni)){let c=r.value;s&&(c=s(c||[],e.state)),t=Cs(e.state.doc,c.slice(0))}return t}}),Ii=L.Py.define(),pr=L.QQ.define({create(){return null},update(t,e){return t&&e.docChanged&&(t=ir(e,t)?null:Object.assign(Object.assign({},t),{pos:e.changes.mapPos(t.pos)})),e.effects.reduce((s,r)=>r.is(Ii)?r.value:s,t)},provide:t=>G.hJ.from(t)}),Ts=G.tk.baseTheme({".cm-gutter-lint":{width:"1.4em","& .cm-gutterElement":{padding:".2em"}},".cm-lint-marker":{width:"1em",height:"1em"},".cm-lint-marker-info":{content:ii('<path fill="#aaf" stroke="#77e" stroke-width="6" stroke-linejoin="round" d="M5 5L35 5L35 35L5 35Z"/>')},".cm-lint-marker-warning":{content:ii('<path fill="#fe8" stroke="#fd7" stroke-width="6" stroke-linejoin="round" d="M20 6L37 35L3 35Z"/>')},".cm-lint-marker-error":{content:ii('<circle cx="20" cy="20" r="15" fill="#f87" stroke="#f43" stroke-width="6"/>')}}),mr=[Kt,G.tk.decorations.compute([Kt],t=>{let{selected:e,panel:s}=t.field(Kt);return!e||!s||e.from==e.to?G.p.none:G.p.set([ps.range(e.from,e.to)])}),(0,G.bF)(ms,{hideOn:ir}),ks],si=L.r$.define({combine(t){return(0,L.BO)(t,{hoverTime:300,markerFilter:null,tooltipFilter:null})}});function so(t={}){return[si.of(t),Ti,As,Ts,pr]}function oo(t,e){let s=t.field(Kt,!1);if(s&&s.diagnostics.size){let r=[],c=[],m=-1;for(let C=RangeSet.iter([s.diagnostics]);;C.next()){for(let M=0;M<r.length;M++)(!C.value||C.value.spec.diagnostics.indexOf(r[M])<0)&&(e(r[M],c[M],m),r.splice(M,1),c.splice(M--,1));if(!C.value)break;for(let M of C.value.spec.diagnostics)r.indexOf(M)<0&&(r.push(M),c.push(C.from));m=C.to}}}var gr=function(e){e===void 0&&(e={});var{crosshairCursor:s=!1}=e,r=[];e.closeBracketsKeymap!==!1&&(r=r.concat(ti.GA)),e.defaultKeymap!==!1&&(r=r.concat(Jr)),e.searchKeymap!==!1&&(r=r.concat(fs)),e.historyKeymap!==!1&&(r=r.concat(p)),e.foldKeymap!==!1&&(r=r.concat(ve.e7)),e.completionKeymap!==!1&&(r=r.concat(ti.B1)),e.lintKeymap!==!1&&(r=r.concat(xs));var c=[];return e.lineNumbers!==!1&&c.push((0,G.Eu)()),e.highlightActiveLineGutter!==!1&&c.push((0,G.HQ)()),e.highlightSpecialChars!==!1&&c.push((0,G.AE)()),e.history!==!1&&c.push(vt()),e.foldGutter!==!1&&c.push((0,ve.mi)()),e.drawSelection!==!1&&c.push((0,G.Uw)()),e.dropCursor!==!1&&c.push((0,G.qr)()),e.allowMultipleSelections!==!1&&c.push(L.yy.allowMultipleSelections.of(!0)),e.indentOnInput!==!1&&c.push((0,ve.nY)()),e.syntaxHighlighting!==!1&&c.push((0,ve.nF)(ve.R_,{fallback:!0})),e.bracketMatching!==!1&&c.push((0,ve.n$)()),e.closeBrackets!==!1&&c.push((0,ti.vQ)()),e.autocompletion!==!1&&c.push((0,ti.ys)()),e.rectangularSelection!==!1&&c.push((0,G.Zs)()),s!==!1&&c.push((0,G.S2)()),e.highlightActiveLine!==!1&&c.push((0,G.ZO)()),e.highlightSelectionMatches!==!1&&c.push(Hr()),e.tabSize&&typeof e.tabSize=="number"&&c.push(ve.c.of(" ".repeat(e.tabSize))),c.concat([G.$f.of(r.flat())]).filter(Boolean)},lo=function(e){e===void 0&&(e={});var s=[];e.defaultKeymap!==!1&&(s=s.concat(defaultKeymap)),e.historyKeymap!==!1&&(s=s.concat(historyKeymap));var r=[];return e.highlightSpecialChars!==!1&&r.push(highlightSpecialChars()),e.history!==!1&&r.push(history()),e.drawSelection!==!1&&r.push(drawSelection()),e.syntaxHighlighting!==!1&&r.push(syntaxHighlighting(defaultHighlightStyle,{fallback:!0})),r.concat([keymap.of(s.flat())]).filter(Boolean)},Re=ie(35524);const yr="#e5c07b",Pi="#e06c75",xr="#56b6c2",vr="#ffffff",Un="#abb2bf",oi="#7d8799",kr="#61afef",br="#98c379",Mi="#d19a66",wr="#c678dd",Sr="#21252b",Oi="#2c313a",Ei="#282c34",li="#353a42",Cr="#3E4451",Bi="#528bff",ao={chalky:yr,coral:Pi,cyan:xr,invalid:vr,ivory:Un,stone:oi,malibu:kr,sage:br,whiskey:Mi,violet:wr,darkBackground:Sr,highlightBackground:Oi,background:Ei,tooltipBackground:li,selection:Cr,cursor:Bi},Is=G.tk.theme({"&":{color:Un,backgroundColor:Ei},".cm-content":{caretColor:Bi},".cm-cursor, .cm-dropCursor":{borderLeftColor:Bi},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:Cr},".cm-panels":{backgroundColor:Sr,color:Un},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:Ei,color:oi,border:"none"},".cm-activeLineGutter":{backgroundColor:Oi},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:li},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:li,borderBottomColor:li},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:Oi,color:Un}}},{dark:!0}),Ps=ve.Qf.define([{tag:Re.pJ.keyword,color:wr},{tag:[Re.pJ.name,Re.pJ.deleted,Re.pJ.character,Re.pJ.propertyName,Re.pJ.macroName],color:Pi},{tag:[Re.pJ.function(Re.pJ.variableName),Re.pJ.labelName],color:kr},{tag:[Re.pJ.color,Re.pJ.constant(Re.pJ.name),Re.pJ.standard(Re.pJ.name)],color:Mi},{tag:[Re.pJ.definition(Re.pJ.name),Re.pJ.separator],color:Un},{tag:[Re.pJ.typeName,Re.pJ.className,Re.pJ.number,Re.pJ.changed,Re.pJ.annotation,Re.pJ.modifier,Re.pJ.self,Re.pJ.namespace],color:yr},{tag:[Re.pJ.operator,Re.pJ.operatorKeyword,Re.pJ.url,Re.pJ.escape,Re.pJ.regexp,Re.pJ.link,Re.pJ.special(Re.pJ.string)],color:xr},{tag:[Re.pJ.meta,Re.pJ.comment],color:oi},{tag:Re.pJ.strong,fontWeight:"bold"},{tag:Re.pJ.emphasis,fontStyle:"italic"},{tag:Re.pJ.strikethrough,textDecoration:"line-through"},{tag:Re.pJ.link,color:oi,textDecoration:"underline"},{tag:Re.pJ.heading,fontWeight:"bold",color:Pi},{tag:[Re.pJ.atom,Re.pJ.bool,Re.pJ.special(Re.pJ.variableName)],color:Mi},{tag:[Re.pJ.processingInstruction,Re.pJ.string,Re.pJ.inserted],color:br},{tag:Re.pJ.invalid,color:vr}]),Ms=[Is,(0,ve.nF)(Ps)];var Os=G.tk.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),Es=function(e){e===void 0&&(e={});var{indentWithTab:s=!0,editable:r=!0,readOnly:c=!1,theme:m="light",placeholder:C="",basicSetup:M=!0}=e,F=[];switch(s&&F.unshift(G.$f.of([$r])),M&&(typeof M=="boolean"?F.unshift(gr()):F.unshift(gr(M))),C&&F.unshift((0,G.W$)(C)),m){case"light":F.push(Os);break;case"dark":F.push(Ms);break;case"none":break;default:F.push(m);break}return r===!1&&F.push(G.tk.editable.of(!1)),c&&F.push(L.yy.readOnly.of(!0)),[...F]},Bs=t=>({line:t.state.doc.lineAt(t.state.selection.main.from),lineCount:t.state.doc.lines,lineBreak:t.state.lineBreak,length:t.state.doc.length,readOnly:t.state.readOnly,tabSize:t.state.tabSize,selection:t.state.selection,selectionAsSingle:t.state.selection.asSingle().main,ranges:t.state.selection.ranges,selectionCode:t.state.sliceDoc(t.state.selection.main.from,t.state.selection.main.to),selections:t.state.selection.ranges.map(e=>t.state.sliceDoc(e.from,e.to)),selectedText:t.state.selection.ranges.some(e=>!e.empty)});class Ds{constructor(e,s){this.timeLeftMS=void 0,this.timeoutMS=void 0,this.isCancelled=!1,this.isTimeExhausted=!1,this.callbacks=[],this.timeLeftMS=s,this.timeoutMS=s,this.callbacks.push(e)}tick(){if(!this.isCancelled&&!this.isTimeExhausted&&(this.timeLeftMS--,this.timeLeftMS<=0)){this.isTimeExhausted=!0;var e=this.callbacks.slice();this.callbacks.length=0,e.forEach(s=>{try{s()}catch(r){console.error("TimeoutLatch callback error:",r)}})}}cancel(){this.isCancelled=!0,this.callbacks.length=0}reset(){this.timeLeftMS=this.timeoutMS,this.isCancelled=!1,this.isTimeExhausted=!1}get isDone(){return this.isCancelled||this.isTimeExhausted}}class Ar{constructor(){this.interval=null,this.latches=new Set}add(e){this.latches.add(e),this.start()}remove(e){this.latches.delete(e),this.latches.size===0&&this.stop()}start(){this.interval===null&&(this.interval=setInterval(()=>{this.latches.forEach(e=>{e.tick(),e.isDone&&this.remove(e)})},1))}stop(){this.interval!==null&&(clearInterval(this.interval),this.interval=null)}}var Di=null,Ls=()=>typeof window=="undefined"?new Ar:(Di||(Di=new Ar),Di),Tr=L.q6.define(),Rs=200,Ns=[];function Fs(t){var{value:e,selection:s,onChange:r,onStatistics:c,onCreateEditor:m,onUpdate:C,extensions:M=Ns,autoFocus:F,theme:te="light",height:ee=null,minHeight:fe=null,maxHeight:Ae=null,width:Ke=null,minWidth:Pt=null,maxWidth:it=null,placeholder:Gt="",editable:Tn=!0,readOnly:ai=!1,indentWithTab:ci=!0,basicSetup:hi=!0,root:Li,initialState:Vn}=t,[Fn,fi]=(0,q.useState)(),[Wt,bn]=(0,q.useState)(),[Wn,jn]=(0,q.useState)(),sn=(0,q.useState)(()=>({current:null}))[0],In=(0,q.useState)(()=>({current:null}))[0],Ri=G.tk.theme({"&":{height:ee,minHeight:fe,maxHeight:Ae,width:Ke,minWidth:Pt,maxWidth:it},"& .cm-scroller":{height:"100% !important"}}),Ni=G.tk.updateListener.of(dn=>{if(dn.docChanged&&typeof r=="function"&&!dn.transactions.some(Fi=>Fi.annotation(Tr))){sn.current?sn.current.reset():(sn.current=new Ds(()=>{if(In.current){var Fi=In.current;In.current=null,Fi()}sn.current=null},Rs),Ls().add(sn.current));var Pn=dn.state.doc,Mn=Pn.toString();r(Mn,dn)}c&&c(Bs(dn))}),ui=Es({theme:te,editable:Tn,readOnly:ai,placeholder:Gt,indentWithTab:ci,basicSetup:hi}),Hn=[Ni,Ri,...ui];return C&&typeof C=="function"&&Hn.push(G.tk.updateListener.of(C)),Hn=Hn.concat(M),(0,q.useLayoutEffect)(()=>{if(Fn&&!Wn){var dn={doc:e,selection:s,extensions:Hn},Pn=Vn?L.yy.fromJSON(Vn.json,dn,Vn.fields):L.yy.create(dn);if(jn(Pn),!Wt){var Mn=new G.tk({state:Pn,parent:Fn,root:Li});bn(Mn),m&&m(Mn,Pn)}}return()=>{Wt&&(jn(void 0),bn(void 0))}},[Fn,Wn]),(0,q.useEffect)(()=>{t.container&&fi(t.container)},[t.container]),(0,q.useEffect)(()=>()=>{Wt&&(Wt.destroy(),bn(void 0)),sn.current&&(sn.current.cancel(),sn.current=null)},[Wt]),(0,q.useEffect)(()=>{F&&Wt&&Wt.focus()},[F,Wt]),(0,q.useEffect)(()=>{Wt&&Wt.dispatch({effects:L.Py.reconfigure.of(Hn)})},[te,M,ee,fe,Ae,Ke,Pt,it,Gt,Tn,ai,ci,hi,r,C]),(0,q.useEffect)(()=>{if(e!==void 0){var dn=Wt?Wt.state.doc.toString():"";if(Wt&&e!==dn){var Pn=sn.current&&!sn.current.isDone,Mn=()=>{Wt&&e!==Wt.state.doc.toString()&&Wt.dispatch({changes:{from:0,to:Wt.state.doc.toString().length,insert:e||""},annotations:[Tr.of(!0)]})};Pn?In.current=Mn:Mn()}}},[e,Wt]),{state:Wn,setState:jn,view:Wt,setView:bn,container:Fn,setContainer:fi}}var Ws=ie(85893),js=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],Ir=(0,q.forwardRef)((t,e)=>{var{className:s,value:r="",selection:c,extensions:m=[],onChange:C,onStatistics:M,onCreateEditor:F,onUpdate:te,autoFocus:ee,theme:fe="light",height:Ae,minHeight:Ke,maxHeight:Pt,width:it,minWidth:Gt,maxWidth:Tn,basicSetup:ai,placeholder:ci,indentWithTab:hi,editable:Li,readOnly:Vn,root:Fn,initialState:fi}=t,Wt=(0,se.Z)(t,js),bn=(0,q.useRef)(null),{state:Wn,view:jn,container:sn,setContainer:In}=Fs({root:Fn,value:r,autoFocus:ee,theme:fe,height:Ae,minHeight:Ke,maxHeight:Pt,width:it,minWidth:Gt,maxWidth:Tn,basicSetup:ai,placeholder:ci,indentWithTab:hi,editable:Li,readOnly:Vn,selection:c,onChange:C,onStatistics:M,onCreateEditor:F,onUpdate:te,extensions:m,initialState:fi});(0,q.useImperativeHandle)(e,()=>({editor:bn.current,state:Wn,view:jn}),[bn,sn,Wn,jn]);var Ri=(0,q.useCallback)(ui=>{bn.current=ui,In(ui)},[In]);if(typeof r!="string")throw new Error("value must be typeof string but got "+typeof r);var Ni=typeof fe=="string"?"cm-theme-"+fe:"cm-theme";return(0,Ws.jsx)("div",(0,_.Z)({ref:Ri,className:""+Ni+(s?" "+s:"")},Wt))});Ir.displayName="CodeMirror";var Js=Ir},28699:function(Rt,Ze,ie){ie.d(Ze,{V:function(){return G}});const _="\u037C",se=typeof Symbol=="undefined"?"__"+_:Symbol.for(_),q=typeof Symbol=="undefined"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),L=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:{};class G{constructor(Ee,ue){this.rules=[];let{finish:ge}=ue||{};function Ne(he){return/^@/.test(he)?[he]:he.split(/,\s*/)}function Se(he,Be,Te,Z){let Me=[],rt=/^@(\w+)\b/.exec(he[0]),st=rt&&rt[1]=="keyframes";if(rt&&Be==null)return Te.push(he[0]+";");for(let Ue in Be){let We=Be[Ue];if(/&/.test(Ue))Se(Ue.split(/,\s*/).map(xt=>he.map(dt=>xt.replace(/&/,dt))).reduce((xt,dt)=>xt.concat(dt)),We,Te);else if(We&&typeof We=="object"){if(!rt)throw new RangeError("The value of a property ("+Ue+") should be a primitive value.");Se(Ne(Ue),We,Me,st)}else We!=null&&Me.push(Ue.replace(/_.*/,"").replace(/[A-Z]/g,xt=>"-"+xt.toLowerCase())+": "+We+";")}(Me.length||st)&&Te.push((ge&&!rt&&!Z?he.map(ge):he).join(", ")+" {"+Me.join(" ")+"}")}for(let he in Ee)Se(Ne(he),Ee[he],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let Ee=L[se]||1;return L[se]=Ee+1,_+Ee.toString(36)}static mount(Ee,ue,ge){let Ne=Ee[q],Se=ge&&ge.nonce;Ne?Se&&Ne.setNonce(Se):Ne=new _e(Ee,Se),Ne.mount(Array.isArray(ue)?ue:[ue],Ee)}}let ve=new Map;class _e{constructor(Ee,ue){let ge=Ee.ownerDocument||Ee,Ne=ge.defaultView;if(!Ee.head&&Ee.adoptedStyleSheets&&Ne.CSSStyleSheet){let Se=ve.get(ge);if(Se)return Ee[q]=Se;this.sheet=new Ne.CSSStyleSheet,ve.set(ge,this)}else this.styleTag=ge.createElement("style"),ue&&this.styleTag.setAttribute("nonce",ue);this.modules=[],Ee[q]=this}mount(Ee,ue){let ge=this.sheet,Ne=0,Se=0;for(let he=0;he<Ee.length;he++){let Be=Ee[he],Te=this.modules.indexOf(Be);if(Te<Se&&Te>-1&&(this.modules.splice(Te,1),Se--,Te=-1),Te==-1){if(this.modules.splice(Se++,0,Be),ge)for(let Z=0;Z<Be.rules.length;Z++)ge.insertRule(Be.rules[Z],Ne++)}else{for(;Se<Te;)Ne+=this.modules[Se++].rules.length;Ne+=Be.rules.length,Se++}}if(ge)ue.adoptedStyleSheets.indexOf(this.sheet)<0&&(ue.adoptedStyleSheets=[this.sheet,...ue.adoptedStyleSheets]);else{let he="";for(let Te=0;Te<this.modules.length;Te++)he+=this.modules[Te].getRules()+`
`;this.styleTag.textContent=he;let Be=ue.head||ue;this.styleTag.parentNode!=Be&&Be.insertBefore(this.styleTag,Be.firstChild)}}setNonce(Ee){this.styleTag&&this.styleTag.getAttribute("nonce")!=Ee&&this.styleTag.setAttribute("nonce",Ee)}}},81754:function(Rt,Ze,ie){ie.d(Ze,{YG:function(){return _e},uY:function(){return se},ue:function(){return _}});for(var _={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},se={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},q=typeof navigator!="undefined"&&/Mac/.test(navigator.platform),L=typeof navigator!="undefined"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),G=0;G<10;G++)_[48+G]=_[96+G]=String(G);for(var G=1;G<=24;G++)_[G+111]="F"+G;for(var G=65;G<=90;G++)_[G]=String.fromCharCode(G+32),se[G]=String.fromCharCode(G);for(var ve in _)se.hasOwnProperty(ve)||(se[ve]=_[ve]);function _e(Qe){var Ee=q&&Qe.metaKey&&Qe.shiftKey&&!Qe.ctrlKey&&!Qe.altKey||L&&Qe.shiftKey&&Qe.key&&Qe.key.length==1||Qe.key=="Unidentified",ue=!Ee&&Qe.key||(Qe.shiftKey?se:_)[Qe.keyCode]||Qe.key||"Unidentified";return ue=="Esc"&&(ue="Escape"),ue=="Del"&&(ue="Delete"),ue=="Left"&&(ue="ArrowLeft"),ue=="Up"&&(ue="ArrowUp"),ue=="Right"&&(ue="ArrowRight"),ue=="Down"&&(ue="ArrowDown"),ue}}}]);
}());