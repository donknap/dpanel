"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1180],{14313:function(Y,P,e){e.d(P,{Z:function(){return l}});var T=e(87462),a=e(67294),W={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37z"}}]},name:"caret-right",theme:"outlined"},E=W,h=e(84089),M=function(D,i){return a.createElement(h.Z,(0,T.Z)({},D,{ref:i,icon:E}))},A=a.forwardRef(M),l=A},8751:function(Y,P,e){e.d(P,{Z:function(){return l}});var T=e(87462),a=e(67294),W={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"},E=W,h=e(84089),M=function(D,i){return a.createElement(h.Z,(0,T.Z)({},D,{ref:i,icon:E}))},A=a.forwardRef(M),l=A},3089:function(Y,P,e){e.d(P,{Z:function(){return l}});var T=e(87462),a=e(67294),W={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"minus-circle",theme:"outlined"},E=W,h=e(84089),M=function(D,i){return a.createElement(h.Z,(0,T.Z)({},D,{ref:i,icon:E}))},A=a.forwardRef(M),l=A},30159:function(Y,P,e){e.d(P,{Z:function(){return l}});var T=e(87462),a=e(67294),W={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372zm-88-532h-48c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8zm224 0h-48c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8z"}}]},name:"pause-circle",theme:"outlined"},E=W,h=e(84089),M=function(D,i){return a.createElement(h.Z,(0,T.Z)({},D,{ref:i,icon:E}))},A=a.forwardRef(M),l=A},87740:function(Y,P,e){e.d(P,{Z:function(){return l}});var T=e(87462),a=e(67294),W={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"},E=W,h=e(84089),M=function(D,i){return a.createElement(h.Z,(0,T.Z)({},D,{ref:i,icon:E}))},A=a.forwardRef(M),l=A},98165:function(Y,P,e){e.d(P,{Z:function(){return l}});var T=e(87462),a=e(67294),W={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"},E=W,h=e(84089),M=function(D,i){return a.createElement(h.Z,(0,T.Z)({},D,{ref:i,icon:E}))},A=a.forwardRef(M),l=A},94359:function(Y,P,e){e.d(P,{Z:function(){return x}});var T=e(5574),a=e.n(T),W=e(3089),E=e(98165),h=e(18429),M=e(8751),A=e(66212),l=e(14313),N=e(30159),D=e(87740),i=e(50888),c=e(66309),b=e(83062),m=e(36146),r=e(85893);function x(F){var y,s,f=new m.Uo("components.containerStatus"),K=F.status.split("."),t=a()(K,2),C=t[0],n=t[1],d="";d=f.format(F.status,(y=F.statusValue)!==null&&y!==void 0?y:{});var _=(0,r.jsx)(r.Fragment,{});return n=="0"&&(_=(0,r.jsx)(c.Z,{icon:(0,r.jsx)(W.Z,{}),color:"default",children:d})),n=="10"&&(_=(0,r.jsx)(c.Z,{icon:(0,r.jsx)(E.Z,{spin:!0}),color:"processing",children:d})),n=="20"&&(_=(0,r.jsx)(c.Z,{icon:(0,r.jsx)(h.Z,{}),color:"error",children:d})),n=="30"&&(_=(0,r.jsx)(c.Z,{icon:(0,r.jsx)(M.Z,{}),color:"success",children:d})),n=="new"&&(_=(0,r.jsx)(c.Z,{icon:(0,r.jsx)(A.Z,{}),children:d})),(n=="running"||n=="healthy"||n=="active"||n=="ready")&&(_=(0,r.jsx)(c.Z,{icon:(0,r.jsx)(l.Z,{}),color:"success",children:d})),(n=="paused"||n=="pause"||n=="rollback_paused")&&(_=(0,r.jsx)(c.Z,{icon:(0,r.jsx)(N.Z,{}),color:"warning",children:d})),(n=="waiting"||n=="starting"||n=="accepted")&&(_=(0,r.jsx)(c.Z,{icon:(0,r.jsx)(D.Z,{}),children:d})),["deploying","pending","allocated","accepted","assigned","preparing","updating","rollback_started"].includes(n)&&(_=(0,r.jsx)(c.Z,{icon:(0,r.jsx)(i.Z,{}),color:"processing",children:d})),(n=="error"||n=="down"||n=="failed")&&(_=(0,r.jsx)(c.Z,{icon:(0,r.jsx)(h.Z,{}),color:"error",children:d})),["complete","completed","rollback_completed"].includes(n)&&(_=(0,r.jsx)(c.Z,{icon:(0,r.jsx)(M.Z,{}),color:"success",children:d})),["exited","dead","removing","restarting","unhealthy","created","drain","unreachable","shutdown","rejected","remove","orphaned"].includes(n)&&(_=(0,r.jsx)(c.Z,{icon:(0,r.jsx)(h.Z,{}),color:"warning",children:d})),(0,r.jsx)(b.Z,{placement:"top",title:(s=F.tip)!==null&&s!==void 0?s:"",children:_})}},44349:function(Y,P,e){var T=e(97857),a=e.n(T),W=e(15009),E=e.n(W),h=e(99289),M=e.n(h),A=e(74763),l=e(17186),N=e(5966),D=e(86250),i=e(67294),c=e(85893),b=(0,i.forwardRef)(function(m,r){var x=(0,i.useRef)();(0,i.useImperativeHandle)(r,function(){return{addItem:function(y){function s(f,K,t){return y.apply(this,arguments)}return s.toString=function(){return y.toString()},s}(function(y,s,f){var K,t=(K=x.current)===null||K===void 0?void 0:K.getList(),C;if(t==null||t.forEach(function(_,J){_[y]==s[y]&&(C=J)}),!(0,A.k)(C)&&f){var n;(n=x.current)===null||n===void 0||n.remove(C),C=void 0}if(!C){var d;(d=x.current)===null||d===void 0||d.add(s)}}),removeItemByKey:function(s,f){return M()(E()().mark(function K(){var t,C;return E()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return C=(t=x.current)===null||t===void 0?void 0:t.getList(),C==null||C.forEach(function(_,J){if(_[s]==f){var Q;(Q=x.current)===null||Q===void 0||Q.remove(J);return}}),d.abrupt("return");case 3:case"end":return d.stop()}},K)}))()},clear:function(s){if(!s){var f;s=(f=x.current)===null||f===void 0||(f=f.getList())===null||f===void 0?void 0:f.map(function(t,C){return C})}if(s){var K;(K=x.current)===null||K===void 0||K.remove(s)}},getList:function(){var s;return(s=x.current)===null||s===void 0?void 0:s.getList()}}});var F={};return m.hideCopyButton===!0&&(F.copyIconProps=!1),m.hideDeleteButton===!0&&(F.deleteIconProps=!1),(0,c.jsx)(l.u,a()(a()({initialValue:m.initialValue,label:m.label,name:m.name,actionRef:x,creatorButtonProps:m.showAddButton?{creatorButtonText:m.label?m.label:m.showAddButtonLabel?m.showAddButtonLabel:m.name}:!1,min:m.min?m.min:0},F),{},{children:function(s,f,K){return(0,c.jsx)(D.Z,{justify:m.justify,gap:m.gap,children:m.items.map(function(t){return t.render?(0,c.jsx)("div",{children:t.render&&t.render(s,f,K)},"".concat(m.name,"-").concat(t.name,"-").concat(s.key)):(0,c.jsx)(N.Z,{width:t.width,name:t.name,label:t.label,required:t.required,rules:[{required:t.required}],disabled:t.disabled,placeholder:t.placeholder},"".concat(m.name,"-").concat(t.name,"-").concat(s.key))})})}}))});P.Z=b},36435:function(Y,P,e){var T=e(15009),a=e.n(T),W=e(64599),E=e.n(W),h=e(99289),M=e.n(h),A=e(9783),l=e.n(A),N=e(5574),D=e.n(N),i=e(67294),c=e(184),b=e(38345),m=e(97269),r=e(97321),x=e(97462),F=e(64317),y=e(5966),s=e(86615),f=e(68602),K=e(83622),t=e(83403),C=e(24963),n=e(1699),d=e(29177),_=e(1883),J=e(43425),Q=e(44349),q=e(3616),k=e(36146),R=e(85893),ee=(0,i.forwardRef)(function($,ne){var te=(0,i.useState)(!1),z=D()(te,2),I=z[0],O=z[1],u=(0,i.useRef)(),X=(0,i.useContext)(C.Z),S=X.message,U=(0,i.useState)([]),o=D()(U,2),w=o[0],ae=o[1],V=new k.Uo("components.permissionButton"),re=l()(l()(l()(l()(l()({},t.W6.CONTAINER,"Id"),t.W6.APPSTORE,"name"),t.W6.COMPOSE,"name"),t.W6.REGISTRY,"serverAddress"),t.W6.DOCKER_ENV,"name"),oe=l()(l()(l()(l()(l()({},t.W6.CONTAINER,"name"),t.W6.APPSTORE,"name"),t.W6.COMPOSE,"name"),t.W6.REGISTRY,"title"),t.W6.DOCKER_ENV,"title"),se=re[$.type],le=oe[$.type],ie=$.selected.map(function(p){return p[re[$.type]]});return i.useEffect(function(){if(I){if(!$.selected||$.selected.length==0){S.error(k.FD.format("title.noDataSelect")),O(!1);return}(0,f.dP)({permission:{uri:$.type,key:se,value:ie}}).then(function(p){var v;(v=u.current)===null||v===void 0||v.setFieldValue("list",Object.keys(p.data.list).map(function(j){return{name:j,type:p.data.list[j].type,users:p.data.list[j].users}}))}),(0,f.lE)().then(function(p){var v,j=(v=p.data)===null||v===void 0||(v=v.list)===null||v===void 0?void 0:v.map(function(g){return{label:g.username,value:g.username}});ae(j)})}},[I]),(0,R.jsx)(n.u,{access:["canSeeEnableEe","canSeeFounder","canSeeManage"],children:(0,R.jsxs)(c.a,{name:"create",title:V.format("drawerTitle"),open:I,onOpenChange:function(v){if(!v){var j;(j=u.current)===null||j===void 0||j.resetFields()}O(v)},drawerProps:{forceRender:!0,width:q.R_},formRef:u,trigger:(0,R.jsx)(K.ZP,{icon:(0,R.jsx)(d.Z,{}),children:V.format("drawerTriggerButton")}),onFinish:function(){var p=M()(a()().mark(function v(j){var g,Z,B;return a()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:g=E()(j.list),L.prev=1,g.s();case 3:if((Z=g.n()).done){L.next=9;break}return B=Z.value,L.next=7,(0,f.Db)({usernames:B.users,permissionType:B.type,permission:{uri:$.type,key:se,showKey:le,value:[B.name]}});case 7:L.next=3;break;case 9:L.next=14;break;case 11:L.prev=11,L.t0=L.catch(1),g.e(L.t0);case 14:return L.prev=14,g.f(),L.finish(14);case 17:S.success(k.FD.format("finish")),O(!1),$.onSuccess();case 20:case"end":return L.stop()}},v,null,[[1,11,14,17]])}));return function(v){return p.apply(this,arguments)}}(),children:[(0,R.jsxs)(b.Z,{ghost:!0,title:(0,R.jsx)(_.Z,{}),subTitle:V.format("batchTitle"),children:[(0,R.jsx)(m.A.Item,{name:"type",style:{marginBottom:0},children:(0,R.jsx)(r.Z.Group,{defaultValue:"admin",onChange:function(v){var j,g,Z=(j=u.current)===null||j===void 0?void 0:j.getFieldValue("list");Z.forEach(function(B){B.type=v,B.users=[]}),(g=u.current)===null||g===void 0||g.setFieldValue("list",Z)},children:["admin","restricted","public"].map(function(p){return(0,R.jsx)(r.Z,{style:{width:240},title:V.format("dataTypeOption.".concat(p)),description:V.format("dataTypeDescOption.".concat(p)),value:p},p)})})}),(0,R.jsx)(x.Z,{name:["type"],children:function(v){var j=v.type;if(j==="restricted")return(0,R.jsx)(F.Z,{mode:"multiple",name:"usernames",label:V.format("formUsernames"),onChange:function(Z){var B,G,L=(B=u.current)===null||B===void 0?void 0:B.getFieldValue("list");L.forEach(function(H){H.users=Z}),(G=u.current)===null||G===void 0||G.setFieldValue("list",L)},rules:[{required:!0}],request:M()(a()().mark(function g(){var Z,B,G;return a()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(!(w.length>0)){H.next=2;break}return H.abrupt("return",w);case 2:return H.next=4,(0,f.lE)();case 4:return B=H.sent,G=(Z=B.data)===null||Z===void 0||(Z=Z.list)===null||Z===void 0?void 0:Z.map(function(_e){return{label:_e.username,value:_e.username}}),ae(G),H.abrupt("return",G);case 8:case"end":return H.stop()}},g)}))})}})]}),(0,R.jsx)(b.Z,{ghost:!0,title:(0,R.jsx)(J.Z,{}),subTitle:V.format("dataTitle"),children:(0,R.jsx)(Q.Z,{name:"list",hideCopyButton:!0,gap:10,items:[{name:"name",label:V.format("dataName"),render:function(v,j,g){var Z=g.getCurrentRowData();return(0,R.jsx)(y.Z,{disabled:!0,label:V.format("dataName"),width:"sm",name:"name"})}},{name:"type",label:V.format("dataType"),render:function(v,j,g){var Z=g.getCurrentRowData();return(0,R.jsx)(s.Z.Group,{label:V.format("dataType"),name:"type",radioType:"button",options:["admin","public","restricted"].map(function(B){return{label:V.format("dataTypeOption.".concat(B)),value:B}})})}},{name:"users",label:V.format("dataUsers"),render:function(v,j,g){return(0,R.jsx)(x.Z,{name:["type"],children:function(B){var G=B.type;if(G=="restricted")return(0,R.jsx)(F.Z,{width:"sm",mode:"tags",name:"users",label:V.format("dataUsers"),options:w})}})}}]})})]})})});P.Z=ee},98163:function(Y,P,e){e.r(P),e.d(P,{default:function(){return d}});var T=e(15009),a=e.n(T),W=e(99289),E=e.n(W),h=e(80821),M=e(94359),A=e(77273),l=e(36435),N=e(98510),D=e(83403),i=e(24963),c=e(87662),b=e(36146),m=e(86548),r=e(82061),x=e(74453),F=e(82346),y=e(83622),s=e(42075),f=e(96074),K=e(25593),t=e(83062),C=e(67294),n=e(85893);function d(){var _=(0,C.useRef)(),J=(0,C.useRef)(),Q=(0,F.useModel)("@@initialState"),q=Q.refresh,k=Q.initialState,R=(0,C.useContext)(i.Z),ee=R.message,$=(0,F.useLocation)(),ne=(0,F.useNavigate)(),te=new b.Uo("system.env");return(0,C.useEffect)(function(){var z=$.state;z&&(ne(".",{replace:!0}),z&&z.name&&(0,c.Kg)({enableCertContent:!0}).then(function(I){var O,u=I.data.list.find(function(X){return X.name==z.name});u&&((O=J.current)===null||O===void 0||O.edit(u))}))},[$.state]),(0,n.jsx)(x._z,{header:{extra:[(0,n.jsx)(A.Z,{trigger:(0,n.jsx)(y.ZP,{type:"primary",children:te.format("createButton")}),ref:J,onFinish:E()(a()().mark(function z(){var I,O,u;return a()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(u=$.state,!(u&&u.name)){S.next=6;break}return S.next=4,(0,c.vC)({name:u.name});case 4:return ne($.pathname,{replace:!0,state:null}),S.abrupt("return");case 6:q(),!((I=_.current)===null||I===void 0)&&I.reloadAndRest&&((O=_.current)===null||O===void 0||O.reloadAndRest());case 8:case"end":return S.stop()}},z)}))},"dockerEnvCreate")]},children:(0,n.jsx)(N.C,{rowKey:"name",columns:[{title:b.FD.format("listName"),dataIndex:"name"},{title:b.FD.format("listTitle"),dataIndex:"title"},{title:b.FD.format("listStatus"),render:function(I,O,u,X,S){var U,o;return(0,n.jsx)(M.Z,{status:"swarm.".concat((U=O.dockerStatus)!==null&&U!==void 0&&U.available?"active":"down"),tip:"".concat((o=O.dockerStatus)===null||o===void 0?void 0:o.message)})}},{title:b.FD.format("listTargetAddress"),dataIndex:"address"},{title:b.FD.format("listManage"),width:50,search:!1,render:function(I,O,u,X,S){return(0,n.jsx)(s.Z,{split:(0,n.jsx)(f.Z,{type:"vertical"}),children:(0,n.jsx)(K.Z.Link,{onClick:function(){var o;(o=J.current)===null||o===void 0||o.edit(O)},children:(0,n.jsx)(t.Z,{title:b.FD.format("listManageEdit"),children:(0,n.jsx)(m.Z,{})})},O.name)})}}],pagination:!1,request:E()(a()().mark(function z(){var I;return a()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,c.Kg)({enableCertContent:!0});case 2:return I=u.sent,u.abrupt("return",{data:I.data.list,total:I.data.list.length});case 4:case"end":return u.stop()}},z)})),search:!1,actionRef:_,quickToolbarRender:function(I){var O=I.selectedRows,u=I.finish,X=I.loading;return(0,n.jsxs)(s.Z,{size:16,children:[(0,n.jsx)(l.Z,{type:D.W6.DOCKER_ENV,selected:O,onSuccess:function(){var U,o;return!((U=_.current)===null||U===void 0)&&U.reloadAndRest&&((o=_.current)===null||o===void 0||o.reloadAndRest()),!0}},"permissionButton"),(0,n.jsx)(h.Z,{buttonProps:{danger:!0,type:"primary",icon:(0,n.jsx)(r.Z,{})},action:E()(a()().mark(function S(){return a()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!O.find(function(w){return w.default})){o.next=3;break}return ee.warning(b.FD.format("systemEnvDefaultCannotDelete")),o.abrupt("return",!1);case 3:return X(),o.abrupt("return",(0,c._g)({name:O.map(function(w){return w.name})}).finally(function(){u(!0)}));case 5:case"end":return o.stop()}},S)})),onSuccess:function(){var U,o;return!((U=_.current)===null||U===void 0)&&U.reloadAndRest&&((o=_.current)===null||o===void 0||o.reloadAndRest()),!0},onError:function(){var U,o;return!((U=_.current)===null||U===void 0)&&U.reset&&((o=_.current)===null||o===void 0||o.reset()),!0},confirmProps:{showCommonConfirm:!0},children:b.FD.format("listManageDeleteBatch")})]})}})})}}}]);
