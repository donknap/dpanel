"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4617],{81146:function(Ye,we,e){var Te=e(97857),f=e.n(Te),Me=e(15009),p=e.n(Me),_=e(99289),$=e.n(_),ye=e(67294),ve=e(97269),F=e(62370),pe=e(5966),d=e(97462),G=e(82346),Re=e(71230),re=e(15746),g=e(34041),te=e(83622),ee=e(84567),me=e(42075),z=e(80821),se=e(23430),L=e(93162),Ae=e.n(L),Ie=e(78267),R=e.n(Ie),b=e(75458),X=e.n(b),Pe=e(12323),Xe=e(4244),l=e.n(Xe),qe=e(24078),Oe=e(36146),Z=e(85893),W,fe,he,Ee={decorations:{matchBackground:"",matchBorder:"#FFFF00",activeMatchBackground:"#FFFF0066",matchOverviewRuler:"",activeMatchColorOverviewRuler:""}},Ne=(0,ye.forwardRef)(function(de,$e){var u=(0,ye.useRef)(),w=(0,G.useModel)("subscriber"),C=new Oe.Uo("components.containerLog");(0,ye.useImperativeHandle)($e,function(){return{fit:function(){W.clear(),he.fit()},start:function(){return $()(p()().mark(function A(){return p()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t({lineTotal:500});case 2:case"end":return n.stop()}},A)}))()},close:function(){w.progress.close(de.id)}}});function t(J){return ue.apply(this,arguments)}function ue(){return ue=$()(p()().mark(function J(A){return p()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:w.progress.close(de.id),W.clear(),A.download=!1,de.request(A);case 4:case"end":return n.stop()}},J)})),ue.apply(this,arguments)}return(0,ye.useEffect)(function(){return window.addEventListener("resize",function(){he.fit()}),W=new Xe.Terminal(f()(f()({},Pe.X),{},{fontSize:12,lineHeight:1.2,allowProposedApi:!0})),he=new Ie.FitAddon,fe=new b.SearchAddon({}),W.loadAddon(he),W.loadAddon(fe),W.open(document.getElementById("terminal-container-log")),he.fit(),w.addDataHandler(de.id,function(J){W.write(J.data)}),function(){W.clear(),W.reset(),w.progress.close(de.id)}},[]),(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(ve.A,{submitter:!1,layout:"horizontal",onFinish:function(A){var S;t({id:de.id,lineTotal:parseInt(A.lineTotal),showTime:(S=A.showTime)!==null&&S!==void 0?S:!1})},formRef:u,children:(0,Z.jsxs)(Re.Z,{gutter:[10,0],children:[(0,Z.jsx)(re.Z,{span:8,children:(0,Z.jsx)(F.Z,{name:"lineTotal",initialValue:"500",label:C.format("formLineTotal"),children:(0,Z.jsxs)(g.Z,{defaultValue:"500",onChange:function(A){var S;(S=u.current)===null||S===void 0||S.submit()},children:[(0,Z.jsx)(g.Z.Option,{value:"100",children:C.format("formLineTotalOption",{number:"100"})}),(0,Z.jsx)(g.Z.Option,{value:"200",children:C.format("formLineTotalOption",{number:"200"})}),(0,Z.jsx)(g.Z.Option,{value:"500",children:C.format("formLineTotalOption",{number:"500"})}),(0,Z.jsx)(g.Z.Option,{value:"1000",children:C.format("formLineTotalOption",{number:"1000"})}),(0,Z.jsx)(g.Z.Option,{value:"-1",children:C.format("formLineTotalOptionAll")})]})})}),(0,Z.jsx)(re.Z,{children:(0,Z.jsx)(te.ZP,{onClick:function(){W.clear()},children:C.format("clearButton")})}),(0,Z.jsx)(re.Z,{children:(0,Z.jsx)(F.Z,{name:"showTime",valuePropName:"checked",children:(0,Z.jsx)(ee.Z,{onChange:function(A){var S;(S=u.current)===null||S===void 0||S.submit()},children:C.format("formShowTime")})})}),(0,Z.jsx)(re.Z,{children:(0,Z.jsx)(pe.Z,{label:C.format("formKeywork"),name:"keywork",fieldProps:{onPressEnter:function(){var A;fe.findNext((A=u.current)===null||A===void 0?void 0:A.getFieldValue("keywork"),Ee)},onChange:function(A){fe.findNext(A.target.value,Ee)}},placeholder:C.format("formKeyworkEmpty")})}),(0,Z.jsx)(re.Z,{children:(0,Z.jsx)(d.Z,{name:["keywork"],children:function(A){var S=A.keywork;return(0,Z.jsxs)(me.Z,{size:10,children:[(0,Z.jsx)(te.ZP,{onClick:function(){fe.findNext(S,Ee)},children:C.format("formKeyworkNext")},"next"),(0,Z.jsx)(te.ZP,{onClick:function(){fe.findPrevious(S,Ee)},children:C.format("formKeyworkPrev")},"prev")]})}})}),(0,Z.jsx)(re.Z,{children:(0,Z.jsx)(z.Z,{buttonProps:{icon:(0,Z.jsx)(se.Z,{})},action:$()(p()().mark(function J(){var A,S,n;return p()().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:if(!de.download){ae.next=5;break}return ae.next=3,de.download({lineTotal:parseInt((A=u.current)===null||A===void 0?void 0:A.getFieldValue("lineTotal")),showTime:(S=u.current)===null||S===void 0?void 0:S.getFieldValue("showTime")});case 3:n=ae.sent,(0,L.saveAs)(n.data,n.name);case 5:case"end":return ae.stop()}},J)})),children:C.format("downloadButton")})})]})}),(0,Z.jsx)("div",{style:{marginTop:"20px",height:de.showInDrawer?"75vh":"85vh"},id:"terminal-container-log"})]})});we.Z=Ne},94359:function(Ye,we,e){e.d(we,{Z:function(){return te}});var Te=e(5574),f=e.n(Te),Me=e(3089),p=e(98165),_=e(18429),$=e(8751),ye=e(66212),ve=e(14313),F=e(30159),pe=e(87740),d=e(50888),G=e(66309),Re=e(83062),re=e(36146),g=e(85893);function te(ee){var me,z,se=new re.Uo("components.containerStatus"),L=ee.status.split("."),Ae=f()(L,2),Ie=Ae[0],R=Ae[1],b="";b=se.format(ee.status,(me=ee.statusValue)!==null&&me!==void 0?me:{});var X=(0,g.jsx)(g.Fragment,{});return R=="0"&&(X=(0,g.jsx)(G.Z,{icon:(0,g.jsx)(Me.Z,{}),color:"default",children:b})),R=="10"&&(X=(0,g.jsx)(G.Z,{icon:(0,g.jsx)(p.Z,{spin:!0}),color:"processing",children:b})),R=="20"&&(X=(0,g.jsx)(G.Z,{icon:(0,g.jsx)(_.Z,{}),color:"error",children:b})),R=="30"&&(X=(0,g.jsx)(G.Z,{icon:(0,g.jsx)($.Z,{}),color:"success",children:b})),R=="new"&&(X=(0,g.jsx)(G.Z,{icon:(0,g.jsx)(ye.Z,{}),children:b})),(R=="running"||R=="healthy"||R=="active"||R=="ready")&&(X=(0,g.jsx)(G.Z,{icon:(0,g.jsx)(ve.Z,{}),color:"success",children:b})),(R=="paused"||R=="pause"||R=="rollback_paused")&&(X=(0,g.jsx)(G.Z,{icon:(0,g.jsx)(F.Z,{}),color:"warning",children:b})),(R=="waiting"||R=="starting"||R=="accepted")&&(X=(0,g.jsx)(G.Z,{icon:(0,g.jsx)(pe.Z,{}),children:b})),["deploying","pending","allocated","accepted","assigned","preparing","updating","rollback_started"].includes(R)&&(X=(0,g.jsx)(G.Z,{icon:(0,g.jsx)(d.Z,{}),color:"processing",children:b})),(R=="error"||R=="down"||R=="failed")&&(X=(0,g.jsx)(G.Z,{icon:(0,g.jsx)(_.Z,{}),color:"error",children:b})),["complete","completed","rollback_completed"].includes(R)&&(X=(0,g.jsx)(G.Z,{icon:(0,g.jsx)($.Z,{}),color:"success",children:b})),["exited","dead","removing","restarting","unhealthy","created","drain","unreachable","shutdown","rejected","remove","orphaned"].includes(R)&&(X=(0,g.jsx)(G.Z,{icon:(0,g.jsx)(_.Z,{}),color:"warning",children:b})),(0,g.jsx)(Re.Z,{placement:"top",title:(z=ee.tip)!==null&&z!==void 0?z:"",children:X})}},98093:function(Ye,we,e){e.d(we,{Z:function(){return A}});var Te=e(15009),f=e.n(Te),Me=e(99289),p=e.n(Me),_=e(5574),$=e.n(_),ye=e(3616),ve=e(184),F=e(62370),pe=e(83622),d=e(67294),G=e(59252),Re=e(24796),re=e(93529),g=e(91058),te=e(82034),ee=e(10523),me=e(52255),z=e(38345),se=e(5966),L=e(24739),Ae=e(30291),Ie=e(92398),R=e(36146),b=e(42963),X=e(42075),Pe=e(64317),Xe=e(75870),l=e(85893);function qe(){var S=new R.Uo("components.appForm");return(0,l.jsxs)(X.Z.Compact,{children:[(0,l.jsx)(Pe.Z,{name:"imageRegistry",width:"sm",fieldProps:{popupMatchSelectWidth:!1},request:p()(f()().mark(function n(){var Ze;return f()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.next=2,(0,Xe.Ot)();case 2:return Ze=Y.sent,Y.abrupt("return",Ze.data.list.map(function(Fe){return{label:"".concat(Fe.title,"@").concat(Fe.serverAddress),value:Fe.id}}));case 4:case"end":return Y.stop()}},n)})),label:S.format("dockerImageImageName")}),(0,l.jsx)(se.Z,{label:" ",name:"imageName",required:!0,rules:[{required:!0}],width:"lg"})]})}var Oe=e(86615),Z=e(97462),W=e(31199),fe=e(86250),he=e(44349),Ee=e(24494);function Ne(){var S,n=new R.Uo("components.appForm"),Ze=(0,d.useContext)(b.Z),ae=Ze.createFormRef,Y=(0,d.useRef)();return(0,l.jsxs)(z.Z,{children:[(0,l.jsxs)(fe.Z,{gap:60,children:[(0,l.jsx)(Oe.Z.Group,{width:"md",label:n.format("createSchedulingLabel"),name:["scheduling","mode"],options:n.option("createSchedulingOption",["global","replicated"]),initialValue:"replicated",disabled:(S=ae.current)===null||S===void 0?void 0:S.getFieldValue("id")}),(0,l.jsx)(Z.Z,{name:["scheduling"],children:function(Ke){var be=Ke.scheduling;return be.mode=="replicated"&&(0,l.jsx)(W.Z,{width:"md",label:n.format("createSchedulingReplicas"),name:["scheduling","replicas"],initialValue:1})}})]}),(0,l.jsx)(Z.Z,{name:["scheduling","constraint"],children:function(Ke){var be=Ke.scheduling,Ue=Ke.constraint;return be.mode=="replicated"&&[(0,l.jsx)(Oe.Z.Group,{label:n.format("createConstraintNode"),initialValue:"all",name:["constraint","role"],options:n.option("createConstraintNodeOption",["all","manager","worker","user"])},"role"),Ue&&Ue.role=="user"&&(0,l.jsx)(Pe.Z,{name:["constraint","node"],request:p()(f()().mark(function Je(){var ke;return f()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,(0,Ee.HN)();case 2:return ke=O.sent,O.abrupt("return",ke.data.list&&ke.data.list.map(function(ne){var N;return{label:(N=ne.Description)===null||N===void 0?void 0:N.Hostname,value:ne.ID}}));case 4:case"end":return O.stop()}},Je)}))}),(0,l.jsx)(he.Z,{name:["constraint","label"],label:n.format("createConstraintLabel"),hideCopyButton:!0,showAddButton:!0,gap:10,ref:Y,items:[{label:n.format("createConstraintLabelOption.name"),name:"name",width:"md",placeholder:"node.labels.name"},{name:"operator",render:function(ke,en,O){return(0,l.jsx)(Pe.Z,{label:" ",name:"operator",valueEnum:{"==":"==","!=":"!="},initialValue:"=="})}},{label:n.format("createConstraintLabelOption.value"),name:"value",width:"md"}]},"label"),(0,l.jsx)(he.Z,{name:"placement",label:n.format("createPlacementLabel"),hideCopyButton:!0,showAddButton:!0,gap:10,items:[{name:"name",render:function(ke,en,O){return(0,l.jsx)(Pe.Z,{label:" ",name:"type",options:n.option("createPlacementOption",["spread"]),initialValue:"spread",allowClear:!1,width:"sm"})}},{label:n.format("createConstraintLabelOption.value"),name:"value",width:"md",placeholder:"node.labels.hostname"}]},"placement")]}})]})}var de=e(73396),$e=e(55730),u=e(33879);function w(){var S=new R.Uo("components.appForm");return(0,l.jsx)(z.Z,{ghost:!0,children:(0,l.jsxs)(fe.Z,{gap:30,children:[(0,l.jsx)(Pe.Z,{label:S.format("createAdvRestart"),name:["restart","name"],width:"sm",initialValue:"any",options:S.option("createAdvRestartOption",["none","on-failure","any"])}),(0,l.jsx)(Z.Z,{name:["restart"],children:function(Ze){var ae=Ze.restart;return ae=="on-failure"&&(0,l.jsx)(W.Z,{width:"sm",label:S.format("createAdvRestartMax"),name:["restart","maxAttempt"],initialValue:5})}}),(0,l.jsx)(W.Z,{width:"sm",label:S.format("createAdvRestartDelay"),tooltip:S.format("createAdvRestartDelayTip"),name:["restart","delay"],initialValue:5,fieldProps:{addonAfter:R.FD.format("unitSecond")}}),(0,l.jsx)(W.Z,{width:"sm",label:S.format("createAdvRestartWindow"),tooltip:S.format("createAdvRestartWindowTip"),name:["restart","window"],initialValue:0,fieldProps:{addonAfter:R.FD.format("unitSecond")}})]})})}function C(){var S=new R.Uo("components.appForm");return(0,l.jsxs)(z.Z,{children:[(0,l.jsxs)(fe.Z,{gap:30,children:[(0,l.jsx)(W.Z,{label:S.format("createSwarmUpdateParallelism"),name:["scheduling","update","parallelism"],initialValue:1}),(0,l.jsx)(W.Z,{label:S.format("createSwarmUpdateDelay"),name:["scheduling","update","delay"],initialValue:0,fieldProps:{addonAfter:R.FD.format("unitSecond")}})]}),(0,l.jsx)(Oe.Z.Group,{label:S.format("createSwarmUpdateFailureAction"),name:["scheduling","update","failureAction"],initialValue:"pause",options:S.option("createSwarmUpdateFailureActionOption",["pause","continue","rollback"])}),(0,l.jsx)(Oe.Z.Group,{label:S.format("createSwarmUpdateOrder"),name:["scheduling","update","order"],initialValue:"stop-first",options:S.option("createSwarmUpdateOrderOption",["stop-first","start-first"])})]})}var t=e(64412),ue=e(27323),J=(0,d.forwardRef)(function(S,n){(0,d.useImperativeHandle)(n,function(){return{edit:function(s){var o,P,i,h,m,E,T,j,c,Q,U,K,ie,oe,a,ce,q,Se,Ve,je,Le,xe,Ce,De,y,v,D,I,x,H,k,_e,We,He,rn,an={id:s.ID,siteName:(o=(P=s.Spec)===null||P===void 0?void 0:P.Name)!==null&&o!==void 0?o:"",siteTitle:((i=s.Spec)===null||i===void 0?void 0:i.Labels)&&((h=s.Spec)===null||h===void 0?void 0:h.Labels[Ee.$m]),hostname:(m=s.Spec)===null||m===void 0||(m=m.TaskTemplate)===null||m===void 0||(m=m.ContainerSpec)===null||m===void 0?void 0:m.Hostname,imageName:(E=(T=s.Spec)===null||T===void 0||(T=T.TaskTemplate)===null||T===void 0||(T=T.ContainerSpec)===null||T===void 0?void 0:T.Image)!==null&&E!==void 0?E:"",environment:(j=s.Spec)===null||j===void 0||(j=j.TaskTemplate)===null||j===void 0||(j=j.ContainerSpec)===null||j===void 0||(j=j.Env)===null||j===void 0?void 0:j.map(function(r){var M=r.split("=");return{name:M[0],value:M.slice(1).join("=")}}),volumes:(c=s.Spec)===null||c===void 0||(c=c.TaskTemplate)===null||c===void 0||(c=c.ContainerSpec)===null||c===void 0||(c=c.Mounts)===null||c===void 0?void 0:c.map(function(r){var M,V;return{dest:(M=r.Target)!==null&&M!==void 0?M:"",host:(V=r.Source)!==null&&V!==void 0?V:"",type:r.Type,permission:r.ReadOnly?"readonly":"write"}}),restartPolicy:function(r,M){return{name:(M=r.Condition)!==null&&M!==void 0?M:"any",maxAttempt:r.MaxAttempts,window:r.Window,delay:r.Delay}}(((Q=s.Spec)===null||Q===void 0||(Q=Q.TaskTemplate)===null||Q===void 0?void 0:Q.RestartPolicy)||{}),cpus:function(r){return r?r/1e9:0}((U=s.Spec)===null||U===void 0||(U=U.TaskTemplate)===null||U===void 0||(U=U.Resources)===null||U===void 0||(U=U.Limits)===null||U===void 0?void 0:U.NanoCPUs),memory:function(r){return r?r/1024/1024:0}((K=s.Spec)===null||K===void 0||(K=K.TaskTemplate)===null||K===void 0||(K=K.Resources)===null||K===void 0||(K=K.Limits)===null||K===void 0?void 0:K.MemoryBytes),workDir:{useDefault:!((ie=s.Spec)!==null&&ie!==void 0&&(ie=ie.TaskTemplate)!==null&&ie!==void 0&&(ie=ie.ContainerSpec)!==null&&ie!==void 0&&ie.Dir),default:"",value:(oe=s.Spec)===null||oe===void 0||(oe=oe.TaskTemplate)===null||oe===void 0||(oe=oe.ContainerSpec)===null||oe===void 0?void 0:oe.Dir},user:{useDefault:!((a=s.Spec)!==null&&a!==void 0&&(a=a.TaskTemplate)!==null&&a!==void 0&&(a=a.ContainerSpec)!==null&&a!==void 0&&a.User),default:"",value:(ce=s.Spec)===null||ce===void 0||(ce=ce.TaskTemplate)===null||ce===void 0||(ce=ce.ContainerSpec)===null||ce===void 0?void 0:ce.User},command:{useDefault:!((q=s.Spec)!==null&&q!==void 0&&(q=q.TaskTemplate)!==null&&q!==void 0&&(q=q.ContainerSpec)!==null&&q!==void 0&&q.Command),default:"",value:(Se=s.Spec)===null||Se===void 0||(Se=Se.TaskTemplate)===null||Se===void 0||(Se=Se.ContainerSpec)===null||Se===void 0||(Se=Se.Command)===null||Se===void 0?void 0:Se.join(" ")},log:function(r,M){return{driver:(M=r==null?void 0:r.Name)!==null&&M!==void 0?M:"json-file",maxFile:(r==null?void 0:r.Options)&&r.Options["max-file"],maxSize:(r==null?void 0:r.Options)&&r.Options["max-size"]}}((Ve=s.Spec)===null||Ve===void 0||(Ve=Ve.TaskTemplate)===null||Ve===void 0?void 0:Ve.LogDriver),dns:(je=s.Spec)===null||je===void 0||(je=je.TaskTemplate)===null||je===void 0||(je=je.ContainerSpec)===null||je===void 0||(je=je.DNSConfig)===null||je===void 0?void 0:je.Nameservers,label:((Le=s.Spec)===null||Le===void 0||(Le=Le.TaskTemplate)===null||Le===void 0||(Le=Le.ContainerSpec)===null||Le===void 0?void 0:Le.Labels)&&Object.entries((xe=s.Spec)===null||xe===void 0||(xe=xe.TaskTemplate)===null||xe===void 0||(xe=xe.ContainerSpec)===null||xe===void 0?void 0:xe.Labels).map(function(r){return{name:r[0],value:r[1]}}),extraHosts:((Ce=s.Spec)===null||Ce===void 0||(Ce=Ce.TaskTemplate)===null||Ce===void 0||(Ce=Ce.ContainerSpec)===null||Ce===void 0?void 0:Ce.Hosts)&&((De=s.Spec)===null||De===void 0||(De=De.TaskTemplate)===null||De===void 0||(De=De.ContainerSpec)===null||De===void 0?void 0:De.Hosts.map(function(r){var M=r.split(":"),V=$()(M,2),ze=V[0],Be=V[1];return{name:ze,value:Be}})),capAdd:(y=s.Spec)===null||y===void 0||(y=y.TaskTemplate)===null||y===void 0||(y=y.ContainerSpec)===null||y===void 0?void 0:y.CapabilityAdd,scheduling:function(r){return{mode:r!=null&&r.Global?"global":"replicated",replicas:r!=null&&r.Replicated?r.Replicated.Replicas:1}}((v=s.Spec)===null||v===void 0?void 0:v.Mode),constraint:function(r,M,V,ze){var Be="all";r!=null&&(M=r.Constraints)!==null&&M!==void 0&&M.includes("node.role==worker")&&(Be="worker"),r!=null&&(V=r.Constraints)!==null&&V!==void 0&&V.includes("node.role==manager")&&(Be="manager"),r==null||(ze=r.Constraints)===null||ze===void 0||ze.forEach(function(Qe){Qe.includes("node.id==")&&(Be="user")});var nn="",tn=[];return r!=null&&r.Constraints&&r.Constraints.forEach(function(Qe){if(Qe.includes("node.id==")){var un=Qe.split("node.id=="),on=$()(un,2),Sn=on[0],cn=on[1];nn=cn;return}if(Qe.includes("==")){var vn=Qe.split("=="),sn=$()(vn,2),pn=sn[0],mn=sn[1];tn.push({name:pn,value:mn,operator:"=="});return}if(Qe.includes("!=")){var fn=Qe.split("!="),dn=$()(fn,2),hn=dn[0],gn=dn[1];tn.push({name:hn,value:gn,operator:"!="});return}}),{role:Be,node:nn,label:tn}}((D=s.Spec)===null||D===void 0||(D=D.TaskTemplate)===null||D===void 0?void 0:D.Placement),placement:((I=s.Spec)===null||I===void 0||(I=I.TaskTemplate)===null||I===void 0||(I=I.Placement)===null||I===void 0?void 0:I.Preferences)&&Object.entries((x=s.Spec)===null||x===void 0||(x=x.TaskTemplate)===null||x===void 0||(x=x.Placement)===null||x===void 0?void 0:x.Preferences).map(function(r){var M,V;return{name:"spread",value:(M=(V=r[1].Spread)===null||V===void 0?void 0:V.SpreadDescriptor)!==null&&M!==void 0?M:""}}),update:function(r,M,V){return{parallelism:(M=r==null?void 0:r.Parallelism)!==null&&M!==void 0?M:1,delay:(V=r==null?void 0:r.Delay)!==null&&V!==void 0?V:0,failureAction:r==null?void 0:r.FailureAction,order:r==null?void 0:r.Order}}((H=s.Spec)===null||H===void 0?void 0:H.UpdateConfig),healthcheck:function(r,M,V,ze,Be,nn){var tn=r!=null&&(M=r.Test)!==null&&M!==void 0&&M.includes("CMD-SHELL")?"CMD-SHELL":"CMD";return{interval:(V=r==null?void 0:r.Interval)!==null&&V!==void 0?V:30,timeout:(ze=r==null?void 0:r.Timeout)!==null&&ze!==void 0?ze:10,retries:(Be=r==null?void 0:r.Retries)!==null&&Be!==void 0?Be:3,cmd:r!=null&&r.Test?r==null||(nn=r.Test)===null||nn===void 0?void 0:nn.join(" "):"",shellType:tn}}((k=s.Spec)===null||k===void 0||(k=k.TaskTemplate)===null||k===void 0||(k=k.ContainerSpec)===null||k===void 0?void 0:k.Healthcheck)},ln=((_e=s.Spec)===null||_e===void 0?void 0:_e.Labels)&&((We=s.Spec)===null||We===void 0?void 0:We.Labels[Ee.ev]);if(ln&&(an.imageRegistry=parseInt(ln)),(He=s.Spec)!==null&&He!==void 0&&(He=He.EndpointSpec)!==null&&He!==void 0&&He.Ports){var Ge;an.ports=(Ge=s.Spec)===null||Ge===void 0||(Ge=Ge.EndpointSpec)===null||Ge===void 0||(Ge=Ge.Ports)===null||Ge===void 0?void 0:Ge.map(function(r){var M;return{dest:String(r.TargetPort),host:String((M=r.PublishedPort)!==null&&M!==void 0?M:""),mode:r.PublishMode}})}(rn=Ue.current)===null||rn===void 0||rn.setFieldsValue(an),le(!0)}}});var Ze=(0,d.useState)("basic"),ae=$()(Ze,2),Y=ae[0],Fe=ae[1],Ke=new R.Uo("components.appForm"),be=new R.Uo("swarm"),Ue=(0,d.useRef)(),Je=(0,d.useRef)(),ke=(0,d.useRef)(),en=(0,d.useRef)(),O=(0,d.useRef)(),ne=(0,d.useState)(!1),N=$()(ne,2),ge=N[0],le=N[1];return(0,l.jsx)(b.Z.Provider,{value:{createFormRef:Ue,volumeListRef:Je,createEnvRef:O,createLinkRef:en,domainRef:ke},children:(0,l.jsx)(ve.a,{drawerProps:{width:ye.R_,forceRender:S.forceRender,rootClassName:"createAppWapper"},formRef:Ue,title:be.format("serviceCreateTitle"),onOpenChange:function(s){if(le(s),!s){var o,P;!((o=Ue.current)===null||o===void 0)&&o.resetFields&&((P=Ue.current)===null||P===void 0||P.resetFields()),Fe("basic")}},open:ge,trigger:S.showTrigger?(0,l.jsx)(pe.ZP,{type:"primary",children:be.format("serviceCreateTitle")}):void 0,onFinish:function(){var B=p()(f()().mark(function s(o){var P,i,h;return f()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return i={id:o.id,siteTitle:o.siteTitle,siteName:o.siteName,hostname:o.hostname,imageRegistry:o.imageRegistry,imageName:o.imageName,ports:o.ports,environment:o.environment,volumes:o.volumes,restartPolicy:o.restart,cpus:o.cpus,memory:o.memory,workDir:o.workDir&&!o.workDir.useDefault?o.workDir.value:"",user:o.user&&!o.user.useDefault?o.user.value:"",command:o.command&&!o.command.useDefault?o.command.value:"",entrypoint:o.entrypoint&&!o.entrypoint.useDefault?o.entrypoint.value:"",log:o.log,dns:o.dns,label:o.label,extraHosts:o.extraHosts,capAdd:o.capAdd,scheduling:o.scheduling,constraint:o.constraint,placement:o.placement,update:o.update},o.healthcheck&&o.healthcheck.cmd&&o.healthcheck.cmd!=""&&(i.healthcheck=o.healthcheck),i.scheduling&&((P=i.scheduling)===null||P===void 0?void 0:P.mode)=="global"&&i.ports&&(i.ports=(h=i.ports)===null||h===void 0?void 0:h.map(function(T){return T.mode="host",T})),E.next=5,(0,Ee.P3)(i);case 5:return S.onFinish&&S.onFinish(),E.abrupt("return",!0);case 7:case"end":return E.stop()}},s)}));return function(s){return B.apply(this,arguments)}}(),children:(0,l.jsxs)(z.Z,{direction:"column",gutter:[0,10],ghost:!0,children:[(0,l.jsxs)(z.Z,{ghost:!0,children:[(0,l.jsx)(F.Z,{name:"id",hidden:!0}),(0,l.jsx)(se.Z,{name:"siteTitle",label:R.FD.format("listDescription"),placeholder:be.format("serviceCreateListDescriptionEmpty")}),(0,l.jsxs)(L.UW,{children:[(0,l.jsx)(se.Z,{width:"lg",name:"siteName",label:R.FD.format("listName"),required:!0,rules:[{required:!0}],placeholder:be.format("serviceCreateListNameEmpty")}),(0,l.jsx)(se.Z,{label:"Hostname",name:"hostname",width:"md"})]}),(0,l.jsx)(qe,{})]}),(0,l.jsx)(Ae.Z,{offsetTop:10,target:function(){return document.querySelector(".createAppWapper .ant-drawer-body")},children:(0,l.jsx)(z.Z,{style:{margin:-20},children:(0,l.jsx)(Ie.Z,{activeKey:Y,onChange:function(s){Fe(s)},items:Ke.option("createTabOption",["basic","scheduling","run-command","cap"]).map(function(B){return{label:B.label,key:B.value}})})})}),(0,l.jsxs)(z.Z,{ghost:!0,children:[(0,l.jsxs)(me.Z,{show:Y=="basic",children:[(0,l.jsx)(te.Z,{showIngress:!0}),(0,l.jsx)(g.Z,{showAddButton:!0,showImportButton:!0,showCodeMode:!0,ref:O,drawerProps:{title:Ke.format("createEnvTitle")}}),(0,l.jsx)(ee.Z,{showDefault:!0,ref:Je,showType:!0}),(0,l.jsx)(G.Z,{}),(0,l.jsx)(Re.Z,{})]}),(0,l.jsxs)(me.Z,{show:Y=="scheduling",children:[(0,l.jsx)(Ne,{}),(0,l.jsx)(C,{})]}),(0,l.jsxs)(me.Z,{show:Y=="run-command",children:[(0,l.jsx)(w,{}),(0,l.jsx)(u.Z,{showCommand:!0,showUser:!0,showWorkDir:!0}),(0,l.jsx)(de.Z,{}),(0,l.jsx)($e.Z,{}),(0,l.jsx)(t.Z,{}),(0,l.jsx)(ue.Z,{})]}),(0,l.jsx)(me.Z,{show:Y=="cap",children:(0,l.jsx)(re.Z,{})})]})]})})})}),A=J},94617:function(Ye,we,e){e.d(we,{Z:function(){return en}});var Te=e(97857),f=e.n(Te),Me=e(15009),p=e.n(Me),_=e(99289),$=e.n(_),ye=e(5574),ve=e.n(ye),F=e(24494),pe=e(5251),d=e(36146),G=e(99611),Re=e(86548),re=e(1883),g=e(42075),te=e(66309),ee=e(25593),me=e(60940),z=e(37413),se=e(94359),L=e(67294),Ae=e(87662),Ie=e(78451),R=e(3616),b=e(33160),X=e(43425),Pe=e(57132),Xe=e(71965),l=e(82061),qe=e(45605),Oe=e(60433),Z=e(38345),W=e(97269),fe=e(24739),he=e(31199),Ee=e(62370),Ne=e(40018),de=e(64317),$e=e(85265),u=e(86250),w=e(83622),C=e(96074),t=e(84567),ue=e(26412),J=e(83062),A=e(80821),S=e(76428),n=e(85893);function Ze(O){var ne,N,ge=new d.Uo("swarm"),le=O.detail;if((ne=le.Spec)!==null&&ne!==void 0&&(ne=ne.Mode)!==null&&ne!==void 0&&ne.Replicated){var B;return(0,n.jsxs)(g.Z,{children:[(0,n.jsx)(te.Z,{children:ge.format("listServiceMode.replicated")}),(0,n.jsx)(te.Z,{color:"success",bordered:!1,children:(B=le.ServiceStatus)===null||B===void 0?void 0:B.RunningTasks}),(0,n.jsx)(te.Z,{color:"gold",bordered:!1,children:le.Spec.Mode.Replicated.Replicas})]})}else if((N=le.Spec)!==null&&N!==void 0&&(N=N.Mode)!==null&&N!==void 0&&N.Global)return(0,n.jsx)(te.Z,{children:ge.format("listServiceMode.global")})}var ae=e(81146);function Y(O){var ne=(0,L.useState)(!1),N=ve()(ne,2),ge=N[0],le=N[1],B=(0,L.useRef)();return(0,n.jsxs)(n.Fragment,{children:[O.trigger?L.cloneElement(O.trigger,{onClick:function(){le(!0)}}):null,(0,n.jsx)($e.Z,{title:"".concat(d.FD.format("listLog")," - ").concat(O.detail.name),open:ge,forceRender:!0,onClose:function(){le(!1)},afterOpenChange:function(o){if(o)setTimeout(function(){var i,h;(i=B.current)===null||i===void 0||i.start(),(h=B.current)===null||h===void 0||h.fit()},1e3);else{var P;(P=B.current)===null||P===void 0||P.close()}},width:R.FK,children:ge&&(0,n.jsx)(ae.Z,{ref:B,showInDrawer:!0,id:"swarm:log:".concat(O.type,":").concat(O.detail.id),request:function(){var s=$()(p()().mark(function o(P){var i;return p()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,F.m8)({id:O.detail.id,type:O.type,lineTotal:P.lineTotal,download:(i=P.download)!==null&&i!==void 0?i:!1,showTime:P.showTime});case 2:case"end":return m.stop()}},o)}));return function(o){return s.apply(this,arguments)}}(),download:function(){var s=$()(p()().mark(function o(P){var i;return p()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,F.Id)({id:O.detail.id,type:O.type,lineTotal:P.lineTotal,showTime:P.showTime,download:!0});case 2:return i=m.sent,m.abrupt("return",{data:new Blob([i],{type:"text/plain"}),name:O.detail.name+"_"+new Date().toLocaleDateString()+".log"});case 4:case"end":return m.stop()}},o)}));return function(o){return s.apply(this,arguments)}}()})})]})}var Fe=e(98093),Ke=e(67255),be=(0,L.forwardRef)(function(O,ne){var N,ge,le,B,s,o,P,i,h,m,E,T,j;(0,L.useImperativeHandle)(ne,function(){return{show:function(v){ce(v),K(!0)}}});var c=(0,L.useState)(!1),Q=ve()(c,2),U=Q[0],K=Q[1],ie=(0,L.useState)(),oe=ve()(ie,2),a=oe[0],ce=oe[1],q=new d.Uo("swarm"),Se=(0,L.useState)(""),Ve=ve()(Se,2),je=Ve[0],Le=Ve[1],xe=(0,L.useRef)(),Ce=(0,L.useRef)(),De=(0,L.useRef)();return(0,L.useEffect)(function(){(0,Ae.K3)().then(function(y){var v;Le((v=y.data.serverUrl)!==null&&v!==void 0?v:"")})},[]),(0,n.jsxs)($e.Z,{title:q.format("serviceDetailTitle",{name:a==null||(N=a.Spec)===null||N===void 0?void 0:N.Name}),open:U,forceRender:!0,width:R.R_,onClose:function(){K(!1),ce(void 0),O.onFinish&&O.onFinish()},extra:[a&&(0,n.jsx)(A.Z,{buttonProps:{type:"link",icon:(0,n.jsx)(b.Z,{})},tips:d.FD.format("listManageRefresh"),action:$()(p()().mark(function y(){var v,D;return p()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,(0,F.ig)({id:a.ID});case 2:D=x.sent,ce(D.data.info),!((v=De.current)===null||v===void 0)&&v.reloadAndRest&&De.current.reloadAndRest();case 5:case"end":return x.stop()}},y)}))},"refresh")],children:[(0,n.jsx)(Fe.Z,{forceRender:!0,ref:Ce,onFinish:$()(p()().mark(function y(){var v,D;return p()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,(0,F.ig)({id:(v=a==null?void 0:a.ID)!==null&&v!==void 0?v:""});case 2:D=x.sent,ce(D.data.info);case 4:case"end":return x.stop()}},y)}))}),(0,n.jsxs)(u.Z,{vertical:!0,gap:20,children:[(0,n.jsx)(Z.Z,{title:(0,n.jsx)(X.Z,{}),ghost:!0,subTitle:d.FD.format("listManage"),children:(0,n.jsxs)(g.Z,{wrap:!0,children:[a&&(0,n.jsx)(w.ZP,{type:"primary",icon:(0,n.jsx)(Re.Z,{}),onClick:function(){var v;(v=Ce.current)===null||v===void 0||v.edit(a)},children:d.FD.format("listManageEdit")}),(0,n.jsx)(C.Z,{type:"vertical"}),a&&(0,n.jsx)(Y,{type:"service",detail:{id:(ge=a.ID)!==null&&ge!==void 0?ge:"",name:(le=(B=a.Spec)===null||B===void 0?void 0:B.Name)!==null&&le!==void 0?le:""},trigger:(0,n.jsx)(w.ZP,{icon:(0,n.jsx)(re.Z,{}),children:d.FD.format("listManageLog")},"log")}),(a==null||(s=a.Spec)===null||s===void 0||(s=s.Mode)===null||s===void 0?void 0:s.Replicated)&&(0,n.jsx)(A.Z,{buttonProps:{icon:(0,n.jsx)(Pe.Z,{})},confirmProps:{forceRender:!0,onOpenChange:function(v,D){var I,x;(I=xe.current)===null||I===void 0||I.setFieldsValue({replicas:(x=a.Spec)===null||x===void 0||(x=x.Mode)===null||x===void 0||(x=x.Replicated)===null||x===void 0?void 0:x.Replicas,force:!1})},description:(0,n.jsx)(W.A,{layout:"inline",submitter:!1,formRef:xe,children:(0,n.jsxs)(g.Z,{direction:"vertical",size:[0,15],style:{width:600},children:[(0,n.jsx)(ee.Z.Text,{children:q.format("serviceManageScalingTip")}),(0,n.jsxs)(fe.UW,{children:[(0,n.jsx)(he.Z,{label:q.format("serviceManageScalingReplicas"),width:"sm",name:"replicas"}),(0,n.jsx)(Ee.Z,{name:"force",valuePropName:"checked",children:(0,n.jsxs)(t.Z,{children:[d.FD.format("listManageDeployForce"),"\uFF1F"]})})]})]})})},action:$()(p()().mark(function y(){var v,D,I;return p()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.abrupt("return",(0,F.x$)({name:(v=a==null?void 0:a.ID)!==null&&v!==void 0?v:"",replicas:(D=xe.current)===null||D===void 0?void 0:D.getFieldValue("replicas"),force:(I=xe.current)===null||I===void 0?void 0:I.getFieldValue("force")}));case 1:case"end":return H.stop()}},y)})),onSuccess:function(){(0,F.ig)({id:a.ID}).then(function(v){ce(v.data.info)})},children:d.FD.format("listManageScaling")}),a&&(0,n.jsx)(A.Z,{action:function(){return(0,F.x$)({name:a.ID,rollback:!0})},buttonProps:{icon:(0,n.jsx)(Xe.Z,{})},confirmProps:{showCommonConfirm:!0},children:d.FD.format("listManageRollback")}),(0,n.jsx)(A.Z,{showDivider:!0,action:function(){var v;return(0,F.tm)({name:[(v=a==null?void 0:a.ID)!==null&&v!==void 0?v:""]})},buttonProps:{type:"primary",danger:!0,icon:(0,n.jsx)(l.Z,{})},confirmProps:{showCommonConfirm:!0},onSuccess:function(v){K(!1),O.onFinish&&O.onFinish()},children:d.FD.format("listManageDelete")})]})}),a&&(0,n.jsx)(z.Z,{publicPort:((o=a.Endpoint)===null||o===void 0?void 0:o.Ports)&&((P=a.Endpoint)===null||P===void 0?void 0:P.Ports.map(function(y){var v,D,I;return{PrivatePort:(v=y.TargetPort)!==null&&v!==void 0?v:0,Type:(D=y.Protocol)!==null&&D!==void 0?D:"tcp",IP:"",PublicPort:(I=y.PublishedPort)!==null&&I!==void 0?I:0}})),serverIp:je,showInDetail:!0,ghost:!0,layout:"inline"}),(0,n.jsx)(Z.Z,{title:(0,n.jsx)(qe.Z,{}),subTitle:d.FD.format("listManageDetail"),ghost:!0,children:(0,n.jsxs)(ue.Z,{column:1,bordered:!0,styles:{label:{width:150}},children:[(0,n.jsxs)(ue.Z.Item,{label:d.FD.format("listTitle"),children:[(0,n.jsx)(S.Z,{title:a==null?void 0:a.ID})," - ",a==null||(i=a.Spec)===null||i===void 0?void 0:i.Name,a&&((h=a.UpdateStatus)===null||h===void 0?void 0:h.State)&&(0,n.jsxs)(n.Fragment,{children:[" - ",(0,n.jsx)(se.Z,{status:"service.".concat((m=a.UpdateStatus)===null||m===void 0?void 0:m.State)})]})]}),(0,n.jsx)(ue.Z.Item,{label:d.FD.format("listDescription"),children:(a==null||(E=a.Spec)===null||E===void 0?void 0:E.Labels)&&a.Spec.Labels[F.$m]}),(0,n.jsx)(ue.Z.Item,{label:d.FD.format("listRunTask"),children:(0,n.jsx)(g.Z,{children:(a==null?void 0:a.ServiceStatus)&&Object.keys(a.ServiceStatus).map(function(y){var v=y;return(a==null?void 0:a.ServiceStatus)&&(0,n.jsx)(J.Z,{title:q.format("listServiceStatusTipOption.".concat(v)),children:(0,n.jsxs)(te.Z,{color:q.format("listServiceStatusColorOption.".concat(v)),bordered:!1,children:[q.format("listServiceStatusOption.".concat(v))," ",a==null?void 0:a.ServiceStatus[v]]})},v)})})}),(0,n.jsx)(ue.Z.Item,{label:d.FD.format("listServiceMode"),children:a&&(0,n.jsx)(Ze,{detail:a})}),(0,n.jsx)(ue.Z.Item,{label:d.FD.format("listImageName"),children:a==null||(T=a.Spec)===null||T===void 0||(T=T.TaskTemplate)===null||T===void 0||(T=T.ContainerSpec)===null||T===void 0?void 0:T.Image}),(0,n.jsx)(ue.Z.Item,{label:d.FD.format("listVersion"),children:a==null||(j=a.Version)===null||j===void 0?void 0:j.Index}),(0,n.jsx)(ue.Z.Item,{label:d.FD.format("listCreatedAt"),children:(0,pe.NF)(a==null?void 0:a.CreatedAt)}),(0,n.jsx)(ue.Z.Item,{label:d.FD.format("listUpdatedAt"),children:(0,pe.NF)(a==null?void 0:a.UpdatedAt)})]})}),a&&(0,n.jsx)(Z.Z,{title:(0,n.jsx)(Oe.Z,{}),subTitle:q.format("listTaskTitle"),ghost:!0,children:(0,n.jsx)(Ne.Z,{scroll:{x:"max-content"},rowKey:"ID",search:{filterType:"light"},actionRef:De,columns:[{search:!1,title:d.FD.format("listName"),render:function(v,D,I,x,H){return D.ID}},{search:!1,width:200,title:d.FD.format("listNodeName"),render:function(v,D,I,x,H){return D.NodeID}},{search:!1,width:50,title:d.FD.format("listSlot"),render:function(v,D,I,x,H){return D.Slot}},{key:"status",renderFormItem:function(v,D,I,x){return(0,n.jsx)(de.Z,{name:"status",valueEnum:Object.fromEntries(q.option("listTaskStatusOption",["running","shutdown","accepted"]).map(function(H){return[H.value,H.label]}))})},width:120,title:d.FD.format("listRunStatus"),render:function(v,D,I){var x;if(D.Status.State!="running"){var H;return(0,n.jsx)(se.Z,{status:"task.".concat(D.Status.State),tip:(H=D.Status.Err)!==null&&H!==void 0?H:D.Status.Message})}return(0,n.jsx)(se.Z,{status:"task.".concat(D.DesiredState),tip:(x=D.Status.Err)!==null&&x!==void 0?x:D.Status.Message})}},{search:!1,width:180,title:d.FD.format("listUpdatedAt"),render:function(v,D,I,x,H){return(0,pe.NF)(D.UpdatedAt)}},{search:!1,width:100,title:d.FD.format("listManage"),fixed:"right",render:function(v,D,I,x,H){var k,_e;return(0,n.jsx)(g.Z,{children:(0,n.jsx)(Y,{type:"node",detail:{id:(k=D.ID)!==null&&k!==void 0?k:"",name:(_e=D.ID)!==null&&_e!==void 0?_e:""},trigger:(0,n.jsx)(ee.Z.Link,{children:(0,n.jsx)(re.Z,{})})})})}}],request:function(){var y=$()(p()().mark(function v(D){var I,x;return p()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,(0,F.XX)({serviceName:a==null?void 0:a.ID,status:D.status});case 2:return I=k.sent,k.next=5,(0,F.HN)();case 5:return x=k.sent,k.abrupt("return",{data:I.data.list.map(function(_e){var We,He=x&&((We=x.data.list.find(function(rn){return rn.ID==_e.NodeID}))===null||We===void 0||(We=We.Description)===null||We===void 0?void 0:We.Hostname);return He&&(_e.NodeID=He),_e}),success:!0,total:I.data.list.length});case 7:case"end":return k.stop()}},v)}));return function(v){return y.apply(this,arguments)}}(),pagination:(0,Ke.Oh)()})})]})]})}),Ue=be,Je=e(55681),ke=(0,L.forwardRef)(function(O,ne){(0,L.useImperativeHandle)(ne,function(){return{reload:function(){var i;!((i=o.current)===null||i===void 0)&&i.reloadAndRest&&o.current.reloadAndRest()}}});var N=(0,L.useState)(""),ge=ve()(N,2),le=ge[0],B=ge[1],s=(0,L.useRef)(),o=(0,L.useRef)();return(0,L.useEffect)(function(){(0,Ae.K3)().then(function(P){var i;B((i=P.data.serverUrl)!==null&&i!==void 0?i:"")})},[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Ue,{ref:s,onFinish:function(){var i;!((i=o.current)===null||i===void 0)&&i.reloadAndRest&&o.current.reloadAndRest()}}),(0,n.jsx)(Je.Co,f()(f()({},O.tableProps),{},{actionRef:o,rowKey:"ID",columns:[{key:"serviceName",title:d.FD.format("listServiceName"),render:function(i,h,m,E,T){var j,c=0;return h.Task&&h.Task.forEach(function(Q){Q.Status.State=="running"&&(c+=1)}),(0,n.jsxs)(g.Z,{children:[h.Task&&(0,n.jsx)(te.Z,{color:"success",bordered:!1,children:c}),(0,n.jsx)(ee.Z.Link,{onClick:function(){var U;(U=s.current)===null||U===void 0||U.show(h)},children:(j=h.Spec)===null||j===void 0?void 0:j.Name})]})}},{width:150,search:!1,title:d.FD.format("listPort"),render:function(i,h,m,E,T){var j,c,Q=[];return!((j=h.Endpoint)===null||j===void 0)&&j.Ports&&((c=h.Endpoint)===null||c===void 0||c.Ports.map(function(U){var K,ie,oe;Q.push({PrivatePort:(K=U.TargetPort)!==null&&K!==void 0?K:0,Type:(ie=U.Protocol)!==null&&ie!==void 0?ie:"tcp",IP:"0.0.0.0",PublicPort:(oe=U.PublishedPort)!==null&&oe!==void 0?oe:0})})),(0,n.jsx)(z.Z,{ghost:!0,publicPort:Q,serverIp:le})}},{width:150,search:!1,title:d.FD.format("listServiceMode"),render:function(i,h,m,E,T){return(0,n.jsx)(Ze,{detail:h})}},{hidden:!O.showImageName,width:400,search:!1,title:d.FD.format("listImageName"),render:function(i,h,m,E,T){var j,c=((j=h.Spec)===null||j===void 0||(j=j.TaskTemplate)===null||j===void 0||(j=j.ContainerSpec)===null||j===void 0?void 0:j.Image)||"",Q=c.includes("@")?c.split("@"):[c,null],U=ve()(Q,2),K=U[0],ie=U[1];return(0,n.jsx)(Ie.Z,{children:K})}},{search:!1,width:180,title:d.FD.format("listCreatedAt"),render:function(i,h,m,E,T){return(0,pe.NF)(h.CreatedAt)}},{search:!1,width:180,title:d.FD.format("listUpdatedAt"),render:function(i,h,m,E,T){return(0,pe.NF)(h.UpdatedAt)}}],request:function(){var P=$()(p()().mark(function i(h){var m,E,T;return p()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!O.showWithNodeId){c.next=7;break}return c.next=3,(0,F.rN)({nodeId:(m=O.showWithNodeId)!==null&&m!==void 0?m:""});case 3:return E=c.sent,c.abrupt("return",{data:E.data.list,total:E.data.list.length,success:!0});case 7:return c.next=9,(0,F.kM)({name:h.serviceName});case 9:return T=c.sent,c.abrupt("return",{data:T.data.list,total:T.data.list.length,success:!0});case 11:case"end":return c.stop()}},i)}));return function(i){return P.apply(this,arguments)}}(),actions:O.showManage&&[{key:"view",label:d.FD.format("listManageView"),icon:(0,n.jsx)(G.Z,{}),showInContext:"manage",showInOperator:!0,action:function(i){return $()(p()().mark(function h(){var m,E,T;return p()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:E=i.finish,T=i.selectedRow,E(!0),(m=s.current)===null||m===void 0||m.show(T);case 3:case"end":return c.stop()}},h)}))()}},{key:"edit",label:d.FD.format("listManageEdit"),icon:(0,n.jsx)(Re.Z,{}),showInContext:"manage",showInOperator:!!O.showManage,action:function(i){return $()(p()().mark(function h(){var m,E,T;return p()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:E=i.finish,T=i.selectedRow,E(!0),!((m=O.showManage)===null||m===void 0)&&m.onEdit&&O.showManage.onEdit(T);case 3:case"end":return c.stop()}},h)}))()}},{key:"delete",action:function(i){return $()(p()().mark(function h(){var m,E,T;return p()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return m=i.loading,E=i.finish,T=i.selectedRows,m(),c.abrupt("return",(0,F.tm)({name:T.map(function(Q){return Q.ID})}).finally(function(){E(!0)}));case 3:case"end":return c.stop()}},h)}))()}}],expandable:O.showWithNodeId?{expandRowByClick:!0,rowExpandable:function(i){return i.Task&&i.Task.length>0&&i.Task.filter(function(h){return h.Status.State=="running"}).length>0},expandedRowRender:function(i){return(0,n.jsx)(me.Z,{rowKey:"ID",columns:[{title:d.FD.format("listName"),render:function(m,E,T){return E.ID}},{width:120,title:d.FD.format("listRunStatus"),render:function(m,E,T){var j;return(0,n.jsx)(se.Z,{status:"task.".concat(E.Status.State),tip:(j=E.Status.Err)!==null&&j!==void 0?j:E.Status.Message})}},{title:d.FD.format("listUpdatedAt"),width:180,render:function(m,E,T){return(0,pe.NF)(E.UpdatedAt)}},{width:100,title:d.FD.format("listManage"),fixed:"right",render:function(m,E,T){var j,c;return(0,n.jsx)(g.Z,{children:(0,n.jsx)(Y,{type:"node",detail:{id:(j=E.ID)!==null&&j!==void 0?j:"",name:(c=E.ID)!==null&&c!==void 0?c:""},trigger:(0,n.jsx)(ee.Z.Link,{children:(0,n.jsx)(re.Z,{})})})})}}],pagination:!1,dataSource:i.Task.filter(function(h){return h.Status.State=="running"})})}}:void 0}),"service-list")]})}),en=ke},76428:function(Ye,we,e){e.d(we,{Z:function(){return p}});var Te=e(25593),f=e(67294),Me=e(85893);function p(_){return(0,Me.jsx)(Te.Z.Text,{copyable:!0,children:_.title})}},12323:function(Ye,we,e){e.d(we,{X:function(){return Te},n:function(){return f}});var Te={convertEol:!0,fontFamily:'Menlo, Monaco, "Courier New", monospace',fontWeight:400,fontSize:16,lineHeight:1,cursorStyle:"block",cursorInactiveStyle:"outline",cursorBlink:!0,letterSpacing:0,theme:{foreground:"#bfbfbf",cursor:"gray",selectionForeground:"#ffffff"}},f=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"]},24494:function(Ye,we,e){e.d(we,{$m:function(){return $},HN:function(){return te},Id:function(){return re},JC:function(){return ve},P3:function(){return Ee},QB:function(){return Ae},UK:function(){return pe},XX:function(){return X},Zc:function(){return me},ev:function(){return ye},ig:function(){return de},kM:function(){return qe},kp:function(){return R},m8:function(){return G},rN:function(){return Xe},tm:function(){return fe},vb:function(){return se},x$:function(){return Z}});var Te=e(15009),f=e.n(Te),Me=e(99289),p=e.n(Me),_=e(82346),$="com.dpanel.swarm.service.description",ye="com.dpanel.swarm.service.registry";function ve(){return F.apply(this,arguments)}function F(){return F=p()(f()().mark(function u(){return f()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.abrupt("return",(0,_.request)("/dpanel/api/app/swarm/info",{method:"POST"}));case 1:case"end":return C.stop()}},u)})),F.apply(this,arguments)}function pe(u){return d.apply(this,arguments)}function d(){return d=p()(f()().mark(function u(w){return f()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,_.request)("/dpanel/api/app/swarm/init",{method:"POST",data:w}));case 1:case"end":return t.stop()}},u)})),d.apply(this,arguments)}function G(u){return Re.apply(this,arguments)}function Re(){return Re=p()(f()().mark(function u(w){return f()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return w.id=String(w.id),t.abrupt("return",(0,_.request)("/dpanel/api/app/swarm/log",{method:"POST",data:w}));case 2:case"end":return t.stop()}},u)})),Re.apply(this,arguments)}function re(u){return g.apply(this,arguments)}function g(){return g=p()(f()().mark(function u(w){return f()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return w.download=!0,w.id=String(w.id),t.next=4,(0,_.request)("/dpanel/api/app/swarm/log",{method:"POST",data:w,responseType:"blob"});case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}},u)})),g.apply(this,arguments)}function te(u){return ee.apply(this,arguments)}function ee(){return ee=p()(f()().mark(function u(w){return f()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,_.request)("/dpanel/api/app/swarm/node-list",{method:"POST",data:w}));case 1:case"end":return t.stop()}},u)})),ee.apply(this,arguments)}function me(u){return z.apply(this,arguments)}function z(){return z=p()(f()().mark(function u(w){return f()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,_.request)("/dpanel/api/app/swarm/node-update",{method:"POST",data:w}));case 1:case"end":return t.stop()}},u)})),z.apply(this,arguments)}function se(u){return L.apply(this,arguments)}function L(){return L=p()(f()().mark(function u(w){return f()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,_.request)("/dpanel/api/app/swarm/info-join",{method:"POST",data:w}));case 1:case"end":return t.stop()}},u)})),L.apply(this,arguments)}function Ae(u){return Ie.apply(this,arguments)}function Ie(){return Ie=p()(f()().mark(function u(w){return f()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,_.request)("/dpanel/api/app/swarm/node-remove",{method:"POST",data:w}));case 1:case"end":return t.stop()}},u)})),Ie.apply(this,arguments)}function R(u){return b.apply(this,arguments)}function b(){return b=p()(f()().mark(function u(w){return f()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,_.request)("/dpanel/api/app/swarm/node-prune",{method:"POST",data:w}));case 1:case"end":return t.stop()}},u)})),b.apply(this,arguments)}function X(u){return Pe.apply(this,arguments)}function Pe(){return Pe=p()(f()().mark(function u(w){return f()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,_.request)("/dpanel/api/app/swarm/task-list",{method:"POST",data:w}));case 1:case"end":return t.stop()}},u)})),Pe.apply(this,arguments)}function Xe(u){return l.apply(this,arguments)}function l(){return l=p()(f()().mark(function u(w){return f()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,_.request)("/dpanel/api/app/swarm/task-list-in-node",{method:"POST",data:w}));case 1:case"end":return t.stop()}},u)})),l.apply(this,arguments)}function qe(u){return Oe.apply(this,arguments)}function Oe(){return Oe=p()(f()().mark(function u(w){return f()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,_.request)("/dpanel/api/app/swarm/service-list",{method:"POST",data:w}));case 1:case"end":return t.stop()}},u)})),Oe.apply(this,arguments)}function Z(u){return W.apply(this,arguments)}function W(){return W=p()(f()().mark(function u(w){return f()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,_.request)("/dpanel/api/app/swarm/service-scaling",{method:"POST",data:w}));case 1:case"end":return t.stop()}},u)})),W.apply(this,arguments)}function fe(u){return he.apply(this,arguments)}function he(){return he=p()(f()().mark(function u(w){return f()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,_.request)("/dpanel/api/app/swarm/service-delete",{method:"POST",data:w}));case 1:case"end":return t.stop()}},u)})),he.apply(this,arguments)}function Ee(u){return Ne.apply(this,arguments)}function Ne(){return Ne=p()(f()().mark(function u(w){return f()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,_.request)("/dpanel/api/app/swarm/service-create",{method:"POST",data:w}));case 1:case"end":return t.stop()}},u)})),Ne.apply(this,arguments)}function de(u){return $e.apply(this,arguments)}function $e(){return $e=p()(f()().mark(function u(w){return f()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,_.request)("/dpanel/api/app/swarm/service-detail",{method:"POST",data:w}));case 1:case"end":return t.stop()}},u)})),$e.apply(this,arguments)}}}]);
