"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9960],{27166:function(A,O,e){var M=e(97857),r=e.n(M),c=e(5574),d=e.n(c),E=e(13769),m=e.n(E),P=e(184),p=e(74330),u=e(67294),o=e(85893),i=["requestLoading"],n=(0,u.forwardRef)(function(h,l){var g=h.requestLoading,f=m()(h,i),a=(0,u.useState)(!1),s=d()(a,2),t=s[0],_=s[1];return(0,u.useImperativeHandle)(l,function(){return{loading:function(){_(!0)},finish:function(){_(!1)}}}),(0,o.jsx)(P.a,r()(r()({},f),{},{children:(0,o.jsx)(p.Z,{spinning:t!=null?t:h.requestLoading,size:"default",style:{marginTop:"30%"},children:h.children})}))});O.Z=n},81366:function(A,O,e){var M=e(97857),r=e.n(M),c=e(19632),d=e.n(c),E=e(5574),m=e.n(E),P=e(27254),p=e(42075),u=e(85418),o=e(25593),i=e(83622),n=e(67294),h=e(31112),l=e(85893),g={title:"/",path:"/"},f=(0,n.forwardRef)(function(a,s){var t=(0,n.useContext)(h.Z),_=t.showPath,W=t.redirectPath,N=(0,n.useState)([g]),I=m()(N,2),T=I[0],B=I[1];(0,n.useImperativeHandle)(s,function(){return{addHistory:function(D,j){j=="/"?B([g]):B([].concat(d()(T),[{title:D,path:j}]))},initHistory:function(D,j){B([r()(r()({},g),{},{children:j})].concat(d()(D)))}}});var S=function(D){_?_(T[D].title,T[D].path):a.showPath&&a.showPath(T[D].title,T[D].path);var j=T.filter(function(b,Z){return Z<=D});B(d()(j))};return(0,l.jsxs)(p.Z,{children:[(0,l.jsx)(p.Z.Compact,{children:T.map(function(R,D){return R.children?(0,l.jsxs)(u.Z.Button,{menu:{items:R.children.map(function(j,b){return{key:b,label:(0,l.jsx)(o.Z.Link,{onClick:function(){W(j)},children:j},b)}})},type:"dashed",onClick:function(b){S(D)},children:[(0,l.jsx)(P.Z,{})," ",R.title]},D):(0,l.jsx)(i.ZP,{icon:(0,l.jsx)(P.Z,{}),type:"dashed",onClick:function(){S(D)},children:R.title},D)})}),T.length>=2&&(0,l.jsx)(o.Z.Text,{copyable:{text:T[T.length-1].path}})]})});O.Z=f},31112:function(A,O,e){var M=e(67294),r=(0,M.createContext)({});O.Z=r},68536:function(A,O,e){e.d(O,{Z:function(){return i}});var M=e(24963),r=e(36146),c=e(93613),d=e(36693),E=e(2741),m=e(25593),P=e(42075),p=e(67294),u=e(85893),o=0;function i(n){var h=(0,p.useContext)(M.Z),l=h.message,g=new r.Uo("components.explorer");return n.isDir?(0,u.jsx)(m.Z.Link,{onClick:function(){n.onClick&&n.onClick()},children:(0,u.jsxs)(P.Z,{children:[(0,u.jsx)(c.Z,{}),n.showName]})}):n.isLink?(0,u.jsx)(m.Z.Link,{onClick:function(){n.onClick&&n.onClick()},children:(0,u.jsxs)(P.Z,{children:[(0,u.jsx)(d.Z,{}),n.showName]})}):(0,u.jsx)(m.Z.Text,{onClick:function(){if(o++,o==2){o=0,n.onClick&&n.onClick();return}setTimeout(function(){o==1&&l.info(g.format("fileNameMessageViewDetail")),o=0},400)},style:{cursor:"pointer"},children:(0,u.jsxs)(P.Z,{children:[(0,u.jsx)(E.Z,{}),n.showName]})})}},92754:function(A,O,e){var M=e(5574),r=e.n(M),c=e(67294),d=e(82346),E=e(38703),m=e(85893),P=(0,c.forwardRef)(function(p,u){var o=(0,c.useState)(""),i=r()(o,2),n=i[0],h=i[1];(0,c.useImperativeHandle)(u,function(){return{setFinish:function(){s({finish:{downloading:100,extracting:100}})},setStart:function(_){_&&h(_),s({start:{downloading:0,extracting:0}})},close:function(){l.progress.close("image:pull:"+n),s({start:{downloading:0,extracting:0}})}}});var l=(0,d.useModel)("subscriber");l.addDataHandler("image:pull:"+n,function(t){s(t.data)});var g=(0,c.useState)(),f=r()(g,2),a=f[0],s=f[1];return(0,c.useEffect)(function(){return s({start:{downloading:0,extracting:0}}),function(){l.progress.close("image:pull:"+n)}},[]),(0,m.jsx)(m.Fragment,{children:a&&Object.keys(a).map(function(t){return(0,m.jsx)(E.Z,{strokeLinecap:"square",size:"small",format:function(W){return"".concat(W,"%")},percent:a[t].downloading,success:{percent:a[t].extracting}},t)})})});O.Z=P},80271:function(A,O,e){var M=e(15009),r=e.n(M),c=e(99289),d=e.n(c),E=e(5574),m=e.n(E),P=e(184),p=e(9773),u=e(83062),o=e(67294),i=e(68536),n=e(5251),h=e(81366),l=e(3616),g=e(36146),f=e(73813),a=e(85893),s=(0,o.forwardRef)(function(t,_){(0,o.useImperativeHandle)(_,function(){return{show:function(){}}});var W=(0,o.useState)(""),N=m()(W,2),I=N[0],T=N[1],B=(0,o.useState)(!1),S=m()(B,2),R=S[0],D=S[1],j=(0,o.useRef)(),b=(0,o.useRef)(),Z=function(U,C){var v,x,y;T(C),(v=b.current)===null||v===void 0||v.addHistory(U,C),!((x=j.current)===null||x===void 0)&&x.reloadAndRest&&((y=j.current)===null||y===void 0||y.reloadAndRest())},K=new g.Uo("components.explorer"),k=new g.Uo("image");return(0,a.jsx)(P.a,{drawerProps:{width:l.R_,destroyOnHidden:!0},open:R,submitter:!1,title:k.format("fileTitle"),onOpenChange:function(U){D(U),T(U?"/":"")},trigger:(0,a.jsx)(u.Z,{title:k.format("fileTitle"),children:t.trigger}),children:(0,a.jsx)(p.Z,{headerTitle:(0,a.jsx)(h.Z,{ref:b,showPath:Z}),scroll:{x:"max-content"},search:!1,rowKey:"name",pagination:{pageSize:500,position:["topRight","bottomRight"]},actionRef:j,request:d()(r()().mark(function L(){var U;return r()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(I!=""){v.next=2;break}return v.abrupt("return",{data:[],total:0,success:!0});case 2:return v.next=4,(0,f.cD)({md5:t.imageId,path:I});case 4:return U=v.sent,v.abrupt("return",{data:U.data.info,total:U.data.info.length,success:!0});case 6:case"end":return v.stop()}},L)})),columns:[{title:K.format("listName"),dataIndex:"showName",key:"name",render:function(w,C,v,x,y){var w,H=(0,n.fi)(C.name.replace(I,""),"/");return C.isDir?w=(0,a.jsx)(i.Z,{isDir:!0,onClick:function(){return Z(H,C.path)},showName:H}):C.isSymlink?w=(0,a.jsx)(i.Z,{isLink:!0,showName:H}):w=(0,a.jsx)(i.Z,{showName:H}),w}},{title:K.format("listModStr"),dataIndex:"modStr",key:"modStr"},{title:K.format("listUser"),dataIndex:"user"},{title:K.format("listGroup"),dataIndex:"group"},{title:K.format("listSize"),dataIndex:"size",key:"size",render:function(U,C,v,x,y){return(0,n.FI)(C.size)}},{title:K.format("listModTime"),dataIndex:"modTime",key:"modTime",render:function(U,C,v,x,y){return(0,n.NF)(C.modTime)},sorter:function(U,C){return new Date(U.modTime).getTime()-new Date(C.modTime).getTime()}}],cardProps:{ghost:!0}},"".concat(t.imageId))})});O.Z=s},2205:function(A,O,e){e.d(O,{Z:function(){return o}});var M=e(97857),r=e.n(M),c=e(5574),d=e.n(c),E=e(75870),m=e(36146),P=e(34041),p=e(67294),u=e(85893);function o(i){var n=(0,p.useState)([]),h=d()(n,2),l=h[0],g=h[1],f=new m.Uo("components.selectRegistry");(0,p.useEffect)(function(){(0,E.Ot)().then(function(s){s&&g(s.data.list)})},[]);var a={};return i.multiple&&(a.mode="multiple"),i.top&&(a.placement="topLeft"),(0,u.jsx)(P.Z,r()({popupMatchSelectWidth:!i.width,style:i.width?{width:i.width}:{},onChange:function(t){if(Array.isArray(t)){var _=t.map(function(W){return l[W]});i.onChangeList&&i.onChangeList(_)}else i.onChange&&i.onChange(l[t])},placeholder:f.format("nameEmpty"),options:l.map(function(s,t){return{value:t,label:s.title+"("+s.serverAddress+")"}}),allowClear:!0},a))}},68297:function(A,O,e){e.d(O,{Qd:function(){return u},Ze:function(){return P},aw:function(){return g},cV:function(){return i},fy:function(){return h},ii:function(){return m}});var M=e(15009),r=e.n(M),c=e(99289),d=e.n(c),E=e(82346),m=[{name:"amd64",arch:"amd64",search:["amd64","x86_64","86_64"]},{name:"arm64",arch:"arm64",search:["arm64","arrch64"]},{name:"i386",arch:"386",search:[]},{name:"arm/v6",arch:"arm",search:[]},{name:"arm/v7",arch:"arm",search:[]},{name:"arm/v8",arch:"arm64",search:[]},{name:"ppc64le",arch:"ppc64le",search:[]},{name:"riscv64",arch:"riscv64",search:[]}];function P(a){return p.apply(this,arguments)}function p(){return p=d()(r()().mark(function a(s){return r()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,E.request)("/dpanel/api/app/image/tag-sync",{method:"POST",data:s}));case 1:case"end":return _.stop()}},a)})),p.apply(this,arguments)}function u(a){return o.apply(this,arguments)}function o(){return o=d()(r()().mark(function a(s){return r()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,E.request)("/dpanel/api/app/image/tag-add",{method:"POST",data:s}));case 1:case"end":return _.stop()}},a)})),o.apply(this,arguments)}function i(a){return n.apply(this,arguments)}function n(){return n=d()(r()().mark(function a(s){return r()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,E.request)("/dpanel/api/app/image/tag-delete",{method:"POST",data:s}));case 1:case"end":return _.stop()}},a)})),n.apply(this,arguments)}function h(a){return l.apply(this,arguments)}function l(){return l=d()(r()().mark(function a(s){return r()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,E.request)("/dpanel/api/app/image/tag-push-batch",{method:"POST",data:s}));case 1:case"end":return _.stop()}},a)})),l.apply(this,arguments)}function g(a){return f.apply(this,arguments)}function f(){return f=d()(r()().mark(function a(s){return r()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",(0,E.request)("/dpanel/api/pro/image/get-remote-tag",{method:"POST",data:s}));case 1:case"end":return _.stop()}},a)})),f.apply(this,arguments)}}}]);
