"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7750],{58638:function(ge,z,e){e.d(z,{Z:function(){return y}});var p=e(87462),u=e(67294),Q={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z"}}]},name:"export",theme:"outlined"},l=Q,M=e(84089),x=function($,D){return u.createElement(M.Z,(0,p.Z)({},$,{ref:D,icon:l}))},S=u.forwardRef(x),y=S},36693:function(ge,z,e){var p=e(87462),u=e(67294),Q=e(80111),l=e(84089),M=function(y,X){return u.createElement(l.Z,(0,p.Z)({},y,{ref:X,icon:Q.Z}))},x=u.forwardRef(M);z.Z=x},64789:function(ge,z,e){e.d(z,{Z:function(){return y}});var p=e(87462),u=e(67294),Q={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},l=Q,M=e(84089),x=function($,D){return u.createElement(M.Z,(0,p.Z)({},$,{ref:D,icon:l}))},S=u.forwardRef(x),y=S},31199:function(ge,z,e){var p=e(1413),u=e(45987),Q=e(67294),l=e(40284),M=e(85893),x=["fieldProps","min","proFieldProps","max"],S=function($,D){var ae=$.fieldProps,F=$.min,ie=$.proFieldProps,H=$.max,me=(0,u.Z)($,x);return(0,M.jsx)(l.Z,(0,p.Z)({valueType:"digit",fieldProps:(0,p.Z)({min:F,max:H},ae),ref:D,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:ie},me))},y=Q.forwardRef(S);z.Z=y},92067:function(ge,z,e){e.d(z,{Z:function(){return me}});var p=e(15009),u=e.n(p),Q=e(99289),l=e.n(Q),M=e(13822),x=e(64789),S=e(40018),y=e(42075),X=e(83062),$=e(83622),D=e(89638),ae=e(5251),F=e(36146),ie=e(67255),H=e(85893);function me(J){return(0,H.jsx)(S.Z,{columns:[{title:F.FD.format("listContainerName"),dataIndex:"name",render:function(w,O,B,ne){return(0,H.jsx)(y.Z,{direction:"vertical",style:{textAlign:"left"},children:O==null?void 0:O.Names.map(function(d){return(0,ae.fi)(d,"/")})},O.Id)}},{title:F.FD.format("listPort"),dataIndex:"ports",search:!1,width:150,render:function(w,O,B,ne){var d=[],oe=[];return O!=null&&O.Ports&&O.Ports.map(function(s,c){s.PublicPort?d.push(s):oe.push(s)}),(0,H.jsx)(D.Z,{publicPort:d,privatePort:oe,domain:[]})}},{title:F.FD.format("listImageName"),dataIndex:"image",search:!1,render:function(w,O,B,ne,d){return O.Image}},{title:F.FD.format("listManage"),valueType:"option",key:"option",ellipsis:!0,width:100,render:function(w,O,B,ne){return[(0,H.jsx)(X.Z,{title:F.FD.format("listManageUse"),children:(0,H.jsx)($.ZP,{type:"link",onClick:l()(u()().mark(function d(){var oe;return u()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,M.jV)({md5:O.Id});case 2:oe=c.sent,J.onSelect&&J.onSelect(oe.data.info);case 4:case"end":return c.stop()}},d)})),children:(0,H.jsx)(x.Z,{})},O.Id)},O.Id)]}}],rowKey:"Id",request:function(){var ce=l()(u()().mark(function w(O,B,ne){var d;return u()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,M.IE)({siteTitle:O.name});case 2:return d=s.sent,s.abrupt("return",{data:d.data.list,success:!0,total:d.data.list.length});case 4:case"end":return s.stop()}},w)}));return function(w,O,B){return ce.apply(this,arguments)}}(),pagination:(0,ie.Oh)()})}},89638:function(ge,z,e){e.d(z,{Z:function(){return oe}});var p=e(19632),u=e.n(p),Q=e(36146),l=e(87462),M=e(67294),x=e(11721),S=e(84089),y=function(c,v){return M.createElement(S.Z,(0,l.Z)({},c,{ref:v,icon:x.Z}))},X=M.forwardRef(y),$=X,D=e(58638),ae=e(36693),F={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M508 624a112 112 0 00112-112c0-3.28-.15-6.53-.43-9.74L498.26 623.57c3.21.28 6.45.43 9.74.43zm370.72-458.44L836 122.88a8 8 0 00-11.31 0L715.37 232.23Q624.91 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.7 119.43 136.55 191.45L112.56 835a8 8 0 000 11.31L155.25 889a8 8 0 0011.31 0l712.16-712.12a8 8 0 000-11.32zM332 512a176 176 0 01258.88-155.28l-48.62 48.62a112.08 112.08 0 00-140.92 140.92l-48.62 48.62A175.09 175.09 0 01332 512z"}},{tag:"path",attrs:{d:"M942.2 486.2Q889.4 375 816.51 304.85L672.37 449A176.08 176.08 0 01445 676.37L322.74 798.63Q407.82 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5z"}}]},name:"eye-invisible",theme:"filled"},ie=F,H=function(c,v){return M.createElement(S.Z,(0,l.Z)({},c,{ref:v,icon:ie}))},me=M.forwardRef(H),J=me,ce=e(99611),w=e(38345),O=e(42075),B=e(66309),ne=e(55241),d=e(85893);function oe(s){var c,v=new Q.Uo("components.containerPort"),R=[];s.publicPort&&(R=u()(s.publicPort)),s.privatePort&&(R=[].concat(u()(R),u()(s.privatePort)));var t=(c=s.serverIp)!==null&&c!==void 0?c:"localhost";if(t!=""&&t.indexOf("http")===-1&&t.indexOf(":")>-1&&(t="[".concat(t,"]")),t==""||t=="127.0.0.1"){var Y=document.location.protocol+"//"+document.location.hostname;t=Y}var Ce=(0,d.jsxs)(w.Z,{direction:s.layout=="inline"?"row":"column",style:{width:s.layout!="inline"?600:"auto"},ghost:!0,children:[R.length>0&&(0,d.jsx)(w.Z,{title:(0,d.jsx)($,{}),subTitle:v.format("cardPortTitle"),ghost:s.ghost,bodyStyle:{maxHeight:300,overflow:"auto",margin:"10px 0"},children:R.map(function(n,ue){var fe;return t==""&&n.IP&&(t=n.IP),(0,d.jsx)(O.Z,{size:"large",wrap:!0,children:(0,d.jsx)(B.Z,{color:n.PublicPort?"blue":"yellow",icon:n.PublicPort?(0,d.jsx)(D.Z,{}):"",style:{marginBottom:10,marginRight:15},children:n.PublicPort?(0,d.jsx)("a",{href:"".concat(t.indexOf("http")===0?t:"http://"+t,":").concat(n.PublicPort),target:"_blank",children:"".concat(n.PublicPort?((fe=n.IP)!==null&&fe!==void 0?fe:"0.0.0.0")+":"+n.PublicPort+" -> ":"").concat(n.PrivatePort,"/").concat(n.Type)},"link".concat(ue)):"".concat(n.PrivatePort,"/").concat(n.Type)})},"space".concat(ue))})}),s.domain&&s.domain.length>0&&(0,d.jsx)(w.Z,{title:(0,d.jsx)(ae.Z,{}),subTitle:v.format("cardDomainTitle"),ghost:s.ghost,children:(0,d.jsx)(O.Z,{wrap:!0,style:{textAlign:"left"},children:s.domain&&s.domain.map(function(n,ue){return(0,d.jsx)(B.Z,{color:"blue",icon:(0,d.jsx)(D.Z,{}),children:(0,d.jsx)("a",{href:n,target:"_blank",children:n})},"domain".concat(ue))})})})]});return s.showInDetail?Ce:(0,d.jsx)(ne.Z,{placement:"right",content:Ce,children:(0,d.jsxs)(O.Z,{direction:"vertical",children:[s.privatePort&&s.privatePort.length>0&&(0,d.jsxs)(B.Z,{color:"yellow",icon:(0,d.jsx)(J,{}),children:[v.format("portPrivate"),": ",s.privatePort.length]}),s.publicPort&&s.publicPort.length>0&&(0,d.jsxs)(B.Z,{color:"blue",icon:(0,d.jsx)(ce.Z,{}),children:[v.format("protPublic"),": ",s.publicPort.length]}),s.domain&&s.domain.length>0&&(0,d.jsx)(B.Z,{color:"geekblue",icon:(0,d.jsx)(ae.Z,{}),children:s.domainTitle?s.domainTitle:"".concat(v.format("domain"),": ").concat(s.domain.length)})]})})}},7463:function(ge,z,e){e.r(z),e.d(z,{default:function(){return de}});var p=e(15009),u=e.n(p),Q=e(99289),l=e.n(Q),M=e(5574),x=e.n(M),S=e(1699),y=e(66554),X=e(184),$=e(24739),D=e(97462),ae=e(5966),F=e(62370),ie=e(64317),H=e(86615),me=e(31199),J=e(52688),ce=e(11106),w=e(83622),O=e(92398),B=e(84567),ne=e(42075),d=e(66309),oe=e(71230),s=e(15746),c=e(40056),v=e(67294),R=e(74026),t=e(3616),Y=e(36146),Ce=e(92067),n=e(85893);function ue(b){var A=(0,v.useState)(!1),V=x()(A,2),U=V[0],G=V[1],se=new Y.Uo("components.appDomain");return(0,n.jsx)(X.a,{drawerProps:{width:t.R_},trigger:(0,n.jsx)(w.ZP,{type:"primary",onClick:function(){G(!0)},children:se.format("createSelectContainer")}),onOpenChange:function(_){G(_)},open:U,children:(0,n.jsx)(Ce.Z,{onSelect:function(_){G(!1),b.onSelect&&b.onSelect(_)}})})}var fe=(0,v.forwardRef)(function(b,A){var V=(0,v.useState)(!1),U=x()(V,2),G=U[0],se=U[1],E=(0,v.useRef)(),_=(0,v.useState)(),I=x()(_,2),P=I[0],m=I[1],k=(0,v.useState)(1),T=x()(k,2),L=T[0],q=T[1],h=new Y.Uo("components.appDomain");return(0,v.useImperativeHandle)(A,function(){return{showEdit:function(f){return l()(u()().mark(function a(){var Z,ee,r;return u()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,(0,y.lQ)({id:f});case 2:ee=N.sent,r=ee.data,(Z=E.current)===null||Z===void 0||Z.setFieldsValue({containerId:r.domain.containerId,serverName:r.domain.serverName,serverNameAlias:r.domain.setting.serverNameAlias,serverAddress:r.domain.setting.serverAddress,serverProtocol:r.domain.setting.serverProtocol,port:r.domain.setting.port,enableBlockCommonExploits:r.domain.setting.enableBlockCommonExploits,enableAssetCache:r.domain.setting.enableAssetCache,enableWs:r.domain.setting.enableWs,extraNginx:r.domain.setting.extraNginx,enableSSL:r.domain.setting.enableSSL,certName:r.domain.setting.certName,vhost:r.vhost,type:r.domain.setting.type,wwwRoot:r.domain.setting.wwwRoot,fpmRoot:r.domain.setting.fpmRoot}),m(r),se(!0);case 7:case"end":return N.stop()}},a)}))()}}}),(0,n.jsx)(X.a,{drawerProps:{forceRender:!0,width:t.R_},open:G,onOpenChange:function(f){var a;se(f),!f&&((a=E.current)===null||a===void 0||a.resetFields())},title:h.format("createTitle"),trigger:(0,n.jsx)(w.ZP,{onClick:function(){var f;m(void 0),(f=E.current)===null||f===void 0||f.resetFields()},type:"primary",children:h.format("createTriggerButton")}),formRef:E,onFinish:function(){var te=l()(u()().mark(function f(a){var Z,ee,r,re,N;return u()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(!a.vhost){K.next=8;break}return K.next=3,(0,y.Ss)({id:P&&(P==null?void 0:P.domain.id)>0?P.domain.id:0,vhost:a.vhost});case 3:return ee=K.sent,K.next=6,(0,y.hZ)();case 6:K.next=11;break;case 8:return K.next=10,(0,y.Fj)({id:P&&(P==null?void 0:P.domain.id)>0?P.domain.id:0,containerId:a.containerId,serverName:a.serverName,serverNameAlias:a.serverNameAlias,serverAddress:a.serverAddress,serverProtocol:(r=a.serverProtocol)!==null&&r!==void 0?r:"http",port:parseInt((re=a.port)!==null&&re!==void 0?re:"80"),enableBlockCommonExploits:a.enableBlockCommonExploits,enableAssetCache:a.enableAssetCache,enableWs:a.enableWs,enableSSL:a.enableSSL,extraNginx:a.extraNginx,certName:a.certName,wwwRoot:a.wwwRoot,fpmRoot:a.fpmRoot,type:a.type});case 10:N=K.sent;case 11:return(Z=E.current)===null||Z===void 0||Z.resetFields(),b.onFinish(),K.abrupt("return",!0);case 14:case"end":return K.stop()}},f)}));return function(f){return te.apply(this,arguments)}}(),children:(0,n.jsx)(O.Z,{items:[{key:"1",label:h.format("createTabDomain"),destroyOnHidden:!0,children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)($.UW,{children:[(0,n.jsx)(D.Z,{name:["enableSSL"],children:function(f){var a=f.enableSSL;return(0,n.jsx)(ae.Z,{width:"lg",label:h.format("createFormServerName"),tooltip:h.format("createFormServerNameTip"),name:"serverName",placeholder:"www.explame.com, demo.com:8807",rules:[{required:!0}],fieldProps:{addonBefore:a?"https://":"http://"},disabled:P&&P.domain.id>0})}}),(0,n.jsx)(F.Z,{label:" ",valuePropName:"checked",name:"enableSSL",children:(0,n.jsx)(B.Z,{children:"Https?"})})]}),(0,n.jsx)(ie.Z,{label:h.format("createFormServerNameAlises"),name:"serverNameAlias",mode:"tags",placeholder:h.format("createFormServerNameAlisesEmpty")}),(0,n.jsx)(D.Z,{name:["enableSSL","serverName"],children:function(f){var a=f.enableSSL,Z=f.serverName;if(a)return(0,n.jsxs)(ne.Z.Compact,{children:[(0,n.jsx)(ie.Z,{label:h.format("createFormCertName"),width:"lg",name:"certName",fieldProps:{labelRender:function(r){return r.value}},required:!0,rules:[{required:!0}],request:l()(u()().mark(function ee(){var r;return u()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,(0,y.dZ)();case 2:return r=N.sent,N.abrupt("return",r.data&&r.data.list.map(function(ve,K){return{label:(0,n.jsx)(ne.Z,{wrap:!0,children:ve.domain.map(function(Ee,ye){return(0,n.jsx)(d.Z,{children:Ee})})},K),value:"".concat(ve.domain[0])}}));case 4:case"end":return N.stop()}},ee)}))},L),(0,n.jsx)(F.Z,{label:" ",children:(0,n.jsx)(R.Z,{domain:Z?[Z]:[],onFinish:function(){q(L+1)}})})]})}}),(0,n.jsx)(H.Z.Group,{label:h.format("createFormType"),name:"type",initialValue:"proxy",options:h.option("createFormTypeOption",["proxy","redirect","fpm"]),fieldProps:{onChange:function(f){var a,Z;(a=E.current)===null||a===void 0||a.setFieldValue("containerId",""),(Z=E.current)===null||Z===void 0||Z.setFieldValue("serverAddress","")}}}),(0,n.jsxs)(ne.Z.Compact,{children:[(0,n.jsx)(ie.Z,{label:h.format("createFormProtocol"),tooltip:h.format("createFormProtocolTip"),initialValue:"http",name:"serverProtocol",fieldProps:{allowClear:!1},valueEnum:{http:"http",https:"https"}}),(0,n.jsx)(D.Z,{name:["containerId","type"],children:function(f){var a=f.containerId,Z=f.type;return[(0,n.jsx)(ae.Z,{width:"lg",label:" ",name:"serverAddress",placeholder:h.format("createFormServerAddressEmpty"),required:!0,disabled:a,rules:[{required:!0}]},"serverAddress"),Z!="redirect"&&(0,n.jsxs)(ne.Z.Compact,{children:[(0,n.jsx)(F.Z,{label:" ",name:"containerId",children:(0,n.jsx)(ue,{onSelect:function(){var ee=l()(u()().mark(function r(re){var N,ve,K,Ee,ye,je;return u()().wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:(N=E.current)===null||N===void 0||N.setFieldValue("serverAddress",re.Name),(ve=E.current)===null||ve===void 0||ve.setFieldValue("containerId",re.Id),Z=="fpm"&&(K=re.Config.Labels)!==null&&K!==void 0&&K["com.docker.compose.project"]&&((Ee=E.current)===null||Ee===void 0||Ee.setFieldValue("wwwRoot","/dpanel/compose/".concat((ye=re.Config.Labels)===null||ye===void 0?void 0:ye["com.docker.compose.project"],"/wwwroot")),(je=E.current)===null||je===void 0||je.setFieldValue("fpmRoot","/www"));case 3:case"end":return Ie.stop()}},r)}));return function(r){return ee.apply(this,arguments)}}()})}),(0,n.jsx)(F.Z,{label:" ",children:(0,n.jsx)(w.ZP,{onClick:function(){var r,re;(r=E.current)===null||r===void 0||r.setFieldValue("containerId",""),(re=E.current)===null||re===void 0||re.setFieldValue("serverAddress","")},children:h.format("createUser")})})]},"selectContainer")]}})]}),(0,n.jsx)(me.Z,{label:h.format("createFormPort"),name:"port",placeholder:h.format("createFormPortEmpty")}),(0,n.jsx)(D.Z,{name:["type"],children:function(f){var a=f.type;if(a=="fpm")return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ae.Z,{name:"wwwRoot",label:"\u7F51\u7AD9\u6839\u76EE\u5F55",tooltip:"\u5FC5\u987B\u4F7F\u7528 DPanel \u5BB9\u5668\u5185\u7684\u8DEF\u5F84\u914D\u7F6E\u7F51\u7AD9\u6839\u76EE\u5F55",placeholder:"/dpanel/wwwroot"}),(0,n.jsx)(ae.Z,{name:"fpmRoot",label:"FPM \u6839\u76EE\u5F55",tooltip:"\u76F8\u5BF9\u4E8E FPM \u5BB9\u5668\u4E2D\u7684\u6587\u4EF6\u76EE\u5F55"})]})}}),(0,n.jsx)(D.Z,{name:["type"],children:function(f){var a=f.type;return a!="redirect"&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(oe.Z,{children:[(0,n.jsx)(s.Z,{span:12,children:(0,n.jsx)(J.Z,{label:h.format("createFormEnableBlockCommonExploits"),name:"enableBlockCommonExploits"})}),(0,n.jsx)(s.Z,{children:(0,n.jsx)(J.Z,{width:"md",label:h.format("createFormEnableAssetCache"),name:"enableAssetCache"})})]}),(0,n.jsx)(oe.Z,{children:(0,n.jsx)(s.Z,{span:12,children:(0,n.jsx)(J.Z,{label:h.format("createFormEnableWs"),name:"enableWs",initialValue:!0})})})]})}})]})},{key:"3",label:"vhost.conf",destroyOnHidden:!0,children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.Z,{message:h.format("createVhostTip"),showIcon:!0}),(0,n.jsx)(F.Z,{name:"vhost",label:" ",children:(0,n.jsx)(ce.ZP,{height:"600px",theme:"dark",style:{backgroundColor:"#282c34"},onChange:function(){}})})]})}]})})}),pe=fe,Se=e(5251),Pe=e(83062),xe=e(38703);function be(b){var A,V=0;if(b.sslCrtCreatedAt&&b.sslCrtRenewAt){var U,G,se=new Date,E=new Date((U=b.sslCrtRenewAt)!==null&&U!==void 0?U:""),_=new Date((G=b.sslCrtCreatedAt)!==null&&G!==void 0?G:""),I=Math.ceil((E.getTime()-_.getTime())/86400/1e3),P=Math.ceil((se.getTime()-_.getTime())/86400/1e3);V=Math.min(Math.ceil(P/I*100),100)}return b.certName?(0,n.jsx)(Pe.Z,{placement:"right",title:"".concat(Y.FD.format("listExpireAt"),": ").concat((0,Se.NF)((A=b.sslCrtRenewAt)!==null&&A!==void 0?A:"")),children:(0,n.jsx)(d.Z,{icon:(0,n.jsxs)(ne.Z,{children:[(0,n.jsx)(xe.Z,{type:"circle",percent:V,status:V==100?"exception":"active",strokeWidth:20,size:14}),(0,n.jsx)("span",{})]}),children:b.certName})}):"-"}var o=e(80821),i=e(89638),g=e(55681),C=e(86548),j=e(74453),W=e(63713),le=e(50136);function de(){var b=(0,v.useRef)(),A=(0,v.useRef)(),V=(0,v.useState)({}),U=x()(V,2),G=U[0],se=U[1],E=(0,W.useAccess)(),_=new Y.Uo("app");return(0,n.jsx)(j._z,{extra:[(0,n.jsx)(S.u,{access:"canSeeContainerDomainManage",children:(0,n.jsx)(pe,{ref:A,onFinish:l()(u()().mark(function I(){var P,m;return u()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return!((P=b.current)===null||P===void 0)&&P.reloadAndRest&&((m=b.current)===null||m===void 0||m.reloadAndRest()),T.next=3,(0,y.hZ)();case 3:case"end":return T.stop()}},I)}))},"addDomain")},"addDomain"),(0,n.jsx)(S.u,{access:"canSeeContainerDomainManage",children:(0,n.jsx)(o.Z,{tips:_.format("domainRestartNginxTip"),action:l()(u()().mark(function I(){return u()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,y.hZ)();case 2:return m.abrupt("return",m.sent);case 3:case"end":return m.stop()}},I)})),children:_.format("domainRestartNginx")},"nginx")},"nginx")],children:(0,n.jsx)(g.Co,{rowKey:"id",actionRef:b,columns:[{title:Y.FD.format("listDomain"),dataIndex:"serverName",render:function(P,m,k,T,L){var q=[];return m.serverName&&q.push(m.setting.enableSSL?"https://"+m.serverName:"http://"+m.serverName),m.setting.serverNameAlias&&m.setting.serverNameAlias.map(function(h){q.push(m.setting.enableSSL?"https://"+h:"http://"+h)}),(0,n.jsx)(i.Z,{domain:q,domainTitle:"".concat(m.serverName," (").concat(q.length,")")})}},{title:Y.FD.format("listTargetAddress"),search:!1,render:function(P,m,k,T,L){return"".concat(m.setting.serverAddress,":").concat(m.setting.port)}},{title:Y.FD.format("listCert"),search:!0,dataIndex:"certName",width:300,valueEnum:G,render:function(P,m,k,T,L){return m.setting.enableSSL?(0,n.jsx)(be,{certName:m.setting.certName,sslCrtRenewAt:m.setting.sslCrtRenewAt,sslCrtCreatedAt:m.setting.sslCrtCreatedAt}):"-"}},{title:Y.FD.format("listCreatedAt"),search:!1,width:180,ellipsis:!0,dataIndex:"createdAt",render:function(P,m,k,T,L){return(0,Se.NF)(m.createdAt)}}],request:function(){var I=l()(u()().mark(function P(m,k,T){var L,q,h;return u()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,(0,y.i7)({serverName:m.serverName,certName:m.certName});case 2:return L=f.sent,f.next=5,(0,y.dZ)();case 5:return q=f.sent,h={},L.data.list.map(function(a){a.setting.certName&&typeof a.setting.certName=="string"&&(h[a.setting.certName]=a.setting.certName)}),se(h),f.abrupt("return",{data:L.data.list&&L.data.list.map(function(a){if(q&&q.data.list){var Z,ee;a.setting.sslCrtCreatedAt=(Z=q.data.list.find(function(r){return r.domain[0]==a.setting.certName}))===null||Z===void 0?void 0:Z.createdAt,a.setting.sslCrtRenewAt=(ee=q.data.list.find(function(r){return r.domain[0]==a.setting.certName}))===null||ee===void 0?void 0:ee.renewAt}return a}),success:!0,total:L.data.list.length});case 10:case"end":return f.stop()}},P)}));return function(P,m,k){return I.apply(this,arguments)}}(),rowSelection:E.canSeeContainerDomainManage?{defaultSelectedRowKeys:[],alwaysShowAlert:!0}:void 0,tableExtraRender:function(){return(0,n.jsx)(le.Z,{mode:"horizontal",selectedKeys:["domain"],items:[{label:(0,n.jsx)(W.Link,{to:"/app/domain/list",replace:!0,children:Y.Ob.format("container.domain.list")}),key:"domain"},{label:(0,n.jsx)(W.Link,{to:"/app/domain/cert",replace:!0,children:Y.Ob.format("container.domain.cert")}),key:"cert"}]})},actions:[{key:"edit",label:Y.FD.format("listManageEdit"),icon:(0,n.jsx)(C.Z,{}),showInContext:"manage",showInOperator:!0,action:function(P){return l()(u()().mark(function m(){var k,T,L;return u()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:T=P.finish,L=P.selectedRow,T(!0),(k=A.current)===null||k===void 0||k.showEdit(L.id);case 3:case"end":return h.stop()}},m)}))()}},{key:"delete",action:function(P){return l()(u()().mark(function m(){var k,T,L;return u()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return k=P.loading,T=P.selectedRows,L=P.finish,k(),h.abrupt("return",Promise.all([(0,y.dj)({id:T.map(function(te){return te.id})}),(0,y.hZ)()]).finally(function(){L(!0)}));case 3:case"end":return h.stop()}},m)}))()}}]},"domain-list")})}},13822:function(ge,z,e){e.d(z,{IE:function(){return $},IW:function(){return y},KK:function(){return me},LJ:function(){return ce},RF:function(){return ne},Re:function(){return O},aF:function(){return oe},eE:function(){return ie},jV:function(){return ae}});var p=e(5574),u=e.n(p),Q=e(15009),l=e.n(Q),M=e(99289),x=e.n(M),S=e(63713);function y(c){return X.apply(this,arguments)}function X(){return X=x()(l()().mark(function c(v){return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,S.request)("/dpanel/api/app/container/status",{method:"POST",data:v}));case 1:case"end":return t.stop()}},c)})),X.apply(this,arguments)}function $(c){return D.apply(this,arguments)}function D(){return D=x()(l()().mark(function c(v){return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,S.request)("/dpanel/api/app/container/get-list",{data:v,method:"POST"}));case 1:case"end":return t.stop()}},c)})),D.apply(this,arguments)}function ae(c){return F.apply(this,arguments)}function F(){return F=x()(l()().mark(function c(v){return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,S.request)("/dpanel/api/app/container/get-detail",{data:v,method:"POST"}));case 1:case"end":return t.stop()}},c)})),F.apply(this,arguments)}function ie(c){return H.apply(this,arguments)}function H(){return H=x()(l()().mark(function c(v){return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,S.request)("/dpanel/api/app/container/update",{data:v,method:"POST"}));case 1:case"end":return t.stop()}},c)})),H.apply(this,arguments)}function me(){return J.apply(this,arguments)}function J(){return J=x()(l()().mark(function c(){return l()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.abrupt("return",(0,S.request)("/dpanel/api/app/container/prune",{method:"POST"}));case 1:case"end":return R.stop()}},c)})),J.apply(this,arguments)}function ce(c){return w.apply(this,arguments)}function w(){return w=x()(l()().mark(function c(v){return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!v.enableExportToPath){t.next=2;break}return t.abrupt("return",(0,S.request)("/dpanel/api/app/container/export",{method:"GET",params:v}));case 2:return t.abrupt("return",new Promise(function(Y,Ce){var n=localStorage.getItem("token"),ue=new URLSearchParams;ue.append("token",n||""),Object.entries(v).forEach(function(Se){var Pe=u()(Se,2),xe=Pe[0],be=Pe[1];ue.append(xe,String(be))});var fe="/dpanel/api/app/container/export?".concat(ue.toString()),pe=document.createElement("iframe");pe.style.display="none",pe.src=fe,document.body.appendChild(pe),setTimeout(function(){pe.parentElement&&document.body.removeChild(pe)},5e3),Y({code:200,data:"success",error:""})}));case 3:case"end":return t.stop()}},c)})),w.apply(this,arguments)}function O(c){return B.apply(this,arguments)}function B(){return B=x()(l()().mark(function c(v){return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,S.request)("/dpanel/api/app/container/commit",{method:"POST",data:v}));case 1:case"end":return t.stop()}},c)})),B.apply(this,arguments)}function ne(c){return d.apply(this,arguments)}function d(){return d=x()(l()().mark(function c(v){return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,S.request)("/dpanel/api/app/container/upgrade",{method:"POST",data:v}));case 1:case"end":return t.stop()}},c)})),d.apply(this,arguments)}function oe(c){return s.apply(this,arguments)}function s(){return s=x()(l()().mark(function c(v){return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,S.request)("/dpanel/api/app/container/copy",{method:"POST",data:v}));case 1:case"end":return t.stop()}},c)})),s.apply(this,arguments)}},40056:function(ge,z,e){e.d(z,{Z:function(){return be}});var p=e(67294),u=e(89739),Q=e(4340),l=e(97937),M=e(21640),x=e(78860),S=e(93967),y=e.n(S),X=e(29372),$=e(64217),D=e(42550),ae=e(96159),F=e(53124),ie=e(11568),H=e(14747),me=e(83559);const J=(o,i,g,C,j)=>({background:o,border:`${(0,ie.bf)(C.lineWidth)} ${C.lineType} ${i}`,[`${j}-icon`]:{color:g}}),ce=o=>{const{componentCls:i,motionDurationSlow:g,marginXS:C,marginSM:j,fontSize:W,fontSizeLG:le,lineHeight:de,borderRadiusLG:b,motionEaseInOutCirc:A,withDescriptionIconSize:V,colorText:U,colorTextHeading:G,withDescriptionPadding:se,defaultPadding:E}=o;return{[i]:Object.assign(Object.assign({},(0,H.Wf)(o)),{position:"relative",display:"flex",alignItems:"center",padding:E,wordWrap:"break-word",borderRadius:b,[`&${i}-rtl`]:{direction:"rtl"},[`${i}-content`]:{flex:1,minWidth:0},[`${i}-icon`]:{marginInlineEnd:C,lineHeight:0},"&-description":{display:"none",fontSize:W,lineHeight:de},"&-message":{color:G},[`&${i}-motion-leave`]:{overflow:"hidden",opacity:1,transition:`max-height ${g} ${A}, opacity ${g} ${A},
        padding-top ${g} ${A}, padding-bottom ${g} ${A},
        margin-bottom ${g} ${A}`},[`&${i}-motion-leave-active`]:{maxHeight:0,marginBottom:"0 !important",paddingTop:0,paddingBottom:0,opacity:0}}),[`${i}-with-description`]:{alignItems:"flex-start",padding:se,[`${i}-icon`]:{marginInlineEnd:j,fontSize:V,lineHeight:0},[`${i}-message`]:{display:"block",marginBottom:C,color:G,fontSize:le},[`${i}-description`]:{display:"block",color:U}},[`${i}-banner`]:{marginBottom:0,border:"0 !important",borderRadius:0}}},w=o=>{const{componentCls:i,colorSuccess:g,colorSuccessBorder:C,colorSuccessBg:j,colorWarning:W,colorWarningBorder:le,colorWarningBg:de,colorError:b,colorErrorBorder:A,colorErrorBg:V,colorInfo:U,colorInfoBorder:G,colorInfoBg:se}=o;return{[i]:{"&-success":J(j,C,g,o,i),"&-info":J(se,G,U,o,i),"&-warning":J(de,le,W,o,i),"&-error":Object.assign(Object.assign({},J(V,A,b,o,i)),{[`${i}-description > pre`]:{margin:0,padding:0}})}}},O=o=>{const{componentCls:i,iconCls:g,motionDurationMid:C,marginXS:j,fontSizeIcon:W,colorIcon:le,colorIconHover:de}=o;return{[i]:{"&-action":{marginInlineStart:j},[`${i}-close-icon`]:{marginInlineStart:j,padding:0,overflow:"hidden",fontSize:W,lineHeight:(0,ie.bf)(W),backgroundColor:"transparent",border:"none",outline:"none",cursor:"pointer",[`${g}-close`]:{color:le,transition:`color ${C}`,"&:hover":{color:de}}},"&-close-text":{color:le,transition:`color ${C}`,"&:hover":{color:de}}}}},B=o=>({withDescriptionIconSize:o.fontSizeHeading3,defaultPadding:`${o.paddingContentVerticalSM}px 12px`,withDescriptionPadding:`${o.paddingMD}px ${o.paddingContentHorizontalLG}px`});var ne=(0,me.I$)("Alert",o=>[ce(o),w(o),O(o)],B),d=function(o,i){var g={};for(var C in o)Object.prototype.hasOwnProperty.call(o,C)&&i.indexOf(C)<0&&(g[C]=o[C]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var j=0,C=Object.getOwnPropertySymbols(o);j<C.length;j++)i.indexOf(C[j])<0&&Object.prototype.propertyIsEnumerable.call(o,C[j])&&(g[C[j]]=o[C[j]]);return g};const oe={success:u.Z,info:x.Z,error:Q.Z,warning:M.Z},s=o=>{const{icon:i,prefixCls:g,type:C}=o,j=oe[C]||null;return i?(0,ae.wm)(i,p.createElement("span",{className:`${g}-icon`},i),()=>({className:y()(`${g}-icon`,i.props.className)})):p.createElement(j,{className:`${g}-icon`})},c=o=>{const{isClosable:i,prefixCls:g,closeIcon:C,handleClose:j,ariaProps:W}=o,le=C===!0||C===void 0?p.createElement(l.Z,null):C;return i?p.createElement("button",Object.assign({type:"button",onClick:j,className:`${g}-close-icon`,tabIndex:0},W),le):null};var R=p.forwardRef((o,i)=>{const{description:g,prefixCls:C,message:j,banner:W,className:le,rootClassName:de,style:b,onMouseEnter:A,onMouseLeave:V,onClick:U,afterClose:G,showIcon:se,closable:E,closeText:_,closeIcon:I,action:P,id:m}=o,k=d(o,["description","prefixCls","message","banner","className","rootClassName","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action","id"]),[T,L]=p.useState(!1),q=p.useRef(null);p.useImperativeHandle(i,()=>({nativeElement:q.current}));const{getPrefixCls:h,direction:te,closable:f,closeIcon:a,className:Z,style:ee}=(0,F.dj)("alert"),r=h("alert",C),[re,N,ve]=ne(r),K=he=>{var Oe;L(!0),(Oe=o.onClose)===null||Oe===void 0||Oe.call(o,he)},Ee=p.useMemo(()=>o.type!==void 0?o.type:W?"warning":"info",[o.type,W]),ye=p.useMemo(()=>typeof E=="object"&&E.closeIcon||_?!0:typeof E=="boolean"?E:I!==!1&&I!==null&&I!==void 0?!0:!!f,[_,I,E,f]),je=W&&se===void 0?!0:se,Re=y()(r,`${r}-${Ee}`,{[`${r}-with-description`]:!!g,[`${r}-no-icon`]:!je,[`${r}-banner`]:!!W,[`${r}-rtl`]:te==="rtl"},Z,le,de,ve,N),Ie=(0,$.Z)(k,{aria:!0,data:!0}),De=p.useMemo(()=>typeof E=="object"&&E.closeIcon?E.closeIcon:_||(I!==void 0?I:typeof f=="object"&&f.closeIcon?f.closeIcon:a),[I,E,_,a]),Ae=p.useMemo(()=>{const he=E!=null?E:f;if(typeof he=="object"){const{closeIcon:Oe}=he;return d(he,["closeIcon"])}return{}},[E,f]);return re(p.createElement(X.ZP,{visible:!T,motionName:`${r}-motion`,motionAppear:!1,motionEnter:!1,onLeaveStart:he=>({maxHeight:he.offsetHeight}),onLeaveEnd:G},({className:he,style:Oe},Ze)=>p.createElement("div",Object.assign({id:m,ref:(0,D.sQ)(q,Ze),"data-show":!T,className:y()(Re,he),style:Object.assign(Object.assign(Object.assign({},ee),b),Oe),onMouseEnter:A,onMouseLeave:V,onClick:U,role:"alert"},Ie),je?p.createElement(s,{description:g,icon:o.icon,prefixCls:r,type:Ee}):null,p.createElement("div",{className:`${r}-content`},j?p.createElement("div",{className:`${r}-message`},j):null,g?p.createElement("div",{className:`${r}-description`},g):null),P?p.createElement("div",{className:`${r}-action`},P):null,p.createElement(c,{isClosable:ye,prefixCls:r,closeIcon:De,handleClose:K,ariaProps:Ae}))))}),t=e(15671),Y=e(43144),Ce=e(61120),n=e(78814),ue=e(82963);function fe(o,i,g){return i=(0,Ce.Z)(i),(0,ue.Z)(o,(0,n.Z)()?Reflect.construct(i,g||[],(0,Ce.Z)(o).constructor):i.apply(o,g))}var pe=e(60136),Pe=function(o){function i(){var g;return(0,t.Z)(this,i),g=fe(this,i,arguments),g.state={error:void 0,info:{componentStack:""}},g}return(0,pe.Z)(i,o),(0,Y.Z)(i,[{key:"componentDidCatch",value:function(C,j){this.setState({error:C,info:j})}},{key:"render",value:function(){const{message:C,description:j,id:W,children:le}=this.props,{error:de,info:b}=this.state,A=(b==null?void 0:b.componentStack)||null,V=typeof C=="undefined"?(de||"").toString():C,U=typeof j=="undefined"?A:j;return de?p.createElement(R,{id:W,type:"error",message:V,description:p.createElement("pre",{style:{fontSize:"0.9em",overflowX:"auto"}},U)}):le}}])}(p.Component);const xe=R;xe.ErrorBoundary=Pe;var be=xe}}]);
